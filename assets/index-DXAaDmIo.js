(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const d of h)if(d.type==="childList")for(const b of d.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function o(h){const d={};return h.integrity&&(d.integrity=h.integrity),h.referrerPolicy&&(d.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?d.credentials="include":h.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(h){if(h.ep)return;h.ep=!0;const d=o(h);fetch(h.href,d)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var s=a.default;if(typeof s=="function"){var o=function c(){return this instanceof c?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(a).forEach(function(c){var h=Object.getOwnPropertyDescriptor(a,c);Object.defineProperty(o,c,h.get?h:{enumerable:!0,get:function(){return a[c]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$2&&a[z$2]||a["@@iterator"],typeof a=="function"?a:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$1(a,s,o){this.props=a,this.context=s,this.refs=D$2,this.updater=o||B$2}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(a,s){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,s,"setState")};E$1.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$1(a,s,o){this.props=a,this.context=s,this.refs=D$2,this.updater=o||B$2}var H$1=G$1.prototype=new F$1;H$1.constructor=G$1;C$2(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(a,s,o){var c,h={},d=null,b=null;if(s!=null)for(c in s.ref!==void 0&&(b=s.ref),s.key!==void 0&&(d=""+s.key),s)J$1.call(s,c)&&!L$1.hasOwnProperty(c)&&(h[c]=s[c]);var _=arguments.length-2;if(_===1)h.children=o;else if(1<_){for(var $=Array(_),j=0;j<_;j++)$[j]=arguments[j+2];h.children=$}if(a&&a.defaultProps)for(c in _=a.defaultProps,_)h[c]===void 0&&(h[c]=_[c]);return{$$typeof:l$1,type:a,key:d,ref:b,props:h,_owner:K$1.current}}function N$1(a,s){return{$$typeof:l$1,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}}function O$2(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$1}function escape$2(a){var s={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(o){return s[o]})}var P$6=/\/+/g;function Q$3(a,s){return typeof a=="object"&&a!==null&&a.key!=null?escape$2(""+a.key):s.toString(36)}function R$1(a,s,o,c,h){var d=typeof a;(d==="undefined"||d==="boolean")&&(a=null);var b=!1;if(a===null)b=!0;else switch(d){case"string":case"number":b=!0;break;case"object":switch(a.$$typeof){case l$1:case n$1:b=!0}}if(b)return b=a,h=h(b),a=c===""?"."+Q$3(b,0):c,I$2(h)?(o="",a!=null&&(o=a.replace(P$6,"$&/")+"/"),R$1(h,s,o,"",function(j){return j})):h!=null&&(O$2(h)&&(h=N$1(h,o+(!h.key||b&&b.key===h.key?"":(""+h.key).replace(P$6,"$&/")+"/")+a)),s.push(h)),1;if(b=0,c=c===""?".":c+":",I$2(a))for(var _=0;_<a.length;_++){d=a[_];var $=c+Q$3(d,_);b+=R$1(d,s,o,$,h)}else if($=A$1(a),typeof $=="function")for(a=$.call(a),_=0;!(d=a.next()).done;)d=d.value,$=c+Q$3(d,_++),b+=R$1(d,s,o,$,h);else if(d==="object")throw s=String(a),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return b}function S$2(a,s,o){if(a==null)return a;var c=[],h=0;return R$1(a,c,"","",function(d){return s.call(o,d,h++)}),c}function T$2(a){if(a._status===-1){var s=a._result;s=s(),s.then(function(o){(a._status===0||a._status===-1)&&(a._status=1,a._result=o)},function(o){(a._status===0||a._status===-1)&&(a._status=2,a._result=o)}),a._status===-1&&(a._status=0,a._result=s)}if(a._status===1)return a._result.default;throw a._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(a,s,o){S$2(a,function(){s.apply(this,arguments)},o)},count:function(a){var s=0;return S$2(a,function(){s++}),s},toArray:function(a){return S$2(a,function(s){return s})||[]},only:function(a){if(!O$2(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$1;react_production_min.cloneElement=function(a,s,o){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var c=C$2({},a.props),h=a.key,d=a.ref,b=a._owner;if(s!=null){if(s.ref!==void 0&&(d=s.ref,b=K$1.current),s.key!==void 0&&(h=""+s.key),a.type&&a.type.defaultProps)var _=a.type.defaultProps;for($ in s)J$1.call(s,$)&&!L$1.hasOwnProperty($)&&(c[$]=s[$]===void 0&&_!==void 0?_[$]:s[$])}var $=arguments.length-2;if($===1)c.children=o;else if(1<$){_=Array($);for(var j=0;j<$;j++)_[j]=arguments[j+2];c.children=_}return{$$typeof:l$1,type:a.type,key:h,ref:d,props:c,_owner:b}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t,_context:a},a.Consumer=a};react_production_min.createElement=M$2;react_production_min.createFactory=function(a){var s=M$2.bind(null,a);return s.type=a,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$1,render:a}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(a){return{$$typeof:y$1,_payload:{_status:-1,_result:a},_init:T$2}};react_production_min.memo=function(a,s){return{$$typeof:x,type:a,compare:s===void 0?null:s}};react_production_min.startTransition=function(a){var s=V$2.transition;V$2.transition={};try{a()}finally{V$2.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(a,s){return U$2.current.useCallback(a,s)};react_production_min.useContext=function(a){return U$2.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$2.current.useDeferredValue(a)};react_production_min.useEffect=function(a,s){return U$2.current.useEffect(a,s)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(a,s,o){return U$2.current.useImperativeHandle(a,s,o)};react_production_min.useInsertionEffect=function(a,s){return U$2.current.useInsertionEffect(a,s)};react_production_min.useLayoutEffect=function(a,s){return U$2.current.useLayoutEffect(a,s)};react_production_min.useMemo=function(a,s){return U$2.current.useMemo(a,s)};react_production_min.useReducer=function(a,s,o){return U$2.current.useReducer(a,s,o)};react_production_min.useRef=function(a){return U$2.current.useRef(a)};react_production_min.useState=function(a){return U$2.current.useState(a)};react_production_min.useSyncExternalStore=function(a,s,o){return U$2.current.useSyncExternalStore(a,s,o)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(a,s,o){var c,h={},d=null,b=null;o!==void 0&&(d=""+o),s.key!==void 0&&(d=""+s.key),s.ref!==void 0&&(b=s.ref);for(c in s)m$1.call(s,c)&&!p$2.hasOwnProperty(c)&&(h[c]=s[c]);if(a&&a.defaultProps)for(c in s=a.defaultProps,s)h[c]===void 0&&(h[c]=s[c]);return{$$typeof:k$1,type:a,key:d,ref:b,props:h,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function s(p1,d1){var b1=p1.length;p1.push(d1);e:for(;0<b1;){var C1=b1-1>>>1,g1=p1[C1];if(0<h(g1,d1))p1[C1]=d1,p1[b1]=g1,b1=C1;else break e}}function o(p1){return p1.length===0?null:p1[0]}function c(p1){if(p1.length===0)return null;var d1=p1[0],b1=p1.pop();if(b1!==d1){p1[0]=b1;e:for(var C1=0,g1=p1.length,o1=g1>>>1;C1<o1;){var S1=2*(C1+1)-1,v1=p1[S1],B1=S1+1,T1=p1[B1];if(0>h(v1,b1))B1<g1&&0>h(T1,v1)?(p1[C1]=T1,p1[B1]=b1,C1=B1):(p1[C1]=v1,p1[S1]=b1,C1=S1);else if(B1<g1&&0>h(T1,b1))p1[C1]=T1,p1[B1]=b1,C1=B1;else break e}}return d1}function h(p1,d1){var b1=p1.sortIndex-d1.sortIndex;return b1!==0?b1:p1.id-d1.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var b=Date,_=b.now();a.unstable_now=function(){return b.now()-_}}var $=[],j=[],Xt=1,Lt=null,fr=3,Jr=!1,Js=!1,qs=!1,zo=typeof setTimeout=="function"?setTimeout:null,js=typeof clearTimeout=="function"?clearTimeout:null,eu=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Oo(p1){for(var d1=o(j);d1!==null;){if(d1.callback===null)c(j);else if(d1.startTime<=p1)c(j),d1.sortIndex=d1.expirationTime,s($,d1);else break;d1=o(j)}}function tu(p1){if(qs=!1,Oo(p1),!Js)if(o($)!==null)Js=!0,l1(Bo);else{var d1=o(j);d1!==null&&f1(tu,d1.startTime-p1)}}function Bo(p1,d1){Js=!1,qs&&(qs=!1,js(e1),e1=-1),Jr=!0;var b1=fr;try{for(Oo(d1),Lt=o($);Lt!==null&&(!(Lt.expirationTime>d1)||p1&&!i1());){var C1=Lt.callback;if(typeof C1=="function"){Lt.callback=null,fr=Lt.priorityLevel;var g1=C1(Lt.expirationTime<=d1);d1=a.unstable_now(),typeof g1=="function"?Lt.callback=g1:Lt===o($)&&c($),Oo(d1)}else c($);Lt=o($)}if(Lt!==null)var o1=!0;else{var S1=o(j);S1!==null&&f1(tu,S1.startTime-d1),o1=!1}return o1}finally{Lt=null,fr=b1,Jr=!1}}var vu=!1,t1=null,e1=-1,r1=5,a1=-1;function i1(){return!(a.unstable_now()-a1<r1)}function s1(){if(t1!==null){var p1=a.unstable_now();a1=p1;var d1=!0;try{d1=t1(!0,p1)}finally{d1?c1():(vu=!1,t1=null)}}else vu=!1}var c1;if(typeof eu=="function")c1=function(){eu(s1)};else if(typeof MessageChannel<"u"){var h1=new MessageChannel,m1=h1.port2;h1.port1.onmessage=s1,c1=function(){m1.postMessage(null)}}else c1=function(){zo(s1,0)};function l1(p1){t1=p1,vu||(vu=!0,c1())}function f1(p1,d1){e1=zo(function(){p1(a.unstable_now())},d1)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(p1){p1.callback=null},a.unstable_continueExecution=function(){Js||Jr||(Js=!0,l1(Bo))},a.unstable_forceFrameRate=function(p1){0>p1||125<p1?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):r1=0<p1?Math.floor(1e3/p1):5},a.unstable_getCurrentPriorityLevel=function(){return fr},a.unstable_getFirstCallbackNode=function(){return o($)},a.unstable_next=function(p1){switch(fr){case 1:case 2:case 3:var d1=3;break;default:d1=fr}var b1=fr;fr=d1;try{return p1()}finally{fr=b1}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(p1,d1){switch(p1){case 1:case 2:case 3:case 4:case 5:break;default:p1=3}var b1=fr;fr=p1;try{return d1()}finally{fr=b1}},a.unstable_scheduleCallback=function(p1,d1,b1){var C1=a.unstable_now();switch(typeof b1=="object"&&b1!==null?(b1=b1.delay,b1=typeof b1=="number"&&0<b1?C1+b1:C1):b1=C1,p1){case 1:var g1=-1;break;case 2:g1=250;break;case 5:g1=1073741823;break;case 4:g1=1e4;break;default:g1=5e3}return g1=b1+g1,p1={id:Xt++,callback:d1,priorityLevel:p1,startTime:b1,expirationTime:g1,sortIndex:-1},b1>C1?(p1.sortIndex=b1,s(j,p1),o($)===null&&p1===o(j)&&(qs?(js(e1),e1=-1):qs=!0,f1(tu,b1-C1))):(p1.sortIndex=g1,s($,p1),Js||Jr||(Js=!0,l1(Bo))),p1},a.unstable_shouldYield=i1,a.unstable_wrapCallback=function(p1){var d1=fr;return function(){var b1=fr;fr=d1;try{return p1.apply(this,arguments)}finally{fr=b1}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$1(a){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+a,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(a,s){ha$1(a,s),ha$1(a+"Capture",s)}function ha$1(a,s){for(ea$1[a]=s,a=0;a<s.length;a++)da$1.add(s[a])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(a){return ja$1.call(ma$1,a)?!0:ja$1.call(la$1,a)?!1:ka$1.test(a)?ma$1[a]=!0:(la$1[a]=!0,!1)}function pa$1(a,s,o,c){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa$1(a,s,o,c){if(s===null||typeof s>"u"||pa$1(a,s,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(a,s,o,c,h,d,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=a,this.type=s,this.sanitizeURL=d,this.removeEmptyString=b}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z$1[a]=new v(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var s=a[0];z$1[s]=new v(s,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z$1[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z$1[a]=new v(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z$1[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z$1[a]=new v(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z$1[a]=new v(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z$1[a]=new v(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z$1[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var s=a.replace(ra$1,sa$1);z$1[s]=new v(s,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var s=a.replace(ra$1,sa$1);z$1[s]=new v(s,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var s=a.replace(ra$1,sa$1);z$1[s]=new v(s,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z$1[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z$1[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta$1(a,s,o,c){var h=z$1.hasOwnProperty(s)?z$1[s]:null;(h!==null?h.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa$1(s,o,h,c)&&(o=null),c||h===null?oa$1(s)&&(o===null?a.removeAttribute(s):a.setAttribute(s,""+o)):h.mustUseProperty?a[h.propertyName]=o===null?h.type===3?!1:"":o:(s=h.attributeName,c=h.attributeNamespace,o===null?a.removeAttribute(s):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,c?a.setAttributeNS(c,s,o):a.setAttribute(s,o))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(a){return a===null||typeof a!="object"?null:(a=Ja$1&&a[Ja$1]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La$1;function Ma$1(a){if(La$1===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);La$1=s&&s[1]||""}return`
`+La$1+a}var Na$1=!1;function Oa$1(a,s){if(!a||Na$1)return"";Na$1=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var c=j}Reflect.construct(a,[],s)}else{try{s.call()}catch(j){c=j}a.call(s.prototype)}else{try{throw Error()}catch(j){c=j}a()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var h=j.stack.split(`
`),d=c.stack.split(`
`),b=h.length-1,_=d.length-1;1<=b&&0<=_&&h[b]!==d[_];)_--;for(;1<=b&&0<=_;b--,_--)if(h[b]!==d[_]){if(b!==1||_!==1)do if(b--,_--,0>_||h[b]!==d[_]){var $=`
`+h[b].replace(" at new "," at ");return a.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",a.displayName)),$}while(1<=b&&0<=_);break}}}finally{Na$1=!1,Error.prepareStackTrace=o}return(a=a?a.displayName||a.name:"")?Ma$1(a):""}function Pa$1(a){switch(a.tag){case 5:return Ma$1(a.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return a=Oa$1(a.type,!1),a;case 11:return a=Oa$1(a.type.render,!1),a;case 1:return a=Oa$1(a.type,!0),a;default:return""}}function Qa$1(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca$1:return(a.displayName||"Context")+".Consumer";case Ba$1:return(a._context.displayName||"Context")+".Provider";case Da$1:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga$1:return s=a.displayName||null,s!==null?s:Qa$1(a.type)||"Memo";case Ha$1:s=a._payload,a=a._init;try{return Qa$1(a(s))}catch{}}return null}function Ra$1(a){var s=a.type;switch(a.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=s.render,a=a.displayName||a.name||"",s.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(s);case 8:return s===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa$1(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta$1(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua$1(a){var s=Ta$1(a)?"checked":"value",o=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),c=""+a[s];if(!a.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return h.call(this)},set:function(b){c=""+b,d.call(this,b)}}),Object.defineProperty(a,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Va$1(a){a._valueTracker||(a._valueTracker=Ua$1(a))}function Wa$1(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return a&&(c=Ta$1(a)?a.checked?"true":"false":a.value),a=c,a!==o?(s.setValue(a),!0):!1}function Xa$1(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya$1(a,s){var o=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??a._wrapperState.initialChecked})}function Za$1(a,s){var o=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;o=Sa$1(s.value!=null?s.value:o),a._wrapperState={initialChecked:c,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab$1(a,s){s=s.checked,s!=null&&ta$1(a,"checked",s,!1)}function bb$1(a,s){ab$1(a,s);var o=Sa$1(s.value),c=s.type;if(o!=null)c==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+o):a.value!==""+o&&(a.value=""+o);else if(c==="submit"||c==="reset"){a.removeAttribute("value");return}s.hasOwnProperty("value")?cb$1(a,s.type,o):s.hasOwnProperty("defaultValue")&&cb$1(a,s.type,Sa$1(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(a.defaultChecked=!!s.defaultChecked)}function db$1(a,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+a._wrapperState.initialValue,o||s===a.value||(a.value=s),a.defaultValue=s}o=a.name,o!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,o!==""&&(a.name=o)}function cb$1(a,s,o){(s!=="number"||Xa$1(a.ownerDocument)!==a)&&(o==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+o&&(a.defaultValue=""+o))}var eb$1=Array.isArray;function fb$1(a,s,o,c){if(a=a.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<a.length;o++)h=s.hasOwnProperty("$"+a[o].value),a[o].selected!==h&&(a[o].selected=h),h&&c&&(a[o].defaultSelected=!0)}else{for(o=""+Sa$1(o),s=null,h=0;h<a.length;h++){if(a[h].value===o){a[h].selected=!0,c&&(a[h].defaultSelected=!0);return}s!==null||a[h].disabled||(s=a[h])}s!==null&&(s.selected=!0)}}function gb$1(a,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb$1(a,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(p$1(92));if(eb$1(o)){if(1<o.length)throw Error(p$1(93));o=o[0]}s=o}s==null&&(s=""),o=s}a._wrapperState={initialValue:Sa$1(o)}}function ib$1(a,s){var o=Sa$1(s.value),c=Sa$1(s.defaultValue);o!=null&&(o=""+o,o!==a.value&&(a.value=o),s.defaultValue==null&&a.defaultValue!==o&&(a.defaultValue=o)),c!=null&&(a.defaultValue=""+c)}function jb$1(a){var s=a.textContent;s===a._wrapperState.initialValue&&s!==""&&s!==null&&(a.value=s)}function kb$1(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(a,s){return a==null||a==="http://www.w3.org/1999/xhtml"?kb$1(s):a==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb$1,nb$1=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,c,h){MSApp.execUnsafeLocalFunction(function(){return a(s,o,c,h)})}:a}(function(a,s){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=s;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb$1.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)a.appendChild(s.firstChild)}});function ob$1(a,s){if(s){var o=a.firstChild;if(o&&o===a.lastChild&&o.nodeType===3){o.nodeValue=s;return}}a.textContent=s}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(a){qb$1.forEach(function(s){s=s+a.charAt(0).toUpperCase()+a.substring(1),pb$1[s]=pb$1[a]})});function rb$1(a,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||pb$1.hasOwnProperty(a)&&pb$1[a]?(""+s).trim():s+"px"}function sb$1(a,s){a=a.style;for(var o in s)if(s.hasOwnProperty(o)){var c=o.indexOf("--")===0,h=rb$1(o,s[o],c);o==="float"&&(o="cssFloat"),c?a.setProperty(o,h):a[o]=h}}var tb$1=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(a,s){if(s){if(tb$1[a]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p$1(137,a));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p$1(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p$1(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p$1(62))}}function vb$1(a,s){if(a.indexOf("-")===-1)return typeof s.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(a){if(a=Cb$1(a)){if(typeof yb$1!="function")throw Error(p$1(280));var s=a.stateNode;s&&(s=Db$1(s),yb$1(a.stateNode,a.type,s))}}function Eb$1(a){zb$1?Ab$1?Ab$1.push(a):Ab$1=[a]:zb$1=a}function Fb$1(){if(zb$1){var a=zb$1,s=Ab$1;if(Ab$1=zb$1=null,Bb$1(a),s)for(a=0;a<s.length;a++)Bb$1(s[a])}}function Gb$1(a,s){return a(s)}function Hb$1(){}var Ib$1=!1;function Jb$1(a,s,o){if(Ib$1)return a(s,o);Ib$1=!0;try{return Gb$1(a,s,o)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(a,s){var o=a.stateNode;if(o===null)return null;var c=Db$1(o);if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(a=a.type,c=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!c;break e;default:a=!1}if(a)return null;if(o&&typeof o!="function")throw Error(p$1(231,s,typeof o));return o}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(a,s,o,c,h,d,b,_,$){var j=Array.prototype.slice.call(arguments,3);try{s.apply(o,j)}catch(Xt){this.onError(Xt)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(a){Ob$1=!0,Pb$1=a}};function Tb$1(a,s,o,c,h,d,b,_,$){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(a,s,o,c,h,d,b,_,$){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var j=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$1(198));Qb$1||(Qb$1=!0,Rb$1=j)}}function Vb$1(a){var s=a,o=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,s.flags&4098&&(o=s.return),a=s.return;while(a)}return s.tag===3?o:null}function Wb$1(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function Xb$1(a){if(Vb$1(a)!==a)throw Error(p$1(188))}function Yb$1(a){var s=a.alternate;if(!s){if(s=Vb$1(a),s===null)throw Error(p$1(188));return s!==a?null:a}for(var o=a,c=s;;){var h=o.return;if(h===null)break;var d=h.alternate;if(d===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===o)return Xb$1(h),a;if(d===c)return Xb$1(h),s;d=d.sibling}throw Error(p$1(188))}if(o.return!==c.return)o=h,c=d;else{for(var b=!1,_=h.child;_;){if(_===o){b=!0,o=h,c=d;break}if(_===c){b=!0,c=h,o=d;break}_=_.sibling}if(!b){for(_=d.child;_;){if(_===o){b=!0,o=d,c=h;break}if(_===c){b=!0,c=d,o=h;break}_=_.sibling}if(!b)throw Error(p$1(189))}}if(o.alternate!==c)throw Error(p$1(190))}if(o.tag!==3)throw Error(p$1(188));return o.stateNode.current===o?a:s}function Zb$1(a){return a=Yb$1(a),a!==null?$b$1(a):null}function $b$1(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var s=$b$1(a);if(s!==null)return s;a=a.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$1=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(a){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,a,void 0,(a.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(a){return a>>>=0,a===0?32:31-(pc$1(a)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc$1(a,s){var o=a.pendingLanes;if(o===0)return 0;var c=0,h=a.suspendedLanes,d=a.pingedLanes,b=o&268435455;if(b!==0){var _=b&~h;_!==0?c=tc$1(_):(d&=b,d!==0&&(c=tc$1(d)))}else b=o&~h,b!==0?c=tc$1(b):d!==0&&(c=tc$1(d));if(c===0)return 0;if(s!==0&&s!==c&&!(s&h)&&(h=c&-c,d=s&-s,h>=d||h===16&&(d&4194240)!==0))return s;if(c&4&&(c|=o&16),s=a.entangledLanes,s!==0)for(a=a.entanglements,s&=c;0<s;)o=31-oc$1(s),h=1<<o,c|=a[o],s&=~h;return c}function vc$1(a,s){switch(a){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(a,s){for(var o=a.suspendedLanes,c=a.pingedLanes,h=a.expirationTimes,d=a.pendingLanes;0<d;){var b=31-oc$1(d),_=1<<b,$=h[b];$===-1?(!(_&o)||_&c)&&(h[b]=vc$1(_,s)):$<=s&&(a.expiredLanes|=_),d&=~_}}function xc$1(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc$1(){var a=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),a}function zc$1(a){for(var s=[],o=0;31>o;o++)s.push(a);return s}function Ac$1(a,s,o){a.pendingLanes|=s,s!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,s=31-oc$1(s),a[s]=o}function Bc$1(a,s){var o=a.pendingLanes&~s;a.pendingLanes=s,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=s,a.mutableReadLanes&=s,a.entangledLanes&=s,s=a.entanglements;var c=a.eventTimes;for(a=a.expirationTimes;0<o;){var h=31-oc$1(o),d=1<<h;s[h]=0,c[h]=-1,a[h]=-1,o&=~d}}function Cc$1(a,s){var o=a.entangledLanes|=s;for(a=a.entanglements;o;){var c=31-oc$1(o),h=1<<c;h&s|a[c]&s&&(a[c]|=s),o&=~h}}var C$1=0;function Dc$2(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$2(a,s){switch(a){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(s.pointerId)}}function Tc$2(a,s,o,c,h,d){return a===null||a.nativeEvent!==d?(a={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:d,targetContainers:[h]},s!==null&&(s=Cb$1(s),s!==null&&Fc$1(s)),a):(a.eventSystemFlags|=c,s=a.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),a)}function Uc$1(a,s,o,c,h){switch(s){case"focusin":return Lc$1=Tc$2(Lc$1,a,s,o,c,h),!0;case"dragenter":return Mc$1=Tc$2(Mc$1,a,s,o,c,h),!0;case"mouseover":return Nc$1=Tc$2(Nc$1,a,s,o,c,h),!0;case"pointerover":var d=h.pointerId;return Oc$1.set(d,Tc$2(Oc$1.get(d)||null,a,s,o,c,h)),!0;case"gotpointercapture":return d=h.pointerId,Pc$1.set(d,Tc$2(Pc$1.get(d)||null,a,s,o,c,h)),!0}return!1}function Vc$1(a){var s=Wc$1(a.target);if(s!==null){var o=Vb$1(s);if(o!==null){if(s=o.tag,s===13){if(s=Wb$1(o),s!==null){a.blockedOn=s,Ic$1(a.priority,function(){Gc$1(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){a.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc$1(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var o=Yc(a.domEventName,a.eventSystemFlags,s[0],a.nativeEvent);if(o===null){o=a.nativeEvent;var c=new o.constructor(o.type,o);wb$1=c,o.target.dispatchEvent(c),wb$1=null}else return s=Cb$1(o),s!==null&&Fc$1(s),a.blockedOn=o,!1;s.shift()}return!0}function Zc$1(a,s,o){Xc$1(a)&&o.delete(s)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(a,s){a.blockedOn===s&&(a.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(a){function s(h){return ad$1(h,a)}if(0<Kc$1.length){ad$1(Kc$1[0],a);for(var o=1;o<Kc$1.length;o++){var c=Kc$1[o];c.blockedOn===a&&(c.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,a),Mc$1!==null&&ad$1(Mc$1,a),Nc$1!==null&&ad$1(Nc$1,a),Oc$1.forEach(s),Pc$1.forEach(s),o=0;o<Qc.length;o++)c=Qc[o],c.blockedOn===a&&(c.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc$1(o),o.blockedOn===null&&Qc.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(a,s,o,c){var h=C$1,d=cd$1.transition;cd$1.transition=null;try{C$1=1,fd$1(a,s,o,c)}finally{C$1=h,cd$1.transition=d}}function gd$1(a,s,o,c){var h=C$1,d=cd$1.transition;cd$1.transition=null;try{C$1=4,fd$1(a,s,o,c)}finally{C$1=h,cd$1.transition=d}}function fd$1(a,s,o,c){if(dd$1){var h=Yc(a,s,o,c);if(h===null)hd$1(a,s,c,id$1,o),Sc$2(a,c);else if(Uc$1(h,a,s,o,c))c.stopPropagation();else if(Sc$2(a,c),s&4&&-1<Rc$1.indexOf(a)){for(;h!==null;){var d=Cb$1(h);if(d!==null&&Ec$1(d),d=Yc(a,s,o,c),d===null&&hd$1(a,s,c,id$1,o),d===h)break;h=d}h!==null&&c.stopPropagation()}else hd$1(a,s,c,null,o)}}var id$1=null;function Yc(a,s,o,c){if(id$1=null,a=xb$1(c),a=Wc$1(a),a!==null)if(s=Vb$1(a),s===null)a=null;else if(o=s.tag,o===13){if(a=Wb$1(s),a!==null)return a;a=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null);return id$1=a,null}function jd$1(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var a,s=ld$1,o=s.length,c,h="value"in kd$1?kd$1.value:kd$1.textContent,d=h.length;for(a=0;a<o&&s[a]===h[a];a++);var b=o-a;for(c=1;c<=b&&s[o-c]===h[d-c];c++);return md$1=h.slice(a,1<c?1-c:void 0)}function od$1(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(a){function s(o,c,h,d,b){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(o=a[_],this[_]=o?o(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),s}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd$1&&(yd$1&&a.type==="mousemove"?(wd$1=a.screenX-yd$1.screenX,xd$1=a.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=a),wd$1)},movementY:function(a){return"movementY"in a?a.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A({},sd$1,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Od$1[a])?!!s[a]:!1}function zd$1(){return Pd$1}var Qd$1=A({},ud$1,{key:function(a){if(a.key){var s=Md$1[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=od$1(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd$1[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(a){return a.type==="keypress"?od$1(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od$1(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A({},Ad$1,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be=null;ia$1&&"documentMode"in document&&(be=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be,de$1=ia$1&&(!ae$1||be&&8<be&&11>=be),ee$1=" ",fe$1=!1;function ge$1(a,s){switch(a){case"keyup":return $d$1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je$1(a,s){switch(a){case"compositionend":return he$1(s);case"keypress":return s.which!==32?null:(fe$1=!0,ee$1);case"textInput":return a=s.data,a===ee$1&&fe$1?null:a;default:return null}}function ke$1(a,s){if(ie)return a==="compositionend"||!ae$1&&ge$1(a,s)?(a=nd$1(),md$1=ld$1=kd$1=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de$1&&s.locale!=="ko"?null:s.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!le$1[a.type]:s==="textarea"}function ne$1(a,s,o,c){Eb$1(c),s=oe$1(s,"onChange"),0<s.length&&(o=new td$1("onChange","change",null,o,c),a.push({event:o,listeners:s}))}var pe$1=null,qe$1=null;function re$2(a){se$1(a,0)}function te$1(a){var s=ue(a);if(Wa$1(s))return a}function ve$1(a,s){if(a==="change")return s}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye="oninput"in document;if(!ye){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye=typeof ze$1.oninput=="function"}xe$1=ye}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe$1=pe$1=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe$1)){var s=[];ne$1(s,qe$1,a,xb$1(a)),Jb$1(re$2,s)}}function Ce$1(a,s,o){a==="focusin"?(Ae$1(),pe$1=s,qe$1=o,pe$1.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae$1()}function De$1(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe$1)}function Ee$1(a,s){if(a==="click")return te$1(s)}function Fe$1(a,s){if(a==="input"||a==="change")return te$1(s)}function Ge$1(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(a,s){if(He$1(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var o=Object.keys(a),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!ja$1.call(s,h)||!He$1(a[h],s[h]))return!1}return!0}function Je$1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke$1(a,s){var o=Je$1(a);a=0;for(var c;o;){if(o.nodeType===3){if(c=a+o.textContent.length,a<=s&&c>=s)return{node:o,offset:s-a};a=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je$1(o)}}function Le$1(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Le$1(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Me$1(){for(var a=window,s=Xa$1();s instanceof a.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)a=s.contentWindow;else break;s=Xa$1(a.document)}return s}function Ne$1(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}function Oe$1(a){var s=Me$1(),o=a.focusedElem,c=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Le$1(o.ownerDocument.documentElement,o)){if(c!==null&&Ne$1(o)){if(s=c.start,a=c.end,a===void 0&&(a=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(a,o.value.length);else if(a=(s=o.ownerDocument||document)&&s.defaultView||window,a.getSelection){a=a.getSelection();var h=o.textContent.length,d=Math.min(c.start,h);c=c.end===void 0?d:Math.min(c.end,h),!a.extend&&d>c&&(h=c,c=d,d=h),h=Ke$1(o,d);var b=Ke$1(o,c);h&&b&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==b.node||a.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),a.removeAllRanges(),d>c?(a.addRange(s),a.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),a.addRange(s)))}}for(s=[],a=o;a=a.parentNode;)a.nodeType===1&&s.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)a=s[o],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se=null,Te$1=!1;function Ue(a,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(c)||(c=Qe$1,"selectionStart"in c&&Ne$1(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Se&&Ie$1(Se,c)||(Se=c,c=oe$1(Re$1,"onSelect"),0<c.length&&(s=new td$1("onSelect","select",null,s,o),a.push({event:s,listeners:c}),s.target=Qe$1)))}function Ve$1(a,s){var o={};return o[a.toLowerCase()]=s.toLowerCase(),o["Webkit"+a]="webkit"+s,o["Moz"+a]="moz"+s,o}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(a){if(Xe$1[a])return Xe$1[a];if(!We$1[a])return a;var s=We$1[a],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ye)return Xe$1[a]=s[o];return a}var $e$1=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(a,s){df$1.set(a,s),fa$1(s,[a])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$1,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(a,s,o){var c=a.type||"unknown-event";a.currentTarget=o,Ub$1(c,s,void 0,a),a.currentTarget=null}function se$1(a,s){s=(s&4)!==0;for(var o=0;o<a.length;o++){var c=a[o],h=c.event;c=c.listeners;e:{var d=void 0;if(s)for(var b=c.length-1;0<=b;b--){var _=c[b],$=_.instance,j=_.currentTarget;if(_=_.listener,$!==d&&h.isPropagationStopped())break e;nf$1(h,_,j),d=$}else for(b=0;b<c.length;b++){if(_=c[b],$=_.instance,j=_.currentTarget,_=_.listener,$!==d&&h.isPropagationStopped())break e;nf$1(h,_,j),d=$}}}if(Qb$1)throw a=Rb$1,Qb$1=!1,Rb$1=null,a}function D$1(a,s){var o=s[of$1];o===void 0&&(o=s[of$1]=new Set);var c=a+"__bubble";o.has(c)||(pf$1(s,a,2,!1),o.add(c))}function qf$1(a,s,o){var c=0;s&&(c|=4),pf$1(o,a,c,s)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(a){if(!a[rf$1]){a[rf$1]=!0,da$1.forEach(function(o){o!=="selectionchange"&&(mf$1.has(o)||qf$1(o,!1,a),qf$1(o,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[rf$1]||(s[rf$1]=!0,qf$1("selectionchange",!1,s))}}function pf$1(a,s,o,c){switch(jd$1(s)){case 1:var h=ed$1;break;case 4:h=gd$1;break;default:h=fd$1}o=h.bind(null,s,o,a),h=void 0,!Lb$1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?a.addEventListener(s,o,{capture:!0,passive:h}):a.addEventListener(s,o,!0):h!==void 0?a.addEventListener(s,o,{passive:h}):a.addEventListener(s,o,!1)}function hd$1(a,s,o,c,h){var d=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var _=c.stateNode.containerInfo;if(_===h||_.nodeType===8&&_.parentNode===h)break;if(b===4)for(b=c.return;b!==null;){var $=b.tag;if(($===3||$===4)&&($=b.stateNode.containerInfo,$===h||$.nodeType===8&&$.parentNode===h))return;b=b.return}for(;_!==null;){if(b=Wc$1(_),b===null)return;if($=b.tag,$===5||$===6){c=d=b;continue e}_=_.parentNode}}c=c.return}Jb$1(function(){var j=d,Xt=xb$1(o),Lt=[];e:{var fr=df$1.get(a);if(fr!==void 0){var Jr=td$1,Js=a;switch(a){case"keypress":if(od$1(o)===0)break e;case"keydown":case"keyup":Jr=Rd$1;break;case"focusin":Js="focus",Jr=Fd$1;break;case"focusout":Js="blur",Jr=Fd$1;break;case"beforeblur":case"afterblur":Jr=Fd$1;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Jr=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Jr=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Jr=Vd$1;break;case $e$1:case af$1:case bf$1:Jr=Hd$1;break;case cf$1:Jr=Xd$1;break;case"scroll":Jr=vd$1;break;case"wheel":Jr=Zd$1;break;case"copy":case"cut":case"paste":Jr=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Jr=Td$1}var qs=(s&4)!==0,zo=!qs&&a==="scroll",js=qs?fr!==null?fr+"Capture":null:fr;qs=[];for(var eu=j,Oo;eu!==null;){Oo=eu;var tu=Oo.stateNode;if(Oo.tag===5&&tu!==null&&(Oo=tu,js!==null&&(tu=Kb$1(eu,js),tu!=null&&qs.push(tf$1(eu,tu,Oo)))),zo)break;eu=eu.return}0<qs.length&&(fr=new Jr(fr,Js,null,o,Xt),Lt.push({event:fr,listeners:qs}))}}if(!(s&7)){e:{if(fr=a==="mouseover"||a==="pointerover",Jr=a==="mouseout"||a==="pointerout",fr&&o!==wb$1&&(Js=o.relatedTarget||o.fromElement)&&(Wc$1(Js)||Js[uf$1]))break e;if((Jr||fr)&&(fr=Xt.window===Xt?Xt:(fr=Xt.ownerDocument)?fr.defaultView||fr.parentWindow:window,Jr?(Js=o.relatedTarget||o.toElement,Jr=j,Js=Js?Wc$1(Js):null,Js!==null&&(zo=Vb$1(Js),Js!==zo||Js.tag!==5&&Js.tag!==6)&&(Js=null)):(Jr=null,Js=j),Jr!==Js)){if(qs=Bd$1,tu="onMouseLeave",js="onMouseEnter",eu="mouse",(a==="pointerout"||a==="pointerover")&&(qs=Td$1,tu="onPointerLeave",js="onPointerEnter",eu="pointer"),zo=Jr==null?fr:ue(Jr),Oo=Js==null?fr:ue(Js),fr=new qs(tu,eu+"leave",Jr,o,Xt),fr.target=zo,fr.relatedTarget=Oo,tu=null,Wc$1(Xt)===j&&(qs=new qs(js,eu+"enter",Js,o,Xt),qs.target=Oo,qs.relatedTarget=zo,tu=qs),zo=tu,Jr&&Js)t:{for(qs=Jr,js=Js,eu=0,Oo=qs;Oo;Oo=vf$1(Oo))eu++;for(Oo=0,tu=js;tu;tu=vf$1(tu))Oo++;for(;0<eu-Oo;)qs=vf$1(qs),eu--;for(;0<Oo-eu;)js=vf$1(js),Oo--;for(;eu--;){if(qs===js||js!==null&&qs===js.alternate)break t;qs=vf$1(qs),js=vf$1(js)}qs=null}else qs=null;Jr!==null&&wf$1(Lt,fr,Jr,qs,!1),Js!==null&&zo!==null&&wf$1(Lt,zo,Js,qs,!0)}}e:{if(fr=j?ue(j):window,Jr=fr.nodeName&&fr.nodeName.toLowerCase(),Jr==="select"||Jr==="input"&&fr.type==="file")var Bo=ve$1;else if(me$1(fr))if(we$1)Bo=Fe$1;else{Bo=De$1;var vu=Ce$1}else(Jr=fr.nodeName)&&Jr.toLowerCase()==="input"&&(fr.type==="checkbox"||fr.type==="radio")&&(Bo=Ee$1);if(Bo&&(Bo=Bo(a,j))){ne$1(Lt,Bo,o,Xt);break e}vu&&vu(a,fr,j),a==="focusout"&&(vu=fr._wrapperState)&&vu.controlled&&fr.type==="number"&&cb$1(fr,"number",fr.value)}switch(vu=j?ue(j):window,a){case"focusin":(me$1(vu)||vu.contentEditable==="true")&&(Qe$1=vu,Re$1=j,Se=null);break;case"focusout":Se=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(Lt,o,Xt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue(Lt,o,Xt)}var t1;if(ae$1)e:{switch(a){case"compositionstart":var e1="onCompositionStart";break e;case"compositionend":e1="onCompositionEnd";break e;case"compositionupdate":e1="onCompositionUpdate";break e}e1=void 0}else ie?ge$1(a,o)&&(e1="onCompositionEnd"):a==="keydown"&&o.keyCode===229&&(e1="onCompositionStart");e1&&(de$1&&o.locale!=="ko"&&(ie||e1!=="onCompositionStart"?e1==="onCompositionEnd"&&ie&&(t1=nd$1()):(kd$1=Xt,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),vu=oe$1(j,e1),0<vu.length&&(e1=new Ld$1(e1,a,null,o,Xt),Lt.push({event:e1,listeners:vu}),t1?e1.data=t1:(t1=he$1(o),t1!==null&&(e1.data=t1)))),(t1=ce$1?je$1(a,o):ke$1(a,o))&&(j=oe$1(j,"onBeforeInput"),0<j.length&&(Xt=new Ld$1("onBeforeInput","beforeinput",null,o,Xt),Lt.push({event:Xt,listeners:j}),Xt.data=t1))}se$1(Lt,s)})}function tf$1(a,s,o){return{instance:a,listener:s,currentTarget:o}}function oe$1(a,s){for(var o=s+"Capture",c=[];a!==null;){var h=a,d=h.stateNode;h.tag===5&&d!==null&&(h=d,d=Kb$1(a,o),d!=null&&c.unshift(tf$1(a,d,h)),d=Kb$1(a,s),d!=null&&c.push(tf$1(a,d,h))),a=a.return}return c}function vf$1(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf$1(a,s,o,c,h){for(var d=s._reactName,b=[];o!==null&&o!==c;){var _=o,$=_.alternate,j=_.stateNode;if($!==null&&$===c)break;_.tag===5&&j!==null&&(_=j,h?($=Kb$1(o,d),$!=null&&b.unshift(tf$1(o,$,_))):h||($=Kb$1(o,d),$!=null&&b.push(tf$1(o,$,_)))),o=o.return}b.length!==0&&a.push({event:s,listeners:b})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(a){return(typeof a=="string"?a:""+a).replace(xf$1,`
`).replace(yf$1,"")}function Af(a,s,o){if(s=zf$1(s),zf$1(a)!==s&&o)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(a){return Hf$1.resolve(null).then(a).catch(If$1)}:Ff$1;function If$1(a){setTimeout(function(){throw a})}function Kf(a,s){var o=s,c=0;do{var h=o.nextSibling;if(a.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(c===0){a.removeChild(h),bd$1(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=h}while(o);bd$1(s)}function Lf$1(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return a}function Mf$1(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var o=a.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return a;s--}else o==="/$"&&s++}a=a.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(a){var s=a[Of];if(s)return s;for(var o=a.parentNode;o;){if(s=o[uf$1]||o[Of]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(a=Mf$1(a);a!==null;){if(o=a[Of])return o;a=Mf$1(a)}return s}a=o,o=a.parentNode}return null}function Cb$1(a){return a=a[Of]||a[uf$1],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p$1(33))}function Db$1(a){return a[Pf$1]||null}var Sf$1=[],Tf=-1;function Uf$1(a){return{current:a}}function E(a){0>Tf||(a.current=Sf$1[Tf],Sf$1[Tf]=null,Tf--)}function G(a,s){Tf++,Sf$1[Tf]=a.current,a.current=s}var Vf$1={},H=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(a,s){var o=a.type.contextTypes;if(!o)return Vf$1;var c=a.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var h={},d;for(d in o)h[d]=s[d];return c&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=s,a.__reactInternalMemoizedMaskedChildContext=h),h}function Zf$1(a){return a=a.childContextTypes,a!=null}function $f$1(){E(Wf$1),E(H)}function ag$1(a,s,o){if(H.current!==Vf$1)throw Error(p$1(168));G(H,s),G(Wf$1,o)}function bg$1(a,s,o){var c=a.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var h in c)if(!(h in s))throw Error(p$1(108,Ra$1(a)||"Unknown",h));return A({},o,c)}function cg$1(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H.current,G(H,a),G(Wf$1,Wf$1.current),!0}function dg$1(a,s,o){var c=a.stateNode;if(!c)throw Error(p$1(169));o?(a=bg$1(a,s,Xf$1),c.__reactInternalMemoizedMergedChildContext=a,E(Wf$1),E(H),G(H,a)):E(Wf$1),G(Wf$1,o)}var eg$1=null,fg$1=!1,gg$1=!1;function hg$1(a){eg$1===null?eg$1=[a]:eg$1.push(a)}function ig$1(a){fg$1=!0,hg$1(a)}function jg$1(){if(!gg$1&&eg$1!==null){gg$1=!0;var a=0,s=C$1;try{var o=eg$1;for(C$1=1;a<o.length;a++){var c=o[a];do c=c(!0);while(c!==null)}eg$1=null,fg$1=!1}catch(h){throw eg$1!==null&&(eg$1=eg$1.slice(a+1)),ac$1(fc$1,jg$1),h}finally{C$1=s,gg$1=!1}}return null}var kg$1=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg$1=null,rg$1=1,sg$1="";function tg$1(a,s){kg$1[lg$1++]=ng$1,kg$1[lg$1++]=mg$1,mg$1=a,ng$1=s}function ug$1(a,s,o){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,qg$1=a;var c=rg$1;a=sg$1;var h=32-oc$1(c)-1;c&=~(1<<h),o+=1;var d=32-oc$1(s)+h;if(30<d){var b=h-h%5;d=(c&(1<<b)-1).toString(32),c>>=b,h-=b,rg$1=1<<32-oc$1(s)+h|o<<h|c,sg$1=d+a}else rg$1=1<<d|o<<h|c,sg$1=a}function vg$1(a){a.return!==null&&(tg$1(a,1),ug$1(a,1,0))}function wg$1(a){for(;a===mg$1;)mg$1=kg$1[--lg$1],kg$1[lg$1]=null,ng$1=kg$1[--lg$1],kg$1[lg$1]=null;for(;a===qg$1;)qg$1=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg$1=null,I$1=!1,zg$1=null;function Ag$1(a,s){var o=Bg$1(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=a,s=a.deletions,s===null?(a.deletions=[o],a.flags|=16):s.push(o)}function Cg$1(a,s){switch(a.tag){case 5:var o=a.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(a.stateNode=s,xg$1=a,yg$1=Lf$1(s.firstChild),!0):!1;case 6:return s=a.pendingProps===""||s.nodeType!==3?null:s,s!==null?(a.stateNode=s,xg$1=a,yg$1=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=qg$1!==null?{id:rg$1,overflow:sg$1}:null,a.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Bg$1(18,null,null,0),o.stateNode=s,o.return=a,a.child=o,xg$1=a,yg$1=null,!0):!1;default:return!1}}function Dg$1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg$1(a){if(I$1){var s=yg$1;if(s){var o=s;if(!Cg$1(a,s)){if(Dg$1(a))throw Error(p$1(418));s=Lf$1(o.nextSibling);var c=xg$1;s&&Cg$1(a,s)?Ag$1(c,o):(a.flags=a.flags&-4097|2,I$1=!1,xg$1=a)}}else{if(Dg$1(a))throw Error(p$1(418));a.flags=a.flags&-4097|2,I$1=!1,xg$1=a}}}function Fg$1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg$1=a}function Gg$1(a){if(a!==xg$1)return!1;if(!I$1)return Fg$1(a),I$1=!0,!1;var s;if((s=a.tag!==3)&&!(s=a.tag!==5)&&(s=a.type,s=s!=="head"&&s!=="body"&&!Ef(a.type,a.memoizedProps)),s&&(s=yg$1)){if(Dg$1(a))throw Hg$1(),Error(p$1(418));for(;s;)Ag$1(a,s),s=Lf$1(s.nextSibling)}if(Fg$1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p$1(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8){var o=a.data;if(o==="/$"){if(s===0){yg$1=Lf$1(a.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}a=a.nextSibling}yg$1=null}}else yg$1=xg$1?Lf$1(a.stateNode.nextSibling):null;return!0}function Hg$1(){for(var a=yg$1;a;)a=Lf$1(a.nextSibling)}function Ig$1(){yg$1=xg$1=null,I$1=!1}function Jg$1(a){zg$1===null?zg$1=[a]:zg$1.push(a)}var Kg$1=ua$1.ReactCurrentBatchConfig;function Lg$1(a,s,o){if(a=o.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p$1(309));var c=o.stateNode}if(!c)throw Error(p$1(147,a));var h=c,d=""+a;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===d?s.ref:(s=function(b){var _=h.refs;b===null?delete _[d]:_[d]=b},s._stringRef=d,s)}if(typeof a!="string")throw Error(p$1(284));if(!o._owner)throw Error(p$1(290,a))}return a}function Mg$1(a,s){throw a=Object.prototype.toString.call(s),Error(p$1(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a))}function Ng$1(a){var s=a._init;return s(a._payload)}function Og$1(a){function s(js,eu){if(a){var Oo=js.deletions;Oo===null?(js.deletions=[eu],js.flags|=16):Oo.push(eu)}}function o(js,eu){if(!a)return null;for(;eu!==null;)s(js,eu),eu=eu.sibling;return null}function c(js,eu){for(js=new Map;eu!==null;)eu.key!==null?js.set(eu.key,eu):js.set(eu.index,eu),eu=eu.sibling;return js}function h(js,eu){return js=Pg$1(js,eu),js.index=0,js.sibling=null,js}function d(js,eu,Oo){return js.index=Oo,a?(Oo=js.alternate,Oo!==null?(Oo=Oo.index,Oo<eu?(js.flags|=2,eu):Oo):(js.flags|=2,eu)):(js.flags|=1048576,eu)}function b(js){return a&&js.alternate===null&&(js.flags|=2),js}function _(js,eu,Oo,tu){return eu===null||eu.tag!==6?(eu=Qg$1(Oo,js.mode,tu),eu.return=js,eu):(eu=h(eu,Oo),eu.return=js,eu)}function $(js,eu,Oo,tu){var Bo=Oo.type;return Bo===ya$1?Xt(js,eu,Oo.props.children,tu,Oo.key):eu!==null&&(eu.elementType===Bo||typeof Bo=="object"&&Bo!==null&&Bo.$$typeof===Ha$1&&Ng$1(Bo)===eu.type)?(tu=h(eu,Oo.props),tu.ref=Lg$1(js,eu,Oo),tu.return=js,tu):(tu=Rg$1(Oo.type,Oo.key,Oo.props,null,js.mode,tu),tu.ref=Lg$1(js,eu,Oo),tu.return=js,tu)}function j(js,eu,Oo,tu){return eu===null||eu.tag!==4||eu.stateNode.containerInfo!==Oo.containerInfo||eu.stateNode.implementation!==Oo.implementation?(eu=Sg$1(Oo,js.mode,tu),eu.return=js,eu):(eu=h(eu,Oo.children||[]),eu.return=js,eu)}function Xt(js,eu,Oo,tu,Bo){return eu===null||eu.tag!==7?(eu=Tg$1(Oo,js.mode,tu,Bo),eu.return=js,eu):(eu=h(eu,Oo),eu.return=js,eu)}function Lt(js,eu,Oo){if(typeof eu=="string"&&eu!==""||typeof eu=="number")return eu=Qg$1(""+eu,js.mode,Oo),eu.return=js,eu;if(typeof eu=="object"&&eu!==null){switch(eu.$$typeof){case va$1:return Oo=Rg$1(eu.type,eu.key,eu.props,null,js.mode,Oo),Oo.ref=Lg$1(js,null,eu),Oo.return=js,Oo;case wa$1:return eu=Sg$1(eu,js.mode,Oo),eu.return=js,eu;case Ha$1:var tu=eu._init;return Lt(js,tu(eu._payload),Oo)}if(eb$1(eu)||Ka$1(eu))return eu=Tg$1(eu,js.mode,Oo,null),eu.return=js,eu;Mg$1(js,eu)}return null}function fr(js,eu,Oo,tu){var Bo=eu!==null?eu.key:null;if(typeof Oo=="string"&&Oo!==""||typeof Oo=="number")return Bo!==null?null:_(js,eu,""+Oo,tu);if(typeof Oo=="object"&&Oo!==null){switch(Oo.$$typeof){case va$1:return Oo.key===Bo?$(js,eu,Oo,tu):null;case wa$1:return Oo.key===Bo?j(js,eu,Oo,tu):null;case Ha$1:return Bo=Oo._init,fr(js,eu,Bo(Oo._payload),tu)}if(eb$1(Oo)||Ka$1(Oo))return Bo!==null?null:Xt(js,eu,Oo,tu,null);Mg$1(js,Oo)}return null}function Jr(js,eu,Oo,tu,Bo){if(typeof tu=="string"&&tu!==""||typeof tu=="number")return js=js.get(Oo)||null,_(eu,js,""+tu,Bo);if(typeof tu=="object"&&tu!==null){switch(tu.$$typeof){case va$1:return js=js.get(tu.key===null?Oo:tu.key)||null,$(eu,js,tu,Bo);case wa$1:return js=js.get(tu.key===null?Oo:tu.key)||null,j(eu,js,tu,Bo);case Ha$1:var vu=tu._init;return Jr(js,eu,Oo,vu(tu._payload),Bo)}if(eb$1(tu)||Ka$1(tu))return js=js.get(Oo)||null,Xt(eu,js,tu,Bo,null);Mg$1(eu,tu)}return null}function Js(js,eu,Oo,tu){for(var Bo=null,vu=null,t1=eu,e1=eu=0,r1=null;t1!==null&&e1<Oo.length;e1++){t1.index>e1?(r1=t1,t1=null):r1=t1.sibling;var a1=fr(js,t1,Oo[e1],tu);if(a1===null){t1===null&&(t1=r1);break}a&&t1&&a1.alternate===null&&s(js,t1),eu=d(a1,eu,e1),vu===null?Bo=a1:vu.sibling=a1,vu=a1,t1=r1}if(e1===Oo.length)return o(js,t1),I$1&&tg$1(js,e1),Bo;if(t1===null){for(;e1<Oo.length;e1++)t1=Lt(js,Oo[e1],tu),t1!==null&&(eu=d(t1,eu,e1),vu===null?Bo=t1:vu.sibling=t1,vu=t1);return I$1&&tg$1(js,e1),Bo}for(t1=c(js,t1);e1<Oo.length;e1++)r1=Jr(t1,js,e1,Oo[e1],tu),r1!==null&&(a&&r1.alternate!==null&&t1.delete(r1.key===null?e1:r1.key),eu=d(r1,eu,e1),vu===null?Bo=r1:vu.sibling=r1,vu=r1);return a&&t1.forEach(function(i1){return s(js,i1)}),I$1&&tg$1(js,e1),Bo}function qs(js,eu,Oo,tu){var Bo=Ka$1(Oo);if(typeof Bo!="function")throw Error(p$1(150));if(Oo=Bo.call(Oo),Oo==null)throw Error(p$1(151));for(var vu=Bo=null,t1=eu,e1=eu=0,r1=null,a1=Oo.next();t1!==null&&!a1.done;e1++,a1=Oo.next()){t1.index>e1?(r1=t1,t1=null):r1=t1.sibling;var i1=fr(js,t1,a1.value,tu);if(i1===null){t1===null&&(t1=r1);break}a&&t1&&i1.alternate===null&&s(js,t1),eu=d(i1,eu,e1),vu===null?Bo=i1:vu.sibling=i1,vu=i1,t1=r1}if(a1.done)return o(js,t1),I$1&&tg$1(js,e1),Bo;if(t1===null){for(;!a1.done;e1++,a1=Oo.next())a1=Lt(js,a1.value,tu),a1!==null&&(eu=d(a1,eu,e1),vu===null?Bo=a1:vu.sibling=a1,vu=a1);return I$1&&tg$1(js,e1),Bo}for(t1=c(js,t1);!a1.done;e1++,a1=Oo.next())a1=Jr(t1,js,e1,a1.value,tu),a1!==null&&(a&&a1.alternate!==null&&t1.delete(a1.key===null?e1:a1.key),eu=d(a1,eu,e1),vu===null?Bo=a1:vu.sibling=a1,vu=a1);return a&&t1.forEach(function(s1){return s(js,s1)}),I$1&&tg$1(js,e1),Bo}function zo(js,eu,Oo,tu){if(typeof Oo=="object"&&Oo!==null&&Oo.type===ya$1&&Oo.key===null&&(Oo=Oo.props.children),typeof Oo=="object"&&Oo!==null){switch(Oo.$$typeof){case va$1:e:{for(var Bo=Oo.key,vu=eu;vu!==null;){if(vu.key===Bo){if(Bo=Oo.type,Bo===ya$1){if(vu.tag===7){o(js,vu.sibling),eu=h(vu,Oo.props.children),eu.return=js,js=eu;break e}}else if(vu.elementType===Bo||typeof Bo=="object"&&Bo!==null&&Bo.$$typeof===Ha$1&&Ng$1(Bo)===vu.type){o(js,vu.sibling),eu=h(vu,Oo.props),eu.ref=Lg$1(js,vu,Oo),eu.return=js,js=eu;break e}o(js,vu);break}else s(js,vu);vu=vu.sibling}Oo.type===ya$1?(eu=Tg$1(Oo.props.children,js.mode,tu,Oo.key),eu.return=js,js=eu):(tu=Rg$1(Oo.type,Oo.key,Oo.props,null,js.mode,tu),tu.ref=Lg$1(js,eu,Oo),tu.return=js,js=tu)}return b(js);case wa$1:e:{for(vu=Oo.key;eu!==null;){if(eu.key===vu)if(eu.tag===4&&eu.stateNode.containerInfo===Oo.containerInfo&&eu.stateNode.implementation===Oo.implementation){o(js,eu.sibling),eu=h(eu,Oo.children||[]),eu.return=js,js=eu;break e}else{o(js,eu);break}else s(js,eu);eu=eu.sibling}eu=Sg$1(Oo,js.mode,tu),eu.return=js,js=eu}return b(js);case Ha$1:return vu=Oo._init,zo(js,eu,vu(Oo._payload),tu)}if(eb$1(Oo))return Js(js,eu,Oo,tu);if(Ka$1(Oo))return qs(js,eu,Oo,tu);Mg$1(js,Oo)}return typeof Oo=="string"&&Oo!==""||typeof Oo=="number"?(Oo=""+Oo,eu!==null&&eu.tag===6?(o(js,eu.sibling),eu=h(eu,Oo),eu.return=js,js=eu):(o(js,eu),eu=Qg$1(Oo,js.mode,tu),eu.return=js,js=eu),b(js)):o(js,eu)}return zo}var Ug$1=Og$1(!0),Vg$1=Og$1(!1),Wg$1=Uf$1(null),Xg$1=null,Yg$1=null,Zg$1=null;function $g$1(){Zg$1=Yg$1=Xg$1=null}function ah$1(a){var s=Wg$1.current;E(Wg$1),a._currentValue=s}function bh$1(a,s,o){for(;a!==null;){var c=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),a===o)break;a=a.return}}function ch$2(a,s){Xg$1=a,Zg$1=Yg$1=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&s&&(dh$1=!0),a.firstContext=null)}function eh$1(a){var s=a._currentValue;if(Zg$1!==a)if(a={context:a,memoizedValue:s,next:null},Yg$1===null){if(Xg$1===null)throw Error(p$1(308));Yg$1=a,Xg$1.dependencies={lanes:0,firstContext:a}}else Yg$1=Yg$1.next=a;return s}var fh$1=null;function gh$1(a){fh$1===null?fh$1=[a]:fh$1.push(a)}function hh$1(a,s,o,c){var h=s.interleaved;return h===null?(o.next=o,gh$1(s)):(o.next=h.next,h.next=o),s.interleaved=o,ih$1(a,c)}function ih$1(a,s){a.lanes|=s;var o=a.alternate;for(o!==null&&(o.lanes|=s),o=a,a=a.return;a!==null;)a.childLanes|=s,o=a.alternate,o!==null&&(o.childLanes|=s),o=a,a=a.return;return o.tag===3?o.stateNode:null}var jh$1=!1;function kh$1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$1(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh$1(a,s){return{eventTime:a,lane:s,tag:0,payload:null,callback:null,next:null}}function nh$1(a,s,o){var c=a.updateQueue;if(c===null)return null;if(c=c.shared,K&2){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,ih$1(a,o)}return h=c.interleaved,h===null?(s.next=s,gh$1(c)):(s.next=h.next,h.next=s),c.interleaved=s,ih$1(a,o)}function oh$1(a,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var c=s.lanes;c&=a.pendingLanes,o|=c,s.lanes=o,Cc$1(a,o)}}function ph$1(a,s){var o=a.updateQueue,c=a.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var b={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};d===null?h=d=b:d=d.next=b,o=o.next}while(o!==null);d===null?h=d=s:d=d.next=s}else h=d=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:c.shared,effects:c.effects},a.updateQueue=o;return}a=o.lastBaseUpdate,a===null?o.firstBaseUpdate=s:a.next=s,o.lastBaseUpdate=s}function qh(a,s,o,c){var h=a.updateQueue;jh$1=!1;var d=h.firstBaseUpdate,b=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var $=_,j=$.next;$.next=null,b===null?d=j:b.next=j,b=$;var Xt=a.alternate;Xt!==null&&(Xt=Xt.updateQueue,_=Xt.lastBaseUpdate,_!==b&&(_===null?Xt.firstBaseUpdate=j:_.next=j,Xt.lastBaseUpdate=$))}if(d!==null){var Lt=h.baseState;b=0,Xt=j=$=null,_=d;do{var fr=_.lane,Jr=_.eventTime;if((c&fr)===fr){Xt!==null&&(Xt=Xt.next={eventTime:Jr,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var Js=a,qs=_;switch(fr=s,Jr=o,qs.tag){case 1:if(Js=qs.payload,typeof Js=="function"){Lt=Js.call(Jr,Lt,fr);break e}Lt=Js;break e;case 3:Js.flags=Js.flags&-65537|128;case 0:if(Js=qs.payload,fr=typeof Js=="function"?Js.call(Jr,Lt,fr):Js,fr==null)break e;Lt=A({},Lt,fr);break e;case 2:jh$1=!0}}_.callback!==null&&_.lane!==0&&(a.flags|=64,fr=h.effects,fr===null?h.effects=[_]:fr.push(_))}else Jr={eventTime:Jr,lane:fr,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Xt===null?(j=Xt=Jr,$=Lt):Xt=Xt.next=Jr,b|=fr;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;fr=_,_=fr.next,fr.next=null,h.lastBaseUpdate=fr,h.shared.pending=null}}while(!0);if(Xt===null&&($=Lt),h.baseState=$,h.firstBaseUpdate=j,h.lastBaseUpdate=Xt,s=h.shared.interleaved,s!==null){h=s;do b|=h.lane,h=h.next;while(h!==s)}else d===null&&(h.shared.lanes=0);rh$1|=b,a.lanes=b,a.memoizedState=Lt}}function sh$1(a,s,o){if(a=s.effects,s.effects=null,a!==null)for(s=0;s<a.length;s++){var c=a[s],h=c.callback;if(h!==null){if(c.callback=null,c=o,typeof h!="function")throw Error(p$1(191,h));h.call(c)}}}var th$1={},uh$1=Uf$1(th$1),vh$1=Uf$1(th$1),wh$1=Uf$1(th$1);function xh$1(a){if(a===th$1)throw Error(p$1(174));return a}function yh$1(a,s){switch(G(wh$1,s),G(vh$1,a),G(uh$1,th$1),a=s.nodeType,a){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb$1(null,"");break;default:a=a===8?s.parentNode:s,s=a.namespaceURI||null,a=a.tagName,s=lb$1(s,a)}E(uh$1),G(uh$1,s)}function zh(){E(uh$1),E(vh$1),E(wh$1)}function Ah$1(a){xh$1(wh$1.current);var s=xh$1(uh$1.current),o=lb$1(s,a.type);s!==o&&(G(vh$1,a),G(uh$1,o))}function Bh(a){vh$1.current===a&&(E(uh$1),E(vh$1))}var L=Uf$1(0);function Ch$1(a){for(var s=a;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh$1(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh$1=ua$1.ReactCurrentDispatcher,Gh$1=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih$1=!1,Jh$1=!1,Kh=0,Lh$1=0;function P$5(){throw Error(p$1(321))}function Mh$1(a,s){if(s===null)return!1;for(var o=0;o<s.length&&o<a.length;o++)if(!He$1(a[o],s[o]))return!1;return!0}function Nh$1(a,s,o,c,h,d){if(Hh=d,M$1=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh$1.current=a===null||a.memoizedState===null?Oh$1:Ph,a=o(c,h),Jh$1){d=0;do{if(Jh$1=!1,Kh=0,25<=d)throw Error(p$1(301));d+=1,O$1=N=null,s.updateQueue=null,Fh$1.current=Qh$1,a=o(c,h)}while(Jh$1)}if(Fh$1.current=Rh$1,s=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih$1=!1,s)throw Error(p$1(300));return a}function Sh$1(){var a=Kh!==0;return Kh=0,a}function Th$1(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=a:O$1=O$1.next=a,O$1}function Uh$1(){if(N===null){var a=M$1.alternate;a=a!==null?a.memoizedState:null}else a=N.next;var s=O$1===null?M$1.memoizedState:O$1.next;if(s!==null)O$1=s,N=a;else{if(a===null)throw Error(p$1(310));N=a,a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=a:O$1=O$1.next=a}return O$1}function Vh$1(a,s){return typeof s=="function"?s(a):s}function Wh$1(a){var s=Uh$1(),o=s.queue;if(o===null)throw Error(p$1(311));o.lastRenderedReducer=a;var c=N,h=c.baseQueue,d=o.pending;if(d!==null){if(h!==null){var b=h.next;h.next=d.next,d.next=b}c.baseQueue=h=d,o.pending=null}if(h!==null){d=h.next,c=c.baseState;var _=b=null,$=null,j=d;do{var Xt=j.lane;if((Hh&Xt)===Xt)$!==null&&($=$.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:a(c,j.action);else{var Lt={lane:Xt,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};$===null?(_=$=Lt,b=c):$=$.next=Lt,M$1.lanes|=Xt,rh$1|=Xt}j=j.next}while(j!==null&&j!==d);$===null?b=c:$.next=_,He$1(c,s.memoizedState)||(dh$1=!0),s.memoizedState=c,s.baseState=b,s.baseQueue=$,o.lastRenderedState=c}if(a=o.interleaved,a!==null){h=a;do d=h.lane,M$1.lanes|=d,rh$1|=d,h=h.next;while(h!==a)}else h===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function Xh$1(a){var s=Uh$1(),o=s.queue;if(o===null)throw Error(p$1(311));o.lastRenderedReducer=a;var c=o.dispatch,h=o.pending,d=s.memoizedState;if(h!==null){o.pending=null;var b=h=h.next;do d=a(d,b.action),b=b.next;while(b!==h);He$1(d,s.memoizedState)||(dh$1=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),o.lastRenderedState=d}return[d,c]}function Yh$1(){}function Zh$1(a,s){var o=M$1,c=Uh$1(),h=s(),d=!He$1(c.memoizedState,h);if(d&&(c.memoizedState=h,dh$1=!0),c=c.queue,$h$1(ai$1.bind(null,o,c,a),[a]),c.getSnapshot!==s||d||O$1!==null&&O$1.memoizedState.tag&1){if(o.flags|=2048,bi$1(9,ci$1.bind(null,o,c,h,s),void 0,null),Q$2===null)throw Error(p$1(349));Hh&30||di$1(o,s,h)}return h}function di$1(a,s,o){a.flags|=16384,a={getSnapshot:s,value:o},s=M$1.updateQueue,s===null?(s={lastEffect:null,stores:null},M$1.updateQueue=s,s.stores=[a]):(o=s.stores,o===null?s.stores=[a]:o.push(a))}function ci$1(a,s,o,c){s.value=o,s.getSnapshot=c,ei$1(s)&&fi$1(a)}function ai$1(a,s,o){return o(function(){ei$1(s)&&fi$1(a)})}function ei$1(a){var s=a.getSnapshot;a=a.value;try{var o=s();return!He$1(a,o)}catch{return!0}}function fi$1(a){var s=ih$1(a,1);s!==null&&gi$1(s,a,1,-1)}function hi$1(a){var s=Th$1();return typeof a=="function"&&(a=a()),s.memoizedState=s.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh$1,lastRenderedState:a},s.queue=a,a=a.dispatch=ii$1.bind(null,M$1,a),[s.memoizedState,a]}function bi$1(a,s,o,c){return a={tag:a,create:s,destroy:o,deps:c,next:null},s=M$1.updateQueue,s===null?(s={lastEffect:null,stores:null},M$1.updateQueue=s,s.lastEffect=a.next=a):(o=s.lastEffect,o===null?s.lastEffect=a.next=a:(c=o.next,o.next=a,a.next=c,s.lastEffect=a)),a}function ji$1(){return Uh$1().memoizedState}function ki$1(a,s,o,c){var h=Th$1();M$1.flags|=a,h.memoizedState=bi$1(1|s,o,void 0,c===void 0?null:c)}function li$1(a,s,o,c){var h=Uh$1();c=c===void 0?null:c;var d=void 0;if(N!==null){var b=N.memoizedState;if(d=b.destroy,c!==null&&Mh$1(c,b.deps)){h.memoizedState=bi$1(s,o,d,c);return}}M$1.flags|=a,h.memoizedState=bi$1(1|s,o,d,c)}function mi$1(a,s){return ki$1(8390656,8,a,s)}function $h$1(a,s){return li$1(2048,8,a,s)}function ni$1(a,s){return li$1(4,2,a,s)}function oi$1(a,s){return li$1(4,4,a,s)}function pi$3(a,s){if(typeof s=="function")return a=a(),s(a),function(){s(null)};if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function qi$1(a,s,o){return o=o!=null?o.concat([a]):null,li$1(4,4,pi$3.bind(null,s,a),o)}function ri$1(){}function si$1(a,s){var o=Uh$1();s=s===void 0?null:s;var c=o.memoizedState;return c!==null&&s!==null&&Mh$1(s,c[1])?c[0]:(o.memoizedState=[a,s],a)}function ti$1(a,s){var o=Uh$1();s=s===void 0?null:s;var c=o.memoizedState;return c!==null&&s!==null&&Mh$1(s,c[1])?c[0]:(a=a(),o.memoizedState=[a,s],a)}function ui$1(a,s,o){return Hh&21?(He$1(o,s)||(o=yc$1(),M$1.lanes|=o,rh$1|=o,a.baseState=!0),s):(a.baseState&&(a.baseState=!1,dh$1=!0),a.memoizedState=o)}function vi$1(a,s){var o=C$1;C$1=o!==0&&4>o?o:4,a(!0);var c=Gh$1.transition;Gh$1.transition={};try{a(!1),s()}finally{C$1=o,Gh$1.transition=c}}function wi$1(){return Uh$1().memoizedState}function xi$1(a,s,o){var c=yi$1(a);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},zi$1(a))Ai$1(s,o);else if(o=hh$1(a,s,o,c),o!==null){var h=R();gi$1(o,a,c,h),Bi$1(o,s,c)}}function ii$1(a,s,o){var c=yi$1(a),h={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi$1(a))Ai$1(s,h);else{var d=a.alternate;if(a.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var b=s.lastRenderedState,_=d(b,o);if(h.hasEagerState=!0,h.eagerState=_,He$1(_,b)){var $=s.interleaved;$===null?(h.next=h,gh$1(s)):(h.next=$.next,$.next=h),s.interleaved=h;return}}catch{}finally{}o=hh$1(a,s,h,c),o!==null&&(h=R(),gi$1(o,a,c,h),Bi$1(o,s,c))}}function zi$1(a){var s=a.alternate;return a===M$1||s!==null&&s===M$1}function Ai$1(a,s){Jh$1=Ih$1=!0;var o=a.pending;o===null?s.next=s:(s.next=o.next,o.next=s),a.pending=s}function Bi$1(a,s,o){if(o&4194240){var c=s.lanes;c&=a.pendingLanes,o|=c,s.lanes=o,Cc$1(a,o)}}var Rh$1={readContext:eh$1,useCallback:P$5,useContext:P$5,useEffect:P$5,useImperativeHandle:P$5,useInsertionEffect:P$5,useLayoutEffect:P$5,useMemo:P$5,useReducer:P$5,useRef:P$5,useState:P$5,useDebugValue:P$5,useDeferredValue:P$5,useTransition:P$5,useMutableSource:P$5,useSyncExternalStore:P$5,useId:P$5,unstable_isNewReconciler:!1},Oh$1={readContext:eh$1,useCallback:function(a,s){return Th$1().memoizedState=[a,s===void 0?null:s],a},useContext:eh$1,useEffect:mi$1,useImperativeHandle:function(a,s,o){return o=o!=null?o.concat([a]):null,ki$1(4194308,4,pi$3.bind(null,s,a),o)},useLayoutEffect:function(a,s){return ki$1(4194308,4,a,s)},useInsertionEffect:function(a,s){return ki$1(4,2,a,s)},useMemo:function(a,s){var o=Th$1();return s=s===void 0?null:s,a=a(),o.memoizedState=[a,s],a},useReducer:function(a,s,o){var c=Th$1();return s=o!==void 0?o(s):s,c.memoizedState=c.baseState=s,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:s},c.queue=a,a=a.dispatch=xi$1.bind(null,M$1,a),[c.memoizedState,a]},useRef:function(a){var s=Th$1();return a={current:a},s.memoizedState=a},useState:hi$1,useDebugValue:ri$1,useDeferredValue:function(a){return Th$1().memoizedState=a},useTransition:function(){var a=hi$1(!1),s=a[0];return a=vi$1.bind(null,a[1]),Th$1().memoizedState=a,[s,a]},useMutableSource:function(){},useSyncExternalStore:function(a,s,o){var c=M$1,h=Th$1();if(I$1){if(o===void 0)throw Error(p$1(407));o=o()}else{if(o=s(),Q$2===null)throw Error(p$1(349));Hh&30||di$1(c,s,o)}h.memoizedState=o;var d={value:o,getSnapshot:s};return h.queue=d,mi$1(ai$1.bind(null,c,d,a),[a]),c.flags|=2048,bi$1(9,ci$1.bind(null,c,d,o,s),void 0,null),o},useId:function(){var a=Th$1(),s=Q$2.identifierPrefix;if(I$1){var o=sg$1,c=rg$1;o=(c&~(1<<32-oc$1(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=Kh++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=Lh$1++,s=":"+s+"r"+o.toString(32)+":";return a.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh$1,useRef:ji$1,useState:function(){return Wh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(a){var s=Uh$1();return ui$1(s,N.memoizedState,a)},useTransition:function(){var a=Wh$1(Vh$1)[0],s=Uh$1().memoizedState;return[a,s]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1},Qh$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh$1,useRef:ji$1,useState:function(){return Xh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(a){var s=Uh$1();return N===null?s.memoizedState=a:ui$1(s,N.memoizedState,a)},useTransition:function(){var a=Xh$1(Vh$1)[0],s=Uh$1().memoizedState;return[a,s]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(a,s){if(a&&a.defaultProps){s=A({},s),a=a.defaultProps;for(var o in a)s[o]===void 0&&(s[o]=a[o]);return s}return s}function Di$1(a,s,o,c){s=a.memoizedState,o=o(c,s),o=o==null?s:A({},s,o),a.memoizedState=o,a.lanes===0&&(a.updateQueue.baseState=o)}var Ei$1={isMounted:function(a){return(a=a._reactInternals)?Vb$1(a)===a:!1},enqueueSetState:function(a,s,o){a=a._reactInternals;var c=R(),h=yi$1(a),d=mh$1(c,h);d.payload=s,o!=null&&(d.callback=o),s=nh$1(a,d,h),s!==null&&(gi$1(s,a,h,c),oh$1(s,a,h))},enqueueReplaceState:function(a,s,o){a=a._reactInternals;var c=R(),h=yi$1(a),d=mh$1(c,h);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=nh$1(a,d,h),s!==null&&(gi$1(s,a,h,c),oh$1(s,a,h))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var o=R(),c=yi$1(a),h=mh$1(o,c);h.tag=2,s!=null&&(h.callback=s),s=nh$1(a,h,c),s!==null&&(gi$1(s,a,c,o),oh$1(s,a,c))}};function Fi$1(a,s,o,c,h,d,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(c,d,b):s.prototype&&s.prototype.isPureReactComponent?!Ie$1(o,c)||!Ie$1(h,d):!0}function Gi$1(a,s,o){var c=!1,h=Vf$1,d=s.contextType;return typeof d=="object"&&d!==null?d=eh$1(d):(h=Zf$1(s)?Xf$1:H.current,c=s.contextTypes,d=(c=c!=null)?Yf$1(a,h):Vf$1),s=new s(o,d),a.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei$1,a.stateNode=s,s._reactInternals=a,c&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=h,a.__reactInternalMemoizedMaskedChildContext=d),s}function Hi$1(a,s,o,c){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==a&&Ei$1.enqueueReplaceState(s,s.state,null)}function Ii$1(a,s,o,c){var h=a.stateNode;h.props=o,h.state=a.memoizedState,h.refs={},kh$1(a);var d=s.contextType;typeof d=="object"&&d!==null?h.context=eh$1(d):(d=Zf$1(s)?Xf$1:H.current,h.context=Yf$1(a,d)),h.state=a.memoizedState,d=s.getDerivedStateFromProps,typeof d=="function"&&(Di$1(a,s,d,o),h.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&Ei$1.enqueueReplaceState(h,h.state,null),qh(a,o,h,c),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308)}function Ji$1(a,s){try{var o="",c=s;do o+=Pa$1(c),c=c.return;while(c);var h=o}catch(d){h=`
Error generating stack: `+d.message+`
`+d.stack}return{value:a,source:s,stack:h,digest:null}}function Ki$1(a,s,o){return{value:a,source:null,stack:o??null,digest:s??null}}function Li$1(a,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var Mi$1=typeof WeakMap=="function"?WeakMap:Map;function Ni$1(a,s,o){o=mh$1(-1,o),o.tag=3,o.payload={element:null};var c=s.value;return o.callback=function(){Oi$1||(Oi$1=!0,Pi$1=c),Li$1(a,s)},o}function Qi$1(a,s,o){o=mh$1(-1,o),o.tag=3;var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var h=s.value;o.payload=function(){return c(h)},o.callback=function(){Li$1(a,s)}}var d=a.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(o.callback=function(){Li$1(a,s),typeof c!="function"&&(Ri$1===null?Ri$1=new Set([this]):Ri$1.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),o}function Si$1(a,s,o){var c=a.pingCache;if(c===null){c=a.pingCache=new Mi$1;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(h.add(o),a=Ti$1.bind(null,a,s,o),s.then(a,a))}function Ui$1(a){do{var s;if((s=a.tag===13)&&(s=a.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return a;a=a.return}while(a!==null);return null}function Vi$1(a,s,o,c,h){return a.mode&1?(a.flags|=65536,a.lanes=h,a):(a===s?a.flags|=65536:(a.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=mh$1(-1,1),s.tag=2,nh$1(o,s,1))),o.lanes|=1),a)}var Wi$1=ua$1.ReactCurrentOwner,dh$1=!1;function Xi$1(a,s,o,c){s.child=a===null?Vg$1(s,null,o,c):Ug$1(s,a.child,o,c)}function Yi$1(a,s,o,c,h){o=o.render;var d=s.ref;return ch$2(s,h),c=Nh$1(a,s,o,c,d,h),o=Sh$1(),a!==null&&!dh$1?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~h,Zi$1(a,s,h)):(I$1&&o&&vg$1(s),s.flags|=1,Xi$1(a,s,c,h),s.child)}function $i$1(a,s,o,c,h){if(a===null){var d=o.type;return typeof d=="function"&&!aj(d)&&d.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=d,bj(a,s,d,c,h)):(a=Rg$1(o.type,null,c,s,s.mode,h),a.ref=s.ref,a.return=s,s.child=a)}if(d=a.child,!(a.lanes&h)){var b=d.memoizedProps;if(o=o.compare,o=o!==null?o:Ie$1,o(b,c)&&a.ref===s.ref)return Zi$1(a,s,h)}return s.flags|=1,a=Pg$1(d,c),a.ref=s.ref,a.return=s,s.child=a}function bj(a,s,o,c,h){if(a!==null){var d=a.memoizedProps;if(Ie$1(d,c)&&a.ref===s.ref)if(dh$1=!1,s.pendingProps=c=d,(a.lanes&h)!==0)a.flags&131072&&(dh$1=!0);else return s.lanes=a.lanes,Zi$1(a,s,h)}return cj(a,s,o,c,h)}function dj(a,s,o){var c=s.pendingProps,h=c.children,d=a!==null?a.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=o;else{if(!(o&1073741824))return a=d!==null?d.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:a,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=a,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=d!==null?d.baseLanes:o,G(ej,fj),fj|=c}else d!==null?(c=d.baseLanes|o,s.memoizedState=null):c=o,G(ej,fj),fj|=c;return Xi$1(a,s,h,o),s.child}function gj(a,s){var o=s.ref;(a===null&&o!==null||a!==null&&a.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function cj(a,s,o,c,h){var d=Zf$1(o)?Xf$1:H.current;return d=Yf$1(s,d),ch$2(s,h),o=Nh$1(a,s,o,c,d,h),c=Sh$1(),a!==null&&!dh$1?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~h,Zi$1(a,s,h)):(I$1&&c&&vg$1(s),s.flags|=1,Xi$1(a,s,o,h),s.child)}function hj(a,s,o,c,h){if(Zf$1(o)){var d=!0;cg$1(s)}else d=!1;if(ch$2(s,h),s.stateNode===null)ij(a,s),Gi$1(s,o,c),Ii$1(s,o,c,h),c=!0;else if(a===null){var b=s.stateNode,_=s.memoizedProps;b.props=_;var $=b.context,j=o.contextType;typeof j=="object"&&j!==null?j=eh$1(j):(j=Zf$1(o)?Xf$1:H.current,j=Yf$1(s,j));var Xt=o.getDerivedStateFromProps,Lt=typeof Xt=="function"||typeof b.getSnapshotBeforeUpdate=="function";Lt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==c||$!==j)&&Hi$1(s,b,c,j),jh$1=!1;var fr=s.memoizedState;b.state=fr,qh(s,c,b,h),$=s.memoizedState,_!==c||fr!==$||Wf$1.current||jh$1?(typeof Xt=="function"&&(Di$1(s,o,Xt,c),$=s.memoizedState),(_=jh$1||Fi$1(s,o,_,c,fr,$,j))?(Lt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),b.props=c,b.state=$,b.context=j,c=_):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{b=s.stateNode,lh$1(a,s),_=s.memoizedProps,j=s.type===s.elementType?_:Ci$1(s.type,_),b.props=j,Lt=s.pendingProps,fr=b.context,$=o.contextType,typeof $=="object"&&$!==null?$=eh$1($):($=Zf$1(o)?Xf$1:H.current,$=Yf$1(s,$));var Jr=o.getDerivedStateFromProps;(Xt=typeof Jr=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==Lt||fr!==$)&&Hi$1(s,b,c,$),jh$1=!1,fr=s.memoizedState,b.state=fr,qh(s,c,b,h);var Js=s.memoizedState;_!==Lt||fr!==Js||Wf$1.current||jh$1?(typeof Jr=="function"&&(Di$1(s,o,Jr,c),Js=s.memoizedState),(j=jh$1||Fi$1(s,o,j,c,fr,Js,$)||!1)?(Xt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,Js,$),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,Js,$)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===a.memoizedProps&&fr===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&fr===a.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Js),b.props=c,b.state=Js,b.context=$,c=j):(typeof b.componentDidUpdate!="function"||_===a.memoizedProps&&fr===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&fr===a.memoizedState||(s.flags|=1024),c=!1)}return jj(a,s,o,c,d,h)}function jj(a,s,o,c,h,d){gj(a,s);var b=(s.flags&128)!==0;if(!c&&!b)return h&&dg$1(s,o,!1),Zi$1(a,s,d);c=s.stateNode,Wi$1.current=s;var _=b&&typeof o.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,a!==null&&b?(s.child=Ug$1(s,a.child,null,d),s.child=Ug$1(s,null,_,d)):Xi$1(a,s,_,d),s.memoizedState=c.state,h&&dg$1(s,o,!0),s.child}function kj(a){var s=a.stateNode;s.pendingContext?ag$1(a,s.pendingContext,s.pendingContext!==s.context):s.context&&ag$1(a,s.context,!1),yh$1(a,s.containerInfo)}function lj(a,s,o,c,h){return Ig$1(),Jg$1(h),s.flags|=256,Xi$1(a,s,o,c),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}function oj(a,s,o){var c=s.pendingProps,h=L.current,d=!1,b=(s.flags&128)!==0,_;if((_=b)||(_=a!==null&&a.memoizedState===null?!1:(h&2)!==0),_?(d=!0,s.flags&=-129):(a===null||a.memoizedState!==null)&&(h|=1),G(L,h&1),a===null)return Eg$1(s),a=s.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(s.mode&1?a.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(b=c.children,a=c.fallback,d?(c=s.mode,d=s.child,b={mode:"hidden",children:b},!(c&1)&&d!==null?(d.childLanes=0,d.pendingProps=b):d=pj(b,c,0,null),a=Tg$1(a,c,o,null),d.return=s,a.return=s,d.sibling=a,s.child=d,s.child.memoizedState=nj(o),s.memoizedState=mj,a):qj(s,b));if(h=a.memoizedState,h!==null&&(_=h.dehydrated,_!==null))return rj(a,s,b,c,_,h,o);if(d){d=c.fallback,b=s.mode,h=a.child,_=h.sibling;var $={mode:"hidden",children:c.children};return!(b&1)&&s.child!==h?(c=s.child,c.childLanes=0,c.pendingProps=$,s.deletions=null):(c=Pg$1(h,$),c.subtreeFlags=h.subtreeFlags&14680064),_!==null?d=Pg$1(_,d):(d=Tg$1(d,b,o,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,b=a.child.memoizedState,b=b===null?nj(o):{baseLanes:b.baseLanes|o,cachePool:null,transitions:b.transitions},d.memoizedState=b,d.childLanes=a.childLanes&~o,s.memoizedState=mj,c}return d=a.child,a=d.sibling,c=Pg$1(d,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=o),c.return=s,c.sibling=null,a!==null&&(o=s.deletions,o===null?(s.deletions=[a],s.flags|=16):o.push(a)),s.child=c,s.memoizedState=null,c}function qj(a,s){return s=pj({mode:"visible",children:s},a.mode,0,null),s.return=a,a.child=s}function sj(a,s,o,c){return c!==null&&Jg$1(c),Ug$1(s,a.child,null,o),a=qj(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function rj(a,s,o,c,h,d,b){if(o)return s.flags&256?(s.flags&=-257,c=Ki$1(Error(p$1(422))),sj(a,s,b,c)):s.memoizedState!==null?(s.child=a.child,s.flags|=128,null):(d=c.fallback,h=s.mode,c=pj({mode:"visible",children:c.children},h,0,null),d=Tg$1(d,h,b,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,s.mode&1&&Ug$1(s,a.child,null,b),s.child.memoizedState=nj(b),s.memoizedState=mj,d);if(!(s.mode&1))return sj(a,s,b,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var _=c.dgst;return c=_,d=Error(p$1(419)),c=Ki$1(d,c,void 0),sj(a,s,b,c)}if(_=(b&a.childLanes)!==0,dh$1||_){if(c=Q$2,c!==null){switch(b&-b){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(c.suspendedLanes|b)?0:h,h!==0&&h!==d.retryLane&&(d.retryLane=h,ih$1(a,h),gi$1(c,a,h,-1))}return tj(),c=Ki$1(Error(p$1(421))),sj(a,s,b,c)}return h.data==="$?"?(s.flags|=128,s.child=a.child,s=uj.bind(null,a),h._reactRetry=s,null):(a=d.treeContext,yg$1=Lf$1(h.nextSibling),xg$1=s,I$1=!0,zg$1=null,a!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,rg$1=a.id,sg$1=a.overflow,qg$1=s),s=qj(s,c.children),s.flags|=4096,s)}function vj(a,s,o){a.lanes|=s;var c=a.alternate;c!==null&&(c.lanes|=s),bh$1(a.return,s,o)}function wj(a,s,o,c,h){var d=a.memoizedState;d===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=c,d.tail=o,d.tailMode=h)}function xj(a,s,o){var c=s.pendingProps,h=c.revealOrder,d=c.tail;if(Xi$1(a,s,c.children,o),c=L.current,c&2)c=c&1|2,s.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vj(a,o,s);else if(a.tag===19)vj(a,o,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}c&=1}if(G(L,c),!(s.mode&1))s.memoizedState=null;else switch(h){case"forwards":for(o=s.child,h=null;o!==null;)a=o.alternate,a!==null&&Ch$1(a)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),wj(s,!1,h,o,d);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(a=h.alternate,a!==null&&Ch$1(a)===null){s.child=h;break}a=h.sibling,h.sibling=o,o=h,h=a}wj(s,!0,o,null,d);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(a,s){!(s.mode&1)&&a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2)}function Zi$1(a,s,o){if(a!==null&&(s.dependencies=a.dependencies),rh$1|=s.lanes,!(o&s.childLanes))return null;if(a!==null&&s.child!==a.child)throw Error(p$1(153));if(s.child!==null){for(a=s.child,o=Pg$1(a,a.pendingProps),s.child=o,o.return=s;a.sibling!==null;)a=a.sibling,o=o.sibling=Pg$1(a,a.pendingProps),o.return=s;o.sibling=null}return s.child}function yj(a,s,o){switch(s.tag){case 3:kj(s),Ig$1();break;case 5:Ah$1(s);break;case 1:Zf$1(s.type)&&cg$1(s);break;case 4:yh$1(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,h=s.memoizedProps.value;G(Wg$1,c._currentValue),c._currentValue=h;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):o&s.child.childLanes?oj(a,s,o):(G(L,L.current&1),a=Zi$1(a,s,o),a!==null?a.sibling:null);G(L,L.current&1);break;case 19:if(c=(o&s.childLanes)!==0,a.flags&128){if(c)return xj(a,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(L,L.current),c)break;return null;case 22:case 23:return s.lanes=0,dj(a,s,o)}return Zi$1(a,s,o)}var zj,Aj,Bj,Cj;zj=function(a,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Aj=function(){};Bj=function(a,s,o,c){var h=a.memoizedProps;if(h!==c){a=s.stateNode,xh$1(uh$1.current);var d=null;switch(o){case"input":h=Ya$1(a,h),c=Ya$1(a,c),d=[];break;case"select":h=A({},h,{value:void 0}),c=A({},c,{value:void 0}),d=[];break;case"textarea":h=gb$1(a,h),c=gb$1(a,c),d=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(a.onclick=Bf)}ub$1(o,c);var b;o=null;for(j in h)if(!c.hasOwnProperty(j)&&h.hasOwnProperty(j)&&h[j]!=null)if(j==="style"){var _=h[j];for(b in _)_.hasOwnProperty(b)&&(o||(o={}),o[b]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea$1.hasOwnProperty(j)?d||(d=[]):(d=d||[]).push(j,null));for(j in c){var $=c[j];if(_=h!=null?h[j]:void 0,c.hasOwnProperty(j)&&$!==_&&($!=null||_!=null))if(j==="style")if(_){for(b in _)!_.hasOwnProperty(b)||$&&$.hasOwnProperty(b)||(o||(o={}),o[b]="");for(b in $)$.hasOwnProperty(b)&&_[b]!==$[b]&&(o||(o={}),o[b]=$[b])}else o||(d||(d=[]),d.push(j,o)),o=$;else j==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,_=_?_.__html:void 0,$!=null&&_!==$&&(d=d||[]).push(j,$)):j==="children"?typeof $!="string"&&typeof $!="number"||(d=d||[]).push(j,""+$):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(j)?($!=null&&j==="onScroll"&&D$1("scroll",a),d||_===$||(d=[])):(d=d||[]).push(j,$))}o&&(d=d||[]).push("style",o);var j=d;(s.updateQueue=j)&&(s.flags|=4)}};Cj=function(a,s,o,c){o!==c&&(s.flags|=4)};function Dj(a,s){if(!I$1)switch(a.tailMode){case"hidden":s=a.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?a.tail=null:o.sibling=null;break;case"collapsed":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:c.sibling=null}}function S$1(a){var s=a.alternate!==null&&a.alternate.child===a.child,o=0,c=0;if(s)for(var h=a.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=a,h=h.sibling;else for(h=a.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=a,h=h.sibling;return a.subtreeFlags|=c,a.childLanes=o,s}function Ej(a,s,o){var c=s.pendingProps;switch(wg$1(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(s),null;case 1:return Zf$1(s.type)&&$f$1(),S$1(s),null;case 3:return c=s.stateNode,zh(),E(Wf$1),E(H),Eh$1(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Gg$1(s)?s.flags|=4:a===null||a.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg$1!==null&&(Fj(zg$1),zg$1=null))),Aj(a,s),S$1(s),null;case 5:Bh(s);var h=xh$1(wh$1.current);if(o=s.type,a!==null&&s.stateNode!=null)Bj(a,s,o,c,h),a.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(p$1(166));return S$1(s),null}if(a=xh$1(uh$1.current),Gg$1(s)){c=s.stateNode,o=s.type;var d=s.memoizedProps;switch(c[Of]=s,c[Pf$1]=d,a=(s.mode&1)!==0,o){case"dialog":D$1("cancel",c),D$1("close",c);break;case"iframe":case"object":case"embed":D$1("load",c);break;case"video":case"audio":for(h=0;h<lf$1.length;h++)D$1(lf$1[h],c);break;case"source":D$1("error",c);break;case"img":case"image":case"link":D$1("error",c),D$1("load",c);break;case"details":D$1("toggle",c);break;case"input":Za$1(c,d),D$1("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!d.multiple},D$1("invalid",c);break;case"textarea":hb$1(c,d),D$1("invalid",c)}ub$1(o,d),h=null;for(var b in d)if(d.hasOwnProperty(b)){var _=d[b];b==="children"?typeof _=="string"?c.textContent!==_&&(d.suppressHydrationWarning!==!0&&Af(c.textContent,_,a),h=["children",_]):typeof _=="number"&&c.textContent!==""+_&&(d.suppressHydrationWarning!==!0&&Af(c.textContent,_,a),h=["children",""+_]):ea$1.hasOwnProperty(b)&&_!=null&&b==="onScroll"&&D$1("scroll",c)}switch(o){case"input":Va$1(c),db$1(c,d,!0);break;case"textarea":Va$1(c),jb$1(c);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(c.onclick=Bf)}c=h,s.updateQueue=c,c!==null&&(s.flags|=4)}else{b=h.nodeType===9?h:h.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb$1(o)),a==="http://www.w3.org/1999/xhtml"?o==="script"?(a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof c.is=="string"?a=b.createElement(o,{is:c.is}):(a=b.createElement(o),o==="select"&&(b=a,c.multiple?b.multiple=!0:c.size&&(b.size=c.size))):a=b.createElementNS(a,o),a[Of]=s,a[Pf$1]=c,zj(a,s,!1,!1),s.stateNode=a;e:{switch(b=vb$1(o,c),o){case"dialog":D$1("cancel",a),D$1("close",a),h=c;break;case"iframe":case"object":case"embed":D$1("load",a),h=c;break;case"video":case"audio":for(h=0;h<lf$1.length;h++)D$1(lf$1[h],a);h=c;break;case"source":D$1("error",a),h=c;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),h=c;break;case"details":D$1("toggle",a),h=c;break;case"input":Za$1(a,c),h=Ya$1(a,c),D$1("invalid",a);break;case"option":h=c;break;case"select":a._wrapperState={wasMultiple:!!c.multiple},h=A({},c,{value:void 0}),D$1("invalid",a);break;case"textarea":hb$1(a,c),h=gb$1(a,c),D$1("invalid",a);break;default:h=c}ub$1(o,h),_=h;for(d in _)if(_.hasOwnProperty(d)){var $=_[d];d==="style"?sb$1(a,$):d==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&nb$1(a,$)):d==="children"?typeof $=="string"?(o!=="textarea"||$!=="")&&ob$1(a,$):typeof $=="number"&&ob$1(a,""+$):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ea$1.hasOwnProperty(d)?$!=null&&d==="onScroll"&&D$1("scroll",a):$!=null&&ta$1(a,d,$,b))}switch(o){case"input":Va$1(a),db$1(a,c,!1);break;case"textarea":Va$1(a),jb$1(a);break;case"option":c.value!=null&&a.setAttribute("value",""+Sa$1(c.value));break;case"select":a.multiple=!!c.multiple,d=c.value,d!=null?fb$1(a,!!c.multiple,d,!1):c.defaultValue!=null&&fb$1(a,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S$1(s),null;case 6:if(a&&s.stateNode!=null)Cj(a,s,a.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(p$1(166));if(o=xh$1(wh$1.current),xh$1(uh$1.current),Gg$1(s)){if(c=s.stateNode,o=s.memoizedProps,c[Of]=s,(d=c.nodeValue!==o)&&(a=xg$1,a!==null))switch(a.tag){case 3:Af(c.nodeValue,o,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(c.nodeValue,o,(a.mode&1)!==0)}d&&(s.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Of]=s,s.stateNode=c}return S$1(s),null;case 13:if(E(L),c=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I$1&&yg$1!==null&&s.mode&1&&!(s.flags&128))Hg$1(),Ig$1(),s.flags|=98560,d=!1;else if(d=Gg$1(s),c!==null&&c.dehydrated!==null){if(a===null){if(!d)throw Error(p$1(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(p$1(317));d[Of]=s}else Ig$1(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S$1(s),d=!1}else zg$1!==null&&(Fj(zg$1),zg$1=null),d=!0;if(!d)return s.flags&65536?s:null}return s.flags&128?(s.lanes=o,s):(c=c!==null,c!==(a!==null&&a.memoizedState!==null)&&c&&(s.child.flags|=8192,s.mode&1&&(a===null||L.current&1?T$1===0&&(T$1=3):tj())),s.updateQueue!==null&&(s.flags|=4),S$1(s),null);case 4:return zh(),Aj(a,s),a===null&&sf$1(s.stateNode.containerInfo),S$1(s),null;case 10:return ah$1(s.type._context),S$1(s),null;case 17:return Zf$1(s.type)&&$f$1(),S$1(s),null;case 19:if(E(L),d=s.memoizedState,d===null)return S$1(s),null;if(c=(s.flags&128)!==0,b=d.rendering,b===null)if(c)Dj(d,!1);else{if(T$1!==0||a!==null&&a.flags&128)for(a=s.child;a!==null;){if(b=Ch$1(a),b!==null){for(s.flags|=128,Dj(d,!1),c=b.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=o,o=s.child;o!==null;)d=o,a=c,d.flags&=14680066,b=d.alternate,b===null?(d.childLanes=0,d.lanes=a,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=b.childLanes,d.lanes=b.lanes,d.child=b.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=b.memoizedProps,d.memoizedState=b.memoizedState,d.updateQueue=b.updateQueue,d.type=b.type,a=b.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),o=o.sibling;return G(L,L.current&1|2),s.child}a=a.sibling}d.tail!==null&&B$1()>Gj&&(s.flags|=128,c=!0,Dj(d,!1),s.lanes=4194304)}else{if(!c)if(a=Ch$1(b),a!==null){if(s.flags|=128,c=!0,o=a.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Dj(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!I$1)return S$1(s),null}else 2*B$1()-d.renderingStartTime>Gj&&o!==1073741824&&(s.flags|=128,c=!0,Dj(d,!1),s.lanes=4194304);d.isBackwards?(b.sibling=s.child,s.child=b):(o=d.last,o!==null?o.sibling=b:s.child=b,d.last=b)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=B$1(),s.sibling=null,o=L.current,G(L,c?o&1|2:o&1),s):(S$1(s),null);case 22:case 23:return Hj(),c=s.memoizedState!==null,a!==null&&a.memoizedState!==null!==c&&(s.flags|=8192),c&&s.mode&1?fj&1073741824&&(S$1(s),s.subtreeFlags&6&&(s.flags|=8192)):S$1(s),null;case 24:return null;case 25:return null}throw Error(p$1(156,s.tag))}function Ij(a,s){switch(wg$1(s),s.tag){case 1:return Zf$1(s.type)&&$f$1(),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return zh(),E(Wf$1),E(H),Eh$1(),a=s.flags,a&65536&&!(a&128)?(s.flags=a&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(p$1(340));Ig$1()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah$1(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(a,s){var o=a.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){W$1(a,s,c)}else o.current=null}function Mj(a,s,o){try{o()}catch(c){W$1(a,s,c)}}var Nj=!1;function Oj(a,s){if(Cf=dd$1,a=Me$1(),Ne$1(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var b=0,_=-1,$=-1,j=0,Xt=0,Lt=a,fr=null;t:for(;;){for(var Jr;Lt!==o||h!==0&&Lt.nodeType!==3||(_=b+h),Lt!==d||c!==0&&Lt.nodeType!==3||($=b+c),Lt.nodeType===3&&(b+=Lt.nodeValue.length),(Jr=Lt.firstChild)!==null;)fr=Lt,Lt=Jr;for(;;){if(Lt===a)break t;if(fr===o&&++j===h&&(_=b),fr===d&&++Xt===c&&($=b),(Jr=Lt.nextSibling)!==null)break;Lt=fr,fr=Lt.parentNode}Lt=Jr}o=_===-1||$===-1?null:{start:_,end:$}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:a,selectionRange:o},dd$1=!1,V$1=s;V$1!==null;)if(s=V$1,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,V$1=a;else for(;V$1!==null;){s=V$1;try{var Js=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Js!==null){var qs=Js.memoizedProps,zo=Js.memoizedState,js=s.stateNode,eu=js.getSnapshotBeforeUpdate(s.elementType===s.type?qs:Ci$1(s.type,qs),zo);js.__reactInternalSnapshotBeforeUpdate=eu}break;case 3:var Oo=s.stateNode.containerInfo;Oo.nodeType===1?Oo.textContent="":Oo.nodeType===9&&Oo.documentElement&&Oo.removeChild(Oo.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(tu){W$1(s,s.return,tu)}if(a=s.sibling,a!==null){a.return=s.return,V$1=a;break}V$1=s.return}return Js=Nj,Nj=!1,Js}function Pj(a,s,o){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var d=h.destroy;h.destroy=void 0,d!==void 0&&Mj(s,o,d)}h=h.next}while(h!==c)}}function Qj(a,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&a)===a){var c=o.create;o.destroy=c()}o=o.next}while(o!==s)}}function Rj(a){var s=a.ref;if(s!==null){var o=a.stateNode;switch(a.tag){case 5:a=o;break;default:a=o}typeof s=="function"?s(a):s.current=a}}function Sj(a){var s=a.alternate;s!==null&&(a.alternate=null,Sj(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&(delete s[Of],delete s[Pf$1],delete s[of$1],delete s[Qf$1],delete s[Rf$1])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Tj(a){return a.tag===5||a.tag===3||a.tag===4}function Uj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Tj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Vj(a,s,o){var c=a.tag;if(c===5||c===6)a=a.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(a,s):o.insertBefore(a,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(a,o)):(s=o,s.appendChild(a)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Bf));else if(c!==4&&(a=a.child,a!==null))for(Vj(a,s,o),a=a.sibling;a!==null;)Vj(a,s,o),a=a.sibling}function Wj(a,s,o){var c=a.tag;if(c===5||c===6)a=a.stateNode,s?o.insertBefore(a,s):o.appendChild(a);else if(c!==4&&(a=a.child,a!==null))for(Wj(a,s,o),a=a.sibling;a!==null;)Wj(a,s,o),a=a.sibling}var X=null,Xj=!1;function Yj(a,s,o){for(o=o.child;o!==null;)Zj(a,s,o),o=o.sibling}function Zj(a,s,o){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,o)}catch{}switch(o.tag){case 5:U$1||Lj(o,s);case 6:var c=X,h=Xj;X=null,Yj(a,s,o),X=c,Xj=h,X!==null&&(Xj?(a=X,o=o.stateNode,a.nodeType===8?a.parentNode.removeChild(o):a.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Xj?(a=X,o=o.stateNode,a.nodeType===8?Kf(a.parentNode,o):a.nodeType===1&&Kf(a,o),bd$1(a)):Kf(X,o.stateNode));break;case 4:c=X,h=Xj,X=o.stateNode.containerInfo,Xj=!0,Yj(a,s,o),X=c,Xj=h;break;case 0:case 11:case 14:case 15:if(!U$1&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var d=h,b=d.destroy;d=d.tag,b!==void 0&&(d&2||d&4)&&Mj(o,s,b),h=h.next}while(h!==c)}Yj(a,s,o);break;case 1:if(!U$1&&(Lj(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(_){W$1(o,s,_)}Yj(a,s,o);break;case 21:Yj(a,s,o);break;case 22:o.mode&1?(U$1=(c=U$1)||o.memoizedState!==null,Yj(a,s,o),U$1=c):Yj(a,s,o);break;default:Yj(a,s,o)}}function ak(a){var s=a.updateQueue;if(s!==null){a.updateQueue=null;var o=a.stateNode;o===null&&(o=a.stateNode=new Kj),s.forEach(function(c){var h=bk.bind(null,a,c);o.has(c)||(o.add(c),c.then(h,h))})}}function ck(a,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];try{var d=a,b=s,_=b;e:for(;_!==null;){switch(_.tag){case 5:X=_.stateNode,Xj=!1;break e;case 3:X=_.stateNode.containerInfo,Xj=!0;break e;case 4:X=_.stateNode.containerInfo,Xj=!0;break e}_=_.return}if(X===null)throw Error(p$1(160));Zj(d,b,h),X=null,Xj=!1;var $=h.alternate;$!==null&&($.return=null),h.return=null}catch(j){W$1(h,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,a),s=s.sibling}function dk(a,s){var o=a.alternate,c=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ck(s,a),ek(a),c&4){try{Pj(3,a,a.return),Qj(3,a)}catch(qs){W$1(a,a.return,qs)}try{Pj(5,a,a.return)}catch(qs){W$1(a,a.return,qs)}}break;case 1:ck(s,a),ek(a),c&512&&o!==null&&Lj(o,o.return);break;case 5:if(ck(s,a),ek(a),c&512&&o!==null&&Lj(o,o.return),a.flags&32){var h=a.stateNode;try{ob$1(h,"")}catch(qs){W$1(a,a.return,qs)}}if(c&4&&(h=a.stateNode,h!=null)){var d=a.memoizedProps,b=o!==null?o.memoizedProps:d,_=a.type,$=a.updateQueue;if(a.updateQueue=null,$!==null)try{_==="input"&&d.type==="radio"&&d.name!=null&&ab$1(h,d),vb$1(_,b);var j=vb$1(_,d);for(b=0;b<$.length;b+=2){var Xt=$[b],Lt=$[b+1];Xt==="style"?sb$1(h,Lt):Xt==="dangerouslySetInnerHTML"?nb$1(h,Lt):Xt==="children"?ob$1(h,Lt):ta$1(h,Xt,Lt,j)}switch(_){case"input":bb$1(h,d);break;case"textarea":ib$1(h,d);break;case"select":var fr=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!d.multiple;var Jr=d.value;Jr!=null?fb$1(h,!!d.multiple,Jr,!1):fr!==!!d.multiple&&(d.defaultValue!=null?fb$1(h,!!d.multiple,d.defaultValue,!0):fb$1(h,!!d.multiple,d.multiple?[]:"",!1))}h[Pf$1]=d}catch(qs){W$1(a,a.return,qs)}}break;case 6:if(ck(s,a),ek(a),c&4){if(a.stateNode===null)throw Error(p$1(162));h=a.stateNode,d=a.memoizedProps;try{h.nodeValue=d}catch(qs){W$1(a,a.return,qs)}}break;case 3:if(ck(s,a),ek(a),c&4&&o!==null&&o.memoizedState.isDehydrated)try{bd$1(s.containerInfo)}catch(qs){W$1(a,a.return,qs)}break;case 4:ck(s,a),ek(a);break;case 13:ck(s,a),ek(a),h=a.child,h.flags&8192&&(d=h.memoizedState!==null,h.stateNode.isHidden=d,!d||h.alternate!==null&&h.alternate.memoizedState!==null||(fk=B$1())),c&4&&ak(a);break;case 22:if(Xt=o!==null&&o.memoizedState!==null,a.mode&1?(U$1=(j=U$1)||Xt,ck(s,a),U$1=j):ck(s,a),ek(a),c&8192){if(j=a.memoizedState!==null,(a.stateNode.isHidden=j)&&!Xt&&a.mode&1)for(V$1=a,Xt=a.child;Xt!==null;){for(Lt=V$1=Xt;V$1!==null;){switch(fr=V$1,Jr=fr.child,fr.tag){case 0:case 11:case 14:case 15:Pj(4,fr,fr.return);break;case 1:Lj(fr,fr.return);var Js=fr.stateNode;if(typeof Js.componentWillUnmount=="function"){c=fr,o=fr.return;try{s=c,Js.props=s.memoizedProps,Js.state=s.memoizedState,Js.componentWillUnmount()}catch(qs){W$1(c,o,qs)}}break;case 5:Lj(fr,fr.return);break;case 22:if(fr.memoizedState!==null){gk(Lt);continue}}Jr!==null?(Jr.return=fr,V$1=Jr):gk(Lt)}Xt=Xt.sibling}e:for(Xt=null,Lt=a;;){if(Lt.tag===5){if(Xt===null){Xt=Lt;try{h=Lt.stateNode,j?(d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(_=Lt.stateNode,$=Lt.memoizedProps.style,b=$!=null&&$.hasOwnProperty("display")?$.display:null,_.style.display=rb$1("display",b))}catch(qs){W$1(a,a.return,qs)}}}else if(Lt.tag===6){if(Xt===null)try{Lt.stateNode.nodeValue=j?"":Lt.memoizedProps}catch(qs){W$1(a,a.return,qs)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===a)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===a)break e;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===a)break e;Xt===Lt&&(Xt=null),Lt=Lt.return}Xt===Lt&&(Xt=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}break;case 19:ck(s,a),ek(a),c&4&&ak(a);break;case 21:break;default:ck(s,a),ek(a)}}function ek(a){var s=a.flags;if(s&2){try{e:{for(var o=a.return;o!==null;){if(Tj(o)){var c=o;break e}o=o.return}throw Error(p$1(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(ob$1(h,""),c.flags&=-33);var d=Uj(a);Wj(a,d,h);break;case 3:case 4:var b=c.stateNode.containerInfo,_=Uj(a);Vj(a,_,b);break;default:throw Error(p$1(161))}}catch($){W$1(a,a.return,$)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function hk(a,s,o){V$1=a,ik(a)}function ik(a,s,o){for(var c=(a.mode&1)!==0;V$1!==null;){var h=V$1,d=h.child;if(h.tag===22&&c){var b=h.memoizedState!==null||Jj;if(!b){var _=h.alternate,$=_!==null&&_.memoizedState!==null||U$1;_=Jj;var j=U$1;if(Jj=b,(U$1=$)&&!j)for(V$1=h;V$1!==null;)b=V$1,$=b.child,b.tag===22&&b.memoizedState!==null?jk(h):$!==null?($.return=b,V$1=$):jk(h);for(;d!==null;)V$1=d,ik(d),d=d.sibling;V$1=h,Jj=_,U$1=j}kk(a)}else h.subtreeFlags&8772&&d!==null?(d.return=h,V$1=d):kk(a)}}function kk(a){for(;V$1!==null;){var s=V$1;if(s.flags&8772){var o=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U$1||Qj(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!U$1)if(o===null)c.componentDidMount();else{var h=s.elementType===s.type?o.memoizedProps:Ci$1(s.type,o.memoizedProps);c.componentDidUpdate(h,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var d=s.updateQueue;d!==null&&sh$1(s,d,c);break;case 3:var b=s.updateQueue;if(b!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}sh$1(s,b,o)}break;case 5:var _=s.stateNode;if(o===null&&s.flags&4){o=_;var $=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&o.focus();break;case"img":$.src&&(o.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var Xt=j.memoizedState;if(Xt!==null){var Lt=Xt.dehydrated;Lt!==null&&bd$1(Lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||s.flags&512&&Rj(s)}catch(fr){W$1(s,s.return,fr)}}if(s===a){V$1=null;break}if(o=s.sibling,o!==null){o.return=s.return,V$1=o;break}V$1=s.return}}function gk(a){for(;V$1!==null;){var s=V$1;if(s===a){V$1=null;break}var o=s.sibling;if(o!==null){o.return=s.return,V$1=o;break}V$1=s.return}}function jk(a){for(;V$1!==null;){var s=V$1;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{Qj(4,s)}catch($){W$1(s,o,$)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var h=s.return;try{c.componentDidMount()}catch($){W$1(s,h,$)}}var d=s.return;try{Rj(s)}catch($){W$1(s,d,$)}break;case 5:var b=s.return;try{Rj(s)}catch($){W$1(s,b,$)}}}catch($){W$1(s,s.return,$)}if(s===a){V$1=null;break}var _=s.sibling;if(_!==null){_.return=s.return,V$1=_;break}V$1=s.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok$1=ua$1.ReactCurrentBatchConfig,K=0,Q$2=null,Y$1=null,Z$1=0,fj=0,ej=Uf$1(0),T$1=0,pk=null,rh$1=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$1=!1,Pi$1=null,Ri$1=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi$1(a){return a.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg$1.transition!==null?(Bk===0&&(Bk=yc$1()),Bk):(a=C$1,a!==0||(a=window.event,a=a===void 0?16:jd$1(a.type)),a):1}function gi$1(a,s,o,c){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac$1(a,o,c),(!(K&2)||a!==Q$2)&&(a===Q$2&&(!(K&2)&&(qk|=o),T$1===4&&Ck(a,Z$1)),Dk(a,c),o===1&&K===0&&!(s.mode&1)&&(Gj=B$1()+500,fg$1&&jg$1()))}function Dk(a,s){var o=a.callbackNode;wc$1(a,s);var c=uc$1(a,a===Q$2?Z$1:0);if(c===0)o!==null&&bc$1(o),a.callbackNode=null,a.callbackPriority=0;else if(s=c&-c,a.callbackPriority!==s){if(o!=null&&bc$1(o),s===1)a.tag===0?ig$1(Ek.bind(null,a)):hg$1(Ek.bind(null,a)),Jf$1(function(){!(K&6)&&jg$1()}),o=null;else{switch(Dc$2(c)){case 1:o=fc$1;break;case 4:o=gc$1;break;case 16:o=hc$1;break;case 536870912:o=jc$1;break;default:o=hc$1}o=Fk(o,Gk.bind(null,a))}a.callbackPriority=s,a.callbackNode=o}}function Gk(a,s){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var o=a.callbackNode;if(Hk()&&a.callbackNode!==o)return null;var c=uc$1(a,a===Q$2?Z$1:0);if(c===0)return null;if(c&30||c&a.expiredLanes||s)s=Ik(a,c);else{s=c;var h=K;K|=2;var d=Jk();(Q$2!==a||Z$1!==s)&&(uk=null,Gj=B$1()+500,Kk(a,s));do try{Lk();break}catch(_){Mk(a,_)}while(!0);$g$1(),mk.current=d,K=h,Y$1!==null?s=0:(Q$2=null,Z$1=0,s=T$1)}if(s!==0){if(s===2&&(h=xc$1(a),h!==0&&(c=h,s=Nk(a,h))),s===1)throw o=pk,Kk(a,0),Ck(a,c),Dk(a,B$1()),o;if(s===6)Ck(a,c);else{if(h=a.current.alternate,!(c&30)&&!Ok(h)&&(s=Ik(a,c),s===2&&(d=xc$1(a),d!==0&&(c=d,s=Nk(a,d))),s===1))throw o=pk,Kk(a,0),Ck(a,c),Dk(a,B$1()),o;switch(a.finishedWork=h,a.finishedLanes=c,s){case 0:case 1:throw Error(p$1(345));case 2:Pk(a,tk,uk);break;case 3:if(Ck(a,c),(c&130023424)===c&&(s=fk+500-B$1(),10<s)){if(uc$1(a,0)!==0)break;if(h=a.suspendedLanes,(h&c)!==c){R(),a.pingedLanes|=a.suspendedLanes&h;break}a.timeoutHandle=Ff$1(Pk.bind(null,a,tk,uk),s);break}Pk(a,tk,uk);break;case 4:if(Ck(a,c),(c&4194240)===c)break;for(s=a.eventTimes,h=-1;0<c;){var b=31-oc$1(c);d=1<<b,b=s[b],b>h&&(h=b),c&=~d}if(c=h,c=B$1()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*lk(c/1960))-c,10<c){a.timeoutHandle=Ff$1(Pk.bind(null,a,tk,uk),c);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(a,B$1()),a.callbackNode===o?Gk.bind(null,a):null}function Nk(a,s){var o=sk;return a.current.memoizedState.isDehydrated&&(Kk(a,s).flags|=256),a=Ik(a,s),a!==2&&(s=tk,tk=o,s!==null&&Fj(s)),a}function Fj(a){tk===null?tk=a:tk.push.apply(tk,a)}function Ok(a){for(var s=a;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var h=o[c],d=h.getSnapshot;h=h.value;try{if(!He$1(d(),h))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(a,s){for(s&=~rk,s&=~qk,a.suspendedLanes|=s,a.pingedLanes&=~s,a=a.expirationTimes;0<s;){var o=31-oc$1(s),c=1<<o;a[o]=-1,s&=~c}}function Ek(a){if(K&6)throw Error(p$1(327));Hk();var s=uc$1(a,0);if(!(s&1))return Dk(a,B$1()),null;var o=Ik(a,s);if(a.tag!==0&&o===2){var c=xc$1(a);c!==0&&(s=c,o=Nk(a,c))}if(o===1)throw o=pk,Kk(a,0),Ck(a,s),Dk(a,B$1()),o;if(o===6)throw Error(p$1(345));return a.finishedWork=a.current.alternate,a.finishedLanes=s,Pk(a,tk,uk),Dk(a,B$1()),null}function Qk(a,s){var o=K;K|=1;try{return a(s)}finally{K=o,K===0&&(Gj=B$1()+500,fg$1&&jg$1())}}function Rk(a){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var o=ok$1.transition,c=C$1;try{if(ok$1.transition=null,C$1=1,a)return a()}finally{C$1=c,ok$1.transition=o,K=s,!(K&6)&&jg$1()}}function Hj(){fj=ej.current,E(ej)}function Kk(a,s){a.finishedWork=null,a.finishedLanes=0;var o=a.timeoutHandle;if(o!==-1&&(a.timeoutHandle=-1,Gf$1(o)),Y$1!==null)for(o=Y$1.return;o!==null;){var c=o;switch(wg$1(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&$f$1();break;case 3:zh(),E(Wf$1),E(H),Eh$1();break;case 5:Bh(c);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah$1(c.type._context);break;case 22:case 23:Hj()}o=o.return}if(Q$2=a,Y$1=a=Pg$1(a.current,null),Z$1=fj=s,T$1=0,pk=null,rk=qk=rh$1=0,tk=sk=null,fh$1!==null){for(s=0;s<fh$1.length;s++)if(o=fh$1[s],c=o.interleaved,c!==null){o.interleaved=null;var h=c.next,d=o.pending;if(d!==null){var b=d.next;d.next=h,c.next=b}o.pending=c}fh$1=null}return a}function Mk(a,s){do{var o=Y$1;try{if($g$1(),Fh$1.current=Rh$1,Ih$1){for(var c=M$1.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Ih$1=!1}if(Hh=0,O$1=N=M$1=null,Jh$1=!1,Kh=0,nk.current=null,o===null||o.return===null){T$1=1,pk=s,Y$1=null;break}e:{var d=a,b=o.return,_=o,$=s;if(s=Z$1,_.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var j=$,Xt=_,Lt=Xt.tag;if(!(Xt.mode&1)&&(Lt===0||Lt===11||Lt===15)){var fr=Xt.alternate;fr?(Xt.updateQueue=fr.updateQueue,Xt.memoizedState=fr.memoizedState,Xt.lanes=fr.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var Jr=Ui$1(b);if(Jr!==null){Jr.flags&=-257,Vi$1(Jr,b,_,d,s),Jr.mode&1&&Si$1(d,j,s),s=Jr,$=j;var Js=s.updateQueue;if(Js===null){var qs=new Set;qs.add($),s.updateQueue=qs}else Js.add($);break e}else{if(!(s&1)){Si$1(d,j,s),tj();break e}$=Error(p$1(426))}}else if(I$1&&_.mode&1){var zo=Ui$1(b);if(zo!==null){!(zo.flags&65536)&&(zo.flags|=256),Vi$1(zo,b,_,d,s),Jg$1(Ji$1($,_));break e}}d=$=Ji$1($,_),T$1!==4&&(T$1=2),sk===null?sk=[d]:sk.push(d),d=b;do{switch(d.tag){case 3:d.flags|=65536,s&=-s,d.lanes|=s;var js=Ni$1(d,$,s);ph$1(d,js);break e;case 1:_=$;var eu=d.type,Oo=d.stateNode;if(!(d.flags&128)&&(typeof eu.getDerivedStateFromError=="function"||Oo!==null&&typeof Oo.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(Oo)))){d.flags|=65536,s&=-s,d.lanes|=s;var tu=Qi$1(d,_,s);ph$1(d,tu);break e}}d=d.return}while(d!==null)}Sk(o)}catch(Bo){s=Bo,Y$1===o&&o!==null&&(Y$1=o=o.return);continue}break}while(!0)}function Jk(){var a=mk.current;return mk.current=Rh$1,a===null?Rh$1:a}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$2===null||!(rh$1&268435455)&&!(qk&268435455)||Ck(Q$2,Z$1)}function Ik(a,s){var o=K;K|=2;var c=Jk();(Q$2!==a||Z$1!==s)&&(uk=null,Kk(a,s));do try{Tk();break}catch(h){Mk(a,h)}while(!0);if($g$1(),K=o,mk.current=c,Y$1!==null)throw Error(p$1(261));return Q$2=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc$1();)Uk(Y$1)}function Uk(a){var s=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps,s===null?Sk(a):Y$1=s,nk.current=null}function Sk(a){var s=a;do{var o=s.alternate;if(a=s.return,s.flags&32768){if(o=Ij(o,s),o!==null){o.flags&=32767,Y$1=o;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T$1=6,Y$1=null;return}}else if(o=Ej(o,s,fj),o!==null){Y$1=o;return}if(s=s.sibling,s!==null){Y$1=s;return}Y$1=s=a}while(s!==null);T$1===0&&(T$1=5)}function Pk(a,s,o){var c=C$1,h=ok$1.transition;try{ok$1.transition=null,C$1=1,Wk(a,s,o,c)}finally{ok$1.transition=h,C$1=c}return null}function Wk(a,s,o,c){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));o=a.finishedWork;var h=a.finishedLanes;if(o===null)return null;if(a.finishedWork=null,a.finishedLanes=0,o===a.current)throw Error(p$1(177));a.callbackNode=null,a.callbackPriority=0;var d=o.lanes|o.childLanes;if(Bc$1(a,d),a===Q$2&&(Y$1=Q$2=null,Z$1=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vk||(vk=!0,Fk(hc$1,function(){return Hk(),null})),d=(o.flags&15990)!==0,o.subtreeFlags&15990||d){d=ok$1.transition,ok$1.transition=null;var b=C$1;C$1=1;var _=K;K|=4,nk.current=null,Oj(a,o),dk(o,a),Oe$1(Df),dd$1=!!Cf,Df=Cf=null,a.current=o,hk(o),dc$1(),K=_,C$1=b,ok$1.transition=d}else a.current=o;if(vk&&(vk=!1,wk=a,xk=h),d=a.pendingLanes,d===0&&(Ri$1=null),mc$1(o.stateNode),Dk(a,B$1()),s!==null)for(c=a.onRecoverableError,o=0;o<s.length;o++)h=s[o],c(h.value,{componentStack:h.stack,digest:h.digest});if(Oi$1)throw Oi$1=!1,a=Pi$1,Pi$1=null,a;return xk&1&&a.tag!==0&&Hk(),d=a.pendingLanes,d&1?a===zk?yk++:(yk=0,zk=a):yk=0,jg$1(),null}function Hk(){if(wk!==null){var a=Dc$2(xk),s=ok$1.transition,o=C$1;try{if(ok$1.transition=null,C$1=16>a?16:a,wk===null)var c=!1;else{if(a=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var h=K;for(K|=4,V$1=a.current;V$1!==null;){var d=V$1,b=d.child;if(V$1.flags&16){var _=d.deletions;if(_!==null){for(var $=0;$<_.length;$++){var j=_[$];for(V$1=j;V$1!==null;){var Xt=V$1;switch(Xt.tag){case 0:case 11:case 15:Pj(8,Xt,d)}var Lt=Xt.child;if(Lt!==null)Lt.return=Xt,V$1=Lt;else for(;V$1!==null;){Xt=V$1;var fr=Xt.sibling,Jr=Xt.return;if(Sj(Xt),Xt===j){V$1=null;break}if(fr!==null){fr.return=Jr,V$1=fr;break}V$1=Jr}}}var Js=d.alternate;if(Js!==null){var qs=Js.child;if(qs!==null){Js.child=null;do{var zo=qs.sibling;qs.sibling=null,qs=zo}while(qs!==null)}}V$1=d}}if(d.subtreeFlags&2064&&b!==null)b.return=d,V$1=b;else e:for(;V$1!==null;){if(d=V$1,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Pj(9,d,d.return)}var js=d.sibling;if(js!==null){js.return=d.return,V$1=js;break e}V$1=d.return}}var eu=a.current;for(V$1=eu;V$1!==null;){b=V$1;var Oo=b.child;if(b.subtreeFlags&2064&&Oo!==null)Oo.return=b,V$1=Oo;else e:for(b=eu;V$1!==null;){if(_=V$1,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:Qj(9,_)}}catch(Bo){W$1(_,_.return,Bo)}if(_===b){V$1=null;break e}var tu=_.sibling;if(tu!==null){tu.return=_.return,V$1=tu;break e}V$1=_.return}}if(K=h,jg$1(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,a)}catch{}c=!0}return c}finally{C$1=o,ok$1.transition=s}}return!1}function Xk(a,s,o){s=Ji$1(o,s),s=Ni$1(a,s,1),a=nh$1(a,s,1),s=R(),a!==null&&(Ac$1(a,1,s),Dk(a,s))}function W$1(a,s,o){if(a.tag===3)Xk(a,a,o);else for(;s!==null;){if(s.tag===3){Xk(s,a,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(c))){a=Ji$1(o,a),a=Qi$1(s,a,1),s=nh$1(s,a,1),a=R(),s!==null&&(Ac$1(s,1,a),Dk(s,a));break}}s=s.return}}function Ti$1(a,s,o){var c=a.pingCache;c!==null&&c.delete(s),s=R(),a.pingedLanes|=a.suspendedLanes&o,Q$2===a&&(Z$1&o)===o&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(a,0):rk|=o),Dk(a,s)}function Yk(a,s){s===0&&(a.mode&1?(s=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):s=1);var o=R();a=ih$1(a,s),a!==null&&(Ac$1(a,s,o),Dk(a,o))}function uj(a){var s=a.memoizedState,o=0;s!==null&&(o=s.retryLane),Yk(a,o)}function bk(a,s){var o=0;switch(a.tag){case 13:var c=a.stateNode,h=a.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=a.stateNode;break;default:throw Error(p$1(314))}c!==null&&c.delete(s),Yk(a,o)}var Vk;Vk=function(a,s,o){if(a!==null)if(a.memoizedProps!==s.pendingProps||Wf$1.current)dh$1=!0;else{if(!(a.lanes&o)&&!(s.flags&128))return dh$1=!1,yj(a,s,o);dh$1=!!(a.flags&131072)}else dh$1=!1,I$1&&s.flags&1048576&&ug$1(s,ng$1,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;ij(a,s),a=s.pendingProps;var h=Yf$1(s,H.current);ch$2(s,o),h=Nh$1(null,s,c,a,h,o);var d=Sh$1();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf$1(c)?(d=!0,cg$1(s)):d=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,kh$1(s),h.updater=Ei$1,s.stateNode=h,h._reactInternals=s,Ii$1(s,c,a,o),s=jj(null,s,c,!0,d,o)):(s.tag=0,I$1&&d&&vg$1(s),Xi$1(null,s,h,o),s=s.child),s;case 16:c=s.elementType;e:{switch(ij(a,s),a=s.pendingProps,h=c._init,c=h(c._payload),s.type=c,h=s.tag=Zk(c),a=Ci$1(c,a),h){case 0:s=cj(null,s,c,a,o);break e;case 1:s=hj(null,s,c,a,o);break e;case 11:s=Yi$1(null,s,c,a,o);break e;case 14:s=$i$1(null,s,c,Ci$1(c.type,a),o);break e}throw Error(p$1(306,c,""))}return s;case 0:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ci$1(c,h),cj(a,s,c,h,o);case 1:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ci$1(c,h),hj(a,s,c,h,o);case 3:e:{if(kj(s),a===null)throw Error(p$1(387));c=s.pendingProps,d=s.memoizedState,h=d.element,lh$1(a,s),qh(s,c,null,o);var b=s.memoizedState;if(c=b.element,d.isDehydrated)if(d={element:c,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){h=Ji$1(Error(p$1(423)),s),s=lj(a,s,c,o,h);break e}else if(c!==h){h=Ji$1(Error(p$1(424)),s),s=lj(a,s,c,o,h);break e}else for(yg$1=Lf$1(s.stateNode.containerInfo.firstChild),xg$1=s,I$1=!0,zg$1=null,o=Vg$1(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig$1(),c===h){s=Zi$1(a,s,o);break e}Xi$1(a,s,c,o)}s=s.child}return s;case 5:return Ah$1(s),a===null&&Eg$1(s),c=s.type,h=s.pendingProps,d=a!==null?a.memoizedProps:null,b=h.children,Ef(c,h)?b=null:d!==null&&Ef(c,d)&&(s.flags|=32),gj(a,s),Xi$1(a,s,b,o),s.child;case 6:return a===null&&Eg$1(s),null;case 13:return oj(a,s,o);case 4:return yh$1(s,s.stateNode.containerInfo),c=s.pendingProps,a===null?s.child=Ug$1(s,null,c,o):Xi$1(a,s,c,o),s.child;case 11:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ci$1(c,h),Yi$1(a,s,c,h,o);case 7:return Xi$1(a,s,s.pendingProps,o),s.child;case 8:return Xi$1(a,s,s.pendingProps.children,o),s.child;case 12:return Xi$1(a,s,s.pendingProps.children,o),s.child;case 10:e:{if(c=s.type._context,h=s.pendingProps,d=s.memoizedProps,b=h.value,G(Wg$1,c._currentValue),c._currentValue=b,d!==null)if(He$1(d.value,b)){if(d.children===h.children&&!Wf$1.current){s=Zi$1(a,s,o);break e}}else for(d=s.child,d!==null&&(d.return=s);d!==null;){var _=d.dependencies;if(_!==null){b=d.child;for(var $=_.firstContext;$!==null;){if($.context===c){if(d.tag===1){$=mh$1(-1,o&-o),$.tag=2;var j=d.updateQueue;if(j!==null){j=j.shared;var Xt=j.pending;Xt===null?$.next=$:($.next=Xt.next,Xt.next=$),j.pending=$}}d.lanes|=o,$=d.alternate,$!==null&&($.lanes|=o),bh$1(d.return,o,s),_.lanes|=o;break}$=$.next}}else if(d.tag===10)b=d.type===s.type?null:d.child;else if(d.tag===18){if(b=d.return,b===null)throw Error(p$1(341));b.lanes|=o,_=b.alternate,_!==null&&(_.lanes|=o),bh$1(b,o,s),b=d.sibling}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===s){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}Xi$1(a,s,h.children,o),s=s.child}return s;case 9:return h=s.type,c=s.pendingProps.children,ch$2(s,o),h=eh$1(h),c=c(h),s.flags|=1,Xi$1(a,s,c,o),s.child;case 14:return c=s.type,h=Ci$1(c,s.pendingProps),h=Ci$1(c.type,h),$i$1(a,s,c,h,o);case 15:return bj(a,s,s.type,s.pendingProps,o);case 17:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ci$1(c,h),ij(a,s),s.tag=1,Zf$1(c)?(a=!0,cg$1(s)):a=!1,ch$2(s,o),Gi$1(s,c,h),Ii$1(s,c,h,o),jj(null,s,c,!0,a,o);case 19:return xj(a,s,o);case 22:return dj(a,s,o)}throw Error(p$1(156,s.tag))};function Fk(a,s){return ac$1(a,s)}function $k(a,s,o,c){this.tag=a,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg$1(a,s,o,c){return new $k(a,s,o,c)}function aj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Zk(a){if(typeof a=="function")return aj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da$1)return 11;if(a===Ga$1)return 14}return 2}function Pg$1(a,s){var o=a.alternate;return o===null?(o=Bg$1(a.tag,s,a.key,a.mode),o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.alternate=a,a.alternate=o):(o.pendingProps=s,o.type=a.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=a.flags&14680064,o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,s=a.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o}function Rg$1(a,s,o,c,h,d){var b=2;if(c=a,typeof a=="function")aj(a)&&(b=1);else if(typeof a=="string")b=5;else e:switch(a){case ya$1:return Tg$1(o.children,h,d,s);case za$1:b=8,h|=8;break;case Aa$1:return a=Bg$1(12,o,s,h|2),a.elementType=Aa$1,a.lanes=d,a;case Ea$1:return a=Bg$1(13,o,s,h),a.elementType=Ea$1,a.lanes=d,a;case Fa$1:return a=Bg$1(19,o,s,h),a.elementType=Fa$1,a.lanes=d,a;case Ia$1:return pj(o,h,d,s);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba$1:b=10;break e;case Ca$1:b=9;break e;case Da$1:b=11;break e;case Ga$1:b=14;break e;case Ha$1:b=16,c=null;break e}throw Error(p$1(130,a==null?a:typeof a,""))}return s=Bg$1(b,o,s,h),s.elementType=a,s.type=c,s.lanes=d,s}function Tg$1(a,s,o,c){return a=Bg$1(7,a,c,s),a.lanes=o,a}function pj(a,s,o,c){return a=Bg$1(22,a,c,s),a.elementType=Ia$1,a.lanes=o,a.stateNode={isHidden:!1},a}function Qg$1(a,s,o){return a=Bg$1(6,a,null,s),a.lanes=o,a}function Sg$1(a,s,o){return s=Bg$1(4,a.children!==null?a.children:[],a.key,s),s.lanes=o,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}function al$1(a,s,o,c,h){this.tag=s,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function bl$1(a,s,o,c,h,d,b,_,$){return a=new al$1(a,s,o,_,$),s===1?(s=1,d===!0&&(s|=8)):s=0,d=Bg$1(3,null,null,s),a.current=d,d.stateNode=a,d.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh$1(d),a}function cl$1(a,s,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:c==null?null:""+c,children:a,containerInfo:s,implementation:o}}function dl$1(a){if(!a)return Vf$1;a=a._reactInternals;e:{if(Vb$1(a)!==a||a.tag!==1)throw Error(p$1(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf$1(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p$1(171))}if(a.tag===1){var o=a.type;if(Zf$1(o))return bg$1(a,o,s)}return s}function el$1(a,s,o,c,h,d,b,_,$){return a=bl$1(o,c,!0,a,h,d,b,_,$),a.context=dl$1(null),o=a.current,c=R(),h=yi$1(o),d=mh$1(c,h),d.callback=s??null,nh$1(o,d,h),a.current.lanes=h,Ac$1(a,h,c),Dk(a,c),a}function fl$1(a,s,o,c){var h=s.current,d=R(),b=yi$1(h);return o=dl$1(o),s.context===null?s.context=o:s.pendingContext=o,s=mh$1(d,b),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),a=nh$1(h,s,b),a!==null&&(gi$1(a,h,b,d),oh$1(a,h,b)),b}function gl$1(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl$1(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var o=a.retryLane;a.retryLane=o!==0&&o<s?o:s}}function il$1(a,s){hl$1(a,s),(a=a.alternate)&&hl$1(a,s)}function jl$1(){return null}var kl$1=typeof reportError=="function"?reportError:function(a){console.error(a)};function ll$1(a){this._internalRoot=a}ml$1.prototype.render=ll$1.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(p$1(409));fl$1(a,s,null,null)};ml$1.prototype.unmount=ll$1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;Rk(function(){fl$1(null,a,null,null)}),s[uf$1]=null}};function ml$1(a){this._internalRoot=a}ml$1.prototype.unstable_scheduleHydration=function(a){if(a){var s=Hc$1();a={blockedOn:null,target:a,priority:s};for(var o=0;o<Qc.length&&s!==0&&s<Qc[o].priority;o++);Qc.splice(o,0,a),o===0&&Vc$1(a)}};function nl$1(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ol$1(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function pl$1(){}function ql$1(a,s,o,c,h){if(h){if(typeof c=="function"){var d=c;c=function(){var j=gl$1(b);d.call(j)}}var b=el$1(s,c,a,0,null,!1,!1,"",pl$1);return a._reactRootContainer=b,a[uf$1]=b.current,sf$1(a.nodeType===8?a.parentNode:a),Rk(),b}for(;h=a.lastChild;)a.removeChild(h);if(typeof c=="function"){var _=c;c=function(){var j=gl$1($);_.call(j)}}var $=bl$1(a,0,!1,null,null,!1,!1,"",pl$1);return a._reactRootContainer=$,a[uf$1]=$.current,sf$1(a.nodeType===8?a.parentNode:a),Rk(function(){fl$1(s,$,o,c)}),$}function rl$1(a,s,o,c,h){var d=o._reactRootContainer;if(d){var b=d;if(typeof h=="function"){var _=h;h=function(){var $=gl$1(b);_.call($)}}fl$1(s,b,a,h)}else b=ql$1(o,s,a,h,c);return gl$1(b)}Ec$1=function(a){switch(a.tag){case 3:var s=a.stateNode;if(s.current.memoizedState.isDehydrated){var o=tc$1(s.pendingLanes);o!==0&&(Cc$1(s,o|1),Dk(s,B$1()),!(K&6)&&(Gj=B$1()+500,jg$1()))}break;case 13:Rk(function(){var c=ih$1(a,1);if(c!==null){var h=R();gi$1(c,a,1,h)}}),il$1(a,1)}};Fc$1=function(a){if(a.tag===13){var s=ih$1(a,134217728);if(s!==null){var o=R();gi$1(s,a,134217728,o)}il$1(a,134217728)}};Gc$1=function(a){if(a.tag===13){var s=yi$1(a),o=ih$1(a,s);if(o!==null){var c=R();gi$1(o,a,s,c)}il$1(a,s)}};Hc$1=function(){return C$1};Ic$1=function(a,s){var o=C$1;try{return C$1=a,s()}finally{C$1=o}};yb$1=function(a,s,o){switch(s){case"input":if(bb$1(a,o),s=o.name,o.type==="radio"&&s!=null){for(o=a;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==a&&c.form===a.form){var h=Db$1(c);if(!h)throw Error(p$1(90));Wa$1(c),bb$1(c,h)}}}break;case"textarea":ib$1(a,o);break;case"select":s=o.value,s!=null&&fb$1(a,!!o.multiple,s,!1)}};Gb$1=Qk;Hb$1=Rk;var sl$1={usingClientEntryPoint:!1,Events:[Cb$1,ue,Db$1,Eb$1,Fb$1,Qk]},tl$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul$1={bundleType:tl$1.bundleType,version:tl$1.version,rendererPackageName:tl$1.rendererPackageName,rendererConfig:tl$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb$1(a),a===null?null:a.stateNode},findFiberByHostInstance:tl$1.findFiberByHostInstance||jl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl$1.isDisabled&&vl$1.supportsFiber)try{kc$1=vl$1.inject(ul$1),lc$1=vl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl$1;reactDom_production_min.createPortal=function(a,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl$1(s))throw Error(p$1(200));return cl$1(a,s,null,o)};reactDom_production_min.createRoot=function(a,s){if(!nl$1(a))throw Error(p$1(299));var o=!1,c="",h=kl$1;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=bl$1(a,1,!1,null,null,o,!1,c,h),a[uf$1]=s.current,sf$1(a.nodeType===8?a.parentNode:a),new ll$1(s)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(p$1(188)):(a=Object.keys(a).join(","),Error(p$1(268,a)));return a=Zb$1(s),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Rk(a)};reactDom_production_min.hydrate=function(a,s,o){if(!ol$1(s))throw Error(p$1(200));return rl$1(null,a,s,!0,o)};reactDom_production_min.hydrateRoot=function(a,s,o){if(!nl$1(a))throw Error(p$1(405));var c=o!=null&&o.hydratedSources||null,h=!1,d="",b=kl$1;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),s=el$1(s,null,a,1,o??null,h,!1,d,b),a[uf$1]=s.current,sf$1(a),c)for(a=0;a<c.length;a++)o=c[a],h=o._getVersion,h=h(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,h]:s.mutableSourceEagerHydrationData.push(o,h);return new ml$1(s)};reactDom_production_min.render=function(a,s,o){if(!ol$1(s))throw Error(p$1(200));return rl$1(null,a,s,!1,o)};reactDom_production_min.unmountComponentAtNode=function(a){if(!ol$1(a))throw Error(p$1(40));return a._reactRootContainer?(Rk(function(){rl$1(null,null,a,!1,function(){a._reactRootContainer=null,a[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,s,o,c){if(!ol$1(o))throw Error(p$1(200));if(a==null||a._reactInternals===void 0)throw Error(p$1(38));return rl$1(a,s,o,!1,c)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;var jxg={};try{typeof JXG=="object"&&!JXG.extend&&(jxg=JXG)}catch{}jxg.extend=function(a,s,o,c){var h,d;o=o||!1,c=c||!1;for(h in s)(!o||o&&s.hasOwnProperty(h))&&(c?d=h.toLowerCase():d=h,a[d]=s[h])};jxg.defineConstant=function(a,s,o,c){c=c||!1,!(c&&jxg.exists(a[s]))&&Object.defineProperty(a,s,{value:o,writable:!1,enumerable:!0,configurable:!1})};jxg.extendConstants=function(a,s,o,c){var h,d;o=o||!1,c=c||!1;for(h in s)(!o||o&&s.hasOwnProperty(h))&&(c?d=h.toUpperCase():d=h,this.defineConstant(a,d,s[h]))};jxg.extend(jxg,{boards:{},readers:{},elements:{},registerElement:function(a,s){a=a.toLowerCase(),this.elements[a]=s},registerReader:function(a,s){var o,c;for(o=0;o<s.length;o++)c=s[o].toLowerCase(),typeof this.readers[c]!="function"&&(this.readers[c]=a)},shortcut:function(a,s){return function(){return a[s].apply(this,arguments)}},getRef:function(a,s){return jxg.deprecated("JXG.getRef()","Board.select()"),a.select(s)},getReference:function(a,s){return jxg.deprecated("JXG.getReference()","Board.select()"),a.select(s)},getBoardByContainerId:function(a){var s;for(s in JXG.boards)if(JXG.boards.hasOwnProperty(s)&&JXG.boards[s].container===a)return JXG.boards[s];return null},deprecated:function(a,s){var o=a+" is deprecated.";s&&(o+=" Please use "+s+" instead."),jxg.warn(o)},warn:function(a){typeof window=="object"&&window.console&&console.warn?console.warn("WARNING:",a):typeof document=="object"&&document.getElementById("warning")&&(document.getElementById("debug").innerText+="WARNING: "+a+`
`)},debugInt:function(a){var s,o;for(s=0;s<arguments.length;s++)o=arguments[s],typeof window=="object"&&window.console&&console.log?console.log(o):typeof document=="object"&&document.getElementById("debug")&&(document.getElementById("debug").innerText+=o+`
`)},debugWST:function(a){var s=new Error;jxg.debugInt.apply(this,arguments),s&&s.stack&&(jxg.debugInt("stacktrace"),jxg.debugInt(s.stack.split(`
`).slice(1).join(`
`)))},debugLine:function(a){var s=new Error;jxg.debugInt.apply(this,arguments),s&&s.stack&&jxg.debugInt("Called from",s.stack.split(`
`).slice(2,3).join(`
`))},debug:function(a){jxg.debugInt.apply(this,arguments)},themes:{}});const JXG$1=jxg;var major=1,minor=12,patch=2,version$3=major+"."+minor+"."+patch,constants;constants={version:version$3,licenseText:"JSXGraph v"+version$3+"  jsxgraph.org",licenseLogo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAACfCAYAAADnGwvgAAAACXBIWXMAAAsSAAALEgHS3X78AAAIPklEQVR4nO2d21XjSBCG/96z75ABzgBPBHgiWDLARDCeCBAZeCMYO4KFCEbOwM7AZIAjqH1QiTHGF7XUF7X6/87xw4APqodv+qaqaiMiICQGf8UOgOQL5SPRoHwkGpSPROPv2AH4whhzDWCs/xwDuI4YTu4sRGR7+MPByGeMGQG4BzBBJdtNxHDIZ0oA28MfJi2fCjfVD2VLjCTlU+kKAA9RAyGdSEo+SjcskpHPGFMAmAG4ihwKcUTv5dPR7gXAbdxIiGt6fc5njJkAWIPiDZLeymeMmQL4DU6zg6WX8ql4v2LHQfzSO/koXj70Sj6Klxd92+2uAXyPHQS5yBQOzlp7JZ+IrGPHQC6jpxCd6dW0S/KC8pFoUD4SDcpHokH5SDQoH4kG5SPRoHwkGpSPRCPaGw5jzBjACFWl2Ug/JB4LEVmEfGAw+bSO9h5/yhuZp9cvytAP9C6fvgecAfjH97NIWniTT9OjCrCelpzAuXw60hUA7lz/bTIsnMmna7oCwA9Xf5MMGyfy6c51AVaZEQs6n/Pp2q4ExSOWdBr5WHNButB65KN4pCut5KN4xAXW8ulRCsUjnbGSb69pDyGdsR35XsB3ssQRjeXT/ng8TiHOaCSfTrczr5GQ7Gg68hXgdEscc/GQWUc99kC+zArAO6p+M4fU94Aw2WKPJm84Ct9BJMorqteKpU2PGX0PPkGVVJu1jGfl46j3hTcAc1Qp5+9t/oCKugYwz/0ekUtrvmmIIBLgDcCjiIxEZN5WvENEZCsihYiMADzqc7KB8p1nB+BZpVv4fJD+/TGAZ5/P6RMn5dMpIbupYI8NgLGIFKEeKCLv+rxv+vxBc27kuw8WRf9Yisj42E2JIdB14QTAMsbzQ3FOvkmoIHrGTxGZxg5CR8EpBizgud3u+Mzvhspj6MLpS4jI1BgDDPDU4ejIp8VAua33nvsmXs1QR8BT025uo94y5MaiDSrga+w4XNKrbvSR2MBR0oS+vbjG5/VyCeDdUaf9KaoD6kHMSqfky2nkm3Y5NDbG1P1n7nE8+eJJv7dDlQ+5EJGyzbNE5H3vTrrkOTXtXgeNIh7PbUckY8y9MWYL4D9Um4FLWT9X+r3fxph127ssVNxBrP9y7s+3Q/We1gpjzLUx5gWVdG2nv1tUEi50c2fLDFX8SZOzfDPb6VbXdCXcddx6AFDaCqhxW//H6Ru5ylevvxqzJ57rUoJbtBAQlC9ZrFKiVIwF/GVz38KyOaPGn/TaL1f5bEeNAv6Lp261SMuGhYc4gpGjfG82CQO6Kw3V9u1Js4kaoTvfZDceOcpnW/Re+AjC4fOSLeLPUb6y6Rd1kxG6zuLBZvRDhEberqB855l6iuESNrmUyV6QnZ18lmd7E19xXKCxfCnfzp6bfCvL78dqD2I71Se56chNvsa0ffcaiSRHP8rXUxKTvxWUj0SD8vUXJ4XpfYbynWYb8+GWu9gk8y9zk2/U9Iv6Ci7WLtK2bUaSTTtzk882+bP0EYTL57ZMRu0FuclXvzJrSqz3pjbPTbbeJjv5YPfW4gXhp96diNjIN/EViG9ClU6+oXnu2Qh+q/MnaJjPp9Vic2gFWiBscw0nPoIIQSj5tk2LsvVw1bd8NsxRFeyE6EldN59shK73ku1umuO0e6W1to3QRISpv3A+YVtDnHQnsRzlAyw7FOga7F9PsdT8bFFMnvT1FLnKd2eZsAkRmcFfwc5SRKzWero8SfJ8ryZX+YAW6fHarMd129rHlv0AC8dxBCdn+R7aZI7oxuk7ujfv3gD41qYtm8ad7EajJmf5gJaF1yJSduggX3e2H7fJQt6rIU6e3OVrUyv7gYgsVMJvqKbjFb4eSr/pz59RjXRdO9sXGHiLtJx4Msa8dKmF2LvYxSuBa4i9k/vIV9OmV0pQ9J10sjW6x6B8FVfosYAa1+Au2qZ8f2jbLcorGk+Jgazz9qF8n6kFHEWOA8DHVLtG4ofJp6B8X7kF0LptrSv0/XOJAY54NZTvOFeo2tbOQ0/D2nZ3jqrt7qDWeIdQvvP8QDUKBske0U7zawzoOOUclO8yNwD+M8aUviQ0xky1s/0vDHiaPYSHzM25Q5UNU2dlL7rcSqmbiSmqnLxshNuH8tlzgyqt/klFLPWzBbA+lgyq68bx3meCTIXbh/J14wZVyv9H2r/eEEkawDUfiQblIyHYHvsh5SPeObUxo3zENyeL7ikf8c3JPEfKR3xD+Ug0KB+JRnnqF5SP+GRz7hUk5SM+WZz7JeUjPjlb8ET5iC9Wl7J+KB/xRXHpC5SP+GDVpN0b5SM+KJp8ifIR17w2bXJJ+YhLdrBoIUz5iEusekpTPuKKpeX9IZSPOGHTprUv5SNd2aDlRTSUj3RhA2BieXfIB70rndRtehL1h8aYEgNozN2STuIBHPlIOxboKB7Qw5GP9J8ubUL24chHasrQD6R8JBqUjwD42OgFhfIRoNq5BofyESDABTbHoHwEiLDZACgfqYhysxHlI69dD4vbEuqQ+c4YI4GeReyIdp8bR768eet4/WonKF/eLGI+nPLlyw4tb1p3BeXLl1msjUYN5cuTVcy1Xg3ly5NZ7AAAypcjP0Ukyuu0QyhfXixFJOomYx/Klw8b9GS6raF8edC52McHlG/49FI8gPINnd6KB1C+IbMUkXFfxQNYOjlEdqi6RUXLVmkKR75h8QpglIJ4AOUbCisA30Xkvs/T7CGcdtNmBaCIUfboAsqXHhtUeXgvrtpWxILy9ZsdqrLG+lOmLtw+RuRraYUxZgRgFDgW8oftkCQ7xVH5CAkBd7skGpSPRIPykWhQPhKN/wEKYnCiOMadyQAAAABJRU5ErkJggg==",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_TYPE_INTERSECTION_LINE3D:39,OBJECT_TYPE_SPHERE3D:40,OBJECT_TYPE_CIRCLE3D:41,OBJECT_TYPE_INTERSECTION_CIRCLE3D:42,OBJECT_TYPE_TEXT3D:43,OBJECT_TYPE_FACE3D:44,OBJECT_TYPE_POLYHEDRON3D:45,OBJECT_TYPE_POLYGON3D:46,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8};JXG$1.extendConstants(JXG$1,constants);const Const=constants;var undef$1,memoizer=function(a){var s,o;return a.memo||(s={},o=Array.prototype.join,a.memo=function(){var c=o.call(arguments);return s[c]!==undef$1?s[c]:s[c]=a.apply(this,arguments)}),a.memo};JXG$1.Math={eps:1e-6,relDif:function(a,s){var o=Math.abs(a),c=Math.abs(s);return c=Math.max(o,c),c===0?0:Math.abs(a-s)/c},mod:function(a,s){return a-Math.floor(a/s)*s},wrap:function(a,s,o){return s+this.mod(a-s,o-s)},clamp:function(a,s,o){return Math.min(Math.max(a,s),o)},wrapAndClamp:function(a,s,o,c){var h=.5*(s+o),d=.5*c;return this.clamp(this.wrap(a,h-d,h+d),s,o)},vector:function(a,s){var o,c;for(s=s||0,o=[],c=0;c<a;c++)o[c]=s;return o},matrix:function(a,s,o){var c,h,d;for(o=o||0,s=s||a,c=[],h=0;h<a;h++)for(c[h]=[],d=0;d<s;d++)c[h][d]=o;return c},identity:function(a,s){var o,c;for(s===undef$1&&typeof s!="number"&&(s=a),o=this.matrix(a,s),c=0;c<Math.min(a,s);c++)o[c][c]=1;return o},frustum:function(a,s,o,c,h,d){var b=this.matrix(4,4);return b[0][0]=h*2/(s-a),b[0][1]=0,b[0][2]=(s+a)/(s-a),b[0][3]=0,b[1][0]=0,b[1][1]=h*2/(c-o),b[1][2]=(c+o)/(c-o),b[1][3]=0,b[2][0]=0,b[2][1]=0,b[2][2]=-(d+h)/(d-h),b[2][3]=-(d*h*2)/(d-h),b[3][0]=0,b[3][1]=0,b[3][2]=-1,b[3][3]=0,b},projection:function(a,s,o,c){var h=o*Math.tan(a/2),d=h*s;return this.frustum(-d,d,-h,h,o,c)},matVecMult:function(a,s){var o,c,h,d=a.length,b=s.length,_=[];if(b===3)for(o=0;o<d;o++)_[o]=a[o][0]*s[0]+a[o][1]*s[1]+a[o][2]*s[2];else for(o=0;o<d;o++){for(h=0,c=0;c<b;c++)h+=a[o][c]*s[c];_[o]=h}return _},vecMatMult:function(a,s){var o,c,h,d=s.length,b=a.length,_=[];if(b===3)for(o=0;o<d;o++)_[o]=a[0]*s[0][o]+a[1]*s[1][o]+a[2]*s[2][o];else for(o=0;o<b;o++){for(h=0,c=0;c<d;c++)h+=a[c]*s[c][o];_[o]=h}return _},matMatMult:function(a,s){var o,c,h,d,b=a.length,_=b>0?s[0].length:0,$=s.length,j=this.matrix(b,_);for(o=0;o<b;o++)for(c=0;c<_;c++){for(h=0,d=0;d<$;d++)h+=a[o][d]*s[d][c];j[o][c]=h}return j},matNumberMult:function(a,s){var o,c,h=a.length,d=h>0?a[0].length:0,b=this.matrix(h,d);for(o=0;o<h;o++)for(c=0;c<d;c++)b[o][c]=a[o][c]*s;return b},matMatAdd:function(a,s){var o,c,h=a.length,d=h>0?a[0].length:0,b=this.matrix(h,d);for(o=0;o<h;o++)for(c=0;c<d;c++)b[o][c]=a[o][c]+s[o][c];return b},transpose:function(a){var s,o,c,h,d;for(h=a.length,d=a.length>0?a[0].length:0,s=this.matrix(d,h),o=0;o<d;o++)for(c=0;c<h;c++)s[o][c]=a[c][o];return s},inverse:function(a){var s,o,c,h,d,b=this.eps*this.eps,_,$,j=a.length,Xt=[],Lt=[],fr=[];for(s=0;s<j;s++){for(Xt[s]=[],o=0;o<j;o++)Xt[s][o]=a[s][o];Lt[s]=s}for(o=0;o<j;o++){for(_=Math.abs(Xt[o][o]),h=o,s=o+1;s<j;s++)Math.abs(Xt[s][o])>_&&(_=Math.abs(Xt[s][o]),h=s);if(_<=b)return JXG$1.warn("JXG.Math.inverse: singular matrix"),[];if(h>o){for(c=0;c<j;c++)$=Xt[o][c],Xt[o][c]=Xt[h][c],Xt[h][c]=$;$=Lt[o],Lt[o]=Lt[h],Lt[h]=$}for(d=1/Xt[o][o],s=0;s<j;s++)Xt[s][o]*=d;for(Xt[o][o]=d,c=0;c<j;c++)if(c!==o){for(s=0;s<j;s++)s!==o&&(Xt[s][c]-=Xt[s][o]*Xt[o][c]);Xt[o][c]=-d*Xt[o][c]}}for(s=0;s<j;s++){for(c=0;c<j;c++)fr[Lt[c]]=Xt[s][c];for(c=0;c<j;c++)Xt[s][c]=fr[c]}return Xt},trace:function(a){var s,o,c,h=0;if(o=a.length,c=a.length>0?a[0].length:0,o!==c)return NaN;for(s=0;s<c;s++)h+=a[s][s];return h},innerProduct:function(a,s,o){var c,h=0;for((o===undef$1||!JXG$1.isNumber(o))&&(o=a.length),c=0;c<o;c++)h+=a[c]*s[c];return h},crossProduct:function(a,s){return[a[1]*s[2]-a[2]*s[1],a[2]*s[0]-a[0]*s[2],a[0]*s[1]-a[1]*s[0]]},norm:function(a,s){var o,c=0;for((s===undef$1||!JXG$1.isNumber(s))&&(s=a.length),o=0;o<s;o++)c+=a[o]*a[o];return Math.sqrt(c)},axpy:function(a,s,o){var c,h=s.length,d=[];for(c=0;c<h;c++)d[c]=a*s[c]+o[c];return d},factorial:memoizer(function(a){return a<0?NaN:(a=Math.floor(a),a===0||a===1?1:a*this.factorial(a-1))}),binomial:memoizer(function(a,s){var o,c;if(s>a||s<0)return NaN;if(s=Math.round(s),a=Math.round(a),s===0||s===a)return 1;for(o=1,c=0;c<s;c++)o*=a-c,o/=c+1;return o}),cosh:Math.cosh||function(a){return(Math.exp(a)+Math.exp(-a))*.5},sinh:Math.sinh||function(a){return(Math.exp(a)-Math.exp(-a))*.5},acosh:Math.acosh||function(a){return Math.log(a+Math.sqrt(a*a-1))},asinh:Math.asinh||function(a){return a===-1/0?a:Math.log(a+Math.sqrt(a*a+1))},cot:function(a){return 1/Math.tan(a)},acot:function(a){return(a>=0?.5:-.5)*Math.PI-Math.atan(a)},nthroot:function(a,s){var o=1/s;return s<=0||Math.floor(s)!==s?NaN:a===0?0:a>0?Math.exp(o*Math.log(a)):s%2===1?-Math.exp(o*Math.log(-a)):NaN},cbrt:Math.cbrt||function(a){return this.nthroot(a,3)},pow:function(a,s){return a===0?s===0?1:0:Math.floor(s)===s?Math.pow(a,s):a>0?Math.exp(s*Math.log(a)):NaN},ratpow:function(a,s,o){var c;return s===0?1:o===0?NaN:(c=this.gcd(s,o),this.nthroot(this.pow(a,s/c),o/c))},log10:function(a){return Math.log(a)/Math.log(10)},log2:function(a){return Math.log(a)/Math.log(2)},log:function(a,s){return s!==void 0&&JXG$1.isNumber(s)?Math.log(a)/Math.log(s):Math.log(a)},sign:Math.sign||function(a){return a=+a,a===0||isNaN(a)?a:a>0?1:-1},squampow:function(a,s){var o;if(Math.floor(s)===s){for(o=1,s<0&&(a=1/a,s*=-1);s!==0;)s&1&&(o*=a),s>>=1,a*=a;return o}return this.pow(a,s)},gcd:function(a,s){var o,c=!0;if(a=Math.abs(a),s=Math.abs(s),!(JXG$1.isNumber(a)&&JXG$1.isNumber(s)))return NaN;for(s>a&&(o=a,a=s,s=o);c;){if(a%=s,a===0)return s;if(s%=a,s===0)return a}},lcm:function(a,s){var o;return JXG$1.isNumber(a)&&JXG$1.isNumber(s)?(o=a*s,o!==0?o/this.gcd(a,s):0):NaN},roundToStep:function(a,s,o,c){var h=a,d,b;if(!JXG$1.exists(s)&&!JXG$1.exists(o)&&!JXG$1.exists(c))return h;if(JXG$1.exists(c)&&(h=Math.min(h,c)),JXG$1.exists(o)&&(h=Math.max(h,o)),b=o||0,JXG$1.exists(s)){if(d=(h-b)/s,Number.isInteger(d))return h;d=Math.round(d),h=b+d*s}return JXG$1.exists(c)&&(h=Math.min(h,c)),JXG$1.exists(o)&&(h=Math.max(h,o)),h},erf:function(a){return this.ProbFuncs.erf(a)},erfc:function(a){return this.ProbFuncs.erfc(a)},erfi:function(a){return this.ProbFuncs.erfi(a)},ndtr:function(a){return this.ProbFuncs.ndtr(a)},ndtri:function(a){return this.ProbFuncs.ndtri(a)},hypot:function(){var a,s,o,c;for(s=arguments.length,a=0,c=0;a<s;a++)o=arguments[a],c+=o*o;return Math.sqrt(c)},hstep:function(a){return a>0?1:a<0?0:.5},gamma:function(a){var s,o,c,h,d,b=7,_=[1,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(a<.5)o=Math.PI/(Math.sin(Math.PI*a)*this.gamma(1-a));else{for(a-=1,s=_[0],d=_.length,h=1;h<d;h++)s+=_[h]/(a+h);c=a+b+.5,o=Math.sqrt(2*Math.PI)*Math.pow(c,a+.5)*Math.exp(-c)*s}return o},lt:function(a,s){return a<s},leq:function(a,s){return a<=s},gt:function(a,s){return a>s},geq:function(a,s){return a>=s},eq:function(a,s){return a===s},neq:function(a,s){return a!==s},and:function(a,s){return a&&s},not:function(a){return!a},or:function(a,s){return a||s},xor:function(a,s){return(a||s)&&!(a&&s)},decToFraction:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt=0,fr=20;for(s=JXG$1.def(s,.001),a=Math.round(a*1e12)*1e-12,c=a<0?-1:1,a=Math.abs(a),o=Math.floor(a),a-=Math.floor(a),h=0,_=1,d=b=h,Xt=0,$=j=1;a-Math.floor(a)>s&&Lt<fr;)a=1/(a-h),h=Math.floor(a),d=_+h*b,$=Xt+h*j,_=b,Xt=j,b=d,j=$,Lt++;return[c,o,d,$]},normalize:function(a){var s,o,c=2*a[3],h=a[4]/c;return a[5]=h,a[6]=-a[1]/c,a[7]=-a[2]/c,isFinite(h)?Math.abs(h)>=1?(a[0]=(a[6]*a[6]+a[7]*a[7]-h*h)/(2*h),a[1]=-a[6]/h,a[2]=-a[7]/h,a[3]=1/(2*h),a[4]=1):(o=h<=0?-1:1,a[0]=o*(a[6]*a[6]+a[7]*a[7]-h*h)*.5,a[1]=-o*a[6],a[2]=-o*a[7],a[3]=o/2,a[4]=o*h):(s=this.hypot(a[1],a[2]),a[0]/=s,a[1]/=s,a[2]/=s,a[3]=0,a[4]=1),a},toGL:function(a){var s,o,c;if(typeof Float32Array=="function"?s=new Float32Array(16):s=new Array(16),a.length!==4&&a[0].length!==4)return s;for(o=0;o<4;o++)for(c=0;c<4;c++)s[o+4*c]=a[o][c];return s},Vieta:function(a){var s=a.length,o=[],c,h,d;for(o=a.slice(),c=1;c<s;++c){for(d=o[c],o[c]*=o[c-1],h=c-1;h>=1;--h)o[h]+=o[h-1]*d;o[0]+=d}return o}};const Mat=JXG$1.Math;JXG$1.extend(JXG$1,{isBoard:function(a){return a!==null&&typeof a=="object"&&this.isNumber(a.BOARD_MODE_NONE)&&this.isObject(a.objects)&&this.isObject(a.jc)&&this.isFunction(a.update)&&!!a.containerObj&&this.isString(a.id)},isId:function(a,s){return typeof s=="string"&&!!a.objects[s]},isName:function(a,s){return typeof s=="string"&&!!a.elementsByName[s]},isGroup:function(a,s){return typeof s=="string"&&!!a.groups[s]},isString:function(a){return typeof a=="string"},isNumber:function(a,s,o){var c=typeof a=="number"||Object.prototype.toString.call(a)==="[Object Number]";return s=s||!1,o=o===void 0?!0:o,s&&(c=c||""+parseFloat(a)===a),o||(c=c&&!isNaN(a)),c},isFunction:function(a){return typeof a=="function"},isArray:function(a){var s;return Array.isArray?s=Array.isArray(a):s=a!==null&&typeof a=="object"&&typeof a.splice=="function"&&typeof a.join=="function",s},isObject:function(a){return typeof a=="object"&&!this.isArray(a)},isDocumentOrFragment:function(a){return this.isObject(a)&&(a.nodeType===9||a.nodeType===11)},isPoint:function(a){return a!==null&&typeof a=="object"&&this.exists(a.elementClass)?a.elementClass===Const.OBJECT_CLASS_POINT:!1},isPoint3D:function(a){return a!==null&&typeof a=="object"&&this.exists(a.type)?a.type===Const.OBJECT_TYPE_POINT3D:!1},isPointType:function(a,s){var o,c;return this.isArray(s)||this.isFunction(s)&&(o=s(),this.isArray(o)&&o.length>1)?!0:(c=a.select(s),this.isPoint(c))},isPointType3D:function(a,s){var o,c;return this.isArray(s)&&s.length>=3||this.isFunction(s)&&(o=s(),this.isArray(o)&&o.length>=3)?!0:(c=a.select(s),this.isPoint3D(c))},isTransformationOrArray:function(a){if(a!==null){if(this.isArray(a)&&a.length>0)return this.isTransformationOrArray(a[0]);if(typeof a=="object")return a.type===Const.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(a){return Object.keys(a).length===0},exists:function(a,s){var o=!(a==null||a===null);return s=s||!1,s?o&&a!=="":o},def:function(a,s){return this.exists(a)?a:s},str2Bool:function(a){return this.exists(a)?typeof a=="boolean"?a:this.isString(a)?a.toLowerCase()==="true":!1:!0},cssParse:function(a){var s=a;return this.isString(s)?(s=s.replace(/\s*;\s*$/g,""),s=s.replace(/\s*;\s*/g,'","'),s=s.replace(/\s*:\s*/g,'":"'),s=s.trim(),s='{"'+s+'"}',JSON.parse(s)):{}},cssStringify:function(a){var s="",o,c;if(!this.isObject(a))return"";for(o in a)a.hasOwnProperty(o)&&(c=a[o],!(!this.isString(c)&&!this.isNumber(c))&&(s+=o+":"+c+"; "));return s=s.trim(),s},createEvalFunction:function(a,s,o){var c=[],h,d,b,_={};for(d=0;d<o;d++){c[d]=this.createFunction(s[d],a);for(b in c[d].deps)_[b]=c[d].deps}return h=function($){return c[$]()},h.deps=_,h},createFunction:function(a,s,o,c){var h=null;return this.isString(a)?h=s.jc.snippet(a,!0,o,!1):this.isFunction(a)?(h=a,h.deps=this.isObject(a.deps)?a.deps:{}):(this.isNumber(a)||this.isArray(a))&&(h=function(){return a},h.deps={}),h!==null&&(h.origin=a),h},providePoints:function(a,s,o,c,h){var d,b,_,$=0,j=[],Xt,Lt;for(this.isArray(s)||(s=[s]),_=s.length,this.exists(h)&&($=h.length),$===0&&(Xt=this.copyAttributes(o,a.options,c)),d=0;d<_;++d)if($>0&&(b=Math.min(d,$-1),Xt=this.copyAttributes(o,a.options,c,h[b].toLowerCase())),this.isArray(s[d])&&s[d].length>1?(j.push(a.create("point",s[d],Xt)),j[j.length-1]._is_new=!0):this.isFunction(s[d])?(Lt=s[d](),this.isArray(Lt)&&Lt.length>1&&(j.push(a.create("point",[s[d]],Xt)),j[j.length-1]._is_new=!0)):j.push(a.select(s[d])),!this.isPoint(j[d]))return!1;return j},providePoints3D:function(a,s,o,c,h){var d,b,_,$=0,j=[],Xt,Lt;for(this.isArray(s)||(s=[s]),_=s.length,this.exists(h)&&($=h.length),$===0&&(Xt=this.copyAttributes(o,a.board.options,c)),d=0;d<_;++d){if($>0&&(b=Math.min(d,$-1),Xt=this.copyAttributes(o,a.board.options,c,h[b])),this.isArray(s[d])&&s[d].length>0&&s[d].every(fr=>this.isArray(fr)&&this.isNumber(fr[0])))for(b=0;b<s[d].length;b++)j.push(a.create("point3d",s[d][b],Xt)),j[j.length-1]._is_new=!0;else this.isArray(s[d])&&s[d].every(fr=>this.isNumber(fr)||this.isFunction(fr))?(j.push(a.create("point3d",s[d],Xt)),j[j.length-1]._is_new=!0):this.isPoint3D(s[d])?j.push(s[d]):this.isFunction(s[d])?(Lt=s[d](),this.isArray(Lt)&&Lt.length>1&&(j.push(a.create("point3d",[s[d]],Xt)),j[j.length-1]._is_new=!0)):j.push(a.select(s[d]));if(!this.isPoint3D(j[d]))return!1}return j},bind:function(a,s){return function(){return a.apply(s,arguments)}},evaluate:function(a){return this.isFunction(a)?a():a},indexOf:function(a,s,o){var c,h=this.exists(o);if(Array.indexOf&&!h)return a.indexOf(s);for(c=0;c<a.length;c++)if(h&&a[c][o]===s||!h&&a[c]===s)return c;return-1},eliminateDuplicates:function(a){var s,o=a.length,c=[],h={};for(s=0;s<o;s++)h[a[s]]=0;for(s in h)h.hasOwnProperty(s)&&c.push(s);return c},swap:function(a,s,o){var c;return c=a[s],a[s]=a[o],a[o]=c,a},uniqueArray:function(a){var s,o,c,h=[];if(a.length===0)return[];for(s=0;s<a.length;s++){if(c=this.isArray(a[s]),!this.exists(a[s])){a[s]="";continue}for(o=s+1;o<a.length;o++)c&&JXG$1.cmpArrays(a[s],a[o])?a[s]=[]:!c&&a[s]===a[o]&&(a[s]="")}for(o=0,s=0;s<a.length;s++)c=this.isArray(a[s]),!c&&a[s]!==""?(h[o]=a[s],o++):c&&a[s].length!==0&&(h[o]=a[s].slice(0),o++);return a=h,h},toUniqueArrayFloat:function(a,s){var o,c,h;for(o=a.slice(),o.sort(function(d,b){return d-b}),h=o.length,c=h-1;c>0;c--)Math.abs(o[c]-o[c-1])<s&&o.splice(c,1);return o},isInArray:function(a,s){return JXG$1.indexOf(a,s)>-1},coordsArrayToMatrix:function(a,s){var o,c=[],h=[];for(o=0;o<a.length;o++)s?(c.push(a[o].usrCoords[1]),h.push(a[o].usrCoords[2])):h.push([a[o].usrCoords[1],a[o].usrCoords[2]]);return s&&(h=[c,h]),h},cmpArrays:function(a,s){var o;if(a===s)return!0;if(a.length!==s.length)return!1;for(o=0;o<a.length;o++)if(this.isArray(a[o])&&this.isArray(s[o])){if(!this.cmpArrays(a[o],s[o]))return!1}else if(a[o]!==s[o])return!1;return!0},removeElementFromArray:function(a,s){var o;for(o=0;o<a.length;o++)if(a[o]===s)return a.splice(o,1),a;return a},trunc:function(a,s){return s=JXG$1.def(s,0),this.toFixed(a,s)},_decimalAdjust:function(a,s,o){return o===void 0||+o==0?Math[a](s):(s=+s,o=+o,isNaN(s)||!(typeof o=="number"&&o%1===0)?NaN:(s=s.toString().split("e"),s=Math[a](+(s[0]+"e"+(s[1]?+s[1]-o:-o))),s=s.toString().split("e"),+(s[0]+"e"+(s[1]?+s[1]+o:o))))},_round10:function(a,s){return this._decimalAdjust("round",a,s)},_floor10:function(a,s){return this._decimalAdjust("floor",a,s)},_ceil10:function(a,s){return this._decimalAdjust("ceil",a,s)},toFixed:function(a,s){return this._round10(a,-s).toFixed(s)},autoDigits:function(a){var s=Math.abs(a),o;return s>=.1?o=this.toFixed(a,2):s>=.01?o=this.toFixed(a,4):s>=1e-4?o=this.toFixed(a,6):o=a,o},parseNumber:function(a,s,o){var c;return this.isString(a)&&a.indexOf("%")>-1?(c=a.replace(/\s+%\s+/,""),parseFloat(c)*s*.01):this.isString(a)&&a.indexOf("fr")>-1?(c=a.replace(/\s+fr\s+/,""),parseFloat(c)*s):this.isString(a)&&a.indexOf("px")>-1?(c=a.replace(/\s+px\s+/,""),c=parseFloat(c),this.isFunction(o)?o(c):this.isNumber(o)?c*o:c):parseFloat(a)},parsePosition:function(a){var s,o,c="",h="";if(a=a.trim(),a!=="")for(s=a.split(/[ ,]+/),o=0;o<s.length;o++)s[o]==="left"||s[o]==="right"?c=s[o]:h=s[o];return{side:c,pos:h}},keys:function(a,s){var o=[],c;for(c in a)s?a.hasOwnProperty(c)&&o.push(c):o.push(c);return o},clone:function(a){var s={};return s.prototype=a,s},cloneAndCopy:function(a,s){var o,c=function(){};c.prototype=a;for(o in s)c[o]=s[o];return c},merge:function(a,s){var o,c,h,d;for(o in s)if(s.hasOwnProperty(o))if(h=s[o],this.isArray(h))for(a[o]||(a[o]=[]),c=0;c<h.length;c++)d=s[o][c],typeof s[o][c]=="object"?a[o][c]=this.merge(a[o][c],d):a[o][c]=s[o][c];else typeof h=="object"?(a[o]||(a[o]={}),a[o]=this.merge(a[o],h)):(typeof a=="boolean"&&(a={}),a[o]=h);return a},deepCopy:function(a,s,o){var c,h,d,b;if(o=o||!1,typeof a!="object"||a===null)return a;if(this.isArray(a))for(c=[],h=0;h<a.length;h++)d=a[h],d!==null&&typeof d=="object"?this.exists(d.board)?c[h]=d.id:c[h]=this.deepCopy(d,{},o):c[h]=d;else{c={};for(h in a)a.hasOwnProperty(h)&&(b=o?h.toLowerCase():h,d=a[h],d!==null&&typeof d=="object"?this.exists(d.board)?c[b]=d.id:c[b]=this.deepCopy(d,{},o):c[b]=d);for(h in s)s.hasOwnProperty(h)&&(b=o?h.toLowerCase():h,d=s[h],d!==null&&typeof d=="object"?this.isArray(d)||!this.exists(c[b])?c[b]=this.deepCopy(d,{},o):c[b]=this.deepCopy(c[b],d,o):c[b]=d)}return c},mergeAttr:function(a,s,o,c){var h,d,b;o=o||!0,c=c||!1;for(h in s)s.hasOwnProperty(h)&&(d=o?h.toLowerCase():h,d!==h&&a.hasOwnProperty(h)&&(a.hasOwnProperty(d)?this.mergeAttr(a[d],a[h],o):a[d]=a[h],delete a[h]),b=s[h],this.isObject(b)&&b!==null&&!this.isDocumentOrFragment(b)&&!this.exists(b.board)&&typeof b.valueOf()!="string"?((a[d]===void 0||a[d]===null||!this.isObject(a[d]))&&(a[d]={}),this.mergeAttr(a[d],b,o)):(!c||this.exists(b))&&(a[d]=b))},keysToLowerCase:function(a){var s,o,c=Object.keys(a),h=c.length,d={};if(typeof a!="object")return a;for(;h--;)s=c[h],a.hasOwnProperty(s)&&(o=a[s],typeof o=="object"&&o!==null&&!this.isArray(o)&&!this.exists(o.nodeType)&&!this.exists(o.board)?d[s.toLowerCase()]=this.keysToLowerCase(o):d[s.toLowerCase()]=o);return d},copyAttributes:function(a,s,o){var c,h,d,b,_,$,j={circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1};for(b=arguments.length,b<3||j[o]?c=JXG$1.deepCopy(s.elements,null,!0):c={},b<4&&this.exists(o)&&this.exists(s.layer[o])&&(c.layer=s.layer[o]),_=s,$=!0,d=2;d<b;d++)if(h=arguments[d],this.exists(_[h]))_=_[h];else{$=!1;break}for($&&(c=JXG$1.deepCopy(c,_,!0)),_=typeof a=="object"?this.keysToLowerCase(a):{},$=!0,d=3;d<b;d++)if(h=arguments[d].toLowerCase(),this.exists(_[h]))_=_[h];else{$=!1;break}if($&&this.mergeAttr(c,_,!0),arguments[2]==="board")return c;for(_=s,$=!0,d=2;d<b;d++)if(h=arguments[d],this.exists(_[h]))_=_[h];else{$=!1;break}return $&&this.exists(_.label)&&(c.label=JXG$1.deepCopy(_.label,c.label,!0)),c.label=JXG$1.deepCopy(s.label,c.label,!0),c},copyPrototypeMethods:function(a,s,o){var c;a.prototype[o]=s.prototype.constructor;for(c in s.prototype)s.prototype.hasOwnProperty(c)&&(a.prototype[c]=s.prototype[c])},getCloneObject:function(a){var s,o,c={};c.id=a.id+"T"+a.numTraces,a.numTraces+=1,c.coords=a.coords,s=this.deepCopy(a.visProp,a.visProp.traceattributes,!0),c.visProp={};for(o in s)s.hasOwnProperty(o)&&o.indexOf("aria")!==0&&o.indexOf("highlight")!==0&&o.indexOf("attractor")!==0&&o!=="label"&&o!=="needsregularupdate"&&o!=="infoboxdigits"&&(c.visProp[o]=a.eval(s[o]));return c.evalVisProp=function(h){return c.visProp[h]},c.eval=function(h){return h},c.visProp.layer=a.board.options.layer.trace,c.visProp.tabindex=null,c.visProp.highlight=!1,c.board=a.board,c.elementClass=a.elementClass,this.clearVisPropOld(c),c.visPropCalc={visible:a.evalVisProp("visible")},c},toJSON:function(a,s){var o,c,h,d,b;if(s=JXG$1.def(s,!1),JSON!==void 0&&JSON.stringify&&!s)try{return d=JSON.stringify(a),d}catch{}switch(typeof a){case"object":if(a){if(o=[],this.isArray(a)){for(h=0;h<a.length;h++)o.push(JXG$1.toJSON(a[h],s));return"["+o.join(",")+"]"}for(c in a)if(a.hasOwnProperty(c)){try{b=JXG$1.toJSON(a[c],s)}catch{b=""}s?o.push(c+":"+b):o.push('"'+c+'":'+b)}return"{"+o.join(",")+"} "}return"null";case"string":return"'"+a.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return a.toString()}return"0"},clearVisPropOld:function(a){return a.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},a},isInObject:function(a,s){var o;for(o in a)if(a.hasOwnProperty(o)&&a[o]===s)return!0;return!1},escapeHTML:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(a){return a.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},trimNumber:function(a){return a=a.replace(/^0+/,""),a=a.replace(/0+$/,""),(a[a.length-1]==="."||a[a.length-1]===",")&&(a=a.slice(0,-1)),(a[0]==="."||a[0]===",")&&(a="0"+a),a},filterElements:function(a,s){var o,c,h,d,b,_,$,j=a.length,Xt=[];if(this.exists(s)&&typeof s!="function"&&typeof s!="object")return Xt;for(o=0;o<j;o++){if($=!0,h=a[o],typeof s=="object"){for(c in s)if(s.hasOwnProperty(c)&&(d=c.toLowerCase(),typeof h[c]=="function"?b=h[c]():b=h[c],h.visProp&&typeof h.visProp[d]=="function"?_=h.visProp[d]():_=h.visProp&&h.visProp[d],typeof s[c]=="function"?$=s[c](b)||s[c](_):$=b===s[c]||_===s[c],!$))break}else typeof s=="function"&&($=s(h));$&&Xt.push(h)}return Xt},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},toFraction:function(a,s,o){var c=Mat.decToFraction(a,o),h="";return c[1]===0&&c[2]===0?h+="0":(c[0]<0&&(h+="-"),c[2]===0?h+=c[1]:c[2]===1&&c[3]===1||(c[1]!==0&&(h+=c[1]+" "),s===!0?h+="\\frac{"+c[2]+"}{"+c[3]+"}":h+=c[2]+"/"+c[3])),h},concat:function(a,s){var o,c=s.length;for(o=0;o<c;o++)a.push(s[o]);return a},sanitizeHTML:function(a,s){return typeof html_sanitize=="function"&&s?html_sanitize(a,function(){},function(o){return o}):(a&&typeof a=="string"&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a)},evalSlider:function(a){return a&&a.type===Const.OBJECT_TYPE_GLIDER&&typeof a.Value=="function"?a.Value():a},stack2jsxgraph:function(a){var s;return s=a.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim(),s[0]==="["&&s[s.length-1]==="]"&&(s=s.slice(1,-1).split(/\s*,\s*/)),s}});JXG$1.extendConstants(JXG$1,{});JXG$1.extend(JXG$1,{isTouchEvent:function(a){return JXG$1.exists(a.touches)},isPointerEvent:function(a){return JXG$1.exists(a.pointerId)},isMouseEvent:function(a){return!JXG$1.isTouchEvent(a)&&!JXG$1.isPointerEvent(a)},getNumberOfTouchPoints:function(a){var s=-1;return JXG$1.isTouchEvent(a)&&(s=a.touches.length),s},isFirstTouch:function(a){var s=JXG$1.getNumberOfTouchPoints(a);return JXG$1.isPointerEvent(a)?a.isPrimary:s===1},isBrowser:JXG$1.exists(window)&&JXG$1.exists(document)&&typeof window=="object"&&typeof document=="object",supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){var a;return this.isBrowser?(a=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a):!1},supportsCanvas:function(){var a=!1;return this.isNode()&&(a=!0),a||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&typeof process<"u"&&process.release.name.search(/node|io.js/)!==-1},isWebWorker:function(){return!this.isBrowser&&typeof self=="object"&&typeof self.postMessage=="function"},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&window.ontouchstart!==void 0},isAndroid:function(){return JXG$1.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return JXG$1.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return typeof window=="object"&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return JXG$1.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1},isFirefoxOS:function(){return JXG$1.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")===-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},isDesktop:function(){return!0},isMobile:function(){return!0},ieVersion:function(){var a,s,o=3;if(document===null||typeof document!="object")return 0;a=document.createElement("div"),s=a.getElementsByTagName("i");do a.innerHTML="<!--[if gt IE "+ ++o+"]><i></i><![endif]-->";while(s[0]);return o>4?o:void 0}(),getDimensions:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt=/\d+(\.\d*)?px/;if(!this.isBrowser||a===null)return{width:500,height:500};if(s=s||document,o=JXG$1.isString(a)?s.getElementById(a):a,!JXG$1.exists(o))throw new Error(`
JSXGraph: HTML container element '`+a+"' not found.");return c=o.style.display,c!=="none"&&c!==null?o.clientWidth>0&&o.clientHeight>0?{width:o.clientWidth,height:o.clientHeight}:(Xt=window.getComputedStyle?window.getComputedStyle(o):o.style,{width:Lt.test(Xt.width)?parseFloat(Xt.width):0,height:Lt.test(Xt.height)?parseFloat(Xt.height):0}):(h=o.style,d=h.visibility,b=h.position,_=h.display,h.visibility="hidden",h.position="absolute",h.display="block",$=o.clientWidth,j=o.clientHeight,h.display=_,h.position=b,h.visibility=d,{width:$,height:j})},addEvent:function(a,s,o,c,h){var d=function(){return o.apply(c,arguments)};d.origin=o,typeof c=="object"&&JXG$1.exists(c.BOARD_MODE_NONE)&&(c["x_internal"+s]=c["x_internal"+s]||[],c["x_internal"+s].push(d)),JXG$1.exists(a)&&JXG$1.exists(a.addEventListener)&&(h=h||!1,a.addEventListener(s,d,h)),JXG$1.exists(a)&&JXG$1.exists(a.attachEvent)&&a.attachEvent("on"+s,d)},removeEvent:function(a,s,o,c){var h;if(!JXG$1.exists(c)){JXG$1.debug("no such owner");return}if(!JXG$1.exists(c["x_internal"+s])){JXG$1.debug("removeEvent: no such type: "+s);return}if(!JXG$1.isArray(c["x_internal"+s])){JXG$1.debug("owner[x_internal + "+s+"] is not an array");return}if(h=JXG$1.indexOf(c["x_internal"+s],o,"origin"),h===-1){JXG$1.debug("removeEvent: no such event function in internal list: "+o);return}try{JXG$1.exists(a)&&JXG$1.exists(a.removeEventListener)&&a.removeEventListener(s,c["x_internal"+s][h],!1),JXG$1.exists(a)&&JXG$1.exists(a.detachEvent)&&a.detachEvent("on"+s,c["x_internal"+s][h])}catch{JXG$1.debug("removeEvent: event not registered in browser: ("+s+" -- "+o+")")}c["x_internal"+s].splice(h,1)},removeAllEvents:function(a,s,o){var c,h;if(o["x_internal"+s]){for(h=o["x_internal"+s].length,c=h-1;c>=0;c--)JXG$1.removeEvent(a,s,o["x_internal"+s][c].origin,o);o["x_internal"+s].length>0&&JXG$1.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(a,s,o){var c,h,d,b=0,_=0;if(a||(a=window.event),d=a.touches,JXG$1.exists(d)&&d.length===0&&(d=a.changedTouches),JXG$1.exists(s)&&JXG$1.exists(d))if(s===-1){for(h=d.length,c=0;c<h;c++)if(d[c]){a=d[c];break}}else a=d[s];return a.clientX&&(b=a.clientX,_=a.clientY),[b,_]},getOffset:function(a){var s,o=a,c=a,h=o.offsetLeft-o.scrollLeft,d=o.offsetTop-o.scrollTop;for(s=this.getCSSTransform([h,d],o),h=s[0],d=s[1],o=o.offsetParent;o;){for(h+=o.offsetLeft,d+=o.offsetTop,o.offsetParent&&(h+=o.clientLeft-o.scrollLeft,d+=o.clientTop-o.scrollTop),s=this.getCSSTransform([h,d],o),h=s[0],d=s[1],c=c.parentNode;c!==o;)h+=c.clientLeft-c.scrollLeft,d+=c.clientTop-c.scrollTop,s=this.getCSSTransform([h,d],c),h=s[0],d=s[1],c=c.parentNode;o=o.offsetParent}return[h,d]},getStyle:function(a,s){var o,c=a.ownerDocument;return c.defaultView&&c.defaultView.getComputedStyle?o=c.defaultView.getComputedStyle(a,null).getPropertyValue(s):a.currentStyle&&JXG$1.ieVersion>=9?o=a.currentStyle[s]:a.style&&(s=s.replace(/-([a-z]|[0-9])/gi,function(h,d){return d.toUpperCase()}),o=a.style[s]),o},getProp:function(a,s){var o=parseInt(this.getStyle(a,s),10);return isNaN(o)?0:o},getCSSTransform:function(a,s){var o,c,h,d,b,_,$,j,Xt=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(_=Xt.length,o=0,h="";o<_;o++)if(JXG$1.exists(s.style[Xt[o]])){h=s.style[Xt[o]];break}if(h!==""&&(b=h.indexOf("("),b>0)){for(_=h.length,d=h.substring(b+1,_-1),j=d.split(","),c=0,$=j.length;c<$;c++)j[c]=parseFloat(j[c]);h.indexOf("matrix")===0?(a[0]+=j[4],a[1]+=j[5]):h.indexOf("translateX")===0?a[0]+=j[0]:h.indexOf("translateY")===0?a[1]+=j[0]:h.indexOf("translate")===0&&(a[0]+=j[0],a[1]+=j[1])}return JXG$1.exists(s.style.zoom)&&(h=s.style.zoom,h!==""&&(a[0]*=parseFloat(h),a[1]*=parseFloat(h))),a},getCSSTransformMatrix:function(a){var s,o,c,h,d,b,_,$,j,Xt=a.ownerDocument,Lt=["transform","webkitTransform","MozTransform","msTransform","oTransform"],fr=[[1,0,0],[0,1,0],[0,0,1]];if(Xt.defaultView&&Xt.defaultView.getComputedStyle)j=Xt.defaultView.getComputedStyle(a,null),c=j.getPropertyValue("-webkit-transform")||j.getPropertyValue("-moz-transform")||j.getPropertyValue("-ms-transform")||j.getPropertyValue("-o-transform")||j.getPropertyValue("transform");else for(_=Lt.length,s=0,c="";s<_;s++)if(JXG$1.exists(a.style[Lt[s]])){c=a.style[Lt[s]];break}if(c!==""&&(b=c.indexOf("("),b>0)){for(_=c.length,h=c.substring(b+1,_-1),d=h.split(","),o=0,$=d.length;o<$;o++)d[o]=parseFloat(d[o]);c.indexOf("matrix")===0?fr=[[1,0,0],[0,d[0],d[1]],[0,d[2],d[3]]]:c.indexOf("scaleX")===0?fr[1][1]=d[0]:c.indexOf("scaleY")===0?fr[2][2]=d[0]:c.indexOf("scale")===0&&(fr[1][1]=d[0],fr[2][2]=d[1])}return JXG$1.exists(a.style.zoom)&&(c=a.style.zoom,c!==""&&(fr[1][1]*=parseFloat(c),fr[2][2]*=parseFloat(c))),fr},timedChunk:function(a,s,o,c){var h=a.slice(),d=function(){var b=+new Date;do s.call(o,h.shift());while(h.length>0&&+new Date-b<300);h.length>0?window.setTimeout(d,1):c(a)};window.setTimeout(d,1)},scaleJSXGraphDiv:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr,Js=c,qs,zo=[":fullscreen",":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"],js=zo.length,eu;for(b=o.getElementById(a).getBoundingClientRect(),d=b.height,h=b.width,Lt=o.getElementById(s),j=Lt._cssFullscreenStore.w,Xt=Lt._cssFullscreenStore.h,qs=Xt/j,j>h*Js&&(j=h*Js,Xt=j*qs),Xt>d*Js&&(Xt=d*Js,j=Xt/qs),_=j,$=Xt,qs>1,qs<d/h?fr=h*Js/j:fr=d*Js/Xt,Jr=(d-$)*.5,eu=0;eu<js;eu++)try{Lt.style.width=_+"px !important",Lt.style.height=$+"px !important",Lt.style.margin="0 auto",Lt.style.transform=Lt._cssFullscreenStore.transform+" matrix("+fr+",0,0,"+fr+",0,"+Jr+")";break}catch(Oo){JXG$1.debug(`JXG.scaleJSXGraphDiv:
`+Oo)}eu===js&&JXG$1.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}});JXG$1.XML={cleanWhitespace:function(a){for(var s=a.firstChild;JXG$1.exists(s);)s.nodeType===3&&!/\S/.test(s.nodeValue)?a.removeChild(s):s.nodeType===1&&this.cleanWhitespace(s),s=s.nextSibling},parse:function(a){var s,o,c;return typeof DOMParser=="function"||typeof DOMParser=="object"?c=DOMParser:c=function(){this.parseFromString=function(h){var d;return typeof ActiveXObject=="function"&&(d=new ActiveXObject("MSXML.DomDocument"),d.loadXML(h)),d}},s=new c,o=s.parseFromString(a,"text/xml"),this.cleanWhitespace(o),o}};JXG$1.XML;JXG$1.EventEmitter={eventHandlers:{},suspended:{},trigger:function(a,s){var o,c,h,d,b,_;for(b=a.length,c=0;c<b;c++)if(d=this.eventHandlers[a[c]],!this.suspended[a[c]]){if(this.suspended[a[c]]=!0,d)for(_=d.length,o=0;o<_;o++)h=d[o],h.handler.apply(h.context,s);this.suspended[a[c]]=!1}return this},on:function(a,s,o){return JXG$1.isArray(this.eventHandlers[a])||(this.eventHandlers[a]=[]),o=JXG$1.def(o,this),this.eventHandlers[a].push({handler:s,context:o}),this},off:function(a,s){var o;return!a||!JXG$1.isArray(this.eventHandlers[a])?this:(s?(o=JXG$1.indexOf(this.eventHandlers[a],s,"handler"),o>-1&&this.eventHandlers[a].splice(o,1),this.eventHandlers[a].length===0&&delete this.eventHandlers[a]):delete this.eventHandlers[a],this)},eventify:function(a){a.eventHandlers={clicks:0},a.on=this.on,a.off=this.off,a.triggerEventHandlers=this.trigger,a.trigger=this.trigger,a.suspended={}}};const EventEmitter=JXG$1.EventEmitter;JXG$1.Coords=function(a,s,o,c){this.board=o,this.usrCoords=[],this.scrCoords=[],this.emitter=!JXG$1.exists(c)||c,this.emitter&&EventEmitter.eventify(this),this.setCoordinates(a,s,!1,!0)};JXG$1.extend(JXG$1.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>Mat.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(a){var s=Math.round,o=this.board,c=this.usrCoords,h=o.origin.scrCoords;a===!0?(this.scrCoords[0]=s(c[0]),this.scrCoords[1]=s(c[0]*h[1]+c[1]*o.unitX),this.scrCoords[2]=s(c[0]*h[2]-c[2]*o.unitY)):(this.scrCoords[0]=c[0],this.scrCoords[1]=c[0]*h[1]+c[1]*o.unitX,this.scrCoords[2]=c[0]*h[2]-c[2]*o.unitY)},screen2usr:function(){var a=this.board.origin.scrCoords,s=this.scrCoords,o=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(s[1]-a[1])/o.unitX,this.usrCoords[2]=(a[2]-s[2])/o.unitY},distance:function(a,s){var o=0,c,h=this.usrCoords,d=this.scrCoords,b;return a===Const.COORDS_BY_USER?(c=s.usrCoords,b=h[0]-c[0],o=b*b,o>Mat.eps*Mat.eps?Number.POSITIVE_INFINITY:Mat.hypot(h[1]-c[1],h[2]-c[2])):(c=s.scrCoords,Mat.hypot(d[1]-c[1],d[2]-c[2]))},setCoordinates:function(a,s,o,c){var h=this.usrCoords,d=this.scrCoords,b=[h[0],h[1],h[2]],_=[d[0],d[1],d[2]];return a===Const.COORDS_BY_USER?(s.length===2?(h[0]=1,h[1]=s[0],h[2]=s[1]):(h[0]=s[0],h[1]=s[1],h[2]=s[2],this.normalizeUsrCoords()),this.usr2screen(o)):(s.length===2?(d[1]=s[0],d[2]=s[1]):(d[1]=s[1],d[2]=s[2]),this.screen2usr()),this.emitter&&!c&&(_[1]!==d[1]||_[2]!==d[2])&&this.triggerEventHandlers(["update"],[b,_]),this},copy:function(a,s){return s===void 0&&(s=0),this[a].slice(s)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>Mat.eps},__evt__update:function(a,s){},__evt:function(){}});const Coords=JXG$1.Coords;JXG$1.Expect={each:function(a,s,o){var c,h,d=[];if(JXG$1.exists(a.length))for(h=a.length,c=0;c<h;c++)d.push(s.call(this,a[c],o));return d},coords:function(a,s){var o=a;return a&&a.elementClass===Const.OBJECT_CLASS_POINT?o=a.coords:a.usrCoords&&a.scrCoords&&a.usr2screen&&(o=a),s&&(o=new Coords(Const.COORDS_BY_USER,o.usrCoords,o.board)),o},coordsArray:function(a,s){var o;return JXG$1.isArray(a)?o=a:o=this.coords(a).usrCoords,o.length<3&&o.unshift(1),s&&(o=[o[0],o[1],o[2]]),o}};const Expect=JXG$1.Expect;Mat.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(a,s){var o,c,h,d;return a=Math.abs(a),s<0&&(a=-a),h=this.MINV*Math.floor(this.M*a+.5),d=a-h,o=h*h,c=2*h*d+d*d,s<0&&(o=-o,c=-c),o+c>this.MAXLOG?1/0:(o=Math.exp(o)*Math.exp(c),o)},polevl:function(a,s,o){var c,h;if(JXG$1.exists(s.reduce))return s.reduce(function(d,b){return d*a+b},0);for(h=0,c=0;h<=o;h++)c=c*a+s[h];return c},p1evl:function(a,s,o){var c,h;if(JXG$1.exists(s.reduce))return s.reduce(function(d,b){return d*a+b},1);for(h=0,c=1;h<o;h++)c=c*a+s[h];return c},ndtr:function(a){var s,o,c;return s=a*this.SQRTH,c=Math.abs(s),c<1?o=.5+.5*this.erf(s):(o=.5*this.erfce(c),c=this.expx2(a,-1),o=o*Math.sqrt(c),s>0&&(o=1-o)),o},_underflow:function(a){return console.log("erfc","UNDERFLOW"),a<0?2:0},erfc:function(a){var s,o,c,h,d;return a<0?c=-a:c=a,c<1?1-this.erf(a):(d=-a*a,d<-this.MAXLOG?this._underflow(a):(d=this.expx2(a,-1),c<8?(s=this.polevl(c,this.P,8),o=this.p1evl(c,this.Q,8)):(s=this.polevl(c,this.R,5),o=this.p1evl(c,this.S,6)),h=d*s/o,a<0&&(h=2-h),h===0?this._underflow(a):h))},erfce:function(a){var s,o;return a<8?(s=this.polevl(a,this.P,8),o=this.p1evl(a,this.Q,8)):(s=this.polevl(a,this.R,5),o=this.p1evl(a,this.S,6)),s/o},erf:function(a){var s,o;return Math.abs(a)>1?1-this.erfc(a):(o=a*a,s=a*this.polevl(o,this.T,4)/this.p1evl(o,this.U,5),s)},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6790194080099813e-24],ndtri:function(a){var s,o,c,h,d,b,_;return a<=0?-1/0:a>=1?1/0:(_=1,o=a,o>1-.1353352832366127&&(o=1-o,_=0),o>.1353352832366127?(o=o-.5,h=o*o,s=o+o*(h*this.polevl(h,this.P0,4)/this.p1evl(h,this.Q0,8)),s=s*this.s2pi,s):(s=Math.sqrt(-2*Math.log(o)),d=s-Math.log(s)/s,c=1/s,s<8?b=c*this.polevl(c,this.P1,8)/this.p1evl(c,this.Q1,8):b=c*this.polevl(c,this.P2,8)/this.p1evl(c,this.Q2,8),s=d-b,_!==0&&(s=-s),s))},erfi:function(a){return this.ndtri((a+1)*.5)*this.SQRTH}};Mat.ProbFuncs;JXG$1.Math.DoubleBits=function(){var a=new Float64Array(1),s=new Uint32Array(a.buffer),o,c,h,d,b,_,$,j;Float64Array!==void 0&&(a[0]=1,s[1]===1072693248?(o=function(Xt){return a[0]=Xt,[s[0],s[1]]},c=function(Xt,Lt){return s[0]=Xt,s[1]=Lt,a[0]},h=function(Xt){return a[0]=Xt,s[0]},d=function(Xt){return a[0]=Xt,s[1]},this.doubleBits=o,this.pack=c,this.lo=h,this.hi=d):s[0]===1072693248&&(b=function(Xt){return a[0]=Xt,[s[1],s[0]]},_=function(Xt,Lt){return s[1]=Xt,s[0]=Lt,a[0]},$=function(Xt){return a[0]=Xt,s[1]},j=function(Xt){return a[0]=Xt,s[0]},this.doubleBits=b,this.pack=_,this.lo=$,this.hi=j))};JXG$1.extend(JXG$1.Math.DoubleBits.prototype,{sign:function(a){return this.hi(a)>>>31},exponent:function(a){var s=this.hi(a);return(s<<1>>>21)-1023},fraction:function(a){var s=this.lo(a),o=this.hi(a),c=o&(1<<20)-1;return o&2146435072&&(c+=1<<20),[s,c]},denormalized:function(a){var s=this.hi(a);return!(s&2146435072)}});var doubleBits=new JXG$1.Math.DoubleBits,MatInterval=function(a,s){if(a!==void 0&&s!==void 0){if(Mat.IntervalArithmetic.isInterval(a)){if(!Mat.IntervalArithmetic.isSingleton(a))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=a.lo}else this.lo=a;if(Mat.IntervalArithmetic.isInterval(s)){if(!Mat.IntervalArithmetic.isSingleton(s))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=s.hi}else this.hi=s}else{if(a!==void 0)return Array.isArray(a)?new MatInterval(a[0],a[1]):new MatInterval(a,a);this.lo=this.hi=0}};JXG$1.extend(MatInterval.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(a,s){return this.lo=a,this.hi=s,this},bounded:function(a,s){return this.set(Mat.IntervalArithmetic.prev(a),Mat.IntervalArithmetic.next(s))},boundedSingleton:function(a){return this.bounded(a,a)},assign:function(a,s){if(typeof a!="number"||typeof s!="number")throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(a)||isNaN(s)||a>s?this.setEmpty():this.set(a,s)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(a,s){return this.assign(Mat.IntervalArithmetic.next(a),Mat.IntervalArithmetic.prev(s))},halfOpenLeft:function(a,s){return this.assign(Mat.IntervalArithmetic.next(a),s)},halfOpenRight:function(a,s){return this.assign(a,Mat.IntervalArithmetic.prev(s))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new MatInterval().set(this.lo,this.hi)}});JXG$1.Math.IntervalArithmetic={Interval:function(a,s){return new MatInterval(a,s)},isInterval:function(a){return a!==null&&typeof a=="object"&&typeof a.lo=="number"&&typeof a.hi=="number"},isSingleton:function(a){return a.lo===a.hi},add:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),new MatInterval(this.addLo(a.lo,s.lo),this.addHi(a.hi,s.hi))},sub:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),new MatInterval(this.subLo(a.lo,s.hi),this.subHi(a.hi,s.lo))},mul:function(a,s){var o,c,h,d,b;return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?this.EMPTY.clone():(o=a.lo,c=a.hi,h=s.lo,d=s.hi,b=new MatInterval,o<0?c>0?h<0?d>0?(b.lo=Math.min(this.mulLo(o,d),this.mulLo(c,h)),b.hi=Math.max(this.mulHi(o,h),this.mulHi(c,d))):(b.lo=this.mulLo(c,h),b.hi=this.mulHi(o,h)):d>0?(b.lo=this.mulLo(o,d),b.hi=this.mulHi(c,d)):(b.lo=0,b.hi=0):h<0?d>0?(b.lo=this.mulLo(o,d),b.hi=this.mulHi(o,h)):(b.lo=this.mulLo(c,d),b.hi=this.mulHi(o,h)):d>0?(b.lo=this.mulLo(o,d),b.hi=this.mulHi(c,h)):(b.lo=0,b.hi=0):c>0?h<0?d>0?(b.lo=this.mulLo(c,h),b.hi=this.mulHi(c,d)):(b.lo=this.mulLo(c,h),b.hi=this.mulHi(o,d)):d>0?(b.lo=this.mulLo(o,h),b.hi=this.mulHi(c,d)):(b.lo=0,b.hi=0):(b.lo=0,b.hi=0),b)},div:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?this.EMPTY.clone():this.zeroIn(s)?s.lo!==0?s.hi!==0?this.divZero(a):this.divNegative(a,s.lo):s.hi!==0?this.divPositive(a,s.hi):this.EMPTY.clone():this.divNonZero(a,s)},positive:function(a){return new MatInterval(a.lo,a.hi)},negative:function(a){return JXG$1.isNumber(a)?new MatInterval(-a):new MatInterval(-a.hi,-a.lo)},isEmpty:function(a){return a.lo>a.hi},isWhole:function(a){return a.lo===-1/0&&a.hi===1/0},zeroIn:function(a){return this.hasValue(a,0)},hasValue:function(a,s){return this.isEmpty(a)?!1:a.lo<=s&&s<=a.hi},hasInterval:function(a,s){return this.isEmpty(a)?!0:!this.isEmpty(s)&&s.lo<=a.lo&&a.hi<=s.hi},intervalsOverlap:function(a,s){return this.isEmpty(a)||this.isEmpty(s)?!1:a.lo<=s.lo&&s.lo<=a.hi||s.lo<=a.lo&&a.lo<=s.hi},divNonZero:function(a,s){var o=a.lo,c=a.hi,h=s.lo,d=s.hi,b=new MatInterval;return c<0?d<0?(b.lo=this.divLo(c,h),b.hi=this.divHi(o,d)):(b.lo=this.divLo(o,h),b.hi=this.divHi(c,d)):o<0?d<0?(b.lo=this.divLo(c,d),b.hi=this.divHi(o,d)):(b.lo=this.divLo(o,h),b.hi=this.divHi(c,h)):d<0?(b.lo=this.divLo(c,d),b.hi=this.divHi(o,h)):(b.lo=this.divLo(o,d),b.hi=this.divHi(c,h)),b},divPositive:function(a,s){return a.lo===0&&a.hi===0?a:this.zeroIn(a)?this.WHOLE:a.hi<0?new MatInterval(Number.NEGATIVE_INFINITY,this.divHi(a.hi,s)):new MatInterval(this.divLo(a.lo,s),Number.POSITIVE_INFINITY)},divNegative:function(a,s){return a.lo===0&&a.hi===0?a:this.zeroIn(a)?this.WHOLE:a.hi<0?new MatInterval(this.divLo(a.hi,s),Number.POSITIVE_INFINITY):new MatInterval(Number.NEGATIVE_INFINITY,this.divHi(a.lo,s))},divZero:function(a){return a.lo===0&&a.hi===0?a:this.WHOLE},fmod:function(a,s){var o,c;return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?this.EMPTY.clone():(o=a.lo<0?s.lo:s.hi,c=a.lo/o,c<0?c=Math.ceil(c):c=Math.floor(c),this.sub(a,this.mul(s,new MatInterval(c))))},multiplicativeInverse:function(a){return JXG$1.isNumber(a)&&(a=this.Interval(a)),this.isEmpty(a)?this.EMPTY.clone():this.zeroIn(a)?a.lo!==0?a.hi!==0?this.WHOLE:new MatInterval(Number.NEGATIVE_INFINITY,this.divHi(1,a.lo)):a.hi!==0?new MatInterval(this.divLo(1,a.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new MatInterval(this.divLo(1,a.hi),this.divHi(1,a.lo))},pow:function(a,s){var o,c;if(JXG$1.isNumber(a)&&(a=this.Interval(a)),this.isEmpty(a))return this.EMPTY.clone();if(this.isInterval(s)){if(!this.isSingleton(s))return this.EMPTY.clone();s=s.lo}return s===0?a.lo===0&&a.hi===0?this.EMPTY.clone():this.ONE.clone():s<0?this.pow(this.multiplicativeInverse(a),-s):s%1===0?a.hi<0?(o=this.powLo(-a.hi,s),c=this.powHi(-a.lo,s),(s&1)===1?new MatInterval(-c,-o):new MatInterval(o,c)):a.lo<0?(s&1)===1?new MatInterval(-this.powLo(-a.lo,s),this.powHi(a.hi,s)):new MatInterval(0,this.powHi(Math.max(-a.lo,a.hi),s)):new MatInterval(this.powLo(a.lo,s),this.powHi(a.hi,s)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(a){return JXG$1.isNumber(a)&&(a=this.Interval(a)),this.nthRoot(a,2)},nthRoot:function(a,s){var o,c,h,d,b;if(JXG$1.isNumber(a)&&(a=this.Interval(a)),this.isEmpty(a)||s<0)return this.EMPTY.clone();if(this.isInterval(s)){if(!this.isSingleton(s))return this.EMPTY.clone();s=s.lo}return o=1/s,a.hi<0?s%1===0&&(s&1)===1?(c=this.powHi(-a.lo,o),h=this.powLo(-a.hi,o),new MatInterval(-c,-h)):this.EMPTY.clone():a.lo<0?(d=this.powHi(a.hi,o),s%1===0&&(s&1)===1?(b=-this.powHi(-a.lo,o),new MatInterval(b,d)):new MatInterval(0,d)):new MatInterval(this.powLo(a.lo,o),this.powHi(a.hi,o))},exp:function(a){return JXG$1.isNumber(a)&&(a=this.Interval(a)),this.isEmpty(a)?this.EMPTY.clone():new MatInterval(this.expLo(a.lo),this.expHi(a.hi))},log:function(a){var s;return JXG$1.isNumber(a)&&(a=this.Interval(a)),this.isEmpty(a)?this.EMPTY.clone():(s=a.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(a.lo),new MatInterval(s,this.logHi(a.hi)))},ln:function(a){return this.log(a)},log10:function(a){return this.isEmpty(a)?this.EMPTY.clone():this.div(this.log(a),this.log(new MatInterval(10,10)))},log2:function(a){return this.isEmpty(a)?this.EMPTY.clone():this.div(this.log(a),this.log(new MatInterval(2,2)))},hull:function(a,s){var o=this.isEmpty(a),c=this.isEmpty(s);return o&&c?this.EMPTY.clone():o?s.clone():c?a.clone():new MatInterval(Math.min(a.lo,s.lo),Math.max(a.hi,s.hi))},intersection:function(a,s){var o,c;return this.isEmpty(a)||this.isEmpty(s)?this.EMPTY.clone():(o=Math.max(a.lo,s.lo),c=Math.min(a.hi,s.hi),o<=c?new MatInterval(o,c):this.EMPTY.clone())},union:function(a,s){if(!this.intervalsOverlap(a,s))throw new Error("Interval#unions do not overlap");return new MatInterval(Math.min(a.lo,s.lo),Math.max(a.hi,s.hi))},difference:function(a,s){if(this.isEmpty(a)||this.isWhole(s))return this.EMPTY.clone();if(this.intervalsOverlap(a,s)){if(a.lo<s.lo&&s.hi<a.hi)throw new Error("Interval.difference: difference creates multiple intervals");return s.lo<=a.lo&&s.hi===1/0||s.hi>=a.hi&&s.lo===-1/0?this.EMPTY.clone():s.lo<=a.lo?new MatInterval().halfOpenLeft(s.hi,a.hi):new MatInterval().halfOpenRight(a.lo,s.lo)}return a.clone()},width:function(a){return this.isEmpty(a)?0:this.subHi(a.hi,a.lo)},abs:function(a){return JXG$1.isNumber(a)&&(a=this.Interval(a)),this.isEmpty(a)?this.EMPTY.clone():a.lo>=0?a.clone():a.hi<=0?this.negative(a):new MatInterval(0,Math.max(-a.lo,a.hi))},max:function(a,s){var o=this.isEmpty(a),c=this.isEmpty(s);return o&&c?this.EMPTY.clone():o?s.clone():c?a.clone():new MatInterval(Math.max(a.lo,s.lo),Math.max(a.hi,s.hi))},min:function(a,s){var o=this.isEmpty(a),c=this.isEmpty(s);return o&&c?this.EMPTY.clone():o?s.clone():c?a.clone():new MatInterval(Math.min(a.lo,s.lo),Math.min(a.hi,s.hi))},onlyInfinity:function(a){return!isFinite(a.lo)&&a.lo===a.hi},_handleNegative:function(a){var s;return a.lo<0&&(a.lo===-1/0?(a.lo=0,a.hi=1/0):(s=Math.ceil(-a.lo/this.piTwiceLow),a.lo+=this.piTwiceLow*s,a.hi+=this.piTwiceLow*s)),a},cos:function(a){var s,o,c,h,d,b,_,$;return this.isEmpty(a)||this.onlyInfinity(a)?this.EMPTY.clone():(s=new MatInterval().set(a.lo,a.hi),this._handleNegative(s),o=this.PI_TWICE,c=this.fmod(s,o),this.width(c)>=o.lo?new MatInterval(-1,1):c.lo>=this.piHigh?(h=this.cos(this.sub(c,this.PI)),this.negative(h)):(d=c.lo,b=c.hi,_=this.cosLo(b),$=this.cosHi(d),b<=this.piLow?new MatInterval(_,$):b<=o.lo?new MatInterval(-1,Math.max(_,$)):new MatInterval(-1,1)))},sin:function(a){return this.isEmpty(a)||this.onlyInfinity(a)?this.EMPTY.clone():this.cos(this.sub(a,this.PI_HALF))},tan:function(a){var s,o,c;return this.isEmpty(a)||this.onlyInfinity(a)?this.EMPTY.clone():(s=new MatInterval().set(a.lo,a.hi),this._handleNegative(s),c=this.PI,o=this.fmod(s,c),o.lo>=this.piHalfLow&&(o=this.sub(o,c)),o.lo<=-this.piHalfLow||o.hi>=this.piHalfLow?this.WHOLE.clone():new MatInterval(this.tanLo(o.lo),this.tanHi(o.hi)))},asin:function(a){var s,o;return this.isEmpty(a)||a.hi<-1||a.lo>1?this.EMPTY.clone():(s=a.lo<=-1?-this.piHalfHigh:this.asinLo(a.lo),o=a.hi>=1?this.piHalfHigh:this.asinHi(a.hi),new MatInterval(s,o))},acos:function(a){var s,o;return this.isEmpty(a)||a.hi<-1||a.lo>1?this.EMPTY.clone():(s=a.hi>=1?0:this.acosLo(a.hi),o=a.lo<=-1?this.piHigh:this.acosHi(a.lo),new MatInterval(s,o))},acot:function(a){return this.isEmpty(a)?this.EMPTY.clone():new MatInterval(this.acotLo(a.lo),this.acotHi(a.hi))},atan:function(a){return this.isEmpty(a)?this.EMPTY.clone():new MatInterval(this.atanLo(a.lo),this.atanHi(a.hi))},sinh:function(a){return this.isEmpty(a)?this.EMPTY.clone():new MatInterval(this.sinhLo(a.lo),this.sinhHi(a.hi))},cosh:function(a){return this.isEmpty(a)?this.EMPTY.clone():a.hi<0?new MatInterval(this.coshLo(a.hi),this.coshHi(a.lo)):a.lo>=0?new MatInterval(this.coshLo(a.lo),this.coshHi(a.hi)):new MatInterval(1,this.coshHi(-a.lo>a.hi?a.lo:a.hi))},tanh:function(a){return this.isEmpty(a)?this.EMPTY.clone():new MatInterval(this.tanhLo(a.lo),this.tanhHi(a.hi))},equal:function(a,s){return this.isEmpty(a)?this.isEmpty(s):!this.isEmpty(s)&&a.lo===s.lo&&a.hi===s.hi},notEqual:function(a,s){return this.isEmpty(a)?!this.isEmpty(s):this.isEmpty(s)||a.hi<s.lo||a.lo>s.hi},lt:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?!1:a.hi<s.lo},gt:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?!1:a.lo>s.hi},leq:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?!1:a.hi<=s.lo},geq:function(a,s){return JXG$1.isNumber(a)&&(a=this.Interval(a)),JXG$1.isNumber(s)&&(s=this.Interval(s)),this.isEmpty(a)||this.isEmpty(s)?!1:a.lo>=s.hi},piLow:(3373259426+273688/(1<<21))/(1<<30),piHigh:(3373259426+273689/(1<<21))/(1<<30),piHalfLow:(3373259426+273688/(1<<21))/(1<<30)*.5,piHalfHigh:(3373259426+273689/(1<<21))/(1<<30)*.5,piTwiceLow:(3373259426+273688/(1<<21))/(1<<30)*2,piTwiceHigh:(3373259426+273689/(1<<21))/(1<<30)*2,identity:function(a){return a},_prev:function(a){return a===1/0?a:this.nextafter(a,-1/0)},_next:function(a){return a===-1/0?a:this.nextafter(a,1/0)},prev:function(a){return this._prev(a)},next:function(a){return this._next(a)},toInteger:function(a){return a<0?Math.ceil(a):Math.floor(a)},addLo:function(a,s){return this.prev(a+s)},addHi:function(a,s){return this.next(a+s)},subLo:function(a,s){return this.prev(a-s)},subHi:function(a,s){return this.next(a-s)},mulLo:function(a,s){return this.prev(a*s)},mulHi:function(a,s){return this.next(a*s)},divLo:function(a,s){return this.prev(a/s)},divHi:function(a,s){return this.next(a/s)},intLo:function(a){return this.toInteger(this.prev(a))},intHi:function(a){return this.toInteger(this.next(a))},logLo:function(a){return this.prev(Math.log(a))},logHi:function(a){return this.next(Math.log(a))},expLo:function(a){return this.prev(Math.exp(a))},expHi:function(a){return this.next(Math.exp(a))},sinLo:function(a){return this.prev(Math.sin(a))},sinHi:function(a){return this.next(Math.sin(a))},cosLo:function(a){return this.prev(Math.cos(a))},cosHi:function(a){return this.next(Math.cos(a))},tanLo:function(a){return this.prev(Math.tan(a))},tanHi:function(a){return this.next(Math.tan(a))},asinLo:function(a){return this.prev(Math.asin(a))},asinHi:function(a){return this.next(Math.asin(a))},acosLo:function(a){return this.prev(Math.acos(a))},acosHi:function(a){return this.next(Math.acos(a))},acotLo:function(a){return this.prev(Mat.acot(a))},acotHi:function(a){return this.next(Mat.acot(a))},atanLo:function(a){return this.prev(Math.atan(a))},atanHi:function(a){return this.next(Math.atan(a))},sinhLo:function(a){return this.prev(Mat.sinh(a))},sinhHi:function(a){return this.next(Mat.sinh(a))},coshLo:function(a){return this.prev(Mat.cosh(a))},coshHi:function(a){return this.next(Mat.cosh(a))},tanhLo:function(a){return this.prev(Mat.tanh(a))},tanhHi:function(a){return this.next(Mat.tanh(a))},sqrtLo:function(a){return this.prev(Math.sqrt(a))},sqrtHi:function(a){return this.next(Math.sqrt(a))},powLo:function(a,s){var o;if(s%1!==0)return this.prev(Math.pow(a,s));for(o=(s&1)===1?a:1,s>>=1;s>0;)a=this.mulLo(a,a),(s&1)===1&&(o=this.mulLo(a,o)),s>>=1;return o},powHi:function(a,s){var o;if(s%1!==0)return this.next(Math.pow(a,s));for(o=(s&1)===1?a:1,s>>=1;s>0;)a=this.mulHi(a,a),(s&1)===1&&(o=this.mulHi(a,o)),s>>=1;return o},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(a){return this._prev(a)},this.next=function(a){return this._next(a)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(a,s){var o,c;return isNaN(a)||isNaN(s)?NaN:a===s?a:a===0?s<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(c=doubleBits.hi(a),o=doubleBits.lo(a),s>a==a>0?o===this.UINT_MAX?(c+=1,o=0):o+=1:o===0?(o=this.UINT_MAX,c-=1):o-=1,doubleBits.pack(o,c))}};JXG$1.Math.IntervalArithmetic.PI=new MatInterval(Mat.IntervalArithmetic.piLow,Mat.IntervalArithmetic.piHigh);JXG$1.Math.IntervalArithmetic.PI_HALF=new MatInterval(Mat.IntervalArithmetic.piHalfLow,Mat.IntervalArithmetic.piHalfHigh);JXG$1.Math.IntervalArithmetic.PI_TWICE=new MatInterval(Mat.IntervalArithmetic.piTwiceLow,Mat.IntervalArithmetic.piTwiceHigh);JXG$1.Math.IntervalArithmetic.ZERO=new MatInterval(0);JXG$1.Math.IntervalArithmetic.ONE=new MatInterval(1);JXG$1.Math.IntervalArithmetic.WHOLE=new MatInterval().setWhole();JXG$1.Math.IntervalArithmetic.EMPTY=new MatInterval().setEmpty();const Interval=JXG$1.Math.IntervalArithmetic;Mat.Extrapolate={upper:15,infty:1e4,wynnEps:function(a,s,o){var c=1e20,h=1e-15,d=1,b,_,$,j,Xt,Lt;if(o[s]=a,s===0)Lt=a;else{for(j=0,_=s;_>0;_--)$=j,j=o[_-1],Xt=o[_]-j,Math.abs(Xt)<=h?o[_-1]=c:(b=(s-_+1)%2===1?d:1,o[_-1]=$*b+1/Xt);Lt=o[s%2]}return Lt},aitken:function(a,s,o){var c,h=1e20,d=1e-15,b,_,$,j,Xt;if(o[s]=a,s<2)c=a;else{for($=s/2,j=1;j<=$;j++)Xt=s-2*j,b=o[Xt+2]-2*o[Xt+1]+o[Xt],Math.abs(b)<d?o[Xt]=h:(_=o[Xt]-o[Xt+1],o[Xt]-=_*_/b);c=o[s%2]}return c},brezinski:function(a,s,o){var c,h=1e20,d=1e-15,b,_,$,j,Xt,Lt,fr;if(o[s]=a,s<3)c=a;else{for(Xt=s/3,fr=s,Lt=1;Lt<=Xt;Lt++)fr-=3,_=o[fr+1]-o[fr],$=o[fr+2]-o[fr+1],j=o[fr+3]-o[fr+2],b=j*($-_)-_*(j-$),Math.abs(b)<d?o[fr]=h:o[fr]=o[fr+1]-_*$*(j-$)/b;c=o[s%3]}return c},iteration:function(a,s,o,c,h){var d,b,_,$=NaN,j,Xt=.5,Lt=[],fr="finite",Jr=s;for(h=h||0,d=1;d<=this.upper;d++){if(Jr=h===0?s/(d+1):Jr*Xt,b=o(a+Jr,!0),_=this[c](b,d-1,Lt),isNaN(_)){fr="NaN";break}if(b!==0&&_/b>this.infty){$=_,fr="infinite";break}if(j=_-$,Math.abs(j)<1e-7)break;$=_}return[$,fr,1-(d-1)/this.upper]},levin:function(a,s,o,c,h,d){var b=1e20,_=1e-15,$,j,Xt,Lt,fr;if(Lt=1/(c+s),h[s]=a/o,d[s]=1/o,s>0&&(h[s-1]=h[s]-h[s-1],d[s-1]=d[s]-d[s-1],s>1))for(Xt=(c+s-1)*Lt,$=2;$<=s;$++)j=(c+s-$)*Math.pow(Xt,$-2)*Lt,h[s-$]=h[s-$+1]-j*h[s-$],d[s-$]=d[s-$+1]-j*d[s-$],Lt*=Xt;return Math.abs(d[0])<_?fr=b:fr=h[0]/d[0],fr},iteration_levin:function(a,s,o,c){var h,d,b,_=NaN,$,j,Xt,Lt,fr=1,Jr=.5,Js=[],qs=[],zo="finite",js=s,eu="u";for(c=c||0,$=o(a+s,!0),h=1;h<=this.upper;h++){if(js=c===0?s/(h+1):js*Jr,d=o(a+js,!0),j=d-$,Math.abs(j)<1?eu="u":eu="t",eu==="u"?Lt=(fr+h)*j:Lt=j,$=d,b=this.levin(d,h-1,Lt,fr,Js,qs),Xt=b-_,isNaN(b)){zo="NaN";break}if(d!==0&&b/d>this.infty){_=b,zo="infinite";break}if(Math.abs(Xt)<1e-7)break;_=b}return[_,zo,1-(h-1)/this.upper]},limit:function(a,s,o){return this.iteration_levin(a,s,o,0)}};const Extrapolate=Mat.Extrapolate;Mat.Statistics={sum:function(a){var s,o=a.length,c=0;for(s=0;s<o;s++)c+=a[s];return c},prod:function(a){var s,o=a.length,c=1;for(s=0;s<o;s++)c*=a[s];return c},mean:function(a){return a.length>0?this.sum(a)/a.length:0},median:function(a){var s,o;return a.length>0?(ArrayBuffer.isView(a)?(s=new Float64Array(a),s.sort()):(s=a.slice(0),s.sort(function(c,h){return c-h})),o=s.length,o&1?s[parseInt(o*.5,10)]:(s[o*.5-1]+s[o*.5])*.5):0},percentile:function(a,s){var o,c,h,d,b=[],_;if(a.length>0){for(ArrayBuffer.isView(a)?(o=new Float64Array(a),o.sort()):(o=a.slice(0),o.sort(function($,j){return $-j})),c=o.length,JXG$1.isArray(s)?d=s:d=[s],h=0;h<d.length;h++)_=c*d[h]*.01,parseInt(_,10)===_?b.push((o[_-1]+o[_])*.5):b.push(o[parseInt(_,10)]);return JXG$1.isArray(s)?b:b[0]}return 0},variance:function(a){var s,o,c,h=a.length;if(h>1){for(s=this.mean(a),o=0,c=0;c<h;c++)o+=(a[c]-s)*(a[c]-s);return o/(a.length-1)}return 0},sd:function(a){return Math.sqrt(this.variance(a))},weightedMean:function(a,s){if(a.length!==s.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return a.length>0?this.mean(this.multiply(a,s)):0},max:function(a){return Math.max.apply(this,a)},min:function(a){return Math.min.apply(this,a)},range:function(a){return[this.min(a),this.max(a)]},abs:function(a){var s,o,c;if(JXG$1.isArray(a))if(a.map)c=a.map(Math.abs);else for(o=a.length,c=[],s=0;s<o;s++)c[s]=Math.abs(a[s]);else ArrayBuffer.isView(a)?c=a.map(Math.abs):c=Math.abs(a);return c},add:function(a,s){var o,c,h=[];if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),JXG$1.isArray(a)&&JXG$1.isNumber(s))for(c=a.length,o=0;o<c;o++)h[o]=a[o]+s;else if(JXG$1.isNumber(a)&&JXG$1.isArray(s))for(c=s.length,o=0;o<c;o++)h[o]=a+s[o];else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(c=Math.min(a.length,s.length),o=0;o<c;o++)h[o]=a[o]+s[o];else h=a+s;return h},div:function(a,s){var o,c,h=[];if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),JXG$1.isArray(a)&&JXG$1.isNumber(s))for(c=a.length,o=0;o<c;o++)h[o]=a[o]/s;else if(JXG$1.isNumber(a)&&JXG$1.isArray(s))for(c=s.length,o=0;o<c;o++)h[o]=a/s[o];else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(c=Math.min(a.length,s.length),o=0;o<c;o++)h[o]=a[o]/s[o];else h=a/s;return h},divide:function(){JXG$1.deprecated("Statistics.divide()","Statistics.div()"),Mat.Statistics.div.apply(Mat.Statistics,arguments)},mod:function(a,s,o){var c,h,d=[],b=function(_,$){return _%$};if(o=JXG$1.def(o,!1),o&&(b=Mat.mod),a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),JXG$1.isArray(a)&&JXG$1.isNumber(s))for(h=a.length,c=0;c<h;c++)d[c]=b(a[c],s);else if(JXG$1.isNumber(a)&&JXG$1.isArray(s))for(h=s.length,c=0;c<h;c++)d[c]=b(a,s[c]);else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(h=Math.min(a.length,s.length),c=0;c<h;c++)d[c]=b(a[c],s[c]);else d=b(a,s);return d},multiply:function(a,s){var o,c,h=[];if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),JXG$1.isArray(a)&&JXG$1.isNumber(s))for(c=a.length,o=0;o<c;o++)h[o]=a[o]*s;else if(JXG$1.isNumber(a)&&JXG$1.isArray(s))for(c=s.length,o=0;o<c;o++)h[o]=a*s[o];else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(c=Math.min(a.length,s.length),o=0;o<c;o++)h[o]=a[o]*s[o];else h=a*s;return h},subtract:function(a,s){var o,c,h=[];if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),JXG$1.isArray(a)&&JXG$1.isNumber(s))for(c=a.length,o=0;o<c;o++)h[o]=a[o]-s;else if(JXG$1.isNumber(a)&&JXG$1.isArray(s))for(c=s.length,o=0;o<c;o++)h[o]=a-s[o];else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(c=Math.min(a.length,s.length),o=0;o<c;o++)h[o]=a[o]-s[o];else h=a-s;return h},TheilSenRegression:function(a){var s,o,c=[],h=[],d=[];for(s=0;s<a.length;s++){for(h.length=0,o=0;o<a.length;o++)Math.abs(a[o].usrCoords[1]-a[s].usrCoords[1])>Mat.eps&&(h[o]=(a[o].usrCoords[2]-a[s].usrCoords[2])/(a[o].usrCoords[1]-a[s].usrCoords[1]));c[s]=this.median(h),d.push(a[s].usrCoords[2]-c[s]*a[s].usrCoords[1])}return[this.median(d),this.median(c),-1]},generateGaussian:function(a,s){var o,c,h;if(this.hasSpare)return this.hasSpare=!1,this.spare*s+a;do o=Math.random()*2-1,c=Math.random()*2-1,h=o*o+c*c;while(h>=1||h===0);return h=Math.sqrt(-2*Math.log(h)/h),this.spare=c*h,this.hasSpare=!0,a+s*o*h},randomNormal:function(a,s){return this.generateGaussian(a,s)},randomUniform:function(a,s){return Math.random()*(s-a)+a},randomExponential:function(a){var s;if(a<=0)return NaN;do s=Math.random();while(s===0);return-Math.log(s)/a},randomGamma:function(a,s,o){var c,h,d,b,_,$;if(a<=0)return NaN;if(s=s||1,o=o||0,a===1)return s*this.randomExponential(1)+o;if(a<1){_=Math.E/(a+Math.E);do{c=Math.random();do h=Math.random();while(h===0);c<_?(d=Math.pow(h,1/a),$=Math.exp(-d)):(d=1-Math.log(h),$=Math.pow(d,a-1)),c=Math.random()}while(c>=$);return s*d+o}do if(b=Math.tan(Math.PI*Math.random()),d=Math.sqrt(2*a-1)*b+a-1,d>0)h=Math.random();else continue;while(d<=0||h>(1+b*b)*Math.exp((a-1)*Math.log(d/(a-1))-Math.sqrt(2*a-1)*b));return s*d+o},randomBeta:function(a,s){var o,c,h;return a<=0||s<=0?NaN:(o=this.randomGamma(a),c=this.randomGamma(s),h=o/(o+c),h)},randomChisquare:function(a){return a<=0?NaN:2*this.randomGamma(a*.5)},randomF:function(a,s){var o,c;return a<=0||s<=0?NaN:(o=this.randomChisquare(a),c=this.randomChisquare(s),o*s/(c*a))},randomT:function(a){var s,o;return a<=0?NaN:(s=this.randomNormal(0,1),o=this.randomChisquare(a),s/Math.sqrt(o/a))},randomBinomial:function(a,s){var o,c,h,d,b,_;if(s<0||s>1||a<0)return NaN;if(s===0)return 0;if(s===1)return a;if(a===0)return 0;if(a===1)return Math.random()<s?1:0;if(s>.5)return a-this.randomBinomial(a,1-s);if(a<100){if(o=-1,c=0,h=Math.log(1-s),h===0)return 0;do o+=1,c+=Math.floor(Math.log(Math.random())/h)+1;while(c<a)}else d=1+Math.floor(a*.5),b=a-d+1,o=this.randomBeta(d,b),o>=s?(_=this.randomBinomial(d-1,s/o),o=_):(_=this.randomBinomial(b-1,(s-o)/(1-o)),o=d+_);return o},randomGeometric:function(a){var s;return a<0||a>1?NaN:(s=Math.random(),Math.ceil(Math.log(s)/Math.log(1-a)))},randomPoisson:function(a){var s=Math.exp(-a),o,c=0,h=1,d,b=7/8;if(a<=0)return NaN;if(a<10){do h*=Math.random(),c+=1;while(h>s);o=c-1}else c=Math.floor(b*a),d=this.randomGamma(c),d<a?o=c+this.randomPoisson(a-d):o=this.randomBinomial(c-1,a/d);return o},randomPareto:function(a,s){var o=Math.random();return a<=0||s<=0?NaN:s*Math.pow(1-o,-1/a)},randomHypergeometric:function(a,s,o){var c,h,d=0,b=a+s-o,_=Math.min(a,s),$=_;if(a<1||s<1||o>a+s)return NaN;for(c=o;$*c>0;)h=Math.random(),$-=Math.floor(h+$/(b+c)),c-=1;return d=_-$,a<=s?d:o-d},histogram:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt=[],fr=[],Jr=0;for(_=s.bins||10,j=s.range||!1,j===!1?(d=Math.min.apply(null,a),b=Math.max.apply(null,a)):(d=j[0],b=j[1]),_>0?$=(b-d)/(_-1):$=0,o=0;o<_;o++)Lt.push(0),fr.push(d+o*$);for(c=a.length,o=0;o<c;o++)h=Math.floor((a[o]-d)/$),h>=0&&h<_?Lt[h]+=1:Jr+=1;if(s.density)for(Xt=JXG$1.Math.Statistics.sum(Lt)+Jr,o=0;o<_;o++)Lt[o]/=Xt*$;if(s.cumulative){if(s.density)for(o=0;o<_;o++)Lt[o]*=$;for(o=1;o<_;o++)Lt[o]+=Lt[o-1]}return[Lt,fr]}};const Stat=Mat.Statistics;var predefinedButcher={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};Mat.Numerics={Gauss:function(a,s){var o,c,h,d,b,_=Mat.eps,$=a.length>0?a[0].length:0;if($!==s.length||$!==a.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(d=[],b=s.slice(0,$),o=0;o<$;o++)d[o]=a[o].slice(0,$);for(c=0;c<$;c++){for(o=$-1;o>c;o--)if(Math.abs(d[o][c])>_)if(Math.abs(d[c][c])<_)JXG$1.swap(d,o,c),JXG$1.swap(b,o,c);else for(d[o][c]/=d[c][c],b[o]-=d[o][c]*b[c],h=c+1;h<$;h++)d[o][h]-=d[o][c]*d[c][h];if(Math.abs(d[c][c])<_)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(d,b,!0),b},backwardSolve:function(a,s,o){var c,h,d,b,_;for(o?c=s:c=s.slice(0,s.length),h=a.length,d=a.length>0?a[0].length:0,b=h-1;b>=0;b--){for(_=d-1;_>b;_--)c[b]-=a[b][_]*c[_];c[b]/=a[b][b]}return c},gaussBareiss:function(a){var s,o,c,h,d,b,_,$,j,Xt=Mat.eps;if(_=a.length,_<=0)return 0;for(a[0].length<_&&(_=a[0].length),$=[],h=0;h<_;h++)$[h]=a[h].slice(0,_);for(o=1,c=1,s=0;s<_-1;s++){if(b=$[s][s],Math.abs(b)<Xt){for(h=s+1;h<_&&!(Math.abs($[h][s])>=Xt);h++);if(h===_)return 0;for(d=s;d<_;d++)j=$[h][d],$[h][d]=$[s][d],$[s][d]=j;c=-c,b=$[s][s]}for(h=s+1;h<_;h++)for(d=s+1;d<_;d++)j=b*$[h][d]-$[h][s]*$[s][d],$[h][d]=j/o;o=b}return c*$[_-1][_-1]},det:function(a){var s=a.length;return s===2&&a[0].length===2?a[0][0]*a[1][1]-a[1][0]*a[0][1]:this.gaussBareiss(a)},Jacobi:function(a){var s,o,c,h,d,b,_,$,j=Mat.eps*Mat.eps,Xt=0,Lt=a.length,fr=[[0,0,0],[0,0,0],[0,0,0]],Jr=[[0,0,0],[0,0,0],[0,0,0]],Js=0;for(s=0;s<Lt;s++){for(o=0;o<Lt;o++)fr[s][o]=0,Jr[s][o]=a[s][o],Xt+=Math.abs(Jr[s][o]);fr[s][s]=1}if(Lt===1)return[Jr,fr];if(Xt<=0)return[Jr,fr];Xt/=Lt*Lt;do{for($=0,o=1;o<Lt;o++)for(s=0;s<o;s++)if(h=Math.abs(Jr[s][o]),$+=h,h>=j){for(h=Math.atan2(2*Jr[s][o],Jr[s][s]-Jr[o][o])*.5,d=Math.sin(h),b=Math.cos(h),c=0;c<Lt;c++)_=Jr[c][s],Jr[c][s]=b*_+d*Jr[c][o],Jr[c][o]=-d*_+b*Jr[c][o],_=fr[c][s],fr[c][s]=b*_+d*fr[c][o],fr[c][o]=-d*_+b*fr[c][o];for(Jr[s][s]=b*Jr[s][s]+d*Jr[o][s],Jr[o][o]=-d*Jr[s][o]+b*Jr[o][o],Jr[s][o]=0,c=0;c<Lt;c++)Jr[s][c]=Jr[c][s],Jr[o][c]=Jr[c][o]}Js+=1}while(Math.abs($)/Xt>j&&Js<2e3);return[Jr,fr]},NewtonCotes:function(a,s,o){var c,h,d,b=0,_=o&&JXG$1.isNumber(o.number_of_nodes)?o.number_of_nodes:28,$={trapez:!0,simpson:!0,milne:!0},j=o&&o.integration_type&&$.hasOwnProperty(o.integration_type)&&$[o.integration_type]?o.integration_type:"milne",Xt=(a[1]-a[0])/_;switch(j){case"trapez":for(b=(s(a[0])+s(a[1]))*.5,c=a[0],h=0;h<_-1;h++)c+=Xt,b+=s(c);b*=Xt;break;case"simpson":if(_%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(d=_/2,b=s(a[0])+s(a[1]),c=a[0],h=0;h<d-1;h++)c+=2*Xt,b+=2*s(c);for(c=a[0]-Xt,h=0;h<d;h++)c+=2*Xt,b+=4*s(c);b*=Xt/3;break;default:if(_%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(d=_*.25,b=7*(s(a[0])+s(a[1])),c=a[0],h=0;h<d-1;h++)c+=4*Xt,b+=14*s(c);for(c=a[0]-3*Xt,h=0;h<d;h++)c+=4*Xt,b+=32*(s(c)+s(c+2*Xt));for(c=a[0]-2*Xt,h=0;h<d;h++)c+=4*Xt,b+=12*s(c);b*=2*Xt/45}return b},Romberg:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt=[],fr=0,Jr=1/0,Js=o&&JXG$1.isNumber(o.max_iterations)?o.max_iterations:20,qs=o&&JXG$1.isNumber(o.eps)?o.eps:o.eps||1e-7;for(c=a[0],h=a[1],d=h-c,_=1,Lt[0]=.5*d*(s(c)+s(h)),$=0;$<Js;++$){for(b=0,d*=.5,_*=2,Xt=1,j=1;j<_;j+=2)b+=s(c+j*d);for(Lt[$+1]=.5*Lt[$]+b*d,fr=Lt[$+1],j=$-1;j>=0;--j)Xt*=4,Lt[j]=Lt[j+1]+(Lt[j+1]-Lt[j])/(Xt-1),fr=Lt[j];if(Math.abs(fr-Jr)<qs*Math.abs(fr))break;Jr=fr}return fr},GaussLegendre:function(a,s,o){var c,h,d,b,_,$,j=0,Xt=[],Lt=[],fr,Jr,Js=o&&JXG$1.isNumber(o.n)?o.n:12;if(Js>18&&(Js=18),Xt[2]=[.5773502691896257],Lt[2]=[1],Xt[4]=[.33998104358485626,.8611363115940526],Lt[4]=[.6521451548625461,.34785484513745385],Xt[6]=[.2386191860831969,.6612093864662645,.932469514203152],Lt[6]=[.46791393457269104,.3607615730481386,.17132449237917036],Xt[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],Lt[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],Xt[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],Lt[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],Xt[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],Lt[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],Xt[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],Lt[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],Xt[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],Lt[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],Xt[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],Lt[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],Xt[3]=[0,.7745966692414834],Lt[3]=[.8888888888888888,.5555555555555556],Xt[5]=[0,.5384693101056831,.906179845938664],Lt[5]=[.5688888888888889,.47862867049936647,.23692688505618908],Xt[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],Lt[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],Xt[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],Lt[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],Xt[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],Lt[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],Xt[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],Lt[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],Xt[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],Lt[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],Xt[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],Lt[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],c=a[0],h=a[1],b=Js+1>>1,fr=Xt[Js],Jr=Lt[Js],$=.5*(h-c),_=.5*(h+c),Js&!0)for(j=Jr[0]*s(_),d=1;d<b;++d)j+=Jr[d]*(s(_+$*fr[d])+s(_-$*fr[d]));else for(j=0,d=0;d<b;++d)j+=Jr[d]*(s(_+$*fr[d])+s(_-$*fr[d]));return $*j},_rescale_error:function(a,s,o){var c,h,d=22250738585072014e-324,b=2220446049250313e-31;return a=Math.abs(a),o!==0&&a!==0&&(c=Math.pow(200*a/o,1.5),c<1?a=o*c:a=o),s>d/(50*b)&&(h=50*b*s,h>a&&(a=h)),a},_gaussKronrod:function(a,s,o,c,h,d,b){var _=a[0],$=a[1],j,Xt,Lt=.5*(_+$),fr=.5*($-_),Jr=Math.abs(fr),Js=s(Lt),qs=0,zo=Js*d[o-1],js=Math.abs(zo),eu=0,Oo=0,tu=0,Bo,vu,t1,e1,r1,a1,i1,s1=[],c1=[];for(o%2===0&&(qs=Js*h[o/2-1]),j=Math.floor((o-1)/2),Bo=0;Bo<j;Bo++)vu=Bo*2+1,e1=fr*c[vu],r1=s(Lt-e1),a1=s(Lt+e1),i1=r1+a1,s1[vu]=r1,c1[vu]=a1,qs+=h[Bo]*i1,zo+=d[vu]*i1,js+=d[vu]*(Math.abs(r1)+Math.abs(a1));for(j=Math.floor(o/2),Bo=0;Bo<j;Bo++)t1=Bo*2,e1=fr*c[t1],r1=s(Lt-e1),a1=s(Lt+e1),s1[t1]=r1,c1[t1]=a1,zo+=d[t1]*(r1+a1),js+=d[t1]*(Math.abs(r1)+Math.abs(a1));for(Oo=zo*.5,eu=d[o-1]*Math.abs(Js-Oo),Bo=0;Bo<o-1;Bo++)eu+=d[Bo]*(Math.abs(s1[Bo]-Oo)+Math.abs(c1[Bo]-Oo));return tu=(zo-qs)*fr,zo*=fr,js*=Jr,eu*=Jr,Xt=zo,b.abserr=this._rescale_error(tu,js,eu),b.resabs=js,b.resasc=eu,Xt},GaussKronrod15:function(a,s,o){var c=[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],h=[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],d=[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782];return this._gaussKronrod(a,s,8,c,h,d,o)},GaussKronrod21:function(a,s,o){var c=[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],h=[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],d=[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169];return this._gaussKronrod(a,s,11,c,h,d,o)},GaussKronrod31:function(a,s,o){var c=[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],h=[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],d=[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154];return this._gaussKronrod(a,s,16,c,h,d,o)},_workspace:function(a,s){return{limit:s,size:0,nrmax:0,i:0,alist:[a[0]],blist:[a[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var o=this.size-1,c=this.limit,h,d,b,_,$,j=this.nrmax,Xt=this.order[j];if(o<2){this.order[0]=0,this.order[1]=1,this.i=Xt;return}for(h=this.elist[Xt];j>0&&h>this.elist[this.order[j-1]];)this.order[j]=this.order[j-1],j--;for(o<c/2+2?$=o:$=c-o+1,b=j+1;b<$&&h<this.elist[this.order[b]];)this.order[b-1]=this.order[b],b++;for(this.order[b-1]=Xt,d=this.elist[o],_=$-1;_>b-2&&d>=this.elist[this.order[_]];)this.order[_+1]=this.order[_],_--;this.order[_+1]=o,Xt=this.order[j],this.i=Xt,this.nrmax=j},set_initial_result:function(o,c){this.size=1,this.rlist[0]=o,this.elist[0]=c},update:function(o,c,h,d,b,_,$,j){var Xt=this.i,Lt=this.size,fr=this.level[this.i]+1;j>d?(this.alist[Xt]=b,this.rlist[Xt]=$,this.elist[Xt]=j,this.level[Xt]=fr,this.alist[Lt]=o,this.blist[Lt]=c,this.rlist[Lt]=h,this.elist[Lt]=d,this.level[Lt]=fr):(this.blist[Xt]=c,this.rlist[Xt]=h,this.elist[Xt]=d,this.level[Xt]=fr,this.alist[Lt]=b,this.blist[Lt]=_,this.rlist[Lt]=$,this.elist[Lt]=j,this.level[Lt]=fr),this.size++,fr>this.maximum_level&&(this.maximum_level=fr),this.qpsrt()},retrieve:function(){var o=this.i;return{a:this.alist[o],b:this.blist[o],r:this.rlist[o],e:this.elist[o]}},sum_results:function(){var o=this.size,c,h=0;for(c=0;c<o;c++)h+=this.rlist[c];return h},subinterval_too_small:function(o,c,h){var d=2220446049250313e-31,b=22250738585072014e-324,_=(1+100*d)*(Math.abs(c)+1e3*b);return Math.abs(o)<=_&&Math.abs(h)<=_}}},Qag:function(a,s,o){var c=2220446049250313e-31,h=this._workspace(a,1e3),d=o&&JXG$1.isNumber(o.limit)?o.limit:15,b=o&&JXG$1.isNumber(o.epsrel)?o.epsrel:1e-7,_=o&&JXG$1.isNumber(o.epsabs)?o.epsabs:1e-7,$=o&&JXG$1.isFunction(o.q)?o.q:this.GaussKronrod15,j={},Xt,Lt,fr,Jr,Js,qs,zo,js,eu=0,Oo=0,tu=0,Bo=0,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1=0,l1=0,f1=0,p1=0,d1=0,b1=0,C1,g1,o1,S1;if(d>h.limit&&JXG$1.warn("iteration limit exceeds available workspace"),_<=0&&(b<50*Mat.eps||b<5e-29)&&JXG$1.warn("tolerance cannot be acheived with given epsabs and epsrel"),fr=$.apply(this,[a,s,j]),Jr=j.abserr,Js=j.resabs,qs=j.resasc,h.set_initial_result(fr,Jr),js=Math.max(_,b*Math.abs(fr)),vu=50*c*Js,Jr<=vu&&Jr>js)return zo=fr,JXG$1.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(Jr<=js&&Jr!==qs||Jr===0)return zo=fr,zo;if(d===1)return zo=fr,JXG$1.warn("a maximum of one iteration was insufficient"),-1/0;Xt=fr,Lt=Jr,eu=1;do m1=0,l1=0,f1=0,p1=0,d1=0,b1=0,o1=h.retrieve(),i1=o1.a,s1=o1.b,c1=o1.r,h1=o1.e,t1=i1,e1=.5*(i1+s1),r1=e1,a1=s1,m1=$.apply(this,[[t1,e1],s,j]),p1=j.abserr,C1=j.resasc,l1=$.apply(this,[[r1,a1],s,j]),d1=j.abserr,g1=j.resasc,f1=m1+l1,b1=p1+d1,Lt+=b1-h1,Xt+=f1-c1,C1!==p1&&g1!==d1&&(S1=c1-f1,Math.abs(S1)<=1e-5*Math.abs(f1)&&b1>=.99*h1&&Oo++,eu>=10&&b1>h1&&tu++),js=Math.max(_,b*Math.abs(Xt)),Lt>js&&((Oo>=6||tu>=20)&&(Bo=2),h.subinterval_too_small(t1,r1,a1)&&(Bo=3)),h.update(t1,e1,m1,p1,r1,a1,l1,d1),o1=h.retrieve(),i1=o1.a_i,s1=o1.b_i,c1=o1.r_i,h1=o1.e_i,eu++;while(eu<d&&!Bo&&Lt>js);return zo=h.sum_results(),zo},I:function(a,s){return this.Qag(a,s,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(a,s,o){var c,h=0,d=Mat.eps,b=a.apply(o,[s]);for(JXG$1.isArray(s)&&(s=s[0]);h<50&&Math.abs(b)>d;)c=this.D(a,o)(s),Math.abs(c)>d?s-=b/c:s+=Math.random()*.2-1,b=a.apply(o,[s]),h+=1;return s},root:function(a,s,o){return this.chandrupatla(a,s,o)},generalizedNewton:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu=0;for(h=o,d=c,Xt=a.X(h)-s.X(d),Lt=a.Y(h)-s.Y(d),Jr=Xt*Xt+Lt*Lt,Js=this.D(a.X,a),qs=this.D(s.X,s),zo=this.D(a.Y,a),js=this.D(s.Y,s);Jr>Mat.eps&&eu<10;)b=Js(h),_=-qs(d),$=zo(h),j=-js(d),fr=b*j-_*$,h-=(j*Xt-_*Lt)/fr,d-=(b*Lt-$*Xt)/fr,Xt=a.X(h)-s.X(d),Lt=a.Y(h)-s.Y(d),Jr=Xt*Xt+Lt*Lt,eu+=1;return Math.abs(h)<Math.abs(d)?[a.X(h),a.Y(h)]:[s.X(d),s.Y(d)]},generalizedDampedNewtonCurves:function(a,s,o,c,h,d){var b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu=40,Bo=0;for(b=o,_=c,zo=a.Ft(b),js=s.Ft(_),fr=zo[1]-js[1],Jr=zo[2]-js[2],qs=fr*fr+Jr*Jr,eu=function(vu,t1){var e1=Mat.eps,r1=a.Ft(vu-e1),a1=a.Ft(vu+e1),i1=s.Ft(t1-e1),s1=s.Ft(t1+e1);return[[(a1[1]-r1[1])/(2*e1),-(s1[1]-i1[1])/(2*e1)],[(a1[2]-r1[2])/(2*e1),-(s1[2]-i1[2])/(2*e1)]]};qs>d&&Bo<tu;)Oo=eu(b,_),$=Oo[0][0],j=Oo[0][1],Xt=Oo[1][0],Lt=Oo[1][1],Js=$*Lt-j*Xt,b-=h*(Lt*fr-j*Jr)/Js,_-=h*($*Jr-Xt*fr)/Js,zo=a.Ft(b),js=s.Ft(_),fr=zo[1]-js[1],Jr=zo[2]-js[2],qs=fr*fr+Jr*Jr,Bo+=1;return[b,_,qs]},generalizedDampedNewton:function(a,s,o,c,h,d,b){var _,$=[],j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu=0;if(b=b||40,$=c.slice(0,o),zo=a($,o),o===2){for(zo=a($,o),Jr=zo[0],Js=zo[1],eu=Jr*Jr+Js*Js;eu>d&&tu<b;)js=s($,o),j=js[0][0],Xt=js[0][1],Lt=js[1][0],fr=js[1][1],qs=j*fr-Xt*Lt,$[0]-=h*(fr*Jr-Xt*Js)/qs,$[1]-=h*(j*Js-Lt*Jr)/qs,zo=a($,o),Jr=zo[0],Js=zo[1],eu=Jr*Jr+Js*Js,tu+=1;return[$,eu]}else{for(zo=a($,o),eu=Mat.innerProduct(zo,zo,o);eu>d&&tu<b;){for(js=Mat.inverse(s($,o)),Oo=Mat.matVecMult(js,zo),_=0;_<o;_++)$[_]-=h*Oo[_];zo=a($,o),eu=Mat.innerProduct(zo,zo,o),tu+=1}return[$,eu]}},Neville:function(a){var s=[],o=function(d){return function(b,_){var $,j,Xt,Lt=Mat.binomial,fr=a.length,Jr=fr-1,Js=0,qs=0;if(!_)for(Xt=1,$=0;$<fr;$++)s[$]=Lt(Jr,$)*Xt,Xt*=-1;for(j=b,$=0;$<fr;$++){if(j===0)return a[$][d]();Xt=s[$]/j,j-=1,Js+=a[$][d]()*Xt,qs+=Xt}return Js/qs}},c=o("X"),h=o("Y");return[c,h,0,function(){return a.length-1}]},splineDef:function(a,s){var o,c,h,d=Math.min(a.length,s.length),b=[],_=[],$=[],j=[],Xt=[],Lt=[];if(d===2)return[0,0];for(c=0;c<d;c++)o={X:a[c],Y:s[c]},$.push(o);for($.sort(function(fr,Jr){return fr.X-Jr.X}),c=0;c<d;c++)a[c]=$[c].X,s[c]=$[c].Y;for(c=0;c<d-1;c++)j.push(a[c+1]-a[c]);for(c=0;c<d-2;c++)Xt.push(6*(s[c+2]-s[c+1])/j[c+1]-6*(s[c+1]-s[c])/j[c]);for(b.push(2*(j[0]+j[1])),_.push(Xt[0]),c=0;c<d-3;c++)h=j[c+1]/b[c],b.push(2*(j[c+1]+j[c+2])-h*j[c+1]),_.push(Xt[c+1]-h*_[c]);for(Lt[d-3]=_[d-3]/b[d-3],c=d-4;c>=0;c--)Lt[c]=(_[c]-j[c+1]*Lt[c+1])/b[c];for(c=d-3;c>=0;c--)Lt[c+1]=Lt[c];return Lt[0]=0,Lt[d-1]=0,Lt},splineEval:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt=Math.min(s.length,o.length),fr=1,Jr=!1,Js=[];for(JXG$1.isArray(a)?(fr=a.length,Jr=!0):a=[a],h=0;h<fr;h++){if(a[h]<s[0]||s[h]>s[Lt-1])return NaN;for(d=1;d<Lt&&!(a[h]<=s[d]);d++);d-=1,b=o[d],_=(o[d+1]-o[d])/(s[d+1]-s[d])-(s[d+1]-s[d])/6*(c[d+1]+2*c[d]),$=c[d]/2,j=(c[d+1]-c[d])/(6*(s[d+1]-s[d])),Xt=a[h]-s[d],Js.push(b+(_+($+j*Xt)*Xt)*Xt)}return Jr?Js:Js[0]},generatePolynomialTerm:function(a,s,o,c){var h,d=[];for(h=s;h>=0;h--)JXG$1.concat(d,["(",a[h].toPrecision(c),")"]),h>1?JXG$1.concat(d,["*",o,"<sup>",h,"<","/sup> + "]):h===1&&JXG$1.concat(d,["*",o," + "]);return d.join("")},lagrangePolynomial:function(a){var s=[],o=this,c=function(h,d){var b,_,$,j,Xt=a.length,Lt=0,fr=0;if(!d)for(b=0;b<Xt;b++){for(s[b]=1,$=a[b].X(),_=0;_<Xt;_++)_!==b&&(s[b]*=$-a[_].X());s[b]=1/s[b]}for(b=0;b<Xt;b++){if($=a[b].X(),h===$)return a[b].Y();j=s[b]/(h-$),fr+=j,Lt+=j*a[b].Y()}return Lt/fr};return c.getTerm=function(h,d,b){return o.lagrangePolynomialTerm(a,h,d,b)()},c.getCoefficients=function(){return o.lagrangePolynomialCoefficients(a)()},c},lagrangePolynomialTerm:function(a,s,o,c){var h=this;return function(){var d=a.length,b=[],_=!0,$,j,Xt,Lt;for(o=o||"x",c===void 0&&(c=" * "),$=d-1,b=h.lagrangePolynomialCoefficients(a)(),j="",Xt=0;Xt<b.length;Xt++)Lt=b[Xt],!(Math.abs(Lt)<Mat.eps)&&(JXG$1.exists(s)&&(Lt=JXG$1._round10(Lt,-s)),_?(j+=Lt>0?Lt:"-"+-Lt,_=!1):j+=Lt>0?" + "+Lt:" - "+-Lt,$-Xt>1?j+=c+o+"^"+($-Xt):$-Xt===1&&(j+=c+o));return j}},lagrangePolynomialCoefficients:function(a){return function(){var s=a.length,o=[],c=[],h=[],d,b,_,$;for(b=0;b<s;b++)h[b]=0;for(d=0;d<s;d++){for(_=a[d].Y(),$=a[d].X(),o=[],b=0;b<s;b++)b!==d&&(_/=$-a[b].X(),o.push(a[b].X()));for(c=[1].concat(Mat.Vieta(o)),b=0;b<c.length;b++)h[b]+=(b%2===1?-1:1)*c[b]*_}return h}},_initCubicPoly:function(a,s,o,c){return[a,o,-3*a+3*s-2*o-c,2*a-2*s+o+c]},CardinalSpline:function(a,s,o){var c,h=[],d,b,_,$=this;return JXG$1.isFunction(s)?_=s:_=function(){return s},o===void 0&&(o="uniform"),d=function(j){return function(Xt,Lt){var fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo;if(a.length<2)return NaN;if(!Lt)for(b=_(),Js={X:function(){return 2*a[0].X()-a[1].X()},Y:function(){return 2*a[0].Y()-a[1].Y()},Dist:function(vu){var t1=this.X()-vu.X(),e1=this.Y()-vu.Y();return Mat.hypot(t1,e1)}},qs={X:function(){return 2*a[a.length-1].X()-a[a.length-2].X()},Y:function(){return 2*a[a.length-1].Y()-a[a.length-2].Y()},Dist:function(vu){var t1=this.X()-vu.X(),e1=this.Y()-vu.Y();return Mat.hypot(t1,e1)}},c=[Js].concat(a,[qs]),Bo=c.length,h[j]=[],fr=0;fr<Bo-3;fr++)o==="centripetal"?(eu=c[fr].Dist(c[fr+1]),Oo=c[fr+2].Dist(c[fr+1]),tu=c[fr+3].Dist(c[fr+2]),eu=Math.sqrt(eu),Oo=Math.sqrt(Oo),tu=Math.sqrt(tu),Oo<Mat.eps&&(Oo=1),eu<Mat.eps&&(eu=Oo),tu<Mat.eps&&(tu=Oo),zo=(c[fr+1][j]()-c[fr][j]())/eu-(c[fr+2][j]()-c[fr][j]())/(Oo+eu)+(c[fr+2][j]()-c[fr+1][j]())/Oo,js=(c[fr+2][j]()-c[fr+1][j]())/Oo-(c[fr+3][j]()-c[fr+1][j]())/(tu+Oo)+(c[fr+3][j]()-c[fr+2][j]())/tu,zo*=Oo,js*=Oo,h[j][fr]=$._initCubicPoly(c[fr+1][j](),c[fr+2][j](),b*zo,b*js)):h[j][fr]=$._initCubicPoly(c[fr+1][j](),c[fr+2][j](),b*(c[fr+2][j]()-c[fr][j]()),b*(c[fr+3][j]()-c[fr+1][j]()));return isNaN(Xt)?NaN:(Bo=a.length,Xt<=0?a[0][j]():Xt>=Bo?a[Bo-1][j]():(fr=Math.floor(Xt),fr===Xt?a[fr][j]():(Xt-=fr,Jr=h[j][fr],Jr===void 0?NaN:((Jr[3]*Xt+Jr[2])*Xt+Jr[1])*Xt+Jr[0])))}},[d("X"),d("Y"),0,function(){return a.length-1}]},CatmullRomSpline:function(a,s){return this.CardinalSpline(a,.5,s)},regressionPolynomial:function(a,s,o){var c,h,d,b,_,$,j="";if(JXG$1.isPoint(a)&&JXG$1.isFunction(a.Value))h=function(){return a.Value()};else if(JXG$1.isFunction(a))h=a;else if(JXG$1.isNumber(a))h=function(){return a};else throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof a+"'.");if(arguments.length===3&&JXG$1.isArray(s)&&JXG$1.isArray(o))_=0;else if(arguments.length===2&&JXG$1.isArray(s)&&s.length>0&&JXG$1.isPoint(s[0]))_=1;else if(arguments.length===2&&JXG$1.isArray(s)&&s.length>0&&s[0].usrCoords&&s[0].scrCoords)_=2;else throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");return $=function(Xt,Lt){var fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo=s.length;if(tu=Math.floor(h()),!Lt){if(_===1)for(d=[],b=[],fr=0;fr<Bo;fr++)d[fr]=s[fr].X(),b[fr]=s[fr].Y();if(_===2)for(d=[],b=[],fr=0;fr<Bo;fr++)d[fr]=s[fr].usrCoords[1],b[fr]=s[fr].usrCoords[2];if(_===0)for(d=[],b=[],fr=0;fr<Bo;fr++)JXG$1.isFunction(s[fr])?d.push(s[fr]()):d.push(s[fr]),JXG$1.isFunction(o[fr])?b.push(o[fr]()):b.push(o[fr]);for(Js=[],Jr=0;Jr<Bo;Jr++)Js.push([1]);for(fr=1;fr<=tu;fr++)for(Jr=0;Jr<Bo;Jr++)Js[Jr][fr]=Js[Jr][fr-1]*d[Jr];zo=b,qs=Mat.transpose(Js),js=Mat.matMatMult(qs,Js),eu=Mat.matVecMult(qs,zo),c=Mat.Numerics.Gauss(js,eu),j=Mat.Numerics.generatePolynomialTerm(c,tu,"x",3)}for(Oo=c[tu],fr=tu-1;fr>=0;fr--)Oo=Oo*Xt+c[fr];return Oo},$.getTerm=function(){return j},$},bezier:function(a){var s,o,c=function(h){return function(d,b){var _=Math.floor(d)*3,$=d%1,j=1-$;return b||(o=3*Math.floor((a.length-1)/3),s=Math.floor(o/3)),d<0?a[0][h]():d>=s?a[o][h]():isNaN(d)?NaN:j*j*(j*a[_][h]()+3*$*a[_+1][h]())+(3*j*a[_+2][h]()+$*a[_+3][h]())*$*$}};return[c("X"),c("Y"),0,function(){return Math.floor(a.length/3)}]},bspline:function(a,s){var o,c=function(b,_){var $,j=[];for($=0;$<b+_+1;$++)$<_?j[$]=0:$<=b?j[$]=$-_+1:j[$]=b-_+2;return j},h=function(b,_,$,j){var Xt,Lt,fr,Jr,Js,qs=[];for(_[j]<=b&&b<_[j+1]?qs[j]=1:qs[j]=0,Xt=2;Xt<=$;Xt++)for(Lt=j-Xt+1;Lt<=j;Lt++)Lt<=j-Xt+1||Lt<0?fr=0:fr=qs[Lt],Lt>=j?Jr=0:Jr=qs[Lt+1],Js=_[Lt+Xt-1]-_[Lt],Js===0?qs[Lt]=0:qs[Lt]=(b-_[Lt])/Js*fr,Js=_[Lt+Xt]-_[Lt+1],Js!==0&&(qs[Lt]+=(_[Lt+Xt]-b)/Js*Jr);return qs},d=function(b){return function(_,$){var j,Xt,Lt,fr=[],Jr=a.length,Js=Jr-1,qs=s;if(Js<=0)return NaN;if(Js+2<=qs&&(qs=Js+1),_<=0)return a[0][b]();if(_>=Js-qs+2)return a[Js][b]();for(Lt=Math.floor(_)+qs-1,o=c(Js,qs),fr=h(_,o,qs,Lt),j=0,Xt=Lt-qs+1;Xt<=Lt;Xt++)Xt<Jr&&Xt>=0&&(j+=a[Xt][b]()*fr[Xt]);return j}};return[d("X"),d("Y"),0,function(){return a.length-1}]},D:function(a,s){return JXG$1.exists(s)?function(o,c){var h=1e-5,d=h*2;return(a.apply(s,[o+h,c])-a.apply(s,[o-h,c]))/d}:function(o,c){var h=1e-5,d=h*2;return(a(o+h,c)-a(o-h,c))/d}},_riemannValue:function(a,s,o,c){var h,d,b,_;if(c<0&&(o!=="trapezoidal"&&(a=a+c),c*=-1,o==="lower"?o="upper":o==="upper"&&(o="lower")),_=c*.01,o==="right")h=s(a+c);else if(o==="middle")h=s(a+c*.5);else if(o==="left"||o==="trapezoidal")h=s(a);else if(o==="lower"){for(h=s(a),b=a+_;b<=a+c;b+=_)d=s(b),d<h&&(h=d);d=s(a+c),d<h&&(h=d)}else if(o==="upper"){for(h=s(a),b=a+_;b<=a+c;b+=_)d=s(b),d>h&&(h=d);d=s(a+c),d>h&&(h=d)}else o==="random"?h=s(a+c*Math.random()):o==="simpson"?h=(s(a)+4*s(a+c*.5)+s(a+c))/6:h=s(a);return h},riemann:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo=30,js=[],eu=[],Oo=c,tu=0,Bo,vu,t1;if(JXG$1.isArray(a)?(t1=a[0],vu=a[1]):vu=a,s=Math.floor(s),s<=0)return[js,eu,tu];for(b=(h-c)/s,d=0;d<s;d++){if(o==="simpson"){for(tu+=this._riemannValue(Oo,vu,o,b)*b,qs=b*.5,Lt=vu(Oo),fr=vu(Oo+qs),Jr=vu(Oo+2*qs),$=(Jr+Lt-2*fr)/(qs*qs)*.5,j=(Jr-Lt)/(2*qs),Xt=fr,_=0;_<zo;_++)Js=_*b/zo-qs,js.push(Oo+Js+qs),eu.push($*Js*Js+j*Js+Xt);Oo+=b,Bo=Jr}else Bo=this._riemannValue(Oo,vu,o,b),js.push(Oo),eu.push(Bo),Oo+=b,o==="trapezoidal"?(Jr=vu(Oo),tu+=(Bo+Jr)*.5*b,Bo=Jr):tu+=Bo*b,js.push(Oo),eu.push(Bo);js.push(Oo),eu.push(Bo)}for(d=0;d<s;d++){if(o==="simpson"&&t1){for(tu-=this._riemannValue(Oo,t1,o,-b)*b,qs=b*.5,Lt=t1(Oo),fr=t1(Oo-qs),Jr=t1(Oo-2*qs),$=(Jr+Lt-2*fr)/(qs*qs)*.5,j=(Jr-Lt)/(2*qs),Xt=fr,_=0;_<zo;_++)Js=_*b/zo-qs,js.push(Oo-Js-qs),eu.push($*Js*Js+j*Js+Xt);Oo-=b,Bo=Jr}else t1?Bo=this._riemannValue(Oo,t1,o,-b):Bo=0,js.push(Oo),eu.push(Bo),Oo-=b,t1&&(o==="trapezoidal"?(Jr=t1(Oo),tu-=(Bo+Jr)*.5*b,Bo=Jr):tu-=Bo*b);js.push(Oo),eu.push(Bo),js.push(Oo),eu.push(vu(Oo))}return[js,eu,tu]},riemannsum:function(a,s,o,c,h){return JXG$1.deprecated("Numerics.riemannsum()","Numerics.riemann()[2]"),this.riemann(a,s,o,c,h)[2]},rungeKutta:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt=[],fr=[],Jr=(o[1]-o[0])/c,Js=o[0],qs=s.length,zo=[],js=0;for(JXG$1.isString(a)&&(a=predefinedButcher[a]||predefinedButcher.euler),Xt=a.s,Lt=s.slice(),b=0;b<=c;b++){for(zo[js]=Lt.slice(),js++,$=[],_=0;_<Xt;_++){for(d=0;d<qs;d++)fr[d]=0;for(j=0;j<_;j++)for(d=0;d<qs;d++)fr[d]+=a.A[_][j]*Jr*$[j][d];for(d=0;d<qs;d++)fr[d]+=Lt[d];$.push(h(Js+a.c[_]*Jr,fr))}for(d=0;d<qs;d++)fr[d]=0;for(j=0;j<Xt;j++)for(d=0;d<qs;d++)fr[d]+=a.b[j]*$[j][d];for(d=0;d<qs;d++)Lt[d]=Lt[d]+Jr*fr[d];Js+=Jr}return zo},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr;if(JXG$1.isArray(s))return s;for(c=s,d=a.call(o,c),h=c===0?1:c,b=[c-.1*h,c+.1*h,c-1,c+1,c-.5*h,c+.5*h,c-.6*h,c+.6*h,c-1*h,c+1*h,c-2*h,c+2*h,c-5*h,c+5*h,c-10*h,c+10*h,c-50*h,c+50*h,c-100*h,c+100*h],fr=b.length,Lt=0;Lt<fr&&(_=b[Lt],$=a.call(o,_),!(d*$<=0));Lt++);return _<c&&(j=c,c=_,_=j,Xt=d,d=$,$=Xt),[c,d,_,$]},fzero:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo=Mat.eps,tu=this.maxIterationsRoot,Bo=0;if(JXG$1.isArray(s)){if(s.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");Xt=this.findDomain(a,s,o),c=Xt[0],h=Xt[1],b=a.call(o,c),_=a.call(o,h)}else j=this.findBracket(a,s,o),c=j[0],b=j[1],h=j[2],_=j[3];if(Math.abs(b)<=Oo)return c;if(Math.abs(_)<=Oo)return h;if(b*_>0)return JXG$1.isArray(s)?this.fminbr(a,[c,h],o):this.Newton(a,c,o);for(d=c,$=b;Bo<tu;){if(Lt=h-c,Math.abs($)<Math.abs(_)&&(c=h,h=d,d=c,b=_,_=$,$=b),qs=2*Oo*Math.abs(h)+Oo*.5,eu=(d-h)*.5,Math.abs(eu)<=qs||Math.abs(_)<=Oo)return h;Math.abs(Lt)>=qs&&Math.abs(b)>Math.abs(_)&&(Js=d-h,c===d?(fr=_/b,zo=Js*fr,js=1-fr):(js=b/$,fr=_/$,Jr=_/b,zo=Jr*(Js*js*(js-fr)-(h-c)*(fr-1)),js=(js-1)*(fr-1)*(Jr-1)),zo>0?js=-js:zo=-zo,zo<.75*Js*js-Math.abs(qs*js)*.5&&zo<Math.abs(Lt*js*.5)&&(eu=zo/js)),Math.abs(eu)<qs&&(eu=eu>0?qs:-qs),c=h,b=_,h+=eu,_=a.call(o,h),(_>0&&$>0||_<0&&$<0)&&(d=c,$=b),Bo++}return h},chandrupatla:function(a,s,o){var c,h,d,b,_,$=0,j=this.maxIterationsRoot,Xt=1+Math.random()*.001,Lt=.5*Xt,fr=Mat.eps,Jr=1e-5,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1,l1,f1,p1;if(JXG$1.isArray(s)){if(s.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");c=s[0],d=a.call(o,c),h=s[1],b=a.call(o,h)}else _=this.findBracket(a,s,o),c=_[0],d=_[1],h=_[2],b=_[3];if(d*b>0)return JXG$1.isArray(s)?this.fminbr(a,[c,h],o):this.Newton(a,c,o);Js=c,qs=h,eu=d,Oo=b;do{if(js=Js+Lt*(qs-Js),Bo=a.call(o,js),Math.sign(Bo)===Math.sign(eu)?(zo=Js,Js=js,tu=eu,eu=Bo):(zo=qs,qs=Js,tu=Oo,Oo=eu),Js=js,eu=Bo,vu=Js,t1=eu,Math.abs(Oo)<Math.abs(eu)&&(vu=qs,t1=Oo),e1=2*fr*Math.abs(vu)+.5*Jr,r1=e1/Math.abs(qs-Js),r1>.5||t1===0)break;a1=(Js-qs)/(zo-qs),i1=(eu-Oo)/(tu-Oo),s1=1-Math.sqrt(1-a1),c1=Math.sqrt(a1),s1<i1&&i1<c1?(h1=(zo-Js)/(qs-Js),m1=eu/(Oo-eu),l1=tu/(Oo-tu),f1=eu/(tu-eu),p1=Oo/(tu-Oo),Lt=m1*l1+f1*p1*h1):Lt=.5*Xt,Lt<r1&&(Lt=r1),Lt>1-r1&&(Lt=1-r1),$++}while($<=j);return vu},findDomain:function(a,s,o,c){var h,d,b,_,$,j=.3819660112501453,Xt=.001,Lt,fr=20;if(c===void 0&&(c=!0),!JXG$1.isArray(s)||s.length<2)throw new Error("JXG.Math.Numerics.findDomain: length of array x0 has to be at least two.");if($=s.slice(),h=$[0],d=$[1],_=a.call(o,h),isNaN(_)){for(Lt=0;d-h>Xt&&Lt<fr;)b=(d-h)*j+h,_=a.call(o,b),isNaN(_)?h=b:d=b,Lt++;c?$[0]=h:$[0]=d}if(h=$[0],d=$[1],_=a.call(o,d),isNaN(_)){for(Lt=0;d-h>Xt&&Lt<fr;)b=d-(d-h)*j,_=a.call(o,b),isNaN(_)?d=b:h=b,Lt++;c?$[1]=d:$[1]=h}return $},fminbr:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu=(3-Math.sqrt(5))*.5,Bo=Mat.eps,vu=Mat.eps,t1=this.maxIterationsMinimize,e1=0;if(!JXG$1.isArray(s)||s.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(Lt=this.findDomain(a,s,o),c=Lt[0],h=Lt[1],b=c+tu*(h-c),j=a.call(o,b),d=b,_=b,$=j,Xt=j;e1<t1;){if(fr=h-c,Jr=(c+h)*.5,Js=vu*Math.abs(d)+Bo/3,Math.abs(d-Jr)+fr*.5<=2*Js)return d;qs=tu*(d<Jr?h-d:c-d),Math.abs(d-_)>=Js&&(eu=(d-_)*($-j),js=(d-b)*($-Xt),zo=(d-b)*js-(d-_)*eu,js=2*(js-eu),js>0?zo=-zo:js=-js,Math.abs(zo)<Math.abs(qs*js)&&zo>js*(c-d+2*Js)&&zo<js*(h-d-2*Js)&&(qs=zo/js)),Math.abs(qs)<Js&&(qs>0?qs=Js:qs=-Js),eu=d+qs,Oo=a.call(o,eu),Oo<=$?(eu<d?h=d:c=d,b=_,_=d,d=eu,j=Xt,Xt=$,$=Oo):(eu<d?c=eu:h=eu,Oo<=Xt||_===d?(b=_,_=eu,j=Xt,Xt=Oo):(Oo<=j||b===d||b===_)&&(b=eu,j=Oo)),e1+=1}return d},glomin:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1=1e7,m1=Mat.eps,l1=Mat.eps*Mat.eps,f1=Mat.eps*Mat.eps*Mat.eps;if(a1=s[0],i1=s[1],s1=a(a1)<a(i1)?a1:i1,o=i1,c1=o,c=a1,eu=a(i1),vu=eu,tu=a(a1),js=tu,eu<js?js=eu:c1=a1,i1<=a1)return js;for(Xt=.5*(1+16*f1)*h1,s1<=a1||i1<=s1?zo=.5*(a1+i1):zo=s1,Oo=a(zo),j=3,d=c-zo,$=9/11,Oo<js&&(c1=zo,js=Oo);;){if(b=c-o,_=zo-o,r1=i1-c,t1=tu-Oo,e1=tu-eu,Js=b*b*t1-d*d*e1,Lt=Js,Jr=2*(d*e1-b*t1),fr=Jr,j<1e6||tu<=js)for(;fr*(Js*(vu-tu)+r1*fr*(tu-js+m1))<r1*Xt*Js*(r1*fr-Js)&&(h=c+Js/fr,Bo=a(h),Bo<js&&(c1=h,js=Bo)),j=1611*j%1048576,fr=1,Js=(i1-a1)*1e-5*j,!(r1<=Js););else for(j=1611*j%1048576,fr=1,Js=(i1-a1)*1e-5*j;Js<r1;)fr*(Js*(vu-tu)+r1*fr*(tu-js+m1))<r1*Xt*Js*(r1*fr-Js)&&(h=c+Js/fr,Bo=a(h),Bo<js&&(c1=h,js=Bo)),j=1611*j%1048576,fr=1,Js=(i1-a1)*1e-5*j;for(Js=Xt*d*b*_,qs=Math.sqrt((tu-js+m1)/Xt),$=.5*(1+$),Lt=$*(Lt+2*Js*qs),fr=fr+.5*Jr,Js=-.5*(d+(t1+2.01*l1)/(d*Xt)),Js<qs||d<0?Js=c+qs:Js=c+Js,0<Lt*fr?h=c+Lt/fr:h=Js;h=Math.max(h,Js),i1<=h?(h=i1,Bo=vu):Bo=a(h),Bo<js&&(c1=h,js=Bo),d=h-c,!(h<=Js||(Lt=2*(tu-Bo)/(h1*d),(1+9*f1)*d<=Math.abs(Lt))||.5*Xt*(d*d+Lt*Lt)<=tu-js+(Bo-js)+2*m1);)h=.5*(c+h),$=.9*$;if(i1<=h)break;o=zo,zo=c,c=h,eu=Oo,Oo=tu,tu=Bo}return[c1,js]},polzeros:function(a,s,o,c,h){var d,b,_,$=[],j=[],Xt=[],Lt=function(zo,js,eu){var Oo,tu,Bo=zo.length-1;if(eu=eu||!1,eu)for(tu=JXG$1.C.mult(Bo,zo[Bo]),Oo=Bo-1;Oo>0;Oo--)tu.mult(js),tu.add(JXG$1.C.mult(zo[Oo],Oo));else for(tu=JXG$1.C.copy(zo[Bo]),Oo=Bo-1;Oo>=0;Oo--)tu.mult(js),tu.add(zo[Oo]);return tu},fr=function(zo,js,eu){var Oo,tu,Bo=zo.length-1;if(eu=eu||!1,eu)for(tu=JXG$1.C.mult(Bo,zo[0]),Oo=Bo-1;Oo>0;Oo--)tu.mult(js),tu.add(JXG$1.C.mult(zo[Bo-Oo],Oo));else for(tu=JXG$1.C.copy(zo[0]),Oo=Bo-1;Oo>=0;Oo--)tu.mult(js),tu.add(zo[Bo-Oo]);return tu},Jr=function(zo,js){var eu,Oo,tu=zo.length-1;for(Oo=zo[tu],eu=tu-1;eu>=0;eu--)Oo=Oo*js+zo[eu];return Oo},Js=function(zo){var js,eu,Oo=zo.length-1,tu=Math.PI*2/Oo,Bo=Math.PI/Oo*.5,vu,t1,e1=[];for(vu=JXG$1.C.mult(-1,zo[Oo-1]),vu.div(JXG$1.C.mult(Oo,zo[Oo])),t1=JXG$1.C.div(Lt(zo,vu),zo[Oo]),eu=Math.pow(JXG$1.C.abs(t1),1/Oo),eu===0&&(eu=1),js=0;js<Oo;js++)zo=new JXG$1.Complex(eu*Math.cos(tu*js+Bo),eu*Math.sin(tu*js+Bo)),e1[js]=JXG$1.C.add(vu,zo);return e1},qs=function(zo,js,eu,Oo){var tu,Bo,vu,t1=[],e1=[],r1,a1,i1=0,s1,c1,h1,m1,l1=Oo.length;for(Bo=0;Bo<l1;Bo++)t1.push(!1);for(Bo=0;Bo<zo.length;Bo++)e1.push(JXG$1.C.abs(zo[Bo])*(4*Bo+1));for(tu=0;tu<eu&&i1<l1;tu++)for(Bo=0;Bo<l1;Bo++)if(!t1[Bo]){if(s1=Lt(zo,Oo[Bo]),a1=JXG$1.C.abs(Oo[Bo]),JXG$1.C.abs(s1)<js*Jr(e1,a1)){if(t1[Bo]=!0,i1++,i1===l1)break;continue}for(a1>1?(r1=JXG$1.C.div(1,Oo[Bo]),m1=fr(zo,r1,!0),m1.div(fr(zo,r1)),m1.mult(r1),s1=JXG$1.C.sub(l1,m1),s1=JXG$1.C.div(Oo[Bo],s1)):s1.div(Lt(zo,Oo[Bo],!0)),c1=new JXG$1.Complex(0),vu=0;vu<l1;vu++)vu!==Bo&&(h1=JXG$1.C.sub(Oo[Bo],Oo[vu]),h1=JXG$1.C.div(1,h1),c1.add(h1));c1.mult(s1),c1=JXG$1.C.sub(1,c1),s1.div(c1),Oo[Bo].sub(s1)}return tu};for(o=o||Number.EPSILON,c=c||30,b=a.length,JXG$1.isNumber(s)&&s>=0&&s<b-1&&(b=s+1),d=0;d<b;d++)$.push(new JXG$1.Complex(a[d]));for(d=0;d<b;d++)if($[d].real!==0||$[d].imaginary!==0){_=d;break}for(d=0;d<_;d++)j.push(new JXG$1.Complex(0));for($=$.slice(_),b=$.length,d=b-1;d>=0&&!($[d].real!==0||$[d].imaginary!==0);d--)$.pop();if(b=$.length,b===0)return[];if(h)for(d=0;d<b-1;d++)Xt.push(new JXG$1.Complex(h[d]));else Xt=Js($);return qs($,o,c,Xt),Xt=j.concat(Xt),Xt.sort(function(zo,js){return zo.real<js.real?-1:zo.real>js.real?1:0}),Xt},RamerDouglasPeucker:function(a,s){var o=[],c=[],h,d,b,_=!0,$=function(Xt,Lt,fr){var Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1=Mat.eps*Mat.eps,r1=1e4,a1=0,i1=Lt;if(fr-Lt<2)return[-1,0];if(qs=Xt[Lt].scrCoords,zo=Xt[fr].scrCoords,isNaN(qs[1])||isNaN(qs[2]))return[NaN,Lt];if(isNaN(zo[1])||isNaN(zo[2]))return[NaN,fr];for(Js=Lt+1;Js<fr;Js++){if(js=Xt[Js].scrCoords,isNaN(js[1])||isNaN(js[2]))return[NaN,Js];eu=js[1]-qs[1],Oo=js[2]-qs[2],tu=zo[1]-qs[1],Bo=zo[2]-qs[2],eu=eu===1/0?r1:eu,Oo=Oo===1/0?r1:Oo,tu=tu===1/0?r1:tu,Bo=Bo===1/0?r1:Bo,eu=eu===-1/0?-r1:eu,Oo=Oo===-1/0?-r1:Oo,tu=tu===-1/0?-r1:tu,Bo=Bo===-1/0?-r1:Bo,vu=tu*tu+Bo*Bo,vu>e1?(t1=(eu*tu+Oo*Bo)/vu,t1<0?t1=0:t1>1&&(t1=1),eu=eu-t1*tu,Oo=Oo-t1*Bo,Jr=eu*eu+Oo*Oo):(t1=0,Jr=eu*eu+Oo*Oo),Jr>a1&&(a1=Jr,i1=Js)}return[Math.sqrt(a1),i1]},j=function(Xt,Lt,fr,Jr,Js){var qs=$(Xt,Lt,fr),zo=qs[1];if(isNaN(qs[0])){j(Xt,Lt,zo-1,Jr,Js),Js.push(Xt[zo]);do++zo;while(zo<=fr&&isNaN(Xt[zo].scrCoords[1]+Xt[zo].scrCoords[2]));zo<=fr&&Js.push(Xt[zo]),j(Xt,zo+1,fr,Jr,Js)}else qs[0]>Jr?(j(Xt,Lt,zo,Jr,Js),j(Xt,zo,fr,Jr,Js)):Js.push(Xt[fr])};for(b=a.length,h=0;_;){for(;h<b&&isNaN(a[h].scrCoords[1]+a[h].scrCoords[2]);)h+=1;for(d=h+1;d<b&&!isNaN(a[d].scrCoords[1]+a[d].scrCoords[2]);)d+=1;if(d--,h<b&&d>h&&(c=[],c[0]=a[h],j(a,h,d,s,c),o=o.concat(c)),h>=b)break;d<b-1&&o.push(a[d+1]),h=d+1}return o},RamerDouglasPeuker:function(a,s){return JXG$1.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(a,s)},Visvalingam:function(a,s){var o,c,h,d,b=[],_=[],$=[],j,Xt,Lt,fr,Jr;if(c=a.length,c<=2)return a;for(b[0]={used:!0,lft:null,node:null},j=0,o=1;o<c-1;o++)h=Math.abs(JXG$1.Math.Numerics.det([a[o-1].usrCoords,a[o].usrCoords,a[o+1].usrCoords])),isNaN(h)||(Jr={v:h,idx:o},_.push(Jr),b[o]={used:!0,lft:j,node:Jr},b[j].rt=o,j=o);for(b[c-1]={used:!0,rt:null,lft:j,node:null},b[j].rt=c-1,d=-1/0;_.length>s;)_.sort(function(Js,qs){return qs.v-Js.v}),o=_.pop().idx,b[o].used=!1,d=b[o].node.v,j=b[o].lft,Xt=b[o].rt,b[j].rt=Xt,b[Xt].lft=j,Lt=b[j].lft,Lt!==null&&(h=Math.abs(JXG$1.Math.Numerics.det([a[Lt].usrCoords,a[j].usrCoords,a[Xt].usrCoords])),b[j].node.v=h>=d?h:d),fr=b[Xt].rt,fr!==null&&(h=Math.abs(JXG$1.Math.Numerics.det([a[j].usrCoords,a[Xt].usrCoords,a[fr].usrCoords])),b[Xt].node.v=h>=d?h:d);o=0,$=[a[o]];do o=b[o].rt,$.push(a[o]);while(b[o].rt!==null);return $}};const Numerics=Mat.Numerics;Mat.Geometry={};JXG$1.extend(Mat.Geometry,{angle:function(a,s,o){var c,h,d,b,_=[],$=[],j=[];return JXG$1.deprecated("Geometry.angle()","Geometry.rad()"),a.coords?(_[0]=a.coords.usrCoords[1],_[1]=a.coords.usrCoords[2]):(_[0]=a[0],_[1]=a[1]),s.coords?($[0]=s.coords.usrCoords[1],$[1]=s.coords.usrCoords[2]):($[0]=s[0],$[1]=s[1]),o.coords?(j[0]=o.coords.usrCoords[1],j[1]=o.coords.usrCoords[2]):(j[0]=o[0],j[1]=o[1]),c=_[0]-$[0],h=_[1]-$[1],d=j[0]-$[0],b=j[1]-$[1],Math.atan2(c*b-h*d,c*d+h*b)},trueAngle:function(a,s,o){return this.rad(a,s,o)*57.29577951308232},rad:function(a,s,o){var c,h,d,b,_,$,j;return a.coords?(c=a.coords.usrCoords[1],h=a.coords.usrCoords[2]):(c=a[0],h=a[1]),s.coords?(d=s.coords.usrCoords[1],b=s.coords.usrCoords[2]):(d=s[0],b=s[1]),o.coords?(_=o.coords.usrCoords[1],$=o.coords.usrCoords[2]):(_=o[0],$=o[1]),j=Math.atan2($-b,_-d)-Math.atan2(h-b,c-d),j<0&&(j+=6.283185307179586),j},angleBisector:function(a,s,o,c){var h,d,b,_=a.coords.usrCoords,$=s.coords.usrCoords,j=o.coords.usrCoords,Xt,Lt;return JXG$1.exists(c)||(c=a.board),$[0]===0?new Coords(Const.COORDS_BY_USER,[1,(_[1]+j[1])*.5,(_[2]+j[2])*.5],c):(Xt=_[1]-$[1],Lt=_[2]-$[2],h=Math.atan2(Lt,Xt),Xt=j[1]-$[1],Lt=j[2]-$[2],d=Math.atan2(Lt,Xt),b=(h+d)*.5,h>d&&(b+=Math.PI),Xt=Math.cos(b)+$[1],Lt=Math.sin(b)+$[2],new Coords(Const.COORDS_BY_USER,[1,Xt,Lt],c))},reflection:function(a,s,o){var c,h,d,b,_,$,j,Xt=s.coords.usrCoords,Lt=a.point1.coords.usrCoords,fr=a.point2.coords.usrCoords;return JXG$1.exists(o)||(o=s.board),_=fr[1]-Lt[1],$=fr[2]-Lt[2],c=Xt[1]-Lt[1],h=Xt[2]-Lt[2],j=(_*h-$*c)/(_*_+$*$),d=Xt[1]+2*j*$,b=Xt[2]-2*j*_,new Coords(Const.COORDS_BY_USER,[d,b],o)},rotation:function(a,s,o,c){var h,d,b,_,$,j,Xt=s.coords.usrCoords,Lt=a.coords.usrCoords;return JXG$1.exists(c)||(c=s.board),h=Xt[1]-Lt[1],d=Xt[2]-Lt[2],b=Math.cos(o),_=Math.sin(o),$=h*b-d*_+Lt[1],j=h*_+d*b+Lt[2],new Coords(Const.COORDS_BY_USER,[$,j],c)},perpendicular:function(a,s,o){var c,h,d,b,_,$=a.point1.coords.usrCoords,j=a.point2.coords.usrCoords,Xt=s.coords.usrCoords;return JXG$1.exists(o)||(o=s.board),s===a.point1?(c=$[1]+j[2]-$[2],h=$[2]-j[1]+$[1],_=$[0]*j[0],Math.abs(_)<Mat.eps&&(c=j[2],h=-j[1]),b=[_,c,h],d=!0):s===a.point2?(c=j[1]+$[2]-j[2],h=j[2]-$[1]+j[1],_=$[0]*j[0],Math.abs(_)<Mat.eps&&(c=$[2],h=-$[1]),b=[_,c,h],d=!1):Math.abs(Mat.innerProduct(Xt,a.stdform,3))<Mat.eps?(c=Xt[1]+j[2]-Xt[2],h=Xt[2]-j[1]+Xt[1],_=j[0],Math.abs(_)<Mat.eps&&(c=j[2],h=-j[1]),d=!0,Math.abs(_)>Mat.eps&&Math.abs(c-Xt[1])<Mat.eps&&Math.abs(h-Xt[2])<Mat.eps&&(c=Xt[1]+$[2]-Xt[2],h=Xt[2]-$[1]+Xt[1],d=!1),b=[_,c,h]):(b=[0,a.stdform[1],a.stdform[2]],b=Mat.crossProduct(b,Xt),b=Mat.crossProduct(b,a.stdform),d=!0),[new Coords(Const.COORDS_BY_USER,b,o),d]},circumcenterMidpoint:function(){JXG$1.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(a,s,o,c){var h,d,b,_,$=a.coords.usrCoords,j=s.coords.usrCoords,Xt=o.coords.usrCoords;return JXG$1.exists(c)||(c=a.board),h=[j[0]-$[0],-j[2]+$[2],j[1]-$[1]],d=[($[0]+j[0])*.5,($[1]+j[1])*.5,($[2]+j[2])*.5],b=Mat.crossProduct(h,d),h=[Xt[0]-j[0],-Xt[2]+j[2],Xt[1]-j[1]],d=[(j[0]+Xt[0])*.5,(j[1]+Xt[1])*.5,(j[2]+Xt[2])*.5],_=Mat.crossProduct(h,d),new Coords(Const.COORDS_BY_USER,Mat.crossProduct(b,_),c)},distance:function(a,s,o){var c,h=0;for(o||(o=Math.min(a.length,s.length)),c=0;c<o;c++)h+=(a[c]-s[c])*(a[c]-s[c]);return Math.sqrt(h)},affineDistance:function(a,s,o){var c;return c=this.distance(a,s,o),c>Mat.eps&&(Math.abs(a[0])<Mat.eps||Math.abs(s[0])<Mat.eps)?1/0:c},affineRatio:function(a,s,o){var c=0,h;return JXG$1.exists(a.usrCoords)&&(a=a.usrCoords),JXG$1.exists(s.usrCoords)&&(s=s.usrCoords),JXG$1.exists(o.usrCoords)&&(o=o.usrCoords),h=s[1]-a[1],Math.abs(h)>Mat.eps?c=(o[1]-a[1])/h:c=(o[2]-a[2])/(s[2]-a[2]),c},sortVertices:function(a){for(var s,o=Expect.each(a,Expect.coordsArray),c=o.length,h=null;o[0][0]===o[c-1][0]&&o[0][1]===o[c-1][1]&&o[0][2]===o[c-1][2];)h=o.pop(),c--;return s=o[0],o.sort(function(d,b){var _=d[2]===s[2]&&d[1]===s[1]?-1/0:Math.atan2(d[2]-s[2],d[1]-s[1]),$=b[2]===s[2]&&b[1]===s[1]?-1/0:Math.atan2(b[2]-s[2],b[1]-s[1]);return _-$}),h!==null&&o.push(h),o},signedTriangle:function(a,s,o){var c=Expect.coordsArray(a),h=Expect.coordsArray(s),d=Expect.coordsArray(o);return .5*((h[1]-c[1])*(d[2]-c[2])-(h[2]-c[2])*(d[1]-c[1]))},signedPolygon:function(a,s){var o,c,h=0,d=Expect.each(a,Expect.coordsArray);for(s===void 0&&(s=!0),s?d.unshift(d[d.length-1]):d=this.sortVertices(d),c=d.length,o=1;o<c;o++)h+=d[o-1][1]*d[o][2]-d[o][1]*d[o-1][2];return .5*h},GrahamScan:function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1=Mat.eps*Mat.eps,e1=this,r1=[],a1=[],i1=Expect.each(a,Expect.coordsArray),s1,c1=1024;if(s1=i1.length,s1===0)return[];if(s1>c1)for(d=i1[0][1],_=d,b=i1[0][2],$=b,Xt=i1[0][1]-i1[0][2],fr=Xt,j=i1[0][1]+i1[0][2],Lt=j,Jr=0,Js=0,qs=0,zo=0,eu=0,tu=0,js=0,Oo=0,s=1;s<s1;s++)Bo=i1[s][1],Bo<d?(d=Bo,Jr=s):Bo>_&&(_=Bo,Js=s),Bo=i1[s][2],Bo<b?(b=Bo,qs=s):Bo>$&&($=Bo,zo=s),Bo=i1[s][1]-i1[s][2],Bo<Xt?(Xt=Bo,eu=s):Bo>fr&&(fr=Bo,tu=s),Bo=i1[s][1]+i1[s][2],Bo<j?(j=Bo,js=s):Bo>Lt&&(Lt=Bo,Oo=s);for(s=0;s<s1;s++)vu=i1[s],(s1<=c1||s in[Jr,Js,qs,zo,js,eu,Oo,tu]||Jr!==eu&&this.signedTriangle(i1[Jr],i1[eu],vu)>=-t1||eu!==zo&&this.signedTriangle(i1[eu],i1[zo],vu)>=-t1||zo!==Oo&&this.signedTriangle(i1[zo],i1[Oo],vu)>=-t1||Oo!==Js&&this.signedTriangle(i1[Oo],i1[Js],vu)>=-t1||Js!==tu&&this.signedTriangle(i1[Js],i1[tu],vu)>=-t1||tu!==qs&&this.signedTriangle(i1[tu],i1[qs],vu)>=-t1||qs!==js&&this.signedTriangle(i1[qs],i1[js],vu)>=-t1||js!==Jr&&this.signedTriangle(i1[js],i1[Jr],vu)>=-t1)&&r1.push({i:s,c:vu});for(s1=r1.length,h=0,d=r1[0].c[1],b=r1[0].c[2],s=1;s<s1;s++)(r1[s].c[2]<b||r1[s].c[2]===b&&r1[s].c[1]<d)&&(d=r1[s].c[1],b=r1[s].c[2],h=s);for(r1=JXG$1.swap(r1,h,0),c=r1[0].c,r1.sort(function(h1,m1){var l1=h1.c,f1=m1.c,p1=e1.signedTriangle(c,l1,f1);return p1===0?Mat.hypot(l1[1]-c[1],l1[2]-c[2])-Mat.hypot(f1[1]-c[1],f1[2]-c[2]):-p1}),o=0,s=0;s<s1;s++){for(;o>1&&this.signedTriangle(a1[o-2].c,a1[o-1].c,r1[s].c)<=0;)a1.pop(),o--;a1.push(r1[s]),o++}return a1},convexHull:function(a,s){var o,c,h=[];for(c=this.GrahamScan(a),o=0;o<c.length;o++)s?h.push(c[o].c):h.push(a[c[o].i]);return h},isConvex:function(a){var s,o,c,h=Mat.eps*Mat.eps,d,b,_,$,j,Xt,Lt,fr,Jr=0;if(JXG$1.isArray(a)?s=Expect.each(a,Expect.coordsArray):JXG$1.exists(a.type)&&a.type===Const.OBJECT_TYPE_POLYGON&&(s=Expect.each(a.vertices,Expect.coordsArray)),o=s.length,o===0||o<3)return!0;for(fr=null,d=s[o-2][1],b=s[o-2][2],$=s[o-1][1],j=s[o-1][2],Xt=Math.atan2(j-b,$-d),c=0;c<o;c++)if(d=$,b=j,_=Xt,$=s[c][1],j=s[c][2],!(d===$&&b===j)){if(Xt=Math.atan2(j-b,$-d),Lt=Xt-_,Lt<=-Math.PI?Lt+=2*Math.PI:Lt>Math.PI&&(Lt-=2*Math.PI),fr===null){if(Lt===0)continue;fr=Lt>0?1:-1}else if(fr*Lt<-h)return!1;Jr+=Lt}return Math.abs(Jr/(2*Math.PI))-1<h},calcStraight:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr;JXG$1.exists(c)||(c=10),j=a.evalVisProp("straightfirst"),Xt=a.evalVisProp("straightlast"),Math.abs(s.scrCoords[0])<Mat.eps&&(j=!0),Math.abs(o.scrCoords[0])<Mat.eps&&(Xt=!0),!(!j&&!Xt)&&(Lt=[],Lt[0]=a.stdform[0]-a.stdform[1]*a.board.origin.scrCoords[1]/a.board.unitX+a.stdform[2]*a.board.origin.scrCoords[2]/a.board.unitY,Lt[1]=a.stdform[1]/a.board.unitX,Lt[2]=-a.stdform[2]/a.board.unitY,!isNaN(Lt[0]+Lt[1]+Lt[2])&&(h=!1,d=!1,h=!j&&Math.abs(s.usrCoords[0])>=Mat.eps&&s.scrCoords[1]>=0&&s.scrCoords[1]<=a.board.canvasWidth&&s.scrCoords[2]>=0&&s.scrCoords[2]<=a.board.canvasHeight,d=!Xt&&Math.abs(o.usrCoords[0])>=Mat.eps&&o.scrCoords[1]>=0&&o.scrCoords[1]<=a.board.canvasWidth&&o.scrCoords[2]>=0&&o.scrCoords[2]<=a.board.canvasHeight,b=this.meetLineBoard(Lt,a.board,c),_=b[0],$=b[1],!(!h&&!d&&(!j&&Xt&&!this.isSameDirection(s,o,_)&&!this.isSameDirection(s,o,$)||j&&!Xt&&!this.isSameDirection(o,s,_)&&!this.isSameDirection(o,s,$)))&&(h?d||(this.isSameDir(s,o,_,$)?Jr=$:Jr=_):d?this.isSameDir(s,o,_,$)?fr=_:fr=$:this.isSameDir(s,o,_,$)?(fr=_,Jr=$):(Jr=_,fr=$),fr&&s.setCoordinates(Const.COORDS_BY_USER,fr.usrCoords),Jr&&o.setCoordinates(Const.COORDS_BY_USER,Jr.usrCoords))))},calcLineDelimitingPoints:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr=!1,Js=!1;$=a.evalVisProp("straightfirst"),j=a.evalVisProp("straightlast"),Math.abs(s.scrCoords[0])<Mat.eps&&($=!0),Math.abs(o.scrCoords[0])<Mat.eps&&(j=!0),Xt=[],Xt[0]=a.stdform[0]-a.stdform[1]*a.board.origin.scrCoords[1]/a.board.unitX+a.stdform[2]*a.board.origin.scrCoords[2]/a.board.unitY,Xt[1]=a.stdform[1]/a.board.unitX,Xt[2]=-a.stdform[2]/a.board.unitY,!isNaN(Xt[0]+Xt[1]+Xt[2])&&(Jr=!$,Js=!j,h=a.board.getBoundingBox(),d=a.getSlope(),d>=0?(b=this.projectPointToLine({coords:{usrCoords:[1,h[2],h[1]]}},a,a.board),_=this.projectPointToLine({coords:{usrCoords:[1,h[0],h[3]]}},a,a.board)):(b=this.projectPointToLine({coords:{usrCoords:[1,h[0],h[1]]}},a,a.board),_=this.projectPointToLine({coords:{usrCoords:[1,h[2],h[3]]}},a,a.board)),!(!Jr&&!Js&&(!$&&!j&&(c=s.distance(Const.COORDS_BY_USER,o),Math.abs(s.distance(Const.COORDS_BY_USER,b)+b.distance(Const.COORDS_BY_USER,o)-c)>Mat.eps||Math.abs(s.distance(Const.COORDS_BY_USER,_)+_.distance(Const.COORDS_BY_USER,o)-c)>Mat.eps)||!$&&j&&!this.isSameDirection(s,o,b)&&!this.isSameDirection(s,o,_)||$&&!j&&!this.isSameDirection(o,s,b)&&!this.isSameDirection(o,s,_)))&&(Jr?Js||(this.isSameDir(s,o,b,_)?fr=_:fr=b):Js?this.isSameDir(s,o,b,_)?Lt=b:Lt=_:this.isSameDir(s,o,b,_)?(Lt=b,fr=_):(fr=b,Lt=_),Lt&&s.setCoordinates(Const.COORDS_BY_USER,Lt.usrCoords),fr&&o.setCoordinates(Const.COORDS_BY_USER,fr.usrCoords)))},calcLabelQuadrant:function(a){var s;return a<0&&(a+=2*Math.PI),s=Math.floor((a+Math.PI/8)/(Math.PI/4))%8,["rt","urt","top","ulft","lft","llft","lrt"][s]},isSameDir:function(a,s,o,c){var h=s.usrCoords[1]-a.usrCoords[1],d=s.usrCoords[2]-a.usrCoords[2],b=c.usrCoords[1]-o.usrCoords[1],_=c.usrCoords[2]-o.usrCoords[2];return Math.abs(s.usrCoords[0])<Mat.eps&&(h=s.usrCoords[1],d=s.usrCoords[2]),Math.abs(a.usrCoords[0])<Mat.eps&&(h=-a.usrCoords[1],d=-a.usrCoords[2]),h*b+d*_>=0},isSameDirection:function(a,s,o){var c,h,d,b,_=!1;return c=s.usrCoords[1]-a.usrCoords[1],h=s.usrCoords[2]-a.usrCoords[2],d=o.usrCoords[1]-a.usrCoords[1],b=o.usrCoords[2]-a.usrCoords[2],Math.abs(c)<Mat.eps&&(c=0),Math.abs(h)<Mat.eps&&(h=0),Math.abs(d)<Mat.eps&&(d=0),Math.abs(b)<Mat.eps&&(b=0),(c>=0&&d>=0||c<=0&&d<=0)&&(_=h>=0&&b>=0||h<=0&&b<=0),_},det3p:function(a,s,o){var c,h,d;return JXG$1.isPoint(a)?c=a.Coords(!0):c=a,JXG$1.isPoint(s)?h=s.Coords(!0):h=s,JXG$1.isPoint(o)?d=o.Coords(!0):d=o,(c[1]-d[1])*(h[2]-d[2])-(h[1]-d[1])*(c[2]-d[2])},windingNumber:function(a,s,o){var c=0,h=s.length,d=a[1],b=a[2],_,$,j,Xt,Lt,fr,Jr=0;if(h===0)return 0;if(o=o||!1,o&&(Jr=1),isNaN(d)||isNaN(b)||(JXG$1.exists(s[0].coords)?(_=s[0].coords,$=s[h-1].coords):(_=s[0],$=s[h-1]),_.usrCoords[1]===d&&_.usrCoords[2]===b))return 1;for(fr=0;fr<h-Jr;fr++)if(JXG$1.exists(s[fr].coords)?($=s[fr].coords.usrCoords,j=s[(fr+1)%h].coords.usrCoords):($=s[fr].usrCoords,j=s[(fr+1)%h].usrCoords),!($[0]===0||j[0]===0||isNaN($[1])||isNaN(j[1])||isNaN($[2])||isNaN(j[2]))){if(j[2]===b){if(j[1]===d)return 1;if($[2]===b&&j[1]>d==$[1]<d)return 0}if($[2]<b!=j[2]<b)if(Lt=2*(j[2]>$[2]?1:0)-1,$[1]>=d)if(j[1]>d)c+=Lt;else{if(Xt=this.det3p($,j,a),Xt===0)return 0;Xt>0+Mat.eps==j[2]>$[2]&&(c+=Lt)}else j[1]>d&&(Xt=this.det3p($,j,a),Xt>0+Mat.eps==j[2]>$[2]&&(c+=Lt))}return c},pnpoly:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr,Jr=o,Js=!1;for(c===Const.COORDS_BY_USER?(fr=new Coords(Const.COORDS_BY_USER,[a,s],h),Xt=fr.scrCoords[1],Lt=fr.scrCoords[2]):(Xt=a,Lt=s),j=o.length,d=0,b=j-2;d<j-1;b=d++)_=JXG$1.exists(Jr[d].coords)?Jr[d].coords:Jr[d],$=JXG$1.exists(Jr[b].coords)?Jr[b].coords:Jr[b],_.scrCoords[2]>Lt!=$.scrCoords[2]>Lt&&Xt<($.scrCoords[1]-_.scrCoords[1])*(Lt-_.scrCoords[2])/($.scrCoords[2]-_.scrCoords[2])+_.scrCoords[1]&&(Js=!Js);return Js},intersectionFunction:function(a,s,o,c,h,d){var b,_=this,$=!1,j=!1;return $=s.elementClass===Const.OBJECT_CLASS_CURVE&&(s.type===Const.OBJECT_TYPE_ARC||s.type===Const.OBJECT_TYPE_SECTOR),j=o.elementClass===Const.OBJECT_CLASS_CURVE&&(o.type===Const.OBJECT_TYPE_ARC||o.type===Const.OBJECT_TYPE_SECTOR),(s.elementClass===Const.OBJECT_CLASS_CURVE||o.elementClass===Const.OBJECT_CLASS_CURVE)&&(s.elementClass===Const.OBJECT_CLASS_CURVE||s.elementClass===Const.OBJECT_CLASS_CIRCLE)&&(o.elementClass===Const.OBJECT_CLASS_CURVE||o.elementClass===Const.OBJECT_CLASS_CIRCLE)?b=function(){return _.meetCurveCurve(s,o,c,h,s.board)}:s.elementClass===Const.OBJECT_CLASS_CURVE&&!$&&o.elementClass===Const.OBJECT_CLASS_LINE||o.elementClass===Const.OBJECT_CLASS_CURVE&&!j&&s.elementClass===Const.OBJECT_CLASS_LINE?b=function(){return _.meetCurveLine(s,o,c,s.board,JXG$1.evaluate(d))}:s.type===Const.OBJECT_TYPE_POLYGON||o.type===Const.OBJECT_TYPE_POLYGON?s.elementClass===Const.OBJECT_CLASS_LINE?b=function(){var Xt=s.evalVisProp("straightfirst"),Lt=s.evalVisProp("straightlast"),fr=o.evalVisProp("straightfirst"),Jr=o.evalVisProp("straightlast"),Js;return Js=!JXG$1.evaluate(d)&&(!Xt||!Lt||!fr||!Jr),_.meetPolygonLine(o,s,c,s.board,Js)}:o.elementClass===Const.OBJECT_CLASS_LINE?b=function(){var Xt=s.evalVisProp("straightfirst"),Lt=s.evalVisProp("straightlast"),fr=o.evalVisProp("straightfirst"),Jr=o.evalVisProp("straightlast"),Js;return Js=!JXG$1.evaluate(d)&&(!Xt||!Lt||!fr||!Jr),_.meetPolygonLine(s,o,c,s.board,Js)}:b=function(){return _.meetPathPath(s,o,c,s.board)}:s.elementClass===Const.OBJECT_CLASS_LINE&&o.elementClass===Const.OBJECT_CLASS_LINE?b=function(){var Xt,Lt,fr=s.evalVisProp("straightfirst"),Jr=s.evalVisProp("straightlast"),Js=o.evalVisProp("straightfirst"),qs=o.evalVisProp("straightlast");return!JXG$1.evaluate(d)&&(!fr||!Jr||!Js||!qs)?(Xt=_.meetSegmentSegment(s.point1.coords.usrCoords,s.point2.coords.usrCoords,o.point1.coords.usrCoords,o.point2.coords.usrCoords),!fr&&Xt[1]<0||!Jr&&Xt[1]>1||!Js&&Xt[2]<0||!qs&&Xt[2]>1?Lt=[0,NaN,NaN]:Lt=Xt[0],new Coords(Const.COORDS_BY_USER,Lt,s.board)):_.meet(s.stdform,o.stdform,c,s.board)}:b=function(){var Xt=_.meet(s.stdform,o.stdform,c,s.board),Lt=!0,fr,Jr,Js;return JXG$1.evaluate(d)?Xt:s.elementClass===Const.OBJECT_CLASS_LINE&&(fr=s.evalVisProp("straightfirst"),Jr=s.evalVisProp("straightlast"),(!fr||!Jr)&&(Js=_.affineRatio(s.point1.coords,s.point2.coords,Xt),!Jr&&Js>1+Mat.eps||!fr&&Js<0-Mat.eps))?new Coords(JXG$1.COORDS_BY_USER,[0,NaN,NaN],s.board):o.elementClass===Const.OBJECT_CLASS_LINE&&(fr=o.evalVisProp("straightfirst"),Jr=o.evalVisProp("straightlast"),(!fr||!Jr)&&(Js=_.affineRatio(o.point1.coords,o.point2.coords,Xt),!Jr&&Js>1+Mat.eps||!fr&&Js<0-Mat.eps))?new Coords(JXG$1.COORDS_BY_USER,[0,NaN,NaN],s.board):$&&(Lt=_.coordsOnArc(s,Xt),Lt&&j&&(Lt=_.coordsOnArc(o,Xt)),!Lt)?new Coords(JXG$1.COORDS_BY_USER,[0,NaN,NaN],s.board):Xt},b},otherIntersectionFunction:function(a,s,o,c){var h,d,b,_,$=this;return b=a[0],_=a[1],d=b.board,h=function(){var j,Xt,Lt,fr,Jr,Js=s.length,qs=JXG$1.evaluate(c);for(j=Js;j>=0;j--)if(b.elementClass===Const.OBJECT_CLASS_CIRCLE&&[Const.OBJECT_CLASS_CIRCLE,Const.OBJECT_CLASS_LINE].indexOf(_.elementClass)>=0?Lt=$.meet(b.stdform,_.stdform,j,d):b.elementClass===Const.OBJECT_CLASS_CURVE&&[Const.OBJECT_CLASS_CURVE,Const.OBJECT_CLASS_CIRCLE].indexOf(_.elementClass)>=0?Lt=$.meetCurveCurve(b,_,j,0,d):b.elementClass===Const.OBJECT_CLASS_CURVE&&_.elementClass===Const.OBJECT_CLASS_LINE&&(JXG$1.exists(b.dataX)?Lt=JXG$1.Math.Geometry.meetCurveLine(b,_,j,b.board,JXG$1.evaluate(o)):Lt=JXG$1.Math.Geometry.meetCurveLineContinuous(b,_,j,b.board)),Lt!==void 0){for(Jr=!1,Xt=0;!Jr&&Xt<Js;Xt++)JXG$1.exists(Lt)&&JXG$1.exists(Lt.distance)&&(fr=Lt.distance(JXG$1.COORDS_BY_USER,s[Xt].coords),fr<qs&&(Jr=!0));if(!Jr)return Lt}return Lt},h},coordsOnArc:function(a,s){var o=this.rad(a.radiuspoint,a.center,s.usrCoords.slice(1)),c=0,h=this.rad(a.radiuspoint,a.center,a.anglepoint),d=a.evalVisProp("selection");return(d==="minor"&&h>Math.PI||d==="major"&&h<Math.PI)&&(c=h,h=2*Math.PI),!(o<c||o>h)},meet:function(a,s,o,c){var h,d=Mat.eps;return Math.abs(a[3])<d&&Math.abs(s[3])<d?h=this.meetLineLine(a,s,o,c):Math.abs(a[3])>=d&&Math.abs(s[3])<d?h=this.meetLineCircle(s,a,o,c):Math.abs(a[3])<d&&Math.abs(s[3])>=d?h=this.meetLineCircle(a,s,o,c):h=this.meetCircleCircle(a,s,o,c),h},meetLineBoard:function(a,s,o){var c=[],h,d,b,_;for(JXG$1.exists(o)||(o=0),c[0]=Mat.crossProduct(a,[o,0,1]),c[1]=Mat.crossProduct(a,[o,1,0]),c[2]=Mat.crossProduct(a,[-o-s.canvasHeight,0,1]),c[3]=Mat.crossProduct(a,[-o-s.canvasWidth,1,0]),b=0;b<4;b++)if(Math.abs(c[b][0])>Mat.eps){for(_=2;_>0;_--)c[b][_]/=c[b][0];c[b][0]=1}return Math.abs(c[1][0])<Mat.eps?(h=c[0],d=c[2]):Math.abs(c[0][0])<Mat.eps?(h=c[1],d=c[3]):c[1][2]<0?(h=c[0],c[3][2]>s.canvasHeight?d=c[2]:d=c[3]):c[1][2]>s.canvasHeight?(h=c[2],c[3][2]<0?d=c[0]:d=c[3]):(h=c[1],c[3][2]<0?d=c[0]:c[3][2]>s.canvasHeight?d=c[2]:d=c[3]),[new Coords(Const.COORDS_BY_SCREEN,h.slice(1),s),new Coords(Const.COORDS_BY_SCREEN,d.slice(1),s)]},meetLineLine:function(a,s,o,c){var h=isNaN(a[5]+s[5])?[0,0,0]:Mat.crossProduct(a,s);return Math.abs(h[0])<1e-14&&(h[0]=0),new Coords(Const.COORDS_BY_USER,h,c)},meetLineCircle:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr;return s[4]<Mat.eps?Math.abs(Mat.innerProduct([1,s[6],s[7]],a,3))<Mat.eps?new Coords(Const.COORDS_BY_USER,s.slice(6,8),c):new Coords(Const.COORDS_BY_USER,[NaN,NaN],c):(b=s[0],d=s.slice(1,3),h=s[3],_=a[0],$=a.slice(1,3),j=h,Xt=d[0]*$[1]-d[1]*$[0],Lt=h*_*_-(d[0]*$[0]+d[1]*$[1])*_+b,fr=Xt*Xt-4*j*Lt,fr>-Mat.eps*Mat.eps?(fr=Math.sqrt(Math.abs(fr)),Jr=[(-Xt+fr)/(2*j),(-Xt-fr)/(2*j)],JXG$1.evaluate(o)===0?new Coords(Const.COORDS_BY_USER,[-Jr[0]*-$[1]-_*$[0],-Jr[0]*$[0]-_*$[1]],c):new Coords(Const.COORDS_BY_USER,[-Jr[1]*-$[1]-_*$[0],-Jr[1]*$[0]-_*$[1]],c)):new Coords(Const.COORDS_BY_USER,[0,0,0],c))},meetCircleCircle:function(a,s,o,c){var h;return a[4]<Mat.eps?Math.abs(this.distance(a.slice(6,2),s.slice(6,8))-s[4])<Mat.eps?new Coords(Const.COORDS_BY_USER,a.slice(6,8),c):new Coords(Const.COORDS_BY_USER,[0,0,0],c):s[4]<Mat.eps?Math.abs(this.distance(s.slice(6,2),a.slice(6,8))-a[4])<Mat.eps?new Coords(Const.COORDS_BY_USER,s.slice(6,8),c):new Coords(Const.COORDS_BY_USER,[0,0,0],c):(h=[s[3]*a[0]-a[3]*s[0],s[3]*a[1]-a[3]*s[1],s[3]*a[2]-a[3]*s[2],0,1,1/0,1/0,1/0],h=Mat.normalize(h),this.meetLineCircle(h,a,o,c))},meetCurveCurveDiscrete:function(a,s,o,c){var h,d=JXG$1.evaluate(o);return a.bezierDegree===3||s.bezierDegree===3?h=this.meetBezierCurveRedBlueSegments(a,s,d):h=this.meetCurveRedBlueSegments(a,s,d),new Coords(Const.COORDS_BY_USER,h,c)},meetCurveCurveNewton:function(a,s,o,c,h){var d,b,_,$,j=(Math.sqrt(5)-1)*.5,Xt=.85,Lt=Mat.eps*Mat.eps*Mat.eps,fr=Mat.eps*Mat.eps,Jr=a.maxX(),Js=a.minX(),qs=s.maxX(),zo=s.minX(),js=function(Oo,tu){var Bo=a.Ft(Oo[0]),vu=s.Ft(Oo[1]),t1=Bo[1]-vu[1],e1=Bo[2]-vu[2];return[t1,e1]},eu=function(Oo,tu){var Bo=Mat.eps,vu=2*Bo,t1=a.Ft(Oo[0]-Bo),e1=a.Ft(Oo[0]+Bo),r1=s.Ft(Oo[1]-Bo),a1=s.Ft(Oo[1]+Bo);return[[(e1[1]-t1[1])/vu,-(a1[1]-r1[1])/vu],[(e1[2]-t1[2])/vu,-(a1[2]-r1[2])/vu]]};return d=o[0]+(o[1]-o[0])*(1-j),b=c[0]+(c[1]-c[0])*(1-j),$=Numerics.generalizedDampedNewton(js,eu,2,[d,b],Xt,Lt,40),d=$[0][0],b=$[0][1],_=a.Ft(d),d<o[0]-Mat.eps||d>o[1]+Mat.eps||b<c[0]-Mat.eps||b>c[1]+Mat.eps||h&&(d<Js-fr||d>Jr+fr||b<zo-fr||b>qs+fr)?[_,d,b,1e4]:[_,d,b,$[1]]},_meetCurveCurveIterative:function(a,s,o,c,h,d){var b,_,$,j,Xt,Lt,fr=Mat.eps*100,Jr,Js,qs=20,zo,js,eu=[];if($=o[0],Xt=o[1],j=c[0],Lt=c[1],Xt<$||Lt<j)return[];for(zo=(Xt-$)/qs,js=(Lt-j)/qs,Jr=0;Jr<qs;Jr++)for(Js=0;Js<qs;Js++)if(b=this.meetCurveCurveNewton(a,s,[$+Jr*zo,$+(Jr+1)*zo],[j+Js*js,j+(Js+1)*js],d),b[3]<Mat.eps&&(_=b[1],eu=eu.concat([_]),eu=JXG$1.toUniqueArrayFloat(eu,fr),eu.length>h))return eu;return eu},meetCurveCurve:function(a,s,o,c,h,d,b){var _,$,j,Xt,Lt,fr,Jr=JXG$1.evaluate(o);if(h=h||a.board,d==="segment"||JXG$1.exists(a.dataX)||JXG$1.exists(s.dataX))return this.meetCurveCurveDiscrete(a,s,Jr,h);if(JXG$1.exists(d)&&d==="newton"&&Jr<0||parseInt(Jr)!==Jr)return _=Numerics.generalizedNewton(a,s,Jr,c),new Coords(Const.COORDS_BY_USER,_,h);if(j=a.minX(),Xt=a.maxX(),Lt=s.minX(),fr=s.maxX(),$=this._meetCurveCurveIterative(a,s,[j,Xt],[Lt,fr],Jr,b),$.length>Jr)_=a.Ft($[Jr]);else return[0,NaN,NaN];return new Coords(Const.COORDS_BY_USER,_,h)},meetCurveLine:function(a,s,o,c,h){var d=[0,NaN,NaN],b,_;return JXG$1.exists(c)||(c=a.board),a.elementClass===Const.OBJECT_CLASS_CURVE?(b=a,_=s):(b=s,_=a),JXG$1.exists(b.dataX)?d=this.meetCurveLineDiscrete(b,_,o,c,!h):d=this.meetCurveCurve(b,_,o,0,c,"newton",!h),d},meetCurveLineContinuous:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr=Mat.eps,Jr=Mat.eps,Js,qs,zo,js,eu,Oo,tu;for($=this.meetCurveLineDiscrete(a,s,o,c,h),j=$.usrCoords[1],Xt=$.usrCoords[2],d=function(Bo){var vu,t1;return Bo>a.maxX()||Bo<a.minX()?1/0:(vu=a.X(Bo)-j,t1=a.Y(Bo)-Xt,vu*vu+t1*t1)},b=function(Bo){var vu=s.stdform[0]+s.stdform[1]*a.X(Bo)+s.stdform[2]*a.Y(Bo);return vu*vu},Js=50,qs=(a.maxX()-a.minX())/Js,zo=a.minX(),eu=1e-4,js=NaN,Oo=0;Oo<Js&&(_=Numerics.root(d,[Math.max(zo,a.minX()),Math.min(zo+qs,a.maxX())]),tu=Math.abs(d(_)),!(tu<=eu&&(eu=tu,js=_,eu<fr)));Oo++)zo+=qs;return _=js,_=Numerics.root(b,[Math.max(_-qs,a.minX()),Math.min(_+qs,a.maxX())]),tu=b(_),isNaN(tu)||Math.abs(tu)>Jr?Lt=0:Lt=1,new Coords(Const.COORDS_BY_USER,[Lt,a.X(_),a.Y(_)],c)},meetCurveLineDiscrete:function(a,s,o,c,h){var d,b,_=JXG$1.evaluate(o),$,j,Xt,Lt,fr=s.point1.coords.usrCoords,Jr=s.point2.coords.usrCoords,Js,qs,zo=0,js=a.numberPoints,eu=s.evalVisProp("straightfirst"),Oo=s.evalVisProp("straightlast");for(Lt=new Coords(Const.COORDS_BY_USER,[0,NaN,NaN],c),fr[0]===0?fr=[1,Jr[1]+s.stdform[2],Jr[2]-s.stdform[1]]:Jr[0]===0&&(Jr=[1,fr[1]+s.stdform[2],fr[2]-s.stdform[1]]),j=a.points[0].usrCoords,d=1;d<js;d+=a.bezierDegree)if($=j.slice(0),j=a.points[d].usrCoords,Js=this.distance($,j),Js>Mat.eps){for(a.bezierDegree===3?qs=this.meetBeziersegmentBeziersegment([a.points[d-1].usrCoords.slice(1),a.points[d].usrCoords.slice(1),a.points[d+1].usrCoords.slice(1),a.points[d+2].usrCoords.slice(1)],[fr.slice(1),Jr.slice(1)],h):qs=[this.meetSegmentSegment($,j,fr,Jr)],b=0;b<qs.length;b++)if(Xt=qs[b],0<=Xt[1]&&Xt[1]<=1){if(zo===_)return h&&(!eu&&Xt[2]<0||!Oo&&Xt[2]>1)||(Lt=new Coords(Const.COORDS_BY_USER,Xt[0],c)),Lt;zo+=1}}return Lt},meetCurveRedBlueSegments:function(a,s,o){var c,h,d=JXG$1.evaluate(o),b,_,$,j,Xt,Lt,fr,Jr=0,Js=s.numberPoints,qs=a.numberPoints;if(Js<=1||qs<=1)return[0,NaN,NaN];for(c=1;c<qs;c++)for(b=a.points[c-1].usrCoords,_=a.points[c].usrCoords,Lt=Math.min(b[1],_[1]),fr=Math.max(b[1],_[1]),j=s.points[0].usrCoords,h=1;h<Js;h++)if($=j,j=s.points[h].usrCoords,Math.min($[1],j[1])<fr&&Math.max($[1],j[1])>Lt&&(Xt=this.meetSegmentSegment(b,_,$,j),Xt[1]>=0&&Xt[2]>=0&&(Xt[1]<1&&Xt[2]<1||c===qs-1&&Xt[1]===1||h===Js-1&&Xt[2]===1))){if(Jr===d)return Xt[0];Jr++}return[0,NaN,NaN]},meetSegmentSegment:function(a,s,o,c){var h,d,b,_,$=Mat.crossProduct(a,s),j=Mat.crossProduct(o,c),Xt=Mat.crossProduct($,j);return Math.abs(Xt[0])<Mat.eps?[Xt,1/0,1/0]:(Xt[1]/=Xt[0],Xt[2]/=Xt[0],Xt[0]/=Xt[0],b=Math.abs(s[1]-s[0]*a[1])<Mat.eps?2:1,_=a[b]/a[0],h=(Xt[b]-_)/(s[0]!==0?s[b]/s[0]-_:s[b]),b=Math.abs(c[1]-c[0]*o[1])<Mat.eps?2:1,_=o[b]/o[0],d=(Xt[b]-_)/(c[0]!==0?c[b]/c[0]-_:c[b]),[Xt,h,d])},meetPathPath:function(a,s,o,c){var h,d,b,_,$=JXG$1.evaluate(o);return h=JXG$1.Math.Clip._getPath(a,c),b=h.length,b>0&&this.distance(h[0].coords.usrCoords,h[b-1].coords.usrCoords,3)<Mat.eps&&h.pop(),d=JXG$1.Math.Clip._getPath(s,c),b=d.length,b>0&&this.distance(d[0].coords.usrCoords,d[b-1].coords.usrCoords,3)<Mat.eps*Mat.eps&&d.pop(),o<0||JXG$1.Math.Clip.isEmptyCase(h,d,"intersection")?new Coords(Const.COORDS_BY_USER,[0,0,0],c):(JXG$1.Math.Clip.makeDoublyLinkedList(h),JXG$1.Math.Clip.makeDoublyLinkedList(d),_=JXG$1.Math.Clip.findIntersections(h,d,c)[0],$<_.length?_[$].coords:new Coords(Const.COORDS_BY_USER,[0,0,0],c))},meetPolygonLine:function(a,s,o,c,h){var d,b=JXG$1.evaluate(o),_,$,j=[0,0,0],Xt=a.borders.length,Lt=[];for(d=0;d<Xt;d++)$=a.borders[d],_=this.meetSegmentSegment($.point1.coords.usrCoords,$.point2.coords.usrCoords,s.point1.coords.usrCoords,s.point2.coords.usrCoords),(!h||_[2]>=0&&_[2]<1)&&_[1]>=0&&_[1]<1&&Lt.push(_[0]);return b>=0&&b<Lt.length&&(j=Lt[b]),new Coords(Const.COORDS_BY_USER,j,c)},_bezierSplit:function(a){var s,o,c,h,d,b;return s=[(a[0][0]+a[1][0])*.5,(a[0][1]+a[1][1])*.5],o=[(a[1][0]+a[2][0])*.5,(a[1][1]+a[2][1])*.5],c=[(a[2][0]+a[3][0])*.5,(a[2][1]+a[3][1])*.5],h=[(s[0]+o[0])*.5,(s[1]+o[1])*.5],d=[(o[0]+c[0])*.5,(o[1]+c[1])*.5],b=[(h[0]+d[0])*.5,(h[1]+d[1])*.5],[[a[0],s,h,b],[b,d,c,a[3]]]},_bezierBbox:function(a){var s=[];return a.length===4?(s[0]=Math.min(a[0][0],a[1][0],a[2][0],a[3][0]),s[1]=Math.max(a[0][1],a[1][1],a[2][1],a[3][1]),s[2]=Math.max(a[0][0],a[1][0],a[2][0],a[3][0]),s[3]=Math.min(a[0][1],a[1][1],a[2][1],a[3][1])):(s[0]=Math.min(a[0][0],a[1][0]),s[1]=Math.max(a[0][1],a[1][1]),s[2]=Math.max(a[0][0],a[1][0]),s[3]=Math.min(a[0][1],a[1][1])),s},_bezierOverlap:function(a,s){return a[2]>=s[0]&&a[0]<=s[2]&&a[1]>=s[3]&&a[3]<=s[1]},_bezierListConcat:function(a,s,o,c){var h,d=JXG$1.exists(c),b=0,_=s.length,$=a.length;for($>0&&_>0&&(a[$-1][1]===1&&s[0][1]===0||d&&a[$-1][2]===1&&s[0][2]===0)&&(b=1),h=b;h<_;h++)d&&(s[h][2]*=.5,s[h][2]+=c),s[h][1]*=.5,s[h][1]+=o,a.push(s[h])},_bezierMeetSubdivision:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs=[],zo=5;return h=this._bezierBbox(s),c=this._bezierBbox(a),this._bezierOverlap(h,c)?o<zo?(d=this._bezierSplit(a),$=d[0],j=d[1],d=this._bezierSplit(s),b=d[0],_=d[1],this._bezierListConcat(qs,this._bezierMeetSubdivision($,b,o+1),0,0),this._bezierListConcat(qs,this._bezierMeetSubdivision($,_,o+1),0,.5),this._bezierListConcat(qs,this._bezierMeetSubdivision(j,b,o+1),.5,0),this._bezierListConcat(qs,this._bezierMeetSubdivision(j,_,o+1),.5,.5),qs):(Jr=[1].concat(a[0]),Js=[1].concat(a[3]),Lt=[1].concat(s[0]),fr=[1].concat(s[3]),Xt=this.meetSegmentSegment(Jr,Js,Lt,fr),Xt[1]>=0&&Xt[2]>=0&&Xt[1]<=1&&Xt[2]<=1?[Xt]:[]):[]},_bezierLineMeetSubdivision:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr,Js=[],qs=5;return h=this._bezierBbox(s),d=this._bezierBbox(a),c&&!this._bezierOverlap(d,h)?[]:o<qs?(b=this._bezierSplit(a),_=b[0],$=b[1],this._bezierListConcat(Js,this._bezierLineMeetSubdivision(_,s,o+1),0),this._bezierListConcat(Js,this._bezierLineMeetSubdivision($,s,o+1),.5),Js):(fr=[1].concat(a[0]),Jr=[1].concat(a[3]),Xt=[1].concat(s[0]),Lt=[1].concat(s[1]),j=this.meetSegmentSegment(fr,Jr,Xt,Lt),j[1]>=0&&j[1]<=1&&(!c||j[2]>=0&&j[2]<=1)?[j]:[])},meetBeziersegmentBeziersegment:function(a,s,o){var c,h,d;for(a.length===4&&s.length===4?c=this._bezierMeetSubdivision(a,s,0):c=this._bezierLineMeetSubdivision(a,s,0,o),c.sort(function(b,_){return(b[1]-_[1])*1e7+(b[2]-_[2])}),h=[],d=0;d<c.length;d++)(d===0||c[d][1]!==c[d-1][1]||c[d][2]!==c[d-1][2])&&h.push(c[d]);return h},meetBezierCurveRedBlueSegments:function(a,s,o){var c,h,d,b,_=JXG$1.evaluate(o),$,j,Xt,Lt,fr,Jr,Js,qs=0,zo=0,js,eu,Oo=[];if(s.numberPoints<s.bezierDegree+1||a.numberPoints<a.bezierDegree+1)return[0,NaN,NaN];for(a.bezierDegree===1&&s.bezierDegree===3&&(j=a,a=s,s=j),js=s.numberPoints-s.bezierDegree,eu=a.numberPoints-a.bezierDegree,a.type===Const.OBJECT_TYPE_SECTOR&&(qs=3,eu-=3),s.type===Const.OBJECT_TYPE_SECTOR&&(zo=3,js-=3),h=qs;h<eu;h+=a.bezierDegree)for(c=a.points,Xt=[c[h].usrCoords.slice(1),c[h+1].usrCoords.slice(1)],a.bezierDegree===3&&(Xt[2]=c[h+2].usrCoords.slice(1),Xt[3]=c[h+3].usrCoords.slice(1)),fr=this._bezierBbox(Xt),d=zo;d<js;d+=s.bezierDegree)if(c=s.points,Lt=[c[d].usrCoords.slice(1),c[d+1].usrCoords.slice(1)],s.bezierDegree===3&&(Lt[2]=c[d+2].usrCoords.slice(1),Lt[3]=c[d+3].usrCoords.slice(1)),Jr=this._bezierBbox(Lt),this._bezierOverlap(fr,Jr)){if(Js=this.meetBeziersegmentBeziersegment(Xt,Lt),Js.length===0)continue;for(b=0;b<Js.length;b++)$=Js[b],!($[1]<-Mat.eps||$[1]>1+Mat.eps||$[2]<-Mat.eps||$[2]>1+Mat.eps)&&Oo.push($);if(Oo.length>_)return Oo[_][0]}return Oo.length>_?Oo[_][0]:[0,NaN,NaN]},bezierSegmentEval:function(a,s){var o,c,h,d=1-a;return c=0,h=0,o=d*d*d,c+=o*s[0][0],h+=o*s[0][1],o=3*a*d*d,c+=o*s[1][0],h+=o*s[1][1],o=3*a*a*d,c+=o*s[2][0],h+=o*s[2][1],o=a*a*a,c+=o*s[3][0],h+=o*s[3][1],[1,c,h]},bezierArc:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr,Jr=s[1],Js=s[2],qs=s[0],zo=[],js=[],eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1;for(j=this.distance(s,a),Jr/=qs,Js/=qs,Xt=this.rad(a.slice(1),s.slice(1),o.slice(1)),h===-1&&(Xt=2*Math.PI-Xt),fr=Xt/4,d=a,d[1]/=d[0],d[2]/=d[0],d[0]/=d[0],$=d.slice(0),c?(zo=[Jr,Jr+.333*(d[1]-Jr),Jr+.666*(d[1]-Jr),d[1]],js=[Js,Js+.333*(d[2]-Js),Js+.666*(d[2]-Js),d[2]]):(zo=[d[1]],js=[d[2]]);Xt>Mat.eps;)Xt>fr?(Lt=fr,Xt-=fr):(Lt=Xt,Xt=0),eu=Math.cos(h*Lt),Oo=Math.sin(h*Lt),i1=[[1,0,0],[Jr*(1-eu)+Js*Oo,eu,-Oo],[Js*(1-eu)-Jr*Oo,Oo,eu]],r1=Mat.matVecMult(i1,d),$=[r1[0]/r1[0],r1[1]/r1[0],r1[2]/r1[0]],tu=d[1]-Jr,Bo=d[2]-Js,vu=$[1]-Jr,t1=$[2]-Js,a1=Mat.hypot(tu+vu,Bo+t1),Math.abs(t1-Bo)>Mat.eps?e1=(tu+vu)*(j/a1-.5)/(t1-Bo)*8/3:e1=(Bo+t1)*(j/a1-.5)/(tu-vu)*8/3,b=[1,d[1]-e1*Bo,d[2]+e1*tu],_=[1,$[1]+e1*t1,$[2]-e1*vu],JXG$1.concat(zo,[b[1],_[1],$[1]]),JXG$1.concat(js,[b[2],_[2],$[2]]),d=$.slice(0);return c&&(JXG$1.concat(zo,[$[1]+.333*(Jr-$[1]),$[1]+.666*(Jr-$[1]),Jr]),JXG$1.concat(js,[$[2]+.333*(Js-$[2]),$[2]+.666*(Js-$[2]),Js])),[zo,js]},projectPointToCircle:function(a,s,o){var c,h,d,b,_,$=s.center.coords.usrCoords;return JXG$1.exists(o)||(o=a.board),JXG$1.isPoint(a)?(c=a.coords.distance(Const.COORDS_BY_USER,s.center.coords),h=a.coords.usrCoords):(c=a.distance(Const.COORDS_BY_USER,s.center.coords),h=a.usrCoords),Math.abs(c)<Mat.eps&&(c=Mat.eps),_=s.Radius()/c,d=$[1]+_*(h[1]-$[1]),b=$[2]+_*(h[2]-$[2]),new Coords(Const.COORDS_BY_USER,[d,b],o)},projectPointToLine:function(a,s,o){var c=[0,s.stdform[1],s.stdform[2]],h;return JXG$1.exists(o)||(JXG$1.exists(a.coords)?o=a.board:o=s.board),JXG$1.exists(a.coords)?h=a.coords.usrCoords:h=a.usrCoords,c=Mat.crossProduct(c,h),new Coords(Const.COORDS_BY_USER,Mat.crossProduct(c,s.stdform),o)},projectCoordsToSegment:function(a,s,o){var c,h,d=[o[1]-s[1],o[2]-s[2]],b=[a[1]-s[1],a[2]-s[2]];return Math.abs(d[0])<Mat.eps&&Math.abs(d[1])<Mat.eps?[s,0]:(c=Mat.innerProduct(b,d),h=Mat.innerProduct(d,d),c/=h,[[1,c*d[0]+s[1],c*d[1]+s[2]],c])},projectCoordsToBeziersegment:function(a,s,o){var c,h=function(d){var b=[1,s.X(o+d),s.Y(o+d)];return b[1]-=a[1],b[2]-=a[2],b[1]*b[1]+b[2]*b[2]};return c=JXG$1.Math.Numerics.fminbr(h,[0,1]),[[1,s.X(c+o),s.Y(c+o)],c]},projectPointToCurve:function(a,s,o){JXG$1.exists(o)||(o=a.board);var c=a.X(),h=a.Y(),d=a.position,b;return JXG$1.exists(d)||(d=s.evalVisProp("curvetype")==="functiongraph"?c:0),b=this.projectCoordsToCurve(c,h,d,s,o),b},projectCoordsToCurve:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1=Number.POSITIVE_INFINITY;if(JXG$1.exists(h)||(h=c.board),c.evalVisProp("curvetype")==="plot"){if(o=0,j=m1,c.numberPoints===0?d=[0,1,1]:d=[c.Z(0),c.X(0),c.Y(0)],c.numberPoints>1)for(fr=[1,a,s],c.bezierDegree===3?$=0:qs=[c.Z(0),c.X(0),c.Y(0)],_=0;_<c.numberPoints-1;_++)c.bezierDegree===3?js=this.projectCoordsToBeziersegment(fr,c,$):(zo=[c.Z(_+1),c.X(_+1),c.Y(_+1)],js=this.projectCoordsToSegment(fr,qs,zo)),Lt=js[1],Jr=js[0],0<=Lt&&Lt<=1?(Xt=this.distance(Jr,fr),Js=_+Lt):Lt<0?(Jr=qs,Xt=this.distance(qs,fr),Js=_):Lt>1&&_===c.numberPoints-2&&(Jr=zo,Xt=this.distance(Jr,fr),Js=c.numberPoints-1),Xt<j&&(j=Xt,o=Js,d=Jr),c.bezierDegree===3?($++,_+=2):qs=zo;b=new Coords(Const.COORDS_BY_USER,d,h)}else{for(c1=c.minX(),h1=c.maxX(),i1=c1,s1=h1,c.evalVisProp("curvetype")==="functiongraph"&&(vu=Math.abs(s-c.Y(a)),isNaN(vu)||(i1=a-vu,s1=a+vu)),eu=function(l1){var f1,p1;return l1<c1||l1>c.maxX_glob?1/0:(f1=a-c.X(l1),p1=s-c.Y(l1),f1*f1+p1*p1)},Bo=eu(o),a1=50,t1=(s1-i1)/a1,Oo=i1,_=0;_<a1;_++)tu=eu(Oo),(tu<Bo||Bo===1/0||isNaN(Bo))&&(o=Oo,Bo=tu),Oo+=t1;for(e1=t1,_=0;_<20&&isNaN(eu(o-e1));_++,e1*=.5);for(isNaN(eu(o-e1))&&(e1=0),r1=t1,_=0;_<20&&isNaN(eu(o+r1));_++,r1*=.5);isNaN(eu(o+r1))&&(r1=0),o=Numerics.fminbr(eu,[Math.max(o-e1,i1),Math.min(o+r1,s1)]),o=o<c1?c1:o,o=o>h1?h1:o,b=new Coords(Const.COORDS_BY_USER,[c.X(o),c.Y(o)],h)}return[c.updateTransform(b),o]},projectCoordsToPolygon:function(a,s){var o,c=s.vertices.length,h=1/0,d,b,_,$;for(o=0;o<c-1;o++)b=JXG$1.Math.Geometry.projectCoordsToSegment(a,s.vertices[o].coords.usrCoords,s.vertices[o+1].coords.usrCoords),0<=b[1]&&b[1]<=1?(d=JXG$1.Math.Geometry.distance(b[0],a,3),_=b[0]):b[1]<0?(d=JXG$1.Math.Geometry.distance(s.vertices[o].coords.usrCoords,a,3),_=s.vertices[o].coords.usrCoords):(d=JXG$1.Math.Geometry.distance(s.vertices[o+1].coords.usrCoords,a,3),_=s.vertices[o+1].coords.usrCoords),d<h&&($=_.slice(0),h=d);return $},projectPointToTurtle:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr=0,Js=0,qs=Number.POSITIVE_INFINITY,zo=s.objects.length;for(JXG$1.exists(o)||(o=a.board),_=0;_<zo;_++)j=s.objects[_],j.elementClass===Const.OBJECT_CLASS_CURVE&&(Lt=this.projectPointToCurve(a,j),c=Lt[0],fr=Lt[1],$=this.distance(c.usrCoords,a.coords.usrCoords),$<qs&&(d=c.usrCoords[1],b=c.usrCoords[2],h=fr,qs=$,Xt=j,Js=Jr),Jr+=j.numberPoints);return c=new Coords(Const.COORDS_BY_USER,[d,b],o),[Xt.updateTransform(c),h+Js]},projectPointToPoint:function(a,s){return s.coords},projectPointToBoard:function(a,s){var o,c,h,d=s||a.board,b=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],_=a.coords||a,$=d.getBoundingBox();for(o=0;o<4;o++)h=b[o],h[0]*_.usrCoords[h[1]]<h[0]*$[h[2]]&&(c=Mat.crossProduct([1,$[h[3]],$[h[4]]],[1,$[h[5]],$[h[6]]]),c[3]=0,c=Mat.normalize(c),_=this.projectPointToLine({coords:_},{stdform:c},d));return _},distPointLine:function(a,s){var o=s[1],c=s[2],h=s[0],d;return Math.abs(o)+Math.abs(c)<Mat.eps?Number.POSITIVE_INFINITY:(d=o*a[1]+c*a[2]+h,o*=o,c*=c,Math.abs(d)/Math.sqrt(o+c))},distPointSegment:function(a,s,o){var c,h,d,b,_,$,j=Mat.eps*Mat.eps,Xt=1e6;return c=a[1]-s[1],h=a[2]-s[2],c=c===1/0?Xt:c===-1/0?-Xt:c,h=h===1/0?Xt:h===-1/0?-Xt:h,d=o[1]-s[1],b=o[2]-s[2],d=d===1/0?Xt:d===-1/0?-Xt:d,b=b===1/0?Xt:b===-1/0?-Xt:b,_=d*d+b*b,_>j&&($=(c*d+h*b)/_,$<0?$=0:$>1&&($=1),c-=$*d,h-=$*b),Mat.hypot(c,h)},intersectionFunction3D:function(a,s,o){var c,h=this;return s.type===Const.OBJECT_TYPE_PLANE3D?o.type===Const.OBJECT_TYPE_PLANE3D?c=a.intersectionPlanePlane(s,o):o.type===Const.OBJECT_TYPE_SPHERE3D&&(c=h.meetPlaneSphere(s,o)):s.type===Const.OBJECT_TYPE_SPHERE3D&&(o.type===Const.OBJECT_TYPE_PLANE3D?c=h.meetPlaneSphere(o,s):o.type===Const.OBJECT_TYPE_SPHERE3D&&(c=h.meetSphereSphere(s,o))),c},meet3Planes:function(a,s,o,c,h,d){var b=[1,0,0,0],_,$,j,Xt,Lt;for(_=Mat.crossProduct(h.slice(1),a.slice(1)),$=Mat.crossProduct(a.slice(1),o.slice(1)),j=Mat.crossProduct(o.slice(1),h.slice(1)),Xt=Mat.innerProduct(a.slice(1),j,3),Lt=0;Lt<3;Lt++)b[Lt+1]=(s*j[Lt]+c*_[Lt]+d*$[Lt])/Xt;return b},meetPlanePlane:function(a,s,o,c){var h,d,b,_;return b=a.slice(1),_=s.slice(1),h=Mat.crossProduct(b,_),b=o.slice(1),_=c.slice(1),d=Mat.crossProduct(b,_),_=Mat.crossProduct(h,d),_.unshift(0),_},meetPlaneSphere:function(a,s){var o=function(){return Mat.innerProduct(a.normal,s.center.coords,4)-a.d};return[function(){return Mat.axpy(-o(),a.normal,s.center.coords)},a.normal,function(){var c=s.Radius(),h=o();return Math.sqrt(c*c-h*h)}]},meetSphereSphere:function(a,s){var o=function(){var c=a.center.distance(s.center),h=a.Radius(),d=s.Radius();return(h-d)*(h+d)/(c*c)};return[function(){var c=o();return[1,.5*((1-c)*a.center.coords[1]+(1+c)*s.center.coords[1]),.5*((1-c)*a.center.coords[2]+(1+c)*s.center.coords[2]),.5*((1-c)*a.center.coords[3]+(1+c)*s.center.coords[3])]},function(){return Stat.subtract(s.center.coords,a.center.coords)},function(){var c=a.center.distance(s.center),h=a.Radius(),d=s.Radius(),b=o(),_=.5*(h*h+d*d-.5*c*c*(1+b*b));return Math.sqrt(_)}]},_paramsOutOfRange:function(a,s,o){return a[0]<s[0]||a[0]>s[1]||a.length>1&&(a[1]<o[0]||a[1]>o[1])},projectCoordsToParametric:function(a,s,o,c){var h,d,b=0,_=200,$,j=Math.random()*.01+.5,Xt,Lt,fr=2*o;return o===1?(Xt=[JXG$1.evaluate(s.range[0]),JXG$1.evaluate(s.range[1])],h=.1*(Xt[1]-Xt[0])):o===2&&(Xt=[JXG$1.evaluate(s.range_u[0]),JXG$1.evaluate(s.range_u[1])],Lt=[JXG$1.evaluate(s.range_v[0]),JXG$1.evaluate(s.range_v[1])],h=.1*Math.min(Xt[1]-Xt[0],Lt[1]-Lt[0])),d=h/5e6,$=function(Jr,Js,qs,zo){var js=[s.X.apply(s,qs),s.Y.apply(s,qs),s.Z.apply(s,qs)],eu=a[0]-js[0],Oo=a[1]-js[1],tu=a[2]-js[2];return Js>=2&&(zo[0]=qs[0]-Xt[0],zo[1]=-qs[0]+Xt[1]),Js>=4&&(zo[2]=qs[1]-Lt[0],zo[3]=-qs[1]+Lt[1]),eu*eu+Oo*Oo+tu*tu},c.length===0&&(c[0]=j*(Xt[0]+Xt[1]),o===2&&(c[1]=j*(Lt[0]+Lt[1]))),Mat.Nlp.FindMinimum($,o,0,c,h,d,b,_),a=[s.X.apply(s,c),s.Y.apply(s,c),s.Z.apply(s,c)],this._paramsOutOfRange(c,Xt,Lt)&&(c[0]=j*(Xt[0]+Xt[1]),o===2&&(c[1]=j*(Lt[0]+Lt[1])),Mat.Nlp.FindMinimum($,o,fr,c,h,d,b,_)),[1,s.X.apply(s,c),s.Y.apply(s,c),s.Z.apply(s,c)]},project3DTo3DPlane:function(a,s,o){var c=[0,0,0],h,d,b,_;return o=o||[0,0,0],h=Mat.norm(s),d=Mat.innerProduct(a,s,3),b=Mat.innerProduct(o,s,3),_=(d-b)/h,c=Mat.axpy(-_,s,a),c},getPlaneBounds:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt;return a[2]+s[0]!==0?(j=[[a[0],s[0]],[a[1],s[1]]],Xt=[c-o[0],c-o[1]],Lt=Numerics.Gauss(j,Xt),d=Lt[0],b=Lt[1],Xt=[h-o[0],h-o[1]],Lt=Numerics.Gauss(j,Xt),_=Lt[0],$=Lt[1],[d,_,b,$]):null},reuleauxPolygon:function(a,s){var o,c=Math.PI*2,h=c/s,d=(s-1)/2,b=0,_=function($,j){return function(Xt,Lt){var fr=(Xt%c+c)%c,Jr=Math.floor(fr/h)%s;return Lt||(b=a[0].Dist(a[d]),o=Mat.Geometry.rad([a[0].X()+1,a[0].Y()],a[0],a[d%s])),isNaN(Jr)?Jr:(fr=fr*.5+Jr*h*.5+o,a[Jr][$]()+b*Math[j](fr))}};return[_("X","cos"),_("Y","sin"),0,c]}});const Geometry=Mat.Geometry;Mat.Quadtree=function(a,s,o){s=s||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=s.capacity||10,this.config.pointType=s.pointType||"coords",this.points=[],this.xlb=a[0],this.xub=a[2],this.ylb=a[3],this.yub=a[1],this.parent=o||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null};JXG$1.extend(Mat.Quadtree.prototype,{contains:function(a,s){return this.xlb<a&&a<=this.xub&&this.ylb<s&&s<=this.yub},insert:function(a){switch(this.config.pointType){case"coords":if(!this.contains(a.usrCoords[1],a.usrCoords[2]))return!1;break;case"object":if(!this.contains(a.x,a.y))return!1;break}return this.points.length<this.config.capacity&&this.northWest===null?(this.points.push(a),!0):(this.northWest===null&&this.subdivide(),this.northWest.insert(a)||this.northEast.insert(a)||this.southEast.insert(a)?!0:!!this.southWest.insert(a))},subdivide:function(){var a=this.xlb+(this.xub-this.xlb)*.5,s=this.ylb+(this.yub-this.ylb)*.5;this.northWest=new Mat.Quadtree([this.xlb,this.yub,a,s],this.config,this),this.northEast=new Mat.Quadtree([a,this.yub,this.xub,s],this.config,this),this.southEast=new Mat.Quadtree([this.xlb,s,a,this.ylb],this.config,this),this.southWest=new Mat.Quadtree([a,s,this.xub,this.ylb],this.config,this)},_query:function(a,s){var o;if(this.contains(a,s)){if(this.northWest===null)return this;if(o=this.northWest._query(a,s),o||(o=this.northEast._query(a,s),o)||(o=this.southEast._query(a,s),o)||(o=this.southWest._query(a,s),o))return o}return!1},query:function(a,s){var o,c;return JXG$1.exists(s)?(o=a,c=s):(o=a.usrCoords[1],c=a.usrCoords[2]),this._query(o,c)},hasPoint:function(a,s,o){var c,h,d;if(this.contains(a,s)){switch(d=this.points.length,this.config.pointType){case"coords":for(h=0;h<d;h++)if(Geometry.distance([a,s],this.points[h].usrCoords.slice(1),2)<o)return!0;break;case"object":for(h=0;h<d;h++)if(Geometry.distance([a,s],[this.points[h].x,this.points[h].y],2)<o)return!0;break}if(this.northWest===null)return!1;if(c=this.northWest.hasPoint(a,s,o),c||(c=this.northEast.hasPoint(a,s,o),c)||(c=this.southEast.hasPoint(a,s,o),c)||(c=this.southWest.hasPoint(a,s,o),c))return c}return!1},getAllPoints:function(){var a=[];return this.getAllPointsRecursive(a),a},getAllPointsRecursive(a){Array.prototype.push.apply(a,this.points.slice()),this.northWest!==null&&(this.northWest.getAllPointsRecursive(a),this.northEast.getAllPointsRecursive(a),this.southEast.getAllPointsRecursive(a),this.southWest.getAllPointsRecursive(a))}});const QDT=Mat.Quadtree;Mat.BoxQuadtree=function(a,s,o){var c,h,d,b;a--,this.depth=a,this.capacity=s,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,o&&(c=o[0],h=o[1],d=o[2],b=o[3],this.cx=(c+d)*.5,this.cy=(h+b)*.5,this.bbox=[c,h,d,b])};JXG$1.extend(Mat.BoxQuadtree.prototype,{insert:function(a){var s,o,c,h,d,b,_,$=[],j=[],Xt=[],Lt=[],fr,Jr,Js,qs;if(this.bbox===null){for(o=a.length,c=b=1/0,d=h=-1/0,s=0;s<a.length;s++)_=a[s],c=_.xlb<c?_.xlb:c,h=_.yub>h?_.yub:h,d=_.xub>d?_.xub:d,b=_.ylb<b?_.ylb:b;this.cx=(c+d)*.5,this.cy=(h+b)*.5,this.bbox=[c,h,d,b]}else c=this.bbox[0],h=this.bbox[1],d=this.bbox[2],b=this.bbox[3];if(this.depth===0||this.items.length+a.length<this.capacity)return this.items=this.items.concat(a),this;for(o=a.length,s=0;s<o;s++)_=a[s],fr=_.xlb<=this.cx&&_.yub>this.cy,Js=_.xlb<=this.cx&&_.ylb<=this.cy,Jr=_.xub>this.cx&&_.yub>this.cy,qs=_.xub>this.cx&&_.ylb<=this.cy,fr&&Jr&&qs&&Js?this.items.push(_):(fr&&$.push(_),Js&&Xt.push(_),Jr&&j.push(_),qs&&Lt.push(_));return this.subdivide($,Xt,j,Lt,c,h,d,b),this},insertItem:function(a){var s,o,c,h,d=[],b=[],_=[],$=[],j,Xt,Lt,fr;return this.bbox===null?(s=h=1/0,c=o=-1/0,s=a.xlb<s?a.xlb:s,o=a.yub>o?a.yub:o,c=a.xub>c?a.xub:c,h=a.ylb<h?a.ylb:h,this.cx=(s+c)*.5,this.cy=(o+h)*.5,this.bbox=[s,o,c,h]):(s=this.bbox[0],o=this.bbox[1],c=this.bbox[2],h=this.bbox[3]),this.depth===0||this.items.length+1<this.capacity?(this.items.push(a),this):(j=a.xlb<=this.cx&&a.yub>this.cy,Lt=a.xlb<=this.cx&&a.ylb<=this.cy,Xt=a.xub>this.cx&&a.yub>this.cy,fr=a.xub>this.cx&&a.ylb<=this.cy,j&&Xt&&fr&&Lt?this.items.push(a):(j&&d.push(a),Lt&&_.push(a),Xt&&b.push(a),fr&&$.push(a)),this.subdivide(d,_,b,$,s,o,c,h),this)},subdivide:function(a,s,o,c,h,d,b,_){return a.length>0&&(this.northWest===null&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[h,d,this.cx,this.cy])),this.northWest.insert(a)),s.length>0&&(this.southWest===null&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[h,this.cy,this.cx,_])),this.southWest.insert(s)),o.length>0&&(this.northEast===null&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,d,b,this.cy])),this.northEast.insert(o)),c.length>0&&(this.southEast===null&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,b,_])),this.southEast.insert(c)),this},find:function(a){var s=function(d){return a[2]>=d.xlb&&a[0]<=d.xub&&a[3]<=d.yub&&a[1]>=d.ylb},o=[],c,h;for(h=this.items.length,c=0;c<h;c++)s(this.items[c])&&o.push(this.items[c]);return this.northWest!==null&&a[0]<=this.cx&a[1]>=this.cy&&JXG$1.concat(o,this.northWest.find(a)),this.southWest!==null&&a[0]<=this.cx&a[3]<=this.cy&&JXG$1.concat(o,this.southWest.find(a)),this.northEast!==null&&a[2]>=this.cx&a[1]>=this.cy&&JXG$1.concat(o,this.northEast.find(a)),this.southEast!==null&&a[2]>=this.cx&a[3]<=this.cy&&JXG$1.concat(o,this.southEast.find(a)),o},analyzeTree:function(){var a={number_items:this.items.length,depth:1},s;return this.northWest!==null&&(s=this.northWest.analyzeTree(),a.number_items+=s.number_items,a.depth=Math.max(a.depth,1+s.depth)),this.southWest!==null&&(s=this.southWest.analyzeTree(),a.number_items+=s.number_items,a.depth=Math.max(a.depth,1+s.depth)),this.northEast!==null&&(s=this.northEast.analyzeTree(),a.number_items+=s.number_items,a.depth=Math.max(a.depth,1+s.depth)),this.southEast!==null&&(s=this.southEast.analyzeTree(),a.number_items+=s.number_items,a.depth=Math.max(a.depth,1+s.depth)),a},plot:function(){var a=[],s=[],o;return a.push(this.bbox[0]),s.push(this.bbox[3]),a.push(this.bbox[2]),s.push(this.bbox[3]),a.push(this.bbox[2]),s.push(this.bbox[1]),a.push(this.bbox[0]),s.push(this.bbox[1]),a.push(this.bbox[0]),s.push(this.bbox[3]),a.push(NaN),s.push(NaN),this.northWest!==null&&(o=this.northWest.plot(),JXG$1.concat(a,o[0]),JXG$1.concat(s,o[1])),this.northEast!==null&&(o=this.northEast.plot(),JXG$1.concat(a,o[0]),JXG$1.concat(s,o[1])),this.southEast!==null&&(o=this.southEast.plot(),JXG$1.concat(a,o[0]),JXG$1.concat(s,o[1])),this.southWest!==null&&(o=this.southWest.plot(),JXG$1.concat(a,o[0]),JXG$1.concat(s,o[1])),[a,s]}});const Quadtree=Mat.BoxQuadtree;JXG$1.Math.Nlp={arr:function(a){return new Float64Array(a)},arr2:function(a,s){for(var o=0,c=new Array(a);o<a;)c[o]=this.arr(s),o++;return c},arraycopy:function(a,s,o,c,h){for(var d=0;d<h;)o[d+c]=a[d+s],d++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(a,s,o,c,h,d,b,_,$){var j=o+2,Xt,Lt=this.arr(s+1),fr=this,Jr;return this.lastNumberOfEvaluations=0,$&&console.log("Experimental feature 'testForRoundingErrors' is activated."),Lt[0]=0,this.arraycopy(c,0,Lt,1,s),Jr=function(Js,qs,zo,js){var eu=fr.arr(Js),Oo,tu;return fr.lastNumberOfEvaluations=fr.lastNumberOfEvaluations+1,fr.arraycopy(zo,1,eu,0,Js),Oo=fr.arr(qs),tu=a(Js,qs,eu,Oo),fr.arraycopy(Oo,0,js,1,qs),tu},Xt=this.cobylb(Jr,s,o,j,Lt,h,d,b,_,$),this.arraycopy(Lt,1,c,0,s),Xt},cobylb:function(a,s,o,c,h,d,b,_,$,j){var Xt=-1,Lt=.25,fr=2.1,Jr=.5,Js=1.1,qs=0,zo=0,js,eu=s+1,Oo=o+1,tu=d,Bo=0,vu=!1,t1=!1,e1=0,r1=0,a1=0,i1=this.arr(1+c),s1=this.arr2(1+s,1+eu),c1=this.arr2(1+s,1+s),h1=this.arr2(1+c,1+eu),m1=this.arr2(1+s,1+Oo),l1=this.arr(1+s),f1=this.arr(1+s),p1=this.arr(1+s),d1=this.arr(1+s),b1=this.arr(1+s),C1,g1,o1,S1,v1,B1,T1,w1,x1,M1,O1,N1,L1,G1,q1,H1,W1,j1,Q1,rv,$1,A1,y1,_1,D1,E1,P1,X1,V1,F1,z1=!0;for(_>=2&&console.log("The initial value of RHO is "+tu+" and PARMU is set to zero."),T1=0,v1=1/tu,C1=1;C1<=s;++C1)s1[C1][eu]=h[C1],s1[C1][C1]=tu,c1[C1][C1]=v1;w1=eu,x1=!1;e:do{if(T1>=$&&T1>0){Xt=this.MaxIterationsReached;break e}for(++T1,qs=a(s,o,h,i1),zo=0,o1=1;o1<=o;++o1)zo=Math.max(zo,-i1[o1]);if((T1===_-1||_===3)&&this.PrintIterationResult(T1,qs,zo,h,s,_),i1[Oo]=qs,i1[c]=zo,M1=!0,!x1){for(M1=!1,C1=1;C1<=c;++C1)h1[C1][w1]=i1[C1];if(T1<=eu){if(w1<=s)if(h1[Oo][eu]<=qs)h[w1]=s1[w1][eu];else{for(s1[w1][eu]=h[w1],o1=1;o1<=c;++o1)h1[o1][w1]=h1[o1][eu],h1[o1][eu]=i1[o1];for(o1=1;o1<=w1;++o1){for(s1[w1][o1]=-tu,v1=0,C1=o1;C1<=w1;++C1)v1-=c1[C1][o1];c1[w1][o1]=v1}}if(T1<=s){w1=T1,h[w1]+=tu;continue e}}x1=!0}t:do{r:do{if(!M1){for(O1=h1[Oo][eu]+Bo*h1[c][eu],N1=eu,g1=1;g1<=s;++g1)v1=h1[Oo][g1]+Bo*h1[c][g1],v1<O1?(N1=g1,O1=v1):v1===O1&&Bo===0&&h1[c][g1]<h1[c][N1]&&(N1=g1);if(N1<=s){for(C1=1;C1<=c;++C1)v1=h1[C1][eu],h1[C1][eu]=h1[C1][N1],h1[C1][N1]=v1;for(C1=1;C1<=s;++C1){for(v1=s1[C1][N1],s1[C1][N1]=0,s1[C1][eu]+=v1,B1=0,o1=1;o1<=s;++o1)s1[C1][o1]-=v1,B1-=c1[o1][C1];c1[N1][C1]=B1}}if(L1=0,j)for(C1=1;C1<=s;++C1)for(g1=1;g1<=s;++g1)v1=this.DOT_PRODUCT_ROW_COL(c1,C1,s1,g1,1,s)-(C1===g1?1:0),L1=Math.max(L1,Math.abs(v1));if(L1>.1){Xt=this.DivergingRoundingErrors;break e}for(o1=1;o1<=Oo;++o1){for(i1[o1]=-h1[o1][eu],g1=1;g1<=s;++g1)b1[g1]=h1[o1][g1]+i1[o1];for(C1=1;C1<=s;++C1)m1[C1][o1]=(o1===Oo?-1:1)*this.DOT_PRODUCT_ROW_COL(b1,-1,c1,C1,1,s)}for(vu=!0,e1=Lt*tu,G1=fr*tu,g1=1;g1<=s;++g1){for(q1=0,H1=0,o1=1;o1<=s;++o1)q1+=c1[g1][o1]*c1[g1][o1],H1+=s1[o1][g1]*s1[o1][g1];l1[g1]=1/Math.sqrt(q1),f1[g1]=Math.sqrt(H1),(l1[g1]<e1||f1[g1]>G1)&&(vu=!1)}if(!x1&&!vu){for(w1=0,v1=G1,g1=1;g1<=s;++g1)f1[g1]>v1&&(w1=g1,v1=f1[g1]);if(w1===0)for(g1=1;g1<=s;++g1)l1[g1]<v1&&(w1=g1,v1=l1[g1]);for(v1=Jr*tu*l1[w1],o1=1;o1<=s;++o1)d1[o1]=v1*c1[w1][o1];for(W1=0,j1=0,js=0,o1=1;o1<=Oo;++o1)js=this.DOT_PRODUCT_ROW_COL(d1,-1,m1,o1,1,s),o1<Oo&&(v1=h1[o1][eu],W1=Math.max(W1,-js-v1),j1=Math.max(j1,js-v1));for(Q1=Bo*(W1-j1)>2*js?-1:1,v1=0,C1=1;C1<=s;++C1)d1[C1]=Q1*d1[C1],s1[C1][w1]=d1[C1],v1+=c1[w1][C1]*d1[C1];for(o1=1;o1<=s;++o1)c1[w1][o1]/=v1;for(g1=1;g1<=s;++g1){if(g1!==w1)for(v1=this.DOT_PRODUCT_ROW_COL(c1,g1,d1,-1,1,s),o1=1;o1<=s;++o1)c1[g1][o1]-=v1*c1[w1][o1];h[g1]=s1[g1][eu]+d1[g1]}continue e}if(t1=this.trstlp(s,o,m1,i1,tu,d1),!t1){for(v1=0,o1=1;o1<=s;++o1)v1+=d1[o1]*d1[o1];if(v1<.25*tu*tu){x1=!0;break r}}for(js=0,rv=0,i1[Oo]=0,o1=1;o1<=Oo;++o1)js=i1[o1]-this.DOT_PRODUCT_ROW_COL(d1,-1,m1,o1,1,s),o1<Oo&&(rv=Math.max(rv,js));if(r1=h1[c][eu]-rv,$1=r1>0?js/r1:0,Bo<1.5*$1){for(Bo=2*$1,_>=2&&console.log("Increase in PARMU to "+Bo),A1=h1[Oo][eu]+Bo*h1[c][eu],g1=1;g1<=s;++g1)if(v1=h1[Oo][g1]+Bo*h1[c][g1],v1<A1||v1===A1&&Bo===0&&h1[c][g1]<h1[c][eu])continue t}for(a1=Bo*r1-js,o1=1;o1<=s;++o1)h[o1]=s1[o1][eu]+d1[o1];x1=!0;continue e}for(M1=!1,y1=h1[Oo][eu]+Bo*h1[c][eu],_1=qs+Bo*zo,D1=y1-_1,Bo===0&&qs===h1[Oo][eu]&&(a1=r1,D1=h1[c][eu]-zo),E1=D1<=0?1:0,w1=0,g1=1;g1<=s;++g1)v1=Math.abs(this.DOT_PRODUCT_ROW_COL(c1,g1,d1,-1,1,s)),v1>E1&&(w1=g1,E1=v1),p1[g1]=v1*l1[g1];for(P1=Js*tu,S1=0,g1=1;g1<=s;++g1)if(p1[g1]>=e1||p1[g1]>=l1[g1]){if(v1=f1[g1],D1>0){for(v1=0,o1=1;o1<=s;++o1)v1+=Math.pow(d1[o1]-s1[o1][g1],2);v1=Math.sqrt(v1)}v1>P1&&(S1=g1,P1=v1)}if(S1>0&&(w1=S1),w1!==0){for(v1=0,C1=1;C1<=s;++C1)s1[C1][w1]=d1[C1],v1+=c1[w1][C1]*d1[C1];for(o1=1;o1<=s;++o1)c1[w1][o1]/=v1;for(g1=1;g1<=s;++g1)if(g1!==w1)for(v1=this.DOT_PRODUCT_ROW_COL(c1,g1,d1,-1,1,s),o1=1;o1<=s;++o1)c1[g1][o1]-=v1*c1[w1][o1];for(o1=1;o1<=c;++o1)h1[o1][w1]=i1[o1];if(D1>0&&D1>=.1*a1)continue t}}while(!z1);if(!vu){x1=!1;continue t}if(tu<=b){Xt=this.Normal;break e}if(X1=0,V1=0,tu*=.5,tu<=1.5*b&&(tu=b),Bo>0){for(F1=0,o1=1;o1<=Oo;++o1){for(X1=h1[o1][eu],V1=X1,C1=1;C1<=s;++C1)X1=Math.min(X1,h1[o1][C1]),V1=Math.max(V1,h1[o1][C1]);o1<=o&&X1<.5*V1&&(v1=Math.max(V1,0)-X1,F1=F1<=0?v1:Math.min(F1,v1))}F1===0?Bo=0:V1-X1<Bo*F1&&(Bo=(V1-X1)/F1)}_>=2&&console.log("Reduction in RHO to "+tu+"  and PARMU = "+Bo),_===2&&this.PrintIterationResult(T1,h1[Oo][eu],h1[c][eu],this.COL(s1,eu),s,_)}while(z1)}while(z1);switch(Xt){case this.Normal:if(_>=1&&console.log("%nNormal return from subroutine COBYLA%n"),t1)return _>=1&&this.PrintIterationResult(T1,qs,zo,h,s,_),Xt;break;case this.MaxIterationsReached:_>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:_>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n");break}for(o1=1;o1<=s;++o1)h[o1]=s1[o1][eu];return qs=h1[Oo][eu],zo=h1[c][eu],_>=1&&this.PrintIterationResult(T1,qs,zo,h,s,_),Xt},trstlp:function(a,s,o,c,h,d){var b=0,_=0,$=0,j=this.arr2(1+a,1+a),Xt=this.arr(2+s),Lt=this.arr(2+s),fr=this.arr(1+a),Jr=this.arr(1+a),Js=this.arr(2+s),qs=this.arr(2+s),zo=s,js=0,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1,l1,f1,p1,d1,b1,C1,g1,o1,S1,v1,B1,T1,w1,x1,M1,O1,N1,L1,G1,q1,H1=!0;for(tu=1;tu<=a;++tu)j[tu][tu]=1,d[tu]=0;if(eu=0,Oo=0,s>=1){for(Bo=1;Bo<=s;++Bo)c[Bo]>Oo&&(Oo=c[Bo],eu=Bo);for(Bo=1;Bo<=s;++Bo)qs[Bo]=Bo,Lt[Bo]=Oo-c[Bo]}vu=!0;do e:do{(!vu||vu&&Oo===0)&&(zo=s+1,eu=zo,qs[zo]=zo,Lt[zo]=0),vu=!1,t1=0,e1=0,r1=0,a1=0;t:do{if(i1=zo===s?Oo:-this.DOT_PRODUCT_ROW_COL(d,-1,o,zo,1,a),e1===0||i1<t1?(t1=i1,_=js,e1=3):js>_?(_=js,e1=3):--e1,e1===0)break e;if(s1=0,eu<=js){if(eu<js){c1=qs[eu],h1=Lt[eu],Bo=eu;do{for(l1=Bo+1,f1=qs[l1],p1=this.DOT_PRODUCT(this.PART(this.COL(j,Bo),1,a),this.PART(this.COL(o,f1),1,a)),b=Mat.hypot(p1,Xt[l1]),d1=Xt[l1]/b,b1=p1/b,Xt[l1]=d1*Xt[Bo],Xt[Bo]=b,tu=1;tu<=a;++tu)b=d1*j[tu][l1]+b1*j[tu][Bo],j[tu][l1]=d1*j[tu][Bo]-b1*j[tu][l1],j[tu][Bo]=b;qs[Bo]=f1,Lt[Bo]=Lt[l1],Bo=l1}while(Bo<js);qs[Bo]=c1,Lt[Bo]=h1}if(--js,zo>s)for(b=1/Xt[js],Bo=1;Bo<=a;++Bo)fr[Bo]=b*j[Bo][js];else for(b=this.DOT_PRODUCT_ROW_COL(fr,-1,j,js+1,1,a),Bo=1;Bo<=a;++Bo)fr[Bo]-=b*j[Bo][js+1]}else{for(f1=qs[eu],Bo=1;Bo<=a;++Bo)Jr[Bo]=o[Bo][f1];for(C1=0,Bo=a;Bo>js;){for(p1=0,g1=0,tu=1;tu<=a;++tu)b=j[tu][Bo]*Jr[tu],p1+=b,g1+=Math.abs(b);if(o1=g1+.1*Math.abs(p1),S1=g1+.2*Math.abs(p1),(g1>=o1||o1>=S1)&&(p1=0),C1===0)C1=p1;else for(l1=Bo+1,b=Mat.hypot(p1,C1),d1=p1/b,b1=C1/b,C1=b,tu=1;tu<=a;++tu)b=d1*j[tu][Bo]+b1*j[tu][l1],j[tu][l1]=d1*j[tu][l1]-b1*j[tu][Bo],j[tu][Bo]=b;--Bo}if(C1===0){s1=-1,Bo=js;do{for(v1=0,B1=0,tu=1;tu<=a;++tu)b=j[tu][Bo]*Jr[tu],v1+=b,B1+=Math.abs(b);if(o1=B1+.1*Math.abs(v1),S1=B1+.2*Math.abs(v1),B1<o1&&o1<S1){if(b=v1/Xt[Bo],b>0&&qs[Bo]<=s&&(q1=Lt[Bo]/b,(s1<0||q1<s1)&&(s1=q1)),Bo>=2)for(T1=qs[Bo],tu=1;tu<=a;++tu)Jr[tu]-=b*o[tu][T1];Js[Bo]=b}else Js[Bo]=0}while(--Bo>0);if(s1<0)break e;for(Bo=1;Bo<=js;++Bo)Lt[Bo]=Math.max(0,Lt[Bo]-s1*Js[Bo]);if(eu<js){c1=qs[eu],h1=Lt[eu],Bo=eu;do{for(l1=Bo+1,T1=qs[l1],p1=this.DOT_PRODUCT(this.PART(this.COL(j,Bo),1,a),this.PART(this.COL(o,T1),1,a)),b=Mat.hypot(p1,Xt[l1]),d1=Xt[l1]/b,b1=p1/b,Xt[l1]=d1*Xt[Bo],Xt[Bo]=b,tu=1;tu<=a;++tu)b=d1*j[tu][l1]+b1*j[tu][Bo],j[tu][l1]=d1*j[tu][Bo]-b1*j[tu][l1],j[tu][Bo]=b;qs[Bo]=T1,Lt[Bo]=Lt[l1],Bo=l1}while(Bo<js);qs[Bo]=c1,Lt[Bo]=h1}if(b=this.DOT_PRODUCT(this.PART(this.COL(j,js),1,a),this.PART(this.COL(o,f1),1,a)),b===0)break e;Xt[js]=b,Lt[eu]=0,Lt[js]=s1}else++js,Xt[js]=C1,Lt[eu]=Lt[js],Lt[js]=0;if(qs[eu]=qs[js],qs[js]=f1,zo>s&&f1!==zo){for(Bo=js-1,p1=this.DOT_PRODUCT(this.PART(this.COL(j,Bo),1,a),this.PART(this.COL(o,f1),1,a)),b=Mat.hypot(p1,Xt[js]),d1=Xt[js]/b,b1=p1/b,Xt[js]=d1*Xt[Bo],Xt[Bo]=b,tu=1;tu<=a;++tu)b=d1*j[tu][js]+b1*j[tu][Bo],j[tu][js]=d1*j[tu][Bo]-b1*j[tu][js],j[tu][Bo]=b;qs[js]=qs[Bo],qs[Bo]=f1,b=Lt[Bo],Lt[Bo]=Lt[js],Lt[js]=b}if(zo>s)for(b=1/Xt[js],Bo=1;Bo<=a;++Bo)fr[Bo]=b*j[Bo][js];else for(f1=qs[js],b=(this.DOT_PRODUCT_ROW_COL(fr,-1,o,f1,1,a)-1)/Xt[js],Bo=1;Bo<=a;++Bo)fr[Bo]-=b*j[Bo][js]}for(w1=h*h,M1=0,x1=0,tu=1;tu<=a;++tu)Math.abs(d[tu])>=1e-6*h&&(w1-=d[tu]*d[tu]),M1+=d[tu]*fr[tu],x1+=fr[tu]*fr[tu];if(w1<=0)break e;if(b=Math.sqrt(x1*w1),Math.abs(M1)>=1e-6*b&&(b=Math.sqrt(x1*w1+M1*M1)),a1=w1/(b+M1),r1=a1,zo===s){if(o1=r1+.1*Oo,S1=r1+.2*Oo,r1>=o1||o1>=S1)break t;r1=Math.min(r1,Oo)}for(Bo=1;Bo<=a;++Bo)Jr[Bo]=d[Bo]+r1*fr[Bo];if(zo===s)for($=Oo,Oo=0,Bo=1;Bo<=js;++Bo)f1=qs[Bo],b=c[f1]-this.DOT_PRODUCT_ROW_COL(Jr,-1,o,f1,1,a),Oo=Math.max(Oo,b);Bo=js;do{for(O1=0,N1=0,tu=1;tu<=a;++tu)b=j[tu][Bo]*Jr[tu],O1+=b,N1+=Math.abs(b);if(o1=N1+.1*Math.abs(O1),S1=N1+.2*Math.abs(O1),(N1>=o1||o1>=S1)&&(O1=0),Js[Bo]=O1/Xt[Bo],Bo>=2)for(f1=qs[Bo],tu=1;tu<=a;++tu)Jr[tu]-=Js[Bo]*o[tu][f1]}while(Bo-->=2);for(zo>s&&(Js[js]=Math.max(0,Js[js])),Bo=1;Bo<=a;++Bo)Jr[Bo]=d[Bo]+r1*fr[Bo];if(zo>js)for(L1=js+1,Bo=L1;Bo<=zo;++Bo){for(f1=qs[Bo],m1=Oo-c[f1],G1=Oo+Math.abs(c[f1]),tu=1;tu<=a;++tu)b=o[tu][f1]*Jr[tu],m1+=b,G1+=Math.abs(b);o1=G1+.1*Math.abs(m1),S1=G1+.2*Math.abs(m1),(G1>=o1||o1>=S1)&&(m1=0),Js[Bo]=m1}for(s1=1,eu=0,Bo=1;Bo<=zo;++Bo)Js[Bo]<0&&(b=Lt[Bo]/(Lt[Bo]-Js[Bo]),b<s1&&(s1=b,eu=Bo));for(b=1-s1,Bo=1;Bo<=a;++Bo)d[Bo]=b*d[Bo]+s1*Jr[Bo];for(Bo=1;Bo<=zo;++Bo)Lt[Bo]=Math.max(0,b*Lt[Bo]+s1*Js[Bo]);zo===s&&(Oo=$+s1*(Oo-$))}while(eu>0);if(r1===a1)return!0}while(H1);while(zo===s);return!1},PrintIterationResult:function(a,s,o,c,h,d){d>1&&console.log("NFVALS = "+a+"  F = "+s+"  MAXCV = "+o),d>1&&console.log("X = "+this.PART(c,1,h))},ROW:function(a,s){return a[s].slice()},COL:function(a,s){var o,c=a.length,h=[];for(o=0;o<c;++o)h[o]=a[o][s];return h},PART:function(a,s,o){return a.slice(s,o+1)},FORMAT:function(a){return a.join(",")},DOT_PRODUCT:function(a,s){var o,c=0,h=a.length;for(o=0;o<h;++o)c+=a[o]*s[o];return c},DOT_PRODUCT_ROW_COL:function(a,s,o,c,h,d){var b,_=0;if(s===-1)for(b=h;b<=d;++b)_+=a[b]*o[b][c];else if(c===-1)for(b=h;b<=d;++b)_+=a[s][b]*o[b];else for(b=h;b<=d;++b)_+=a[s][b]*o[b][c];return _}};JXG$1.Math.Nlp;Mat.Plot={checkReal:function(a){var s=!1,o,c,h=a.length;for(o=0;o<h;o++)if(c=a[o].usrCoords,!isNaN(c[1])&&!isNaN(c[2])&&Math.abs(c[0])>Mat.eps){s=!0;break}return s},updateParametricCurveNaive:function(a,s,o,c){var h,d,b=!1,_=(o-s)/c;for(h=0;h<c;h++)d=s+h*_,a.points[h].setCoordinates(Const.COORDS_BY_USER,[a.X(d,b),a.Y(d,b)],!1),a.points[h]._t=d,b=!0;return a},isSegmentOutside:function(a,s,o,c,h){return s<0&&c<0||s>h.canvasHeight&&c>h.canvasHeight||a<0&&o<0||a>h.canvasWidth&&o>h.canvasWidth},isDistOK:function(a,s,o,c){return Math.abs(a)<o&&Math.abs(s)<c&&!isNaN(a+s)},isSegmentDefined:function(a,s,o,c){return!(isNaN(a+s)&&isNaN(o+c))},updateParametricCurveOld:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs=!1,zo=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),js=[],eu=[],Oo=[],tu=[],Bo=!1,vu=0,t1=function(e1,r1,a1){var i1,s1=a1[1]-e1[1],c1=a1[2]-e1[2],h1=r1[0]-e1[1],m1=r1[1]-e1[2],l1=h1*h1+m1*m1;return l1>=Mat.eps&&(i1=(s1*h1+c1*m1)/l1,i1>0&&(i1<=1?(s1-=i1*h1,c1-=i1*m1):(s1-=h1,c1-=m1))),Mat.hypot(s1,c1)};for(JXG$1.deprecated("Curve.updateParametricCurveOld()"),a.board.updateQuality===a.board.BOARD_QUALITY_LOW?(fr=15,Jr=10,Js=10):(fr=21,Jr=.7,Js=.7),tu[0]=o-s,c=1;c<fr;c++)tu[c]=tu[c-1]*.5;c=1,js[0]=1,eu[0]=0,h=s,zo.setCoordinates(Const.COORDS_BY_USER,[a.X(h,qs),a.Y(h,qs)],!1),qs=!0,$=zo.scrCoords[1],j=zo.scrCoords[2],h=o,zo.setCoordinates(Const.COORDS_BY_USER,[a.X(h,qs),a.Y(h,qs)],!1),b=zo.scrCoords[1],_=zo.scrCoords[2],Oo[0]=[b,_],Xt=1,Lt=0,a.points=[],a.points[vu++]=new Coords(Const.COORDS_BY_SCREEN,[$,j],a.board,!1);do{for(Bo=this.isDistOK(b-$,_-j,Jr,Js)||this.isSegmentOutside($,j,b,_,a.board);Lt<fr&&(!Bo||Lt<6)&&(Lt<=7||this.isSegmentDefined($,j,b,_));)js[Xt]=c,eu[Xt]=Lt,Oo[Xt]=[b,_],Xt+=1,c=2*c-1,Lt++,h=s+c*tu[Lt],zo.setCoordinates(Const.COORDS_BY_USER,[a.X(h,qs),a.Y(h,qs)],!1,!0),b=zo.scrCoords[1],_=zo.scrCoords[2],Bo=this.isDistOK(b-$,_-j,Jr,Js)||this.isSegmentOutside($,j,b,_,a.board);vu>1&&(d=t1(a.points[vu-2].scrCoords,[b,_],a.points[vu-1].scrCoords),d<.015&&(vu-=1)),a.points[vu]=new Coords(Const.COORDS_BY_SCREEN,[b,_],a.board,!1),a.points[vu]._t=h,vu+=1,$=b,j=_,Xt-=1,b=Oo[Xt][0],_=Oo[Xt][1],Lt=eu[Xt]+1,c=js[Xt]*2}while(Xt>0&&vu<5e5);return a.numberPoints=a.points.length,a},_insertPoint_v2:function(a,s,o){var c=!isNaN(this._lastCrds[1]+this._lastCrds[2]),h=!isNaN(s.scrCoords[1]+s.scrCoords[2]),d=a.board.canvasWidth,b=a.board.canvasHeight,_=500;h=h&&s.scrCoords[1]>-_&&s.scrCoords[2]>-_&&s.scrCoords[1]<d+_&&s.scrCoords[2]<b+_,(!h&&c||h&&(!c||Math.abs(s.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(s.scrCoords[2]-this._lastCrds[2])>.7))&&(s._t=o,a.points.push(s),this._lastCrds=s.copy("scrCoords"))},neighborhood_isNaN_v2:function(a,s){var o,c=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),h,d;return h=s+Mat.eps,c.setCoordinates(Const.COORDS_BY_USER,[a.X(h,!0),a.Y(h,!0)],!1),d=c.usrCoords,o=isNaN(d[1]+d[2]),!(!o&&(h=s-Mat.eps,c.setCoordinates(Const.COORDS_BY_USER,[a.X(h,!0),a.Y(h,!0)],!1),d=c.usrCoords,o=isNaN(d[1]+d[2]),!o))},_borderCase:function(a,s,o,c,h,d,b,_){var $,j,Xt,Lt=null,fr,Jr=30,Js=!1,qs,zo;if(_<=1){if(j=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),isNaN(s[1]+s[2])&&!isNaN(c[1]+c[2])&&!this.neighborhood_isNaN_v2(a,h)||isNaN(o[1]+o[2])&&!isNaN(c[1]+c[2])&&!this.neighborhood_isNaN_v2(a,d)||isNaN(c[1]+c[2])&&(!isNaN(s[1]+s[2])||!isNaN(o[1]+o[2]))&&!this.neighborhood_isNaN_v2(a,b))return!1;fr=0;do{if(isNaN(s[1]+s[2])&&!isNaN(c[1]+c[2]))qs=h,zo=b;else if(isNaN(o[1]+o[2])&&!isNaN(c[1]+c[2]))qs=d,zo=b;else if(isNaN(c[1]+c[2])&&!isNaN(o[1]+o[2]))qs=b,zo=d;else if(isNaN(c[1]+c[2])&&!isNaN(s[1]+s[2]))qs=b,zo=h;else return!1;$=.5*(qs+zo),j.setCoordinates(Const.COORDS_BY_USER,[a.X($,!0),a.Y($,!0)],!1),Xt=j.usrCoords,Js=isNaN(Xt[1]+Xt[2]),Js?qs=$:zo=$,++fr}while(Js&&fr<Jr);if(fr<Jr&&(Lt=Xt.slice(),c=Xt.slice(),zo=$),Lt!==null)return this._insertPoint_v2(a,new Coords(Const.COORDS_BY_USER,Lt,a.board,!1)),!0}return!1},_plotRecursive_v2:function(a,s,o,c,h,d,b){var _,$,j,Xt=0,Lt,fr,Jr,Js=.5,qs=.99,zo=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1);if(!(a.numberPoints>65536))return d<this.nanLevel&&this._isUndefined(a,s,o,c,h)?this:d<this.nanLevel&&this._isOutside(s,o,c,h,a.board)?this:(_=(o+h)*.5,zo.setCoordinates(Const.COORDS_BY_USER,[a.X(_,!0),a.Y(_,!0)],!1),$=zo.scrCoords,this._borderCase(a,s,c,$,o,h,_,d)?this:(j=this._triangleDists(s,c,$),Lt=d<this.smoothLevel&&j[3]<b,fr=d<=this.jumpLevel&&(isNaN(j[0])||isNaN(j[1])||isNaN(j[2]))||d<this.jumpLevel&&(j[2]>qs*j[0]||j[1]>qs*j[0]||j[0]===1/0||j[1]===1/0||j[2]===1/0),Jr=d<this.smoothLevel+2&&j[0]<Js*(j[1]+j[2]),Jr&&(Xt=0,Lt=!1),--d,fr?this._insertPoint_v2(a,new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],a.board,!1),_):d<=Xt||Lt?this._insertPoint_v2(a,zo,_):(this._plotRecursive_v2(a,s,o,$,_,d,b),isNaN(zo.scrCoords[1]+zo.scrCoords[2])||this._insertPoint_v2(a,zo,_),this._plotRecursive_v2(a,$,_,c,h,d,b)),this))},updateParametricCurve_v2:function(a,s,o){var c,h,d,b,_=!1,$=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),j=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),Xt,Lt,fr,Jr,Js;return a.board.updateQuality===a.board.BOARD_QUALITY_LOW?(Xt=a.evalVisProp("recursiondepthlow")||13,Lt=2,this.smoothLevel=Xt-6,this.jumpLevel=3):(Xt=a.evalVisProp("recursiondepthhigh")||17,Lt=2,this.smoothLevel=Xt-9,this.jumpLevel=2),this.nanLevel=Xt-4,a.points=[],this.xterm==="x"?(Jr=a.board.getBoundingBox(),fr=(Jr[2]-Jr[0])*.3,c=Math.max(s,Jr[0]-fr),h=Math.min(o,Jr[2]+fr)):(c=s,h=o),$.setCoordinates(Const.COORDS_BY_USER,[a.X(c,_),a.Y(c,_)],!1),_=!0,j.setCoordinates(Const.COORDS_BY_USER,[a.X(h,_),a.Y(h,_)],!1),Js=this._findStartPoint(a,$.scrCoords,c,j.scrCoords,h),$.setCoordinates(Const.COORDS_BY_SCREEN,Js[0],!1),c=Js[1],Js=this._findStartPoint(a,j.scrCoords,h,$.scrCoords,c),j.setCoordinates(Const.COORDS_BY_SCREEN,Js[0],!1),h=Js[1],this._visibleArea=[c,h],d=$.copy("scrCoords"),b=j.copy("scrCoords"),$._t=c,a.points.push($),this._lastCrds=$.copy("scrCoords"),this._plotRecursive_v2(a,d,c,b,h,Xt,Lt),j._t=h,a.points.push(j),a.numberPoints=a.points.length,a},_insertLimesPoint:function(a,s,o,c,h){var d,b,_;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(h.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(h.left_y)===1/0||(d=new Coords(Const.COORDS_BY_USER,[h.left_x,h.left_y],a.board),d._t=o,a.points.push(d),!isNaN(h.left_x)&&!isNaN(h.left_y)&&!isNaN(h.right_x)&&!isNaN(h.right_y)&&(Math.abs(h.left_x-h.right_x)>Mat.eps||Math.abs(h.left_y-h.right_y)>Mat.eps)&&(b=new Coords(Const.COORDS_BY_SCREEN,s,a.board),b._t=o,a.points.push(b)),_=new Coords(Const.COORDS_BY_USER,[h.right_x,h.right_y],a.board),_._t=o,a.points.push(_),this._lastScrCrds=_.copy("scrCoords"),this._lastUsrCrds=_.copy("usrCoords"))},_insertPoint:function(a,s,o,c,h){var d=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),b=!isNaN(s[1]+s[2]),_=a.board.canvasWidth,$=a.board.canvasHeight,j,Xt=.8,Lt=500;if(JXG$1.exists(h)){this._insertLimesPoint(a,s,o,c,h);return}b=b&&s[1]>-Lt&&s[2]>-Lt&&s[1]<_+Lt&&s[2]<$+Lt,!(!d&&!b)&&(b&&d&&Math.abs(s[1]-this._lastScrCrds[1])<Xt&&Math.abs(s[2]-this._lastScrCrds[2])<Xt||Math.abs(s[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(s[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||(j=new Coords(Const.COORDS_BY_SCREEN,s,a.board),j._t=o,a.points.push(j),this._lastScrCrds=j.copy("scrCoords"),this._lastUsrCrds=j.copy("usrCoords")))},_triangleDists:function(a,s,o){var c,h,d,b,_;return c=[a[0]*s[0],(a[1]+s[1])*.5,(a[2]+s[2])*.5],h=Geometry.distance(a,s,3),d=Geometry.distance(a,o,3),b=Geometry.distance(o,s,3),_=Geometry.distance(o,c,3),[h,d,b,_]},_isUndefined:function(a,s,o,c,h){var d,b,_;if(!isNaN(s[1]+s[2])||!isNaN(c[1]+c[2]))return!1;for(_=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),b=0;b<20;++b)if(d=o+Math.random()*(h-o),_.setCoordinates(Const.COORDS_BY_USER,[a.X(d,!0),a.Y(d,!0)],!1),!isNaN(_.scrCoords[0]+_.scrCoords[1]+_.scrCoords[2]))return!1;return!0},_isOutside:function(a,s,o,c,h){var d=500,b=h.canvasWidth,_=h.canvasHeight;return a[1]<-d&&o[1]<-d||a[2]<-d&&o[2]<-d||a[1]>b+d&&o[1]>b+d||a[2]>_+d&&o[2]>_+d},_isOutsidePoint:function(a,s){var o=500,c=s.canvasWidth,h=s.canvasHeight;return a[1]<-o||a[2]<-o||a[1]>c+o||a[2]>h+o},_findStartPoint:function(a,s,o,c,h){return[s,o]},_getBorderPos:function(a,s,o,c,h,d,b){var _,$,j,Xt,Lt=30,fr=!1,Jr,Js;if($=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),Xt=0,isNaN(o[1]+o[2])&&!isNaN(h[1]+h[2]))Js=s,Jr=c;else if(isNaN(b[1]+b[2])&&!isNaN(h[1]+h[2]))Js=d,Jr=c;else if(isNaN(h[1]+h[2])&&!isNaN(b[1]+b[2]))Js=c,Jr=d;else if(isNaN(h[1]+h[2])&&!isNaN(o[1]+o[2]))Js=c,Jr=s;else return!1;do _=.5*(Jr+Js),$.setCoordinates(Const.COORDS_BY_USER,[a.X(_,!0),a.Y(_,!0)],!1),j=$.usrCoords,fr=isNaN(j[1]+j[2]),fr?Js=_:Jr=_,++Xt;while(Xt<Lt&&Math.abs(Jr-Js)>Mat.eps);return _},_getCuspPos:function(a,s,o){var c=[a.X(s,!0),a.Y(s,!0)],h=[a.X(o,!0),a.Y(o,!0)],d=function(b){var _=[a.X(b,!0),a.Y(b,!0)];return-(Mat.hypot(c[0]-_[0],c[1]-_[1])+Mat.hypot(h[0]-_[0],h[1]-_[1]))};return Numerics.fminbr(d,[s,o],a)},_getJumpPos:function(a,s,o){var c=function(h){var d=Mat.eps*Mat.eps,b=[a.X(h,!0),a.Y(h,!0)],_=[a.X(h+d,!0),a.Y(h+d,!0)];return-Math.abs((_[1]-b[1])/(_[0]-b[0]))};return Numerics.fminbr(c,[s,o],a)},_getLimits:function(a,s){var o,c=2/(a.maxX()-a.minX()),h,d,b,_;return o=Extrapolate.limit(s,-c,a.X),h=o[0],o[1]==="infinite"&&(h=Math.sign(h)*(1/0)),o=Extrapolate.limit(s,-c,a.Y),b=o[0],o[1]==="infinite"&&(b=Math.sign(b)*(1/0)),o=Extrapolate.limit(s,c,a.X),d=o[0],o[1]==="infinite"&&(d=Math.sign(d)*(1/0)),o=Extrapolate.limit(s,c,a.Y),_=o[0],o[1]==="infinite"&&(_=Math.sign(_)*(1/0)),{left_x:h,left_y:b,right_x:d,right_y:_,t:s}},_getLimes:function(a,s,o,c,h,d,b,_,$){var j;return _==="border"?j=this._getBorderPos(a,s,o,c,h,d,b):_==="cusp"?j=this._getCuspPos(a,s,d):_==="jump"&&(j=this._getJumpPos(a,s,d)),this._getLimits(a,j)},_plotNonRecursive:function(a,s,o,c,h,d){var b,_,$,j=0,Xt=null,Lt,fr,Jr=!1,Js="",qs,zo,js,eu,Oo,tu=[],Bo=0,vu;for(js=a.board.origin.scrCoords,tu[Bo++]=[s,o,c,h,d,1/0];Bo>0;){if(vu=tu[--Bo],s=vu[0],o=vu[1],c=vu[2],h=vu[3],eu=vu[4],Oo=vu[5],Jr=!1,Js="",Xt=null,a.points.length>65536)return;eu<this.nanLevel&&(this._isUndefined(a,s,o,c,h)||this._isOutside(s,o,c,h,a.board))||(b=(o+h)*.5,qs=a.X(b,!0),zo=a.Y(b,!0),_=[1,js[1]+qs*a.board.unitX,js[2]-zo*a.board.unitY],$=this._triangleDists(s,c,_),Lt=isNaN(s[1]+s[2]),fr=isNaN(c[1]+c[2]),Lt&&!fr||!Lt&&fr?Js="border":$[0]>.66*Oo||$[0]<this.cusp_threshold*($[1]+$[2])||$[1]>5*$[2]||$[2]>5*$[1]?Js="cusp":($[2]>this.jump_threshold*$[0]||$[1]>this.jump_threshold*$[0]||$[0]===1/0||$[1]===1/0||$[2]===1/0)&&(Js="jump"),Jr=Js===""&&eu<this.smoothLevel&&$[3]<this.smooth_threshold,eu<this.testLevel&&!Jr&&(Js===""?Jr=!0:Xt=this._getLimes(a,o,s,b,_,h,c,Js,eu)),Xt!==null?(_=[1,NaN,NaN],this._insertPoint(a,_,b,eu,Xt)):eu<=j||Jr?this._insertPoint(a,_,b,eu,null):(tu[Bo++]=[_,b,c,h,eu-1,$[0]],tu[Bo++]=[s,o,_,b,eu-1,$[0]]))}return this},updateParametricCurve_v3:function(a,s,o){var c,h,d,b,_=!1,$=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),j=new Coords(Const.COORDS_BY_USER,[0,0],a.board,!1),Xt,Lt,fr,Jr;return a.board.updateQuality===a.board.BOARD_QUALITY_LOW?Xt=a.evalVisProp("recursiondepthlow")||14:Xt=a.evalVisProp("recursiondepthhigh")||17,this.smoothLevel=7,this.nanLevel=Xt-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,a.points=[],a.xterm==="x"?(fr=a.board.getBoundingBox(),Lt=(fr[2]-fr[0])*.3,c=Math.max(s,fr[0]-Lt),h=Math.min(o,fr[2]+Lt)):(c=s,h=o),$.setCoordinates(Const.COORDS_BY_USER,[a.X(c,_),a.Y(c,_)],!1),_=!0,j.setCoordinates(Const.COORDS_BY_USER,[a.X(h,_),a.Y(h,_)],!1),Jr=this._findStartPoint(a,$.scrCoords,c,j.scrCoords,h),$.setCoordinates(Const.COORDS_BY_SCREEN,Jr[0],!1),c=Jr[1],Jr=this._findStartPoint(a,j.scrCoords,h,$.scrCoords,c),j.setCoordinates(Const.COORDS_BY_SCREEN,Jr[0],!1),h=Jr[1],this._visibleArea=[c,h],d=$.copy("scrCoords"),b=j.copy("scrCoords"),$._t=c,a.points.push($),this._lastScrCrds=$.copy("scrCoords"),this._lastUsrCrds=$.copy("usrCoords"),this._plotNonRecursive(a,d,c,b,h,Xt),j._t=h,a.points.push(j),a.numberPoints=a.points.length,a},_criticalInterval:function(a,s,o){var c,h,d,b,_,$,j=!1,Xt,Lt=-1/0,fr=!1,Jr=!1,Js=0,qs=[],zo=[],js=[];for(Xt=Stat.abs(a),b=Stat.median(Xt),b<1e-7?(b=1e-7,fr=!0):b*=this.criticalThreshold,c=0;c<s;c++)Xt[c]>b?(js.push({i:c,v:a[c],group:Js}),Lt=c,j||(j=!0)):j&&c>Lt+4&&(js.length>0&&qs.push(js.slice(0)),js=[],j=!1,Js++);for(j&&js.length>1&&qs.push(js.slice(0)),fr&&qs.length===0&&(Jr=!0),h=0;h<qs.length;h++)if(zo[h]="point",d=qs[h].length,!(d<64)){for($=0,_=Math.sign(qs[h][0].v),c=1;c<d;c++)Math.sign(qs[h][c].v)!==_&&($++,_=Math.sign(qs[h][c].v));$*6>d&&(zo[h]="interval")}return{smooth:Jr,groups:qs,types:zo}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(a,s,o,c){var h,d,b,_,$,j=[],Xt,Lt=0,fr=0,Jr=0,Js=!1,qs=!1;for(b=(o-s)/c,j[Lt]=new this.Component,Xt=j[Lt],h=0,d=s;h<=c;h++,d+=b)_=a.X(d,qs),$=a.Y(d,qs),isNaN(_)||isNaN($)?(Jr++,Jr>1&&Js&&(Xt.right_isNaN=!0,Xt.right_t=d-b,Xt.len=fr,Js=!1,Lt++,j[Lt]=new this.Component,Xt=j[Lt],Jr=0)):(Js||(Js=!0,fr=0,Jr>0&&(Xt.left_t=d-b,Xt.left_isNaN=!0)),Jr=0,Xt.t_values[fr]=d,Xt.x_values[fr]=_,Xt.y_values[fr]=$,fr++),h===0&&(qs=!0);return Js?Xt.len=fr:j.pop(),j},getPointType:function(a,s,o,c,h,d,b){var _=h[0],$=d[0],j=c.length,Xt={idx:s,t:o,x:_[s],y:$[s],type:"other"};return s<5?(Xt.type="borderleft",Xt.idx=0,Xt.t=c[0],Xt.x=_[0],Xt.y=$[0],Xt):(s>b-6&&(Xt.type="borderright",Xt.idx=j-1,Xt.t=c[j-1],Xt.x=_[j-1],Xt.y=$[j-1]),Xt)},newtonApprox:function(a,s,o,c,h){var d,b=0;for(d=c;d>0;d--)b=(b+h[d][a])*(s-(d-1)*o)/d;return b+h[0][a]},thiele:function(a,s,o,c,h){var d,b=0;for(d=h;d>1;d--)b=(a-o[c+d])/(s[d][c+1]-s[d-2][c+1]+b);return s[0][c+1]+(a-o[c+1])/(s[1][c+1]+b)},differenceMethodExperiments:function(a,s){var o,c,h,d,b=a.t_values,_=a.x_values,$=a.y_values,j=[],Xt=[],Lt=[],fr=[],Jr=[],Js=[],qs=[],zo=[],js,eu,Oo=0,tu,Bo,vu,t1,e1,r1=[];for(js=b[1]-b[0],Jr.push([]),Js.push([]),qs.push([]),zo.push([]),h=$.length,o=0;o<h;o++)Jr[0][o]=_[o],Js[0][o]=$[o],qs[0][o]=_[o],zo[0][o]=$[o];for(Jr.push([]),Js.push([]),qs.push([]),zo.push([]),eu=js,h=$.length-1,o=0;o<h;o++)j[o]=_[o+1]-_[o],Xt[o]=$[o+1]-$[o],Lt[o]=j[o],fr[o]=Xt[o],Jr[1][o]=j[o],Js[1][o]=Xt[o],qs[1][o]=eu/j[o],zo[1][o]=eu/Xt[o];for(h--,d=Math.min(8,$.length-1),c=1;c<d;c++){for(Jr.push([]),Js.push([]),qs.push([]),zo.push([]),eu*=js,o=0;o<h;o++)j[o]=j[o+1]-j[o],Xt[o]=Xt[o+1]-Xt[o],Jr[c+1][o]=j[o],Js[c+1][o]=Xt[o],qs[c+1][o]=eu/(qs[c][o+1]-qs[c][o])+qs[c-1][o+1],zo[c+1][o]=eu/(zo[c][o+1]-zo[c][o])+zo[c-1][o+1];if(e1=this._criticalPoints(Xt,h,c),e1===!1){console.log("Polynomial of degree",c),e1=[];break}if(e1.length>0&&(Oo++,Oo>1&&c%2===0))break;h--}for(o=0;o<e1.length;o++){for(Bo=-1/0,vu=0;vu<e1[o].length;vu++)t1=Math.abs(e1[o][vu].v),t1>Bo&&(Bo=t1,tu=vu);tu=Math.floor(e1[o][tu].i+c/2),r1.push(this.getPointType(s,tu,b,_,$,Lt,fr,h+1))}return[r1,Jr,Js,qs,zo]},getCenterOfCriticalInterval:function(a,s,o){var c,h,d,b,_=0,$=0,j=o[1]-o[0],Xt,Lt=[];for(c=-1/0,Lt=[],h=0;h<a.length;h++)b=Math.abs(a[h].v),b>c?(Lt=[h],c=b,d=h):c===b&&Lt.push(h);if(Lt.length>0&&(Xt=Lt.reduce(function(fr,Jr){return fr+Jr},0)/Lt.length,d=Math.floor(Xt),Xt+=a[0].i),c<1/0){for(h=0;h<a.length;h++)_+=Math.abs(a[h].v)*a[h].i,$+=Math.abs(a[h].v);Xt=_/$}return Xt+=s/2,[a[d].i+s/2,Xt,o[Math.floor(Xt)]+j*(Xt-Math.floor(Xt))]},differenceMethod:function(a,s){var o,c,h,d,b=a.t_values,_=a.x_values,$=a.y_values,j=[],Xt=[],Lt=0,fr=-1,Jr=-1,Js,qs,zo,js,eu,Oo=[],tu,Bo=[];for(h=$.length,j.push(new Float64Array(_)),Xt.push(new Float64Array($)),h--,d=Math.min(12,h),c=0;c<d&&(j.push(new Float64Array(h)),Xt.push(new Float64Array(h)),j[c+1]=j[c].map(function(vu,t1,e1){return e1[t1+1]-vu}),Xt[c+1]=Xt[c].map(function(vu,t1,e1){return e1[t1+1]-vu}),js=this._criticalInterval(Xt[c+1],h,c),js.smooth===!0&&(Jr=c,Oo=[]),zo=this._criticalInterval(j[c+1],h,c),fr===-1&&zo.smooth===!0&&(fr=c),!(Jr>=0));c++){if(js.groups.length>0&&(Lt++,Lt>2&&(c+1)%2===0)){Oo=js.groups,tu=js.types;break}h--}for(o=0;o<Oo.length;o++)tu[o]!=="interval"&&(qs=this.getCenterOfCriticalInterval(Oo[o],c+1,b),Js=js[0],Js=Math.floor(qs[1]),eu=qs[2],Bo.push(this.getPointType(s,Js,eu,b,j,Xt,h+1)));return[Bo,j,Xt,fr,Jr]},_insertPoint_v4:function(a,s,o,c){var h,d=null,b,_,$=.8;a.points.length>0&&(d=a.points[a.points.length-1].scrCoords),h=new Coords(Const.COORDS_BY_USER,s,a.board),!(d!==null&&(b=h.scrCoords[1]-d[1],_=h.scrCoords[2]-d[2],b*b+_*_<$*$))&&(h._t=o,a.points.push(h))},getInterval:function(a,s,o){var c,h;return Interval.disable(),c=Interval.Interval(s,o),a.board.mathLib=Interval,a.board.mathLibJXG=Interval,h=a.Y(c,!0),a.board.mathLib=Math,a.board.mathLibJXG=JXG$1.Math,h},sign:function(a){return a<0?-1:a>0?1:0},handleBorder:function(a,s,o,c,h){var d=o.idx,b,_,$,j=32,Xt,Lt,fr,Jr,Js,qs,zo,js,eu;if(eu=s.t_values[1]-s.t_values[0],o.type==="borderleft"?(b=s.left_isNaN?s.left_t:o.t-eu,_=b,$=_+eu):o.type==="borderright"?(b=s.right_isNaN?s.right_t:o.t+eu,$=b,_=$-eu):console.log("No bordercase!!!"),zo=this.findComponents(a,_,$,j),zo.length!==0){for(o.type==="borderleft"&&(_=zo[0].left_t,$=zo[0].t_values[0],eu=zo[0].t_values[1]-zo[0].t_values[0],_=_===null?$-eu:_,b=_,Xt=this.getInterval(a,_,$),JXG$1.isObject(Xt)&&(Jr=Xt.lo,Js=Xt.hi,Lt=a.X(b,!0),fr=h[1][d]<0?Js:Jr,this._insertPoint_v4(a,[1,Lt,fr],b))),js=zo[0].t_values.length,qs=0;qs<js;qs++)b=zo[0].t_values[qs],Lt=zo[0].x_values[qs],fr=zo[0].y_values[qs],this._insertPoint_v4(a,[1,Lt,fr],b);o.type==="borderright"&&(_=zo[0].t_values[js-1],$=zo[0].right_t,eu=zo[0].t_values[1]-zo[0].t_values[0],$=$===null?_+eu:$,b=$,Xt=this.getInterval(a,_,$),JXG$1.isObject(Xt)&&(Jr=Xt.lo,Js=Xt.hi,Lt=a.X(b,!0),fr=h[1][d]>0?Js:Jr,this._insertPoint_v4(a,[1,Lt,fr],b)))}},_seconditeration_v4:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js;for(b=s.t_values[o.idx-2],_=s.t_values[o.idx+2],j=this.findComponents(a,b,_,64),Lt=0;Lt<j.length;Lt++){for(Xt=j[Lt],$=this.differenceMethod(Xt,a),fr=$[0],Js=$[1],qs=$[2],zo=0,Jr=0;Jr<=fr.length;Jr++){for(Jr===fr.length?js=Xt.len:js=fr[Jr].idx,d=zo;d<js;d++)!isNaN(Xt.x_values[d])&&!isNaN(Xt.y_values[d])&&this._insertPoint_v4(a,[1,Xt.x_values[d],Xt.y_values[d]],Xt.t_values[d]);Jr<fr.length&&(this.handleSingularity(a,Xt,fr[Jr],Js,qs),zo=fr[Jr].idx+1)}js=Xt.len,Lt<j.length-1&&this._insertPoint_v4(a,[1,NaN,NaN],Xt.right_t)}return this},_recurse_v4:function(a,s,o,c,h,d,b,_){var $=2,j=(s+o)*.5,Xt=a.X(j,!0),Lt=a.Y(j,!0),fr,Jr;if(_===0){this._insertPoint_v4(a,[1,NaN,NaN],j);return}fr=(Xt-c)*a.board.unitX,Jr=(Lt-h)*a.board.unitY,Mat.hypot(fr,Jr)>$?this._recurse_v4(a,s,j,c,h,Xt,Lt,_-1):this._insertPoint_v4(a,[1,Xt,Lt],j),fr=(Xt-d)*a.board.unitX,Jr=(Lt-b)*a.board.unitY,Mat.hypot(fr,Jr)>$?this._recurse_v4(a,j,o,Xt,Lt,d,b,_-1):this._insertPoint_v4(a,[1,Xt,Lt],j)},handleSingularity:function(a,s,o,c,h){var d=o.idx,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js=100,eu=5,Oo=3;b=o.t,console.log("HandleSingularity at t =",b),_=s.t_values[d-eu],$=s.t_values[d+eu],j=this.getInterval(a,_,$),JXG$1.isObject(j)?(Jr=j.lo,Js=j.hi):h[0][d-1]<h[0][d+1]?(Jr=h[0][d-1],Js=h[0][d+1]):(Jr=h[0][d+1],Js=h[0][d-1]),fr=a.X(b,!0),qs=(h[0][d-Oo]-h[0][d-eu])/(s.t_values[d-Oo]-s.t_values[d-eu]),zo=(h[0][d+Oo]-h[0][d+eu])/(s.t_values[d+Oo]-s.t_values[d+eu]),console.log(":::",qs,zo),qs<-js?(this._insertPoint_v4(a,[1,fr,Jr],b,!0),zo<=js&&this._insertPoint_v4(a,[1,NaN,NaN],b)):qs>js?(this._insertPoint_v4(a,[1,fr,Js],b),zo>=-js&&this._insertPoint_v4(a,[1,NaN,NaN],b)):(Jr===-1/0&&(this._insertPoint_v4(a,[1,fr,Jr],b,!0),this._insertPoint_v4(a,[1,NaN,NaN],b)),Js===1/0&&(this._insertPoint_v4(a,[1,NaN,NaN],b),this._insertPoint_v4(a,[1,fr,Js],b,!0)),o.t<s.t_values[d]?(Xt=d-1,Lt=d):(Xt=d,Lt=d+1),_=s.t_values[Xt],$=s.t_values[Lt],this._recurse_v4(a,_,$,c[0][Xt],h[0][Xt],c[0][Lt],h[0][Lt],10)),zo<-js?this._insertPoint_v4(a,[1,fr,Js],b):zo>js&&this._insertPoint_v4(a,[1,fr,Jr],b)},steps:1021,criticalThreshold:1e3,plot_v4:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo=(o-s)/c,tu=function(t1){return a.Y(t1,!0)},Bo=function(t1){return-a.Y(t1,!0)},vu=Oo*.5;for(b=this.findComponents(a,s,o,c),_=0;_<b.length;_++){for($=b[_],fr=this.differenceMethod($,a),j=fr[0],Jr=fr[1],Js=fr[2],(j.length===0||j[0].type!=="borderleft")&&j.unshift({idx:0,t:$.t_values[0],x:$.x_values[0],y:$.y_values[0],type:"borderleft"}),j[j.length-1].type!=="borderright"&&(d=$.t_values.length,j.push({idx:d-1,t:$.t_values[d-1],x:$.x_values[d-1],y:$.y_values[d-1],type:"borderright"})),Lt=0,Xt=0;Xt<=j.length;Xt++){for(Xt===j.length?d=$.len:d=j[Xt].idx-1,h=Lt;h<d-2;h++)this._insertPoint_v4(a,[1,$.x_values[h],$.y_values[h]],$.t_values[h]),h>=Lt+3&&h<d-3&&Js.length>3&&Math.abs(Js[2][h])>.2*Math.abs(Js[0][h])&&(qs=$.t_values[h],vu=Oo*.25,eu=this.getInterval(a,qs,qs+Oo),JXG$1.isObject(eu)?Js[2][h]>0?this._insertPoint_v4(a,[1,qs+vu,eu.lo],qs+vu):this._insertPoint_v4(a,[1,qs+Oo-vu,eu.hi],qs+Oo-vu):(zo=Numerics.fminbr(tu,[qs,qs+Oo]),js=Numerics.fminbr(Bo,[qs,qs+Oo]),zo<js?(this._insertPoint_v4(a,[1,a.X(zo,!0),a.Y(zo,!0)],zo),this._insertPoint_v4(a,[1,a.X(js,!0),a.Y(js,!0)],js)):(this._insertPoint_v4(a,[1,a.X(js,!0),a.Y(js,!0)],js),this._insertPoint_v4(a,[1,a.X(zo,!0),a.Y(zo,!0)],zo))));Xt<j.length&&(h=j[Xt].idx,j[Xt].type==="borderleft"||j[Xt].type==="borderright"?this.handleBorder(a,$,j[Xt],Jr,Js):this._seconditeration_v4(a,$,j[Xt],Jr,Js),Lt=j[Xt].idx+1+1)}d=$.len,_<b.length-1&&this._insertPoint_v4(a,[1,NaN,NaN],$.right_t)}},updateParametricCurve_v4:function(a,s,o){var c,h,d,b;a.xterm==="x"?(b=a.board.getBoundingBox(),d=(b[2]-b[0])*.3,c=Math.max(s,b[0]-d),h=Math.min(o,b[2]+d)):(c=s,h=o),a.points=[],this.plot_v4(a,c,h,this.steps),a.numberPoints=a.points.length},updateParametricCurve:function(a,s,o){return this.updateParametricCurve_v2(a,s,o)}};const Plot=Mat.Plot;Mat.ImplicitPlot=function(a,s,o,c,h){var d={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:Mat.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=JXG$1.merge(d,s),this.f=o,this.dfx=null,this.dfy=null,JXG$1.isFunction(c)?this.dfx=c:this.dfx=function(b,_){var $=Mat.eps*Mat.eps;return(this.f(b+$,_)-this.f(b-$,_))*.5/$},JXG$1.isFunction(h)?this.dfy=h:this.dfy=function(b,_){var $=Mat.eps*Mat.eps;return(this.f(b,_+$)-this.f(b,_-$))*.5/$},this.bbox=a,this.qdt=new Quadtree(20,5,a),this.components=[]};JXG$1.extend(Mat.ImplicitPlot.prototype,{plot:function(){var a,s,o,c,h,d,b=[],_=[],$=[],j=0,Xt,Lt=this,fr=function(zo){return Lt.f(a,zo)},Jr=function(zo){return-Lt.f(a,zo)},Js=function(zo){return Lt.f(zo,s)},qs=function(zo){return-Lt.f(zo,s)};for(o=Math.min(this.bbox[0],this.bbox[2])-Mat.eps,c=Math.max(this.bbox[0],this.bbox[2]),h=Math.min(this.bbox[1],this.bbox[3])+Mat.eps,d=Math.max(this.bbox[1],this.bbox[3]),Xt=this.config.resolution_out/this.config.unitX,Xt*=1+Mat.eps,a=o;a<c;a+=Xt)$=this.searchLine(fr,Jr,a,[h,d],"vertical",j,b,_,20),$!==!1&&(b=$[0],_=$[1],j=$[2]);for(Xt=this.config.resolution_out/this.config.unitY,Xt*=1+Mat.eps,s=h;s<d;s+=Xt)$=this.searchLine(Js,qs,s,[o,c],"horizontal",j,b,_,20),$!==!1&&(b=$[0],_=$[1],j=$[2]);return[b,_,j]},searchLine:function(a,s,o,c,h,d,b,_,$){var j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1=this.config.tol_u0,r1=c[0],a1=c[1];if(j=Numerics.fminbr(a,[r1,a1]),Jr=a(j),Xt=Numerics.fminbr(s,[r1,a1]),Js=a(Xt),Jr<e1&&Js>-e1){if(qs=j,j=Math.min(qs,Xt),Xt=Math.max(qs,Xt),Lt=Numerics.fzero(a,[j,Xt]),fr=a(Lt),Math.abs(fr)>Math.max((Js-Jr)*Mat.eps,.001))return!1;if(h==="vertical"?(eu=[1,o,Lt],t1=this.config.resolution_in/this.config.unitY):(eu=[1,Lt,o],t1=this.config.resolution_in/this.config.unitX),t1*=1+Mat.eps,js=this.curveContainsPoint(eu,b,_,t1*2,this.config.qdt_box),!js){if(Bo=this.traceComponent(eu,1),Bo[0].length>0){for(d>0&&(b.push(NaN),_.push(NaN)),vu=b.length,tu=Bo[0].length,Oo=1;Oo<tu;Oo++)this.qdt.insertItem({xlb:Math.min(Bo[0][Oo-1],Bo[0][Oo]),xub:Math.max(Bo[0][Oo-1],Bo[0][Oo]),ylb:Math.min(Bo[1][Oo-1],Bo[1][Oo]),yub:Math.max(Bo[1][Oo-1],Bo[1][Oo]),idx1:vu+Oo-1,idx2:vu+Oo,comp:d});d++,JXG$1.concat(b,Bo[0]),JXG$1.concat(_,Bo[1])}}return zo=Lt-t1*.01,zo-r1>t1&&$>0&&(Bo=this.searchLine(a,s,o,[r1,zo],h,d,b,_,$-1),Bo!==!1&&(b=Bo[0],_=Bo[1],d=Bo[2])),zo=Lt+t1*.01,a1-zo>t1&&$>0&&(Bo=this.searchLine(a,s,o,[zo,a1],h,d,b,_,$-1),Bo!==!1&&(b=Bo[0],_=Bo[1],d=Bo[2])),[b,_,d]}return!1},curveContainsPoint:function(a,s,o,c,h){var d,b,_,$,j=a[1],Xt=a[2];for(_=this.qdt.find([j-h,Xt+h,j+h,Xt-h]),b=_.length,d=0;d<b;d++)if($=Geometry.distPointSegment(a,[1,s[_[d].idx1],o[_[d].idx1]],[1,s[_[d].idx2],o[_[d].idx2]]),$<c)return!0;return!1},traceComponent:function(a){var s=[],o=[],c=[];return c=this.tracing(a,1),c.length===0||(s=c[0],o=c[1]),c[2]||(c=this.tracing(a,-1),c.length===0||(s=c[0].reverse().concat(s.slice(1)),o=c[1].reverse().concat(o.slice(1)))),s.length>0&&s.length<6&&(s.push(s[s.length-1]),o.push(o[o.length-1])),[s,o]},tracing:function(a,s){var o=[],c=[],h,d=[],b=[],_,$,j,Xt,Lt,fr,Jr,Js=0,qs=0,zo=!1,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1=!1,i1=!1,s1=this.config.kappa_0,c1=this.config.delta_0,h1=this.config.alpha_0,m1=this.config.h_initial,l1=this.config.max_steps,f1=s,p1=[],d1=[],b1=[],C1,g1,o1,S1;if(o=a.slice(1),p1.push(o[0]),d1.push(o[1]),_=this.tangent(o),_===!1)return[];this.dfx(o[0],o[1]),this.dfy(o[0],o[1]);do{if(_=this.tangent(o),_===!1){o=d.slice(),p1.push(o[0]),d1.push(o[1]);break}if(p1.length===1)j=_.slice();else if(p1.length===2)b1.push(p1.length-1);else if(a1&&p1.length>2&&!i1){if(tu=Geometry.distPointSegment([1,o[0],o[1]],[1,p1[0],d1[0]],[1,p1[1],d1[1]]),tu<this.config.loop_dist*m1&&Mat.innerProduct(_,j,2)>this.config.loop_dir){o=a.slice(1),p1.push(o[0]),d1.push(o[1]),zo=!0;break}if(this.config.loop_detection){for(C1=p1.length-1,g1=Math.floor(Mat.log2(C1)),o1=0;o1<=g1&&(tu=Geometry.distPointSegment([1,o[0],o[1]],[1,p1[b1[o1]-1],d1[b1[o1]-1]],[1,p1[b1[o1]],d1[b1[o1]]]),!(tu<this.config.loop_dist*m1&&($=this.tangent([p1[b1[o1]],d1[b1[o1]]]),Mat.innerProduct(_,$,2)>this.config.loop_dir)));o1++);if(o1<=g1){zo=!0;break}for(g1=1,S1=0,o1=0;o1<100&&(C1+1)%g1===0;o1++)g1*=2,S1++;b1[S1]=C1}}d[0]=o[0]+m1*f1*_[0],d[1]=o[1]+m1*f1*_[1],qs=0;do Lt=[this.dfx(d[0],d[1]),this.dfy(d[0],d[1])],Oo=Lt[0]*Lt[0]+Lt[1]*Lt[1],fr=this.f(d[0],d[1])/Oo,b[0]=d[0]-Lt[0]*fr,b[1]=d[1]-Lt[1]*fr,qs===0?js=Math.abs(fr)*Math.sqrt(Oo):qs===1&&(eu=Math.abs(fr)*Math.sqrt(Oo)),d[0]=b[0],d[1]=b[1],qs++;while(qs<20&&Math.abs(this.f(d[0],d[1]))>this.config.tol_newton);if(t1=js,qs>1?vu=eu/js:vu=0,$=this.tangent(d),Jr=Mat.innerProduct(_,$,2),Jr=Math.max(-1,Math.min(1,Jr)),e1=Math.acos(Jr),i1=!1,Bo=Geometry.distance(o,d,2),Bo<this.config.tol_progress){o=d.slice(),p1.push(o[0]),d1.push(o[1]);break}else if(Jr<0&&!(m1>this.config.h_critical))if(i1=!0,this.isBifurcation(o,this.config.tol_cusp))f1*=-1,e1=0;else{o=d.slice(),p1.push(o[0]),d1.push(o[1]);break}if(!i1&&(r1=Math.max(Math.sqrt(vu/s1),Math.sqrt(t1/c1),e1/h1),isNaN(r1)&&(r1=1),r1=Math.max(Math.min(r1,2),.5),m1/=r1,m1=Math.min(this.config.h_max,m1),r1>=2)){if(Js++,Js>=3*l1)break;a1=!1;continue}o=d.slice(),p1.push(o[0]),d1.push(o[1]),a1=!0,Js++}while(Js<l1&&o[0]>=this.bbox[0]&&o[1]<=this.bbox[1]&&o[0]<=this.bbox[2]&&o[1]>=this.bbox[3]);return h=p1.length,c=[p1[h-2],d1[h-2]],o[0]<this.bbox[0]&&(o[0]!==c[0]&&(Xt=(this.bbox[0]-c[0])/(o[0]-c[0]),o[1]!==c[1]&&(o[1]=c[1]+Xt*(o[1]-c[1]))),o[0]=this.bbox[0]),o[0]>this.bbox[2]&&(o[0]!==c[0]&&(Xt=(this.bbox[2]-c[0])/(o[0]-c[0]),o[1]!==c[1]&&(o[1]=c[1]+Xt*(o[1]-c[1]))),o[0]=this.bbox[2]),o[1]<this.bbox[3]&&(o[1]!==c[1]&&(Xt=(this.bbox[3]-c[1])/(o[1]-c[1]),o[0]!==c[0]&&(o[0]=c[0]+Xt*(o[0]-c[0]))),o[1]=this.bbox[3]),o[1]>this.bbox[1]&&(o[1]!==c[1]&&(Xt=(this.bbox[1]-c[1])/(o[1]-c[1]),o[0]!==c[0]&&(o[0]=c[0]+Xt*(o[0]-c[0]))),o[1]=this.bbox[1]),p1[h-1]=o[0],d1[h-1]=o[1],[p1,d1,zo]},isBifurcation:function(a,s){var o=Mat.eps*Mat.eps*100,c,h,d,b,_,$,j,Xt,Lt,fr;return c=a[0],h=a[1],d=.5*(this.dfx(c+o,h)-this.dfx(c-o,h))/o,b=.5*(this.dfx(c,h+o)-this.dfx(c,h-o))/o,_=.5*(this.dfy(c+o,h)-this.dfy(c-o,h))/o,$=.5*(this.dfy(c,h+o)-this.dfy(c,h-o))/o,j=d+$,fr=j*j-4*(d*$-b*_),Xt=.5*(j+Math.sqrt(fr)),Lt=.5*(j-Math.sqrt(fr)),Math.abs(Xt)>s&&Math.abs(Lt)>s},handleCriticalPoint:function(a,s,o,c){var h=Math.atan2(c*s[1],c*s[0]),d=function(j){var Xt=a[0]+o*Math.cos(j),Lt=a[1]+o*Math.sin(j);return this.f(Xt,Lt)},b,_,$;return $=Numerics.root(d,h),b=a[0]+o*Math.cos($),_=a[1]+o*Math.sin($),[b,_]},updateA:function(a,s,o){var c=[o[0]-s[0],o[1]-s[1]],h=this.f(o[0],o[1])-this.f(s[0],s[1]),d,b;return b=c[0]*c[0]+c[1]*c[1],d=h-(a[0]*c[0]+a[1]*c[1]),d/=b,a[0]+=d*c[0],a[1]+=d*c[1],a},tangent_A:function(a){var s=[-a[1],a[0]],o=Mat.norm(s,2);return o<Mat.eps,[s[0]/o,s[1]/o]},tangent:function(a){var s=[-this.dfy(a[0],a[1]),this.dfx(a[0],a[1])],o=Mat.norm(s,2);return o<Mat.eps*Mat.eps?!1:[s[0]/o,s[1]/o]}});const ImplicitPlot=Mat.ImplicitPlot;Mat.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo=!0;_=a[0];do{if(!_)break;b=_.next,_.rtype>this.MP_EXPLICIT&&(_.x-b.x)*(_.x-b.x)+(_.y-b.y)*(_.y-b.y)<this.EPS_SQ&&(_.rtype=this.MP_EXPLICIT,_.ltype===this.MP_OPEN&&(_.ltype=this.MP_CURL,_.set_left_curl(this.UNITY)),b.ltype=this.MP_EXPLICIT,b.rtype===this.MP_OPEN&&(b.rtype=this.MP_CURL,b.set_right_curl(this.UNITY)),_.rx=_.x,b.lx=_.x,_.ry=_.y,b.ly=_.y),_=b}while(_!==a[0]);for(o=a[0];zo&&!(o.ltype!==this.MP_OPEN||o.rtype!==this.MP_OPEN);)if(o=o.next,o===a[0]){o.ltype=this.MP_END_CYCLE;break}for(_=o;zo&&_;){if(b=_.next,_.rtype>=this.MP_GIVEN){for(;b.ltype===this.MP_OPEN&&b.rtype===this.MP_OPEN;)b=b.next;for(c=0,$=_,d=a.length,fr=[],Jr=[],Js=[],qs=[null];zo&&(Xt=$.next,fr.push(Xt.x-$.x),Jr.push(Xt.y-$.y),Js.push(this.mp_pyth_add(fr[c],Jr[c])),c>0&&(Lt=Jr[c-1]/Js[c-1],j=fr[c-1]/Js[c-1],qs.push(Math.atan2(Jr[c]*j-fr[c]*Lt,fr[c]*j+Jr[c]*Lt))),c++,$=Xt,$===b&&(d=c),!(c>=d&&$.ltype!==this.MP_END_CYCLE)););c===d?qs.push(0):qs.push(qs[1]),b.ltype===this.MP_OPEN&&(h=b.rx-b.x,s=b.ry-b.y,h*h+s*s<this.EPS_SQ?(b.ltype=this.MP_CURL,b.set_left_curl(this.UNITY)):(b.ltype=this.MP_GIVEN,b.set_left_given(Math.atan2(s,h)))),_.rtype===this.MP_OPEN&&_.ltype===this.MP_EXPLICIT&&(h=_.x-_.lx,s=_.y-_.ly,h*h+s*s<this.EPS_SQ?(_.rtype=this.MP_CURL,_.set_right_curl(this.UNITY)):(_.rtype=this.MP_GIVEN,_.set_right_given(Math.atan2(s,h)))),this.mp_solve_choices(_,b,d,fr,Jr,Js,qs)}else _.rtype===this.MP_ENDPOINT&&(_.rx=_.x,_.ry=_.y,b.lx=b.x,b.ly=b.y);if(_=b,_===o)break}},mp_solve_choices:function(a,s,o,c,h,d,b){var _,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1,l1,f1=!0;for(Lt=d.length+1,zo=new Array(Lt),qs=new Array(Lt),j=new Array(Lt),Bo=new Array(Lt),m1=0;m1<Lt;m1++)Bo[m1]=j[m1]=qs[m1]=zo[m1]=0;for(Jr=0,Js=a,eu=0;f1;){if(Oo=Js.next,Jr===0)if(Js.rtype===this.MP_GIVEN){if(Oo.ltype===this.MP_GIVEN){_=Math.atan2(h[0],c[0]),r1=this.mp_n_sin_cos(a.right_given()-_),a1=r1[0],i1=r1[1],s1=this.mp_n_sin_cos(s.left_given()-_),c1=s1[0],h1=s1[1],this.mp_set_controls(a,s,c[0],h[0],i1,a1,-h1,c1);return}j[0]=Js.right_given()-Math.atan2(h[0],c[0]),j[0]=this.reduce_angle(j[0]),zo[0]=0,qs[0]=0}else if(Js.rtype===this.MP_CURL){if(Oo.ltype===this.MP_CURL){a.rtype=this.MP_EXPLICIT,s.ltype=this.MP_EXPLICIT,js=Math.abs(s.left_tension()),vu=Math.abs(a.right_tension()),tu=this.UNITY/(3*vu),a.rx=a.x+c[0]*tu,a.ry=a.y+h[0]*tu,tu=this.UNITY/(3*js),s.lx=s.x-c[0]*tu,s.ly=s.y-h[0]*tu;return}e1=Js.right_curl(),js=Math.abs(Oo.left_tension()),vu=Math.abs(Js.right_tension()),zo[0]=this.mp_curl_ratio(e1,vu,js),j[0]=-b[1]*zo[0],qs[0]=0}else Js.rtype===this.MP_OPEN&&(zo[0]=0,j[0]=0,qs[0]=this.FRACTION_ONE);else if(Js.ltype===this.MP_END_CYCLE||Js.ltype===this.MP_OPEN){if(_=this.UNITY/(3*Math.abs(eu.right_tension())-this.UNITY),t1=d[Jr]*(this.FRACTION_THREE-this.UNITY/Math.abs(eu.right_tension())),Xt=this.UNITY/(3*Math.abs(Oo.left_tension())-this.UNITY),fr=d[Jr-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(Oo.left_tension())),e1=this.FRACTION_ONE-zo[Jr-1]*_,t1=t1*e1,js=Math.abs(Js.left_tension()),vu=Math.abs(Js.right_tension()),js<vu?t1*=Math.pow(js/vu,2):js>vu&&(fr*=Math.pow(vu/js,2)),tu=fr/(fr+t1),zo[Jr]=tu*Xt,$=-b[Jr+1]*zo[Jr],eu.rtype===this.MP_CURL?(qs[Jr]=0,j[Jr]=$-b[1]*(this.FRACTION_ONE-tu)):(tu=(this.FRACTION_ONE-tu)/e1,$=$-b[Jr]*tu,tu=tu*_,j[Jr]=$-j[Jr-1]*tu,qs[Jr]=-qs[Jr-1]*tu),Js.ltype===this.MP_END_CYCLE){for(_=0,Xt=this.FRACTION_ONE;f1&&(Jr-=1,Jr===0&&(Jr=o),_=j[Jr]-_*zo[Jr],Xt=qs[Jr]-Xt*zo[Jr],Jr!==o););for(_=_/(this.FRACTION_ONE-Xt),Bo[o]=_,j[0]=_,l1=1;l1<o;l1++)j[l1]=j[l1]+_*qs[l1];break}}else{if(Js.ltype===this.MP_CURL){e1=Js.left_curl(),js=Math.abs(Js.left_tension()),vu=Math.abs(eu.right_tension()),tu=this.mp_curl_ratio(e1,js,vu),Bo[o]=-(j[o-1]*tu)/(this.FRACTION_ONE-tu*zo[o-1]);break}if(Js.ltype===this.MP_GIVEN){Bo[o]=Js.left_given()-Math.atan2(h[o-1],c[o-1]),Bo[o]=this.reduce_angle(Bo[o]);break}}eu=Js,Js=Oo,Jr+=1}for(Jr=o-1;Jr>-1;Jr--)Bo[Jr]=j[Jr]-Bo[Jr+1]*zo[Jr];for(Js=a,Jr=0;f1&&(Oo=Js.next,r1=this.mp_n_sin_cos(Bo[Jr]),a1=r1[0],i1=r1[1],s1=this.mp_n_sin_cos(-b[Jr+1]-Bo[Jr+1]),c1=s1[0],h1=s1[1],this.mp_set_controls(Js,Oo,c[Jr],h[Jr],i1,a1,h1,c1),Jr++,Js=Oo,Jr!==o););},mp_n_sin_cos:function(a){return[Math.cos(a),Math.sin(a)]},mp_set_controls:function(a,s,o,c,h,d,b,_){var $,j,Xt,Lt,fr;Xt=Math.abs(s.left_tension()),$=Math.abs(a.right_tension()),fr=this.mp_velocity(h,d,b,_,$),j=this.mp_velocity(b,_,h,d,Xt),(a.right_tension()<0||s.left_tension()<0)&&(h>=0&&b>=0||h<=0&&b<=0)&&(Lt=Math.abs(h)*_+Math.abs(b)*d,Lt>0&&(Lt*=1.00024414062,a.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(b),this.FRACTION_ONE,fr,Lt)<0&&(fr=Math.abs(b)/Lt),s.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(h),this.FRACTION_ONE,j,Lt)<0&&(j=Math.abs(h)/Lt))),a.rx=a.x+(o*d-c*h)*fr,a.ry=a.y+(c*d+o*h)*fr,s.lx=s.x-(o*_+c*b)*j,s.ly=s.y-(c*_-o*b)*j,a.rtype=this.MP_EXPLICIT,s.ltype=this.MP_EXPLICIT},mp_pyth_add:function(a,s){return Mat.hypot(a,s)},mp_curl_ratio:function(a,s,o){var c=1/s,h=1/o;return Math.min(4,((3-c)*c*c*a+h*h*h)/(c*c*c*a+(3-h)*h*h))},mp_ab_vs_cd:function(a,s,o,c){return a*s===o*c?0:a*s>o*c?1:-1},mp_velocity:function(a,s,o,c,h){return Math.min(4,(2+Math.sqrt(2)*(a-o/16)*(o-a/16)*(s-c))/(1.5*h*(2+(Math.sqrt(5)-1)*s+(3-Math.sqrt(5))*c)))},reduce_angle:function(a){return Math.abs(a)>this.ONE_EIGHTY_DEG&&(a>0?a-=this.THREE_SIXTY_DEG:a+=this.THREE_SIXTY_DEG),a},makeknots:function(a,s){var o,c,h=[];for(c=a.length,o=0;o<c;o++)h.push({x:a[o][0],y:a[o][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:s,ry:s,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(d){this.rx=d||0},set_left_curl:function(d){this.lx=d||0}});for(c=h.length,o=0;o<c;o++)h[o].next=h[o+1]||h[o],h[o].set_right_given=h[o].set_right_curl,h[o].set_left_given=h[o].set_left_curl,h[o].right_given=h[o].right_curl,h[o].left_given=h[o].left_curl;return h[c-1].next=h[0],h},curve:function(a,s){var o,c,h,d,b,_,$=!1,j=[],Xt=[];s=s||{tension:1,direction:{},curl:{},isClosed:!1},b=1,s.hasOwnProperty("tension")&&(b=JXG$1.evaluate(s.tension)),o=this.makeknots(a,b),c=o.length,JXG$1.exists(s.isClosed)&&JXG$1.evaluate(s.isClosed)&&($=!0),$||(o[0].ltype=this.MP_ENDPOINT,o[0].rtype=this.MP_CURL,o[c-1].rtype=this.MP_ENDPOINT,o[c-1].ltype=this.MP_CURL);for(d in s)if(s.hasOwnProperty(d)){if(h=parseInt(d,10),isNaN(h)||h<0||h>=c)continue;if(_=s[h],JXG$1.exists(_.type))switch(_.type){case"curl":b=JXG$1.evaluate(_.curl),h===0?(o[h].rtype=this.MP_CURL,o[h].set_right_curl(b)):h===c-1?(o[h].ltype=this.MP_CURL,o[h].set_left_curl(b)):(o[h].ltype=this.MP_CURL,o[h].rtype=this.MP_CURL,o[h].lx=b,o[h].rx=b);break}JXG$1.exists(_.direction)&&(b=JXG$1.evaluate(_.direction),JXG$1.isArray(b)?(b[0]!==!1&&(o[h].lx=b[0]*Math.PI/180,o[h].ltype=this.MP_GIVEN),b[1]!==!1&&(o[h].rx=b[1]*Math.PI/180,o[h].rtype=this.MP_GIVEN)):(o[h].lx=b*Math.PI/180,o[h].rx=b*Math.PI/180,o[h].ltype=o[h].rtype=this.MP_GIVEN)),JXG$1.exists(_.tension)&&(b=JXG$1.evaluate(_.tension),JXG$1.isArray(b)?(b[0]!==!1&&(o[h].ly=JXG$1.evaluate(b[0])),b[1]!==!1&&(o[h].ry=JXG$1.evaluate(b[1]))):(o[h].ly=b,o[h].ry=b))}for(this.make_choices(o),h=0;h<c-1;h++)j.push(o[h].x),j.push(o[h].rx),j.push(o[h+1].lx),Xt.push(o[h].y),Xt.push(o[h].ry),Xt.push(o[h+1].ly);return j.push(o[c-1].x),Xt.push(o[c-1].y),$&&(j.push(o[c-1].rx),Xt.push(o[c-1].ry),j.push(o[0].lx),Xt.push(o[0].ly),j.push(o[0].x),Xt.push(o[0].y)),[j,Xt]}};const Metapost=Mat.Metapost;Mat.Clip={_isSeparator:function(a){return isNaN(a.coords.usrCoords[1])&&isNaN(a.coords.usrCoords[2])},makeDoublyLinkedList:function(a){var s,o=null,c=[],h=a.length;if(h>0)for(s=0;s<h;s++){if(this._isSeparator(a[s])){a[s]._next=a[(s+1)%h],a[s]._prev=a[(h+s-1)%h];continue}o===null&&(o=s,c.push(o)),this._isSeparator(a[(s+1)%h])||s===h-1?(a[s]._next=a[o],a[o]._prev=a[s],a[s]._end=!0,o=null):(a[s]._next=a[(s+1)%h],a[o]._prev=a[s]),this._isSeparator(a[(h+s-1)%h])||(a[s]._prev=a[(h+s-1)%h])}return c},Vertex:function(a,s,o,c,h,d){this.pos=s,this.intersection=!0,this.coords=a,this.elementClass=Const.OBJECT_CLASS_POINT,this.data={alpha:o,path:c,pathname:h,done:!1,type:d,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(a,s,o){var c=a.length,h=Mat.eps*Mat.eps;c>0&&Math.abs(a[c-1].coords.usrCoords[0]-s.usrCoords[0])<h&&Math.abs(a[c-1].coords.usrCoords[1]-s.usrCoords[1])<h&&Math.abs(a[c-1].coords.usrCoords[2]-s.usrCoords[2])<h||a.push({pos:o,intersection:!1,coords:s,elementClass:Const.OBJECT_CLASS_POINT})},sortIntersections:function(a){var s,o,c,h,d,b,_=[],$=a.length;for(s=0;s<$;s++)if(a[s].sort(function(j,Xt){return j.data.alpha>Xt.data.alpha?1:-1}),a[s].length>0){for(d=a[s].length-1,c=a[s][0],h=c.data.path[c.pos],b=h._next,s===$-1&&(h._end=!1),c.data.alpha===0&&c.data.type==="T"?(h.intersection=!0,h.data=c.data,h.neighbour=c.neighbour,h.neighbour.neighbour=h,h.entry_exit=!1,a[s][0]=h):(c._prev=h,c._prev._next=c),o=1;o<=d;o++)c=a[s][o],c._prev=a[s][o-1],c._prev._next=c;c=a[s][d],c._next=b,c._next._prev=c,s===$-1&&(c._end=!0),_=_.concat(a[s])}return _},_inbetween:function(a,s,o){var c,h=Mat.eps*Mat.eps,d=o[1]-s[1],b=o[2]-s[2],_=a[1]-s[1],$=a[2]-s[2];return d===0&&b===0&&_===0&&$===0?!0:(Math.abs(_)<h&&Math.abs(d)<h?c=$/b:c=_/d,Math.abs(c)<h&&(c=0),c)},_print_array:function(a){var s,o;for(s=0;s<a.length;s++)try{o="",a[s]._end&&(o=" end"),console.log(s,a[s].coords.usrCoords,a[s].data.type,"	","prev",a[s]._prev.coords.usrCoords,"next",a[s]._next.coords.usrCoords+o)}catch{console.log(s,a[s].coords.usrCoords)}},_print_list:function(a){for(var s=0,o;s<100&&(a.data?o=a.data.alpha:o="-",console.log("	",a.coords.usrCoords,`
		is:`,a.intersection,"end:",a._end,o,`
		-:`,a._prev.coords.usrCoords,`
		+:`,a._next.coords.usrCoords,`
		n:`,a.intersection?a.neighbour.coords.usrCoords:"-"),!a._end);)a=a._next,s++},_noOverlap:function(a,s,o,c){var h,d=Math.sqrt(Mat.eps),b,_,$,j,Xt=!1;for(h=0;h<3;h++)if(b=Math.min(a[h],s[h]),_=Math.max(a[h],s[h]),$=Math.min(o[h],c[h]),j=Math.max(o[h],c[h]),_<$-d||b>j+d){Xt=!0;break}return Xt},findIntersections:function(a,s,o){var c=[],h=Mat.eps*100,d,b,_,$=a.length,j=s.length,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu=[],Bo=[],vu=[],t1=[],e1=!1,r1=!1;for(b=0;b<j;b++)t1.push([]);for(d=0;d<$;d++){if(vu.push([]),this._isSeparator(a[d])||this._isSeparator(a[(d+1)%$])){e1=!0;continue}if(e1&&d===$-1)break;for(Xt=a[d].coords.usrCoords,Lt=a[(d+1)%$].coords.usrCoords,b=0;b<j;b++){if(this._isSeparator(s[b])||this._isSeparator(s[(b+1)%j])){r1=!0;continue}if(r1&&b===j-1)break;if(fr=s[b].coords.usrCoords,Jr=s[(b+1)%j].coords.usrCoords,!this._noOverlap(Xt,Lt,fr,Jr)&&(c=Geometry.meetSegmentSegment(Xt,Lt,fr,Jr),Js=Geometry.distance(Xt,Lt,3),qs=Geometry.distance(fr,Jr,3),c[1]*Js>-h&&c[1]<1-h/Js&&c[2]*qs>-h&&c[2]<1-h/qs||c[1]===1/0&&c[2]===1/0&&Mat.norm(c[0],3)<h)){if(_=new Coords(Const.COORDS_BY_USER,c[0],o),js="X",Math.abs(c[1])*Js<h||Math.abs(c[2])*qs<h)js="T",Math.abs(c[1])*Js<h&&(c[1]=0),Math.abs(c[2])*qs<h&&(c[2]=0),c[1]===0?_=new Coords(Const.COORDS_BY_USER,Xt,o):_=new Coords(Const.COORDS_BY_USER,fr,o);else if(c[1]===1/0&&c[2]===1/0&&Mat.norm(c[0],3)<h){zo=this._inbetween(Xt,fr,Jr),zo>=0&&zo<1&&(js="T",_=new Coords(Const.COORDS_BY_USER,Xt,o),c[1]=0,c[2]=zo,eu=new this.Vertex(_,d,c[1],a,"S",js),Oo=new this.Vertex(_,b,c[2],s,"C",js),eu.neighbour=Oo,Oo.neighbour=eu,vu[d].push(eu),t1[b].push(Oo)),zo=this._inbetween(fr,Xt,Lt),Geometry.distance(Xt,fr,3)>h&&zo>=0&&zo<1&&(js="T",_=new Coords(Const.COORDS_BY_USER,fr,o),c[1]=zo,c[2]=0,eu=new this.Vertex(_,d,c[1],a,"S",js),Oo=new this.Vertex(_,b,c[2],s,"C",js),eu.neighbour=Oo,Oo.neighbour=eu,vu[d].push(eu),t1[b].push(Oo));continue}eu=new this.Vertex(_,d,c[1],a,"S",js),Oo=new this.Vertex(_,b,c[2],s,"C",js),eu.neighbour=Oo,Oo.neighbour=eu,vu[d].push(eu),t1[b].push(Oo)}}}for(tu=this.sortIntersections(vu),d=0;d<tu.length;d++)tu[d].data.idx=d,tu[d].neighbour.data.idx=d;return Bo=this.sortIntersections(t1),[tu,Bo]},_getPosition:function(a,s,o,c){var h=Geometry.det3p(a,s,o),d=Geometry.det3p(a,o,c),b=Geometry.det3p(s,o,c);return b>=0?h>=0&&d>=0?"left":"right":h>=0||d>=0?"left":"right"},_classifyDegenerateIntersections:function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs=!0;for(j=Geometry.det3p,_=0,a._tours=0;qs;){if(a.intersection&&a.data.type==="T"&&(s=a._next.coords.usrCoords,o=a._prev.coords.usrCoords,Geometry.distance(a.coords.usrCoords,s,3)<Mat.eps&&(s=a._next._next.coords.usrCoords),Geometry.distance(a.coords.usrCoords,o,3)<Mat.eps&&(o=a._prev._prev.coords.usrCoords),d=a.neighbour,h=d._prev.coords.usrCoords,c=d._next.coords.usrCoords,Geometry.distance(d.coords.usrCoords,c,3)<Mat.eps&&(c=d._next._next.coords.usrCoords),Geometry.distance(d.coords.usrCoords,h,3)<Mat.eps&&(h=d._prev._prev.coords.usrCoords),Lt=j(a.coords.usrCoords,o,h),fr=j(a.coords.usrCoords,s,c),Jr=j(a.coords.usrCoords,o,c),Js=j(a.coords.usrCoords,s,h),Lt===0&&fr===0&&Jr===0&&Js===0&&(a.coords.usrCoords[1]*=1+Math.random()*Mat.eps,a.coords.usrCoords[2]*=1+Math.random()*Mat.eps,d.coords.usrCoords[1]=a.coords.usrCoords[1],d.coords.usrCoords[2]=a.coords.usrCoords[2],Lt=j(a.coords.usrCoords,o,h),fr=j(a.coords.usrCoords,s,c),Jr=j(a.coords.usrCoords,o,c),Js=j(a.coords.usrCoords,s,h)),Xt=!1,Lt===0?Geometry.affineRatio(a.coords.usrCoords,o,h)<0&&(Xt=!0):fr===0?Geometry.affineRatio(a.coords.usrCoords,s,c)<0&&(Xt=!0):Jr===0?Geometry.affineRatio(a.coords.usrCoords,o,c)>0&&(Xt=!0):Js===0&&Geometry.affineRatio(a.coords.usrCoords,s,h)>0&&(Xt=!0),Xt&&($=h,h=c,c=$,$=Lt,Lt=Jr,Jr=$,$=fr,fr=Js,Js=$),JXG$1.exists(a.delayedStatus)||(a.delayedStatus=[]),Lt===0&&fr===0?a.delayedStatus=["on","on"]:Lt===0?(b=this._getPosition(s,h,d.coords.usrCoords,c),a.delayedStatus=["on",b]):fr===0?(b=this._getPosition(o,h,d.coords.usrCoords,c),a.delayedStatus=[b,"on"]):a.delayedStatus.length===0&&(this._getPosition(o,h,d.coords.usrCoords,c)!==this._getPosition(s,h,d.coords.usrCoords,c)?a.data.type="X":a.data.type="B")),JXG$1.exists(a._tours)&&a._tours++,a._tours>3||a._end||_>1e3){_>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),JXG$1.exists(a._tours)&&delete a._tours;break}a.intersection&&_++,a=a._next}},_handleIntersectionChains:function(a){for(var s=0,o="Null",c,h=!0,d=!1,b=!1;h&&(a.intersection===!0&&(a.data.type==="T"&&(a.delayedStatus[0]!=="on"&&a.delayedStatus[1]==="on"?(d=!0,c=a,o=a.delayedStatus[0]):d&&a.delayedStatus[0]==="on"&&a.delayedStatus[1]==="on"?a.data.type="B":d&&a.delayedStatus[0]==="on"&&a.delayedStatus[1]!=="on"&&(d=!1,o===a.delayedStatus[1]?(c.data.type="DB",a.data.type="DB"):(c.data.type="DX",a.data.type="DX"))),s++),a._end&&(b=!0),!(b&&!d));){if(s>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}a=a._next}},_handleFullyDegenerateCase:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu=[a,s];for(d=0;d<2;d++){for(c=eu[d],Jr=c.length,Lt=0,js=!0;Lt<Jr;Lt++)if(!c[Lt].intersection){js=!1;break}if(js)for(h=eu[(d+1)%2],Js=h.length,Lt=0;Lt<Jr;Lt++){for($=c[Lt].coords.usrCoords,j=c[Lt]._next.coords.usrCoords,b=[($[0]+j[0])*.5,($[1]+j[1])*.5,($[2]+j[2])*.5],fr=0,qs=!1;fr<Js;fr++)if(Math.abs(Geometry.det3p(h[fr].coords.usrCoords,h[(fr+1)%Js].coords.usrCoords,b))<Mat.eps){qs=!0;break}if(!qs){_=new Coords(Const.COORDS_BY_USER,b,o),Xt={pos:Lt,intersection:!1,coords:_,elementClass:Const.OBJECT_CLASS_POINT},zo=c[Lt]._next,c[Lt]._next=Xt,Xt._prev=c[Lt],Xt._next=zo,zo._prev=Xt,c[Lt]._end&&(c[Lt]._end=!1,Xt._end=!0);break}}}},_getStatus:function(a,s){for(var o;a.intersection&&!a._end;)a=a._next;return Geometry.windingNumber(a.coords.usrCoords,s)===0?o="entry":o="exit",[a,o]},markEntryExit:function(a,s,o){var c,h,d,b,_,$,j,Xt=!0,Lt=null,fr=0;for($=o.length,_=0;_<$;_++)for(j=o[_],this._classifyDegenerateIntersections(a[j]),this._handleIntersectionChains(a[j]),b=this._getStatus(a[j],s),h=b[0],c=b[1],h._starter=!0,d=0,Lt=null,fr=0;Xt&&(h.intersection===!0&&(h.data.type==="X"&&fr===1&&(Lt.entry_exit=c,c==="exit"&&(Lt.data.type="X"),fr=2),(h.data.type==="X"||h.data.type==="DB")&&(h.entry_exit=c,c=c==="entry"?"exit":"entry"),h.data.type==="DX"&&(fr===0?(Lt=h,fr=1):fr===1?(h.entry_exit=c,Lt.entry_exit=c,c==="exit"?Lt.data.type="X":h.data.type="X",c=c==="entry"?"exit":"entry",Lt=null,fr=0):fr===2&&(h.entry_exit=c,h.data.type="X",c=c==="entry"?"exit":"entry",Lt=null,fr=0))),h=h._next,!(JXG$1.exists(h._starter)||d>1e4));)d++},_stayOnPath:function(a,s){var o=!0;return a.intersection&&a.data.type!=="B"&&(o=s===a.entry_exit),o},_addVertex:function(a,s,o){return!isNaN(s.coords.usrCoords[1])&&!isNaN(s.coords.usrCoords[2])&&a.push(s),s.intersection&&s.data.done?(o&&console.log("Add last intersection point",s.coords.usrCoords,"on",s.data.pathname,s.entry_exit,s.data.type),!0):(s.intersection&&(s.data.done=!0,o&&console.log("Add intersection point",s.coords.usrCoords,"on",s.data.pathname,s.entry_exit,s.data.type)),!1)},tracing:function(a,s,o){for(var c,h,d,b,_=0,$=1e4,j=0,Xt=[],Lt=!1,fr=!1;j<s.length&&_<$;){if(d=s[j],d.data.done||d.data.type!=="X"){j++;continue}Xt.length>0&&Xt.push([NaN,NaN]),b=d.data.idx,c=a,Lt=this._addVertex(Xt,d,fr),h=d.entry_exit;do{if(Lt)break;if(o==="intersection"&&d.entry_exit==="entry"||o==="union"&&d.entry_exit==="exit"||o==="difference"&&c===a==(d.entry_exit==="exit")){do if(d=d._next,Lt=this._addVertex(Xt,d,fr),Lt)break;while(this._stayOnPath(d,h));_++}else{do if(d=d._prev,Lt=this._addVertex(Xt,d,fr),Lt)break;while(this._stayOnPath(d,h));_++}if(Lt)break;if(!d.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",_),[[0],[0]];if(d=d.neighbour,d.data.done)break;d.data.done=!0,h=d.entry_exit,c=d.data.path}while(d.data.idx!==b&&_<$);_>=$&&console.log("Tracing: stopping an infinite loop!",_),j++}return this._getCoordsArrays(Xt,!1)},isEmptyCase:function(a,s,o){return o==="intersection"&&(a.length===0||s.length===0)||o==="union"&&a.length===0&&s.length===0||o==="difference"&&a.length===0},_getCoordsArrays:function(a,s){var o=[],c=[],h,d=a.length;for(h=0;h<d;h++)a[h].coords?(o.push(a[h].coords.usrCoords[1]),c.push(a[h].coords.usrCoords[2])):(o.push(a[h][0]),c.push(a[h][1]));return s&&d>0&&(a[0].coords?(o.push(a[0].coords.usrCoords[1]),c.push(a[0].coords.usrCoords[2])):(o.push(a[0][0]),c.push(a[0][1]))),[o,c]},handleEmptyIntersection:function(a,s,o){var c,h,d=!1,b=[];if(a.length===0)return o==="union"?b=s:b=[],this._getCoordsArrays(b,!0);if(s.length===0)return o==="intersection"?b=[]:b=a,this._getCoordsArrays(b,!0);if(a.length>0)for(c=a[0];c.intersection&&(c=c._next,!c._end););if(s.length>0)for(h=s[0];h.intersection&&(h=h._next,!h._end););return Geometry.windingNumber(c.coords.usrCoords,s)===0?Geometry.windingNumber(h.coords.usrCoords,a)!==0?(o==="union"?(JXG$1.concat(b,a),b.push(a[0])):o==="difference"&&(JXG$1.concat(b,a),b.push(a[0]),Geometry.signedPolygon(a)*Geometry.signedPolygon(s)>0&&b.reverse(),b.push([NaN,NaN])),(o==="difference"||o==="intersection")&&(JXG$1.concat(b,s),b.push(s[0]),d=!1)):o==="difference"?(JXG$1.concat(b,a),d=!0):o==="union"&&(JXG$1.concat(b,a),b.push(a[0]),b.push([NaN,NaN]),JXG$1.concat(b,s),b.push(s[0])):o==="intersection"?(JXG$1.concat(b,a),d=!0):o==="union"&&(JXG$1.concat(b,s),b.push(s[0])),this._getCoordsArrays(b,d)},_countCrossingIntersections:function(a){var s,o=a.length,c=0;for(s=0;s<o;s++)a[s].data.type==="X"&&c++;return c},_getPath:function(a,s){var o,c,h,d,b,_,$,j=[];if(a.elementClass===Const.OBJECT_CLASS_CURVE&&(a.type===Const.OBJECT_TYPE_ARC||a.type===Const.OBJECT_TYPE_SECTOR)){for(b=Geometry.rad(a.radiuspoint,a.center,a.anglepoint),$=Math.floor(b*180/Math.PI),h=a.Radius(),d=b/$,_=Math.atan2(a.radiuspoint.coords.usrCoords[2]-a.center.coords.usrCoords[2],a.radiuspoint.coords.usrCoords[1]-a.center.coords.usrCoords[1]),a.type===Const.OBJECT_TYPE_SECTOR&&this._addToList(j,a.center.coords,0),o=0;o<=$;o++)this._addToList(j,new Coords(Const.COORDS_BY_USER,[a.center.coords.usrCoords[0],a.center.coords.usrCoords[1]+Math.cos(o*d+_)*h,a.center.coords.usrCoords[2]+Math.sin(o*d+_)*h],s),o+1);a.type===Const.OBJECT_TYPE_SECTOR&&this._addToList(j,a.center.coords,$+2)}else if(a.elementClass===Const.OBJECT_CLASS_CURVE&&JXG$1.exists(a.points))for(c=a.numberPoints,o=0;o<c;o++)this._addToList(j,a.points[o],o);else if(a.type===Const.OBJECT_TYPE_POLYGON)for(o=0;o<a.vertices.length;o++)this._addToList(j,a.vertices[o].coords,o);else if(a.elementClass===Const.OBJECT_CLASS_CIRCLE)for($=359,h=a.Radius(),d=2*Math.PI/$,o=0;o<=$;o++)this._addToList(j,new Coords(Const.COORDS_BY_USER,[a.center.coords.usrCoords[0],a.center.coords.usrCoords[1]+Math.cos(o*d)*h,a.center.coords.usrCoords[2]+Math.sin(o*d)*h],s),o);else if(JXG$1.isArray(a))for(c=a.length,o=0;o<c;o++)JXG$1.exists(a[o].coords)?this._addToList(j,a[o].coords,o):JXG$1.isArray(a[o])?this._addToList(j,new Coords(Const.COORDS_BY_USER,a[o],s),o):JXG$1.exists(a[o].usrCoords)&&this._addToList(j,a[o],o);return j},greinerHormann:function(a,s,o,c){var h,d=[],b=[],_=[],$,j,Xt=[];return d=this._getPath(a,c),h=d.length,h>0&&Geometry.distance(d[0].coords.usrCoords,d[h-1].coords.usrCoords,3)<Mat.eps&&d.pop(),b=this._getPath(s,c),h=b.length,h>0&&Geometry.distance(b[0].coords.usrCoords,b[h-1].coords.usrCoords,3)<Mat.eps*Mat.eps&&b.pop(),this.isEmptyCase(d,b,o)?[[],[]]:($=this.makeDoublyLinkedList(d),j=this.makeDoublyLinkedList(b),Xt=this.findIntersections(d,b,c),_=Xt[0],this._handleFullyDegenerateCase(d,b,c),this.markEntryExit(d,b,$),this.markEntryExit(b,d,j),this._countCrossingIntersections(_)===0?this.handleEmptyIntersection(d,b,o):this.tracing(d,_,o))},union:function(a,s,o){return this.greinerHormann(a,s,"union",o)},intersection:function(a,s,o){return this.greinerHormann(a,s,"intersection",o)},difference:function(a,s,o){return this.greinerHormann(a,s,"difference",o)}};const Clip=Mat.Clip;Mat.Poly={};Mat.Poly.Ring=function(a){this.vars=a};JXG$1.extend(Mat.Poly.Ring.prototype,{});Mat.Poly.Monomial=function(a,s,o){var c;if(!JXG$1.exists(a))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(JXG$1.isArray(o)||(o=[]),o=o.slice(0,a.vars.length),c=o.length;c<a.vars.length;c++)o.push(0);this.ring=a,this.coefficient=s||0,this.exponents=JXG$1.deepCopy(o)};JXG$1.extend(Mat.Poly.Monomial.prototype,{copy:function(){return new Mat.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var a=[],s;for(s=0;s<this.ring.vars.length;s++)a.push(this.ring.vars[s]+"^"+this.exponents[s]);return this.coefficient+"*"+a.join("*")}});Mat.Poly.Polynomial=function(a,s){var o=function(){},c;if(!JXG$1.exists(a))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");JXG$1.exists(s)&&JXG$1.isString(s)?c=o():c=[],this.ring=a,this.monomials=c};JXG$1.extend(Mat.Poly.Polynomial.prototype,{findSignature:function(a){var s;for(s=0;s<this.monomials.length;s++)if(JXG$1.cmpArrays(this.monomials[s].exponents,a))return s;return-1},addSubMonomial:function(a,s){var o;o=this.findSignature(a.exponents),o>-1?this.monomials[o].coefficient+=s*a.coefficient:(a.coefficient*=s,this.monomials.push(a))},add:function(a){var s;if(JXG$1.exists(a)&&a.ring===this.ring)if(JXG$1.isArray(a.exponents))this.addSubMonomial(a,1);else for(s=0;s<a.monomials.length;s++)this.addSubMonomial(a.monomials[s],1);else throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.")},sub:function(a){var s;if(JXG$1.exists(a)&&a.ring===this.ring)if(JXG$1.isArray(a.exponents))this.addSubMonomial(a,-1);else for(s=0;s<a.monomials.length;s++)this.addSubMonomial(a.monomials[s],-1);else throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.")},copy:function(){var a,s;for(s=new Mat.Poly.Polynomial(this.ring),a=0;a<this.monomials.length;a++)s.monomials.push(this.monomials[a].copy());return s},print:function(){var a=[],s;for(s=0;s<this.monomials.length;s++)a.push("("+this.monomials[s].print()+")");return a.join("+")}});Mat.Poly;JXG$1.Complex=function(a,s){this.isComplex=!0,a&&a.isComplex&&(s=a.imaginary,a=a.real),this.real=a||0,this.imaginary=s||0};JXG$1.extend(JXG$1.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(a){return JXG$1.isNumber(a)?this.real+=a:(this.real+=a.real,this.imaginary+=a.imaginary),this},sub:function(a){return JXG$1.isNumber(a)?this.real-=a:(this.real-=a.real,this.imaginary-=a.imaginary),this},mult:function(a){var s,o;return JXG$1.isNumber(a)?(this.real*=a,this.imaginary*=a):(s=this.real,o=this.imaginary,this.real=s*a.real-o*a.imaginary,this.imaginary=s*a.imaginary+o*a.real),this},div:function(a){var s,o,c;if(JXG$1.isNumber(a)){if(Math.abs(a)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=a,this.imaginary/=a}else{if(Math.abs(a.real)<Math.eps&&Math.abs(a.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;s=a.real*a.real+a.imaginary*a.imaginary,c=this.real,o=this.imaginary,this.real=(c*a.real+o*a.imaginary)/s,this.imaginary=(o*a.real-c*a.imaginary)/s}return this},conj:function(){return this.imaginary*=-1,this},abs:function(){var a=this.real,s=this.imaginary;return Math.sqrt(a*a+s*s)},angle:function(){return Math.atan2(this.imaginary,this.real)}});JXG$1.C={};JXG$1.C.add=function(a,s){var o=new JXG$1.Complex(a);return o.add(s),o};JXG$1.C.sub=function(a,s){var o=new JXG$1.Complex(a);return o.sub(s),o};JXG$1.C.mult=function(a,s){var o=new JXG$1.Complex(a);return o.mult(s),o};JXG$1.C.div=function(a,s){var o=new JXG$1.Complex(a);return o.div(s),o};JXG$1.C.conj=function(a){var s=new JXG$1.Complex(a);return s.conj(),s};JXG$1.C.abs=function(a){var s=new JXG$1.Complex(a);return s.abs()};JXG$1.C.angle=function(a){var s=new JXG$1.Complex(a);return s.angle()};JXG$1.C.copy=function(a){return new JXG$1.Complex(a)};JXG$1.Complex.C=JXG$1.C;const Complex$2=JXG$1.Complex;var simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",venetianred:"ae181e",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},colorDefs=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(a){return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];JXG$1.rgbParser=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr=a,Jr;if(!JXG$1.exists(a))return[];if(JXG$1.exists(s)&&JXG$1.exists(o)&&(fr=[a,s,o]),c=fr,Jr=!1,JXG$1.isArray(c)){for($=0;$<3;$++)Jr=Jr||/\./.test(fr[$].toString());for($=0;$<3;$++)Jr=Jr&&fr[$]>=0&&fr[$]<=1;return Jr?[Math.ceil(fr[0]*255),Math.ceil(fr[1]*255),Math.ceil(fr[2]*255)]:fr}for(typeof fr=="string"&&(c=fr),c.charAt(0)==="#"&&(c=c.slice(1,7)),c=c.replace(/ /g,"").toLowerCase(),c=simpleColors[c]||c,$=0;$<colorDefs.length;$++)d=colorDefs[$].re,b=colorDefs[$].process,_=d.exec(c),_&&(h=b(_),j=h[0],Xt=h[1],Lt=h[2]);return isNaN(j)||isNaN(Xt)||isNaN(Lt)?[]:(j=j<0||isNaN(j)?0:j>255?255:j,Xt=Xt<0||isNaN(Xt)?0:Xt>255?255:Xt,Lt=Lt<0||isNaN(Lt)?0:Lt>255?255:Lt,[j,Xt,Lt])};JXG$1.isColor=function(a){var s=new Option().style;return s.color=a,s.color!==""};JXG$1.rgb2css=function(a,s,o){var c;return c=JXG$1.rgbParser(a,s,o),"rgb("+c[0]+", "+c[1]+", "+c[2]+")"};JXG$1.rgb2hex=function(a,s,o){var c,h,d;return c=JXG$1.rgbParser(a,s,o),h=c[1],d=c[2],c=c[0],c=c.toString(16),h=h.toString(16),d=d.toString(16),c.length===1&&(c="0"+c),h.length===1&&(h="0"+h),d.length===1&&(d="0"+d),"#"+c+h+d};JXG$1.hex2rgb=function(a){return JXG$1.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),JXG$1.rgb2css(a)};JXG$1.hsv2rgb=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt;if(a=(a%360+360)%360,s===0)if(isNaN(a)||a<Mat.eps)c=o,h=o,d=o;else return"#ffffff";else switch(a>=360?$=0:$=a,$=$/60,_=Math.floor($),b=$-_,j=o*(1-s),Xt=o*(1-s*b),Lt=o*(1-s*(1-b)),_){case 0:c=o,h=Lt,d=j;break;case 1:c=Xt,h=o,d=j;break;case 2:c=j,h=o,d=Lt;break;case 3:c=j,h=Xt,d=o;break;case 4:c=Lt,h=j,d=o;break;case 5:c=o,h=j,d=Xt;break}return c=Math.round(c*255).toString(16),c=c.length===2?c:c.length===1?"0"+c:"00",h=Math.round(h*255).toString(16),h=h.length===2?h:h.length===1?"0"+h:"00",d=Math.round(d*255).toString(16),d=d.length===2?d:d.length===1?"0"+d:"00",["#",c,h,d].join("")};JXG$1.rgb2hsv=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs;return c=JXG$1.rgbParser(a,s,o),h=c[1],d=c[2],c=c[0],b=c/255,_=h/255,$=d/255,Js=Math.max(c,h,d),qs=Math.min(c,h,d),j=Js/255,Xt=qs/255,Jr=j,fr=0,Jr>0&&(fr=(Jr-Xt)/Jr),Lt=1/(j-Xt),fr>0&&(Js===c?Lt=(_-$)*Lt:Js===h?Lt=2+($-b)*Lt:Lt=4+(b-_)*Lt),Lt*=60,Lt<0&&(Lt+=360),Js===qs&&(Lt=0),[Lt,fr,Jr]};JXG$1.rgb2LMS=function(a,s,o){var c,h,d,b,_,$,j,Xt=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return c=JXG$1.rgbParser(a,s,o),h=c[1],d=c[2],c=c[0],c=Math.pow(c,.476190476),h=Math.pow(h,.476190476),d=Math.pow(d,.476190476),b=c*Xt[0][0]+h*Xt[0][1]+d*Xt[0][2],_=c*Xt[1][0]+h*Xt[1][1]+d*Xt[1][2],$=c*Xt[2][0]+h*Xt[2][1]+d*Xt[2][2],j=[b,_,$],j.l=b,j.m=_,j.s=$,j};JXG$1.LMS2rgb=function(a,s,o){var c,h,d,b,_=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],$=function(j){for(var Xt=127,Lt=64;Lt>0;){if(Math.pow(Xt,.476190476)>j)Xt-=Lt;else{if(Math.pow(Xt+1,.476190476)>j)return Xt;Xt+=Lt}Lt/=2}return Xt===254&&13.994955247<j?255:Xt};return c=a*_[0][0]+s*_[0][1]+o*_[0][2],h=a*_[1][0]+s*_[1][1]+o*_[1][2],d=a*_[2][0]+s*_[2][1]+o*_[2][2],c=$(c),h=$(h),d=$(d),b=[c,h,d],b.r=c,b.g=h,b.b=d,b};JXG$1.rgba2rgbo=function(a){var s;return a.length===9&&a.charAt(0)==="#"?(s=parseInt(a.slice(7,9).toUpperCase(),16)/255,a=a.slice(0,7)):s=1,[a,s]};JXG$1.rgbo2rgba=function(a,s){var o;return a==="none"||a==="transparent"?a:(o=Math.round(s*255).toString(16),o.length===1&&(o="0"+o),JXG$1.rgb2hex(a)+o)};JXG$1.rgb2bw=function(a){var s,o,c,h="0123456789ABCDEF";return a==="none"||(c=JXG$1.rgbParser(a),s=Math.floor(.3*c[0]+.59*c[1]+.11*c[2]),o=h.charAt(s>>4&15)+h.charAt(s&15),a="#"+o+o+o),a};JXG$1.rgb2cb=function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs="0123456789ABCDEF";if(a==="none")return a;switch(b=JXG$1.rgb2LMS(a),c=b[0],h=b[1],d=b[2],s=s.toLowerCase(),s){case"protanopia":$=-.06150039994295001,j=.08277001656812001,Xt=-.013200141220000003,Lt=.05858939668799999,fr=-.07934519995360001,Jr=.013289415272000003,Js=.6903216543277437,_=d/h,_<Js?c=-(j*h+Xt*d)/$:c=-(fr*h+Jr*d)/Lt;break;case"tritanopia":$=-.00058973116217,j=.007690316482,Xt=-.01011703519052,Lt=.025495080838999994,fr=-.0422740347,Jr=.017005316784,Js=.8349489908460004,_=h/c,_<Js?d=-($*c+j*h)/Xt:d=-(Lt*c+fr*h)/Jr;break;default:$=-.06150039994295001,j=.08277001656812001,Xt=-.013200141220000003,Lt=.05858939668799999,fr=-.07934519995360001,Jr=.013289415272000003,Js=.5763833686400911,_=d/c,_<Js?h=-($*c+Xt*d)/j:h=-(Lt*c+Jr*d)/fr;break}return o=JXG$1.LMS2rgb(c,h,d),_=qs.charAt(o[0]>>4&15)+qs.charAt(o[0]&15),a="#"+_,_=qs.charAt(o[1]>>4&15)+qs.charAt(o[1]&15),a+=_,_=qs.charAt(o[2]>>4&15)+qs.charAt(o[2]&15),a+=_,a};JXG$1.shadeColor=function(a,s){var o=JXG$1.rgbParser(a),c=o[0],h=o[1],d=o[2];return c=parseInt(c+255*s),h=parseInt(h+255*s),d=parseInt(d+255*s),c=c>0?c:0,h=h>0?h:0,d=d>0?d:0,c=c<255?c:255,h=h<255?h:255,d=d<255?d:255,c=Math.round(c),h=Math.round(h),d=Math.round(d),JXG$1.rgb2hex([c,h,d])};JXG$1.lightenColor=function(a,s){return JXG$1.shadeColor(a,s)};JXG$1.darkenColor=function(a,s){return JXG$1.shadeColor(a,-1*s)};JXG$1.autoHighlight=function(a){var s=JXG$1.rgba2rgbo(a),o=s[0],c=s[1];return a.charAt(0)==="#"?(c<.3?c*=1.8:c*=.4,JXG$1.rgbo2rgba(o,c)):a};JXG$1.contrast=function(a,s,o,c){var h,d="#000000",b,_,$,j;return s=s||"#000000",o=o||"#ffffff",c=c||7,h=JXG$1.rgbParser(a),b=JXG$1.rgbParser(d),_=.2126*Math.pow(h[0]/255,2.2)+.7152*Math.pow(h[1]/255,2.2)+.0722*Math.pow(h[2]/255,2.2),$=.2126*Math.pow(b[0]/255,2.2)+.7152*Math.pow(b[1]/255,2.2)+.0722*Math.pow(b[2]/255,2.2),_>$?j=Math.floor((_+.05)/($+.05)):j=Math.floor(($+.05)/(_+.05)),j=j-1,j>c?s:o};JXG$1.setClassicColors=function(){JXG$1.Options.elements.strokeColor="blue",JXG$1.Options.elements.fillColor="red",JXG$1.Options.hatch.strokeColor="blue",JXG$1.Options.angle.fillColor="#ff7f00",JXG$1.Options.angle.highlightFillColor="#ff7f00",JXG$1.Options.angle.strokeColor="#ff7f00",JXG$1.Options.angle.label.strokeColor="blue",JXG$1.Options.arc.strokeColor="blue",JXG$1.Options.circle.center.fillColor="red",JXG$1.Options.circle.center.strokeColor="blue",JXG$1.Options.circumcircle.strokeColor="blue",JXG$1.Options.circumcircle.center.fillColor="red",JXG$1.Options.circumcircle.center.strokeColor="blue",JXG$1.Options.circumcirclearc.strokeColor="blue",JXG$1.Options.circumcirclesector.strokeColor="blue",JXG$1.Options.circumcirclesector.fillColor="green",JXG$1.Options.circumcirclesector.highlightFillColor="green",JXG$1.Options.conic.strokeColor="blue",JXG$1.Options.curve.strokeColor="blue",JXG$1.Options.incircle.strokeColor="blue",JXG$1.Options.incircle.center.fillColor="red",JXG$1.Options.incircle.center.strokeColor="blue",JXG$1.Options.inequality.fillColor="red",JXG$1.Options.integral.fillColor="red",JXG$1.Options.integral.curveLeft.color="red",JXG$1.Options.integral.curveRight.color="red",JXG$1.Options.line.strokeColor="blue",JXG$1.Options.point.fillColor="red",JXG$1.Options.point.strokeColor="red",JXG$1.Options.polygon.fillColor="green",JXG$1.Options.polygon.highlightFillColor="green",JXG$1.Options.polygon.vertices.strokeColor="red",JXG$1.Options.polygon.vertices.fillColor="red",JXG$1.Options.regularpolygon.fillColor="green",JXG$1.Options.regularpolygon.highlightFillColor="green",JXG$1.Options.regularpolygon.vertices.strokeColor="red",JXG$1.Options.regularpolygon.vertices.fillColor="red",JXG$1.Options.riemannsum.fillColor="yellow",JXG$1.Options.sector.fillColor="green",JXG$1.Options.sector.highlightFillColor="green",JXG$1.Options.semicircle.center.fillColor="red",JXG$1.Options.semicircle.center.strokeColor="blue",JXG$1.Options.slopetriangle.fillColor="red",JXG$1.Options.slopetriangle.highlightFillColor="red",JXG$1.Options.turtle.arrow.strokeColor="blue"};JXG$1.extend(JXG$1,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}});JXG$1.palette=JXG$1.paletteWong;JXG$1.Options={jc:{enabled:!0,compile:!0},board:{animationDelay:35,axis:!1,boundingBox:[-5,5,5,-5],browserPan:!1,clickDelay:600,dblClickSuppressClick:!1,defaultAxes:{x:{name:"x",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}},y:{name:"y",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}}},document:!1,drag:{enabled:!0},fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},ignoreLabels:!0,intl:{enabled:!1},keepAspectRatio:!1,keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},logging:{enabled:!1},minimizeReflow:"none",maxBoundingBox:[-1/0,1/0,1/0,-1/0],maxFrameRate:40,maxNameLength:1,moveTarget:null,offsetX:0,offsetY:0,pan:{enabled:!0,needShift:!0,needTwoFingers:!1},registerEvents:!0,renderer:"auto",resize:{enabled:!0,throttle:10},screenshot:{scale:1,type:"png",symbol:"",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,fillColor:"#ffff00",visible:!1,withLines:!1,vertices:{visible:!1}},showClearTraces:!1,showCopyright:!0,showFullscreen:!1,showInfobox:!0,showLogo:!1,showNavigation:!0,showReload:!1,showScreenshot:!1,showZoom:!0,takeFirst:!1,takeSizeFromFile:!1,theme:"default",title:"",zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,center:"auto",min:1e-4,max:1e4,pinch:!0,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},zoomX:1,zoomY:1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{aria:{enabled:!1,label:"",live:"assertive"},cssClass:"",highlightCssClass:"",dash:0,dashScale:!1,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},dragToTopOfLayer:!1,element3D:null,fillColor:JXG$1.palette.red,fillOpacity:1,fixed:!1,frozen:!1,gradient:null,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientEndOffset:1,gradientFX:.5,gradientFY:.5,gradientFR:0,gradientR:.5,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,highlight:!0,highlightFillColor:"none",highlightFillOpacity:1,highlightStrokeColor:"#c3d9ff",highlightStrokeOpacity:1,highlightStrokeWidth:2,isLabel:!1,layer:0,lineCap:"butt",needsRegularUpdate:!0,nonnegativeOnly:!1,precision:"inherit",priv:!1,rotatable:!0,scalable:!0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},snapToGrid:!1,strokeColor:JXG$1.palette.blue,strokeOpacity:1,strokeWidth:2,tabindex:-1,trace:!1,traceAttributes:{},transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],visible:!0,withLabel:!1,ignoreForLabelAutoposition:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{tabindex:null,layer:7,highlight:!1,autoPosition:!1},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear",intl:{enabled:"inherit",options:{}},minorTicksInArrow:!1,majorTicksInArrow:!0,labelInArrow:!0,minorTicksInMargin:!1,majorTicksInMargin:!0,labelInMargin:!0,ignoreForLabelAutoposition:!0},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:JXG$1.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:JXG$1.palette.orange,highlightFillColor:JXG$1.palette.orange,strokeColor:JXG$1.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:JXG$1.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},arrowparallel:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",position:"static",anchor:"",anchorDist:"10%",ticksAutoPos:!1,ticksAutoPosThreshold:"5%",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]},ignoreForLabelAutoposition:!0},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:JXG$1.palette.blue,fillColor:JXG$1.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:JXG$1.palette.blue,highlightFillColor:JXG$1.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,name:""},point2:{fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!0,center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},strokeWidth:1,strokeColor:"#0000ff",fillColor:"none"},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:JXG$1.palette.blue,fillColor:"none",fixed:!0,curveType:null,doAdvancedPlot:!0,doAdvancedPlotOld:!1,firstArrow:!1,handDrawing:!1,label:{position:"lft"},lastArrow:!1,lineCap:"round",numberPointsHigh:1600,numberPointsLow:400,plotVersion:2,recursionDepthHigh:17,recursionDepthLow:15},foreignobject:{fixed:!0,visible:!0,needsRegularUpdate:!1,attractors:[],evaluateOnlyOnce:!1},functiongraph:{},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,highlight:!1,gridX:null,gridY:null,majorStep:"auto",minorElements:0,forceSquare:!1,includeBoundaries:!1,size:void 0,face:void 0,margin:void 0,drawZero:void 0,polygonVertices:void 0,major:{size:5,face:"line",margin:0,drawZero:!0,polygonVertices:6},minor:{visible:"inherit",size:3,face:"point",margin:0,drawZero:!0,polygonVertices:6},snapToGrid:!1,strokeColor:"#c0c0c0",strokeWidth:1,strokeOpacity:.5,dash:0,theme:0,themes:[{},{forceSquare:"min",major:{face:"line"}},{major:{face:"line"},minor:{size:3,face:"point"},minorElements:"auto"},{major:{face:"line"},minor:{face:"line",strokeOpacity:.25},minorElements:"auto"},{major:{face:"line"},minor:{face:"+",size:"95%"},minorElements:"auto"},{major:{face:"+",size:10,strokeOpacity:1},minor:{face:"point",size:3},minorElements:"auto"},{major:{face:"circle",size:8,fillColor:"#c0c0c0"},minor:{face:"point",size:3},minorElements:"auto"}]},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},implicitcurve:{margin:1,resolution_outer:5,resolution_inner:5,max_steps:1024,alpha_0:.05,tol_u0:Mat.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:.5,loop_dist:.09,loop_dir:.99,loop_detection:!0},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:JXG$1.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,intl:{enabled:"inherit",options:{}},fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null,viewport:[0,0,0,0],ignoreForLabelAutoposition:!0},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:JXG$1.palette.red,fillOpacity:.3,highlightFillColor:JXG$1.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:JXG$1.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:JXG$1.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20,digits:4,intl:{enabled:!1,options:{}}}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,tabindex:null,position:"urt",distance:1.5,offset:[10,10],autoPosition:!1,autoPositionMinDistance:12,autoPositionMaxDistance:28,autoPositionWhitelist:[]},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],lineLength:1,strokeOpacity:[1],rowHeight:20,strokeWidth:5,frozen:!1},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},point2:{fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,ticksDistance:1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},measurement:{baseUnit:"",units:{},showPrefix:!0,showSuffix:!0,prefix:"",suffix:"",dim:null,formatCoords:function(a,s,o,c){return parseFloat(c)!==1?"Infinit coords":"("+s+", "+o+")"},formatDirection:function(a,s,o){return"("+s+", "+o+")"}},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},nonreflexangle:{},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},otherintersection:{alwaysIntersect:!0,precision:.001},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},parallelogram:{parallelpoint:{withLabel:!1,name:""}},parallelpoint:{},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},highlightByStrokeWidth:!1,vertices:{layer:9,withLabel:!1,name:"",strokeColor:JXG$1.palette.red,fillColor:JXG$1.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},reflexangle:{},regularpolygon:{hasInnerPoints:!1,fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:JXG$1.palette.red,fillColor:JXG$1.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:JXG$1.palette.yellow},sector:{fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,useDirection:!1,selection:"auto",arc:{visible:!1,fillColor:"none",withLabel:!1,name:"",center:{visible:!1,withLabel:!1,name:""},radiusPoint:{visible:!1,withLabel:!1,name:""},anglePoint:{visible:!1,withLabel:!1,name:""}},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:JXG$1.palette.red,name:""}},slider:{snapWidth:-1,snapValues:[],snapValueDistance:0,precision:2,digits:2,intl:{enabled:"inherit",options:{}},firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:!0,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,ticksDistance:1,minorHeight:4,majorHeight:5,minorTicks:0,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},slopefield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:JXG$1.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!1,size:5,angle:Math.PI*.125}},slopetriangle:{fillColor:JXG$1.palette.red,fillOpacity:.4,highlightFillColor:JXG$1.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0,position:"first"}},smartlabelangle:{cssClass:"smart-label-solid smart-label-angle",highlightCssClass:"smart-label-solid smart-label-angle",anchorX:"left",anchorY:"middle",unit:"",prefix:"",suffix:"",measure:"deg",useMathJax:!0},smartlabelcircle:{cssClass:"smart-label-solid smart-label-circle",highlightCssClass:"smart-label-solid smart-label-circle",anchorX:"middle",useMathJax:!0,unit:"",prefix:"",suffix:"",measure:"radius"},smartlabelline:{cssClass:"smart-label-solid smart-label-line",highlightCssClass:"smart-label-solid smart-label-line",anchorX:"middle",useMathJax:!0,unit:"",measure:"length"},smartlabelpoint:{cssClass:"smart-label-solid smart-label-point",highlightCssClass:"smart-label-solid smart-label-point",anchorX:"middle",anchorY:"top",useMathJax:!0,dir:"row",unit:""},smartlabelpolygon:{cssClass:"smart-label-solid smart-label-polygon",highlightCssClass:"smart-label-solid smart-label-polygon",anchorX:"middle",useMathJax:!0,unit:"",measure:"area"},stepfunction:{},tangent:{},tangentto:{polar:{visible:!1,strokeWidth:1,dash:3},point:{visible:!1}},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,rotate:0,precision:2,digits:2,point1:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,ticksDistance:.1,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit",label:{anchorY:"top",anchorX:"middle",offset:[0,-10]}},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",formatNumber:!1,digits:2,intl:{enabled:"inherit",options:{minimumFractionDigits:0,maximumFractionDigits:2}},parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},toFraction:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:JXG$1.palette.red,lastArrow:!0}},vectorfield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:JXG$1.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!0,size:5,angle:Math.PI*.125}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}};JXG$1.Validator=function(){var a,s=function(Js){return/^[0-9]+px$/.test(Js)},o=function(Js){return Js==="html"||Js==="internal"},c=function(Js){return JXG$1.isString(Js)},h=function(Js){return JXG$1.exists(JXG$1.normalizePointFace(Js))},d=function(Js){return JXG$1.isNumber(Js,!0,!1)},b=function(Js){return Math.abs(Js-Math.round(Js))<Mat.eps},_=function(Js){return b(Js)&&Js>=0},$=function(Js){return b(Js)&&Js>0},j=function(Js){return Js==="vml"||Js==="svg"||Js==="canvas"||Js==="no"},Xt=function(Js){return Js>0},Lt=function(Js){return Js>=0},fr={},Jr={attractorDistance:Lt,color:c,display:o,doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:h,factor:d,fillColor:c,fillOpacity:d,firstArrow:!1,fontSize:b,dash:b,gridX:d,gridY:d,hasGrid:!1,highlightFillColor:c,highlightFillOpacity:d,highlightStrokeColor:c,highlightStrokeOpacity:d,insertTicks:!1,lastArrow:!1,layer:_,majorHeight:b,minorHeight:b,minorTicks:Lt,minTicksDistance:$,numberPointsHigh:$,numberPointsLow:$,opacity:d,radius:d,RDPsmoothing:!1,renderer:j,right:s,showCopyright:!1,showInfobox:!1,showNavigation:!1,size:Lt,snapSizeX:Xt,snapSizeY:Xt,snapWidth:d,snapToGrid:!1,snatchDistance:Lt,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:c,strokeOpacity:d,strokeWidth:Lt,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(a in Jr)Jr.hasOwnProperty(a)&&(fr[a.toLowerCase()]=Jr[a]);return fr}();JXG$1.normalizePointFace=function(a){var s={cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",diamond2:"<<>>","<<>>":"<<>>",triangleup:"^",A:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"};return s[a]};JXG$1.useStandardOptions=function(a){var s,o,c,h,d=JXG$1.Options,b=a.hasGrid;a.options.grid.hasGrid=d.grid.hasGrid,a.options.grid.gridX=d.grid.gridX,a.options.grid.gridY=d.grid.gridY,a.options.grid.gridColor=d.grid.gridColor,a.options.grid.gridOpacity=d.grid.gridOpacity,a.options.grid.gridDash=d.grid.gridDash,a.options.grid.snapToGrid=d.grid.snapToGrid,a.options.grid.snapSizeX=d.grid.SnapSizeX,a.options.grid.snapSizeY=d.grid.SnapSizeY,a.takeSizeFromFile=d.takeSizeFromFile,h=function(_,$){_.visProp.fillcolor=$.fillColor,_.visProp.highlightfillcolor=$.highlightFillColor,_.visProp.strokecolor=$.strokeColor,_.visProp.highlightstrokecolor=$.highlightStrokeColor};for(s in a.objects)if(a.objects.hasOwnProperty(s))if(c=a.objects[s],c.elementClass===Const.OBJECT_CLASS_POINT)h(c,d.point);else if(c.elementClass===Const.OBJECT_CLASS_LINE)for(h(c,d.line),o=0;o<c.ticks.length;o++)c.ticks[o].majorTicks=d.line.ticks.majorTicks,c.ticks[o].minTicksDistance=d.line.ticks.minTicksDistance,c.ticks[o].visProp.minorheight=d.line.ticks.minorHeight,c.ticks[o].visProp.majorheight=d.line.ticks.majorHeight;else c.elementClass===Const.OBJECT_CLASS_CIRCLE?h(c,d.circle):c.type===Const.OBJECT_TYPE_ANGLE?h(c,d.angle):c.type===Const.OBJECT_TYPE_ARC?h(c,d.arc):c.type===Const.OBJECT_TYPE_POLYGON?h(c,d.polygon):c.type===Const.OBJECT_TYPE_CONIC?h(c,d.conic):c.type===Const.OBJECT_TYPE_CURVE?h(c,d.curve):c.type===Const.OBJECT_TYPE_SECTOR&&(c.arc.visProp.fillcolor=d.sector.fillColor,c.arc.visProp.highlightfillcolor=d.sector.highlightFillColor,c.arc.visProp.fillopacity=d.sector.fillOpacity,c.arc.visProp.highlightfillopacity=d.sector.highlightFillOpacity);a.fullUpdate(),b&&!a.hasGrid?a.removeGrids(a):!b&&a.hasGrid&&a.create("grid",[])};JXG$1.useBlackWhiteOptions=function(a){var s=JXG$1.Options;s.point.fillColor=JXG$1.rgb2bw(s.point.fillColor),s.point.highlightFillColor=JXG$1.rgb2bw(s.point.highlightFillColor),s.point.strokeColor=JXG$1.rgb2bw(s.point.strokeColor),s.point.highlightStrokeColor=JXG$1.rgb2bw(s.point.highlightStrokeColor),s.line.fillColor=JXG$1.rgb2bw(s.line.fillColor),s.line.highlightFillColor=JXG$1.rgb2bw(s.line.highlightFillColor),s.line.strokeColor=JXG$1.rgb2bw(s.line.strokeColor),s.line.highlightStrokeColor=JXG$1.rgb2bw(s.line.highlightStrokeColor),s.circle.fillColor=JXG$1.rgb2bw(s.circle.fillColor),s.circle.highlightFillColor=JXG$1.rgb2bw(s.circle.highlightFillColor),s.circle.strokeColor=JXG$1.rgb2bw(s.circle.strokeColor),s.circle.highlightStrokeColor=JXG$1.rgb2bw(s.circle.highlightStrokeColor),s.arc.fillColor=JXG$1.rgb2bw(s.arc.fillColor),s.arc.highlightFillColor=JXG$1.rgb2bw(s.arc.highlightFillColor),s.arc.strokeColor=JXG$1.rgb2bw(s.arc.strokeColor),s.arc.highlightStrokeColor=JXG$1.rgb2bw(s.arc.highlightStrokeColor),s.polygon.fillColor=JXG$1.rgb2bw(s.polygon.fillColor),s.polygon.highlightFillColor=JXG$1.rgb2bw(s.polygon.highlightFillColor),s.sector.fillColor=JXG$1.rgb2bw(s.sector.fillColor),s.sector.highlightFillColor=JXG$1.rgb2bw(s.sector.highlightFillColor),s.curve.strokeColor=JXG$1.rgb2bw(s.curve.strokeColor),s.grid.gridColor=JXG$1.rgb2bw(s.grid.gridColor),JXG$1.useStandardOptions(a)};JXG$1.Options.normalizePointFace=JXG$1.normalizePointFace;const Options$1=JXG$1.Options;JXG$1.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]};JXG$1.extend(JXG$1.AbstractRenderer.prototype,{_updateVisual:function(a,s,o){(o||this.enhancedRendering)&&(s=s||{},this.setObjectTransition(a),a.evalVisProp("draft")?this.setDraft(a):(s.stroke||(a.highlighted?(this.setObjectStrokeColor(a,a.evalVisProp("highlightstrokecolor"),a.evalVisProp("highlightstrokeopacity")),this.setObjectStrokeWidth(a,a.evalVisProp("highlightstrokewidth"))):(this.setObjectStrokeColor(a,a.evalVisProp("strokecolor"),a.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(a,a.evalVisProp("strokewidth")))),s.fill||(a.highlighted?this.setObjectFillColor(a,a.evalVisProp("highlightfillcolor"),a.evalVisProp("highlightfillopacity")):this.setObjectFillColor(a,a.evalVisProp("fillcolor"),a.evalVisProp("fillopacity"))),s.dash||this.setDashStyle(a,a.visProp),s.shadow||this.setShadow(a),s.tabindex||this.setTabindex(a)),a.highlighted?this.setCssClass(a,a.evalVisProp("highlightcssclass")):this.setCssClass(a,a.evalVisProp("cssclass")),a.evalVisProp("aria.enabled")&&this.setARIA(a))},_getHighlighted:function(a){var s=!1,o;return(!JXG$1.exists(a.board)||!JXG$1.exists(a.board.highlightedObjects))&&(s=!0),!s&&JXG$1.exists(a.board.highlightedObjects[a.id])?o="highlight":o="",o},drawPoint:function(a){var s,o=Options$1.normalizePointFace(a.evalVisProp("face"));o==="o"?s="ellipse":o==="[]"?s="rect":s="path",a.rendNode=this.appendChildPrim(this.createPrim(s,a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,s),this._updateVisual(a,{dash:!0,shadow:!0},!0),this.updatePoint(a)},updatePoint:function(a){var s=a.evalVisProp("size"),o=Options$1.normalizePointFace(a.evalVisProp("face")),c=a.evalVisProp("sizeunit"),h=a.evalVisProp("zoom"),d;isNaN(a.coords.scrCoords[2]+a.coords.scrCoords[1])||(c==="user"&&(s*=Math.sqrt(Math.abs(a.board.unitX*a.board.unitY))),s*=!a.board||!h?1:Math.sqrt(a.board.zoomX*a.board.zoomY),d=s===0?0:s+1,o==="o"?this.updateEllipsePrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2],d,d):o==="[]"?this.updateRectPrim(a.rendNode,a.coords.scrCoords[1]-s,a.coords.scrCoords[2]-s,s*2,s*2):this.updatePathPrim(a.rendNode,this.updatePathStringPoint(a,s,o),a.board),this._updateVisual(a,{dash:!1,shadow:!1}),this.setShadow(a))},changePointStyle:function(a){var s=this.getElementById(a.id);JXG$1.exists(s)&&this.remove(s),this.drawPoint(a),JXG$1.clearVisPropOld(a),a.visPropCalc.visible||this.display(a,!1),a.evalVisProp("draft")&&this.setDraft(a)},drawLine:function(a){a.rendNode=this.appendChildPrim(this.createPrim("line",a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,"lines"),this.updateLine(a)},updateLine:function(a){this._updateVisual(a),this.updatePathWithArrowHeads(a),this.setLineCap(a)},drawCurve:function(a){a.rendNode=this.appendChildPrim(this.createPrim("path",a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,"path"),this.updateCurve(a)},updateCurve:function(a){this._updateVisual(a),this.updatePathWithArrowHeads(a),this.setLineCap(a)},updatePathWithArrowHeads:function(a,s){var o=s?"highlight":"",c,h;s&&a.evalVisProp("highlightstrokewidth")?c=Math.max(a.evalVisProp("highlightstrokewidth"),a.evalVisProp("strokewidth")):c=a.evalVisProp("strokewidth"),h=this.getArrowHeadData(a,c,o),this.makeArrows(a,h),a.elementClass===Const.OBJECT_CLASS_LINE?this.updateLineWithEndings(a,h):a.elementClass===Const.OBJECT_CLASS_CURVE&&this.updatePath(a),this.setArrowSize(a,h)},getArrowHeadData:function(a,s,o){var c=Mat.eps,h,d,b=0,_=0,$=0,j=0,Xt=a.evalVisProp("firstarrow"),Lt=a.evalVisProp("lastarrow"),fr,Jr;return(Xt||Lt)&&(JXG$1.exists(Xt.type)?h=a.eval(Xt.type):a.elementClass===Const.OBJECT_CLASS_LINE?h=1:h=7,JXG$1.exists(Lt.type)?d=a.eval(Lt.type):a.elementClass===Const.OBJECT_CLASS_LINE?d=1:d=7,Xt&&(Jr=6,JXG$1.exists(Xt.size)&&(Jr=a.eval(Xt.size)),o!==""&&JXG$1.exists(Xt[o+"size"])&&(Jr=a.eval(Xt[o+"size"])),fr=s*Jr,h===2?(fr*=.5,c+=s*Jr):h===3?(fr=s*Jr/3,c+=s):h===4||h===5||h===6?(fr=s*Jr/1.5,c+=s*Jr):h===7?(fr=0,Jr=10,c+=s):c+=s*Jr,b+=fr,$=Jr),Lt&&(Jr=6,JXG$1.exists(Lt.size)&&(Jr=a.eval(Lt.size)),o!==""&&JXG$1.exists(Lt[o+"size"])&&(Jr=a.eval(Lt[o+"size"])),fr=s*Jr,d===2?(fr*=.5,c+=s*Jr):d===3?(fr=s*Jr/3,c+=s):d===4||d===5||d===6?(fr=s*Jr/1.5,c+=s*Jr):d===7?(fr=0,Jr=10,c+=s):c+=s*Jr,_+=fr,j=Jr)),a.visPropCalc.typeFirst=h,a.visPropCalc.typeLast=d,{evFirst:Xt,evLast:Lt,typeFirst:h,typeLast:d,offFirst:b,offLast:_,sizeFirst:$,sizeLast:j,showFirst:1,showLast:1,minLen:c,strokeWidth:s}},updateLineWithEndings:function(a,s){var o,c,h=null;return o=new Coords(Const.COORDS_BY_USER,a.point1.coords.usrCoords,a.board),c=new Coords(Const.COORDS_BY_USER,a.point2.coords.usrCoords,a.board),h=a.evalVisProp("margin"),Geometry.calcStraight(a,o,c,h),this.handleTouchpoints(a,o,c,s),this.getPositionArrowHead(a,o,c,s),this.updateLinePrim(a.rendNode,o.scrCoords[1],o.scrCoords[2],c.scrCoords[1],c.scrCoords[2],a.board),this},updatePath:function(a){return a.evalVisProp("handdrawing")?this.updatePathPrim(a.rendNode,this.updatePathStringBezierPrim(a),a.board):this.updatePathPrim(a.rendNode,this.updatePathStringPrim(a),a.board),this},getPositionArrowHead:function(a,s,o,c){var h,d,b,_,$;return(c.evFirst||c.evLast)&&(d=b=_=$=0,h=s.distance(Const.COORDS_BY_SCREEN,o),c.evFirst&&a.board.renderer.type!=="vml"&&(h>=c.minLen?(d=(o.scrCoords[1]-s.scrCoords[1])*c.offFirst/h,b=(o.scrCoords[2]-s.scrCoords[2])*c.offFirst/h):c.showFirst=0),c.evLast&&a.board.renderer.type!=="vml"&&(h>=c.minLen?(_=(o.scrCoords[1]-s.scrCoords[1])*c.offLast/h,$=(o.scrCoords[2]-s.scrCoords[2])*c.offLast/h):c.showLast=0),s.setCoordinates(Const.COORDS_BY_SCREEN,[s.scrCoords[1]+d,s.scrCoords[2]+b],!1,!0),o.setCoordinates(Const.COORDS_BY_SCREEN,[o.scrCoords[1]-_,o.scrCoords[2]-$],!1,!0)),this},handleTouchpoints:function(a,s,o,c){var h,d,b,_,$,j,Xt;return(c.evFirst||c.evLast)&&(b=_=$=j=Xt=0,h=a.point1.evalVisProp("size")+a.point1.evalVisProp("strokewidth"),d=a.point2.evalVisProp("size")+a.point2.evalVisProp("strokewidth"),c.evFirst&&a.evalVisProp("touchfirstpoint")&&a.point1.evalVisProp("visible")&&(b=s.distance(Const.COORDS_BY_SCREEN,o),_=(o.scrCoords[1]-s.scrCoords[1])*h/b,$=(o.scrCoords[2]-s.scrCoords[2])*h/b),c.evLast&&a.evalVisProp("touchlastpoint")&&a.point2.evalVisProp("visible")&&(b=s.distance(Const.COORDS_BY_SCREEN,o),j=(o.scrCoords[1]-s.scrCoords[1])*d/b,Xt=(o.scrCoords[2]-s.scrCoords[2])*d/b),s.setCoordinates(Const.COORDS_BY_SCREEN,[s.scrCoords[1]+_,s.scrCoords[2]+$],!1,!0),o.setCoordinates(Const.COORDS_BY_SCREEN,[o.scrCoords[1]-j,o.scrCoords[2]-Xt],!1,!0)),this},setArrowSize:function(a,s){return s.evFirst&&this._setArrowWidth(a.rendNodeTriangleStart,s.showFirst*s.strokeWidth,a.rendNode,s.sizeFirst),s.evLast&&this._setArrowWidth(a.rendNodeTriangleEnd,s.showLast*s.strokeWidth,a.rendNode,s.sizeLast),this},setLineCap:function(a){},drawTicks:function(a){a.rendNode=this.appendChildPrim(this.createPrim("path",a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,"path")},updateTicks:function(a){},drawEllipse:function(a){a.rendNode=this.appendChildPrim(this.createPrim("ellipse",a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,"ellipse"),this.updateEllipse(a)},updateEllipse:function(a){this._updateVisual(a);var s=a.Radius();Math.abs(a.center.coords.usrCoords[0])>Mat.eps&&!isNaN(s+a.center.coords.scrCoords[1]+a.center.coords.scrCoords[2])&&s*a.board.unitX<2e6&&this.updateEllipsePrim(a.rendNode,a.center.coords.scrCoords[1],a.center.coords.scrCoords[2],s*a.board.unitX,s*a.board.unitY),this.setLineCap(a)},drawPolygon:function(a){a.rendNode=this.appendChildPrim(this.createPrim("polygon",a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,"polygon"),this.updatePolygon(a)},updatePolygon:function(a){this._updateVisual(a,{stroke:!0,dash:!0}),this.updatePolygonPrim(a.rendNode,a)},displayCopyright:function(a,s){},displayLogo:function(a,s){},drawInternalText:function(a){},updateInternalText:function(a){},drawText:function(a){var s,o,c,h;a.evalVisProp("display")==="html"&&JXG$1.isBrowser&&this.type!=="no"?(s=this.container.ownerDocument.createElement("div"),s.style.position="absolute",s.className=a.evalVisProp("cssclass"),c=a.evalVisProp("layer"),JXG$1.exists(c)||(c=0),this.container.style.zIndex===""?o=0:o=parseInt(this.container.style.zIndex,10),s.style.zIndex=o+c,this.container.appendChild(s),s.setAttribute("id",this.container.id+"_"+a.id)):s=this.drawInternalText(a),a.rendNode=s,a.htmlStr="",a.visProp.islabel&&JXG$1.exists(a.visProp.anchor)?(h=a.visProp.anchor.evalVisProp("visible"),a.prepareUpdate().updateVisibility(h)):a.prepareUpdate().updateVisibility(),this.updateText(a)},updateText:function(a){var s=a.plaintext,o,c,h,d,b,_,$,j,Xt,Lt,fr;if(a.visPropCalc.visible)if(this.updateTextStyle(a,!1),a.evalVisProp("display")==="html"&&this.type!=="no"){if(isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])||(c=a.coords.scrCoords[1],c=Math.abs(c)<1e6?c:1e6,b=a.getAnchorX(),b==="right"?(o=a.board.canvasWidth-c,Lt="right"):b==="middle"?(o=c-.5*a.size[0],Lt="center"):(o=c,Lt="left"),a.visPropOld.left!==b+o&&(b==="right"?(a.rendNode.style.right=o+"px",a.rendNode.style.left="auto"):(a.rendNode.style.left=o+"px",a.rendNode.style.right="auto"),a.visPropOld.left=b+o),c=a.coords.scrCoords[2]+this.vOffsetText,c=Math.abs(c)<1e6?c:1e6,_=a.getAnchorY(),_==="bottom"?(o=a.board.canvasHeight-c,fr="bottom"):_==="middle"?(o=c-.5*a.size[1],fr="center"):(o=c,fr="top"),a.visPropOld.top!==_+o&&(_==="bottom"?(a.rendNode.style.top="auto",a.rendNode.style.bottom=o+"px"):(a.rendNode.style.bottom="auto",a.rendNode.style.top=o+"px"),a.visPropOld.top=_+o)),a.htmlStr!==s){try{a.type===JXG$1.OBJECT_TYPE_BUTTON?a.rendNodeButton.innerHTML=s:a.type===JXG$1.OBJECT_TYPE_CHECKBOX||a.type===JXG$1.OBJECT_TYPE_INPUT?a.rendNodeLabel.innerHTML=s:a.rendNode.innerHTML=s}catch{h=a.rendNode.parentNode,a.rendNode.parentNode.removeChild(a.rendNode),a.rendNode.innerHTML=s,h.appendChild(a.rendNode)}if(a.htmlStr=s,a.evalVisProp("usemathjax"))try{MathJax.typeset?MathJax.typeset([a.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.rendNode])}catch{JXG$1.debug("MathJax (not yet) loaded")}else if(a.evalVisProp("usekatex"))try{a.rendNode.innerHTML.indexOf("<span")===0&&a.rendNode.innerHTML.indexOf("<label")>0&&(a.rendNode.innerHTML.indexOf("<checkbox")>0||a.rendNode.innerHTML.indexOf("<input")>0)?d=a.rendNodeLabel:a.rendNode.innerHTML.indexOf("<button")===0?d=a.rendNodeButton:d=a.rendNode,d&&katex.render(s,d,{macros:a.evalVisProp("katexmacros"),throwOnError:!1})}catch{JXG$1.debug("KaTeX not loaded (yet)")}else if(a.evalVisProp("useasciimathml"))try{AMprocessNode(a.rendNode,!1)}catch{JXG$1.debug("AsciiMathML not loaded (yet)")}}$=a.evalVisProp("rotate"),$!==0&&($*=Math.PI/180,j=Math.cos($),Xt=Math.sin($),a.rendNode.style.transform="matrix("+[j,-1*Xt,Xt,j,0,0].join(",")+")",a.rendNode.style["transform-origin"]=Lt+" "+fr),this.transformRect(a,a.transformations)}else this.updateInternalText(a)},_css2js:function(a){var s=[],o,c,h,d,b,_=JXG$1.trim(a).replace(/;$/,"").split(";");for(c=_.length,o=0;o<c;++o)JXG$1.trim(_[o])!==""&&(b=_[o].split(":"),h=JXG$1.trim(b[0].replace(/-([a-z])/gi,function($,j){return j.toUpperCase()})),d=JXG$1.trim(b[1]),s.push({key:h,val:d}));return s},updateTextStyle:function(a,s){var o,c,h,d,b,_=JXG$1.isBrowser?a.visProp.display:"internal",$=["rendNode","rendNodeTag","rendNodeLabel"],j=$.length,Xt=a.evalVisProp("fontunit"),Lt,fr,Jr,Js,qs=["cssdefaultstyle","cssstyle"],zo=qs.length;if(s?(h=a.evalVisProp("highlightstrokecolor"),c=a.evalVisProp("highlightstrokeopacity"),d=a.evalVisProp("highlightcssclass")):(h=a.evalVisProp("strokecolor"),c=a.evalVisProp("strokeopacity"),d=a.evalVisProp("cssclass")),this.type!=="no"&&(_==="html"||this.type!=="canvas")){for(Jr=0;Jr<zo;Jr++)for(Js=a.evalVisProp((s?"highlight":"")+qs[Jr]),b=0;b<j;b++)if(JXG$1.exists(a[$[b]])&&Js!==""&&a.visPropOld[qs[Jr]+"_"+b]!==Js){Lt=this._css2js(Js);for(fr in Lt)Lt.hasOwnProperty(fr)&&(a[$[b]].style[Lt[fr].key]=Lt[fr].val);a.visPropOld[qs[Jr]+"_"+b]=Js}if(o=a.evalVisProp("fontsize"),a.visPropOld.fontsize!==o){a.needsSizeUpdate=!0;try{for(b=0;b<j;b++)JXG$1.exists(a[$[b]])&&(a[$[b]].style.fontSize=o+Xt)}catch{for(b=0;b<j;b++)JXG$1.exists(a[$[b]])&&(a[$[b]].style.fontSize=o)}a.visPropOld.fontsize=o}}return this.setTabindex(a),this.setObjectTransition(a),_==="html"&&this.type!=="no"?(a.visPropOld.cssclass!==d&&(a.rendNode.className=d,a.visPropOld.cssclass=d,a.needsSizeUpdate=!0),this.setObjectStrokeColor(a,h,c)):this.updateInternalTextStyle(a,h,c),a.evalVisProp("aria.enabled")&&this.setARIA(a),this},updateInternalTextStyle:function(a,s,o){this.setObjectStrokeColor(a,s,o)},drawImage:function(a){},updateImage:function(a){this.updateRectPrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]),this.updateImageURL(a),this.transformRect(a,a.transformations),this._updateVisual(a,{stroke:!0,dash:!0},!0)},joinTransforms:function(a,s){var o,c=a.board.origin.scrCoords[1],h=a.board.origin.scrCoords[2],d=a.board.unitX,b=a.board.unitY,_=s.length,$=[[1,0,0],[-c/d,1/d,0],[h/b,0,-1/b]];for(o=0;o<_;o++)$=Mat.matMatMult(s[o].matrix,$);return $=Mat.matMatMult([[1,0,0],[c,d,0],[h,0,-b]],$),$},transformRect:function(a,s){},updateImageURL:function(a){},updateImageStyle:function(a,s){a.rendNode.className=a.evalVisProp(s?"highlightcssclass":"cssclass")},drawForeignObject:function(a){},updateForeignObject:function(a){},appendChildPrim:function(a,s){},appendNodesToElement:function(a,s){},createPrim:function(a,s){return null},remove:function(a){},makeArrows:function(a,s){},_setArrowWidth:function(a,s,o){},updateEllipsePrim:function(a,s,o,c,h){},updateLinePrim:function(a,s,o,c,h,d){},updatePathPrim:function(a,s,o){},updatePathStringPoint:function(a,s,o){},updatePathStringPrim:function(a){},updatePathStringBezierPrim:function(a){},updatePolygonPrim:function(a,s){},updateRectPrim:function(a,s,o,c,h){},display:function(a,s){a&&(a.visPropOld.visible=s)},hide:function(a){},highlight:function(a,s){var o,c,h;if(this.setObjectTransition(a),!a.visProp.draft){if(a.type===Const.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(a,a.evalVisProp("highlightfillcolor"),a.evalVisProp("highlightfillopacity")),c=a.evalVisProp("highlightbystrokewidth"),o=0;o<a.borders.length;o++)this.highlight(a.borders[o],!c);else a.elementClass===Const.OBJECT_CLASS_TEXT?this.updateTextStyle(a,!0):a.type===Const.OBJECT_TYPE_IMAGE?(this.updateImageStyle(a,!0),this.setObjectFillColor(a,a.evalVisProp("highlightfillcolor"),a.evalVisProp("highlightfillopacity"))):(this.setObjectStrokeColor(a,a.evalVisProp("highlightstrokecolor"),a.evalVisProp("highlightstrokeopacity")),this.setObjectFillColor(a,a.evalVisProp("highlightfillcolor"),a.evalVisProp("highlightfillopacity")));!s&&a.evalVisProp("highlightstrokewidth")&&(h=Math.max(a.evalVisProp("highlightstrokewidth"),a.evalVisProp("strokewidth")),this.setObjectStrokeWidth(a,h),(a.elementClass===Const.OBJECT_CLASS_LINE||a.elementClass===Const.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(a,!0))}return this.setCssClass(a,a.evalVisProp("highlightcssclass")),this},noHighlight:function(a){var s,o;if(this.setObjectTransition(a),!a.evalVisProp("draft")){if(a.type===Const.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(a,a.evalVisProp("fillcolor"),a.evalVisProp("fillopacity")),s=0;s<a.borders.length;s++)this.noHighlight(a.borders[s]);else a.elementClass===Const.OBJECT_CLASS_TEXT?this.updateTextStyle(a,!1):a.type===Const.OBJECT_TYPE_IMAGE?(this.updateImageStyle(a,!1),this.setObjectFillColor(a,a.evalVisProp("fillcolor"),a.evalVisProp("fillopacity"))):(this.setObjectStrokeColor(a,a.evalVisProp("strokecolor"),a.evalVisProp("strokeopacity")),this.setObjectFillColor(a,a.evalVisProp("fillcolor"),a.evalVisProp("fillopacity")));o=a.evalVisProp("strokewidth"),this.setObjectStrokeWidth(a,o),(a.elementClass===Const.OBJECT_CLASS_LINE||a.elementClass===Const.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(a,!1)}return this.setCssClass(a,a.evalVisProp("cssclass")),this},removeDraft:function(a){this.setObjectTransition(a),a.type===Const.OBJECT_TYPE_POLYGON?this.setObjectFillColor(a,a.evalVisProp("fillcolor"),a.evalVisProp("fillopacity")):(a.type===Const.OBJECT_CLASS_POINT&&this.setObjectFillColor(a,a.evalVisProp("fillcolor"),a.evalVisProp("fillopacity")),this.setObjectStrokeColor(a,a.evalVisProp("strokecolor"),a.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(a,a.evalVisProp("strokewidth")))},setARIA:function(a){},setBuffering:function(a,s){},setCssClass:function(a,s){},setDashStyle:function(a){},setDraft:function(a){if(a.evalVisProp("draft")){var s=a.board.options.elements.draft.color,o=a.board.options.elements.draft.opacity;this.setObjectTransition(a),a.type===Const.OBJECT_TYPE_POLYGON?this.setObjectFillColor(a,s,o):(a.elementClass===Const.OBJECT_CLASS_POINT?this.setObjectFillColor(a,s,o):this.setObjectFillColor(a,"none",0),this.setObjectStrokeColor(a,s,o),this.setObjectStrokeWidth(a,a.board.options.elements.draft.strokeWidth))}},setGradient:function(a){},setLayer:function(a,s){},setObjectFillColor:function(a,s,o){},setObjectStrokeColor:function(a,s,o){},setObjectStrokeWidth:function(a,s){},setObjectTransition:function(a,s){},setPropertyPrim:function(a,s,o){},setShadow:function(a){},setTabindex:function(a){},show:function(a){},updateGradient:function(a){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(a,s){var o,c,h=function(b){b||(b=window.event),b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},d=function(b,_,$,j){var Xt;$=$||"",Xt=o.createElement("span"),Xt.innerHTML=b,Xt.style.paddingLeft="7px",Xt.style.paddingRight="7px",Xt.classList!==void 0&&(Xt.classList.add("JXG_navigation_button"),Xt.classList.add("JXG_navigation_button_"+j)),Xt.setAttribute("id",$+"_navigation_"+j),Xt.setAttribute("aria-hidden","true"),c.appendChild(Xt),JXG$1.addEvent(Xt,"click",function(Lt){return JXG$1.bind(_,a)(),!1},a),JXG$1.addEvent(Xt,"pointerup",h,a),JXG$1.addEvent(Xt,"pointerdown",h,a),JXG$1.addEvent(Xt,"pointerleave",h,a),JXG$1.addEvent(Xt,"mouseup",h,a),JXG$1.addEvent(Xt,"mousedown",h,a),JXG$1.addEvent(Xt,"touchend",h,a),JXG$1.addEvent(Xt,"touchstart",h,a)};JXG$1.isBrowser&&this.type!=="no"&&(o=a.containerObj.ownerDocument,c=o.createElement("div"),c.setAttribute("id",a.container+"_navigationbar"),c.style.color=s.strokecolor,c.style.backgroundColor=s.fillcolor,c.style.padding=s.padding,c.style.position=s.position,c.style.fontSize=s.fontsize,c.style.cursor=s.cursor,c.style.zIndex=s.zindex,a.containerObj.appendChild(c),c.style.right=s.right,c.style.bottom=s.bottom,c.classList!==void 0&&c.classList.add("JXG_navigation"),a.attr.showfullscreen&&d(a.attr.fullscreen.symbol,function(){a.toFullscreen(a.attr.fullscreen.id)},a.container,"fullscreen"),a.attr.showscreenshot&&d(a.attr.screenshot.symbol,function(){window.setTimeout(function(){a.renderer.screenshot(a,"",!1)},330)},a.container,"screenshot"),a.attr.showreload&&d("",function(){a.reload()},a.container,"reload"),a.attr.showcleartraces&&d("",function(){a.clearTraces()},a.container,"cleartraces"),a.attr.shownavigation&&(a.attr.showzoom&&(d("",a.zoomOut,a.container,"out"),d("o",a.zoom100,a.container,"100"),d("+",a.zoomIn,a.container,"in")),d("",a.clickLeftArrow,a.container,"left"),d("",a.clickUpArrow,a.container,"down"),d("",a.clickDownArrow,a.container,"up"),d("",a.clickRightArrow,a.container,"right")))},getElementById:function(a){var s;return JXG$1.exists(this.container)?(s=this.container.id+"_"+a,JXG$1.exists(CSS)&&JXG$1.exists(CSS.escape)&&(s=CSS.escape(s)),this.container.querySelector("#"+s)):""},removeToInsertLater:function(a){var s=a.parentNode,o=a.nextSibling;if(s!==null)return s.removeChild(a),function(){o?s.insertBefore(a,o):s.appendChild(a)}},resize:function(a,s){},createTouchpoints:function(a){},showTouchpoint:function(a){},hideTouchpoint:function(a){},updateTouchpoint:function(a,s){},dumpToDataURI:function(a){},dumpToCanvas:function(a,s,o,c){},screenshot:function(a){}});const AbstractRenderer=JXG$1.AbstractRenderer;var UTF8_ACCEPT=0,UTF8D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];JXG$1.Util=JXG$1.Util||{};JXG$1.Util.UTF8={encode:function(a){var s,o,c="",h=a.length;if(a=a.replace(/\r\n/g,`
`),typeof unescape=="function"&&typeof encodeURIComponent=="function")return unescape(encodeURIComponent(a));for(s=0;s<h;s++)o=a.charCodeAt(s),o<128?c+=String.fromCharCode(o):o>127&&o<2048?(c+=String.fromCharCode(o>>6|192),c+=String.fromCharCode(o&63|128)):(c+=String.fromCharCode(o>>12|224),c+=String.fromCharCode(o>>6&63|128),c+=String.fromCharCode(o&63|128));return c},decode:function(a){var s,o,c,h=0,d=0,b=UTF8_ACCEPT,_=[],$=a.length,j=[];for(s=0;s<$;s++)o=a.charCodeAt(s),c=UTF8D[o],b!==UTF8_ACCEPT?d=o&63|d<<6:d=255>>c&o,b=UTF8D[256+b+c],b===UTF8_ACCEPT&&(d>65535?_.push(55232+(d>>10),56320+(d&1023)):_.push(d),h++,h%1e4===0&&(j.push(String.fromCharCode.apply(null,_)),_=[]));return j.push(String.fromCharCode.apply(null,_)),j.join("")},asciiCharCodeAt:function(a,s){var o=a.charCodeAt(s);if(o>255)switch(o){case 8364:o=128;break;case 8218:o=130;break;case 402:o=131;break;case 8222:o=132;break;case 8230:o=133;break;case 8224:o=134;break;case 8225:o=135;break;case 710:o=136;break;case 8240:o=137;break;case 352:o=138;break;case 8249:o=139;break;case 338:o=140;break;case 381:o=142;break;case 8216:o=145;break;case 8217:o=146;break;case 8220:o=147;break;case 8221:o=148;break;case 8226:o=149;break;case 8211:o=150;break;case 8212:o=151;break;case 732:o=152;break;case 8482:o=153;break;case 353:o=154;break;case 8250:o=155;break;case 339:o=156;break;case 382:o=158;break;case 376:o=159;break}return o}};const Encoding=JXG$1.Util.UTF8;var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pad$1="=";JXG$1.Util=JXG$1.Util||{};JXG$1.Util.Base64={_getByte:function(a,s){return a.charCodeAt(s)&255},_getIndex:function(a,s){return alphabet.indexOf(a.charAt(s))},encode:function(a){var s,o,c,h,d,b=[];for(d=Encoding.encode(a),c=d.length,h=c%3,s=0;s<c-h;s+=3)o=this._getByte(d,s)<<16|this._getByte(d,s+1)<<8|this._getByte(d,s+2),b.push(alphabet.charAt(o>>18),alphabet.charAt(o>>12&63),alphabet.charAt(o>>6&63),alphabet.charAt(o&63));switch(h){case 1:o=this._getByte(d,c-1),b.push(alphabet.charAt(o>>2),alphabet.charAt(o<<4&63),pad$1,pad$1);break;case 2:o=this._getByte(d,c-2)<<8|this._getByte(d,c-1),b.push(alphabet.charAt(o>>10),alphabet.charAt(o>>4&63),alphabet.charAt(o<<2&63),pad$1);break}return b.join("")},decode:function(a,s){var o,c,h,d,b,_,$=[],j=[];if(o=a.replace(/[^A-Za-z0-9+/=]/g,""),h=o.length,h%4!==0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(o.charAt(h-1)===pad$1&&(d=1,o.charAt(h-2)===pad$1&&(d=2),h-=4),c=0;c<h;c+=4)b=this._getIndex(o,c)<<18|this._getIndex(o,c+1)<<12|this._getIndex(o,c+2)<<6|this._getIndex(o,c+3),j.push(b>>16,b>>8&255,b&255),c%1e4===0&&($.push(String.fromCharCode.apply(null,j)),j=[]);switch(d){case 1:b=this._getIndex(o,h)<<12|this._getIndex(o,h+1)<<6|this._getIndex(o,h+2),j.push(b>>10,b>>2&255);break;case 2:b=this._getIndex(o,c)<<6|this._getIndex(o,c+1),j.push(b>>4);break}return $.push(String.fromCharCode.apply(null,j)),_=$.join(""),s&&(_=Encoding.decode(_)),_},decodeAsArray:function(a){var s,o=this.decode(a),c=[],h=o.length;for(s=0;s<h;s++)c[s]=o.charCodeAt(s);return c}};const Base64=JXG$1.Util.Base64;JXG$1.FileReader={handleRemoteFile:function(a,s,o,c,h,d){var b=!1;try{b=new XMLHttpRequest,o.toLowerCase()==="raw"?b.overrideMimeType("text/plain; charset="+h):b.overrideMimeType("text/xml; charset="+h)}catch{try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch{b=!1}}}if(!b){JXG$1.debug("AJAX not activated!");return}b.open("GET",a,c),o.toLowerCase()==="raw"?this.cbp=function(){var _=b;_.readyState===4&&s(_.responseText)}:this.cbp=function(){var _=b,$="";_.readyState===4&&(JXG$1.exists(_.responseStream)&&(_.responseText.slice(0,2)==="PK"||Encoding.asciiCharCodeAt(_.responseText.slice(0,1),0)===31)?$=Base64.decode(jxgBinFileReader(_)):$=_.responseText,this.parseString($,s,o,d))},this.cb=JXG$1.bind(this.cbp,this),b.onreadystatechange=this.cb;try{b.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+a+"'.")}},handleLocalFile:function(a,s,o,c,h,d){JXG$1.exists(c)||(c=!0),o.toLowerCase()==="raw"?this.cbp=function(_){s(_.target.result)}:this.cbp=function(_){var $=_.target.result;this.parseString($,s,o,d)},this.cb=JXG$1.bind(this.cbp,this);var b=new FileReader;b.onload=this.cb,o.toLowerCase()==="raw"?b.readAsText(a):b.readAsText(a,h)},parseFileContent:function(a,s,o,c,h,d){JXG$1.isString(a)||FileReader===void 0?this.handleRemoteFile(a,s,o,c,h,d):this.handleLocalFile(a,s,o,c,h,d)},parseString:function(a,s,o,c){var h,d;if(o=o.toLowerCase(),h=JXG$1.readers[o],JXG$1.exists(h))d=new h(s,a),d.read();else if(o!=="jessiecode")throw new Error("JSXGraph: There is no reader available for '"+o+"'.");JXG$1.isFunction(c)&&c(s)}};!JXG$1.isMetroApp()&&JXG$1.isBrowser&&typeof navigator=="object"&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write(`<script type="text/vbscript">
Function Base64Encode(inData)
  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
  Dim cOut, sOut, I
  For I = 1 To LenB(inData) Step 3
    Dim nGroup, pOut, sGroup
    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _
      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))
    nGroup = Oct(nGroup)
    nGroup = String(8 - Len(nGroup), "0") & nGroup
    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)
    sOut = sOut + pOut
  Next
  Select Case LenB(inData) Mod 3
    Case 1: '8 bit final
      sOut = Left(sOut, Len(sOut) - 2) + "=="
    Case 2: '16 bit final
      sOut = Left(sOut, Len(sOut) - 1) + "="
  End Select
  Base64Encode = sOut
End Function

Function MyASC(OneChar)
  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)
End Function

Function jxgBinFileReader(xhr)
    Dim byteString
    Dim b64String
    Dim i
    byteString = xhr.responseBody
    ReDim byteArray(LenB(byteString))
    For i = 1 To LenB(byteString)
        byteArray(i-1) = AscB(MidB(byteString, i, 1))
    Next
    b64String = Base64Encode(byteString)
    jxgBinFileReader = b64String
End Function
<\/script>
`);const FileReader$1=JXG$1.FileReader;JXG$1.GeonextParser={replacePow:function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr;for(a=a.replace(/(\s*)\^(\s*)/g,"^"),Xt=a.indexOf("^"),h=-1;Xt>=0&&Xt<a.length-1;){if(h===Xt)throw new Error("JSXGraph: Error while parsing expression '"+a+"'");if(h=Xt,j=a.slice(0,Xt),Lt=a.slice(Xt+1),j.charAt(j.length-1)===")"){for(s=1,o=j.length-2;o>=0&&s>0;)c=j.charAt(o),c===")"?s++:c==="("&&(s-=1),o-=1;if(s===0){for(d="",_=j.substring(0,o+1),$=o;$>=0&&_.slice($,$+1).match(/([\w.]+)/);)d=RegExp.$1+d,$-=1;d+=j.substring(o+1,j.length),d=d.replace(/([()+*%^\-/\][])/g,"\\$1")}else throw new Error("JSXGraph: Missing '(' in expression")}else d="[\\w\\.]+";if(Lt.match(/^([\w.]*\()/)){for(s=1,o=RegExp.$1.length;o<Lt.length&&s>0;)c=Lt.charAt(o),c===")"?s-=1:c==="("&&(s+=1),o+=1;if(s===0)b=Lt.substring(0,o),b=b.replace(/([()+*%^\-/[\]])/g,"\\$1");else throw new Error("JSXGraph: Missing ')' in expression")}else b="[\\w\\.]+";fr=new RegExp("("+d+")\\^("+b+")"),a=a.replace(fr,"pow($1,$2)"),Xt=a.indexOf("^")}return a},replaceIf:function(a){var s,o,c,h,d,b,_,$,j,Xt="",Lt=null,fr=null,Jr=null;if(c=a.indexOf("If("),c<0)return a;for(a=a.replace(/""/g,"0");c>=0;){for(s=a.slice(0,c),o=a.slice(c+3),d=1,h=0,b=-1,_=-1;h<o.length&&d>0;)$=o.charAt(h),$===")"?d-=1:$==="("?d+=1:$===","&&d===1&&(b<0?b=h:_=h),h+=1;if(j=o.slice(0,h-1),o=o.slice(h),b<0||_<0)return"";Lt=j.slice(0,b),fr=j.slice(b+1,_),Jr=j.slice(_+1),Lt=this.replaceIf(Lt),fr=this.replaceIf(fr),Jr=this.replaceIf(Jr),Xt+=s+"(("+Lt+")?("+fr+"):("+Jr+"))",a=o,Lt=null,fr=null,c=a.indexOf("If(")}return Xt+=o,Xt},replaceNameById:function(a,s,o){var c,h,d,b,_=0,$=["X","Y","L","V"],j=function(Xt){return o?"$('"+Xt+"')":Xt};for(b=0;b<$.length;b++)for(_=a.indexOf($[b]+"(");_>=0;)_>=0&&(c=a.indexOf(")",_+2),c>=0&&(h=a.slice(_+2,c),h=h.replace(/\\(['"])?/g,"$1"),d=s.elementsByName[h],d&&(a=a.slice(0,_+2)+(o?"$('":"")+j(d.id)+a.slice(c)))),c=a.indexOf(")",_+2),_=a.indexOf($[b]+"(",c);for(_=a.indexOf("Dist(");_>=0;)_>=0&&(c=a.indexOf(",",_+5),c>=0&&(h=a.slice(_+5,c),h=h.replace(/\\(['"])?/g,"$1"),d=s.elementsByName[h],d&&(a=a.slice(0,_+5)+j(d.id)+a.slice(c)))),c=a.indexOf(",",_+5),_=a.indexOf(",",c),c=a.indexOf(")",_+1),c>=0&&(h=a.slice(_+1,c),h=h.replace(/\\(['"])?/g,"$1"),d=s.elementsByName[h],d&&(a=a.slice(0,_+1)+j(d.id)+a.slice(c))),c=a.indexOf(")",_+1),_=a.indexOf("Dist(",c);for($=["Deg","Rad"],b=0;b<$.length;b++)for(_=a.indexOf($[b]+"(");_>=0;)_>=0&&(c=a.indexOf(",",_+4),c>=0&&(h=a.slice(_+4,c),h=h.replace(/\\(['"])?/g,"$1"),d=s.elementsByName[h],d&&(a=a.slice(0,_+4)+j(d.id)+a.slice(c)))),c=a.indexOf(",",_+4),_=a.indexOf(",",c),c=a.indexOf(",",_+1),c>=0&&(h=a.slice(_+1,c),h=h.replace(/\\(['"])?/g,"$1"),d=s.elementsByName[h],d&&(a=a.slice(0,_+1)+j(d.id)+a.slice(c))),c=a.indexOf(",",_+1),_=a.indexOf(",",c),c=a.indexOf(")",_+1),c>=0&&(h=a.slice(_+1,c),h=h.replace(/\\(['"])?/g,"$1"),d=s.elementsByName[h],d&&(a=a.slice(0,_+1)+j(d.id)+a.slice(c))),c=a.indexOf(")",_+1),_=a.indexOf($[b]+"(",c);return a},replaceIdByObj:function(a){var s=/(X|Y|L)\(([\w_]+)\)/g;return a=a.replace(s,"$('$2').$1()"),s=/(V)\(([\w_]+)\)/g,a=a.replace(s,"$('$2').Value()"),s=/(Dist)\(([\w_]+),([\w_]+)\)/g,a=a.replace(s,"dist($('$2'), $('$3'))"),s=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,a=a.replace(s,"deg($('$2'),$('$3'),$('$4'))"),s=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,a=a.replace(s,"rad($('$1'),$('$2'),$('$3'))"),s=/N\((.+)\)/g,a=a.replace(s,"($1)"),a},geonext2JS:function(a,s){var o,c,h,d=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],b=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&amp;/g,"&"),c=a,c=this.replaceNameById(c,s),c=this.replaceIf(c),c=this.replacePow(c),c=this.replaceIdByObj(c),h=0;h<d.length;h++)o=new RegExp(["(\\W|^)(",d[h],")"].join(""),"ig"),c=c.replace(o,["$1",b[h]].join(""));return c=c.replace(/True/g,"true"),c=c.replace(/False/g,"false"),c=c.replace(/fasle/g,"false"),c=c.replace(/Pi/g,"PI"),c=c.replace(/"/g,"'"),c},findDependencies:function(a,s,o){var c,h,d,b;JXG$1.exists(o)||(o=a.board),c=o.elementsByName;for(h in c)c.hasOwnProperty(h)&&h!==a.name&&(c[h].elementClass===Const.OBJECT_CLASS_TEXT?c[h].evalVisProp("islabel")||(b=h.replace(/\[/g,"\\["),b=b.replace(/\]/g,"\\]"),d=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+b+")(,[\\w\\[\\]'_ ]+)*\\)","g"),s.search(d)>=0&&c[h].addChild(a)):(b=h.replace(/\[/g,"\\["),b=b.replace(/\]/g,"\\]"),d=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+b+")(,[\\w\\[\\]'_ ]+)*\\)","g"),s.search(d)>=0&&c[h].addChild(a)))},gxt2jc:function(a,s){var o;return a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&amp;/g,"&"),o=a,o=this.replaceNameById(o,s,!0),o=o.replace(/True/g,"true"),o=o.replace(/False/g,"false"),o=o.replace(/fasle/g,"false"),o}};const GeonextParser=JXG$1.GeonextParser;JXG$1.GeometryElement=function(a,s,o,c){var h,d,b;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",Name:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks",Bounds:"bounds"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},EventEmitter.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,this.view=null,arguments.length>0){this.board=a,this.type=o,this._org_type=o,this.elementClass=c||Const.OBJECT_CLASS_OTHER,this.id=s.id,h=s.name,JXG$1.exists(h)||(h=this.board.generateName(this)),h!==""&&(this.board.elementsByName[h]=this),this.name=h,this.needsRegularUpdate=s.needsregularupdate,JXG$1.clearVisPropOld(this),b=this.resolveShortcuts(s);for(d in b)b.hasOwnProperty(d)&&this._set(d,b[d]);this.visProp.draft=b.draft&&b.draft.draft}};JXG$1.extend(JXG$1.GeometryElement.prototype,{addChild:function(a){var s,o;this.childElements[a.id]=a,this.addDescendants(a),a.ancestors[this.id]=this;for(s in this.descendants)if(this.descendants.hasOwnProperty(s)){this.descendants[s].ancestors[this.id]=this;for(o in this.ancestors)this.ancestors.hasOwnProperty(o)&&(this.descendants[s].ancestors[this.ancestors[o].id]=this.ancestors[o])}for(s in this.ancestors)if(this.ancestors.hasOwnProperty(s))for(o in this.descendants)this.descendants.hasOwnProperty(o)&&(this.ancestors[s].descendants[this.descendants[o].id]=this.descendants[o]);return this},addDescendants:function(a){var s;this.descendants[a.id]=a;for(s in a.childElements)a.childElements.hasOwnProperty(s)&&this.addDescendants(a.childElements[s]);return this},addParents:function(a){var s,o,c;for(JXG$1.isArray(a)?c=a:c=arguments,o=c.length,s=0;s<o;++s)JXG$1.exists(c[s])&&(JXG$1.isId(this.board,c[s])?this.parents.push(c[s]):JXG$1.exists(c[s].id)&&this.parents.push(c[s].id));this.parents=JXG$1.uniqueArray(this.parents)},setParents:function(a){this.parents=[],this.addParents(a)},addParentsFromJCFunctions:function(a){var s,o,c;for(s=0;s<a.length;s++)for(o in a[s].deps)c=a[s].deps[o],this.addParents(c),c.addChild(this);return this},removeChild:function(a){return delete this.childElements[a.id],this.removeDescendants(a),delete a.ancestors[this.id],this},removeDescendants:function(a){var s;delete this.descendants[a.id];for(s in a.childElements)a.childElements.hasOwnProperty(s)&&this.removeDescendants(a.childElements[s]);return this},countChildren:function(){var a,s,o=0;s=this.childElements;for(a in s)s.hasOwnProperty(a)&&a.indexOf("Label")<0&&o++;return o},getName:function(){return this.name},addTransform:function(a){return this},draggable:function(){return this.isDraggable&&!this.evalVisProp("fixed")&&this.type!==Const.OBJECT_TYPE_GLIDER},setPosition:function(a,s){var o=[],c,h,d,b;if(!JXG$1.exists(this.parents))return this;for(d=this.parents.length,h=0;h<d;++h)if(c=this.board.select(this.parents[h]),JXG$1.isPoint(c)){if(!c.draggable())return this;o.push(c)}if(s.length===3&&(s=s.slice(1)),b=this.board.create("transform",s,{type:"translate"}),d=o.length,d>0){if(b.applyOnce(o),JXG$1.exists(this.view)&&this.view.elType==="view3d")for(h=0;h<this.parents.length;++h)c=this.view.select(this.parents[h]),JXG$1.exists(c.setPosition2D)&&c.setPosition2D(b)}else this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(b):this.addTransform(b);for(h=0;h<d;++h)o[h].type===Const.OBJECT_TYPE_GLIDER&&o[h].updateGlider();return this},setPositionDirectly:function(a,s,o){var c=new Coords(a,s,this.board,!1),h=new Coords(a,o,this.board,!1),d=Stat.subtract(c.usrCoords,h.usrCoords);return this.setPosition(Const.COORDS_BY_USER,d),this},generatePolynomial:function(){return[]},animate:function(a,s,o){o=o||{};var c,h,d,b=this.board.attr.animationdelay,_=Math.ceil(s/b),$=this,j=function(Lt,fr,Jr){var Js,qs,zo,js,eu;for(Js=JXG$1.rgb2hsv(Lt),qs=JXG$1.rgb2hsv(fr),zo=(qs[0]-Js[0])/_,js=(qs[1]-Js[1])/_,eu=(qs[2]-Js[2])/_,$.animationData[Jr]=[],d=0;d<_;d++)$.animationData[Jr][_-d-1]=JXG$1.hsv2rgb(Js[0]+(d+1)*zo,Js[1]+(d+1)*js,Js[2]+(d+1)*eu)},Xt=function(Lt,fr,Jr,Js){var qs,zo;if(Lt=parseFloat(Lt),fr=parseFloat(fr),!(isNaN(Lt)||isNaN(fr)))for(zo=(fr-Lt)/_,$.animationData[Jr]=[],d=0;d<_;d++)qs=Lt+(d+1)*zo,$.animationData[Jr][_-d-1]=Js?Math.floor(qs):qs};this.animationData={};for(c in a)if(a.hasOwnProperty(c))switch(h=c.toLowerCase(),h){case"strokecolor":case"fillcolor":j(this.visProp[h],a[c],h);break;case"size":if(!JXG$1.isPoint(this))break;Xt(this.visProp[h],a[c],h,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":Xt(this.visProp[h],a[c],h,!1);break}return this.animationCallback=o.callback,this.board.addAnimation(this),this},update:function(){return this.evalVisProp("trace")&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(a){return this.prepareUpdate().update().updateVisibility(a).updateRenderer()},setDisplayRendNode:function(a){var s,o,c,h,d;if(a===void 0&&(a=this.visPropCalc.visible),a===this.visPropOld.visible)return this;for(this.board.renderer.display(this,a),o=this.inherits.length,c=0;c<o;c++)if(d=this.inherits[c],JXG$1.isArray(d))for(h=d.length,s=0;s<h;s++)JXG$1.exists(d[s])&&JXG$1.exists(d[s].rendNode)&&d[s].evalVisProp("visible")==="inherit"&&d[s].setDisplayRendNode(a);else JXG$1.exists(d)&&JXG$1.exists(d.rendNode)&&d.evalVisProp("visible")==="inherit"&&d.setDisplayRendNode(a);return this.hasLabel&&JXG$1.exists(this.label)&&JXG$1.exists(this.label.rendNode)&&this.label.evalVisProp("visible")==="inherit"&&this.label.setDisplayRendNode(a),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(a){var s,o,c,h,d,b;if(this.needsUpdate){if(JXG$1.exists(this.view)&&this.view.evalVisProp("visible")===!1)this.visPropCalc.visible=!1;else for(a!==void 0?this.visPropCalc.visible=a:(b=this.evalVisProp("visible"),JXG$1.exists(this.hiddenByParent)&&this.hiddenByParent&&(b=!1),b!=="inherit"&&(this.visPropCalc.visible=b)),o=this.inherits.length,c=0;c<o;c++)if(d=this.inherits[c],JXG$1.isArray(d))for(h=d.length,s=0;s<h;s++)JXG$1.exists(d[s])&&d[s].evalVisProp("visible")==="inherit"&&d[s].prepareUpdate().updateVisibility(this.visPropCalc.visible);else JXG$1.exists(d)&&d.evalVisProp("visible")==="inherit"&&d.prepareUpdate().updateVisibility(this.visPropCalc.visible);JXG$1.exists(this.label)&&JXG$1.exists(this.label.visProp)&&this.label.evalVisProp("visible")&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(a,s){var o;if(a=a.toLocaleLowerCase(),this.visProp.hasOwnProperty(a)&&a.indexOf("color")>=0&&JXG$1.isString(s)&&s.length===9&&s.charAt(0)==="#")s=JXG$1.rgba2rgbo(s),this.visProp[a]=s[0],this.visProp[a.replace("color","opacity")]=s[1];else if(s!==null&&JXG$1.isObject(s)&&!JXG$1.exists(s.id)&&!JXG$1.exists(s.name)){this.visProp[a]={};for(o in s)s.hasOwnProperty(o)&&(this.visProp[a][o.toLocaleLowerCase()]=s[o])}else this.visProp[a]=s},resolveShortcuts:function(a){var s,o,c,h=["traceattributes","traceAttributes"];for(s in Options$1.shortcuts)if(Options$1.shortcuts.hasOwnProperty(s)){if(JXG$1.exists(a[s]))for(o=0;o<Options$1.shortcuts[s].length;o++)JXG$1.exists(a[Options$1.shortcuts[s][o]])||(a[Options$1.shortcuts[s][o]]=a[s]);for(c=0;c<h.length;c++)JXG$1.isObject(a[h[c]])&&(a[h[c]]=this.resolveShortcuts(a[h[c]]))}return a},setLabel:function(a){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(a)},setLabelText:function(a){return JXG$1.exists(this.label)&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(a)),this},setName:function(a){a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.elType!=="slider"&&this.setLabelText(a),this.setAttribute({name:a})},setProperty:function(){JXG$1.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(a){var s,o,c,h,d,b,_,$,j,Xt={};for(s=0;s<arguments.length;s++)b=arguments[s],JXG$1.isString(b)?($=b.split(":"),Xt[JXG$1.trim($[0])]=JXG$1.trim($[1])):JXG$1.isArray(b)?Xt[b[0]]=b[1]:JXG$1.extend(Xt,b);Xt=this.resolveShortcuts(Xt);for(s in Xt)if(Xt.hasOwnProperty(s)){if(h=s.replace(/\s+/g,"").toLowerCase(),d=Xt[s],JXG$1.isObject(d)&&JXG$1.exists(this.visProp[h])){if(!JXG$1.isObject(this.visProp[h])&&d!==null&&JXG$1.isObject(d)&&(this.visProp[h]={}),JXG$1.mergeAttr(this.visProp[h],d),this.type===Const.OBJECT_TYPE_TICKS&&JXG$1.exists(this.labels))for(c=this.labels.length,o=0;o<c;o++)this.labels[o].setAttribute(d);else if(JXG$1.exists(this[h]))if(JXG$1.isArray(this[h]))for(o=0;o<this[h].length;o++)this[h][o].setAttribute(d);else this[h].setAttribute(d);else j=null,this.triggerEventHandlers(["attribute:"+h],[j,d,this]);continue}switch(j=this.visProp[h],h){case"checked":JXG$1.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!d);break;case"disabled":JXG$1.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!d);break;case"face":JXG$1.isPoint(this)&&(this.visProp.face=d,this.board.renderer.changePointStyle(this));break;case"generatelabelvalue":this.type===Const.OBJECT_TYPE_TICKS&&JXG$1.isFunction(d)&&(this.generateLabelValue=d);break;case"gradient":this.visProp.gradient=d,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":d=JXG$1.rgba2rgbo(d),this.visProp.gradientsecondcolor=d[0],this.visProp.gradientsecondopacity=d[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=d,this.board.renderer.updateGradient(this);break;case"infoboxtext":JXG$1.isString(d)?this.infoboxText=d:this.infoboxText=!1;break;case"labelcolor":d=JXG$1.rgba2rgbo(d),_=d[1],d=d[0],_===0&&JXG$1.exists(this.label)&&this.hasLabel&&this.label.hideElement(),JXG$1.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=d,this.board.renderer.setObjectStrokeColor(this.label,d,_)),this.elementClass===Const.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=d,this.visProp.strokeopacity=_,this.board.renderer.setObjectStrokeColor(this,d,_));break;case"layer":this.board.renderer.setLayer(this,this.eval(d)),this._set(h,d);break;case"maxlength":JXG$1.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!d);break;case"name":j=this.name,delete this.board.elementsByName[this.name],this.name=d,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!(d==="false"||d===!1),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"onpolygon":this.type===Const.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!d);break;case"radius":(this.type===Const.OBJECT_TYPE_ANGLE||this.type===Const.OBJECT_TYPE_SECTOR)&&this.setRadius(d);break;case"rotate":(this.elementClass===Const.OBJECT_CLASS_TEXT&&this.evalVisProp("display")==="internal"||this.type===Const.OBJECT_TYPE_IMAGE)&&this.addRotation(d);break;case"tabindex":JXG$1.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",d),this._set(h,d));break;case"trace":d==="false"||d===!1?(this.clearTrace(),this.visProp.trace=!1):d==="pause"?this.visProp.trace=!1:this.visProp.trace=!0;break;case"visible":d==="false"?this.visProp.visible=!1:d==="true"?this.visProp.visible=!0:this.visProp.visible=d,this.setDisplayRendNode(this.evalVisProp("visible")),this.evalVisProp("visible")&&JXG$1.exists(this.updateSize)&&this.updateSize();break;case"withlabel":this.visProp.withlabel=d,this.evalVisProp("withlabel")?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=d;break;case"straightfirst":case"straightlast":this._set(h,d);for(o in this.childElements)this.childElements.hasOwnProperty(o)&&this.childElements[o].elType==="glider"&&this.childElements[o].fullUpdate();break;default:JXG$1.exists(this.visProp[h])&&(!JXG$1.Validator[h]||JXG$1.Validator[h]&&JXG$1.Validator[h](d)||JXG$1.Validator[h]&&JXG$1.isFunction(d)&&JXG$1.Validator[h](d(this)))?(d=d.toLowerCase&&d.toLowerCase()==="false"?!1:d,this._set(h,d)):h in Options$1.shortcuts||JXG$1.warn("attribute '"+h+"' does not accept type '"+typeof d+"' of value "+d+".");break}this.triggerEventHandlers(["attribute:"+h],[j,d,this])}return this.triggerEventHandlers(["attribute"],[Xt,this]),this.evalVisProp("needsregularupdate")?this.board.update(this):this.board.fullUpdate(),this.elementClass===Const.OBJECT_CLASS_TEXT&&this.updateSize(),this},getProperty:function(){JXG$1.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(a){var s;switch(a=a.toLowerCase(),a){case"needsregularupdate":s=this.needsRegularUpdate;break;case"labelcolor":s=this.label.visProp.strokecolor;break;case"infoboxtext":s=this.infoboxText;break;case"withlabel":s=this.hasLabel;break;default:s=this.visProp[a];break}return s},evalVisProp:function(a){var s,o,c,h,d,b,_;if(a=a.toLowerCase(),a.indexOf(".")===-1)s=this.visProp[a];else for(o=a.split("."),h=o.length,s=this.visProp,c=0;c<h;c++)JXG$1.exists(s)&&(s=s[o[c]]);if(JXG$1.isFunction(s))return this.visProp.islabel===!0&&JXG$1.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?s(this.visProp.anchor.visProp.element3d):s(this.visProp.anchor):JXG$1.exists(this.visProp.element3d)?s(this.visProp.element3d):s(this);if(s==="inherit"){for(d in this.descendants)if(this.descendants.hasOwnProperty(d)){for(b=this.descendants[d],_=!1,h=b.inherits.length,c=0;c<h;c++)if(this.id===b.inherits[c].id){_=!0;break}if(_){s=b.evalVisProp(a);break}}}return s},eval:function(a){return JXG$1.isFunction(a)?this.visProp.islabel===!0&&JXG$1.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?a(this.visProp.anchor.visProp.element3d):a(this.visProp.anchor):this.visProp.element3d!==null?a(this.visProp.element3d):a(this):a},setDash:function(a){return this.setAttribute({dash:a}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new Coords(Const.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new Coords(Const.COORDS_BY_USER,[0,0],this.board)},setArrow:function(a,s){return this.visProp.firstarrow=a,this.visProp.lastarrow=s,s&&(this.type=Const.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var a=this.evalVisProp("gradient");(a==="linear"||a==="radial")&&this.board.renderer.setGradient(this)},createLabel:function(){var a,s=this;return JXG$1.elements.text?(a=JXG$1.deepCopy(this.visProp.label,null),a.id=this.id+"Label",a.isLabel=!0,a.anchor=this,a.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=JXG$1.elements.text(this.board,[0,0,function(){return JXG$1.isFunction(s.name)?s.name(s):s.name}],a),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):JXG$1.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(a){return a=JXG$1.def(a,!1),this.evalVisProp("highlight")&&(!this.highlighted||a)&&(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var a;for(a in this.traces)this.traces.hasOwnProperty(a)&&this.board.renderer.remove(this.traces[a]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=Mat.normalize(this.stdform),this},toJSON:function(){var a,s,o=['{"name":',this.name];o.push(', "id":'+this.id),a=[];for(s in this.visProp)this.visProp.hasOwnProperty(s)&&JXG$1.exists(this.visProp[s])&&a.push('"'+s+'":'+this.visProp[s]);return o.push(', "visProp":{'+a.toString()+"}"),o.push("}"),o.join("")},addRotation:function(a){var s,o,c,h,d,b=this;return(this.elementClass===Const.OBJECT_CLASS_TEXT||this.type===Const.OBJECT_TYPE_IMAGE)&&a!==0&&(s=this.board.create("transform",[function(){return-b.X()},function(){return-b.Y()}],{type:"translate"}),o=this.board.create("transform",[function(){return b.X()},function(){return b.Y()}],{type:"translate"}),c=this.board.create("transform",[function(){return b.board.unitX/b.board.unitY},function(){return 1}],{type:"scale"}),h=this.board.create("transform",[function(){return b.board.unitY/b.board.unitX},function(){return 1}],{type:"scale"}),d=this.board.create("transform",[function(){return b.eval(a)*Math.PI/180}],{type:"rotate"}),s.bindTo(this),c.bindTo(this),d.bindTo(this),h.bindTo(this),o.bindTo(this)),this},highlightStrokeColor:function(a){return JXG$1.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:a}),this},strokeColor:function(a){return JXG$1.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:a}),this},strokeWidth:function(a){return JXG$1.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:a}),this},fillColor:function(a){return JXG$1.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:a}),this},highlightFillColor:function(a){return JXG$1.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:a}),this},labelColor:function(a){return JXG$1.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:a}),this},dash:function(a){return JXG$1.deprecated("dash()","setAttribute()"),this.setAttribute({dash:a}),this},visible:function(a){return JXG$1.deprecated("visible()","setAttribute()"),this.setAttribute({visible:a}),this},shadow:function(a){return JXG$1.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:a}),this},getType:function(){return this.elType},getParents:function(){return JXG$1.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var a=JXG$1.deepCopy(this.visProp),s=[],o,c=s.length;for(a.id=this.id,a.name=this.name,o=0;o<c;o++)delete a[s[o]];return a},hasPoint:function(a,s){return!1},addTicks:function(a){return(a.id===""||!JXG$1.exists(a.id))&&(a.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(a),this.ticks.push(a),a.id},removeAllTicks:function(){var a;if(JXG$1.exists(this.ticks)){for(a=this.ticks.length-1;a>=0;a--)this.removeTicks(this.ticks[a]);this.ticks=[],this.board.update()}},removeTicks:function(a){var s,o;if(JXG$1.exists(this.defaultTicks)&&this.defaultTicks===a&&(this.defaultTicks=null),JXG$1.exists(this.ticks)){for(s=this.ticks.length-1;s>=0;s--)if(this.ticks[s]===a){if(this.board.removeObject(this.ticks[s]),this.ticks[s].ticks)for(o=0;o<this.ticks[s].ticks.length;o++)JXG$1.exists(this.ticks[s].labels[o])&&this.board.removeObject(this.ticks[s].labels[o]);delete this.ticks[s];break}}},getSnapSizes:function(){var a,s,o;return a=this.evalVisProp("snapsizex"),s=this.evalVisProp("snapsizey"),a<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(o=this.board.defaultAxes.x.defaultTicks,a=o.ticksDelta*(o.evalVisProp("minorticks")+1)),s<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(o=this.board.defaultAxes.y.defaultTicks,s=o.ticksDelta*(o.evalVisProp("minorticks")+1)),[a,s]},handleSnapToGrid:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr=!1,Js=this.evalVisProp("attracttogrid"),qs=this.evalVisProp("attractorunit"),zo=this.evalVisProp("attractordistance");return!JXG$1.exists(this.coords)||this.evalVisProp("fixed")?this:(Jr=this.evalVisProp("snaptogrid")||Js||a===!0,Jr&&(o=this.coords.usrCoords[1],c=this.coords.usrCoords[2],Xt=this.getSnapSizes(),Lt=Xt[0],fr=Xt[1],Lt>0&&fr>0&&(j=this.board.getBoundingBox(),h=Math.round(o/Lt)*Lt,d=Math.round(c/fr)*fr,b=new JXG$1.Coords(Const.COORDS_BY_USER,[h,d],this.board),(!Js||b.distance(qs==="screen"?Const.COORDS_BY_SCREEN:Const.COORDS_BY_USER,this.coords)<zo)&&(o=h,c=d,s||(_=Math.min(j[0],j[2]),$=Math.max(j[0],j[2]),o<_&&o>_-Lt?o+=Lt:o>$&&o<$+Lt&&(o-=Lt),_=Math.min(j[1],j[3]),$=Math.max(j[1],j[3]),c<_&&c>_-fr?c+=fr:c>$&&c<$+fr&&(c-=fr)),this.coords.setCoordinates(Const.COORDS_BY_USER,[o,c])))),this)},getBoundingBox:function(){var a,s,o,c,h,d,b=[1/0,1/0,-1/0,-1/0];if(this.type===Const.OBJECT_TYPE_POLYGON){if(s=this.vertices.length-1,s<=0)return b;for(a=0;a<s;a++)o=this.vertices[a].X(),b[0]=o<b[0]?o:b[0],b[2]=o>b[2]?o:b[2],o=this.vertices[a].Y(),b[1]=o<b[1]?o:b[1],b[3]=o>b[3]?o:b[3]}else if(this.elementClass===Const.OBJECT_CLASS_CIRCLE)c=this.center.X(),h=this.center.Y(),b=[c-this.radius,h+this.radius,c+this.radius,h-this.radius];else if(this.elementClass===Const.OBJECT_CLASS_CURVE){if(s=this.points.length,s===0)return b;for(a=0;a<s;a++)o=this.points[a].usrCoords[1],b[0]=o<b[0]?o:b[0],b[2]=o>b[2]?o:b[2],o=this.points[a].usrCoords[2],b[1]=o<b[1]?o:b[1],b[3]=o>b[3]?o:b[3]}else this.elementClass===Const.OBJECT_CLASS_POINT?(c=this.X(),h=this.Y(),d=this.evalVisProp("size"),b=[c-d/this.board.unitX,h-d/this.board.unitY,c+d/this.board.unitX,h+d/this.board.unitY]):this.elementClass===Const.OBJECT_CLASS_LINE&&(o=this.point1.coords.usrCoords[1],b[0]=o<b[0]?o:b[0],b[2]=o>b[2]?o:b[2],o=this.point1.coords.usrCoords[2],b[1]=o<b[1]?o:b[1],b[3]=o>b[3]?o:b[3],o=this.point2.coords.usrCoords[1],b[0]=o<b[0]?o:b[0],b[2]=o>b[2]?o:b[2],o=this.point2.coords.usrCoords[2],b[1]=o<b[1]?o:b[1],b[3]=o>b[3]?o:b[3]);return b},addEvent:JXG$1.shortcut(JXG$1.GeometryElement.prototype,"on"),removeEvent:JXG$1.shortcut(JXG$1.GeometryElement.prototype,"off"),formatNumberLocale:function(a,s){var o,c,h,d={},b={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(JXG$1.exists(Intl)&&this.useLocale()){o=this.evalVisProp("intl.locale")||this.eval(this.board.attr.intl.locale),c=this.evalVisProp("intl.options")||{};for(h in c)c.hasOwnProperty(h)&&(b.hasOwnProperty(h)?d[b[h]]=this.eval(c[h]):d[h]=this.eval(c[h]));return h="maximumfractiondigits",JXG$1.exists(c[h])||(d[b[h]]=s),Intl.NumberFormat(o,d).format(a)}return a},useLocale:function(){var a;return!JXG$1.exists(this.visProp.intl)||!JXG$1.exists(this.visProp.intl.enabled)?!1:(a=this.evalVisProp("intl.enabled"),a===!0||a==="inherit"&&this.eval(this.board.attr.intl.enabled)===!0)},__evt__over:function(a){},__evt__mouseover:function(a){},__evt__out:function(a){},__evt__mouseout:function(a){},__evt__move:function(a){},__evt__mousemove:function(a){},__evt__drag:function(a){},__evt__mousedrag:function(a){},__evt__pendrag:function(a){},__evt__touchdrag:function(a){},__evt__keydrag:function(a){},__evt__down:function(a){},__evt__mousedown:function(a){},__evt__pendown:function(a){},__evt__touchdown:function(a){},__evt__click:function(a){},__evt__dblclick:function(a){},__evt__mouseclick:function(a){},__evt__mousedblclick:function(a){},__evt__pointerclick:function(a){},__evt__pointerdblclick:function(a){},__evt__up:function(a){},__evt__mouseup:function(a){},__evt__penup:function(a){},__evt__touchup:function(a){},__evt__attribute:function(a,s){},__evt__attribute_:function(a,s,o){},__evt:function(){}});const GeometryElement=JXG$1.GeometryElement;JXG$1.CoordsElement=function(a,s){var o;for(JXG$1.exists(a)||(a=[1,0,0]),o=0;o<a.length;++o)a[o]=parseFloat(a[o]);this.coords=new Coords(Const.COORDS_BY_USER,a,this.board),this.initialCoords=new Coords(Const.COORDS_BY_USER,a,this.board),this.actualCoords=new Coords(Const.COORDS_BY_USER,a,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=JXG$1.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),JXG$1.exists(this.element)&&this.addAnchor(a,s),this.isDraggable=!0};JXG$1.extend(JXG$1.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(a){return this.needsUpdate?(JXG$1.exists(a)||(a=!1),this.evalVisProp("frozen")!==!0&&this.updateConstraint(),this.type===Const.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(a=!1),a?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(a),this):this},updateGlider:function(){var a,s,o,c,h,d,b,_,$,j,Xt,Lt,fr=2*Math.PI,Jr,Js,qs,zo,js,eu=!1,Oo,tu,Bo,vu=this.slideObject,t1,e1,r1=[],a1;if(this.needsUpdateFromParent=!1,vu.elementClass===Const.OBJECT_CLASS_CIRCLE)this.evalVisProp("isgeonext")&&(fr=1),zo=Geometry.projectPointToCircle(this,vu,this.board),js=Geometry.rad([vu.center.X()+1,vu.center.Y()],vu.center,this)/fr;else if(vu.elementClass===Const.OBJECT_CLASS_LINE){if(this.onPolygon){if(c=vu.point1.coords.usrCoords,h=vu.point2.coords.usrCoords,a=1,s=h[a]-c[a],Math.abs(s)<Mat.eps&&(a=2,s=h[a]-c[a]),b=Geometry.projectPointToLine(this,vu,this.board),_=(b.usrCoords[a]-c[a])/s,d=vu.parentPolygon,_<0){for(a=0;a<d.borders.length;a++)if(vu===d.borders[a]){vu=d.borders[(a-1+d.borders.length)%d.borders.length];break}}else if(_>1){for(a=0;a<d.borders.length;a++)if(vu===d.borders[a]){vu=d.borders[(a+1+d.borders.length)%d.borders.length];break}}vu.id!==this.slideObject.id&&(this.slideObject=vu)}c=vu.point1.coords,h=vu.point2.coords,s=c.distance(Const.COORDS_BY_USER,h),s<Mat.eps?(zo=c,eu=!0,js=0):(zo=Geometry.projectPointToLine(this,vu,this.board),c=c.usrCoords.slice(0),h=h.usrCoords.slice(0),Math.abs(h[0])<Mat.eps?(a=1,s=h[a],Math.abs(s)<Mat.eps&&(a=2,s=h[a]),s=(zo.usrCoords[a]-c[a])/s,j=s>=0?1:-1,s=Math.abs(s),js=j*s/(s+1)):Math.abs(c[0])<Mat.eps?(a=1,s=c[a],Math.abs(s)<Mat.eps&&(a=2,s=c[a]),s=(zo.usrCoords[a]-h[a])/s,s<0?js=(1-2*s)/(1-s):js=1/(s+1)):(a=1,s=h[a]-c[a],Math.abs(s)<Mat.eps&&(a=2,s=h[a]-c[a]),js=(zo.usrCoords[a]-c[a])/s)),tu=this.findClosestSnapValue(js),tu!==null?(Bo=this.evalVisProp("snapvalues"),js=(Bo[tu]-this._smin)/(this._smax-this._smin),this.update(!0)):(Oo=this.evalVisProp("snapwidth"),Oo>0&&Math.abs(this._smax-this._smin)>=Mat.eps&&(js=Math.max(Math.min(js,1),0),o=js*(this._smax-this._smin),o=Math.round(o/Oo)*Oo+this._smin,js=(o-this._smin)/(this._smax-this._smin),this.update(!0))),c=vu.point1.coords,!vu.evalVisProp("straightfirst")&&Math.abs(c.usrCoords[0])>Mat.eps&&js<0&&(zo=c,eu=!0,js=0),h=vu.point2.coords,!vu.evalVisProp("straightlast")&&Math.abs(h.usrCoords[0])>Mat.eps&&js>1&&(zo=h,eu=!0,js=1)}else if(vu.type===Const.OBJECT_TYPE_TURTLE)this.updateConstraint(),t1=Geometry.projectPointToTurtle(this,vu,this.board),zo=t1[0],js=t1[1];else if(vu.elementClass===Const.OBJECT_CLASS_CURVE)if(vu.type===Const.OBJECT_TYPE_ARC||vu.type===Const.OBJECT_TYPE_SECTOR)zo=Geometry.projectPointToCircle(this,vu,this.board),$=Geometry.rad(vu.radiuspoint,vu.center,this),Xt=0,Lt=Geometry.rad(vu.radiuspoint,vu.center,vu.anglepoint),js=$,Oo=vu.evalVisProp("selection"),(Oo==="minor"&&Lt>Math.PI||Oo==="major"&&Lt<Math.PI)&&(Xt=Lt,Lt=2*Math.PI),($<Xt||$>Lt)&&(js=Lt,($<Xt&&$>Xt*.5||$>Lt&&$>Lt*.5+Math.PI)&&(js=Xt),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),fr=Lt-Xt,this.visProp.isgeonext&&(fr=1),Math.abs(fr)>Mat.eps&&(js/=fr);else if(this.updateConstraint(),vu.transformations.length>0){for(a1=!1,t1=vu.getTransformationSource(),t1[0]&&(a1=t1[0],r1.push(vu),r1.push(t1[1]));t1[0]&&JXG$1.exists(t1[1]._transformationSource);)t1=t1[1].getTransformationSource(),r1.push(t1[1]);if(e1=this.coords.usrCoords,a1){for(a=0;a<r1.length;a++)r1[a].updateTransformMatrix(),qs=Mat.inverse(r1[a].transformMat),e1=Mat.matVecMult(qs,e1);for(Jr=new Coords(Const.COORDS_BY_USER,e1,this.board).usrCoords,Js=Geometry.projectCoordsToCurve(Jr[1],Jr[2],this.position||0,r1[r1.length-1],this.board),e1=Js[0].usrCoords,a=r1.length-2;a>=0;a--)e1=Mat.matVecMult(r1[a].transformMat,e1);Js[0]=new Coords(Const.COORDS_BY_USER,e1,this.board)}else vu.updateTransformMatrix(),qs=Mat.inverse(vu.transformMat),e1=Mat.matVecMult(qs,e1),Jr=new Coords(Const.COORDS_BY_USER,e1,this.board).usrCoords,Js=Geometry.projectCoordsToCurve(Jr[1],Jr[2],this.position||0,vu,this.board);zo=Js[0],js=Js[1]}else t1=Geometry.projectPointToCurve(this,vu,this.board),zo=t1[0],js=t1[1];else JXG$1.isPoint(vu)&&(zo=Geometry.projectPointToPoint(this,vu,this.board),js=this.position);this.coords.setCoordinates(Const.COORDS_BY_USER,zo.usrCoords,eu),this.position=js},findClosestSnapValue:function(a){var s,o,c,h,d=null;if(c=this.evalVisProp("snapvalues"),h=this.evalVisProp("snapvaluedistance"),JXG$1.isArray(c)&&Math.abs(this._smax-this._smin)>=Mat.eps&&h>0)for(s=0;s<c.length;s++)o=Math.abs(a*(this._smax-this._smin)+this._smin-c[s]),o<h&&(h=o,d=s);return d},updateGliderFromParent:function(){var a,s,o,c,h,d=this.slideObject,b=[],_,$,j,Xt,Lt,fr,Jr,Js=2*Math.PI;if(!this.needsUpdateFromParent){this.needsUpdateFromParent=!0;return}if(d.elementClass===Const.OBJECT_CLASS_CIRCLE)o=d.Radius(),this.evalVisProp("isgeonext")&&(Js=1),h=[d.center.X()+o*Math.cos(this.position*Js),d.center.Y()+o*Math.sin(this.position*Js)];else if(d.elementClass===Const.OBJECT_CLASS_LINE)a=d.point1.coords.usrCoords,s=d.point2.coords.usrCoords,a[0]===0&&a[1]===0&&a[2]===0||s[0]===0&&s[1]===0&&s[2]===0?h=[0,0,0]:Math.abs(s[0])<Mat.eps?(c=Math.min(Math.abs(this.position),1-Mat.eps),c/=1-c,this.position<0&&(c=-c),h=[a[0]+c*s[0],a[1]+c*s[1],a[2]+c*s[2]]):Math.abs(a[0])<Mat.eps?(c=Math.max(this.position,Mat.eps),c=Math.min(c,2-Mat.eps),c>1?c=(c-1)/(c-2):c=(1-c)/c,h=[s[0]+c*a[0],s[1]+c*a[1],s[2]+c*a[2]]):(c=this.position,h=[a[0]+c*(s[0]-a[0]),a[1]+c*(s[1]-a[1]),a[2]+c*(s[2]-a[2])]);else if(d.type===Const.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(Const.COORDS_BY_USER,[d.Z(this.position),d.X(this.position),d.Y(this.position)]),this.updateConstraint(),h=Geometry.projectPointToTurtle(this,d,this.board)[0].usrCoords;else if(d.elementClass===Const.OBJECT_CLASS_CURVE){for(j=!1,_=d.getTransformationSource(),_[0]&&(j=_[0],b.push(d),b.push(_[1]));_[0]&&JXG$1.exists(_[1]._transformationSource);)_=_[1].getTransformationSource(),b.push(_[1]);if(j?this.coords.setCoordinates(Const.COORDS_BY_USER,[b[b.length-1].Z(this.position),b[b.length-1].X(this.position),b[b.length-1].Y(this.position)]):this.coords.setCoordinates(Const.COORDS_BY_USER,[d.Z(this.position),d.X(this.position),d.Y(this.position)]),d.type===Const.OBJECT_TYPE_ARC||d.type===Const.OBJECT_TYPE_SECTOR)Xt=Geometry.rad([d.center.X()+1,d.center.Y()],d.center,d.radiuspoint),Lt=0,Jr=Geometry.rad(d.radiuspoint,d.center,d.anglepoint),(d.visProp.selection==="minor"&&Jr>Math.PI||d.visProp.selection==="major"&&Jr<Math.PI)&&(Lt=Jr,Jr=2*Math.PI),Js=Jr-Lt,this.evalVisProp("isgeonext")&&(Js=1),fr=this.position*Js,(fr<Lt||fr>Jr)&&(fr=Jr,(fr<Lt&&fr>Lt*.5||fr>Jr&&fr>Jr*.5+Math.PI)&&(fr=Lt),this.position=fr,Math.abs(Js)>Mat.eps&&(this.position/=Js)),o=d.Radius(),h=[d.center.X()+o*Math.cos(this.position*Js+Xt),d.center.Y()+o*Math.sin(this.position*Js+Xt)];else if(this.updateConstraint(),j)for(h=Geometry.projectPointToCurve(this,b[b.length-1],this.board)[0].usrCoords,$=b.length-2;$>=0;$--)h=new Coords(Const.COORDS_BY_USER,Mat.matVecMult(b[$].transformMat,h),this.board).usrCoords;else h=Geometry.projectPointToCurve(this,d,this.board)[0].usrCoords}else JXG$1.isPoint(d)&&(h=Geometry.projectPointToPoint(this,d,this.board).usrCoords);this.coords.setCoordinates(Const.COORDS_BY_USER,h,!1)},updateRendererGeneric:function(a){return!this.needsUpdate||!this.board.renderer?this:(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>Mat.eps?this.isReal:!1,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[a](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this)},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(a){return a?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(a){return this.isReal&&a.isReal?this.coords.distance(Const.COORDS_BY_USER,a.coords):NaN},snapToGrid:function(a){return this.handleSnapToGrid(a)},handleSnapToPoints:function(a){var s,o,c,h=0,d,b=1/0,_=null,$,j,Xt=this.evalVisProp("ignoredsnaptopoints"),Lt,fr,Jr=!1;if(d=this.board.objectsList.length,Xt&&(Lt=Xt.length),this.evalVisProp("snaptopoints")||a){for($=this.evalVisProp("attractorunit"),j=this.evalVisProp("attractordistance"),s=0;s<d;s++){if(o=this.board.objectsList[s],Xt){for(Jr=!1,fr=0;fr<Lt;fr++)if(o===this.board.select(Xt[fr])){Jr=!0;break}if(Jr)continue}JXG$1.isPoint(o)&&o!==this&&o.visPropCalc.visible&&(c=Geometry.projectPointToPoint(this,o,this.board),$==="screen"?h=c.distance(Const.COORDS_BY_SCREEN,this.coords):h=c.distance(Const.COORDS_BY_USER,this.coords),h<j&&h<b&&(b=h,_=c))}_!==null&&this.coords.setCoordinates(Const.COORDS_BY_USER,_.usrCoords)}return this},snapToPoints:function(a){return this.handleSnapToPoints(a)},handleAttractors:function(){var a,s,o,c=0,h,d=this.evalVisProp("attractorunit"),b=this.evalVisProp("attractordistance"),_=this.evalVisProp("snatchdistance"),$=this.evalVisProp("attractors"),j=$.length;if(b!==0){for(a=0;a<j;a++)if(s=this.board.select($[a]),JXG$1.exists(s)&&s!==this){if(JXG$1.isPoint(s)?o=Geometry.projectPointToPoint(this,s,this.board):s.elementClass===Const.OBJECT_CLASS_LINE?(h=Geometry.projectCoordsToSegment(this.coords.usrCoords,s.point1.coords.usrCoords,s.point2.coords.usrCoords),!s.evalVisProp("straightfirst")&&h[1]<0?o=s.point1.coords:!s.evalVisProp("straightlast")&&h[1]>1?o=s.point2.coords:o=new Coords(Const.COORDS_BY_USER,h[0],this.board)):s.elementClass===Const.OBJECT_CLASS_CIRCLE?o=Geometry.projectPointToCircle(this,s,this.board):s.elementClass===Const.OBJECT_CLASS_CURVE?o=Geometry.projectPointToCurve(this,s,this.board)[0]:s.type===Const.OBJECT_TYPE_TURTLE?o=Geometry.projectPointToTurtle(this,s,this.board)[0]:s.type===Const.OBJECT_TYPE_POLYGON&&(o=new Coords(Const.COORDS_BY_USER,Geometry.projectCoordsToPolygon(this.coords.usrCoords,s),this.board)),d==="screen"?c=o.distance(Const.COORDS_BY_SCREEN,this.coords):c=o.distance(Const.COORDS_BY_USER,this.coords),c<b){this.type===Const.OBJECT_TYPE_GLIDER&&(s===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===s)||this.makeGlider(s);break}c>=_&&(s===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===s)&&this.popSlideObject()}return this}},setPositionDirectly:function(a,s){var o,c,h,d,b=this.coords,_;if(this.relativeCoords)return c=new Coords(a,s,this.board),this.evalVisProp("islabel")?(h=Stat.subtract(c.scrCoords,b.scrCoords),this.relativeCoords.scrCoords[1]+=h[1],this.relativeCoords.scrCoords[2]+=h[2]):(h=Stat.subtract(c.usrCoords,b.usrCoords),this.relativeCoords.usrCoords[1]+=h[1],this.relativeCoords.usrCoords[2]+=h[2]),this;if(this.coords.setCoordinates(a,s),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),this.actualCoords.setCoordinates(Const.COORDS_BY_USER,this.coords.usrCoords),this.transformations.length>0){for(a===Const.COORDS_BY_SCREEN?_=new Coords(a,s,this.board).usrCoords:(s.length===2&&(s=[1].concat(s)),_=s),d=[[1,0,0],[0,1,0],[0,0,1]],o=0;o<this.transformations.length;o++)d=Mat.matMatMult(this.transformations[o].matrix,d);_=Mat.matVecMult(Mat.inverse(d),_),this.initialCoords.setCoordinates(Const.COORDS_BY_USER,_),this.elementClass!==Const.OBJECT_CLASS_POINT&&this.coords.setCoordinates(Const.COORDS_BY_USER,_)}return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===Const.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(a,s){var o;return s=new Coords(a,s,this.board),o=this.board.create("transform",s.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(o):this.addTransform(this,o),this.prepareUpdate().update(),this},setPosition:function(a,s){return this.setPositionDirectly(a,s)},setGliderPosition:function(a){return this.type===Const.OBJECT_TYPE_GLIDER&&(this.position=a,this.board.update()),this},makeGlider:function(a){var s=this.board.select(a),o=!1,c,h,d;if(s.type===Const.OBJECT_TYPE_POLYGON){for(c=Number.MAX_VALUE,h=0;h<s.borders.length;h++)d=JXG$1.Math.Geometry.distPointLine(this.coords.usrCoords,s.borders[h].stdform),d<c&&(c=d,a=s.borders[h]);s=this.board.select(a),o=!0}if(JXG$1.exists(s)){if(s.type===Const.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.")}else throw new Error("JSXGraph: slide object undefined.");return this.slideObject=this.board.select(a),this.slideObjects.push(this.slideObject),this.addParents(a),this.type=Const.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=o,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),this.slideObjects.length===0?(this.type=this._org_type,this.type===Const.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===Const.OBJECT_CLASS_TEXT?this.elType="text":this.type===Const.OBJECT_TYPE_IMAGE?this.elType="image":this.type===Const.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var a,s;if(this.type!==Const.OBJECT_TYPE_GLIDER)if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,!this.isDraggable)this.isDraggable=!0,this.elementClass===Const.OBJECT_CLASS_POINT&&(this.type=Const.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null;else return;for(a in this.board.objects)this.board.objects.hasOwnProperty(a)&&(s=this.board.objects[a],s.descendants&&(delete s.descendants[this.id],delete s.childElements[this.id],this.hasLabel&&(delete s.descendants[this.label.id],delete s.childElements[this.label.id])));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===Const.OBJECT_CLASS_POINT?(this.type=Const.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===Const.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===Const.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(a){var s,o,c=[],h=["X","Y"],d=function(_){return function(){return _}},b=function(_){return function(){return _.Value()}};for(this.elementClass===Const.OBJECT_CLASS_POINT&&(this.type=Const.OBJECT_TYPE_CAS),this.isDraggable=!1,s=0;s<a.length;s++)o=a[s],JXG$1.isString(o)?(c[s]=this.board.jc.snippet(o,!0,null,!0),this.addParentsFromJCFunctions([c[s]]),a.length===2&&(this[h[s]+"jc"]=a[s])):JXG$1.isFunction(o)?c[s]=o:JXG$1.isNumber(o)?c[s]=d(o):JXG$1.isObject(o)&&JXG$1.isFunction(o.Value)&&(c[s]=b(o)),c[s].origin=o;return a.length===1?this.updateConstraint=function(){var _=c[0]();return JXG$1.isArray(_)?this.coords.setCoordinates(Const.COORDS_BY_USER,_):this.coords=_,this}:a.length===2?(this.XEval=c[0],this.YEval=c[1],this.addParents([c[0].origin,c[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(Const.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=c[0],this.XEval=c[1],this.YEval=c[2],this.addParents([c[0].origin,c[1].origin,c[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(Const.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(a,s){s?this.relativeCoords=new Coords(Const.COORDS_BY_SCREEN,a.slice(0,2),this.board):this.relativeCoords=new Coords(Const.COORDS_BY_USER,a,this.board),this.element.addChild(this),s&&this.addParents(this.element),this.XEval=function(){var o,c,h,d;return this.evalVisProp("islabel")?(d=this.evalVisProp("offset"),o=parseFloat(d[0]),h=this.element.getLabelAnchor(),c=new Coords(Const.COORDS_BY_SCREEN,[o+this.relativeCoords.scrCoords[1]+h.scrCoords[1],0],this.board),c.usrCoords[1]):(h=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+h.usrCoords[1])},this.YEval=function(){var o,c,h,d;return this.evalVisProp("islabel")?(d=this.evalVisProp("offset"),o=-parseFloat(d[1]),h=this.element.getLabelAnchor(),c=new Coords(Const.COORDS_BY_SCREEN,[0,o+this.relativeCoords.scrCoords[2]+h.scrCoords[2]],this.board),c.usrCoords[2]):(h=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+h.usrCoords[2])},this.ZEval=JXG$1.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(Const.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(a){var s,o;if(this.transformations.length===0)return this;for(this.baseElement===null&&(this.baseElement=this),this.transformations[0].update(),this===this.baseElement?s=this.transformations[0].apply(this,"self"):s=this.transformations[0].apply(this.baseElement),o=1;o<this.transformations.length;o++)this.transformations[o].update(),s=Mat.matVecMult(this.transformations[o].matrix,s);return this.actualCoords.setCoordinates(Const.COORDS_BY_USER,s),this},addTransform:function(a,s){var o,c=JXG$1.isArray(s)?s:[s],h=c.length;for(this.transformations.length===0&&(this.baseElement=a),o=0;o<h;o++)this.transformations.push(c[o]);return this},startAnimation:function(a,s,o,c){var h=JXG$1.evaluate(a),d=JXG$1.evaluate(s),b=this;return o=JXG$1.evaluate(o)||250,c=JXG$1.evaluate(c),c=c!=="undefined"?c:-1,this.type===Const.OBJECT_TYPE_GLIDER&&!JXG$1.exists(this.intervalCode)&&c!==0&&(this.roundsCount=0,this.intervalCode=window.setInterval(function(){b._anim(h,d,c)},o),JXG$1.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return JXG$1.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(a,s,o){o=o||{};var c,h,d=[],b=[],_=this.board.attr.animationdelay,$=s/_,j,Xt,Lt,fr=function(Jr,Js){return function(){return a[Jr][Js]}};if(JXG$1.isArray(a)){for(j=a.length,c=0;c<j;c++)JXG$1.isPoint(a[c])?b[c]=a[c]:b[c]={elementClass:Const.OBJECT_CLASS_POINT,X:fr(c,0),Y:fr(c,1)};if(s=s||0,s===0)return this.setPosition(Const.COORDS_BY_USER,[b[b.length-1].X(),b[b.length-1].Y()]),this.board.update(this);if(!JXG$1.exists(o.interpolate)||o.interpolate)for(h=Numerics.Neville(b),c=0;c<$;c++)d[c]=[],d[c][0]=h[0](($-c)/$*h[3]()),d[c][1]=h[1](($-c)/$*h[3]());else{for(j=a.length-1,c=0;c<$;++c)Xt=Math.floor(c/$*j),Lt=c/$*j-Xt,d[c]=[],d[c][0]=(1-Lt)*b[Xt].X()+Lt*b[Xt+1].X(),d[c][1]=(1-Lt)*b[Xt].Y()+Lt*b[Xt+1].Y();d.push([b[j].X(),b[j].Y()]),d.reverse()}this.animationPath=d}else JXG$1.isFunction(a)&&(this.animationPath=a,this.animationStart=new Date().getTime());return this.animationCallback=o.callback,this.board.addAnimation(this),this},moveTo:function(a,s,o){o=o||{},a=new Coords(Const.COORDS_BY_USER,a,this.board);var c,h=this.board.attr.animationdelay,d=Math.ceil(s/h),b=[],_=this.coords.usrCoords[1],$=this.coords.usrCoords[2],j=a.usrCoords[1]-_,Xt=a.usrCoords[2]-$,Lt=function(fr){var Jr=fr/d;if(o.effect){if(o.effect==="<>")return Math.pow(Math.sin(Jr*Math.PI/2),2);if(o.effect==="<")return Jr*Jr*Jr;if(o.effect===">")return 1-Math.pow(1-Jr,3);if(o.effect==="=="||o.effect==="--")return fr/d;JXG$1.warn("Callback moveTo(): valid effects are '==', '--', '<>', '>', and '<', given is '"+o.effect+"'. Set it to '--'"),o.effect="--"}return fr/d};if(!JXG$1.exists(s)||s===0||Math.abs(a.usrCoords[0]-this.coords.usrCoords[0])>Mat.eps)return this.setPosition(Const.COORDS_BY_USER,a.usrCoords),this.board.update(this);if(!JXG$1.exists(o.callback)&&Math.abs(j)<Mat.eps&&Math.abs(Xt)<Mat.eps)return this;for(c=d;c>=0;c--)b[d-c]=[a.usrCoords[0],_+j*Lt(c),$+Xt*Lt(c)];return this.animationPath=b,this.animationCallback=o.callback,this.board.addAnimation(this),this},visit:function(a,s,o){a=new Coords(Const.COORDS_BY_USER,a,this.board);var c,h,d,b=this.board.attr.animationdelay,_=[],$=this.coords.usrCoords[1],j=this.coords.usrCoords[2],Xt=a.usrCoords[1]-$,Lt=a.usrCoords[2]-j,fr=function(Jr){var Js=Jr<d/2?2*Jr/d:2*(d-Jr)/d;if(o.effect){if(o.effect==="<>")return Math.pow(Math.sin(Js*Math.PI/2),2);if(o.effect==="<")return Js*Js*Js;if(o.effect===">")return 1-Math.pow(1-Js,3);if(o.effect==="=="||o.effect==="--")return Js;JXG$1.warn("Callback visit(): valid effects are '==', '--', '<>', '>', and '<', given is '"+o.effect+"'. Set it to '--'"),o.effect="--"}return Js};for(JXG$1.isNumber(o)?o={repeat:o}:(o=o||{},JXG$1.exists(o.repeat)||(o.repeat=1)),d=Math.ceil(s/(b*o.repeat)),h=0;h<o.repeat;h++)for(c=d;c>=0;c--)_[h*(d+1)+d-c]=[a.usrCoords[0],$+Xt*fr(c),j+Lt*fr(c)];return this.animationPath=_,this.animationCallback=o.callback,this.board.addAnimation(this),this},moveAlongES6:function(a,s,o){return new Promise((c,h)=>{JXG$1.exists(o)&&JXG$1.exists(o.callback)?o.callback=c:o={callback:c},this.moveAlong(a,s,o)})},moveToES6:function(a,s,o){return new Promise((c,h)=>{JXG$1.exists(o)&&JXG$1.exists(o.callback)?o.callback=c:o={callback:c},this.moveTo(a,s,o)})},visitES6:function(a,s,o){return new Promise((c,h)=>{JXG$1.exists(o)&&JXG$1.exists(o.callback)?o.callback=c:o={callback:c},this.visit(a,s,o)})},_anim:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt;return this.intervalCount+=1,this.intervalCount>s&&(this.intervalCount=0,this.roundsCount+=1,o>0&&this.roundsCount>=o)?(this.roundsCount=0,this.stopAnimation()):(this.slideObject.elementClass===Const.OBJECT_CLASS_LINE?(j=this.slideObject.point1.coords.scrCoords,Xt=this.slideObject.point2.coords.scrCoords,c=Math.round((Xt[1]-j[1])*this.intervalCount/s),h=Math.round((Xt[2]-j[2])*this.intervalCount/s),a>0?b=this.slideObject.point1:(b=this.slideObject.point2,c*=-1,h*=-1),this.coords.setCoordinates(Const.COORDS_BY_SCREEN,[b.coords.scrCoords[1]+c,b.coords.scrCoords[2]+h])):this.slideObject.elementClass===Const.OBJECT_CLASS_CURVE?(a>0?_=(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/s+this.slideObject.minX():_=-(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/s+this.slideObject.maxX(),this.coords.setCoordinates(Const.COORDS_BY_USER,[this.slideObject.X(_),this.slideObject.Y(_)]),Lt=Geometry.projectPointToCurve(this,this.slideObject,this.board),this.coords=Lt[0],this.position=Lt[1]):this.slideObject.elementClass===Const.OBJECT_CLASS_CIRCLE&&(d=2*Math.PI,a<0?d*=this.intervalCount/s:d*=(s-this.intervalCount)/s,$=this.slideObject.Radius(),this.coords.setCoordinates(Const.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+$*Math.cos(d),this.slideObject.center.coords.usrCoords[2]+$*Math.sin(d)])),this.board.update(this),this)},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var a=[this.Z(),this.X(),this.Y()];return this.parents.length!==0&&(a=this.parents),this.type===Const.OBJECT_TYPE_GLIDER&&(a=[this.X(),this.Y(),this.slideObject.id]),a}});JXG$1.CoordsElement.create=function(a,s,o,c,h,d){var b,_=!1,$;for($=0;$<o.length;$++)(JXG$1.isFunction(o[$])||JXG$1.isString(o[$]))&&(_=!0);if(_)b=new a(s,[0,0],c,h,d),b.addConstraint(o);else if(JXG$1.isNumber(o[0])&&JXG$1.isNumber(o[1]))b=new a(s,o,c,h,d),JXG$1.exists(c.slideobject)?b.makeGlider(c.slideobject):b.baseElement=b,b.isDraggable=!0;else if(JXG$1.isObject(o[0])&&JXG$1.isTransformationOrArray(o[1]))b=new a(s,[0,0],c,h,d),b.addTransform(o[0],o[1]),b.isDraggable=!1;else return!1;return b.handleSnapToGrid(),b.handleSnapToPoints(),b.handleAttractors(),b.addParents(o),b};const CoordsElement=JXG$1.CoordsElement;var priv$5={HTMLSliderInputEventHandler:function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()}};JXG$1.Text=function(a,s,o,c){var h;this.constructor(a,o,Const.OBJECT_TYPE_TEXT,Const.OBJECT_CLASS_TEXT),this.element=this.board.select(o.anchor),this.coordsConstructor(s,this.evalVisProp("islabel")),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),h=this.visProp.visible,this.visProp.visible=!0,this.setText(c),this.visProp.visible=h,JXG$1.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=JXG$1.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords",Size:"getSize",setAutoPosition:"setAutoPosition"})};JXG$1.Text.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Text,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.Text.prototype,{hasPoint:function(a,s){var o,c,h,d,b,_,$,j;return JXG$1.isObject(this.evalVisProp("precision"))?($=this.board._inputDevice,j=this.evalVisProp("precision."+$)):j=this.board.options.precision.hasPoint,this.transformations.length>0&&(o=Mat.matVecMult(Mat.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,a,s]),a=o[1],s=o[2]),b=this.getAnchorX(),b==="right"?o=this.coords.scrCoords[1]-this.size[0]:b==="middle"?o=this.coords.scrCoords[1]-.5*this.size[0]:o=this.coords.scrCoords[1],c=o+this.size[0],_=this.getAnchorY(),_==="top"?d=this.coords.scrCoords[2]+this.size[1]:_==="middle"?d=this.coords.scrCoords[2]+.5*this.size[1]:d=this.coords.scrCoords[2],h=d-this.size[1],this.evalVisProp("dragarea")==="all"?a>=o-j&&a<c+j&&s>=h-j&&s<=d+j:s>=h-j&&s<=d+j&&(a>=o-j&&a<=o+2*j||a>=c-2*j&&a<=c+j)},_createFctUpdateText:function(a){var s,o,c,h,d,b,_=this.evalVisProp("parse"),$=this.evalVisProp("usemathjax"),j=this.evalVisProp("usekatex"),Xt=!1;if(this.orgText=a,JXG$1.isFunction(a))this.updateText=function(){h=a().toString(),_&&!$&&!j?this.plaintext=this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(h,!1))):this.plaintext=h};else if(JXG$1.isNumber(a)&&this.evalVisProp("formatnumber")?this.evalVisProp("tofraction")?$?this.content="\\("+JXG$1.toFraction(a,!0)+"\\)":this.content=JXG$1.toFraction(a,j):(c=this.evalVisProp("digits"),this.useLocale()?this.content=this.formatNumberLocale(a,c):this.content=JXG$1.toFixed(a,c)):JXG$1.isString(a)&&_?(this.evalVisProp("useasciimathml")?this.content="'`"+a+"`'":$||j?(this.content=this.valueTagToJessieCode(a),JXG$1.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(a)),Xt=!0):this.content=a,Xt){if(JXG$1.isArray(this.content)){for(b=this,d=0;d<this.content.length;d++)if(this.content[d][0]!=='"'){this.content[d]=this.board.jc.snippet(this.content[d],!0,"",!1);for(o in this.content[d].deps)this.addParents(this.content[d].deps[o]),this.content[d].deps[o].addChild(this)}s=function(){var Lt,fr,Jr=b.evalVisProp("digits"),Js="";for(Lt=0;Lt<b.content.length;Lt++)JXG$1.isFunction(b.content[Lt])?(fr=b.content[Lt](),b.useLocale()?fr=b.formatNumberLocale(fr,Jr):fr=JXG$1.toFixed(fr,Jr)):(fr=b.content[Lt],fr[0]==='"'&&fr[fr.length-1]==='"'&&(fr=fr.slice(1,-1))),Js+=fr;return Js}}else{s=this.board.jc.snippet(this.content,!0,"",!1);for(o in s.deps)this.addParents(s.deps[o]),s.deps[o].addChild(this)}this.updateText=function(){this.plaintext=this.unescapeTicks(s())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(a){return this._createFctUpdateText(a),this.updateText(),this.fullUpdate(),(!this.board.infobox||this.id!==this.board.infobox.id)&&this.updateSize(),this},setTextJessieCode:function(a){var s;return this.visProp.castext=a,JXG$1.isFunction(a)?s=function(){return JXG$1.sanitizeHTML(a())}:JXG$1.isNumber(a)?s=a:s=JXG$1.sanitizeHTML(a),this._setText(s)},setText:function(a){return this._setText(a)},updateSize:function(){var a,s,o,c=this.evalVisProp("display");return!JXG$1.isBrowser||this.board.renderer.type==="no"?this:(o=this.rendNode,c==="html"||this.board.renderer.type==="vml"?JXG$1.exists(o.offsetWidth)?(s=this,window.setTimeout(function(){s.size=[o.offsetWidth,o.offsetHeight],s.needsUpdate=!0,s.updateRenderer()},0)):this.size=this.crudeSizeEstimate():c==="internal"&&(this.board.renderer.type==="svg"?(s=this,window.setTimeout(function(){try{a=o.getBBox(),s.size=[a.width,a.height],s.needsUpdate=!0,s.updateRenderer()}catch{}},0)):this.board.renderer.type==="canvas"&&(this.size=this.crudeSizeEstimate())),this)},crudeSizeEstimate:function(){var a=parseFloat(this.evalVisProp("fontsize"));return[a*this.plaintext.length*.45,a*.9]},utf8_decode:function(a){return a.replace(/&#x(\w+);/g,function(s,o){return String.fromCharCode(parseInt(o,16))})},replaceSub:function(a){if(!a.indexOf)return a;for(var s,o=a.indexOf("_{");o>=0;)a=a.slice(0,o)+a.slice(o).replace(/_\{/,"<sub>"),s=a.indexOf("}",o+4),s>=0&&(a=a.slice(0,s)+a.slice(s).replace(/\}/,"</sub>")),o=a.indexOf("_{");for(o=a.indexOf("_");o>=0;)a=a.slice(0,o)+a.slice(o).replace(/_(.?)/,"<sub>$1</sub>"),o=a.indexOf("_");return a},replaceSup:function(a){if(!a.indexOf)return a;for(var s,o=a.indexOf("^{");o>=0;)a=a.slice(0,o)+a.slice(o).replace(/\^\{/,"<sup>"),s=a.indexOf("}",o+4),s>=0&&(a=a.slice(0,s)+a.slice(s).replace(/\}/,"</sup>")),o=a.indexOf("^{");for(o=a.indexOf("^");o>=0;)a=a.slice(0,o)+a.slice(o).replace(/\^(.?)/,"<sup>$1</sup>"),o=a.indexOf("^");return a},getSize:function(){return this.size},setCoords:function(a,s){var o,c,h;return JXG$1.isArray(a)&&a.length>1&&(s=a[1],a=a[0]),this.evalVisProp("islabel")&&JXG$1.exists(this.element)?(o=this.element.getLabelAnchor(),c=(a-o.usrCoords[1])*this.board.unitX,h=-(s-o.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(Const.COORDS_BY_SCREEN,[c,h])):this.coords.setCoordinates(Const.COORDS_BY_USER,[a,s]),this.fullUpdate(),this},update:function(a){return this.needsUpdate?(this.updateCoords(a),this.updateText(),this.evalVisProp("display")==="internal"&&JXG$1.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return this.evalVisProp("autoposition")&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(a){var s=/([)0-9.])\s*([(a-zA-Z_])/g;return a.replace(s,"$1*$2")},generateTerm:function(a,s,o){var c,h,d,b,_='""';if(a=a||"",a=a.replace(/\r/g,""),a=a.replace(/\n/g,""),a=a.replace(/"/g,"'"),a=a.replace(/'/g,"\\'"),a=a.replace(/&amp;arc;/g,"&ang;"),a=a.replace(/<arc\s*\/>/g,"&ang;"),a=a.replace(/&lt;arc\s*\/&gt;/g,"&ang;"),a=a.replace(/&lt;sqrt\s*\/&gt;/g,"&radic;"),a=a.replace(/&lt;value&gt;/g,"<value>"),a=a.replace(/&lt;\/value&gt;/g,"</value>"),d=a.indexOf("<value>"),b=a.indexOf("</value>"),d>=0)for(;d>=0;)_+=' + "'+this.replaceSub(this.replaceSup(a.slice(0,d)))+'"',h=a.slice(d+7,b),h=h.replace(/\s+/g,""),s===!0&&(h=this.expandShortMath(h)),o?c=h:c=GeonextParser.geonext2JS(h,this.board),c=c.replace(/\\"/g,"'"),c=c.replace(/\\'/g,"'"),c.indexOf("toFixed")<0&&JXG$1.isNumber(JXG$1.bind(this.board.jc.snippet(c,!0,"",!1),this)())?_+="+("+c+").toFixed("+this.evalVisProp("digits")+")":_+="+("+c+")",a=a.slice(b+8),d=a.indexOf("<value>"),b=a.indexOf("</value>");return _+=' + "'+this.replaceSub(this.replaceSup(a))+'"',_=this.convertGeonextAndSketchometry2CSS(_),_=_.replace(/&amp;/g,"&"),_=_.replace(/"/g,"'"),_},valueTagToJessieCode:function(a){var s,o,c,h,d=[],b='"';if(a=a||"",a=a.replace(/\r/g,""),a=a.replace(/\n/g,""),a=a.replace(/&lt;value&gt;/g,"<value>"),a=a.replace(/&lt;\/value&gt;/g,"</value>"),c=a.indexOf("<value>"),h=a.indexOf("</value>"),c>=0)for(;c>=0;)d.push(b+this.escapeTicks(a.slice(0,c))+b),o=a.slice(c+7,h),o=o.replace(/\s+/g,""),o=this.expandShortMath(o),s=o,s=s.replace(/\\"/g,"'").replace(/\\'/g,"'"),d.push("("+s+")"),a=a.slice(h+8),c=a.indexOf("<value>"),h=a.indexOf("</value>");for(d.push(b+this.escapeTicks(a)+b),c=0;c<d.length;c++)d[c]=d[c].replace(/&amp;/g,"&");return d},poorMansTeX:function(a){var s,o;if(JXG$1.isArray(a)){for(o=[],s=0;s<a.length;s++)o.push(this.poorMansTeX(a[s]));return o}return a=a.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(a)),!0)},escapeTicks:function(a){return a.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(a){return a.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(a){return JXG$1.isString(a)&&(a=a.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>"),a=a.replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>"),a=a.replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>"),a=a.replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),a},convertSketchometry2CSS:function(a,s){var o='<span class="sketcho sketcho-inherit sketcho-',c='"></span>';return JXG$1.isString(a)&&(s&&(o=this.escapeTicks(o),c=this.escapeTicks(c)),a=a.replace(/(<|&lt;)sketchofont(>|&gt;)/g,o),a=a.replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,c)),a},convertGeonextAndSketchometry2CSS:function(a,s){return a=this.convertGeonext2CSS(a),a=this.convertSketchometry2CSS(a,s),a},notifyParents:function(a){var s,o=null;a=a.replace(/&lt;value&gt;/g,"<value>"),a=a.replace(/&lt;\/value&gt;/g,"</value>");do s=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/,o=s.exec(a),o!==null&&(GeonextParser.findDependencies(this,o[1],this.board),a=a.slice(o.index),a=a.replace(s,""));while(o!==null);return this},getParents:function(){var a;return this.relativeCoords!==void 0?a=[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:a=[this.Z(),this.X(),this.Y(),this.orgText],this.parents.length!==0&&(a=this.parents),a},bounds:function(){var a=this.coords.usrCoords;return this.evalVisProp("islabel")||this.board.unitY===0||this.board.unitX===0?[0,0,0,0]:[a[1],a[2]+this.size[1]/this.board.unitY,a[1]+this.size[0]/this.board.unitX,a[2]]},getAnchorX:function(){var a=this.evalVisProp("anchorx");if(a==="auto")switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";case"lft":case"llft":case"ulft":default:return"right"}return a},getAnchorY:function(){var a=this.evalVisProp("anchory");if(a==="auto")switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";case"rt":case"lft":default:return"middle"}return a},getNumberOfConflicts:function(a,s,o,c,h){h=h||[];var d=0,b,_,$,j,Xt=this.board.options.precision.hasPoint,Lt,fr,Jr,Js;for(this.board.options.precision.hasPoint=(o+c)*.3,b=0;b<this.board.objectsList.length;b++)_=this.board.objectsList[b],_.visPropCalc.visible&&_!==this&&h.indexOf(_.id)===-1&&_.evalVisProp("ignoreforlabelautoposition")!==!0&&(j=_.visProp.hasinnerpoints,_.visProp.hasinnerpoints=!1,_.visProp.islabel||_.elementClass===Const.OBJECT_CLASS_POINT?($=_.coords.scrCoords,Lt=$[1],fr=$[2],Jr=_.size[0],Js=_.size[1],_.visProp.islabel?(_.visProp.anchory==="top"?fr=fr+Js/2:fr=fr-Js/2,_.visProp.anchorx==="left"?Lt=Lt+Jr/2:Lt=Lt-Jr/2):(Jr=0,Js=0),Math.abs(Lt-a)<(o+Jr)/2&&Math.abs(fr-s)<(c+Js)/2&&d++):_.hasPoint(a,s)&&d++,_.visProp.hasinnerpoints=j);return this.board.options.precision.hasPoint=Xt,d},calculateScore:function(a,s){var o,c,h,d,b,_,$=0,j=[0,0],Xt=this.getSize()[0],Lt=this.getSize()[1],fr,Jr=this.evalVisProp("offset"),Js=this.board.getBoundingBox();if(this.evalVisProp("islabel")&&JXG$1.exists(this.element))fr=this.element.getLabelAnchor().scrCoords;else return 0;return h=Math.cos(s),d=Math.sin(s),o=fr[1]+a*h,c=fr[2]-a*d,h<0?(j[0]=o-Xt,o-=Xt/2):(j[0]=o+Xt,o+=Xt/2),d<0?(j[1]=c+Lt,c+=Lt/2):(j[1]=c-Lt,c-=Lt/2),(j[0]<0||j[0]>(Js[2]-Js[0])*this.board.unitX||j[1]<0||j[1]>(Js[1]-Js[3])*this.board.unitY)&&($-=1),$-=this.getNumberOfConflicts(o,c,Xt,Lt,JXG$1.evaluate(this.visProp.autopositionwhitelist)),$-=a/this.evalVisProp("autopositionmindistance")/10-.1,b=Math.atan2(Jr[1],Jr[0]),b<0&&(b+=2*Math.PI),h>0&&Math.cos(b)>0&&Math.abs(s-b)>Math.PI?_=Math.abs(s-b-2*Math.PI):_=Math.abs(s-b),$-=_/10,$},setAutoPosition:function(){var a,s,o,c,h=-1/0,d,b,_=this.evalVisProp("autopositionmindistance"),$=this.evalVisProp("autopositionmaxdistance"),j,Xt,Lt,fr=this.evalVisProp("offset"),Jr,Js,qs=60,zo=4;if(this===this.board.infobox||!this.element||!this.visPropCalc.visible||!this.evalVisProp("islabel"))return this;if(Jr=Math.sqrt(fr[0]*fr[0]+fr[1]*fr[1]),Js=Math.atan2(fr[1],fr[0]),this.calculateScore(Jr,Js)===0)return this;for(a=_,o=($-_)/(zo-1);$-a>-.01;){for(c=0;c<qs;c++)if(s=c/qs*2*Math.PI,j=this.calculateScore(a,s),j>h&&(b=s,d=a,h=j),h===0){a=$;break}a+=o}return Xt=Math.cos(b),Lt=Math.sin(b),Xt<0?this.visProp.anchorx="right":this.visProp.anchorx="left",Lt<0?this.visProp.anchory="top":this.visProp.anchory="bottom",this.visProp.offset=[d*Xt,d*Lt],this}});JXG$1.createText=function(a,s,o){var c,h=JXG$1.copyAttributes(o,a.options,"text"),d=s.slice(0,-1),b=s[s.length-1];if(h.anchor=h.parent||h.anchor,c=CoordsElement.create(JXG$1.Text,a,d,h,b),!c)throw new Error("JSXGraph: Can't create text with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return h.rotate!==0&&c.addRotation(h.rotate),c};JXG$1.registerElement("text",JXG$1.createText);JXG$1.createHTMLSlider=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"htmlslider");if(s.length!==2||s[0].length!==2||s[1].length!==3)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parents are: [[x,y], [min, start, max]]`);d.anchor=d.parent||d.anchor,d.fixed=d.fixed||!0,h=[s[0][0],s[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],c=JXG$1.createText(a,h,d),c.type=JXG$1.OBJECT_TYPE_HTMLSLIDER,c.rendNodeForm=c.rendNode.childNodes[0],c.rendNodeRange=c.rendNodeForm.childNodes[0],c.rendNodeRange.min=s[1][0],c.rendNodeRange.max=s[1][2],c.rendNodeRange.step=d.step,c.rendNodeRange.value=s[1][1],c.rendNodeLabel=c.rendNodeForm.childNodes[1],c.rendNodeLabel.id=c.rendNode.id+"_label",d.withlabel&&(c.rendNodeLabel.innerText=c.name+"="),c.rendNodeOut=c.rendNodeForm.childNodes[2],c.rendNodeOut.value=s[1][1];try{c.rendNodeForm.id=c.rendNode.id+"_form",c.rendNodeRange.id=c.rendNode.id+"_range",c.rendNodeOut.id=c.rendNode.id+"_out"}catch(b){JXG$1.debug(b)}return c.rendNodeRange.style.width=d.widthrange+"px",c.rendNodeRange.style.verticalAlign="middle",c.rendNodeOut.style.width=d.widthout+"px",c._val=s[1][1],JXG$1.supportsVML()?JXG$1.addEvent(c.rendNodeForm,"change",priv$5.HTMLSliderInputEventHandler,c):JXG$1.addEvent(c.rendNodeForm,"input",priv$5.HTMLSliderInputEventHandler,c),c.Value=function(){return this._val},c};JXG$1.registerElement("htmlslider",JXG$1.createHTMLSlider);const Text=JXG$1.Text;Object.create||(Object.create=function(a,s){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object prototype may only be an Object: "+a);if(a===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof s<"u")throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function o(){}return o.prototype=a,new o});var priv$4={modules:{math:Mat,"math/geometry":Geometry,"math/statistics":Stat,"math/numerics":Mat.Numerics}};JXG$1.JessieCode=function(a,s){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.forceValueCall=!1,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,JXG$1.CA&&(this.CA=new JXG$1.CA(this.node,this.createNode,this)),JXG$1.CAS&&(this.CAS=new JXG$1.CAS(this.node,this.createNode,this)),this.code="",typeof a=="string"&&this.parse(a,s)};JXG$1.extend(JXG$1.JessieCode.prototype,{node:function(a,s,o){return{type:a,value:s,children:o}},createNode:function(a,s,o){var c=this.node(a,s,[]),h;for(h=2;h<arguments.length;h++)c.children.push(arguments[h]);return c.type==="node_const"&&JXG$1.isNumber(c.value)&&(c.isMath=!0),c.line=this.parCurLine,c.col=this.parCurColumn,c},pushScope:function(a){var s={args:a,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=s,s.id=this.scopes.push(s)-1,s},popScope:function(){var a=this.scope.previous;return this.scope=a!==null?a:this.scope,this.scope},getElementById:function(a){return this.board.objects[a]},log:function(){this.$log.push(arguments),typeof console=="object"&&console.log&&console.log.apply(console,arguments)},creator:function(){var a={},s;return s=function(o){var c;return typeof a[this.board.id+o]=="function"?c=a[this.board.id+o]:(c=function(h){return function(d,b){var _;return JXG$1.exists(b)?_=b:_={},_.name===void 0&&_.id===void 0&&(_.name=h.lhs[h.scope.id]!==0?h.lhs[h.scope.id]:""),h.board.create(o,d,_)}}(this),c.creator=!0,a[this.board.id+o]=c),c},s.clearCache=function(){a={}},s}(),letvar:function(a,s){this.builtIn[a]&&this._warn('"'+a+'" is a predefined value.'),this.scope.locals[a]=s},isLocalVariable:function(a){for(var s=this.scope;s!==null;){if(JXG$1.exists(s.locals[a]))return s;s=s.previous}return null},isParameter:function(a){for(var s=this.scope;s!==null;){if(JXG$1.indexOf(s.args,a)>-1)return s;s=s.previous}return null},isCreator:function(a){return!!JXG$1.elements[a]},isMathMethod:function(a){return a!=="E"&&!!Math[a]},isBuiltIn:function(a){return!!this.builtIn[a]},getvar:function(a,s,o){var c;if(s=JXG$1.def(s,!1),c=this.isLocalVariable(a),c!==null)return c.locals[a];if(a==="$board"||a==="EULER"||a==="PI")return this.builtIn[a];if(o){if(this.isBuiltIn(a))return this.builtIn[a];if(this.isMathMethod(a))return Math[a];if(this.isCreator(a))return this.creator(a)}if(!s&&(c=this.board.select(a),c!==a))return c},resolve:function(a){for(var s=this.scope;s!==null;){if(JXG$1.exists(s.locals[a]))return s.locals[a];s=s.previous}},getvarJS:function(a,s,o){var c,h="",d;return s=JXG$1.def(s,!1),o=JXG$1.def(o,!1),c=this.isParameter(a),c!==null?a:(c=this.isLocalVariable(a),c!==null&&!o?"$jc$.resolve('"+a+"')":this.isCreator(a)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(o?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+a+"'].concat([a, props])); })":(o&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(a)?(h=this.builtIn[a].src||this.builtIn[a],JXG$1.isNumber(h)||h.match(/board\.select/)?h:(a=h.split(".").pop(),JXG$1.exists(this.board.mathLib)&&(d=new RegExp("^Math."+a),d.exec(h)!==null)?h.replace(d,"$jc$.board.mathLib."+a):JXG$1.exists(this.board.mathLibJXG)?(d=new RegExp("^JXG.Math."),d.exec(h)!==null?h.replace(d,"$jc$.board.mathLibJXG."):h):h)):this.isMathMethod(a)?"$jc$.board.mathLib."+a:s?"":(JXG$1.isId(this.board,a)?(h="$jc$.board.objects['"+a+"']",this.board.objects[a].elType==="slider"&&(h+=".Value()")):JXG$1.isName(this.board,a)?(h="$jc$.board.elementsByName['"+a+"']",this.board.elementsByName[a].elType==="slider"&&(h+=".Value()")):JXG$1.isGroup(this.board,a)&&(h="$jc$.board.groups['"+a+"']"),h)))},makeMap:function(a){return a.isMap=!0,a},functionCodeJS:function(a){var s=a.children[0].join(", "),o="",c="";return a.value==="op_map"&&(o="{ return  ",c=" }"),"function ("+s+`) {
var $oldscope$ = $jc$.scope;
$jc$.scope = $jc$.scopes[`+this.scope.id+`];
var r = (function () `+o+this.compile(a.children[1],!0)+c+`)();
$jc$.scope = $oldscope$;
return r;
}`},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list);if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(a){return jc._warn(`error compiling function

`+str+`

`+a.toString()),function(){}}}(this),this.popScope()}else fun=function(a,s,o){return function(){var c,h;for(h=s.scope,s.scope=s.scopes[o],c=0;c<a.length;c++)s.scope.locals[a[c]]=arguments[c];return c=s.execute(node.children[1]),s.scope=h,c}}(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=function(a){return function(){return a.compile(a.replaceIDs(JXG$1.deepCopy(node)))}}(this),fun.deps={},this.collectDependencies(node.children[1],node.children[0],fun.deps),fun},mergeAttributes:function(a){var s,o={};for(s=0;s<arguments.length;s++)o=JXG$1.deepCopy(o,arguments[s],!0);return o},setProp:function(a,s,o){var c={},h,d;a.elementClass===Const.OBJECT_CLASS_POINT&&(s==="X"||s==="Y")?(s=s.toLowerCase(),a.isDraggable&&typeof o=="number"?(h=s==="x"?o:a.X(),d=s==="y"?o:a.Y(),a.setPosition(Const.COORDS_BY_USER,[h,d])):a.isDraggable&&(typeof o=="function"||typeof o=="string")?(h=s==="x"?o:a.coords.usrCoords[1],d=s==="y"?o:a.coords.usrCoords[2],a.addConstraint([h,d])):a.isDraggable||(h=s==="x"?o:a.XEval.origin,d=s==="y"?o:a.YEval.origin,a.addConstraint([h,d])),this.board.update()):a.elementClass===Const.OBJECT_CLASS_TEXT&&(s==="X"||s==="Y")?(typeof o=="number"?a[s]=function(){return o}:typeof o=="function"?(a.isDraggable=!1,a[s]=o):typeof o=="string"&&(a.isDraggable=!1,a[s]=JXG$1.createFunction(o,this.board),a[s+"jc"]=o),a[s].origin=o,this.board.update()):a.type&&a.elementClass&&a.visProp?JXG$1.exists(a[a.methodMap[s]])&&typeof a[a.methodMap[s]]!="function"?a[a.methodMap[s]]=o:(c[s]=o,a.setAttribute(c)):a[s]=o},_genericParse:function(a,s,o,c){var h,d,b,_,$=a.replace(/\r\n/g,`
`).split(`
`),j={},Xt=[];c||(this.code+=a+`
`),Text&&(d=Text.prototype.setText,Text.prototype.setText=Text.prototype.setTextJessieCode);try{for(JXG$1.exists(o)||(o=!1),h=0;h<$.length;h++)o&&($[h]=JXG$1.GeonextParser.geonext2JS($[h],this.board)),Xt.push($[h]);switch(a=Xt.join(`
`),b=parser$1.parse(a),this.CA&&(b=this.CA.expandDerivatives(b,null,b),b=this.CA.removeTrivialNodes(b)),this.CAS&&(b=this.CAS.expandDerivatives(b,null,b)),s){case"parse":_=this.execute(b);break;case"manipulate":_=this.compile(b);break;case"simplify":JXG$1.exists(this.CAS)?(j.method=j.method||"strong",j.form=j.form||"fractions",j.steps=j.steps||[],j.iterations=j.iterations||1e3,b=this.CAS.simplify(b,j),_=this.CAS.compile(b)):_=this.compile(b);break;case"getAst":_=b;break;default:_=!1}}catch(Lt){throw Lt}finally{Text&&(Text.prototype.setText=d)}return _},parse:function(a,s,o){return this._genericParse(a,"parse",s,o)},manipulate:function(a,s,o){return this._genericParse(a,"manipulate",s,o)},simplify:function(a){return this._genericParse(a,"simplify")},getAST:function(a,s,o){return this._genericParse(a,"getAst",s,o)},snippet:function(a,s,o,c,h){var d;return s=JXG$1.def(s,!0),o=JXG$1.def(o,""),c=JXG$1.def(c,!1),this.forceValueCall=JXG$1.def(h,!0),d=(s?" function ("+o+") { return ":"")+a+(s?"; }":"")+";",this.parse(d,c,!0)},replaceIDs:function(a){var s,o;if(a.replaced&&(o=this.board.objects[a.children[1][0].value],JXG$1.exists(o)&&o.name!==""&&(a.type="node_var",a.value=o.name,a.children.length=0,delete a.replaced)),JXG$1.isArray(a))for(s=0;s<a.length;s++)a[s]=this.replaceIDs(a[s]);if(a.children)for(s=a.children.length;s>0;s--)JXG$1.exists(a.children[s-1])&&(a.children[s-1]=this.replaceIDs(a.children[s-1]));return a},replaceNames:function(a,s){var o,c,h=!1;if(s!==void 0&&(h=s),c=a.value,a.type==="node_op"&&c==="op_lhs"&&a.children.length===1?this.isLHS=!0:a.type==="node_var"&&(this.isLHS?this.letvar(c,!0):!JXG$1.exists(this.getvar(c,!0))&&JXG$1.exists(this.board.elementsByName[c])&&(h&&this.board.elementsByName[c].elType!=="slider"&&(h=!1),a=this.createReplacementNode(a,h))),JXG$1.isArray(a))for(o=0;o<a.length;o++)a[o]=this.replaceNames(a[o],h);if(a.children)for(this.forceValueCall&&(a.value==="op_execfun"&&a.children[0].value!=="V"&&a.children[0].value!=="$"&&(JXG$1.exists(Math[a.children[0].value])||JXG$1.exists(Mat[a.children[0].value]))&&a.children[1][0].type==="node_var"||a.value==="op_return"&&a.children.length===1&&a.children[0].type==="node_var")&&(h=!0),o=a.children.length;o>0;o--)JXG$1.exists(a.children[o-1])&&(a.children[o-1]=this.replaceNames(a.children[o-1],h));return a.type==="node_op"&&a.value==="op_lhs"&&a.children.length===1&&(this.isLHS=!1),a},createReplacementNode:function(a,s){var o=a.value,c=this.board.elementsByName[o];return a=this.createNode("node_op","op_execfun",this.createNode("node_var",s===!0?"$value":"$"),[this.createNode("node_str",c.id)]),a.replaced=!0,a},collectDependencies:function(a,s,o){var c,h,d,b;if(JXG$1.isArray(a)){for(b=a.length,c=0;c<b;c++)this.collectDependencies(a[c],s,o);return}if(h=a.value,a.type==="node_var"&&s.indexOf(h)<0&&(d=this.getvar(h),d&&d.visProp&&d.elType&&d.elementClass&&d.id&&(o[d.id]=d)),a.type==="node_op"&&a.value==="op_execfun"&&a.children.length>1&&(a.children[0].value==="$"||a.children[0].value==="$value")&&a.children[1].length>0&&(d=a.children[1][0].value,o[d]=this.board.objects[d]),a.children)for(c=a.children.length;c>0;c--)JXG$1.exists(a.children[c-1])&&this.collectDependencies(a.children[c-1],s,o)},resolveProperty:function(a,s,o){return o=JXG$1.def(o,!1),a&&a.methodMap&&(JXG$1.exists(a.subs)&&JXG$1.exists(a.subs[s])?a=a.subs:JXG$1.exists(a.methodMap[s])?s=a.methodMap[s]:(a=a.visProp,s=s.toLowerCase())),JXG$1.isFunction(a)&&this._error("Accessing function properties is not allowed."),JXG$1.exists(a)||this._error(a+" is not an object"),JXG$1.exists(a[s])||this._error("unknown property "+s),o&&typeof a[s]=="function"?function(){return a[s].apply(a,arguments)}:a[s]},resolveType:function(a,s){var o,c,h="any";if(JXG$1.isArray(s)){for(o=0;o<s.length;o++)if(c=this.resolveType(a,s[o]),c!=="any")return h=c,h}if(s.type==="node_op"&&s.value==="op_execfun"&&s.children[0].type==="node_var"&&s.children[0].value===a)return"function";if(s.type==="node_op"){for(o=0;o<s.children.length;o++)if(s.children[0].type==="node_var"&&s.children[0].value===a&&(s.value==="op_add"||s.value==="op_sub"||s.value==="op_mul"||s.value==="op_div"||s.value==="op_mod"||s.value==="op_exp"||s.value==="op_neg"))return"any";for(o=0;o<s.children.length;o++)if(c=this.resolveType(a,s.children[o]),c!=="any")return h=c,h}return"any"},getLHS:function(a){var s;if(a.type==="node_var")s={o:this.scope.locals,what:a.value};else if(a.type==="node_op"&&a.value==="op_property")s={o:this.execute(a.children[0]),what:a.children[1]};else if(a.type==="node_op"&&a.value==="op_extvalue")s={o:this.execute(a.children[0]),what:this.execute(a.children[1])};else throw new Error("Syntax error: Invalid left-hand side of assignment.");return s},getLHSCompiler:function(a,s){var o;if(a.type==="node_var")o=a.value;else if(a.type==="node_op"&&a.value==="op_property")o=[this.compile(a.children[0],s),"'"+a.children[1]+"'"];else if(a.type==="node_op"&&a.value==="op_extvalue")o=[this.compile(a.children[0],s),a.children[1].type==="node_const"?a.children[1].value:this.compile(a.children[1],s)];else throw new Error("Syntax error: Invalid left-hand side of assignment.");return o},execute:function(a){var s,o,c,h,d,b,_,$,j=[],Xt,Lt,fr;if(s=0,!a)return s;switch(this.line=a.line,this.col=a.col,a.type){case"node_op":switch(a.value){case"op_none":a.children[0]&&this.execute(a.children[0]),a.children[1]&&(s=this.execute(a.children[1]));break;case"op_assign":o=this.getLHS(a.children[0]),this.lhs[this.scope.id]=o.what,o.o.type&&o.o.elementClass&&o.o.methodMap&&o.what==="label"&&this._error("Left-hand side of assignment is read-only."),s=this.execute(a.children[1]),o.o!==this.scope.locals||JXG$1.isArray(o.o)&&typeof o.what=="number"?this.setProp(o.o,o.what,s):this.letvar(o.what,s),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(a.children[0])&&(s=this.execute(a.children[1]));break;case"op_conditional":case"op_if_else":this.execute(a.children[0])?s=this.execute(a.children[1]):s=this.execute(a.children[2]);break;case"op_while":for(;this.execute(a.children[0]);)this.execute(a.children[1]);break;case"op_do":do this.execute(a.children[0]);while(this.execute(a.children[1]));break;case"op_for":for(this.execute(a.children[0]);this.execute(a.children[1]);this.execute(a.children[2]))this.execute(a.children[3]);break;case"op_proplst":a.children[0]&&this.execute(a.children[0]),a.children[1]&&this.execute(a.children[1]);break;case"op_emptyobject":s={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(a.children[0]),s=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][a.children[0]]=this.execute(a.children[1]);break;case"op_array":for(s=[],d=a.children[0].length,c=0;c<d;c++)s.push(this.execute(a.children[0][c]));break;case"op_extvalue":s=this.execute(a.children[0]),c=this.execute(a.children[1]),typeof c=="number"&&Math.abs(Math.round(c)-c)<1e-12?s=s[c]:s=b;break;case"op_return":if(this.scope===0)this._error("Unexpected return.");else return this.execute(a.children[0]);break;case"op_map":!a.children[1].isMath&&a.children[1].type!=="node_var"&&this._error("execute: In a map only function calls and mathematical expressions are allowed."),Xt=this.defineFunction(a),Xt.isMap=!0,s=Xt;break;case"op_function":Xt=this.defineFunction(a),Xt.isMap=!1,s=Xt;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,_=a.children[1],JXG$1.exists(a.children[2]))if(a.children[3])for($=a.children[2],Lt={},c=0;c<$.length;c++)Lt=JXG$1.deepCopy(Lt,this.execute($[c]),!0);else Lt=this.execute(a.children[2]);for(a.children[0]._isFunctionName=!0,Xt=this.execute(a.children[0]),delete a.children[0]._isFunctionName,JXG$1.exists(Xt)&&JXG$1.exists(Xt.sc)?fr=Xt.sc:fr=this,!Xt.creator&&JXG$1.exists(a.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),c=0;c<_.length;c++)JXG$1.exists(Xt.scope)&&JXG$1.exists(Xt.scope.argtypes)&&Xt.scope.argtypes[c]==="function"?(_[c]._isFunctionName=!0,j[c]=this.execute(_[c]),delete _[c]._isFunctionName):j[c]=this.execute(_[c]),this.dpstack[this.pscope].push({line:a.children[1][c].line,col:a.children[1][c].ecol});if(typeof Xt=="function"&&!Xt.creator)s=Xt.apply(fr,j);else if(typeof Xt=="function"&&Xt.creator){h=this.line;try{for(s=Xt(j,Lt),s.jcLineStart=h,s.jcLineEnd=a.eline,c=h;c<=a.line;c++)this.lineToElement[c]=s;s.debugParents=this.dpstack[this.pscope]}catch(Jr){this._error(Jr.toString())}}else this._error("Function '"+Xt+"' is undefined.");this.dpstack.pop(),this.pscope--;break;case"op_property":h=this.execute(a.children[0]),o=a.children[1],s=this.resolveProperty(h,o,!1),JXG$1.exists(s)&&["number","string","boolean"].indexOf(typeof s)<0&&(s.sc=h);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(a.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),o=this.getvar(a.children[0]),s=this.del(o);break;case"op_eq":s=this.execute(a.children[0])==this.execute(a.children[1]);break;case"op_neq":s=this.execute(a.children[0])!=this.execute(a.children[1]);break;case"op_approx":s=Math.abs(this.execute(a.children[0])-this.execute(a.children[1]))<Mat.eps;break;case"op_gt":s=this.execute(a.children[0])>this.execute(a.children[1]);break;case"op_lt":s=this.execute(a.children[0])<this.execute(a.children[1]);break;case"op_geq":s=this.execute(a.children[0])>=this.execute(a.children[1]);break;case"op_leq":s=this.execute(a.children[0])<=this.execute(a.children[1]);break;case"op_or":s=this.execute(a.children[0])||this.execute(a.children[1]);break;case"op_and":s=this.execute(a.children[0])&&this.execute(a.children[1]);break;case"op_not":s=!this.execute(a.children[0]);break;case"op_add":s=this.add(this.execute(a.children[0]),this.execute(a.children[1]));break;case"op_sub":s=this.sub(this.execute(a.children[0]),this.execute(a.children[1]));break;case"op_div":s=this.div(this.execute(a.children[0]),this.execute(a.children[1]));break;case"op_mod":s=this.mod(this.execute(a.children[0]),this.execute(a.children[1]),!0);break;case"op_mul":s=this.mul(this.execute(a.children[0]),this.execute(a.children[1]));break;case"op_exp":s=this.pow(this.execute(a.children[0]),this.execute(a.children[1]));break;case"op_neg":s=this.neg(this.execute(a.children[0]));break}break;case"node_var":s=this.getvar(a.value,!1,a._isFunctionName);break;case"node_const":a.value===null?s=null:s=Number(a.value);break;case"node_const_bool":s=a.value;break;case"node_str":s=a.value.replace(/\\(.)/g,"$1");break}return s},compile:function(a,s){var o,c,h,d="";if(JXG$1.exists(s)||(s=!1),!a)return d;switch(a.type){case"node_op":switch(a.value){case"op_none":a.children[0]&&(d=this.compile(a.children[0],s)),a.children[1]&&(d+=this.compile(a.children[1],s));break;case"op_block":d=`{
`+this.compile(a.children[0],s)+` }
`;break;case"op_assign":s?(o=this.getLHSCompiler(a.children[0],s),JXG$1.isArray(o)?d="$jc$.setProp("+o[0]+", "+o[1]+", "+this.compile(a.children[1],s)+`);
`:(this.isLocalVariable(o)!==this.scope&&(this.scope.locals[o]=!0),d="$jc$.scopes["+this.scope.id+"].locals['"+o+"'] = "+this.compile(a.children[1],s)+`;
`)):(o=this.compile(a.children[0]),d=o+" = "+this.compile(a.children[1],s)+`;
`);break;case"op_if":d=" if ("+this.compile(a.children[0],s)+") "+this.compile(a.children[1],s);break;case"op_if_else":d=" if ("+this.compile(a.children[0],s)+")"+this.compile(a.children[1],s),d+=" else "+this.compile(a.children[2],s);break;case"op_conditional":d="(("+this.compile(a.children[0],s)+")?("+this.compile(a.children[1],s),d+="):("+this.compile(a.children[2],s)+"))";break;case"op_while":d=" while ("+this.compile(a.children[0],s)+`) {
`+this.compile(a.children[1],s)+`}
`;break;case"op_do":d=` do {
`+this.compile(a.children[0],s)+"} while ("+this.compile(a.children[1],s)+`);
`;break;case"op_for":d=" for ("+this.compile(a.children[0],s)+this.compile(a.children[1],s)+"; "+this.compile(a.children[2],s).slice(0,-2)+`) {
`+this.compile(a.children[3],s)+`
}
`;break;case"op_proplst":a.children[0]&&(d=this.compile(a.children[0],s)+", "),d+=this.compile(a.children[1],s);break;case"op_prop":d=a.children[0]+": "+this.compile(a.children[1],s);break;case"op_emptyobject":d=s?"{}":"<< >>";break;case"op_proplst_val":d=this.compile(a.children[0],s);break;case"op_array":for(h=[],c=0;c<a.children[0].length;c++)h.push(this.compile(a.children[0][c],s));d="["+h.join(", ")+"]";break;case"op_extvalue":d=this.compile(a.children[0],s)+"["+this.compile(a.children[1],s)+"]";break;case"op_return":d=" return "+this.compile(a.children[0],s)+`;
`;break;case"op_map":!a.children[1].isMath&&a.children[1].type!=="node_var"&&this._error("compile: In a map only function calls and mathematical expressions are allowed."),h=a.children[0],s?d=" $jc$.makeMap(function ("+h.join(", ")+") { return "+this.compile(a.children[1],s)+"; })":d="map ("+h.join(", ")+") -> "+this.compile(a.children[1],s);break;case"op_function":h=a.children[0],this.pushScope(h),s?d=this.functionCodeJS(a):d=" function ("+h.join(", ")+") "+this.compile(a.children[1],s),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),d="-1";break;case"op_execfun":if(a.children[2]){for(h=[],c=0;c<a.children[2].length;c++)h.push(this.compile(a.children[2][c],s));s?o="$jc$.mergeAttributes("+h.join(", ")+")":o=h.join(", ")}for(a.children[0].withProps=!!a.children[2],h=[],c=0;c<a.children[1].length;c++)h.push(this.compile(a.children[1][c],s));d=this.compile(a.children[0],s)+"("+h.join(", ")+(a.children[2]&&s?", "+o:"")+")"+(a.children[2]&&!s?" "+o:""),s&&(d+=`
`),s&&a.children[0].value==="$"&&(d="$jc$.board.objects["+this.compile(a.children[1][0],s)+"]");break;case"op_property":s&&a.children[1]!=="X"&&a.children[1]!=="Y"?d="$jc$.resolveProperty("+this.compile(a.children[0],s)+", '"+a.children[1]+"', true)":d=this.compile(a.children[0],s)+"."+a.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),s?d="$jc$.use('":d="use('",d+=a.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),s?d="$jc$.del(":d="remove(",d+=this.compile(a.children[0],s)+")";break;case"op_eq":d="("+this.compile(a.children[0],s)+" === "+this.compile(a.children[1],s)+")";break;case"op_neq":d="("+this.compile(a.children[0],s)+" !== "+this.compile(a.children[1],s)+")";break;case"op_approx":d="("+this.compile(a.children[0],s)+" ~= "+this.compile(a.children[1],s)+")";break;case"op_gt":s?d="$jc$.gt("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" > "+this.compile(a.children[1],s)+")";break;case"op_lt":s?d="$jc$.lt("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" < "+this.compile(a.children[1],s)+")";break;case"op_geq":s?d="$jc$.geq("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" >= "+this.compile(a.children[1],s)+")";break;case"op_leq":s?d="$jc$.leq("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" <= "+this.compile(a.children[1],s)+")";break;case"op_or":d="("+this.compile(a.children[0],s)+" || "+this.compile(a.children[1],s)+")";break;case"op_and":d="("+this.compile(a.children[0],s)+" && "+this.compile(a.children[1],s)+")";break;case"op_not":d="!("+this.compile(a.children[0],s)+")";break;case"op_add":s?d="$jc$.add("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" + "+this.compile(a.children[1],s)+")";break;case"op_sub":s?d="$jc$.sub("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" - "+this.compile(a.children[1],s)+")";break;case"op_div":s?d="$jc$.div("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" / "+this.compile(a.children[1],s)+")";break;case"op_mod":s?d="$jc$.mod("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+", true)":d="("+this.compile(a.children[0],s)+" % "+this.compile(a.children[1],s)+")";break;case"op_mul":s?d="$jc$.mul("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+" * "+this.compile(a.children[1],s)+")";break;case"op_exp":s?d="$jc$.pow("+this.compile(a.children[0],s)+", "+this.compile(a.children[1],s)+")":d="("+this.compile(a.children[0],s)+"^"+this.compile(a.children[1],s)+")";break;case"op_neg":s?d="$jc$.neg("+this.compile(a.children[0],s)+")":d="(-"+this.compile(a.children[0],s)+")";break}break;case"node_var":s?d=this.getvarJS(a.value,!1,a.withProps):d=a.value;break;case"node_const":d=a.value;break;case"node_const_bool":d=a.value;break;case"node_str":d="'"+a.value+"'";break}return a.needsAngleBrackets&&(s?d=`{
`+d+` }
`:d="<< "+d+` >>
`),d},getName:function(a,s){var o="";return JXG$1.exists(a)&&JXG$1.exists(a.getName)?(o=a.getName(),(!JXG$1.exists(o)||o==="")&&s&&(o=a.id)):s&&(o=a.id),o},X:function(a){return a.X()},Y:function(a){return a.Y()},V:function(a){return a.Value()},L:function(a){return a.L()},area:function(a){return(!JXG$1.exists(a)||!JXG$1.exists(a.Area))&&this._error("Error: Can't calculate area."),a.Area()},perimeter:function(a){return(!JXG$1.exists(a)||!JXG$1.exists(a.Perimeter))&&this._error("Error: Can't calculate perimeter."),a.Perimeter()},dist:function(a,s){return(!JXG$1.exists(a)||!JXG$1.exists(a.Dist))&&this._error("Error: Can't calculate distance."),a.Dist(s)},radius:function(a){return(!JXG$1.exists(a)||!JXG$1.exists(a.Radius))&&this._error("Error: Can't calculate radius."),a.Radius()},slope:function(a){return(!JXG$1.exists(a)||!JXG$1.exists(a.Slope))&&this._error("Error: Can't calculate slope."),a.Slope()},add:function(a,s){var o,c,h;if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),Interval.isInterval(a)||Interval.isInterval(s))h=Interval.add(a,s);else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(c=Math.min(a.length,s.length),h=[],o=0;o<c;o++)h[o]=a[o]+s[o];else JXG$1.isNumber(a)&&JXG$1.isNumber(s)?h=a+s:JXG$1.isString(a)||JXG$1.isString(s)?h=a.toString()+s.toString():this._error("Operation + not defined on operands "+typeof a+" and "+typeof s);return h},sub:function(a,s){var o,c,h;if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),Interval.isInterval(a)||Interval.isInterval(s))h=Interval.sub(a,s);else if(JXG$1.isArray(a)&&JXG$1.isArray(s))for(c=Math.min(a.length,s.length),h=[],o=0;o<c;o++)h[o]=a[o]-s[o];else JXG$1.isNumber(a)&&JXG$1.isNumber(s)?h=a-s:this._error("Operation - not defined on operands "+typeof a+" and "+typeof s);return h},neg:function(a){var s,o,c;if(a=JXG$1.evalSlider(a),Interval.isInterval(a))c=Interval.negative(a);else if(JXG$1.isArray(a))for(o=a.length,c=[],s=0;s<o;s++)c[s]=-a[s];else JXG$1.isNumber(a)?c=-a:this._error("Unary operation - not defined on operand "+typeof a);return c},mul:function(a,s){var o,c,h;if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),JXG$1.isArray(a)&&JXG$1.isNumber(s)&&(o=a,a=s,s=a),Interval.isInterval(a)||Interval.isInterval(s))h=Interval.mul(a,s);else if(JXG$1.isArray(a)&&JXG$1.isArray(s))c=Math.min(a.length,s.length),h=Mat.innerProduct(a,s,c);else if(JXG$1.isNumber(a)&&JXG$1.isArray(s))for(c=s.length,h=[],o=0;o<c;o++)h[o]=a*s[o];else JXG$1.isNumber(a)&&JXG$1.isNumber(s)?h=a*s:this._error("Operation * not defined on operands "+typeof a+" and "+typeof s);return h},div:function(a,s){var o,c,h;if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),Interval.isInterval(a)||Interval.isInterval(s))h=Interval.div(a,s);else if(JXG$1.isArray(a)&&JXG$1.isNumber(s))for(c=a.length,h=[],o=0;o<c;o++)h[o]=a[o]/s;else JXG$1.isNumber(a)&&JXG$1.isNumber(s)?h=a/s:this._error("Operation * not defined on operands "+typeof a+" and "+typeof s);return h},mod:function(a,s){var o,c,h;if(a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),Interval.isInterval(a)||Interval.isInterval(s))return Interval.fmod(a,s);if(JXG$1.isArray(a)&&JXG$1.isNumber(s))for(c=a.length,h=[],o=0;o<c;o++)h[o]=Mat.mod(a[o],s,!0);else JXG$1.isNumber(a)&&JXG$1.isNumber(s)?h=Mat.mod(a,s,!0):this._error("Operation * not defined on operands "+typeof a+" and "+typeof s);return h},pow:function(a,s){return a=JXG$1.evalSlider(a),s=JXG$1.evalSlider(s),Interval.isInterval(a)||Interval.isInterval(s)?Interval.pow(a,s):Mat.pow(a,s)},lt:function(a,s){return Interval.isInterval(a)||Interval.isInterval(s)?Interval.lt(a,s):a<s},leq:function(a,s){return Interval.isInterval(a)||Interval.isInterval(s)?Interval.leq(a,s):a<=s},gt:function(a,s){return Interval.isInterval(a)||Interval.isInterval(s)?Interval.gt(a,s):a>s},geq:function(a,s){return Interval.isInterval(a)||Interval.isInterval(s)?Interval.geq(a,s):a>=s},randint:function(a,s,o){return JXG$1.exists(o)||(o=1),Math.round(Math.random()*(s-a)/o)*o+a},DDD:function(a){console.log("Dummy derivative function. This should never appear!")},ifthen:function(a,s,o){return a?s:o},del:function(a){typeof a=="object"&&JXG$1.exists(a.type)&&JXG$1.exists(a.elementClass)&&this.board.removeObject(a)},eval:function(a){return JXG$1.evaluate(a)},use:function(a){var s,o,c=!1;if(typeof a=="string"){for(s in JXG$1.boards)if(JXG$1.boards.hasOwnProperty(s)&&JXG$1.boards[s].container===a){o=JXG$1.boards[s],c=!0;break}}else o=a,c=!0;c?(this.board=o,this.builtIn.$board=o,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+a+"' not found!")},findSymbol:function(a,s){var o,c;for(s=JXG$1.def(s,-1),s===-1?c=this.scope:c=this.scopes[s];c!==null;){for(o in c.locals)if(c.locals.hasOwnProperty(o)&&c.locals[o]===a)return[o,c];c=c.previous}return[]},importModule:function(a){return priv$4.modules[a.toLowerCase()]},defineBuiltIn:function(){var a=this,s={PI:Math.PI,EULER:Math.E,D:a.DDD,X:a.X,Y:a.Y,V:a.V,Value:a.V,L:a.L,Length:a.L,acosh:Mat.acosh,acot:Mat.acot,asinh:Mat.asinh,binomial:Mat.binomial,cbrt:Mat.cbrt,cosh:Mat.cosh,cot:Mat.cot,deg:Geometry.trueAngle,A:a.area,area:a.area,Area:a.area,perimeter:a.perimeter,Perimeter:a.perimeter,dist:a.dist,Dist:a.dist,R:a.radius,radius:a.radius,Radius:a.radius,erf:Mat.erf,erfc:Mat.erfc,erfi:Mat.erfi,factorial:Mat.factorial,gcd:Mat.gcd,lb:Mat.log2,lcm:Mat.lcm,ld:Mat.log2,lg:Mat.log10,ln:Math.log,log:Mat.log,log10:Mat.log10,log2:Mat.log2,ndtr:Mat.ndtr,ndtri:Mat.ndtri,nthroot:Mat.nthroot,pow:Mat.pow,rad:Geometry.rad,ratpow:Mat.ratpow,trunc:JXG$1.trunc,sinh:Mat.sinh,slope:a.slope,Slope:a.slope,randint:a.randint,IfThen:a.ifthen,import:a.importModule,eval:a.eval,use:a.use,remove:a.del,$:a.getElementById,$value:function(o){return a.getElementById(o).Value()},getName:a.getName,name:a.getName,$board:a.board,$log:a.log};return s.rad.sc=Geometry,s.deg.sc=Geometry,s.factorial.sc=Mat,s.X.src="$jc$.X",s.Y.src="$jc$.Y",s.V.src="$jc$.V",s.Value.src="$jc$.V",s.L.src="$jc$.L",s.Length.src="$jc$.L",s.acosh.src="JXG.Math.acosh",s.acot.src="JXG.Math.acot",s.asinh.src="JXG.Math.asinh",s.binomial.src="JXG.Math.binomial",s.cbrt.src="JXG.Math.cbrt",s.cot.src="JXG.Math.cot",s.cosh.src="JXG.Math.cosh",s.deg.src="JXG.Math.Geometry.trueAngle",s.erf.src="JXG.Math.erf",s.erfc.src="JXG.Math.erfc",s.erfi.src="JXG.Math.erfi",s.A.src="$jc$.area",s.area.src="$jc$.area",s.Area.src="$jc$.area",s.perimeter.src="$jc$.perimeter",s.Perimeter.src="$jc$.perimeter",s.dist.src="$jc$.dist",s.Dist.src="$jc$.dist",s.R.src="$jc$.radius",s.radius.src="$jc$.radius",s.Radius.src="$jc$.radius",s.factorial.src="JXG.Math.factorial",s.gcd.src="JXG.Math.gcd",s.lb.src="JXG.Math.log2",s.lcm.src="JXG.Math.lcm",s.ld.src="JXG.Math.log2",s.lg.src="JXG.Math.log10",s.ln.src="Math.log",s.log.src="JXG.Math.log",s.log10.src="JXG.Math.log10",s.log2.src="JXG.Math.log2",s.ndtr.src="JXG.Math.ndtr",s.ndtri.src="JXG.Math.ndtri",s.nthroot.src="JXG.Math.nthroot",s.pow.src="JXG.Math.pow",s.rad.src="JXG.Math.Geometry.rad",s.ratpow.src="JXG.Math.ratpow",s.trunc.src="JXG.trunc",s.sinh.src="JXG.Math.sinh",s.slope.src="$jc$.slope",s.Slope.src="$jc$.slope",s.randint.src="$jc$.randint",s.import.src="$jc$.importModule",s.eval.src="$jc$.eval",s.use.src="$jc$.use",s.remove.src="$jc$.del",s.IfThen.src="$jc$.ifthen",s.$.src="(function (n) { return $jc$.board.select(n); })",s.$value.src="(function (n) { return $jc$.board.select(n).Value(); })",s.getName.src="$jc$.getName",s.name.src="$jc$.getName",s.$board&&(s.$board.src="$jc$.board"),s.$log.src="$jc$.log",s=JXG$1.merge(s,a._addedBuiltIn),s},_addedBuiltIn:{},addBuiltIn:function(a,s){if(JXG$1.exists(this.builtIn)){if(JXG$1.exists(this.builtIn[a]))return;this.builtIn[a]=s,this.builtIn[a].src="$jc$."+a}JXG$1.exists(this._addedBuiltIn[a])||(this._addedBuiltIn[a]=s,this._addedBuiltIn[a].src="$jc$."+a,JXG$1.JessieCode.prototype[a]=s)},getPossibleOperands:function(){var a=["E"],s=this.builtIn||this.defineBuiltIn(),o=Math,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo;for(qs=function(js,eu){return js.toLowerCase().localeCompare(eu.toLowerCase())},zo=function(js,eu){var Oo=null;if(eu==="jc")Oo=s[js];else if(eu==="Math")Oo=o[js];else return;if(!(a.indexOf(js)>=0)){if(JXG$1.isFunction(Oo))return{name:js,type:"function",numParams:Oo.length,origin:eu};if(JXG$1.isNumber(Oo))return{name:js,type:"constant",value:Oo,origin:eu};js.startsWith("$")||Oo!==void 0&&console.error("undefined type",Oo)}},c=Object.getOwnPropertyNames(s).sort(qs),h=Object.getOwnPropertyNames(o).sort(qs),d=[],b=0,_=0;b<c.length||_<h.length;)c[b]===h[_]?($=zo(h[_],"Math"),JXG$1.exists($)&&d.push($),b++,_++):!JXG$1.exists(h[_])||c[b].toLowerCase().localeCompare(h[_].toLowerCase())<0?($=zo(c[b],"jc"),JXG$1.exists($)&&d.push($),b++):($=zo(h[_],"Math"),JXG$1.exists($)&&d.push($),_++);for(Lt=[],fr=[],Jr=[],Js={},j=d.length,b=0;b<j;b++){switch(Xt=d[b],Xt.type){case"function":Lt.push(Xt.name),Xt.origin==="jc"&&fr.push(Xt.name);break;case"constant":Jr.push(Xt.name);break}Js[Xt.name]=Xt}return{all:Js,list:d,functions:Lt,functions_jessiecode:fr,constants:Jr}},_debug:function(a){typeof console=="object"&&console.log?console.log(a):JXG$1.isBrowser&&document&&document.getElementById("debug")!==null&&(document.getElementById("debug").innerText+=a+`
`)},_error:function(a){var s=new Error("Error("+this.line+"): "+a);throw s.line=this.line,s},_warn:function(a){typeof console=="object"&&console.log?console.log("Warning("+this.line+"): "+a):JXG$1.isBrowser&&document&&document.getElementById(this.warnLog)!==null&&(document.getElementById(this.warnLog).innerText+="Warning("+this.line+"): "+a+`
`)},_log:function(a){typeof window!="object"&&typeof self=="object"&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+a.toString()}):console.log("Log: ",arguments)}});var parser$1=function(){var a=function(F1,z1,J1,Y1){for(J1=J1||{},Y1=F1.length;Y1--;J1[F1[Y1]]=z1);return J1},s=[2,14],o=[1,13],c=[1,37],h=[1,14],d=[1,15],b=[1,21],_=[1,16],$=[1,17],j=[1,33],Xt=[1,18],Lt=[1,19],fr=[1,12],Jr=[1,59],Js=[1,60],qs=[1,58],zo=[1,46],js=[1,48],eu=[1,49],Oo=[1,50],tu=[1,51],Bo=[1,52],vu=[1,53],t1=[1,54],e1=[1,45],r1=[1,38],a1=[1,39],i1=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],s1=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],c1=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],h1=[2,48],m1=[1,72],l1=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],f1=[1,78],p1=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],d1=[1,82],b1=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],C1=[1,83],g1=[1,84],o1=[1,85],S1=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],v1=[1,89],B1=[1,90],T1=[1,91],w1=[1,92],x1=[1,97],M1=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],O1=[1,103],N1=[1,104],L1=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],G1=[1,105],q1=[1,106],H1=[1,107],W1=[1,126],j1=[1,139],Q1=[83,86],rv=[1,150],$1=[10,66,86],A1=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],y1=[1,167],_1=[10,86],D1={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(z1,J1,Y1,ev,Z1,R1,K1){var u1=R1.length-1;switch(Z1){case 1:return R1[u1-1];case 2:this.$=E1.createNode(P1(K1[u1-4]),"node_op","op_if",R1[u1-2],R1[u1]);break;case 3:this.$=E1.createNode(P1(K1[u1-6]),"node_op","op_if_else",R1[u1-4],R1[u1-2],R1[u1]);break;case 4:this.$=E1.createNode(P1(K1[u1-4]),"node_op","op_while",R1[u1-2],R1[u1]);break;case 5:this.$=E1.createNode(P1(K1[u1-8]),"node_op","op_for",R1[u1-6],R1[u1-4],R1[u1-2],R1[u1]);break;case 6:this.$=E1.createNode(P1(K1[u1-6]),"node_op","op_do",R1[u1-5],R1[u1-2]);break;case 7:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_use",R1[u1]);break;case 8:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_delete",R1[u1]);break;case 9:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_return",void 0);break;case 10:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_return",R1[u1-1]);break;case 11:case 14:this.$=E1.createNode(P1(K1[u1]),"node_op","op_none");break;case 12:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_block",R1[u1-1]);break;case 13:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_none",R1[u1-1],R1[u1]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=R1[u1];break;case 22:case 65:case 93:this.$=R1[u1-1];break;case 25:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_assign",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 27:this.$=E1.createNode(P1(K1[u1-4]),"node_op","op_conditional",R1[u1-4],R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 29:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_or",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 31:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_and",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 33:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_eq",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 34:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_neq",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 35:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_approx",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 37:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_lt",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 38:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_gt",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 39:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_leq",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 40:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_geq",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 42:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_add",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 43:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_sub",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 45:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_mul",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 46:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_div",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 47:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_mod",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 49:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_exp",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 51:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_not",R1[u1]),this.$.isMath=!1;break;case 53:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_neg",R1[u1]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=R1[u1],this.$.isMath=!1;break;case 59:case 91:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_property",R1[u1-2],R1[u1]),this.$.isMath=!0;break;case 60:case 90:this.$=E1.createNode(P1(K1[u1-3]),"node_op","op_extvalue",R1[u1-3],R1[u1-1]),this.$.isMath=!0;break;case 61:this.$=E1.createNode(P1(K1[u1]),"node_var",R1[u1]);break;case 69:this.$=R1[u1],this.$.isMath=!0;break;case 70:this.$=E1.createNode(P1(K1[u1]),"node_const",null);break;case 71:this.$=E1.createNode(P1(K1[u1]),"node_const_bool",!0);break;case 72:this.$=E1.createNode(P1(K1[u1]),"node_const_bool",!1);break;case 73:this.$=E1.createNode(P1(K1[u1]),"node_str",R1[u1].substring(1,R1[u1].length-1));break;case 74:this.$=E1.createNode(P1(K1[u1]),"node_const",parseFloat(R1[u1]));break;case 75:this.$=E1.createNode(P1(K1[u1]),"node_const",NaN);break;case 76:this.$=E1.createNode(P1(K1[u1]),"node_const",1/0);break;case 77:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_array",[]);break;case 78:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_array",R1[u1-1]);break;case 79:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_emptyobject",{}),this.$.needsAngleBrackets=!0;break;case 80:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_proplst_val",R1[u1-1]),this.$.needsAngleBrackets=!0;break;case 82:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_proplst",R1[u1-2],R1[u1]);break;case 83:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_prop",R1[u1-2],R1[u1]);break;case 87:case 89:this.$=E1.createNode(P1(K1[u1-1]),"node_op","op_execfun",R1[u1-1],R1[u1]),this.$.isMath=!0;break;case 88:this.$=E1.createNode(P1(K1[u1-2]),"node_op","op_execfun",R1[u1-2],R1[u1-1],R1[u1],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[R1[u1]];break;case 95:case 99:case 105:this.$=R1[u1-2].concat(R1[u1]);break;case 96:this.$=E1.createNode(P1(K1[u1]),"node_var",R1[u1]),this.$.isMath=!0;break;case 100:this.$=E1.createNode(P1(K1[u1-3]),"node_op","op_function",[],R1[u1]),this.$.isMath=!1;break;case 101:this.$=E1.createNode(P1(K1[u1-4]),"node_op","op_function",R1[u1-2],R1[u1]),this.$.isMath=!1;break;case 102:this.$=E1.createNode(P1(K1[u1-4]),"node_op","op_map",[],R1[u1]);break;case 103:this.$=E1.createNode(P1(K1[u1-5]),"node_op","op_map",R1[u1-3],R1[u1]);break}},table:[a([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],s,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:o,8:c,9:20,11:4,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{1:[2,1]},a(i1,[2,13]),a(s1,[2,15]),a(s1,[2,16]),a(s1,[2,17]),a(s1,[2,18]),a(s1,[2,19]),a(s1,[2,20]),a(s1,[2,21]),a([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],s,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:o,8:c,9:20,11:65,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{20:[1,66]},{20:[1,67]},{8:c,9:69,16:[1,68],20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{16:[1,70]},a(s1,[2,11]),a(c1,[2,23]),a(c1,[2,24]),a([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],h1,{32:[1,71],57:m1}),a([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),a(l1,[2,54],{88:77,8:f1,64:[1,75],65:[1,76]}),a(l1,[2,55],{88:79,8:f1,64:[1,81],65:[1,80]}),a(p1,[2,28],{39:d1}),a(c1,[2,56]),a(c1,[2,57]),a(c1,[2,58]),a(b1,[2,30],{41:C1,42:g1,43:o1}),a(c1,[2,61]),a(c1,[2,62]),a(c1,[2,63]),a(c1,[2,64]),{8:c,9:86,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:[1,87]},{8:[1,88]},a(S1,[2,32],{45:v1,46:B1,47:T1,48:w1}),a(c1,[2,66]),a(c1,[2,67]),a(c1,[2,68]),a(c1,[2,69]),{20:x1,72:98,73:99,77:tu,78:Bo,79:vu,80:t1,83:[1,93],84:94,85:95,87:96},{8:c,20:j,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,81:101,82:e1,91:r1,93:a1},a(M1,[2,36],{50:O1,51:N1}),a(c1,[2,70]),a(c1,[2,71]),a(c1,[2,72]),a(c1,[2,73]),a(c1,[2,74]),a(c1,[2,75]),a(c1,[2,76]),a(L1,[2,41],{53:G1,54:q1,55:H1}),a(c1,[2,44]),a(c1,[2,50]),{8:c,20:j,31:109,50:Jr,51:Js,52:108,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,50:Jr,51:Js,52:110,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,50:Jr,51:Js,52:111,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{6:6,7:o,8:c,9:20,11:4,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,9:113,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,9:114,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,9:115,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{14:[1,116]},a(s1,[2,7]),a(s1,[2,8]),a(s1,[2,9]),{16:[1,117]},a(s1,[2,22]),{8:c,20:j,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,50:Jr,51:Js,52:119,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,36:121,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{20:[1,122]},{8:c,9:123,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(c1,[2,87],{89:124,90:125,68:127,20:W1,82:e1}),{8:c,10:[1,128],20:j,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,81:129,82:e1,91:r1,93:a1},a(c1,[2,89]),{8:c,9:130,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{20:[1,131]},{8:c,20:j,31:109,38:132,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,40:133,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,40:134,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,40:135,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{10:[1,136]},{10:[1,137],20:j1,92:138},{10:[1,140],20:j1,92:141},{8:c,20:j,31:109,44:142,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,44:143,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,44:144,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,44:145,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(c1,[2,79]),{83:[1,146],86:[1,147]},a(Q1,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},a(c1,[2,77]),{66:[1,149],86:rv},a($1,[2,98]),{8:c,20:j,31:109,49:151,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,49:152,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,50:Jr,51:Js,52:153,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,50:Jr,51:Js,52:154,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,31:109,50:Jr,51:Js,52:155,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(c1,[2,51]),a([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],h1,{57:m1}),a(c1,[2,52]),a(c1,[2,53]),a([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},a(s1,[2,10]),a(c1,[2,25]),a(c1,[2,49]),{35:[1,160]},a(p1,[2,29],{39:d1}),a(c1,[2,59]),{66:[1,161]},a([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),a(c1,[2,94]),a(c1,[2,96]),a(c1,[2,97]),a(A1,[2,92]),{10:[1,163],86:rv},{66:[1,164]},a(c1,[2,91]),a(b1,[2,31],{41:C1,42:g1,43:o1}),a(S1,[2,33],{45:v1,46:B1,47:T1,48:w1}),a(S1,[2,34],{45:v1,46:B1,47:T1,48:w1}),a(S1,[2,35],{45:v1,46:B1,47:T1,48:w1}),a(c1,[2,65]),{25:165,26:fr},{10:[1,166],86:y1},a(_1,[2,104]),{94:[1,168]},{10:[1,169],86:y1},a(M1,[2,37],{50:O1,51:N1}),a(M1,[2,38],{50:O1,51:N1}),a(M1,[2,39],{50:O1,51:N1}),a(M1,[2,40],{50:O1,51:N1}),a(c1,[2,80]),{20:x1,72:98,73:99,77:tu,78:Bo,79:vu,80:t1,85:170,87:96},{8:c,20:j,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(c1,[2,78]),{8:c,20:j,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(L1,[2,42],{53:G1,54:q1,55:H1}),a(L1,[2,43],{53:G1,54:q1,55:H1}),a(c1,[2,45]),a(c1,[2,46]),a(c1,[2,47]),{6:6,7:o,8:c,9:20,11:173,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{6:6,7:o,8:c,9:20,11:174,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,9:175,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,9:176,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,20:j,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(c1,[2,60]),{20:W1,68:127,82:e1,90:178},a(A1,[2,93]),a(c1,[2,90]),a(c1,[2,100]),{25:179,26:fr},{20:[1,180]},{8:c,9:181,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{94:[1,182]},a(Q1,[2,82]),a(Q1,[2,83]),a($1,[2,99]),a(i1,[2,2],{12:[1,183]}),a(s1,[2,4]),{16:[1,184]},{10:[1,185]},a(c1,[2,27]),a(c1,[2,95]),a(c1,[2,101]),a(_1,[2,105]),a(c1,[2,102]),{8:c,9:186,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{6:6,7:o,8:c,9:20,11:187,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{8:c,9:188,20:j,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},{16:[1,189]},a(c1,[2,103]),a(s1,[2,3]),{10:[1,190]},a(s1,[2,6]),{6:6,7:o,8:c,9:20,11:191,13:7,14:h,15:d,16:b,17:_,18:8,19:$,20:j,21:Xt,22:9,23:Lt,24:11,25:5,26:fr,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:Jr,51:Js,52:56,56:57,58:qs,59:26,60:27,61:29,62:30,63:31,65:zo,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:js,75:eu,76:Oo,77:tu,78:Bo,79:vu,80:t1,82:e1,91:r1,93:a1},a(s1,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(z1,J1){if(J1.recoverable)this.trace(z1);else{var Y1=new Error(z1);throw Y1.hash=J1,Y1}},parse:function(z1){var J1=this,Y1=[0],ev=[null],Z1=[],R1=this.table,K1="",u1=0,k1=0,I1=2,U1=1,iv=Z1.slice.call(arguments,1),tv=Object.create(this.lexer),av={yy:{}};for(var hv in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hv)&&(av.yy[hv]=this.yy[hv]);tv.setInput(z1,av.yy),av.yy.lexer=tv,av.yy.parser=this,typeof tv.yylloc>"u"&&(tv.yylloc={});var yv=tv.yylloc;Z1.push(yv);var Av=tv.options&&tv.options.ranges;typeof av.yy.parseError=="function"?this.parseError=av.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Pv=function(){var gv;return gv=tv.lex()||U1,typeof gv!="number"&&(gv=J1.symbols_[gv]||gv),gv},sv,dv,ov,Cv,mv={},bv,cv,Nv,xv;;){if(dv=Y1[Y1.length-1],this.defaultActions[dv]?ov=this.defaultActions[dv]:((sv===null||typeof sv>"u")&&(sv=Pv()),ov=R1[dv]&&R1[dv][sv]),typeof ov>"u"||!ov.length||!ov[0]){var wv="";xv=[];for(bv in R1[dv])this.terminals_[bv]&&bv>I1&&xv.push("'"+this.terminals_[bv]+"'");tv.showPosition?wv="Parse error on line "+(u1+1)+`:
`+tv.showPosition()+`
Expecting `+xv.join(", ")+", got '"+(this.terminals_[sv]||sv)+"'":wv="Parse error on line "+(u1+1)+": Unexpected "+(sv==U1?"end of input":"'"+(this.terminals_[sv]||sv)+"'"),this.parseError(wv,{text:tv.match,token:this.terminals_[sv]||sv,line:tv.yylineno,loc:yv,expected:xv})}if(ov[0]instanceof Array&&ov.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dv+", token: "+sv);switch(ov[0]){case 1:Y1.push(sv),ev.push(tv.yytext),Z1.push(tv.yylloc),Y1.push(ov[1]),sv=null,k1=tv.yyleng,K1=tv.yytext,u1=tv.yylineno,yv=tv.yylloc;break;case 2:if(cv=this.productions_[ov[1]][1],mv.$=ev[ev.length-cv],mv._$={first_line:Z1[Z1.length-(cv||1)].first_line,last_line:Z1[Z1.length-1].last_line,first_column:Z1[Z1.length-(cv||1)].first_column,last_column:Z1[Z1.length-1].last_column},Av&&(mv._$.range=[Z1[Z1.length-(cv||1)].range[0],Z1[Z1.length-1].range[1]]),Cv=this.performAction.apply(mv,[K1,k1,u1,av.yy,ov[1],ev,Z1].concat(iv)),typeof Cv<"u")return Cv;cv&&(Y1=Y1.slice(0,-1*cv*2),ev=ev.slice(0,-1*cv),Z1=Z1.slice(0,-1*cv)),Y1.push(this.productions_[ov[1]][0]),ev.push(mv.$),Z1.push(mv._$),Nv=R1[Y1[Y1.length-2]][Y1[Y1.length-1]],Y1.push(Nv);break;case 3:return!0}}return!0}},E1={node:function(F1,z1,J1){return{type:F1,value:z1,children:J1}},createNode:function(F1,z1,J1,Y1){var ev,Z1=this.node(z1,J1,[]);for(ev=3;ev<arguments.length;ev++)Z1.children.push(arguments[ev]);return Z1.line=F1[0],Z1.col=F1[1],Z1.eline=F1[2],Z1.ecol=F1[3],Z1}},P1=function(F1){return[F1.first_line,F1.first_column,F1.last_line,F1.last_column]},X1=function(){var F1={EOF:1,parseError:function(J1,Y1){if(this.yy.parser)this.yy.parser.parseError(J1,Y1);else throw new Error(J1)},setInput:function(z1,J1){return this.yy=J1||this.yy||{},this._input=z1,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var z1=this._input[0];this.yytext+=z1,this.yyleng++,this.offset++,this.match+=z1,this.matched+=z1;var J1=z1.match(/(?:\r\n?|\n).*/g);return J1?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),z1},unput:function(z1){var J1=z1.length,Y1=z1.split(/(?:\r\n?|\n)/g);this._input=z1+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-J1),this.offset-=J1;var ev=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Y1.length-1&&(this.yylineno-=Y1.length-1);var Z1=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Y1?(Y1.length===ev.length?this.yylloc.first_column:0)+ev[ev.length-Y1.length].length-Y1[0].length:this.yylloc.first_column-J1},this.options.ranges&&(this.yylloc.range=[Z1[0],Z1[0]+this.yyleng-J1]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(z1){this.unput(this.match.slice(z1))},pastInput:function(){var z1=this.matched.substr(0,this.matched.length-this.match.length);return(z1.length>20?"...":"")+z1.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var z1=this.match;return z1.length<20&&(z1+=this._input.substr(0,20-z1.length)),(z1.substr(0,20)+(z1.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var z1=this.pastInput(),J1=new Array(z1.length+1).join("-");return z1+this.upcomingInput()+`
`+J1+"^"},test_match:function(z1,J1){var Y1,ev,Z1;if(this.options.backtrack_lexer&&(Z1={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Z1.yylloc.range=this.yylloc.range.slice(0))),ev=z1[0].match(/(?:\r\n?|\n).*/g),ev&&(this.yylineno+=ev.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ev?ev[ev.length-1].length-ev[ev.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+z1[0].length},this.yytext+=z1[0],this.match+=z1[0],this.matches=z1,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(z1[0].length),this.matched+=z1[0],Y1=this.performAction.call(this,this.yy,this,J1,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Y1)return Y1;if(this._backtrack){for(var R1 in Z1)this[R1]=Z1[R1];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var z1,J1,Y1,ev;this._more||(this.yytext="",this.match="");for(var Z1=this._currentRules(),R1=0;R1<Z1.length;R1++)if(Y1=this._input.match(this.rules[Z1[R1]]),Y1&&(!J1||Y1[0].length>J1[0].length)){if(J1=Y1,ev=R1,this.options.backtrack_lexer){if(z1=this.test_match(Y1,Z1[R1]),z1!==!1)return z1;if(this._backtrack){J1=!1;continue}else return!1}else if(!this.options.flex)break}return J1?(z1=this.test_match(J1,Z1[ev]),z1!==!1?z1:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var J1=this.next();return J1||this.lex()},begin:function(J1){this.conditionStack.push(J1)},popState:function(){var J1=this.conditionStack.length-1;return J1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(J1){return J1=this.conditionStack.length-1-Math.abs(J1||0),J1>=0?this.conditionStack[J1]:"INITIAL"},pushState:function(J1){this.begin(J1)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(J1,Y1,ev,Z1){switch(ev){case 0:break;case 1:return 78;case 2:return 78;case 3:return 78;case 4:return 77;case 5:return 77;case 6:break;case 7:break;case 8:return 7;case 9:return 12;case 10:return 14;case 11:return 17;case 12:return 15;case 13:return 91;case 14:return 93;case 15:return 19;case 16:return 23;case 17:return 21;case 18:return 75;case 19:return 76;case 20:return 74;case 21:return 80;case 22:return 94;case 23:return 94;case 24:return 82;case 25:return 83;case 26:return 26;case 27:return 27;case 28:return 16;case 29:return"#";case 30:return 34;case 31:return 35;case 32:return 79;case 33:return 64;case 34:return 65;case 35:return 66;case 36:return 8;case 37:return 10;case 38:return 58;case 39:return 57;case 40:return 57;case 41:return 53;case 42:return 54;case 43:return 55;case 44:return 50;case 45:return 51;case 46:return 47;case 47:return 45;case 48:return 48;case 49:return 46;case 50:return 41;case 51:return 43;case 52:return 42;case 53:return 39;case 54:return 37;case 55:return 32;case 56:return 86;case 57:return 5;case 58:return 20;case 59:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]*\.?[0-9]+([eE][-+]?[0-9]+))/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return F1}();D1.lexer=X1;function V1(){this.yy={}}return V1.prototype=D1,D1.Parser=V1,new V1}();parser$1.yy.parseError=parser$1.parseError;const JessieCode=JXG$1.JessieCode;JXG$1.Composition=function(a){var s,o=this,c=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],h=function(d){return function(){var b;for(b in o.elements)o.elements.hasOwnProperty(b)&&JXG$1.exists(o.elements[b][d])&&o.elements[b][d].apply(o.elements[b],arguments);return o}};for(s=0;s<c.length;s++)this[c[s]]=h(c[s]);this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"};for(s in a)a.hasOwnProperty(s)&&this.add(s,a[s]);this.dump=!0,this.subs={}};JXG$1.extend(JXG$1.Composition.prototype,{add:function(a,s){return!JXG$1.exists(this[a])&&JXG$1.exists(s)?(JXG$1.exists(s.id)?this.elements[s.id]=s:this.elements[a]=s,JXG$1.exists(s.name)&&(this.elementsByName[s.name]=s),s.on("attribute:name",this.nameListener,this),this.objectsList.push(s),this[a]=s,this.methodMap[a]=s,!0):!1},remove:function(a){var s=!1,o;for(o in this.elements)if(this.elements.hasOwnProperty(o)&&this.elements[o].id===this[a].id){s=!0;break}return s&&(delete this.elements[this[a].id],delete this[a]),s},nameListener:function(a,s,o){delete this.elementsByName[a],this.elementsByName[s]=o},select:function(a){return JXG$1.exists(JXG$1.Board)?JXG$1.Board.prototype.select.call(this,a):new JXG$1.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var a;for(a in this.subs)this.subs.hasOwnProperty(a)&&this.subs[a].visProp;return this.attr}});const Composition=JXG$1.Composition;JXG$1.Board=function(a,s,o,c,h,d,b,_,$,j,Xt){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,JXG$1.exists(Xt.document)&&Xt.document!==!1?this.document=Xt.document:JXG$1.isBrowser&&(this.document=document),this.container="",this.id="",this.containerObj=null,JXG$1.isString(a)?(this.container=a,this.containerObj=JXG$1.isBrowser?this.document.getElementById(this.container):null):JXG$1.isBrowser&&(this.containerObj=a,this.container=this.containerObj.getAttribute("id"),this.container===null&&(this.container="null"+parseInt(Math.random()*16777216).toString())),JXG$1.isBrowser&&s.type!=="no"&&this.containerObj===null)throw new Error(`
JSXGraph: HTML container element "`+a+'" not found.');JXG$1.exists(o)&&o!==""&&JXG$1.isBrowser&&!JXG$1.exists(this.document.getElementById(o))?this.id=o:this.id=this.generateId(),this.renderer=s,this.grids=[],this.options=JXG$1.deepCopy(Options$1),this.attr=Xt,this.attr.theme!=="default"&&JXG$1.exists(JXG$1.themes[this.attr.theme])&&JXG$1.mergeAttr(this.options,JXG$1.themes[this.attr.theme],!0),this.dimension=2,this.jc=new JessieCode,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,c[0],c[1]],this.zoomX=h,this.zoomY=d,this.unitX=b*this.zoomX,this.unitY=_*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=$,this.canvasHeight=j,EventEmitter.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.clickObjects={},this.focusObjects=[],(this.attr.showcopyright||this.attr.showlogo)&&this.renderer.displayLogo(Const.licenseLogo,parseInt(this.options.text.fontSize,10),this),this.attr.showcopyright&&this.renderer.displayCopyright(Const.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasWheelHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this.resizeHandlers=[],this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this._change3DView=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=JXG$1.Math,this.attr.registerevents===!0?this.attr.registerevents={fullscreen:!0,keyboard:!0,pointer:!0,resize:!0,wheel:!0}:typeof this.attr.registerevents=="object"&&(JXG$1.exists(this.attr.registerevents.fullscreen)||(this.attr.registerevents.fullscreen=!0),JXG$1.exists(this.attr.registerevents.keyboard)||(this.attr.registerevents.keyboard=!0),JXG$1.exists(this.attr.registerevents.pointer)||(this.attr.registerevents.pointer=!0),JXG$1.exists(this.attr.registerevents.resize)||(this.attr.registerevents.resize=!0),JXG$1.exists(this.attr.registerevents.wheel)||(this.attr.registerevents.wheel=!0)),this.attr.registerevents!==!1&&(this.attr.registerevents.fullscreen&&this.addFullscreenEventHandlers(),this.attr.registerevents.keyboard&&this.addKeyboardEventHandlers(),this.attr.registerevents.pointer&&this.addEventHandlers(),this.attr.registerevents.resize&&this.addResizeEventHandlers(),this.attr.registerevents.wheel&&this.addWheelEventHandlers()),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setAttribute:"setAttribute",setBoundingBox:"setBoundingBox",setView:"setBoundingBox",getBoundingBox:"getBoundingBox",BoundingBox:"getBoundingBox",getView:"getBoundingBox",View:"getBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}};JXG$1.extend(JXG$1.Board.prototype,{generateName:function(a){var s,o,c=this.attr.maxnamelength,h="",d="",b=[],_="";if(a.type===Const.OBJECT_TYPE_TICKS)return"";for(JXG$1.isPoint(a)||JXG$1.isPoint3D(a)?s=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:a.type===Const.OBJECT_TYPE_ANGLE?s=["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:s=["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],!JXG$1.isPoint(a)&&!JXG$1.isPoint3D(a)&&a.elementClass!==Const.OBJECT_CLASS_LINE&&a.type!==Const.OBJECT_TYPE_ANGLE&&(a.type===Const.OBJECT_TYPE_POLYGON?h="P_{":a.elementClass===Const.OBJECT_CLASS_CIRCLE?h="k_{":a.elementClass===Const.OBJECT_CLASS_TEXT?h="t_{":h="s_{",d="}"),o=0;o<c;o++)b[o]=0;for(;b[c-1]<s.length;){for(b[0]=1;b[0]<s.length;b[0]++){for(_=h,o=c;o>0;o--)_+=s[b[o-1]];if(!JXG$1.exists(this.elementsByName[_+d]))return _+d}for(b[0]=s.length,o=1;o<c;o++)b[o-1]===s.length&&(b[o-1]=1,b[o]+=1)}return""},generateId:function(){for(var a=1;JXG$1.exists(JXG$1.boards["jxgBoard"+a]);)a=Math.round(Math.random()*16777216);return"jxgBoard"+a},setId:function(a,s){var o,c=this.numObjects,h=a.id;if(this.numObjects+=1,h===""||!JXG$1.exists(h))for(h=this.id+s+c;JXG$1.exists(this.objects[h]);)o=Math.round(Math.random()*65535),h=this.id+s+c+"-"+o;return a.id=h,this.objects[h]=a,a._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=a,h},finalizeAdding:function(a){a.evalVisProp("visible")===!1&&this.renderer.display(a,!1)},finalizeLabel:function(a){a.hasLabel&&!a.label.evalVisProp("islabel")&&a.label.evalVisProp("visible")===!1&&this.renderer.display(a.label,!1)},checkFrameRate:function(a){var s=!1,o=new Date().getTime();return JXG$1.exists(a.pointerId)&&this.touchMoveLastId!==a.pointerId&&(s=!0,this.touchMoveLastId=a.pointerId),!s&&(o-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(s=!0),s&&(this.touchMoveLast=o),s},getCoordsTopLeftCorner:function(){var a,s,o,c=this.document.ownerDocument||this.document,h=c.documentElement||this.document.body.parentNode,d=c.body,b=this.containerObj,_,$;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||new Date().getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=new Date().getTime(),b.getBoundingClientRect){for(o=b.getBoundingClientRect(),_=1,$=b;$&&JXG$1.exists($.parentNode);)JXG$1.exists($.style)&&JXG$1.exists($.style.zoom)&&$.style.zoom!==""&&(_*=parseFloat($.style.zoom)),$=$.parentNode;return a=[o.left*_,o.top*_],a[0]+=JXG$1.getProp(b,"border-left-width"),a[1]+=JXG$1.getProp(b,"border-top-width"),this.renderer.type!=="vml"&&(a[0]+=JXG$1.getProp(b,"padding-left"),a[1]+=JXG$1.getProp(b,"padding-top")),this.cPos=a.slice(),this.cPos}return a=JXG$1.getOffset(b),s=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&s.defaultView&&(a[0]+=JXG$1.getProp(h,"margin-left"),a[1]+=JXG$1.getProp(h,"margin-top"),a[0]+=JXG$1.getProp(h,"border-left-width"),a[1]+=JXG$1.getProp(h,"border-top-width"),a[0]+=JXG$1.getProp(h,"padding-left"),a[1]+=JXG$1.getProp(h,"padding-top")),d&&(a[0]+=JXG$1.getProp(d,"left"),a[1]+=JXG$1.getProp(d,"top")),typeof google=="object"&&google.translate&&(a[0]+=10,a[1]+=25),a[0]+=JXG$1.getProp(b,"border-left-width"),a[1]+=JXG$1.getProp(b,"border-top-width"),this.renderer.type!=="vml"&&(a[0]+=JXG$1.getProp(b,"padding-left"),a[1]+=JXG$1.getProp(b,"padding-top")),a[0]+=this.attr.offsetx,a[1]+=this.attr.offsety,this.cPos=a.slice(),this.cPos},getPointLoc:function(a,s){var o,c,h,d;return o=this.getBoundingBox(),c=a,c.length===2&&c.unshift(void 0),h=[0,0],d=s||0,JXG$1.isNumber(d)&&(d=[d,d,d,d]),c[1]>o[2]-d[1]&&(h[0]=1),c[1]<o[0]+d[3]&&(h[0]=-1),c[2]>o[1]-d[0]&&(h[1]=1),c[2]<o[3]+d[2]&&(h[1]=-1),h},getLocationOrigin:function(a){return this.getPointLoc([0,0],a)},getMousePosition:function(a,s){var o=this.getCoordsTopLeftCorner(),c,h;return c=JXG$1.getPosition(a,s,this.document),this.updateCSSTransforms(),h=[1,c[0]-o[0],c[1]-o[1]],h=Mat.matVecMult(this.cssTransMat,h),h[1]/=h[0],h[2]/=h[0],[h[1],h[2]]},initMoveOrigin:function(a,s){this.drag_dx=a-this.origin.scrCoords[1],this.drag_dy=s-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(a,s,o,c){var h,d,b=[],_=[],$,j=this.objectsList.length,Xt={visProp:{layer:-1e4}};for(this._shiftKey=o.shiftKey,this._ctrlKey=o.ctrlKey,d=0;d<j;d++)h=this.objectsList[d],$=h.hasPoint&&h.hasPoint(a,s),h.visPropCalc.visible&&$&&(h.triggerEventHandlers([c+"down","down"],[o]),this.downObjects.push(h)),$&&h.isDraggable&&h.visPropCalc.visible&&(this.geonextCompatibilityMode&&(JXG$1.isPoint(h)||h.elementClass===Const.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!h.evalVisProp("fixed")&&(h.visProp.layer>Xt.visProp.layer||h.visProp.layer===Xt.visProp.layer&&h.lastDragTime.getTime()>=Xt.lastDragTime.getTime())&&(!this.attr.ignorelabels||!JXG$1.exists(Xt.label)||h!==Xt.label)&&(Xt=h,b.push(Xt),JXG$1.exists(Xt.coords)?Xt.elementClass===Const.OBJECT_CLASS_POINT||Xt.relativeCoords?_.push(Stat.subtract(Xt.coords.scrCoords.slice(1),[a,s])):_.push(Stat.subtract(Xt.actualCoords.scrCoords.slice(1),[a,s])):_.push([0,0]));return this.attr.drag.enabled&&b.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(b.length=1,this._drag_offset=_[0]):(b=b.slice(-1),this._drag_offset=_[_.length-1]),this._drag_offset||(this._drag_offset=[0,0]),this.renderer.type==="svg"&&JXG$1.exists(b[0])&&b[0].evalVisProp("dragtotopoflayer")&&b.length===1&&JXG$1.exists(b[0].rendNode)&&b[0].rendNode.parentNode.appendChild(b[0].rendNode),b.length>=1&&(b[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[o,b[0]])),b},moveObject:function(a,s,o,c,h){var d=new Coords(Const.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(a,s),this),b,_,$;o&&o.obj&&(b=o.obj,b.coords&&(_=b.coords.scrCoords.slice()),this.addLogEntry("drag",b,d.usrCoords.slice(1)),this.drag_position=[d.scrCoords[1],d.scrCoords[2]],this.drag_position=Stat.add(this.drag_position,this._drag_offset),this._shiftKey=c.shiftKey,this._ctrlKey=c.ctrlKey,JXG$1.exists(b.coords)?b.setPositionDirectly(Const.COORDS_BY_SCREEN,this.drag_position,[a,s]):(this.displayInfobox(!1),isNaN(o.targets[0].Xprev+o.targets[0].Yprev)||b.setPositionDirectly(Const.COORDS_BY_SCREEN,[d.scrCoords[1],d.scrCoords[2]],[o.targets[0].Xprev,o.targets[0].Yprev]),o.targets[0].Xprev=d.scrCoords[1],o.targets[0].Yprev=d.scrCoords[2]),JXG$1.exists(b.coords)&&(b.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(b),b.prepareUpdate().update(!0).updateRenderer()),b.coords&&($=b.coords.scrCoords),(!b.coords||_[1]!==$[1]||_[2]!==$[2])&&(b.triggerEventHandlers([h+"drag","drag"],[c]),this.update(b)),b.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[c,b]),b.lastDragTime=new Date)},twoFingerMove:function(a,s,o){var c;if(JXG$1.exists(a)&&JXG$1.exists(a.obj))c=a.obj;else return;c.elementClass===Const.OBJECT_CLASS_LINE||c.type===Const.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(a.targets,c,s):c.elementClass===Const.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(a.targets,c,s),o&&c.triggerEventHandlers(["touchdrag","drag"],[o])},getTwoFingerTransform(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu;return h=new Coords(Const.COORDS_BY_SCREEN,[a.Xprev,a.Yprev],this).usrCoords,d=h[1],b=h[2],h=new Coords(Const.COORDS_BY_SCREEN,[s.Xprev,s.Yprev],this).usrCoords,_=h[1],$=h[2],h=new Coords(Const.COORDS_BY_SCREEN,[a.X,a.Y],this).usrCoords,Lt=h[1],fr=h[2],h=new Coords(Const.COORDS_BY_SCREEN,[s.X,s.Y],this).usrCoords,Jr=h[1],Js=h[2],j=_-d,Xt=$-b,qs=Jr-Lt,zo=Js-fr,Oo=j*j+Xt*Xt,js=(qs*j+zo*Xt)/Oo,eu=(zo*j-qs*Xt)/Oo,o||(vu=Mat.hypot(js,eu),js/=vu,eu/=vu),c||(eu=0),tu=.5*(Lt+Jr-js*(d+_)+eu*(b+$)),Bo=.5*(fr+Js-eu*(d+_)-js*(b+$)),[1,0,0,tu,js,-eu,Bo,eu,js]},twoFingerTouchObject:function(a,s,o){var c,h,d,b,_,$=!1;if(JXG$1.exists(a[0])&&JXG$1.exists(a[1])&&!isNaN(a[0].Xprev+a[0].Yprev+a[1].Xprev+a[1].Yprev)){if(h=this.getTwoFingerTransform(a[0],a[1],s.evalVisProp("scalable"),s.evalVisProp("rotatable")),c=this.create("transform",h,{type:"generic"}),c.update(),s.elementClass===Const.OBJECT_CLASS_LINE)d=[],s.point1.draggable()&&d.push(s.point1),s.point2.draggable()&&d.push(s.point2),c.applyOnce(d);else if(s.type===Const.OBJECT_TYPE_POLYGON){for(_=s.vertices.length-1,$=s.evalVisProp("snaptogrid")||s.evalVisProp("snaptopoints"),b=0;b<_&&!$;++b)$=$||s.vertices[b].evalVisProp("snaptogrid")||s.vertices[b].evalVisProp("snaptopoints"),$=$||!s.vertices[b].draggable();if(!$){for(d=[],b=0;b<_;++b)s.vertices[b].draggable()&&d.push(s.vertices[b]);c.applyOnce(d)}}this.update(),s.highlight(!0)}},twoFingerTouchCircle:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr;s.method==="pointCircle"||s.method==="pointLine"||JXG$1.exists(a[0])&&JXG$1.exists(a[1])&&!isNaN(a[0].Xprev+a[0].Yprev+a[1].Xprev+a[1].Yprev)&&(o===a[0].num?(c=a[1],h=a[0]):(c=a[0],h=a[1]),_=new Coords(Const.COORDS_BY_SCREEN,[c.Xprev,c.Yprev],this).usrCoords,b=new Coords(Const.COORDS_BY_SCREEN,[h.Xprev,h.Yprev],this).usrCoords,d=new Coords(Const.COORDS_BY_SCREEN,[h.X,h.Y],this).usrCoords,j=Geometry.rad(b.slice(1),_.slice(1),d.slice(1)),Xt=this.create("transform",[-_[1],-_[2]],{type:"translate"}),Lt=this.create("transform",[j],{type:"rotate"}),Xt.melt(Lt),s.evalVisProp("scalable")&&($=Geometry.distance(_,d)/Geometry.distance(_,b),fr=this.create("transform",[$,$],{type:"scale"}),Xt.melt(fr)),Jr=this.create("transform",[_[1],_[2]],{type:"translate"}),Xt.melt(Jr),s.center.draggable()&&Xt.applyOnce([s.center]),s.method==="twoPoints"?s.point2.draggable()&&Xt.applyOnce([s.point2]):s.method==="pointRadius"&&JXG$1.isNumber(s.updateRadius.origin)&&s.setRadius(s.radius*$),this.update(s.center),s.highlight(!0))},highlightElements:function(a,s,o,c){var h,d,b,_={},$=this.objectsList.length;for(h=0;h<$;h++)d=this.objectsList[h],b=d.id,JXG$1.exists(d.hasPoint)&&d.visPropCalc.visible&&d.hasPoint(a,s)&&(this.updateInfobox(d),JXG$1.exists(this.highlightedObjects[b])||(_[b]=d,d.highlight(),this.triggerEventHandlers(["mousehit","hit"],[o,d,c])),d.mouseover?d.triggerEventHandlers(["mousemove","move"],[o]):(d.triggerEventHandlers(["mouseover","over"],[o]),d.mouseover=!0));for(h=0;h<$;h++)d=this.objectsList[h],b=d.id,d.mouseover&&(_[b]||(d.triggerEventHandlers(["mouseout","out"],[o]),d.mouseover=!1))},saveStartPos:function(a,s){var o=[],c,h;if(a.type===Const.OBJECT_TYPE_TICKS)o.push([1,NaN,NaN]);else if(a.elementClass===Const.OBJECT_CLASS_LINE)o.push(a.point1.coords.usrCoords),o.push(a.point2.coords.usrCoords);else if(a.elementClass===Const.OBJECT_CLASS_CIRCLE)o.push(a.center.coords.usrCoords),a.method==="twoPoints"&&o.push(a.point2.coords.usrCoords);else if(a.type===Const.OBJECT_TYPE_POLYGON)for(h=a.vertices.length-1,c=0;c<h;c++)o.push(a.vertices[c].coords.usrCoords);else if(a.type===Const.OBJECT_TYPE_SECTOR)o.push(a.point1.coords.usrCoords),o.push(a.point2.coords.usrCoords),o.push(a.point3.coords.usrCoords);else if(JXG$1.isPoint(a)||a.type===Const.OBJECT_TYPE_GLIDER)o.push(a.coords.usrCoords);else if(a.elementClass===Const.OBJECT_CLASS_CURVE)a.points.length>0&&o.push(a.points[0].usrCoords);else try{o.push(a.coords.usrCoords)}catch(d){JXG$1.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+d)}for(h=o.length,c=0;c<h;c++)s.Zstart.push(o[c][0]),s.Xstart.push(o[c][1]),s.Ystart.push(o[c][2])},mouseOriginMoveStart:function(a){var s,o;return s=this._isRequiredKeyPressed(a,"pan"),s&&(o=this.getMousePosition(a),this.initMoveOrigin(o[0],o[1])),s},mouseOriginMove:function(a){var s=this.mode===this.BOARD_MODE_MOVE_ORIGIN,o;return s&&(o=this.getMousePosition(a),this.moveOrigin(o[0],o[1],!0)),s},touchStartMoveOriginOneFinger:function(a){var s=a.touches,o,c;return o=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&s.length===1,o&&(c=this.getMousePosition(a,0),this.initMoveOrigin(c[0],c[1])),o},touchOriginMove:function(a){var s=this.mode===this.BOARD_MODE_MOVE_ORIGIN,o;return s&&(o=this.getMousePosition(a,0),this.moveOrigin(o[0],o[1],!0)),s},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},suppressDefault:function(a){return JXG$1.exists(a)&&a.preventDefault(),!1},addEventHandlers:function(){JXG$1.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),this.containerObj!==null&&JXG$1.addEvent(this.containerObj,"contextmenu",this.suppressDefault,this)},removeEventHandlers:function(){(this.hasPointerHandlers||this.hasMouseHandlers||this.hasTouchHandlers)&&this.containerObj!==null&&JXG$1.removeEvent(this.containerObj,"contextmenu",this.suppressDefault,this),this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),this.removeResizeEventHandlers()},addResizeEventHandlers:function(){if(this.resizeHandlers=[],JXG$1.isBrowser){try{this.startResizeObserver(),this.resizeHandlers.push("resizeobserver")}catch{JXG$1.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver(),this.resizeHandlers.push("resize")}JXG$1.addEvent(window,"scroll",this.scrollListener,this),this.resizeHandlers.push("scroll");try{window.matchMedia("print").addEventListener("change",this.printListenerMatch.bind(this)),window.matchMedia("screen").addEventListener("change",this.printListenerMatch.bind(this)),this.resizeHandlers.push("print")}catch(a){JXG$1.debug("Error adding printListener",a)}}},removeResizeEventHandlers:function(){var a,s;if(this.resizeHandlers.length>0&&JXG$1.isBrowser){for(a=0;a<this.resizeHandlers.length;a++)switch(s=this.resizeHandlers[a],s){case"resizeobserver":JXG$1.exists(this.resizeObserver)&&this.stopResizeObserver();break;case"resize":JXG$1.removeEvent(window,"resize",this.resizeListener,this),JXG$1.exists(this.intersectionObserver)&&this.stopIntersectionObserver();break;case"scroll":JXG$1.removeEvent(window,"scroll",this.scrollListener,this);break;case"print":window.matchMedia("print").removeEventListener("change",this.printListenerMatch.bind(this),!1),window.matchMedia("screen").removeEventListener("change",this.printListenerMatch.bind(this),!1);break}this.resizeHandlers=[]}},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&JXG$1.isBrowser){var a=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(JXG$1.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),JXG$1.addEvent(a,"MSPointerMove",this.pointerMoveListener,this)):(JXG$1.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),JXG$1.addEvent(a,"pointermove",this.pointerMoveListener,this),JXG$1.addEvent(a,"pointerleave",this.pointerLeaveListener,this),JXG$1.addEvent(a,"click",this.pointerClickListener,this),JXG$1.addEvent(a,"dblclick",this.pointerDblClickListener,this)),this.containerObj!==null&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&JXG$1.isBrowser){var a=this.attr.movetarget||this.containerObj;JXG$1.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),JXG$1.addEvent(a,"mousemove",this.mouseMoveListener,this),JXG$1.addEvent(a,"click",this.mouseClickListener,this),JXG$1.addEvent(a,"dblclick",this.mouseDblClickListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(a){if(!this.hasTouchHandlers&&JXG$1.isBrowser){var s=this.attr.movetarget||this.containerObj;JXG$1.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),JXG$1.addEvent(s,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addWheelEventHandlers:function(){!this.hasWheelHandlers&&JXG$1.isBrowser&&(JXG$1.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),JXG$1.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasWheelHandlers=!0)},addFullscreenEventHandlers:function(){var a,s=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],o=s.length;if(!this.hasFullscreenEventHandlers&&JXG$1.isBrowser){for(a=0;a<o;a++)JXG$1.addEvent(this.document,s[a],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&JXG$1.isBrowser&&(JXG$1.addEvent(this.containerObj,"keydown",this.keyDownListener,this),JXG$1.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),JXG$1.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&JXG$1.isBrowser&&(JXG$1.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),JXG$1.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),JXG$1.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var a,s=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],o=s.length;if(this.hasFullscreenEventHandlers&&JXG$1.isBrowser){for(a=0;a<o;a++)JXG$1.removeEvent(this.document,s[a],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&JXG$1.isBrowser){var a=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(JXG$1.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),JXG$1.removeEvent(a,"MSPointerMove",this.pointerMoveListener,this)):(JXG$1.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),JXG$1.removeEvent(a,"pointermove",this.pointerMoveListener,this),JXG$1.removeEvent(a,"pointerleave",this.pointerLeaveListener,this),JXG$1.removeEvent(a,"click",this.pointerClickListener,this),JXG$1.removeEvent(a,"dblclick",this.pointerDblClickListener,this)),this.hasWheelHandlers&&(JXG$1.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),JXG$1.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasPointerUp&&(window.navigator.msPointerEnabled?JXG$1.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(JXG$1.removeEvent(this.document,"pointerup",this.pointerUpListener,this),JXG$1.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&JXG$1.isBrowser){var a=this.attr.movetarget||this.containerObj;JXG$1.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),JXG$1.removeEvent(a,"mousemove",this.mouseMoveListener,this),JXG$1.removeEvent(a,"click",this.mouseClickListener,this),JXG$1.removeEvent(a,"dblclick",this.mouseDblClickListener,this),this.hasMouseUp&&(JXG$1.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.hasWheelHandlers&&(JXG$1.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),JXG$1.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&JXG$1.isBrowser){var a=this.attr.movetarget||this.containerObj;JXG$1.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),JXG$1.removeEvent(a,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(JXG$1.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+this.canvasWidth*.1,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-this.canvasWidth*.1,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-this.canvasHeight*.1),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+this.canvasHeight*.1),this},gestureChangeListener:function(a){var s,o=[],c=[],h,d=10,b=!1,_=this.attr.zoom.factorx,$=this.attr.zoom.factory,j,Xt,Lt,fr,Jr,Js=!1,qs,zo,js,eu;return this.mode!==this.BOARD_MODE_ZOOM?!0:(a.preventDefault(),Xt=Geometry.distance([a.touches[0].clientX,a.touches[0].clientY],[a.touches[1].clientX,a.touches[1].clientY],2),a.scale===void 0&&(a.scale=Xt/this.prevDist),!JXG$1.exists(this.prevCoords)||(o=[a.touches[0].clientX-this.prevCoords[0][0],a.touches[0].clientY-this.prevCoords[0][1]],c=[a.touches[1].clientX-this.prevCoords[1][0],a.touches[1].clientY-this.prevCoords[1][1]],o[0]*o[0]+o[1]*o[1]<d*d&&c[0]*c[0]+c[1]*c[1]<d*d)||(h=Geometry.rad(o,[0,0],c),this.isPreviousGesture!=="pan"&&Math.abs(h)>Math.PI*.2&&Math.abs(h)<Math.PI*1.8&&(b=!0),this.isPreviousGesture!=="pan"&&!b&&(Math.abs(a.scale)<.77||Math.abs(a.scale)>1.3)&&(b=!0),j=a.scale/this.prevScale,this.prevScale=a.scale,this.prevCoords=[[a.touches[0].clientX,a.touches[0].clientY],[a.touches[1].clientX,a.touches[1].clientY]],s=new Coords(Const.COORDS_BY_SCREEN,this.getMousePosition(a,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!b?(this.isPreviousGesture="pan",this.moveOrigin(s.scrCoords[1],s.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(j-1)<.5&&(Js=!1,Jr=this.attr.zoom.center,(this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(qs=Math.abs(a.touches[0].clientX-a.touches[1].clientX),zo=Math.abs(a.touches[0].clientY-a.touches[1].clientY),Lt=Math.abs(Math.atan2(zo,qs)),fr=Math.PI*this.attr.zoom.pinchsensitivity/90),!this.keepaspectratio&&this.attr.zoom.pinchhorizontal&&Lt<fr?(this.attr.zoom.factorx=j,this.attr.zoom.factory=1,js=0,eu=0,Js=!0):!this.keepaspectratio&&this.attr.zoom.pinchvertical&&Math.abs(Lt-Math.PI*.5)<fr?(this.attr.zoom.factorx=1,this.attr.zoom.factory=j,js=0,eu=0,Js=!0):this.attr.zoom.pinch&&(this.attr.zoom.factorx=j,this.attr.zoom.factory=j,js=s.usrCoords[1],eu=s.usrCoords[2],Js=!0),Js&&(Jr==="board"?this.zoomIn():this.zoomIn(js,eu),this.attr.zoom.factorx=_,this.attr.zoom.factory=$))),!1)},gestureStartListener:function(a){var s;return a.preventDefault(),this.prevScale=1,this.prevDist=Geometry.distance([a.touches[0].clientX,a.touches[0].clientY],[a.touches[1].clientX,a.touches[1].clientY],2),this.prevCoords=[[a.touches[0].clientX,a.touches[0].clientY],[a.touches[1].clientX,a.touches[1].clientY]],this.isPreviousGesture="none",s=this.getMousePosition(a,0),this.initMoveOrigin(s[0],s[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(a,s){var o=this.attr[s];return o.enabled?!!((o.needshift&&a.shiftKey||!o.needshift&&!a.shiftKey)&&(o.needctrl&&a.ctrlKey||!o.needctrl&&!a.ctrlKey)):!1},_isPointerRegistered:function(a){var s,o=this._board_touches.length;for(s=0;s<o;s++)if(this._board_touches[s].pointerId===a.pointerId)return!0;return!1},_pointerStorePosition:function(a){var s,o;for(s=0,o=!1;s<this._board_touches.length;s++)if(this._board_touches[s].pointerId===a.pointerId){this._board_touches[s].clientX=a.clientX,this._board_touches[s].clientY=a.clientY,o=!0;break}return!o&&this._board_touches.length<2&&this._board_touches.push({pointerId:a.pointerId,clientX:a.clientX,clientY:a.clientY}),this},_pointerRemoveTouches:function(a){var s;for(s=0;s<this._board_touches.length;s++)if(this._board_touches[s].pointerId===a.pointerId){this._board_touches.splice(s,1);break}return this},_pointerClearTouches:function(a){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(a){if(JXG$1.isBrowser){if(a.pointerType==="touch"||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if(a.pointerType==="mouse")return"mouse";if(a.pointerType==="pen")return"pen"}return"mouse"},pointerDownListener:function(a,s,o){var c,h,d,b,_,$,j,Xt="mouse",Lt,fr,Jr;if(!s&&this._isPointerRegistered(a))return!1;if(JXG$1.evaluate(this.attr.movetarget)===null&&JXG$1.exists(a.target)&&JXG$1.exists(a.target.releasePointerCapture)&&a.target.releasePointerCapture(a.pointerId),!s&&a.isPrimary,this.hasPointerUp||(window.navigator.msPointerEnabled?JXG$1.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(JXG$1.addEvent(this.document,"pointerup",this.pointerUpListener,this),JXG$1.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&JXG$1.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&($=window.getSelection(),$.removeAllRanges))try{$.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(a),Xt=this._inputDevice,this.options.precision.hasPoint=this.options.precision[Xt],b=this.getMousePosition(a),this._testForSelection(a),this.selectingMode){this._startSelecting(b),this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[a]);return}if(this.attr.drag.enabled&&s?(_=[s],this.mode=this.BOARD_MODE_DRAG):_=this.initMoveObject(b[0],b[1],a,Xt),j={num:a.pointerId,X:b[0],Y:b[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},_.length>0){for(fr=_[_.length-1],Lt=!1,c=0;c<this.touches.length;c++)if(this.touches[c].obj===fr){h=c,d=this.touches[c].targets.push(j)-1,Lt=!0;break}Lt||(d=0,h=this.touches.push({obj:fr,targets:[j]})-1),this.dehighlightAll(),fr.highlight(!0),this.saveStartPos(fr,this.touches[h].targets[d]),a&&a.preventDefault&&!o&&a.preventDefault()}return this.touches.length>0&&!o&&(a.preventDefault(),a.stopPropagation()),JXG$1.isBrowser?(this._getPointerInputDevice(a)!=="touch"?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(a):(this._pointerStorePosition(a),a.touches=this._board_touches,a.touches.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(a)||a.touches.length===2&&(this.mode===this.BOARD_MODE_NONE||this.mode===this.BOARD_MODE_MOVE_ORIGIN)&&(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(a))),Jr="none",this.mode===this.BOARD_MODE_NONE&&(JXG$1.evaluate(this.attr.browserpan)===!0||JXG$1.evaluate(this.attr.browserpan.enabled)===!0)&&(JXG$1.evaluate(this.attr.pan.enabled)===!1||JXG$1.evaluate(this.attr.pan.needtwofingers)===!0)&&(Jr="auto"),this.containerObj.style.touchAction=Jr,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[a]),!0):!1},_handleClicks:function(a,s){var o=this,c,h,d;if(this.selectingMode){a.stopPropagation();return}if(h=JXG$1.evaluate(this.attr.clickdelay),d=JXG$1.evaluate(this.attr.dblclicksuppressclick),d)this._preventSingleClick=!1,this._singleClickTimer=setTimeout(function(){if(!o._preventSingleClick){o.triggerEventHandlers(s,[a]);for(c in o.clickObjects)o.clickObjects.hasOwnProperty(c)&&(o.clickObjects[c].triggerEventHandlers(s,[a]),delete o.clickObjects[c])}},h);else{o.triggerEventHandlers(s,[a]);for(c in o.clickObjects)o.clickObjects.hasOwnProperty(c)&&o.clickObjects[c].triggerEventHandlers(s,[a]);setTimeout(function(){for(c in o.clickObjects)o.clickObjects.hasOwnProperty(c)&&delete o.clickObjects[c]},h)}a.stopPropagation()},_handleDblClicks:function(a,s){var o;if(this.selectingMode){a.stopPropagation();return}this._preventSingleClick=!0,clearTimeout(this._singleClickTimer),this.triggerEventHandlers(s,[a]);for(o in this.clickObjects)this.clickObjects.hasOwnProperty(o)&&(this.clickObjects[o].triggerEventHandlers(s,[a]),delete this.clickObjects[o]);a.stopPropagation()},pointerClickListener:function(a){this._handleClicks(a,["click","pointerclick"])},pointerDblClickListener:function(a){this._handleDblClicks(a,["dblclick","pointerdblclick"])},mouseClickListener:function(a){this._handleClicks(a,["click","mouseclick"])},mouseDblClickListener:function(a){this._handleDblClicks(a,["dblclick","mousedblclick"])},pointerMoveListener:function(a){var s,o,c,h,d,b="mouse";if(this._getPointerInputDevice(a)==="touch"&&!this._isPointerRegistered(a))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(a))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(a.preventDefault(),a.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(a),b=this._inputDevice,this.options.precision.hasPoint=this.options.precision[b],h=this.options.precision.hasPoint*.3333,c=this.getMousePosition(a),JXG$1.evaluate(this.attr.movetarget)===null&&c[0]<=h||c[1]<=h||c[0]>=this.canvasWidth-h||c[1]>=this.canvasHeight-h)return this.mode===this.BOARD_MODE_NONE;if(this.selectingMode)this._moveSelecting(c),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[a,this.mode]);else if(!this.mouseOriginMove(a))if(this.mode===this.BOARD_MODE_DRAG){for(s=0;s<this.touches.length;s++)for(d=this.touches[s].targets,o=0;o<d.length;o++)if(d[o].num===a.pointerId){d[o].X=c[0],d[o].Y=c[1],d.length===1?this.moveObject(c[0],c[1],this.touches[s],a,b):d.length===2&&(this.twoFingerMove(this.touches[s],a.pointerId,a),d[o].Xprev=c[0],d[o].Yprev=c[1]);break}}else this._getPointerInputDevice(a)==="touch"&&(this._pointerStorePosition(a),this._board_touches.length===2&&(a.touches=this._board_touches,this.gestureChangeListener(a))),this.highlightElements(c[0],c[1],a,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[a,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(a){var s,o,c,h,d,b=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[a]),this.displayInfobox(!1),a){for(s=0;s<this.touches.length;s++)for(d=this.touches[s].targets,o=0;o<d.length;o++)if(d[o].num===a.pointerId){d.splice(o,1),d.length===0&&this.touches.splice(s,1);break}}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(a),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[a]),this.stopSelectionMode();else for(s=this.downObjects.length-1;s>-1;s--){for(c=!1,o=0;o<this.touches.length;o++)this.touches[o].obj.id===this.downObjects[s].id&&(c=!0);c||(this.downObjects[s].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[a]),JXG$1.exists(this.downObjects[s].coords)||(this.downObjects[s].snapToGrid(),this.downObjects[s].snapToPoints(),b=!0),h=this.downObjects[s].eventHandlers,(JXG$1.exists(h.click)&&h.click.length>0||JXG$1.exists(h.pointerclick)&&h.pointerclick.length>0||JXG$1.exists(h.dblclick)&&h.dblclick.length>0||JXG$1.exists(h.pointerdblclick)&&h.pointerdblclick.length>0)&&(this.clickObjects[this.downObjects[s].id]=this.downObjects[s]),this.downObjects.splice(s,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?JXG$1.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(JXG$1.removeEvent(this.document,"pointerup",this.pointerUpListener,this),JXG$1.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this._pointerClearTouches(a.pointerId),this._getPointerInputDevice(a)!=="touch"&&this.dehighlightAll(),b&&this.update(),!0},pointerLeaveListener:function(a){return this.displayInfobox(!1),this.dehighlightAll(),!0},touchStartListener:function(a){var s,o,c,h,d,b,_=this.options.precision.touch,$=a.touches,j,Xt,Lt,fr;for(this.hasTouchEnd||(JXG$1.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&JXG$1.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,s=0;s<$.length;s++)$[s].jxg_isused=!1;for(s=0;s<this.touches.length;s++)for(fr=this.touches[s].targets,o=0;o<fr.length;o++){fr[o].num=-1,_=this.options.precision.touch;do{for(c=0;c<$.length;c++)if(Math.abs(Math.pow($[c].screenX-fr[o].X,2)+Math.pow($[c].screenY-fr[o].Y,2))<_*_){fr[o].num=c,fr[o].X=$[c].screenX,fr[o].Y=$[c].screenY,$[c].jxg_isused=!0;break}_*=2}while(fr[o].num===-1&&_<this.options.precision.touchMax);fr[o].num===-1&&(JXG$1.debug("i couldn't find a targettouches for target no "+o+" on "+this.touches[s].obj.name+" ("+this.touches[s].obj.id+"). Removed the target."),JXG$1.debug("eps = "+_+", touchMax = "+Options$1.precision.touchMax),fr.splice(s,1))}for(s=0;s<$.length;s++)if(!$[s].jxg_isused){if(h=this.getMousePosition(a,s),this.selectingMode)return this._startSelecting(h),this.triggerEventHandlers(["touchstartselecting","startselecting"],[a]),a.preventDefault(),a.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(d=this.initMoveObject(h[0],h[1],a,"touch"),d.length!==0){if(b=d[d.length-1],Lt={num:s,X:$[s].screenX,Y:$[s].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},JXG$1.isPoint(b)||b.elementClass===Const.OBJECT_CLASS_TEXT||b.type===Const.OBJECT_TYPE_TICKS||b.type===Const.OBJECT_TYPE_IMAGE)Xt=[Lt],this.saveStartPos(b,Xt[0]),this.touches.push({obj:b,targets:Xt}),b.highlight(!0);else if(b.elementClass===Const.OBJECT_CLASS_LINE||b.elementClass===Const.OBJECT_CLASS_CIRCLE||b.elementClass===Const.OBJECT_CLASS_CURVE||b.type===Const.OBJECT_TYPE_POLYGON){for(j=!1,o=0;o<this.touches.length;o++)b.id===this.touches[o].obj.id&&(j=!0,this.touches[o].targets.length===1&&(this.saveStartPos(b,Lt),this.touches[o].targets.push(Lt)),$[s].jxg_isused=!0);j||(Xt=[Lt],this.saveStartPos(b,Xt[0]),this.touches.push({obj:b,targets:Xt}),b.highlight(!0))}}$[s].jxg_isused=!0}return this.touches.length>0&&(a.preventDefault(),a.stopPropagation()),$.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(a)||$.length===2&&(this.mode===this.BOARD_MODE_NONE||this.mode===this.BOARD_MODE_MOVE_ORIGIN)&&(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(a)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[a]),!1},touchMoveListener:function(a){var s,o,c,h,d=a.touches;if(!this.checkFrameRate(a))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(a.preventDefault(),a.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(s=0;s<d.length;s++)if(!d[s].jxg_isused){o=this.getMousePosition(a,s),this._moveSelecting(o),this.triggerEventHandlers(["touchmoves","moveselecting"],[a,this.mode]);break}}else if(!this.touchOriginMove(a))if(this.mode===this.BOARD_MODE_DRAG){for(s=0;s<this.touches.length;s++)if(h=this.touches[s].targets,h.length===1){if(d[h[0].num]){if(o=this.getMousePosition(a,h[0].num),o[0]<0||o[0]>this.canvasWidth||o[1]<0||o[1]>this.canvasHeight)return;h[0].X=o[0],h[0].Y=o[1],this.moveObject(o[0],o[1],this.touches[s],a,"touch")}}else if(h.length===2&&h[0].num>-1&&h[1].num>-1&&d[h[0].num]&&d[h[1].num]){if(o=this.getMousePosition(a,h[0].num),c=this.getMousePosition(a,h[1].num),o[0]<0||o[0]>this.canvasWidth||o[1]<0||o[1]>this.canvasHeight||c[0]<0||c[0]>this.canvasWidth||c[1]<0||c[1]>this.canvasHeight)return;h[0].X=o[0],h[0].Y=o[1],h[1].X=c[0],h[1].Y=c[1],this.twoFingerMove(this.touches[s],h[0].num,a),h[0].Xprev=o[0],h[0].Yprev=o[1],h[1].Xprev=c[0],h[1].Yprev=c[1]}}else d.length===2&&this.gestureChangeListener(a),o=this.getMousePosition(a,0),this.highlightElements(o[0],o[1],a,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[a,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(a){var s,o,c,h=this.options.precision.touch,d=[],b,_,$=a&&a.touches,j,Xt=!1;if(this.triggerEventHandlers(["touchend","up"],[a]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(a),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[a]),this.stopSelectionMode();else if($&&$.length>0){for(s=0;s<this.touches.length;s++)d[s]=this.touches[s];for(this.touches.length=0,s=0;s<$.length;s++)$[s].jxg_isused=!1;for(s=0;s<d.length;s++){for(b=!1,_=0,j=d[s].targets,o=0;o<j.length;o++)for(j[o].found=!1,c=0;c<$.length;c++)if(Math.abs(Math.pow($[c].screenX-j[o].X,2)+Math.pow($[c].screenY-j[o].Y,2))<h*h){j[o].found=!0,j[o].num=c,j[o].X=$[c].screenX,j[o].Y=$[c].screenY,_+=1;break}if(JXG$1.isPoint(d[s].obj)?b=j[0]&&j[0].found:d[s].obj.elementClass===Const.OBJECT_CLASS_LINE?b=j[0]&&j[0].found||j[1]&&j[1].found:d[s].obj.elementClass===Const.OBJECT_CLASS_CIRCLE&&(b=_===1||_===3),b)for(this.touches.push({obj:d[s].obj,targets:[]}),o=0;o<j.length;o++)j[o].found&&this.touches[this.touches.length-1].targets.push({num:j[o].num,X:j[o].screenX,Y:j[o].screenY,Xprev:NaN,Yprev:NaN,Xstart:j[o].Xstart,Ystart:j[o].Ystart,Zstart:j[o].Zstart});else d[s].obj.noHighlight()}}else this.touches.length=0;for(s=this.downObjects.length-1;s>-1;s--){for(b=!1,o=0;o<this.touches.length;o++)this.touches[o].obj.id===this.downObjects[s].id&&(b=!0);b||(this.downObjects[s].triggerEventHandlers(["touchup","up"],[a]),JXG$1.exists(this.downObjects[s].coords)||(this.downObjects[s].snapToGrid(),this.downObjects[s].snapToPoints(),Xt=!0),this.downObjects.splice(s,1))}return(!$||$.length===0)&&(this.hasTouchEnd&&(JXG$1.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),Xt&&this.update()),!0},mouseDownListener:function(a){var s,o,c;if(this.document.selection&&JXG$1.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)JXG$1.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0;else return;if(this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,s=this.getMousePosition(a),this._testForSelection(a),this.selectingMode){this._startSelecting(s),this.triggerEventHandlers(["mousestartselecting","startselecting"],[a]);return}return o=this.initMoveObject(s[0],s[1],a,"mouse"),o.length===0?(this.mode=this.BOARD_MODE_NONE,c=!0):(this.mouse={obj:null,targets:[{X:s[0],Y:s[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=o[o.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),a&&a.preventDefault?a.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(c=this.mouseOriginMoveStart(a)),this.triggerEventHandlers(["mousedown","down"],[a]),c},mouseMoveListener:function(a){var s;if(!this.checkFrameRate(a))return!1;s=this.getMousePosition(a),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(s),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[a,this.mode])):this.mouseOriginMove(a)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(s[0],s[1],this.mouse,a,"mouse"):this.highlightElements(s[0],s[1],a,-1),this.triggerEventHandlers(["mousemove","move"],[a,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(a){var s;if(this.selectingMode===!1&&this.triggerEventHandlers(["mouseup","up"],[a]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(JXG$1.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(a),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[a]),this.stopSelectionMode();else for(s=0;s<this.downObjects.length;s++)this.downObjects[s].triggerEventHandlers(["mouseup","up"],[a]);this.downObjects.length=0,this.hasMouseUp&&(JXG$1.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(a){var s,o,c;return!this.attr.zoom.enabled||!this.attr.zoom.wheel||!this._isRequiredKeyPressed(a,"zoom")?!0:(a=a||window.event,s=a.detail?-a.detail:a.wheelDelta/40,o=this.attr.zoom.center,o==="board"?c=[]:c=new Coords(Const.COORDS_BY_SCREEN,this.getMousePosition(a),this).usrCoords,s>0?this.zoomIn(c[1],c[2]):this.zoomOut(c[1],c[2]),this.triggerEventHandlers(["mousewheel"],[a]),a.preventDefault(),!1)},keyDownListener:function(a){var s=a.target.id,o,c,h,d,b=0,_=0,$=JXG$1.evaluate(this.attr.keyboard.dx)/this.unitX,j=JXG$1.evaluate(this.attr.keyboard.dy)/this.unitY,Xt=!1,Lt=!0,fr,Jr;return!this.attr.keyboard.enabled||s===""||(d=this.containerObj.shadowRoot||document,d.activeElement&&(c=d.activeElement,c.tagName==="INPUT"||c.tagName==="textarea"))?!1:(o=s.replace(this.containerObj.id+"_",""),c=this.select(o),JXG$1.exists(c.coords)&&(Jr=c.coords.usrCoords.slice(1)),JXG$1.evaluate(this.attr.keyboard.panshift)&&a.shiftKey||JXG$1.evaluate(this.attr.keyboard.panctrl)&&a.ctrlKey?(JXG$1.evaluate(this.attr.zoom.enabled)===!0&&(Xt=!0),a.keyCode===38?this.clickUpArrow():a.keyCode===40?this.clickDownArrow():a.keyCode===37?this.clickLeftArrow():a.keyCode===39?this.clickRightArrow():Xt&&a.keyCode===171?this.zoomIn():Xt&&a.keyCode===173?this.zoomOut():Xt&&a.keyCode===79?this.zoom100():Lt=!1):!a.shiftKey&&!a.ctrlKey&&(JXG$1.exists(c.visProp)&&(JXG$1.exists(c.visProp.snaptogrid)&&c.visProp.snaptogrid&&c.evalVisProp("snapsizex")&&c.evalVisProp("snapsizey")?(h=c.getSnapSizes(),b=h[0],_=h[1],$=b,j=_):JXG$1.exists(c.visProp.attracttogrid)&&c.visProp.attracttogrid&&c.evalVisProp("attractordistance")&&c.evalVisProp("attractorunit")&&(b=1.1*c.evalVisProp("attractordistance"),_=b,c.evalVisProp("attractorunit")==="screen"&&(b/=this.unitX,_/=this.unitX),$=Math.max(b,$),j=Math.max(_,j))),a.keyCode===38?fr=[0,j]:a.keyCode===40?fr=[0,-j]:a.keyCode===37?fr=[-$,0]:a.keyCode===39?fr=[$,0]:Lt=!1,fr&&c.isDraggable&&c.visPropCalc.visible&&(this.geonextCompatibilityMode&&(JXG$1.isPoint(c)||c.elementClass===Const.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!c.evalVisProp("fixed")&&(this.mode=this.BOARD_MODE_DRAG,JXG$1.exists(c.coords)&&(fr[0]+=Jr[0],fr[1]+=Jr[1]),JXG$1.exists(c.coords)?(c.setPosition(JXG$1.COORDS_BY_USER,fr),this.updateInfobox(c)):(this.displayInfobox(!1),c.setPositionDirectly(Const.COORDS_BY_USER,fr,[0,0])),this.triggerEventHandlers(["keymove","move"],[a,this.mode]),c.triggerEventHandlers(["keydrag","drag"],[a]),this.mode=this.BOARD_MODE_NONE)),this.update(),Lt&&JXG$1.exists(a.preventDefault)&&a.preventDefault(),Lt)},keyFocusInListener:function(a){var s=a.target.id,o,c;if(!this.attr.keyboard.enabled||s==="")return!1;o=s.replace(this.containerObj.id+"_",""),c=this.select(o),JXG$1.exists(c.highlight)&&(c.highlight(!0),this.focusObjects=[o],c.triggerEventHandlers(["hit"],[a])),JXG$1.exists(c.coords)&&this.updateInfobox(c)},keyFocusOutListener:function(a){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(a,s){var o=a,c=s,h,d,b;return a===void 0&&(o=this.containerObj.offsetWidth,c=this.containerObj.offsetHeight),a===void 0&&window&&window.getComputedStyle&&(h=window.getComputedStyle(this.containerObj,null),d=parseFloat(h.getPropertyValue("border-left-width"))+parseFloat(h.getPropertyValue("border-right-width")),isNaN(d)||(o-=d),b=parseFloat(h.getPropertyValue("border-top-width"))+parseFloat(h.getPropertyValue("border-bottom-width")),isNaN(b)||(c-=b)),o<=0||c<=0||isNaN(o)||isNaN(c)?this:(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),JXG$1.exists(this._prevDim)&&this._prevDim.w===o&&this._prevDim.h===c?this:(this.resizeContainer(o,c,!0),this._prevDim={w:o,h:c},this))},startResizeObserver:function(){var a=this;!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled||(this.resizeObserver=new ResizeObserver(function(s){var o;a._isResizing||(a._isResizing=!0,o=s[0].contentRect,window.setTimeout(function(){try{a.updateContainerDims(o.width,o.height)}catch(c){JXG$1.debug(c),a.stopResizeObserver()}finally{a._isResizing=!1}},a.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled||JXG$1.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var a=this;!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled||!this._isScrolling&&!this._isResizing&&(this._isResizing=!0,window.setTimeout(function(){a.updateContainerDims(),a._isResizing=!1},this.attr.resize.throttle))},scrollListener:function(a){var s=this;JXG$1.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){s._isScrolling=!1},66)))},startIntersectionObserver:function(){var a=this,s={root:null,rootMargin:"0px",threshold:.8};try{this.intersectionObserver=new IntersectionObserver(function(o){isNaN(a.getBoundingBox()[0])&&a.updateContainerDims()},s),this.intersectionObserver.observe(a.containerObj)}catch{JXG$1.debug("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){JXG$1.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},printListener:function(a){this.updateContainerDims()},printListenerMatch:function(a){a.matches&&this.printListener()},initInfobox:function(a){var s=JXG$1.copyAttributes(a,this.options,"infobox");return s.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],s),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(a){var s,o,c,h,d,b,_,$=a.evalVisProp("showinfobox");return!JXG$1.evaluate(this.attr.showinfobox)&&$==="inherit"||!$?this:(JXG$1.isPoint(a)&&(c=a.coords.usrCoords[1],h=a.coords.usrCoords[2],b=this.infobox.evalVisProp("distancex"),_=this.infobox.evalVisProp("distancey"),this.infobox.setCoords(c+b/this.unitX,h+_/this.unitY),d=a.evalVisProp("infoboxdigits"),typeof a.infoboxText!="string"?(d==="auto"?this.infobox.useLocale()?(s=this.infobox.formatNumberLocale(c),o=this.infobox.formatNumberLocale(h)):(s=JXG$1.autoDigits(c),o=JXG$1.autoDigits(h)):JXG$1.isNumber(d)?this.infobox.useLocale()?(s=this.infobox.formatNumberLocale(c,d),o=this.infobox.formatNumberLocale(h,d)):(s=JXG$1.toFixed(c,d),o=JXG$1.toFixed(h,d)):(s=c,o=h),this.highlightInfobox(s,o,a)):this.highlightCustomInfobox(a.infoboxText,a),this.displayInfobox(!0)),this)},displayInfobox:function(a){return!a&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===Const.OBJECT_CLASS_POINT?this:(this.infobox.hiddenByParent===a&&(this.infobox.hiddenByParent=!a,this.infobox.prepareUpdate().updateVisibility(a).updateRenderer()),this)},showInfobox:function(a){return this.displayInfobox(a)},highlightInfobox:function(a,s,o){return this.highlightCustomInfobox("("+a+", "+s+")",o),this},highlightCustomInfobox:function(a,s){return this.infobox.setText(a),this},dehighlightAll:function(){var a,s,o={},c=!1;for(a in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(a)&&(s=this.highlightedObjects[a],this.focusObjects.indexOf(a)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&s.noHighlight(),c=!0):o[a]=s);return this.highlightedObjects=o,this.renderer.type==="canvas"&&c&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(a,s){return[a,s]},getUsrCoordsOfMouse:function(a){var s=this.getCoordsTopLeftCorner(),o=JXG$1.getPosition(a,null,this.document),c=o[0]-s[0],h=o[1]-s[1],d=new Coords(Const.COORDS_BY_SCREEN,[c,h],this);return d.usrCoords.slice(1)},getAllUnderMouse:function(a){var s=this.getAllObjectsUnderMouse(a);return s.push(this.getUsrCoordsOfMouse(a)),s},getAllObjectsUnderMouse:function(a){var s=this.getCoordsTopLeftCorner(),o=JXG$1.getPosition(a,null,this.document),c=o[0]-s[0],h=o[1]-s[1],d=[],b,_,$=this.objectsList.length;for(b=0;b<$;b++)_=this.objectsList[b],_.visPropCalc.visible&&_.hasPoint&&_.hasPoint(c,h)&&(d[d.length]=_);return d},updateCoords:function(){var a,s,o=this.objectsList.length;for(s=0;s<o;s++)a=this.objectsList[s],JXG$1.exists(a.coords)&&(a.evalVisProp("frozen")===!0?a.is3D?a.element2D.coords.screen2usr():a.coords.screen2usr():a.is3D?a.element2D.coords.usr2screen():(a.coords.usr2screen(),JXG$1.exists(a.actualCoords)&&a.actualCoords.usr2screen()));return this},moveOrigin:function(a,s,o){var c,h,d,b;return JXG$1.exists(a)&&JXG$1.exists(s)&&(c=this.origin.scrCoords[1],h=this.origin.scrCoords[2],this.origin.scrCoords[1]=a,this.origin.scrCoords[2]=s,o&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),d=new Coords(Const.COORDS_BY_SCREEN,[0,0],this).usrCoords,b=new Coords(Const.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(d[1]<this.maxboundingbox[0]-Mat.eps||d[2]>this.maxboundingbox[1]+Mat.eps||b[1]>this.maxboundingbox[2]+Mat.eps||b[2]<this.maxboundingbox[3]-Mat.eps)&&(this.origin.scrCoords[1]=c,this.origin.scrCoords[2]=h)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(a){var s,o,c,h,d,b,_,$=[],j=a.indexOf("<data>"),Xt=a.indexOf("</data>"),Lt=function(zo,js,eu,Oo){return function(){var tu,Bo;tu=zo.select(js.id),Bo=tu.coords.usrCoords[Oo],Oo===2?tu.setPositionDirectly(Const.COORDS_BY_USER,[eu(),Bo]):tu.setPositionDirectly(Const.COORDS_BY_USER,[Bo,eu()]),tu.prepareUpdate().update()}},fr=function(zo,js,eu){return function(){var Oo,tu;Oo=zo.select(js.id),tu=eu(),Oo.setAttribute({visible:tu})}},Jr=function(zo,js,eu,Oo){return function(){var tu,Bo;tu=zo.select(js.id),Bo=eu(),Oo==="strokewidth"?tu.visProp.strokewidth=Bo:(Bo=JXG$1.rgba2rgbo(Bo),tu.visProp[Oo+"color"]=Bo[0],tu.visProp[Oo+"opacity"]=Bo[1])}},Js=function(zo,js,eu){return function(){var Oo=zo.select(js.id);Oo.position=eu()}},qs=function(zo,js,eu){return function(){var Oo=zo.select(js.id);Oo.setStyle(eu())}};if(!(j<0)){for(;j>=0;){if(s=a.slice(j+6,Xt),o=s.indexOf("="),c=s.slice(0,o),h=s.slice(o+1),o=c.indexOf("."),d=c.slice(0,o),b=this.elementsByName[JXG$1.unescapeHTML(d)],_=c.slice(o+1).replace(/\s+/g,"").toLowerCase(),h=JXG$1.createFunction(h,this,"",!0),!JXG$1.exists(this.elementsByName[d]))JXG$1.debug("debug conditions: |"+d+"| undefined");else switch(_){case"x":$.push(Lt(this,b,h,2));break;case"y":$.push(Lt(this,b,h,1));break;case"visible":$.push(fr(this,b,h));break;case"position":$.push(Js(this,b,h));break;case"stroke":$.push(Jr(this,b,h,"stroke"));break;case"style":$.push(qs(this,b,h));break;case"strokewidth":$.push(Jr(this,b,h,"strokewidth"));break;case"fill":$.push(Jr(this,b,h,"fill"));break;case"label":break;default:JXG$1.debug('property "'+_+'" in conditions not yet implemented:'+h);break}a=a.slice(Xt+7),j=a.indexOf("<data>"),Xt=a.indexOf("</data>")}this.updateConditions=function(){var zo;for(zo=0;zo<$.length;zo++)$[zo]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var a,s,o=this.getBoundingBox(),c=JXG$1.evaluate(this.options.grid.majorStep),h=JXG$1.evaluate(this.options.grid.gridX),d=JXG$1.evaluate(this.options.grid.gridY),b,_;for(JXG$1.isArray(c)||(c=[c,c]),c.length<2&&(c=[c[0],c[0]]),JXG$1.exists(h)&&(c[0]=h),JXG$1.exists(d)&&(c[1]=d),c[0]==="auto"?c[0]=1:c[0]=JXG$1.parseNumber(c[0],Math.abs(o[1]-o[3]),1/this.unitX),c[1]==="auto"?c[1]=1:c[1]=JXG$1.parseNumber(c[1],Math.abs(o[0]-o[2]),1/this.unitY),a=new Coords(Const.COORDS_BY_USER,[0,0],this),s=new Coords(Const.COORDS_BY_USER,[c[0],c[1]],this),b=a.scrCoords[1]-s.scrCoords[1],_=a.scrCoords[2]-s.scrCoords[2],this.options.grid.snapSizeX=c[0];Math.abs(b)>25;)this.options.grid.snapSizeX*=2,b/=2;for(this.options.grid.snapSizeY=c[1];Math.abs(_)>25;)this.options.grid.snapSizeY*=2,_/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(a,s){var o=this.getBoundingBox(),c=JXG$1.evaluate(this.attr.zoom.factorx),h=JXG$1.evaluate(this.attr.zoom.factory),d=(o[2]-o[0])*(1-1/c),b=(o[1]-o[3])*(1-1/h),_=.5,$=.5,j=JXG$1.evaluate(this.attr.zoom.max),Xt=JXG$1.evaluate(this.attr.zoom.eps)||JXG$1.evaluate(this.attr.zoom.min)||.001;return this.zoomX>j&&c>1||this.zoomY>j&&h>1||this.zoomX<Xt&&c<1||this.zoomY<Xt&&h<1?this:(JXG$1.isNumber(a)&&JXG$1.isNumber(s)&&(_=(a-o[0])/(o[2]-o[0]),$=(o[1]-s)/(o[1]-o[3])),this.setBoundingBox([o[0]+d*_,o[1]-b*$,o[2]-d*(1-_),o[3]+b*(1-$)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(a,s){var o=this.getBoundingBox(),c=JXG$1.evaluate(this.attr.zoom.factorx),h=JXG$1.evaluate(this.attr.zoom.factory),d=(o[2]-o[0])*(1-c),b=(o[1]-o[3])*(1-h),_=.5,$=.5,j=JXG$1.evaluate(this.attr.zoom.eps)||JXG$1.evaluate(this.attr.zoom.min)||.001;return this.zoomX<j||this.zoomY<j?this:(JXG$1.isNumber(a)&&JXG$1.isNumber(s)&&(_=(a-o[0])/(o[2]-o[0]),$=(o[1]-s)/(o[1]-o[3])),this.setBoundingBox([o[0]+d*_,o[1]-b*$,o[2]-d*(1-_),o[3]+b*(1-$)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var a,s,o;return JXG$1.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(a=this.getBoundingBox(),s=(a[2]-a[0])*(1-this.zoomX)*.5,o=(a[1]-a[3])*(1-this.zoomY)*.5,this.setBoundingBox([a[0]+s,a[1]-o,a[2]-s,a[3]+o],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var a,s,o,c,h,d=0,b=0,_=0,$=0,j=this.objectsList.length;for(a=0;a<j;a++)h=this.objectsList[a],JXG$1.isPoint(h)&&h.visPropCalc.visible&&(h.coords.usrCoords[1]<d?d=h.coords.usrCoords[1]:h.coords.usrCoords[1]>b&&(b=h.coords.usrCoords[1]),h.coords.usrCoords[2]>$?$=h.coords.usrCoords[2]:h.coords.usrCoords[2]<_&&(_=h.coords.usrCoords[2]));return s=50,o=s/this.unitX,c=s/this.unitY,this.setBoundingBox([d-o,$+c,b+o,_-c],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(a){var s,o,c,h=[1/0,-1/0,-1/0,1/0],d,b,_,$,j;if(!JXG$1.isArray(a)||a.length===0)return this;for(s=0;s<a.length;s++)o=this.select(a[s]),c=o.bounds(),JXG$1.isArray(c)&&(c[0]<h[0]&&(h[0]=c[0]),c[1]>h[1]&&(h[1]=c[1]),c[2]>h[2]&&(h[2]=c[2]),c[3]<h[3]&&(h[3]=c[3]));return JXG$1.isArray(h)&&(d=.5*(h[0]+h[2]),b=.5*(h[1]+h[3]),_=1.5*(h[2]-h[0])*.5,$=1.5*(h[1]-h[3])*.5,j=Math.max(_,$),this.setBoundingBox([d-j,b+j,d+j,b-j],this.keepaspectratio,"update")),this},setZoom:function(a,s){var o=this.attr.zoom.factorx,c=this.attr.zoom.factory;return this.attr.zoom.factorx=a/this.zoomX,this.attr.zoom.factory=s/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=o,this.attr.zoom.factory=c,this},_removeObj:function(a,s){var o,c;if(JXG$1.isArray(a)){for(c=0;c<a.length;c++)this._removeObj(a[c],s);return this}if(a=this.select(a),!JXG$1.exists(a)||JXG$1.isString(a))return this;try{for(o in a.childElements)a.childElements.hasOwnProperty(o)&&a.childElements[o].board._removeObj(a.childElements[o]);for(o in a.objects)a.objects.hasOwnProperty(o)&&a.objects[o].board._removeObj(a.objects[o]);if(s)for(o in this.objects)this.objects.hasOwnProperty(o)&&JXG$1.exists(this.objects[o].childElements)&&JXG$1.exists(this.objects[o].childElements.hasOwnProperty(a.id))&&(delete this.objects[o].childElements[a.id],delete this.objects[o].descendants[a.id]);else if(JXG$1.exists(a.ancestors))for(o in a.ancestors)a.ancestors.hasOwnProperty(o)&&JXG$1.exists(a.ancestors[o].childElements)&&JXG$1.exists(a.ancestors[o].childElements.hasOwnProperty(a.id))&&(delete a.ancestors[o].childElements[a.id],delete a.ancestors[o].descendants[a.id]);if(a._pos>-1)for(this.objectsList.splice(a._pos,1),c=a._pos;c<this.objectsList.length;c++)this.objectsList[c]._pos--;else a.type!==Const.OBJECT_TYPE_TURTLE&&JXG$1.debug("Board.removeObject: object "+a.id+" not found in list.");delete this.objects[a.id],delete this.elementsByName[a.name],a.visProp&&a.evalVisProp("trace")&&a.clearTrace(),JXG$1.exists(a.remove)&&a.remove()}catch(h){JXG$1.debug(a.id+": Could not be removed: "+h)}return this},removeObject:function(a,s){var o;if(this.renderer.suspendRedraw(this),JXG$1.isArray(a))for(o=0;o<a.length;o++)this._removeObj(a[o],s);else this._removeObj(a,s);return this.renderer.unsuspendRedraw(),this.update(),this},removeAncestors:function(a){var s;for(s in a.ancestors)a.ancestors.hasOwnProperty(s)&&this.removeAncestors(a.ancestors[s]);return this.removeObject(a),this},initGeonextBoard:function(){var a,s,o;return a=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),s=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),o=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[a,s],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[a,o],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(a,s,o,c){var h,d,b,_,$;return d=this.canvasWidth,b=this.canvasHeight,c||(h=this.getBoundingBox()),this.canvasWidth=parseFloat(a),this.canvasHeight=parseFloat(s),o||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),c?(_=(this.canvasWidth-d)*.5,$=(this.canvasHeight-b)*.5,this.moveOrigin(this.origin.scrCoords[1]+_,this.origin.scrCoords[2]+$)):this.setBoundingBox(h,this.keepaspectratio,"keep"),this},showDependencies:function(){var a,s,o,c,h;s=`<p>
`;for(a in this.objects)if(this.objects.hasOwnProperty(a)){h=0;for(o in this.objects[a].childElements)this.objects[a].childElements.hasOwnProperty(o)&&(h+=1);h>=0&&(s+="<strong>"+this.objects[a].id+":</strong> ");for(o in this.objects[a].childElements)this.objects[a].childElements.hasOwnProperty(o)&&(s+=this.objects[a].childElements[o].id+"("+this.objects[a].childElements[o].name+"), ");s+=`<p>
`}return s+=`</p>
`,c=window.open(),c.document.open(),c.document.write(s),c.document.close(),this},showXML:function(){var a=window.open("");return a.document.open(),a.document.write("<pre>"+JXG$1.escapeHTML(this.xmlString)+"</pre>"),a.document.close(),this},prepareUpdate:function(a){var s,o,c,h=this.objectsList.length;for(s=0;s<h;s++)if(c=this.objectsList[s],this._change3DView||JXG$1.exists(a)&&a.elType==="view3d_slider"){if(c.needsUpdate=c.visProp.element3d||c.elType==="view3d"||c.elType==="view3d_slider"||this.needsFullUpdate,c.visProp.element3d&&c.visProp.element3d.type===Const.OBJECT_TYPE_SPHERE3D)for(o=0;o<c.parents.length;o++)this.objects[c.parents[o]].needsUpdate=!0}else c.needsUpdate=c.needsRegularUpdate||this.needsFullUpdate;for(s in this.groups)this.groups.hasOwnProperty(s)&&(c=this.groups[s],c.needsUpdate=c.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(a){var s,o;for(a=this.select(a),s=0;s<this.objectsList.length;s++)o=this.objectsList[s],this.needsFullUpdate&&o.elementClass===Const.OBJECT_CLASS_TEXT&&o.updateSize(),o.update(!JXG$1.exists(a)||o.id!==a.id).updateVisibility();for(s in this.groups)this.groups.hasOwnProperty(s)&&this.groups[s].update(a);return this},updateRenderer:function(){var a,s=this.objectsList.length,o=[],c,h;if(this.renderer){if(this.renderer.type==="canvas")this.updateRendererCanvas();else{for(a=0;a<s;a++)this.objectsList[a].visProp.islabel&&this.objectsList[a].visProp.autoposition?o.push(a):this.objectsList[a].updateRenderer();for(c=o.length;c!==0;)h=Math.floor(Math.random()*c),c--,[o[c],o[h]]=[o[h],o[c]];for(a=0;a<o.length;a++)this.objectsList[o[a]].updateRenderer()}return this}},updateRendererCanvas:function(){var a,s,o=this.objectsList.length,c=[],h,d=function(b,_){return b.visProp.layer!==_.visProp.layer?b.visProp.layer-_.visProp.layer:c.indexOf(b.visProp.layer)===-1||!b.visProp.element3d&&!_.visProp.element3d?b._pos-_._pos:b.visProp.element3d&&!_.visProp.element3d?-1:_.visProp.element3d&&!b.visProp.element3d?1:b.visProp.element3d.zIndex-_.visProp.element3d.zIndex};for(a=0;a<o;a++)if(s=this.objectsList[a],s.elType==="view3d"&&s.evalVisProp("depthorder.enabled")){c=s.evalVisProp("depthorder.layers"),s.updateRenderer();break}for(h=this.objectsList.toSorted(d),o=h.length,a=0;a<o;a++)h[a].prepareUpdate().updateRenderer();return this},addHook:function(a,s,o){return JXG$1.deprecated("Board.addHook()","Board.on()"),s=JXG$1.def(s,"update"),o=JXG$1.def(o,this),this.hooks.push([s,a]),this.on(s,a,o),this.hooks.length-1},addEvent:JXG$1.shortcut(JXG$1.Board.prototype,"on"),removeHook:function(a){return JXG$1.deprecated("Board.removeHook()","Board.off()"),this.hooks[a]&&(this.off(this.hooks[a][0],this.hooks[a][1]),this.hooks[a]=null),this},removeEvent:JXG$1.shortcut(JXG$1.Board.prototype,"off"),updateHooks:function(a){var s=Array.prototype.slice.call(arguments,0);return JXG$1.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),s[0]=JXG$1.def(s[0],"update"),this.triggerEventHandlers([s[0]],arguments),this},addChild:function(a){return JXG$1.exists(a)&&JXG$1.exists(a.containerObj)&&(this.dependentBoards.push(a),this.update()),this},removeChild:function(a){var s;for(s=this.dependentBoards.length-1;s>=0;s--)this.dependentBoards[s]===a&&this.dependentBoards.splice(s,1);return this},update:function(a){var s,o,c,h,d;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,this.attr.minimizereflow==="all"&&this.containerObj&&this.renderer.type!=="vml"&&(d=this.document.activeElement,h=this.renderer.removeToInsertLater(this.containerObj)),this.attr.minimizereflow==="svg"&&this.renderer.type==="svg"&&(d=this.document.activeElement,h=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate(a).updateElements(a).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),h&&(h(),d.focus()),o=this.dependentBoards.length,s=0;s<o;s++)c=this.dependentBoards[s],JXG$1.exists(c)&&c!==this&&(c.updateQuality=this.updateQuality,c.prepareUpdate().updateElements().updateConditions(),c.renderer.suspendRedraw(this),c.updateRenderer(),c.renderer.unsuspendRedraw(),c.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var a;for(a=0;a<this.grids.length;a++)this.removeObject(this.grids[a]);return this.grids.length=0,this.update(),this},create:function(a,s,o){var c,h;for(a=a.toLowerCase(),JXG$1.exists(s)||(s=[]),JXG$1.exists(o)||(o={}),h=0;h<s.length;h++)JXG$1.isString(s[h])&&!(a==="text"&&h===2)&&!(a==="solidofrevolution3d"&&h===2)&&!(a==="text3d"&&(h===2||h===4))&&!((a==="input"||a==="checkbox"||a==="button")&&(h===2||h===3))&&a!=="curve"&&a!=="functiongraph"&&a!=="implicitcurve"&&(h>0&&s[0].elType==="view3d"?s[h]=s[0].select(s[h]):s[h]=this.select(s[h]));if(JXG$1.isFunction(JXG$1.elements[a]))c=JXG$1.elements[a](this,s,o);else throw new Error("JSXGraph: create: Unknown element type given: "+a);return JXG$1.exists(c)?(c.prepareUpdate&&c.update&&c.updateRenderer&&c.fullUpdate(),c):(JXG$1.debug("JSXGraph: create: failure creating "+a),c)},createElement:function(){return JXG$1.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var a;for(a=0;a<this.objectsList.length;a++)this.objectsList[a].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(a,s,o){var c,h,d,b,_=0,$=0,j=1,Xt,Lt,fr,Jr,Js,qs=JXG$1.getDimensions(this.containerObj,this.document);return JXG$1.isArray(a)?a[0]<this.maxboundingbox[0]-Mat.eps||a[1]>this.maxboundingbox[1]+Mat.eps||a[2]>this.maxboundingbox[2]+Mat.eps||a[3]<this.maxboundingbox[3]-Mat.eps?this:(JXG$1.exists(o)||(o="reset"),d=this.unitX,b=this.unitY,this.canvasWidth=parseFloat(qs.width),this.canvasHeight=parseFloat(qs.height),h=this.canvasWidth,c=this.canvasHeight,s?(this.keepaspectratio?(Xt=d/b,isNaN(Xt)&&(Xt=1)):Xt=1,o==="keep"&&(j=this.zoomX/this.zoomY),Lt=a[2]-a[0],fr=a[1]-a[3],Jr=d*Lt,Js=b*fr,h>=c?Jr>=Js?(this.unitY=c/fr,this.unitX=this.unitY*Xt):(this.unitY=c/Math.abs(Lt)*Mat.sign(fr)/j,this.unitX=this.unitY*Xt):Js>Jr?(this.unitX=h/Lt,this.unitY=this.unitX/Xt):(this.unitX=h/Math.abs(fr)*Mat.sign(Lt)*j,this.unitY=this.unitX/Xt),_=(h/this.unitX-Lt)*.5,$=(c/this.unitY-fr)*.5,this.keepaspectratio=!0):(this.unitX=h/(a[2]-a[0]),this.unitY=c/(a[1]-a[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(a[0]-_),this.unitY*(a[1]+$)),o==="update"?(this.zoomX*=this.unitX/d,this.zoomY*=this.unitY/b):o==="reset"&&(this.zoomX=JXG$1.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=JXG$1.exists(this.attr.zoomy)?this.attr.zoomy:1),this):this},getBoundingBox:function(){var a=new Coords(Const.COORDS_BY_SCREEN,[0,0],this).usrCoords,s=new Coords(Const.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[a[1],a[2],s[1],s[2]]},_set:function(a,s){a=a.toLocaleLowerCase(),s!==null&&JXG$1.isObject(s)&&!JXG$1.exists(s.id)&&!JXG$1.exists(s.name)?JXG$1.mergeAttr(this.attr[a],s):this.attr[a]=s},setAttribute:function(a){var s,o,c,h,d,b,_,$={};for(s=0;s<arguments.length;s++)o=arguments[s],JXG$1.isString(o)?(c=o.split(":"),$[JXG$1.trim(c[0])]=JXG$1.trim(c[1])):JXG$1.isArray(o)?$[o[0]]=o[1]:JXG$1.extend($,o);for(s in $)if($.hasOwnProperty(s)&&(h=s.replace(/\s+/g,"").toLowerCase(),d=$[s]),d=d.toLowerCase&&d.toLowerCase()==="false"?!1:d,b=this.attr[h],b!==d)switch(h){case"axis":d===!1&&JXG$1.exists(this.defaultAxes)&&(this.defaultAxes.x.setAttribute({visible:!1}),this.defaultAxes.y.setAttribute({visible:!1}));break;case"boundingbox":this.setBoundingBox(d,this.keepaspectratio),this._set(h,d);break;case"defaultaxes":JXG$1.exists(this.defaultAxes.x)&&JXG$1.exists(d.x)&&this.defaultAxes.x.setAttribute(d.x),JXG$1.exists(this.defaultAxes.y)&&JXG$1.exists(d.y)&&this.defaultAxes.y.setAttribute(d.y);break;case"title":this.document.getElementById(this.container+"_ARIAlabel").innerText=d,this._set(h,d);break;case"keepaspectratio":this._set(h,d),this.setBoundingBox(this.getBoundingBox(),d,"keep");break;case"document":case"maxboundingbox":this[h]=d,this._set(h,d);break;case"zoomx":case"zoomy":this[h]=d,this._set(h,d),this.setZoom(this.attr.zoomx,this.attr.zoomy);break;case"registerevents":case"renderer":break;case"fullscreen":case"screenshot":_=this.containerObj.ownerDocument.getElementById(this.container+"_navigation_"+h),_&&JXG$1.exists(d.symbol)&&(_.innerText=JXG$1.evaluate(d.symbol)),this._set(h,d);break;case"selection":d.visible=!1,d.withLines=!1,d.vertices={visible:!1},this._set(h,d);break;case"showcopyright":this.renderer.type==="svg"&&(_=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseText")),_?_.style.display=JXG$1.evaluate(d)?"inline":"none":JXG$1.evaluate(d)&&this.renderer.displayCopyright(Const.licenseText,parseInt(this.options.text.fontSize,10))),this._set(h,d);break;case"showlogo":this.renderer.type==="svg"&&(_=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseLogo")),_?_.style.display=JXG$1.evaluate(d)?"inline":"none":JXG$1.evaluate(d)&&this.renderer.displayLogo(Const.licenseLogo,parseInt(this.options.text.fontSize,10))),this._set(h,d);break;default:JXG$1.exists(this.attr[h])&&this._set(h,d);break}return this.containerObj.ownerDocument.getElementById(this.container+"_navigationbar").remove(),this.renderer.drawNavigationBar(this,this.attr.navbar),this.triggerEventHandlers(["attribute"],[$,this]),this.fullUpdate(),this},addAnimation:function(a){var s=this;return this.animationObjects[a.id]=a,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){s.animate()},a.board.attr.animationdelay)),this},stopAllAnimation:function(){var a;for(a in this.animationObjects)this.animationObjects.hasOwnProperty(a)&&JXG$1.exists(this.animationObjects[a])&&(this.animationObjects[a]=null,delete this.animationObjects[a]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var a,s,o,c,h,d,b,_,$=0,j=null;for(s in this.animationObjects)if(this.animationObjects.hasOwnProperty(s)&&JXG$1.exists(this.animationObjects[s])){if($+=1,o=this.animationObjects[s],o.animationPath&&(JXG$1.isFunction(o.animationPath)?c=o.animationPath(new Date().getTime()-o.animationStart):c=o.animationPath.pop(),!JXG$1.exists(c)||!JXG$1.isArray(c)&&isNaN(c)?delete o.animationPath:(o.setPositionDirectly(Const.COORDS_BY_USER,c),o.fullUpdate(),j=o)),o.animationData){b=0;for(h in o.animationData)o.animationData.hasOwnProperty(h)&&(d=o.animationData[h].pop(),JXG$1.exists(d)?(b+=1,a={},a[h]=d,o.setAttribute(a)):delete o.animationData[d]);b===0&&delete o.animationData}!JXG$1.exists(o.animationData)&&!JXG$1.exists(o.animationPath)&&(this.animationObjects[s]=null,delete this.animationObjects[s],JXG$1.exists(o.animationCallback)&&(_=o.animationCallback,o.animationCallback=null,_()))}return $===0?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(j),this},migratePoint:function(a,s,o){var c,h,d,b,_,$,j=!1;a=this.select(a),s=this.select(s),JXG$1.exists(a.label)&&($=a.label.id,j=!0,this.removeObject(a.label));for(h in a.childElements)if(a.childElements.hasOwnProperty(h)){c=a.childElements[h],b=!1;for(d in c)c.hasOwnProperty(d)&&c[d]===a&&(c[d]=s,b=!0);for(b&&delete a.childElements[h],_=0;_<c.parents.length;_++)c.parents[_]===a.id&&(c.parents[_]=s.id);s.addChild(c)}return o&&(j&&(delete s.childElements[$],delete s.descendants[$]),s.label&&this.removeObject(s.label),delete this.elementsByName[s.name],s.name=a.name,j&&s.createLabel()),this.removeObject(a),JXG$1.exists(s.name)&&s.name!==""&&(this.elementsByName[s.name]=s),this.fullUpdate(),this},emulateColorblindness:function(a){var s,o;if(JXG$1.exists(a)||(a="none"),this.currentCBDef===a)return this;for(s in this.objects)this.objects.hasOwnProperty(s)&&(o=this.objects[s],a!=="none"?(this.currentCBDef==="none"&&(o.visPropOriginal={strokecolor:o.visProp.strokecolor,fillcolor:o.visProp.fillcolor,highlightstrokecolor:o.visProp.highlightstrokecolor,highlightfillcolor:o.visProp.highlightfillcolor}),o.setAttribute({strokecolor:JXG$1.rgb2cb(o.eval(o.visPropOriginal.strokecolor),a),fillcolor:JXG$1.rgb2cb(o.eval(o.visPropOriginal.fillcolor),a),highlightstrokecolor:JXG$1.rgb2cb(o.eval(o.visPropOriginal.highlightstrokecolor),a),highlightfillcolor:JXG$1.rgb2cb(o.eval(o.visPropOriginal.highlightfillcolor),a)})):JXG$1.exists(o.visPropOriginal)&&JXG$1.extend(o.visProp,o.visPropOriginal));return this.currentCBDef=a,this.update(),this},select:function(a,s){var o,c,h,d,b=a;if(b===null)return b;if(JXG$1.isString(b)&&b!=="")JXG$1.exists(this.objects[b])?b=this.objects[b]:JXG$1.exists(this.elementsByName[b])?b=this.elementsByName[b]:JXG$1.exists(this.groups[b])&&(b=this.groups[b]);else if(!s&&(JXG$1.isFunction(b)||JXG$1.isObject(b)&&!JXG$1.isFunction(b.setAttribute))){for(o=JXG$1.filterElements(this.objectsList,b),c={},d=o.length,h=0;h<d;h++)c[o[h].id]=o[h];b=new Composition(c)}else JXG$1.isObject(b)&&JXG$1.exists(b.id)&&!JXG$1.exists(this.objects[b.id])&&(b=null);return b},hasPoint:function(a,s){var o=a,c=s,h=this.getBoundingBox();return JXG$1.exists(a)&&JXG$1.isArray(a.usrCoords)&&(o=a.usrCoords[1],c=a.usrCoords[2]),!!(JXG$1.isNumber(o)&&JXG$1.isNumber(c)&&h[0]<o&&o<h[2]&&h[1]>c&&c>h[3])},updateCSSTransforms:function(){var a=this.containerObj,s=a,o=a;if(this.cssTransMat=JXG$1.getCSSTransformMatrix(s),JXG$1.exists(s.getRootNode)){for(s=s.parentNode===s.getRootNode()?s.parentNode.host:s.parentNode;s;)this.cssTransMat=Mat.matMatMult(JXG$1.getCSSTransformMatrix(s),this.cssTransMat),s=s.parentNode===s.getRootNode()?s.parentNode.host:s.parentNode;this.cssTransMat=Mat.inverse(this.cssTransMat)}else{for(s=s.offsetParent;s;){for(this.cssTransMat=Mat.matMatMult(JXG$1.getCSSTransformMatrix(s),this.cssTransMat),o=o.parentNode;o!==s;)this.cssTransMat=Mat.matMatMult(JXG$1.getCSSTransformMatrix(s),this.cssTransMat),o=o.parentNode;s=s.offsetParent}this.cssTransMat=Mat.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(a){this.isSelecting=!0,this.selectingBox=[[a[0],a[1]],[a[0],a[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(a){this.isSelecting&&(this.selectingBox[1]=[a[0],a[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(a){var s=this.getMousePosition(a);this.isSelecting=!1,this.selectingBox[1]=[s[0],s[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var a=this.selectingBox[0],s=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[a[0],a[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[a[0],s[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[s[0],s[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[s[0],a[1]])},_testForSelection:function(a){this._isRequiredKeyPressed(a,"selection")&&(JXG$1.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(a){var s;return JXG$1.exists(this.selectionPolygon)||(s=JXG$1.copyAttributes(a,Options$1,"board","selection"),s.enabled===!0&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],s))),this},__evt__attribute:function(a){},__evt__down:function(a){},__evt__mousedown:function(a){},__evt__pendown:function(a){},__evt__pointerdown:function(a){},__evt__touchstart:function(a){},__evt__up:function(a){},__evt__mouseup:function(a){},__evt__pointerup:function(a){},__evt__touchend:function(a){},__evt__click:function(a){},__evt__dblclick:function(a){},__evt__mouseclick:function(a){},__evt__mousedblclick:function(a){},__evt__pointerclick:function(a){},__evt__pointerdblclick:function(a){},__evt__move:function(a,s){},__evt__mousemove:function(a,s){},__evt__penmove:function(a,s){},__evt__pointermove:function(a,s){},__evt__touchmove:function(a,s){},__evt__keymove:function(a,s){},__evt__hit:function(a,s,o){},__evt__mousehit:function(a,s,o){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(a){var s,o,c,h,d=this.document,b;return a=a||this.container,this._fullscreen_inner_id=a,c=d.getElementById(a),s="fullscreenwrap_"+a,JXG$1.exists(c._cssFullscreenStore)||(h=this.containerObj.getBoundingClientRect(),c._cssFullscreenStore={w:h.width,h:h.height}),d.getElementById(s)?o=d.getElementById(s):(o=document.createElement("div"),o.classList.add("JXG_wrap_private"),o.setAttribute("id",s),c.parentNode.insertBefore(o,c),o.appendChild(c)),o.requestFullscreen=o.requestFullscreen||o.webkitRequestFullscreen||o.mozRequestFullScreen||o.msRequestFullscreen,d.fullscreenElement!==void 0?b=d.fullscreenElement:d.webkitFullscreenElement!==void 0?b=d.webkitFullscreenElement:b=d.msFullscreenElement,b===null?o.requestFullscreen&&(o.requestFullscreen(),this.startFullscreenResizeObserver(o)):(this.stopFullscreenResizeObserver(o),JXG$1.exists(document.exitFullscreen)?document.exitFullscreen():JXG$1.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen()),this},fullscreenListener:function(a){var s,o,c,h=this.document;s=this._fullscreen_inner_id,JXG$1.exists(s)&&(h.fullscreenElement!==void 0?c=h.fullscreenElement:h.webkitFullscreenElement!==void 0?c=h.webkitFullscreenElement:c=h.msFullscreenElement,o=h.getElementById(s),c?(o._cssFullscreenStore.id=c.id,o._cssFullscreenStore.isFullscreen=!0,o._cssFullscreenStore.margin=o.style.margin,o._cssFullscreenStore.width=o.style.width,o._cssFullscreenStore.height=o.style.height,o._cssFullscreenStore.transform=o.style.transform,o.style.width=o._cssFullscreenStore.w+"px",o.style.height=o._cssFullscreenStore.h+"px",o.style.margin="",JXG$1.scaleJSXGraphDiv(c.id,s,h,JXG$1.evaluate(this.attr.fullscreen.scale)),c=null):JXG$1.exists(o._cssFullscreenStore)&&(o._cssFullscreenStore.isFullscreen=!1,o.style.margin=o._cssFullscreenStore.margin,o.style.width=o._cssFullscreenStore.width,o.style.height=o._cssFullscreenStore.height,o.style.transform=o._cssFullscreenStore.transform,o._cssFullscreenStore=null,o.parentElement.replaceWith(o)),this.updateCSSTransforms())},startFullscreenResizeObserver:function(a){var s=this;return!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled?this:(this.resizeObserver=new ResizeObserver(function(o){var c,h,d=s.document;s._isResizing||(s._isResizing=!0,window.setTimeout(function(){try{c=s._fullscreen_inner_id,d.fullscreenElement!==void 0?h=d.fullscreenElement:d.webkitFullscreenElement!==void 0?h=d.webkitFullscreenElement:h=d.msFullscreenElement,h!==null&&JXG$1.scaleJSXGraphDiv(h.id,c,d,JXG$1.evaluate(s.attr.fullscreen.scale))}catch{s.stopFullscreenResizeObserver(a)}finally{s._isResizing=!1}},s.attr.resize.throttle))}),this.resizeObserver.observe(a),this)},stopFullscreenResizeObserver:function(a){return!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled?this:(JXG$1.exists(this.resizeObserver)&&this.resizeObserver.unobserve(a),this)},addLogEntry:function(a,s,o){var c,h,d=this.userLog.length-1;return JXG$1.exists(s.elementClass)&&(h=s.id),JXG$1.evaluate(this.attr.logging.enabled)&&(c=new Date().getTime(),d>=0&&this.userLog[d].type===a&&this.userLog[d].id===h&&c-this.userLog[d].end<500?(this.userLog[d].end=c,this.userLog[d].endpos=o):this.userLog.push({type:a,id:h,start:c,startpos:o,end:c,endpos:o,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(a,s,o,c,h,d,b){var _=this,$=function(){var j=0,Xt=0,Lt=0,fr=o,Jr=Numerics.root(function(r1){var a1=a.X(fr),i1=a.Y(fr),s1=s.X(r1),c1=s.Y(r1);return(a1-s1)*(a1-s1)+(i1-c1)*(i1-c1)},[0,Math.PI*2]),Js=0,qs=0,zo,js=_.create("transform",[function(){return j}],{type:"rotate"}),eu=_.create("transform",[function(){return j},function(){return a.X(fr)},function(){return a.Y(fr)}],{type:"rotate"}),Oo=_.create("transform",[function(){return Xt},function(){return Lt}],{type:"translate"}),tu=function(r1,a1,i1){var s1=Numerics.D(r1.X)(a1),c1=Numerics.D(r1.Y)(a1),h1=Numerics.D(r1.X)(i1),m1=Numerics.D(r1.Y)(i1),l1=Numerics.D(r1.X)((a1+i1)*.5),f1=Numerics.D(r1.Y)((a1+i1)*.5),p1=Mat.hypot(s1,c1),d1=Mat.hypot(h1,m1),b1=Mat.hypot(l1,f1);return(p1+4*b1+d1)*(i1-a1)/6},Bo=function(r1){return zo-tu(s,Jr,r1)},vu=Math.PI/18,t1=vu*9,e1=null;return this.rolling=function(){var r1,a1,i1,s1,c1;Js=fr+h*c,zo=tu(a,fr,Js),qs=Numerics.root(Bo,Jr),r1=new Complex$2(a.X(Js),a.Y(Js)),a1=new Complex$2(s.X(qs),s.Y(qs)),i1=new Complex$2(Numerics.D(a.X)(Js),Numerics.D(a.Y)(Js)),s1=new Complex$2(Numerics.D(s.X)(qs),Numerics.D(s.Y)(qs)),c1=Complex$2.C.div(i1,s1),j=Math.atan2(c1.imaginary,c1.real),c1.div(Complex$2.C.abs(c1)),c1.mult(a1),Xt=r1.real-c1.real,Lt=r1.imaginary-c1.imaginary,j<-vu&&j>-t1?(j=-vu,eu.applyOnce(b)):j>vu&&j<t1?(j=vu,eu.applyOnce(b)):(js.applyOnce(b),Oo.applyOnce(b),fr=Js,Jr=qs),_.update()},this.start=function(){return d>0&&(e1=window.setInterval(this.rolling,d)),this},this.stop=function(){return window.clearInterval(e1),this},this};return new $}});const Board=JXG$1.Board;JXG$1.SVGRenderer=function(a,s){var o;for(this.type="svg",this.isIE=navigator.appVersion.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=a,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(s.width,s.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(c,h,d,b,_,$){var j=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter"),Xt,Lt,fr,Jr,Js;return j.setAttributeNS(null,"id",c),j.setAttributeNS(null,"width","300%"),j.setAttributeNS(null,"height","300%"),j.setAttributeNS(null,"filterUnits","userSpaceOnUse"),Xt=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset"),Xt.setAttributeNS(null,"in","SourceGraphic"),Xt.setAttributeNS(null,"result","offOut"),Xt.setAttributeNS(null,"dx",$[0]),Xt.setAttributeNS(null,"dy",$[1]),j.appendChild(Xt),Lt=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix"),Lt.setAttributeNS(null,"in","offOut"),Lt.setAttributeNS(null,"result","colorOut"),Lt.setAttributeNS(null,"type","matrix"),h==="none"||!JXG$1.isArray(h)||h.length<3?Lt.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+d+" 0"):(h[0]/=255,h[1]/=255,h[2]/=255,Js=b+" 0 0 0 "+h[0]+"  0 "+b+" 0 0 "+h[1]+"  0 0 "+b+" 0 "+h[2]+"  0 0 0 "+d+" 0",Lt.setAttributeNS(null,"values",Js)),j.appendChild(Lt),fr=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur"),fr.setAttributeNS(null,"in","colorOut"),fr.setAttributeNS(null,"result","blurOut"),fr.setAttributeNS(null,"stdDeviation",_),j.appendChild(fr),Jr=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend"),Jr.setAttributeNS(null,"in","SourceGraphic"),Jr.setAttributeNS(null,"in2","blurOut"),Jr.setAttributeNS(null,"mode","normal"),j.appendChild(Jr),j},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var c=Array.prototype.slice.call(arguments).join("");return JXG$1.exists(encodeURIComponent)&&(c=encodeURIComponent(c)),c},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],o=0;o<Options$1.layer.numlayers;o++)this.layer[o]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[o]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch{this.supportsForeignObject=!1}};JXG$1.SVGRenderer.prototype=new AbstractRenderer;JXG$1.extend(JXG$1.SVGRenderer.prototype,{_createArrowHead:function(a,s,o){var c,h,d=a.id+"Triangle",b,_;return JXG$1.exists(s)&&(d+=s),JXG$1.exists(o)&&(d+=o),c=this.createPrim("marker",d),c.setAttributeNS(null,"fill","context-stroke"),c.setAttributeNS(null,"stroke","context-stroke"),c.setAttributeNS(null,"stroke-width",0),c.setAttributeNS(null,"orient","auto"),c.setAttributeNS(null,"markerUnits","strokeWidth"),h=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),_=5,s==="Start"?(b=0,o===2?h.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):o===3?h.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):o===4?(_=3.31,h.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):o===5?(_=3.28,h.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):o===6?(_=2.84,h.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):o===7?(_=5.2,h.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):h.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),a.elementClass===Const.OBJECT_CLASS_LINE&&(o===2?b=4.9:o===3?b=3.3:o===4||o===5||o===6?b=6.66:o===7?b=0:b=10)):(b=10,o===2?h.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):o===3?(b=3.3,h.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):o===4?(_=3.31,h.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):o===5?(_=3.28,h.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):o===6?(_=2.84,h.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):o===7?(_=5.2,h.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):h.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),a.elementClass===Const.OBJECT_CLASS_LINE&&(o===2?b=5.1:o===3?b=.02:o===4||o===5||o===6?b=3.33:o===7?b=10:b=.05)),o===7&&(c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"stroke-width",1)),c.setAttributeNS(null,"refY",_),c.setAttributeNS(null,"refX",b),c.appendChild(h),c},_setArrowColor:function(a,s,o,c,h){a&&(JXG$1.isString(s)&&(h!==7?this._setAttribute(function(){a.setAttributeNS(null,"fill","context-stroke")},c.visPropOld.fillcolor):this._setAttribute(function(){a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"stroke","context-stroke")},c.visPropOld.fillcolor)),c.rendNode.parentNode.insertBefore(c.rendNode,c.rendNode))},_setArrowWidth:function(a,s,o,c){var h,d;a&&(h=s,d=h*c,a.setAttributeNS(null,"viewBox","0 0 "+h*10+" "+h*10),a.setAttributeNS(null,"markerHeight",d),a.setAttributeNS(null,"markerWidth",d),a.setAttributeNS(null,"display","inherit"),o.parentNode.insertBefore(o,o))},updateTicks:function(a){var s,o,c,h,d,b,_="",$=a.ticks.length,j,Xt,Lt=!0;for(s=0;s<$;s++){for(c=a.ticks[s],d=c[0],b=c[1],j=d.length,Xt=" M "+d[0]+" "+b[0],JXG$1.isNumber(d[0])||(Lt=!1),o=1;Lt&&o<j;++o)JXG$1.isNumber(d[o])?Xt+=" L "+d[o]+" "+b[o]:Lt=!1;Lt&&(_+=Xt)}h=a.rendNode,JXG$1.exists(h)||(h=this.createPrim("path",a.id),this.appendChildPrim(h,a.evalVisProp("layer")),a.rendNode=h),h.setAttributeNS(null,"stroke",a.evalVisProp("strokecolor")),h.setAttributeNS(null,"fill","none"),h.setAttributeNS(null,"stroke-opacity",a.evalVisProp("strokeopacity")),h.setAttributeNS(null,"stroke-width",a.evalVisProp("strokewidth")),this.updatePathPrim(h,_,a.board)},displayCopyright:function(a,s){var o,c,h=4+1.8*s,d=6+s,b=.2;o=this.createPrim("text","licenseText"),o.setAttributeNS(null,"x",h+"px"),o.setAttributeNS(null,"y",d+"px"),o.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+s+"px; opacity:"+b+";"),o.setAttributeNS(null,"aria-hidden","true"),c=this.container.ownerDocument.createTextNode(a),o.appendChild(c),this.appendChildPrim(o,0)},displayLogo:function(a,s){var o,c=1.5*s,h=.2;o=this.createPrim("image","licenseLogo"),o.setAttributeNS(null,"x","5px"),o.setAttributeNS(null,"y","5px"),o.setAttributeNS(null,"width",c+"px"),o.setAttributeNS(null,"height",c+"px"),o.setAttributeNS(null,"preserveAspectRatio","none"),o.setAttributeNS(null,"style","opacity:"+h+";"),o.setAttributeNS(null,"aria-hidden","true"),o.setAttributeNS(this.xlinkNamespace,"xlink:href",a),this.appendChildPrim(o,0)},drawInternalText:function(a){var s=this.createPrim("text",a.id);return s.style.whiteSpace="nowrap",a.rendNodeText=this.container.ownerDocument.createTextNode(""),s.appendChild(a.rendNodeText),this.appendChildPrim(s,a.evalVisProp("layer")),s},updateInternalText:function(a){var s=a.plaintext,o,c,h=a.getAnchorX(),d=a.getAnchorY();c=a.evalVisProp("cssclass"),a.rendNode.getAttributeNS(null,"class")!==c&&(a.rendNode.setAttributeNS(null,"class",c),a.needsSizeUpdate=!0),isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])||(o=a.coords.scrCoords[1],a.visPropOld.left!==h+o&&(a.rendNode.setAttributeNS(null,"x",o+"px"),h==="left"?a.rendNode.setAttributeNS(null,"text-anchor","start"):h==="right"?a.rendNode.setAttributeNS(null,"text-anchor","end"):h==="middle"&&a.rendNode.setAttributeNS(null,"text-anchor","middle"),a.visPropOld.left=h+o),o=a.coords.scrCoords[2],a.visPropOld.top!==d+o&&(a.rendNode.setAttributeNS(null,"y",o+this.vOffsetText*.5+"px"),d==="bottom"?(a.rendNode.setAttributeNS(null,"dy","0"),a.rendNode.setAttributeNS(null,"dominant-baseline","auto")):d==="top"?(a.rendNode.setAttributeNS(null,"dy","1.6ex"),a.rendNode.setAttributeNS(null,"dominant-baseline","auto")):d==="middle"&&(a.rendNode.setAttributeNS(null,"dy","0.6ex"),a.rendNode.setAttributeNS(null,"dominant-baseline","auto")),a.visPropOld.top=d+o)),a.htmlStr!==s&&(a.rendNodeText.data=s,a.htmlStr=s),this.transformRect(a,a.transformations)},updateInternalTextStyle:function(a,s,o,c){this.setObjectFillColor(a,s,o)},drawImage:function(a){var s=this.createPrim("image",a.id);s.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(s,a.evalVisProp("layer")),a.rendNode=s,this.updateImage(a)},transformRect:function(a,s){var o,c,h,d="",b,_,$=s.length;if($>0&&(h=a.rendNode,c=this.joinTransforms(a,s),o=[c[1][1],c[2][1],c[1][2],c[2][2],c[1][0],c[2][0]].join(","),o.indexOf("NaN")===-1))if(d+=" matrix("+o+") ",a.elementClass===Const.OBJECT_CLASS_TEXT&&a.visProp.display==="html"){switch(h.style.transform=d,b=-a.coords.scrCoords[1],_=-a.coords.scrCoords[2],a.evalVisProp("anchorx")){case"right":b+=a.size[0];break;case"middle":b+=a.size[0]*.5;break}switch(a.evalVisProp("anchory")){case"bottom":_+=a.size[1];break;case"middle":_+=a.size[1]*.5;break}h.style["transform-origin"]=b+"px "+_+"px"}else h.setAttributeNS(null,"transform",d)},updateImageURL:function(a){var s=a.eval(a.url);return a._src!==s?(a.imgIsLoaded=!1,a.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",s),a._src=s,!0):!1},updateImageStyle:function(a,s){var o=a.evalVisProp(s?"highlightcssclass":"cssclass");a.rendNode.setAttributeNS(null,"class",o)},drawForeignObject:function(a){a.rendNode=this.appendChildPrim(this.createPrim("foreignObject",a.id),a.evalVisProp("layer")),this.appendNodesToElement(a,"foreignObject"),this.updateForeignObject(a)},updateForeignObject:function(a){a._useUserSize?a.rendNode.style.overflow="hidden":a.rendNode.style.overflow="visible",this.updateRectPrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]),(a.evalVisProp("evaluateOnlyOnce")!==!0||!a.renderedOnce)&&(a.rendNode.innerHTML=a.content,a.renderedOnce=!0),this._updateVisual(a,{stroke:!0,dash:!0},!0)},appendChildPrim:function(a,s){return JXG$1.exists(s)?s>=Options$1.layer.numlayers&&(s=Options$1.layer.numlayers-1):s=0,this.layer[s].appendChild(a),a},createPrim:function(a,s){var o=this.container.ownerDocument.createElementNS(this.svgNamespace,a);return o.setAttributeNS(null,"id",this.uniqName(s)),o.style.position="absolute",a==="path"&&(o.setAttributeNS(null,"stroke-linecap","round"),o.setAttributeNS(null,"stroke-linejoin","round"),o.setAttributeNS(null,"fill-rule","evenodd")),o},remove:function(a){JXG$1.exists(a)&&JXG$1.exists(a.parentNode)&&a.parentNode.removeChild(a)},setLayer:function(a,s){JXG$1.exists(s)?s>=Options$1.layer.numlayers&&(s=Options$1.layer.numlayers-1):s=0,this.layer[s].appendChild(a.rendNode)},makeArrows:function(a,s){var o,c,h=s.evFirst,d=s.evLast;if(this.isIE&&a.visPropCalc.visible&&(h||d)){a.rendNode.parentNode.insertBefore(a.rendNode,a.rendNode);return}o=a.rendNodeTriangleStart,h?(c=this.toStr(this.container.id,"_",a.id,"TriangleStart",s.typeFirst),(!JXG$1.exists(o)||o.id!==c)&&(o=this.container.ownerDocument.getElementById(c),o===null&&(o=this._createArrowHead(a,"Start",s.typeFirst),this.defs.appendChild(o)),a.rendNodeTriangleStart=o,a.rendNode.setAttributeNS(null,"marker-start",this.toURL(c)))):(JXG$1.exists(o)&&(this.remove(o),a.rendNodeTriangleStart=null),a.rendNode.removeAttributeNS(null,"marker-start")),o=a.rendNodeTriangleEnd,d?(c=this.toStr(this.container.id,"_",a.id,"TriangleEnd",s.typeLast),(!JXG$1.exists(o)||o.id!==c)&&(o=this.container.ownerDocument.getElementById(c),o===null&&(o=this._createArrowHead(a,"End",s.typeLast),this.defs.appendChild(o)),a.rendNodeTriangleEnd=o,a.rendNode.setAttributeNS(null,"marker-end",this.toURL(c)))):(JXG$1.exists(o)&&(this.remove(o),a.rendNodeTriangleEnd=null),a.rendNode.removeAttributeNS(null,"marker-end"))},updateEllipsePrim:function(a,s,o,c,h){var d=1e6;d=2e5,s=Math.abs(s)<d?s:d*s/Math.abs(s),o=Math.abs(o)<d?o:d*o/Math.abs(o),c=Math.abs(c)<d?c:d*c/Math.abs(c),h=Math.abs(h)<d?h:d*h/Math.abs(h),a.setAttributeNS(null,"cx",s),a.setAttributeNS(null,"cy",o),a.setAttributeNS(null,"rx",Math.abs(c)),a.setAttributeNS(null,"ry",Math.abs(h))},updateLinePrim:function(a,s,o,c,h){var d=1e6;d=2e5,isNaN(s+o+c+h)||(s=Math.abs(s)<d?s:d*s/Math.abs(s),o=Math.abs(o)<d?o:d*o/Math.abs(o),c=Math.abs(c)<d?c:d*c/Math.abs(c),h=Math.abs(h)<d?h:d*h/Math.abs(h),a.setAttributeNS(null,"x1",s),a.setAttributeNS(null,"y1",o),a.setAttributeNS(null,"x2",c),a.setAttributeNS(null,"y2",h))},updatePathPrim:function(a,s){s===""&&(s="M 0 0"),a.setAttributeNS(null,"d",s)},updatePathStringPoint:function(a,s,o){var c="",h=a.coords.scrCoords,d=s*Math.sqrt(3)*.5,b=s*.5;return o==="x"?c=" M "+(h[1]-s)+" "+(h[2]-s)+" L "+(h[1]+s)+" "+(h[2]+s)+" M "+(h[1]+s)+" "+(h[2]-s)+" L "+(h[1]-s)+" "+(h[2]+s):o==="+"?c=" M "+(h[1]-s)+" "+h[2]+" L "+(h[1]+s)+" "+h[2]+" M "+h[1]+" "+(h[2]-s)+" L "+h[1]+" "+(h[2]+s):o==="|"?c=" M "+h[1]+" "+(h[2]-s)+" L "+h[1]+" "+(h[2]+s):o==="-"?c=" M "+(h[1]-s)+" "+h[2]+" L "+(h[1]+s)+" "+h[2]:o==="<>"||o==="<<>>"?(o==="<<>>"&&(s*=1.41),c=" M "+(h[1]-s)+" "+h[2]+" L "+h[1]+" "+(h[2]+s)+" L "+(h[1]+s)+" "+h[2]+" L "+h[1]+" "+(h[2]-s)+" Z "):o==="^"?c=" M "+h[1]+" "+(h[2]-s)+" L "+(h[1]-d)+" "+(h[2]+b)+" L "+(h[1]+d)+" "+(h[2]+b)+" Z ":o==="v"?c=" M "+h[1]+" "+(h[2]+s)+" L "+(h[1]-d)+" "+(h[2]-b)+" L "+(h[1]+d)+" "+(h[2]-b)+" Z ":o===">"?c=" M "+(h[1]+s)+" "+h[2]+" L "+(h[1]-b)+" "+(h[2]-d)+" L "+(h[1]-b)+" "+(h[2]+d)+" Z ":o==="<"&&(c=" M "+(h[1]-s)+" "+h[2]+" L "+(h[1]+b)+" "+(h[2]-d)+" L "+(h[1]+b)+" "+(h[2]+d)+" Z "),c},updatePathStringPrim:function(a){var s,o,c,h=" M ",d=" L ",b=" C ",_=h,$=5e3,j="";if(a.numberPoints<=0)return"";if(c=Math.min(a.points.length,a.numberPoints),a.bezierDegree===1)for(s=0;s<c;s++)o=a.points[s].scrCoords,isNaN(o[1])||isNaN(o[2])?_=h:(o[1]=Math.max(Math.min(o[1],$),-$),o[2]=Math.max(Math.min(o[2],$),-$),j+=_+o[1]+" "+o[2],_=d);else if(a.bezierDegree===3)for(s=0;s<c;)o=a.points[s].scrCoords,isNaN(o[1])||isNaN(o[2])?_=h:(j+=_+o[1]+" "+o[2],_===b&&(s+=1,o=a.points[s].scrCoords,j+=" "+o[1]+" "+o[2],s+=1,o=a.points[s].scrCoords,j+=" "+o[1]+" "+o[2]),_=b),s+=1;return j},updatePathStringBezierPrim:function(a){var s,o,c,h,d,b,_,$=" M ",j=" C ",Xt=$,Lt=5e3,fr="",Jr=a.evalVisProp("strokewidth"),Js=a.evalVisProp("curvetype")!=="plot";if(a.numberPoints<=0)return"";for(Js&&a.board.options.curve.RDPsmoothing&&(a.points=Numerics.RamerDouglasPeucker(a.points,.5)),_=Math.min(a.points.length,a.numberPoints),o=1;o<3;o++)for(Xt=$,s=0;s<_;s++)h=a.points[s].scrCoords,isNaN(h[1])||isNaN(h[2])?Xt=$:(h[1]=Math.max(Math.min(h[1],Lt),-Lt),h[2]=Math.max(Math.min(h[2],Lt),-Lt),Xt===$?fr+=Xt+h[1]+" "+h[2]:(c=2*o,fr+=[Xt,d+(h[1]-d)*.333+Jr*(c*Math.random()-o)," ",b+(h[2]-b)*.333+Jr*(c*Math.random()-o)," ",d+(h[1]-d)*.666+Jr*(c*Math.random()-o)," ",b+(h[2]-b)*.666+Jr*(c*Math.random()-o)," ",h[1]," ",h[2]].join("")),Xt=j,d=h[1],b=h[2]);return fr},updatePolygonPrim:function(a,s){var o,c="",h,d=s.vertices.length;for(a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"fill-rule","evenodd"),s.elType==="polygonalchain"&&d++,o=0;o<d-1;o++){if(s.vertices[o].isReal)h=s.vertices[o].coords.scrCoords,c=c+h[1]+","+h[2];else{a.setAttributeNS(null,"points","");return}o<d-2&&(c+=" ")}c.indexOf("NaN")===-1&&a.setAttributeNS(null,"points",c)},updateRectPrim:function(a,s,o,c,h){a.setAttributeNS(null,"x",s),a.setAttributeNS(null,"y",o),a.setAttributeNS(null,"width",c),a.setAttributeNS(null,"height",h)},_setAttribute:function(a,s){s===""?a():window.setTimeout(a,1)},display:function(a,s){var o;a&&a.rendNode&&(a.visPropOld.visible=s,o=a.rendNode,s?(o.setAttributeNS(null,"display","inline"),o.style.visibility="inherit"):(o.setAttributeNS(null,"display","none"),o.style.visibility="hidden"))},hide:function(a){JXG$1.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(a,!1)},setARIA:function(a){var s,o,c;for(s in a.visProp.aria)a.visProp.aria.hasOwnProperty(s)&&s!=="enabled"&&(o="aria."+s,c=a.evalVisProp("aria."+s),a.visPropOld[o]!==c&&(this.setPropertyPrim(a.rendNode,"aria-"+s,c),a.visPropOld[o]=c))},setBuffering:function(a,s){a.rendNode.setAttribute("buffered-rendering",s)},setCssClass(a,s){a.visPropOld.cssclass!==s&&(this.setPropertyPrim(a.rendNode,"class",s),a.visPropOld.cssclass=s)},setDashStyle:function(a){var s=a.evalVisProp("dash"),o=a.evalVisProp("dashscale"),c=o?.5*a.evalVisProp("strokewidth"):1,h=a.rendNode;s>0?h.setAttributeNS(null,"stroke-dasharray",this.dashArray[s-1].map(function(d){return d*c}).join(",")):h.hasAttributeNS(null,"stroke-dasharray")&&h.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(a){var s=a.rendNode,o,c,h,d=a.evalVisProp("gradient");d==="linear"||d==="radial"?(o=this.createPrim(d+"Gradient",a.id+"_gradient"),c=this.createPrim("stop",a.id+"_gradient1"),h=this.createPrim("stop",a.id+"_gradient2"),o.appendChild(c),o.appendChild(h),this.defs.appendChild(o),s.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+a.id+"_gradient")),a.gradNode1=c,a.gradNode2=h,a.gradNode=o):s.removeAttributeNS(null,"style")},setLineCap:function(a){var s=a.evalVisProp("linecap");s===void 0||s===""||a.visPropOld.linecap===s||!JXG$1.exists(a.rendNode)||(this.setPropertyPrim(a.rendNode,"stroke-linecap",s),a.visPropOld.linecap=s)},setObjectFillColor:function(a,s,o,c){var h,d,b,_,$=s,j=o,Xt=a.evalVisProp("gradient");j=j>0?j:0,!(a.visPropOld.fillcolor===$&&a.visPropOld.fillopacity===j&&Xt===null)&&(JXG$1.exists($)&&$!==!1&&($.length!==9?(d=$,_=j):(b=JXG$1.rgba2rgbo($),d=b[0],_=j*b[1]),c===void 0?h=a.rendNode:h=c,d!=="none"&&d!==""&&d!==!1&&this._setAttribute(function(){h.setAttributeNS(null,"fill",d)},a.visPropOld.fillcolor),a.type===JXG$1.OBJECT_TYPE_IMAGE?this._setAttribute(function(){h.setAttributeNS(null,"opacity",_)},a.visPropOld.fillopacity):(d==="none"?(_=0,h.setAttributeNS(null,"pointer-events","visibleStroke")):h.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){h.setAttributeNS(null,"fill-opacity",_)},a.visPropOld.fillopacity)),(Xt==="linear"||Xt==="radial")&&this.updateGradient(a)),a.visPropOld.fillcolor=$,a.visPropOld.fillopacity=j)},setObjectStrokeColor:function(a,s,o){var c=s,h,d,b=o,_,$;b=b>0?b:0,!(a.visPropOld.strokecolor===c&&a.visPropOld.strokeopacity===b)&&(JXG$1.exists(c)&&c!==!1&&(c.length!==9?(h=c,_=b):(d=JXG$1.rgba2rgbo(c),h=d[0],_=b*d[1]),$=a.rendNode,a.elementClass===Const.OBJECT_CLASS_TEXT?a.evalVisProp("display")==="html"?this._setAttribute(function(){$.style.color=h,$.style.opacity=_},a.visPropOld.strokecolor):this._setAttribute(function(){$.setAttributeNS(null,"fill",h),$.setAttributeNS(null,"fill-opacity",_)},a.visPropOld.strokecolor):this._setAttribute(function(){$.setAttributeNS(null,"stroke",h),$.setAttributeNS(null,"stroke-opacity",_)},a.visPropOld.strokecolor),(a.elementClass===Const.OBJECT_CLASS_CURVE||a.elementClass===Const.OBJECT_CLASS_LINE)&&(a.evalVisProp("firstarrow")&&this._setArrowColor(a.rendNodeTriangleStart,h,_,a,a.visPropCalc.typeFirst),a.evalVisProp("lastarrow")&&this._setArrowColor(a.rendNodeTriangleEnd,h,_,a,a.visPropCalc.typeLast))),a.visPropOld.strokecolor=c,a.visPropOld.strokeopacity=b)},setObjectStrokeWidth:function(a,s){var o,c=s;isNaN(c)||a.visPropOld.strokewidth===c||(o=a.rendNode,this.setPropertyPrim(o,"stroked","true"),JXG$1.exists(c)&&this.setPropertyPrim(o,"stroke-width",c+"px"),a.visPropOld.strokewidth=c)},setObjectTransition:function(a,s){var o,c,h=[],d,b,_=0,$=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(s===void 0&&(s=a.evalVisProp("transitionduration")),c=a.evalVisProp("transitionproperties"),!(s===a.visPropOld.transitionduration&&c===a.visPropOld.transitionproperties)){for(JXG$1.exists(c)&&(_=c.length),b=0;b<_;b++)h.push(c[b]+" "+s+"ms");for(d=h.join(", "),_=$.length,b=0;b<_;++b)a[$[b]]&&(o=a[$[b]],o.style.transition=d);a.visPropOld.transitionduration=s,a.visPropOld.transitionproperties=c}},setShadow:function(a){var s=a.evalVisProp("shadow"),o,c,h,d,b,_,$,j,Xt=!0,Lt=!1;o=JSON.stringify(s),o!==a.visPropOld.shadow&&(typeof s=="boolean"?(Xt=!0,Lt=s,c="none",h=3,d=.1,b=[5,5],_=1):a.evalVisProp("shadow.enabled")?(Xt=!1,Lt=!0,c=JXG$1.rgbParser(a.evalVisProp("shadow.color")),h=a.evalVisProp("shadow.blur"),d=a.evalVisProp("shadow.blend"),b=a.evalVisProp("shadow.offset"),_=a.evalVisProp("shadow.opacity")):Lt=!1,JXG$1.exists(a.rendNode)&&(Lt?Xt?a.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):(j=this.container.ownerDocument.getElementById($),j&&this.defs.removeChild(j),$=a.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter($,c,_,d,h,b)),a.rendNode.setAttributeNS(null,"filter",this.toURL($))):a.rendNode.removeAttributeNS(null,"filter")),a.visPropOld.shadow=o)},setTabindex:function(a){var s;a.board.attr.keyboard.enabled&&JXG$1.exists(a.rendNode)&&(s=a.evalVisProp("tabindex"),a.visPropCalc.visible||(s=null),s!==a.visPropOld.tabindex&&(a.rendNode.setAttribute("tabindex",s),a.visPropOld.tabindex=s))},setPropertyPrim:function(a,s,o){s!=="stroked"&&a.setAttributeNS(null,s,o)},show:function(a){JXG$1.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(a,!0)},updateGradient:function(a){var s,o,c=a.gradNode1,h=a.gradNode2,d=a.evalVisProp("gradient");!JXG$1.exists(c)||!JXG$1.exists(h)||(o=a.evalVisProp("fillopacity"),o=o>0?o:0,s=a.evalVisProp("fillcolor"),c.setAttributeNS(null,"style","stop-color:"+s+";stop-opacity:"+o),h.setAttributeNS(null,"style","stop-color:"+a.evalVisProp("gradientsecondcolor")+";stop-opacity:"+a.evalVisProp("gradientsecondopacity")),c.setAttributeNS(null,"offset",a.evalVisProp("gradientstartoffset")*100+"%"),h.setAttributeNS(null,"offset",a.evalVisProp("gradientendoffset")*100+"%"),d==="linear"?this.updateGradientAngle(a.gradNode,a.evalVisProp("gradientangle")):d==="radial"&&this.updateGradientCircle(a.gradNode,a.evalVisProp("gradientcx"),a.evalVisProp("gradientcy"),a.evalVisProp("gradientr"),a.evalVisProp("gradientfx"),a.evalVisProp("gradientfy"),a.evalVisProp("gradientfr")))},updateGradientAngle:function(a,s){var o=1,c=Math.cos(s),h=Math.sin(s);Math.abs(c)>Math.abs(h)?o/=Math.abs(c):o/=Math.abs(h),c>=0?(a.setAttributeNS(null,"x1",0),a.setAttributeNS(null,"x2",c*o)):(a.setAttributeNS(null,"x1",-c*o),a.setAttributeNS(null,"x2",0)),h>=0?(a.setAttributeNS(null,"y1",0),a.setAttributeNS(null,"y2",h*o)):(a.setAttributeNS(null,"y1",-h*o),a.setAttributeNS(null,"y2",0))},updateGradientCircle:function(a,s,o,c,h,d,b){a.setAttributeNS(null,"cx",s*100+"%"),a.setAttributeNS(null,"cy",o*100+"%"),a.setAttributeNS(null,"r",c*100+"%"),a.setAttributeNS(null,"fx",h*100+"%"),a.setAttributeNS(null,"fy",d*100+"%"),a.setAttributeNS(null,"fr",b*100+"%")},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(a,s){this.svgRoot.setAttribute("width",parseFloat(a)),this.svgRoot.setAttribute("height",parseFloat(s))},createTouchpoints:function(a){var s,o,c,h;for(this.touchpoints=[],s=0;s<a;s++)o="touchpoint1_"+s,h=this.createPrim("path",o),this.appendChildPrim(h,19),h.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(h),this.setPropertyPrim(h,"stroked","true"),this.setPropertyPrim(h,"stroke-width","1px"),h.setAttributeNS(null,"stroke","#000000"),h.setAttributeNS(null,"stroke-opacity",1),h.setAttributeNS(null,"display","none"),c="touchpoint2_"+s,h=this.createPrim("ellipse",c),this.appendChildPrim(h,19),this.updateEllipsePrim(h,0,0,0,0),this.touchpoints.push(h),this.setPropertyPrim(h,"stroked","true"),this.setPropertyPrim(h,"stroke-width","1px"),h.setAttributeNS(null,"stroke","#000000"),h.setAttributeNS(null,"fill","#ffffff"),h.setAttributeNS(null,"stroke-opacity",1),h.setAttributeNS(null,"fill-opacity",0),h.setAttributeNS(null,"display","none")},showTouchpoint:function(a){this.touchpoints&&a>=0&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"display","inline"),this.touchpoints[2*a+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(a){this.touchpoints&&a>=0&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"display","none"),this.touchpoints[2*a+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(a,s){var o,c,h=37;this.touchpoints&&a>=0&&2*a<this.touchpoints.length&&(o=s[0],c=s[1],this.touchpoints[2*a].setAttributeNS(null,"d","M "+(o-h)+" "+c+" L "+(o+h)+" "+c+" M "+o+" "+(c-h)+" L "+o+" "+(c+h)),this.updateEllipsePrim(this.touchpoints[2*a+1],s[0],s[1],25,25))},_getValuesOfDOMElements:function(a){var s=[];if(a.nodeType===1)for(a=a.firstChild;a;)a.id!==void 0&&a.value!==void 0&&s.push([a.id,a.value]),JXG$1.concat(s,this._getValuesOfDOMElements(a)),a=a.nextSibling;return s},_getImgDataURL:function(a){var s,o,c,h,d,b;if(s=a.getElementsByTagName("image"),o=s.length,o>0)for(c=document.createElement("canvas"),b=0;b<o;b++){s[b].setAttribute("crossorigin","anonymous"),h=c.getContext("2d"),c.width=s[b].getAttribute("width"),c.height=s[b].getAttribute("height");try{h.drawImage(s[b],0,0,c.width,c.height),d=c.toDataURL(),s[b].setAttribute("xlink:href",d)}catch(_){console.log("CORS problem! Image can not be used",_)}}return!0},dumpToDataURI:function(a){var s=this.svgRoot,o=window.btoa||Base64.encode,c,h,d,b=[];if(this.container.hasChildNodes()&&JXG$1.exists(this.foreignObjLayer))for(a||this.foreignObjLayer.setAttribute("display","inline");s.nextSibling;)JXG$1.concat(b,this._getValuesOfDOMElements(s.nextSibling)),this.foreignObjLayer.appendChild(s.nextSibling);if(this._getImgDataURL(s),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),c=new XMLSerializer().serializeToString(s),a!==!0)for(d=b.length,h=0;h<d;h++)c=c.replace('id="'+b[h][0]+'"','id="'+b[h][0]+'" value="'+b[h][1]+'"');if(this.isIE&&(c.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(c=c.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),c=c.replace(/&nbsp;/g," "),JXG$1.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+o(unescape(encodeURIComponent(c)))},dumpToCanvas:function(a,s,o,c){var h,d,b,_,$=this.container.ownerDocument;return b=$.getElementById(a),b.width=b.width,_=b.getContext("2d"),s!==void 0&&o!==void 0&&(b.style.width=parseFloat(s)+"px",b.style.height=parseFloat(o)+"px",b.setAttribute("width",parseFloat(s)),b.setAttribute("height",parseFloat(o))),d=new Image,h=this.dumpToDataURI(c),d.src=h,"Promise"in window?new Promise(function(j,Xt){try{d.onload=function(){_.drawImage(d,0,0,s,o),j()}}catch(Lt){Xt(Lt)}}):(d.onload=function(){window.setTimeout(function(){try{_.drawImage(d,0,0,s,o)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(a,s,o){var c,h=this.container.ownerDocument,d=this.container.parentNode,b,_,$,j,Xt,Lt,fr,Jr=a.attr.screenshot,Js,qs,zo,js=!1,eu;return this.type==="no"?this:(Lt=Jr.scale*this.container.getBoundingClientRect().width,fr=Jr.scale*this.container.getBoundingClientRect().height,s===void 0||s===""?(js=!0,$=new Image,$.style.width=Lt+"px",$.style.height=fr+"px"):(js=!1,$=h.getElementById(s)),js&&(c=h.createElement("div"),c.style.cssText=Jr.css,c.style.width=Lt+"px",c.style.height=fr+"px",c.style.zIndex=this.container.style.zIndex+120,c.style.position="absolute",c.style.top=this.container.offsetTop+"px",c.style.left=this.container.offsetLeft+"px"),b=h.createElement("canvas"),_=Math.random().toString(36).slice(2,7),b.setAttribute("id",_),b.setAttribute("width",Lt),b.setAttribute("height",fr),b.style.width=Lt+"px",b.style.height=Lt+"px",b.style.display="none",d.appendChild(b),js&&(j=h.createElement("span"),Xt=h.createTextNode(""),j.style.cssText=Jr.cssButton,j.appendChild(Xt),j.onclick=function(){c.parentNode.removeChild(c)},c.appendChild($),c.appendChild(j),d.insertBefore(c,this.container.nextSibling)),Js=h.getElementById(this.uniqName("navigationbar")),JXG$1.exists(Js)&&(qs=Js.style.display,Js.style.display="none",zo=this.removeToInsertLater(Js)),eu=function(){$.src=b.toDataURL("image/png"),d.removeChild(b)},"Promise"in window?this.dumpToCanvas(_,Lt,fr,o).then(eu):(this.dumpToCanvas(_,Lt,fr,o),window.setTimeout(eu,200)),JXG$1.exists(Js)&&(Js.style.display=qs,zo()),this)}});const SVGRenderer=JXG$1.SVGRenderer;JXG$1.VMLRenderer=function(a){this.type="vml",this.container=a,this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,JXG$1.exists(JXG$1.vmlStylesheet)||(a.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),JXG$1.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),JXG$1.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{a.ownerDocument.namespaces.jxgvml||a.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(s){return a.ownerDocument.createElement("<jxgvml:"+s+' class="jxgvml">')}}catch{this.createNode=function(o){return a.ownerDocument.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]};JXG$1.VMLRenderer.prototype=new AbstractRenderer;JXG$1.extend(JXG$1.VMLRenderer.prototype,{_setAttr:function(a,s,o,c){try{this.container.ownerDocument.documentMode===8?a[s]=o:a.setAttribute(s,o,c)}catch{JXG$1.debug("_setAttr: "+s+" "+o+`<br>
`)}},updateTicks:function(a){var s,o,c,h,d,b=this.resolution,_=[];for(o=a.ticks.length,s=0;s<o;s++)c=a.ticks[s],h=c[0],d=c[1],JXG$1.isNumber(h[0])&&JXG$1.isNumber(h[1])&&_.push(" m "+Math.round(b*h[0])+", "+Math.round(b*d[0])+" l "+Math.round(b*h[1])+", "+Math.round(b*d[1])+" ");JXG$1.exists(a.rendNode)||(a.rendNode=this.createPrim("path",a.id),this.appendChildPrim(a.rendNode,a.evalVisProp("layer"))),this._setAttr(a.rendNode,"stroked","true"),this._setAttr(a.rendNode,"strokecolor",a.evalVisProp("strokecolor"),1),this._setAttr(a.rendNode,"strokeweight",a.evalVisProp("strokewidth")),this._setAttr(a.rendNodeStroke,"opacity",a.evalVisProp("strokeopacity")*100+"%"),this.updatePathPrim(a.rendNode,_,a.board)},displayCopyright:function(a,s){var o,c;o=this.createNode("textbox"),o.style.position="absolute",this._setAttr(o,"id",this.container.id+"_licenseText"),o.style.left=20,o.style.top=2,o.style.fontSize=s,o.style.color="#356AA0",o.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(o,"opacity","30%"),o.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",c=this.container.ownerDocument.createTextNode(a),o.appendChild(c),this.appendChildPrim(o,0)},drawInternalText:function(a){var s;return s=this.createNode("textbox"),s.style.position="absolute",a.rendNodeText=this.container.ownerDocument.createTextNode(""),s.appendChild(a.rendNodeText),this.appendChildPrim(s,9),s.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",s},updateInternalText:function(a){var s,o=a.plaintext,c=this.joinTransforms(a,a.transformations),h=[0,0],d,b,_,$,j,Xt=a.rendNode,Lt=[],fr=a.getAnchorX(),Jr=a.getAnchorY();if(!isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])){for(fr==="right"?h[0]=1:fr==="middle"&&(h[0]=.5),Jr==="bottom"?h[1]=1:Jr==="middle"&&(h[1]=.5),Lt[0]=Mat.matVecMult(c,[1,a.coords.scrCoords[1]-h[0]*a.size[0],a.coords.scrCoords[2]+(1-h[1])*a.size[1]+this.vOffsetText]),Lt[0][1]/=Lt[0][0],Lt[0][2]/=Lt[0][0],Lt[1]=Mat.matVecMult(c,[1,a.coords.scrCoords[1]+(1-h[0])*a.size[0],a.coords.scrCoords[2]+(1-h[1])*a.size[1]+this.vOffsetText]),Lt[1][1]/=Lt[1][0],Lt[1][2]/=Lt[1][0],Lt[2]=Mat.matVecMult(c,[1,a.coords.scrCoords[1]+(1-h[0])*a.size[0],a.coords.scrCoords[2]-h[1]*a.size[1]+this.vOffsetText]),Lt[2][1]/=Lt[2][0],Lt[2][2]/=Lt[2][0],Lt[3]=Mat.matVecMult(c,[1,a.coords.scrCoords[1]-h[0]*a.size[0],a.coords.scrCoords[2]-h[1]*a.size[1]+this.vOffsetText]),Lt[3][1]/=Lt[3][0],Lt[3][2]/=Lt[3][0],d=Lt[0][1],_=Lt[0][1],b=Lt[0][2],$=Lt[0][2],j=1;j<4;j++)d=Math.max(d,Lt[j][1]),_=Math.min(_,Lt[j][1]),b=Math.max(b,Lt[j][2]),$=Math.min($,Lt[j][2]);s=h[0]===1?Math.floor(a.board.canvasWidth-d):Math.floor(_),a.visPropOld.left!==fr+s&&(h[0]===1?(a.rendNode.style.right=s+"px",a.rendNode.style.left="auto"):(a.rendNode.style.left=s+"px",a.rendNode.style.right="auto"),a.visPropOld.left=fr+s),s=h[1]===1?Math.floor(a.board.canvasHeight-b):Math.floor($),a.visPropOld.top!==Jr+s&&(h[1]===1?(a.rendNode.style.bottom=s+"px",a.rendNode.style.top="auto"):(a.rendNode.style.top=s+"px",a.rendNode.style.bottom="auto"),a.visPropOld.top=Jr+s)}a.htmlStr!==o&&(a.rendNodeText.data=o,a.htmlStr=o),Xt.filters.item(0).M11=c[1][1],Xt.filters.item(0).M12=c[1][2],Xt.filters.item(0).M21=c[2][1],Xt.filters.item(0).M22=c[2][2],Xt.filters.item(0).enabled=!0},drawImage:function(a){var s;s=this.container.ownerDocument.createElement("img"),s.style.position="absolute",this._setAttr(s,"id",this.container.id+"_"+a.id),this.container.appendChild(s),this.appendChildPrim(s,a.evalVisProp("layer")),s.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",a.rendNode=s,this.updateImage(a)},transformRect:function(a,s){var o,c,h,d,b,_,$=a.rendNode,j=[],Xt=s.length;if(Xt>0){for(o=this.joinTransforms(a,s),j[0]=Mat.matVecMult(o,a.coords.scrCoords),j[0][1]/=j[0][0],j[0][2]/=j[0][0],j[1]=Mat.matVecMult(o,[1,a.coords.scrCoords[1]+a.size[0],a.coords.scrCoords[2]]),j[1][1]/=j[1][0],j[1][2]/=j[1][0],j[2]=Mat.matVecMult(o,[1,a.coords.scrCoords[1]+a.size[0],a.coords.scrCoords[2]-a.size[1]]),j[2][1]/=j[2][0],j[2][2]/=j[2][0],j[3]=Mat.matVecMult(o,[1,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1]]),j[3][1]/=j[3][0],j[3][2]/=j[3][0],c=j[0][1],d=j[0][1],h=j[0][2],b=j[0][2],_=1;_<4;_++)c=Math.max(c,j[_][1]),d=Math.min(d,j[_][1]),h=Math.max(h,j[_][2]),b=Math.min(b,j[_][2]);$.style.left=Math.floor(d)+"px",$.style.top=Math.floor(b)+"px",$.filters.item(0).M11=o[1][1],$.filters.item(0).M12=o[1][2],$.filters.item(0).M21=o[2][1],$.filters.item(0).M22=o[2][2],$.filters.item(0).enabled=!0}},updateImageURL:function(a){var s=a.eval(a.url);this._setAttr(a.rendNode,"src",s)},appendChildPrim:function(a,s){return JXG$1.exists(s)||(s=0),a.style.zIndex=s,this.container.appendChild(a),a},appendNodesToElement:function(a,s){(s==="shape"||s==="path"||s==="polygon")&&(a.rendNodePath=this.getElementById(a.id+"_path")),a.rendNodeFill=this.getElementById(a.id+"_fill"),a.rendNodeStroke=this.getElementById(a.id+"_stroke"),a.rendNodeShadow=this.getElementById(a.id+"_shadow"),a.rendNode=this.getElementById(a.id)},createPrim:function(a,s){var o,c,h=this.createNode("fill"),d=this.createNode("stroke"),b=this.createNode("shadow");return this._setAttr(h,"id",this.container.id+"_"+s+"_fill"),this._setAttr(d,"id",this.container.id+"_"+s+"_stroke"),this._setAttr(b,"id",this.container.id+"_"+s+"_shadow"),a==="circle"||a==="ellipse"?(o=this.createNode("oval"),o.appendChild(h),o.appendChild(d),o.appendChild(b)):a==="polygon"||a==="path"||a==="shape"||a==="line"?(o=this.createNode("shape"),o.appendChild(h),o.appendChild(d),o.appendChild(b),c=this.createNode("path"),this._setAttr(c,"id",this.container.id+"_"+s+"_path"),o.appendChild(c)):(o=this.createNode(a),o.appendChild(h),o.appendChild(d),o.appendChild(b)),o.style.position="absolute",o.style.left="0px",o.style.top="0px",this._setAttr(o,"id",this.container.id+"_"+s),o},remove:function(a){JXG$1.exists(a)&&a.removeNode(!0)},makeArrows:function(a){var s,o=a.evalVisProp("firstarrow"),c=a.evalVisProp("lastarrow");a.visPropOld.firstarrow===o&&a.visPropOld.lastarrow===c||(o?(s=a.rendNodeStroke,this._setAttr(s,"startarrow","block"),this._setAttr(s,"startarrowlength","long")):(s=a.rendNodeStroke,JXG$1.exists(s)&&this._setAttr(s,"startarrow","none")),c?(s=a.rendNodeStroke,this._setAttr(s,"id",this.container.id+"_"+a.id+"stroke"),this._setAttr(s,"endarrow","block"),this._setAttr(s,"endarrowlength","long")):(s=a.rendNodeStroke,JXG$1.exists(s)&&this._setAttr(s,"endarrow","none")),a.visPropOld.firstarrow=o,a.visPropOld.lastarrow=c)},updateEllipsePrim:function(a,s,o,c,h){a.style.left=Math.floor(s-c)+"px",a.style.top=Math.floor(o-h)+"px",a.style.width=Math.floor(Math.abs(c)*2)+"px",a.style.height=Math.floor(Math.abs(h)*2)+"px"},updateLinePrim:function(a,s,o,c,h,d){var b,_=this.resolution;isNaN(s+o+c+h)||(b=["m ",Math.floor(_*s),", ",Math.floor(_*o)," l ",Math.floor(_*c),", ",Math.floor(_*h)],this.updatePathPrim(a,b,d))},updatePathPrim:function(a,s,o){var c=o.canvasWidth,h=o.canvasHeight;s.length<=0&&(s=["m 0,0"]),a.style.width=c,a.style.height=h,this._setAttr(a,"coordsize",[Math.floor(this.resolution*c),Math.floor(this.resolution*h)].join(",")),this._setAttr(a,"path",s.join(""))},updatePathStringPoint:function(a,s,o){var c=[],h=Math.round,d=a.coords.scrCoords,b=s*Math.sqrt(3)*.5,_=s*.5,$=this.resolution;return o==="x"?c.push([" m ",h($*(d[1]-s)),", ",h($*(d[2]-s))," l ",h($*(d[1]+s)),", ",h($*(d[2]+s))," m ",h($*(d[1]+s)),", ",h($*(d[2]-s))," l ",h($*(d[1]-s)),", ",h($*(d[2]+s))].join("")):o==="+"?c.push([" m ",h($*(d[1]-s)),", ",h($*d[2])," l ",h($*(d[1]+s)),", ",h($*d[2])," m ",h($*d[1]),", ",h($*(d[2]-s))," l ",h($*d[1]),", ",h($*(d[2]+s))].join("")):o==="<>"||o==="<<>>"?(o==="<<>>"&&(s*=1.41),c.push([" m ",h($*(d[1]-s)),", ",h($*d[2])," l ",h($*d[1]),", ",h($*(d[2]+s))," l ",h($*(d[1]+s)),", ",h($*d[2])," l ",h($*d[1]),", ",h($*(d[2]-s))," x e "].join(""))):o==="^"?c.push([" m ",h($*d[1]),", ",h($*(d[2]-s))," l ",h($*(d[1]-b)),", ",h($*(d[2]+_))," l ",h($*(d[1]+b)),", ",h($*(d[2]+_))," x e "].join("")):o==="v"?c.push([" m ",h($*d[1]),", ",h($*(d[2]+s))," l ",h($*(d[1]-b)),", ",h($*(d[2]-_))," l ",h($*(d[1]+b)),", ",h($*(d[2]-_))," x e "].join("")):o===">"?c.push([" m ",h($*(d[1]+s)),", ",h($*d[2])," l ",h($*(d[1]-_)),", ",h($*(d[2]-b))," l ",h($*(d[1]-_)),", ",h($*(d[2]+b))," l ",h($*(d[1]+s)),", ",h($*d[2])].join("")):o==="<"&&c.push([" m ",h($*(d[1]-s)),", ",h($*d[2])," l ",h($*(d[1]+_)),", ",h($*(d[2]-b))," l ",h($*(d[1]+_)),", ",h($*(d[2]+b))," x e "].join("")),c},updatePathStringPrim:function(a){var s,o,c=[],h=this.resolution,d=Math.round,b=" m ",_=" l ",$=" c ",j=b,Xt=Math.min(a.numberPoints,8192);if(a.numberPoints<=0)return"";if(Xt=Math.min(Xt,a.points.length),a.bezierDegree===1)for(s=0;s<Xt;s++)o=a.points[s].scrCoords,isNaN(o[1])||isNaN(o[2])?j=b:(o[1]>2e4?o[1]=2e4:o[1]<-2e4&&(o[1]=-2e4),o[2]>2e4?o[2]=2e4:o[2]<-2e4&&(o[2]=-2e4),c.push([j,d(h*o[1]),", ",d(h*o[2])].join("")),j=_);else if(a.bezierDegree===3)for(s=0;s<Xt;)o=a.points[s].scrCoords,isNaN(o[1])||isNaN(o[2])?j=b:(c.push([j,d(h*o[1]),", ",d(h*o[2])].join("")),j===$&&(s+=1,o=a.points[s].scrCoords,c.push([" ",d(h*o[1]),", ",d(h*o[2])].join("")),s+=1,o=a.points[s].scrCoords,c.push([" ",d(h*o[1]),", ",d(h*o[2])].join(""))),j=$),s+=1;return c.push(" e"),c},updatePathStringBezierPrim:function(a){var s,o,c,h,d,b,_=[],$=a.evalVisProp("strokewidth"),j=this.resolution,Xt=Math.round,Lt=" m ",fr=" c ",Jr=Lt,Js=a.evalVisProp("curvetype")!=="plot",qs=Math.min(a.numberPoints,8192);if(a.numberPoints<=0)return"";for(Js&&a.board.options.curve.RDPsmoothing&&(a.points=Numerics.RamerDouglasPeucker(a.points,1)),qs=Math.min(qs,a.points.length),o=1;o<3;o++)for(Jr=Lt,s=0;s<qs;s++)h=a.points[s].scrCoords,isNaN(h[1])||isNaN(h[2])?Jr=Lt:(h[1]>2e4?h[1]=2e4:h[1]<-2e4&&(h[1]=-2e4),h[2]>2e4?h[2]=2e4:h[2]<-2e4&&(h[2]=-2e4),Jr===Lt?_.push([Jr,Xt(j*h[1])," ",Xt(j*h[2])].join("")):(c=2*o,_.push([Jr,Xt(j*(d+(h[1]-d)*.333+$*(c*Math.random()-o)))," ",Xt(j*(b+(h[2]-b)*.333+$*(c*Math.random()-o)))," ",Xt(j*(d+(h[1]-d)*.666+$*(c*Math.random()-o)))," ",Xt(j*(b+(h[2]-b)*.666+$*(c*Math.random()-o)))," ",Xt(j*h[1])," ",Xt(j*h[2])].join(""))),Jr=fr,d=h[1],b=h[2]);return _.push(" e"),_},updatePolygonPrim:function(a,s){var o,c=s.vertices.length,h=this.resolution,d,b=[];if(this._setAttr(a,"stroked","false"),d=s.vertices[0].coords.scrCoords,!isNaN(d[1]+d[2])){for(b.push(["m ",Math.floor(h*d[1]),",",Math.floor(h*d[2])," l "].join("")),o=1;o<c-1;o++){if(s.vertices[o].isReal){if(d=s.vertices[o].coords.scrCoords,isNaN(d[1]+d[2]))return;b.push(Math.floor(h*d[1])+","+Math.floor(h*d[2]))}else{this.updatePathPrim(a,"",s.board);return}o<c-2&&b.push(", ")}b.push(" x e"),this.updatePathPrim(a,b,s.board)}},updateRectPrim:function(a,s,o,c,h){a.style.left=Math.floor(s)+"px",a.style.top=Math.floor(o)+"px",c>=0&&(a.style.width=c+"px"),h>=0&&(a.style.height=h+"px")},setPropertyPrim:function(a,s,o){var c="",h;switch(s){case"stroke":c="strokecolor";break;case"stroke-width":c="strokeweight";break;case"stroke-dasharray":c="dashstyle";break}c!==""&&(h=o,this._setAttr(a,c,h))},display:function(a,s){a&&a.rendNode&&(a.visPropOld.visible=s,s?a.rendNode.style.visibility="inherit":a.rendNode.style.visibility="hidden")},show:function(a){JXG$1.deprecated("Board.renderer.show()","Board.renderer.display()"),a&&a.rendNode&&(a.rendNode.style.visibility="inherit")},hide:function(a){JXG$1.deprecated("Board.renderer.hide()","Board.renderer.display()"),a&&a.rendNode&&(a.rendNode.style.visibility="hidden")},setDashStyle:function(a,s){var o;s.dash>=0&&(o=a.rendNodeStroke,this._setAttr(o,"dashstyle",this.dashArray[s.dash]))},setGradient:function(a){var s=a.rendNodeFill,o=a.evalVisProp("gradient");o==="linear"?(this._setAttr(s,"type","gradient"),this._setAttr(s,"color2",a.evalVisProp("gradientsecondcolor")),this._setAttr(s,"opacity2",a.evalVisProp("gradientsecondopacity")),this._setAttr(s,"angle",a.evalVisProp("gradientangle"))):o==="radial"?(this._setAttr(s,"type","gradientradial"),this._setAttr(s,"color2",a.evalVisProp("gradientsecondcolor")),this._setAttr(s,"opacity2",a.evalVisProp("gradientsecondopacity")),this._setAttr(s,"focusposition",a.evalVisProp("gradientpositionx")*100+"%,"+a.evalVisProp("gradientpositiony")*100+"%"),this._setAttr(s,"focussize","0,0")):this._setAttr(s,"type","solid")},setObjectFillColor:function(a,s,o){var c=s,h,d,b=o,_,$=a.rendNode;b=b>0?b:0,!(a.visPropOld.fillcolor===c&&a.visPropOld.fillopacity===b)&&(JXG$1.exists(c)&&c!==!1&&(c.length!==9?(h=c,_=b):(d=JXG$1.rgba2rgbo(c),h=d[0],_=b*d[1]),h==="none"||h===!1?this._setAttr(a.rendNode,"filled","false"):(this._setAttr(a.rendNode,"filled","true"),this._setAttr(a.rendNode,"fillcolor",h),JXG$1.exists(_)&&a.rendNodeFill&&this._setAttr(a.rendNodeFill,"opacity",_*100+"%")),a.type===Const.OBJECT_TYPE_IMAGE&&$.filters.length>1&&($.filters.item(1).opacity=Math.round(_*100),$.filters.item(1).enabled=!0)),a.visPropOld.fillcolor=c,a.visPropOld.fillopacity=b)},setObjectStrokeColor:function(a,s,o){var c=s,h,d,b=o,_,$=a.rendNode,j;b=b>0?b:0,!(a.visPropOld.strokecolor===c&&a.visPropOld.strokeopacity===b)&&(JXG$1.exists(c)&&c!==!1&&(c.length!==9?(h=c,_=b):(d=s.rgba2rgbo(c),h=d[0],_=b*d[1]),a.elementClass===Const.OBJECT_CLASS_TEXT?($.filters.length>1&&($.filters.item(1).opacity=Math.round(_*100),$.filters.item(1).enabled=!0),$.style.color=h):(h!==!1&&(this._setAttr($,"stroked","true"),this._setAttr($,"strokecolor",h)),j=a.rendNodeStroke,JXG$1.exists(_)&&a.type!==Const.OBJECT_TYPE_IMAGE&&this._setAttr(j,"opacity",_*100+"%"))),a.visPropOld.strokecolor=c,a.visPropOld.strokeopacity=b)},setObjectStrokeWidth:function(a,s){var o=JXG$1.evaluate(s),c;isNaN(o)||a.visPropOld.strokewidth===o||(c=a.rendNode,this.setPropertyPrim(c,"stroked","true"),JXG$1.exists(o)&&(this.setPropertyPrim(c,"stroke-width",o),o===0&&JXG$1.exists(a.rendNodeStroke)&&this._setAttr(c,"stroked","false")),a.visPropOld.strokewidth=o)},setShadow:function(a){var s=a.rendNodeShadow,o=a.evalVisProp("shadow");!s||a.visPropOld.shadow===o||(o?(this._setAttr(s,"On","True"),this._setAttr(s,"Offset","3pt,3pt"),this._setAttr(s,"Opacity","60%"),this._setAttr(s,"Color","#aaaaaa")):this._setAttr(s,"On","False"),a.visPropOld.shadow=o)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});const VMLRenderer=JXG$1.VMLRenderer;var uuidCharsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",uuidChars=uuidCharsStr.split("");JXG$1.Util=JXG$1.Util||{};JXG$1.Util.genUUID=function(a){var s,o,c=[],h=0;for(a=a||"",a!==""&&a.slice(a.length-1)!=="-"&&(a=a+"-"),o=0;o<36;o++)o===8||o===13||o===18||o===23?c[o]="-":o===14?c[o]="4":(h<=2&&(h=33554432+Math.random()*16777216|0),s=h&15,h=h>>4,c[o]=uuidChars[o===19?s&3|8:s]);return a+c.join("")};const UUID=JXG$1.Util;JXG$1.CanvasRenderer=function(a,s){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=UUID.genUUID(),this.canvasNamespace=null,JXG$1.isBrowser)this.container=a,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',s.width,'px" height="',s.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(JXG$1.isNode())try{this.canvasRoot=JXG$1.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch{throw new Error(`JXG.createCanvas not available.
Install the npm package \`canvas\`
and call:
    import { createCanvas } from "canvas.js"
    JXG.createCanvas = createCanvas;
`)}};JXG$1.CanvasRenderer.prototype=new AbstractRenderer;JXG$1.extend(JXG$1.CanvasRenderer.prototype,{_drawPolygon:function(a,s,o){var c,h=a.length,d=this.context;if(h>0){if(o&&(d.lineWidth=0),d.beginPath(),d.moveTo(a[0][0],a[0][1]),s===1)for(c=1;c<h;c++)d.lineTo(a[c][0],a[c][1]);else for(c=1;c<h;c+=3)d.bezierCurveTo(a[c][0],a[c][1],a[c+1][0],a[c+1][1],a[c+2][0],a[c+2][1]);o?(d.lineTo(a[0][0],a[0][1]),d.closePath(),d.fill("evenodd")):d.stroke()}},_fill:function(a){var s=this.context;s.save(),this._setColor(a,"fill")&&s.fill("evenodd"),s.restore()},_rotatePoint:function(a,s,o){return[s*Math.cos(a)-o*Math.sin(a),s*Math.sin(a)+o*Math.cos(a)]},_rotateShape:function(a,s){var o,c=[],h=a.length;if(h<=0)return a;for(o=0;o<h;o++)c.push(this._rotatePoint(s,a[o][0],a[o][1]));return c},updateGradientAngle:function(a,s){var o=1,c=Math.cos(-s),h=Math.sin(-s),d=a.getBoundingBox(),b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js;return Math.abs(c)>Math.abs(h)?o/=Math.abs(c):o/=Math.abs(h),c>=0?($=0,j=c*o):($=-c*o,j=0),h>=0?(Xt=0,Lt=h*o):(Xt=-h*o,Lt=0),b=new Coords(Const.COORDS_BY_USER,[d[0],d[1]],a.board),_=new Coords(Const.COORDS_BY_USER,[d[2],d[3]],a.board),zo=_.scrCoords[1]-b.scrCoords[1],js=_.scrCoords[2]-b.scrCoords[2],fr=b.scrCoords[1]+zo*$,Js=b.scrCoords[2]+js*Xt,Jr=b.scrCoords[1]+zo*j,qs=b.scrCoords[2]+js*Lt,this.context.createLinearGradient(fr,Js,Jr,qs)},updateGradientCircle:function(a,s,o,c,h,d,b){var _=a.getBoundingBox(),$,j,Xt,Lt,fr,Jr,Js,qs,zo,js;return $=new Coords(Const.COORDS_BY_USER,[_[0],_[1]],a.board),j=new Coords(Const.COORDS_BY_USER,[_[2],_[3]],a.board),zo=j.scrCoords[1]-$.scrCoords[1],js=$.scrCoords[2]-j.scrCoords[2],Xt=$.scrCoords[1]+zo*s,Lt=j.scrCoords[2]+js*o,Jr=$.scrCoords[1]+zo*h,Js=j.scrCoords[2]+js*d,fr=c*(zo+js)*.5,qs=b*(zo+js)*.5,this.context.createRadialGradient(Jr,Js,qs,Xt,Lt,fr)},updateGradient:function(a){var s,o=a.evalVisProp("gradient"),c;return s=a.evalVisProp("fillcolor"),o==="linear"?c=this.updateGradientAngle(a,a.evalVisProp("gradientangle")):o==="radial"&&(c=this.updateGradientCircle(a,a.evalVisProp("gradientcx"),a.evalVisProp("gradientcy"),a.evalVisProp("gradientr"),a.evalVisProp("gradientfx"),a.evalVisProp("gradientfy"),a.evalVisProp("gradientfr"))),s!=="none"&&s!==""&&s!==!1&&(c.addColorStop(a.evalVisProp("gradientstartoffset"),s),c.addColorStop(a.evalVisProp("gradientendoffset"),a.evalVisProp("gradientsecondcolor"))),c},_setColor:function(a,s,o){var c=!0,h,d,b,_,$,j,Xt,Lt,fr;return s=s||"stroke",o=o||s,d=this._getHighlighted(a),_=a.evalVisProp(d+s+"color"),_!=="none"&&_!==""&&_!==!1?(Xt=a.evalVisProp(d+s+"opacity"),Xt=Xt>0?Xt:0,_.length!==9?(j=_,Lt=Xt):($=JXG$1.rgba2rgbo(_),j=$[0],Lt=Xt*$[1]),this.context.globalAlpha=Lt,this.context[o+"Style"]=j):c=!1,s!=="stroke"&&(fr=a.evalVisProp("gradient"),fr==="linear"||fr==="radial")?(this.context.globalAlpha=Lt,this.context[o+"Style"]=this.updateGradient(a),c):(b=parseFloat(a.evalVisProp(d+"strokewidth")),s==="stroke"&&!isNaN(b)&&(b===0?this.context.globalAlpha=0:this.context.lineWidth=b),h=a.evalVisProp("linecap"),s==="stroke"&&h!==void 0&&h!==""&&(this.context.lineCap=h),c)},_stroke:function(a){var s=this.context,o=a.evalVisProp("dash"),c=a.evalVisProp("dashscale"),h=c?.5*a.evalVisProp("strokewidth"):1;s.save(),o>0?s.setLineDash&&s.setLineDash(this.dashArray[o-1].map(function(d){return d*h})):this.context.lineDashArray=[],this._setColor(a,"stroke")&&s.stroke(),s.restore()},_translateShape:function(a,s,o){var c,h=[],d=a.length;if(d<=0)return a;for(c=0;c<d;c++)h.push([a[c][0]+s,a[c][1]+o]);return h},drawPoint:function(a){var s=a.evalVisProp("face"),o=a.evalVisProp("size"),c=a.coords.scrCoords,h=o*Math.sqrt(3)*.5,d=o*.5,b=parseFloat(a.evalVisProp("strokewidth"))/2,_=this.context;if(a.visPropCalc.visible)switch(s){case"cross":case"x":_.beginPath(),_.moveTo(c[1]-o,c[2]-o),_.lineTo(c[1]+o,c[2]+o),_.moveTo(c[1]+o,c[2]-o),_.lineTo(c[1]-o,c[2]+o),_.lineCap="round",_.lineJoin="round",_.closePath(),this._stroke(a);break;case"circle":case"o":_.beginPath(),_.arc(c[1],c[2],o+1+b,0,2*Math.PI,!1),_.closePath(),this._fill(a),this._stroke(a);break;case"square":case"[]":if(o<=0)break;_.save(),this._setColor(a,"stroke","fill")&&_.fillRect(c[1]-o-b,c[2]-o-b,o*2+3*b,o*2+3*b),_.restore(),_.save(),this._setColor(a,"fill"),_.fillRect(c[1]-o+b,c[2]-o+b,o*2-b,o*2-b),_.restore();break;case"plus":case"+":_.beginPath(),_.moveTo(c[1]-o,c[2]),_.lineTo(c[1]+o,c[2]),_.moveTo(c[1],c[2]-o),_.lineTo(c[1],c[2]+o),_.lineCap="round",_.lineJoin="round",_.closePath(),this._stroke(a);break;case"divide":case"|":_.beginPath(),_.moveTo(c[1],c[2]-o),_.lineTo(c[1],c[2]+o),_.lineCap="round",_.lineJoin="round",_.closePath(),this._stroke(a);break;case"minus":case"-":_.beginPath(),_.moveTo(c[1]-o,c[2]),_.lineTo(c[1]+o,c[2]),_.lineCap="round",_.lineJoin="round",_.closePath(),this._stroke(a);break;case"diamond2":case"<<>>":o*=1.41;case"diamond":case"<>":_.beginPath(),_.moveTo(c[1]-o,c[2]),_.lineTo(c[1],c[2]+o),_.lineTo(c[1]+o,c[2]),_.lineTo(c[1],c[2]-o),_.closePath(),this._fill(a),this._stroke(a);break;case"triangleup":case"A":case"a":case"^":_.beginPath(),_.moveTo(c[1],c[2]-o),_.lineTo(c[1]-h,c[2]+d),_.lineTo(c[1]+h,c[2]+d),_.closePath(),this._fill(a),this._stroke(a);break;case"triangledown":case"v":_.beginPath(),_.moveTo(c[1],c[2]+o),_.lineTo(c[1]-h,c[2]-d),_.lineTo(c[1]+h,c[2]-d),_.closePath(),this._fill(a),this._stroke(a);break;case"triangleleft":case"<":_.beginPath(),_.moveTo(c[1]-o,c[2]),_.lineTo(c[1]+d,c[2]-h),_.lineTo(c[1]+d,c[2]+h),_.closePath(),this._fill(a),this._stroke(a);break;case"triangleright":case">":_.beginPath(),_.moveTo(c[1]+o,c[2]),_.lineTo(c[1]-d,c[2]-h),_.lineTo(c[1]-d,c[2]+h),_.closePath(),this._fill(a),this._stroke(a);break}},updatePoint:function(a){this.drawPoint(a)},drawArrows:function(a,s,o,c,h){var d,b,_,$,j,Xt,Lt,fr,Jr=this.context,Js=6,qs=1,zo,js,eu=1,Oo=1,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1=h.evFirst,m1=h.evLast;if(a.evalVisProp("strokecolor")!=="none"&&(h1||m1)){if(a.elementClass===Const.OBJECT_CLASS_LINE)d=s.scrCoords[1],b=s.scrCoords[2],_=o.scrCoords[1],$=o.scrCoords[2],s1=c1=Math.atan2($-b,_-d);else{if(d=a.points[0].scrCoords[1],b=a.points[0].scrCoords[2],i1=a.points.length-1,i1<1)return;_=a.points[a.points.length-1].scrCoords[1],$=a.points[a.points.length-1].scrCoords[2],t1=a.points[1].scrCoords[1]-a.points[0].scrCoords[1],e1=a.points[1].scrCoords[2]-a.points[0].scrCoords[2],r1=a.points[i1].scrCoords[1]-a.points[i1-1].scrCoords[1],a1=a.points[i1].scrCoords[2]-a.points[i1-1].scrCoords[2],h1&&(s1=Math.atan2(e1,t1)),m1&&(c1=Math.atan2(a1,r1))}if(Xt=a.evalVisProp(c+"strokewidth"),h1)if(Js=h.sizeFirst,j=Xt*Js,qs=h.typeFirst,zo=qs,qs===2)fr=[[j,-j*.5],[0,0],[j,j*.5],[j*.5,0]];else if(qs===3)fr=[[j/3,-j*.5],[0,-j*.5],[0,j*.5],[j/3,j*.5]];else if(qs===4)for(j/=10,eu=3,fr=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]],vu=fr.length,Bo=0;Bo<vu;Bo++)fr[Bo][0]*=-j,fr[Bo][1]*=j,fr[Bo][0]+=10*j,fr[Bo][1]-=3.31*j;else if(qs===5)for(j/=10,eu=3,fr=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]],vu=fr.length,Bo=0;Bo<vu;Bo++)fr[Bo][0]*=-j,fr[Bo][1]*=j,fr[Bo][0]+=10*j,fr[Bo][1]-=3.28*j;else if(qs===6)for(j/=10,eu=3,fr=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]],vu=fr.length,Bo=0;Bo<vu;Bo++)fr[Bo][0]*=-j,fr[Bo][1]*=j,fr[Bo][0]+=10*j,fr[Bo][1]-=2.84*j;else if(qs===7)for(j=Xt,eu=3,fr=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]],vu=fr.length,Bo=0;Bo<vu;Bo++)fr[Bo][0]*=-j,fr[Bo][1]*=j,fr[Bo][0]+=10*j,fr[Bo][1]-=5.2*j;else fr=[[j,-j*.5],[0,0],[j,j*.5]];if(m1)if(Js=h.sizeLast,j=Xt*Js,qs=h.typeLast,js=qs,qs===2)Lt=[[-j,-j*.5],[0,0],[-j,j*.5],[-j*.5,0]];else if(qs===3)Lt=[[-j/3,-j*.5],[0,-j*.5],[0,j*.5],[-j/3,j*.5]];else if(qs===4)for(j/=10,Oo=3,Lt=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]],vu=Lt.length,Bo=0;Bo<vu;Bo++)Lt[Bo][0]*=j,Lt[Bo][1]*=j,Lt[Bo][0]-=10*j,Lt[Bo][1]-=3.31*j;else if(qs===5)for(j/=10,Oo=3,Lt=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]],vu=Lt.length,Bo=0;Bo<vu;Bo++)Lt[Bo][0]*=j,Lt[Bo][1]*=j,Lt[Bo][0]-=10*j,Lt[Bo][1]-=3.28*j;else if(qs===6)for(j/=10,Oo=3,Lt=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]],vu=Lt.length,Bo=0;Bo<vu;Bo++)Lt[Bo][0]*=j,Lt[Bo][1]*=j,Lt[Bo][0]-=10*j,Lt[Bo][1]-=2.84*j;else if(qs===7)for(j=Xt,Oo=3,Lt=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]],vu=Lt.length,Bo=0;Bo<vu;Bo++)Lt[Bo][0]*=j,Lt[Bo][1]*=j,Lt[Bo][0]-=10*j,Lt[Bo][1]-=5.2*j;else Lt=[[-j,-j*.5],[0,0],[-j,j*.5]];Jr.save(),this._setColor(a,"stroke","fill")&&(this._setColor(a,"stroke"),h1&&(zo===7?tu=!1:tu=!0,this._drawPolygon(this._translateShape(this._rotateShape(fr,s1),d,b),eu,tu)),m1&&(js===7?tu=!1:tu=!0,this._drawPolygon(this._translateShape(this._rotateShape(Lt,c1),_,$),Oo,tu))),Jr.restore()}},drawLine:function(a){var s,o,c=new Coords(Const.COORDS_BY_USER,a.point1.coords.usrCoords,a.board),h=new Coords(Const.COORDS_BY_USER,a.point2.coords.usrCoords,a.board),d=null,b,_,$;a.visPropCalc.visible&&(b=this._getHighlighted(a),_=a.evalVisProp(b+"strokewidth"),$=this.getArrowHeadData(a,_,b),($.evFirst||$.evLast)&&(d=-4),Geometry.calcStraight(a,c,h,d),this.handleTouchpoints(a,c,h,$),s=new Coords(Const.COORDS_BY_USER,c.usrCoords,a.board),o=new Coords(Const.COORDS_BY_USER,h.usrCoords,a.board),this.getPositionArrowHead(a,c,h,$),this.context.beginPath(),this.context.moveTo(c.scrCoords[1],c.scrCoords[2]),this.context.lineTo(h.scrCoords[1],h.scrCoords[2]),this._stroke(a),($.evFirst||$.evLast)&&this.drawArrows(a,s,o,b,$))},updateLine:function(a){this.drawLine(a)},drawTicks:function(){},updateTicks:function(a){var s,o,c,h,d=a.ticks.length,b,_,$=this.context;for($.beginPath(),s=0;s<d;s++)for(o=a.ticks[s],c=o[0],h=o[1],b=c.length,$.moveTo(c[0],h[0]),_=1;_<b;++_)$.lineTo(c[_],h[_]);$.lineCap="round",this._stroke(a)},drawCurve:function(a){var s,o,c;a.evalVisProp("handdrawing")?this.updatePathStringBezierPrim(a):this.updatePathStringPrim(a),a.numberPoints>1&&(s=this._getHighlighted(a),o=a.evalVisProp(s+"strokewidth"),c=this.getArrowHeadData(a,o,s),(c.evFirst||c.evLast)&&this.drawArrows(a,null,null,s,c))},updateCurve:function(a){this.drawCurve(a)},drawEllipse:function(a){var s=a.center.coords.scrCoords[1],o=a.center.coords.scrCoords[2],c=a.board.unitX,h=a.board.unitY,d=2*a.Radius(),b=2*a.Radius(),_=d*c,$=b*h,j=s-_/2,Xt=o-$/2,Lt=_/2*.5522848,fr=$/2*.5522848,Jr=j+_,Js=Xt+$,qs=j+_/2,zo=Xt+$/2,js=this.context;d>0&&b>0&&!isNaN(s+o)&&(js.beginPath(),js.moveTo(j,zo),js.bezierCurveTo(j,zo-fr,qs-Lt,Xt,qs,Xt),js.bezierCurveTo(qs+Lt,Xt,Jr,zo-fr,Jr,zo),js.bezierCurveTo(Jr,zo+fr,qs+Lt,Js,qs,Js),js.bezierCurveTo(qs-Lt,Js,j,zo+fr,j,zo),js.closePath(),this._fill(a),this._stroke(a))},updateEllipse:function(a){return this.drawEllipse(a)},displayCopyright:function(a,s){var o=this.context,c=4+1.8*s,h=6+s,d=.2;o.save(),o.font=s+"px Arial",o.globalAlpha=d,o.lineWidth=.5,o.fillText(a+".",c,h),o.restore()},displayLogo:function(a,s,o){var c=this.context,h=1.5*s,d=.2;JXG$1.exists(o._logo_image)||(o._logo_image=new Image,o._logo_image.src=a),o._logo_image.onload=function(){c.save(),c.globalAlpha=d,c.drawImage(o._logo_image,5,5,h,h),c.restore()},c.save(),c.globalAlpha=d,c.drawImage(o._logo_image,5,5,h,h),c.restore()},drawInternalText:function(a){var s=a.evalVisProp("fontsize"),o=a.evalVisProp("fontunit"),c=a.getAnchorX(),h=a.getAnchorY(),d=this.context;return d.save(),this._setColor(a,"stroke","fill")&&!isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])&&(d.font=(s>0?s:0)+o+" Arial",this.transformRect(a,a.transformations),c==="left"?d.textAlign="left":c==="right"?d.textAlign="right":c==="middle"&&(d.textAlign="center"),h==="bottom"?d.textBaseline="bottom":h==="top"?d.textBaseline="top":h==="middle"&&(d.textBaseline="middle"),d.fillText(a.plaintext,a.coords.scrCoords[1],a.coords.scrCoords[2])),d.restore(),null},updateInternalText:function(a){this.drawInternalText(a)},setObjectStrokeColor:function(a,s,o){var c=s,h,d,b=o,_,$;b=b>0?b:0,!(a.visPropOld.strokecolor===c&&a.visPropOld.strokeopacity===b)&&(JXG$1.exists(c)&&c!==!1&&(c.length!==9?(h=c,_=b):(d=JXG$1.rgba2rgbo(c),h=d[0],_=b*d[1]),$=a.rendNode,a.elementClass===Const.OBJECT_CLASS_TEXT&&a.evalVisProp("display")==="html"&&($.style.color=h,$.style.opacity=_)),a.visPropOld.strokecolor=c,a.visPropOld.strokeopacity=b)},drawImage:function(a){a.rendNode=new Image,a._src="",this.updateImage(a)},updateImage:function(a){var s=this.context,o=a.evalVisProp("fillopacity"),c=JXG$1.bind(function(){a.imgIsLoaded=!0,!(a.size[0]<=0||a.size[1]<=0)&&(s.save(),s.globalAlpha=o,this.transformRect(a,a.transformations),s.drawImage(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]),s.restore())},this);this.updateImageURL(a)?a.rendNode.onload=c:a.imgIsLoaded&&c()},transformRect:function(a,s){var o,c,h,d,b,_=s.length,$=this.context;if(_>0)if(o=this.joinTransforms(a,s),a.elementClass===Const.OBJECT_CLASS_TEXT&&a.visProp.display==="html"){if(c=" matrix("+[o[1][1],o[2][1],o[1][2],o[2][2],o[1][0],o[2][0]].join(",")+") ",c.indexOf("NaN")===-1){switch(b=a.rendNode,b.style.transform=c,h=-a.coords.scrCoords[1],d=-a.coords.scrCoords[2],a.evalVisProp("anchorx")){case"right":h+=a.size[0];break;case"middle":h+=a.size[0]*.5;break}switch(a.evalVisProp("anchory")){case"bottom":d+=a.size[1];break;case"middle":d+=a.size[1]*.5;break}b.style["transform-origin"]=h+"px "+d+"px"}}else Math.abs(Numerics.det(o))>=Mat.eps&&$.transform(o[1][1],o[2][1],o[1][2],o[2][2],o[1][0],o[2][0])},updateImageURL:function(a){var s;return s=a.eval(a.url),a._src!==s?(a.imgIsLoaded=!1,a.rendNode.src=s,a._src=s,!0):!1},remove:function(a){JXG$1.exists(a)&&JXG$1.exists(a.parentNode)&&a.parentNode.removeChild(a)},updatePathStringPrim:function(a){var s,o,c,h,d,b="M",_="L",$="C",j=b,Xt=5e3,Lt=this.context;if(!(a.numberPoints<=0)){if(d=Math.min(a.points.length,a.numberPoints),Lt.beginPath(),a.bezierDegree===1)for(s=0;s<d;s++)o=a.points[s].scrCoords,isNaN(o[1])||isNaN(o[2])?j=b:(o[1]>Xt?o[1]=Xt:o[1]<-Xt&&(o[1]=-Xt),o[2]>Xt?o[2]=Xt:o[2]<-Xt&&(o[2]=-Xt),j===b?Lt.moveTo(o[1],o[2]):Lt.lineTo(o[1],o[2]),j=_);else if(a.bezierDegree===3)for(s=0;s<d;)o=a.points[s].scrCoords,isNaN(o[1])||isNaN(o[2])?j=b:(j===b?Lt.moveTo(o[1],o[2]):(s+=1,c=a.points[s].scrCoords,s+=1,h=a.points[s].scrCoords,Lt.bezierCurveTo(o[1],o[2],c[1],c[2],h[1],h[2])),j=$),s+=1;Lt.lineCap="round",Lt.lineJoin="round",this._fill(a),this._stroke(a)}},updatePathStringBezierPrim:function(a){var s,o,c,h,d,b,_,$="M",j="C",Xt=$,Lt=5e3,fr=a.evalVisProp("strokewidth"),Jr=a.evalVisProp("curvetype")!=="plot",Js=this.context;if(!(a.numberPoints<=0)){for(Jr&&a.board.options.curve.RDPsmoothing&&(a.points=Numerics.RamerDouglasPeucker(a.points,.5)),_=Math.min(a.points.length,a.numberPoints),Js.beginPath(),o=1;o<3;o++)for(Xt=$,s=0;s<_;s++)h=a.points[s].scrCoords,isNaN(h[1])||isNaN(h[2])?Xt=$:(h[1]>Lt?h[1]=Lt:h[1]<-Lt&&(h[1]=-Lt),h[2]>Lt?h[2]=Lt:h[2]<-Lt&&(h[2]=-Lt),Xt===$?Js.moveTo(h[1],h[2]):(c=2*o,Js.bezierCurveTo(d+(h[1]-d)*.333+fr*(c*Math.random()-o),b+(h[2]-b)*.333+fr*(c*Math.random()-o),d+(h[1]-d)*.666+fr*(c*Math.random()-o),b+(h[2]-b)*.666+fr*(c*Math.random()-o),h[1],h[2])),Xt=j,d=h[1],b=h[2]);Js.lineCap="round",Js.lineJoin="round",this._fill(a),this._stroke(a)}},updatePolygonPrim:function(a,s){var o,c,h,d=s.vertices.length,b=this.context,_=!0;if(!(d<=0||!s.visPropCalc.visible)){for(s.elType==="polygonalchain"&&d++,b.beginPath(),c=0;!s.vertices[c].isReal&&c<d-1;)c++,_=!1;for(o=s.vertices[c].coords.scrCoords,b.moveTo(o[1],o[2]),h=c;h<d-1;h++)s.vertices[h].isReal||(_=!1),o=s.vertices[h].coords.scrCoords,b.lineTo(o[1],o[2]);b.closePath(),_&&this._fill(s)}},display:function(a,s){a&&a.rendNode&&(a.visPropOld.visible=s,s?a.rendNode.style.visibility="inherit":a.rendNode.style.visibility="hidden")},show:function(a){JXG$1.deprecated("Board.renderer.show()","Board.renderer.display()"),JXG$1.exists(a.rendNode)&&(a.rendNode.style.visibility="inherit")},hide:function(a){JXG$1.deprecated("Board.renderer.hide()","Board.renderer.display()"),JXG$1.exists(a.rendNode)&&(a.rendNode.style.visibility="hidden")},setGradient:function(a){},setShadow:function(a){a.visPropOld.shadow!==a.visProp.shadow&&(a.visPropOld.shadow=a.visProp.shadow)},highlight:function(a){return a.elementClass===Const.OBJECT_CLASS_TEXT&&a.evalVisProp("display")==="html"?this.updateTextStyle(a,!0):(a.board.prepareUpdate(),a.board.renderer.suspendRedraw(a.board),a.board.updateRenderer(),a.board.renderer.unsuspendRedraw()),this},noHighlight:function(a){return a.elementClass===Const.OBJECT_CLASS_TEXT&&a.evalVisProp("display")==="html"?this.updateTextStyle(a,!1):(a.board.prepareUpdate(),a.board.renderer.suspendRedraw(a.board),a.board.updateRenderer(),a.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(a){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),a&&(a.attr.showcopyright||a.attr.showlogo)&&this.displayLogo(JXG$1.licenseLogo,12,a),a&&a.attr.showcopyright&&this.displayCopyright(JXG$1.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(a,s){this.container?(this.canvasRoot.style.width=parseFloat(a)+"px",this.canvasRoot.style.height=parseFloat(s)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(a)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(s)+"px")):(this.canvasRoot.width=2*parseFloat(a),this.canvasRoot.height=2*parseFloat(s)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});const CanvasRenderer=JXG$1.CanvasRenderer;JXG$1.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"};JXG$1.extend(JXG$1.NoRenderer.prototype,{drawPoint:function(a){},updatePoint:function(a){},changePointStyle:function(a){},drawLine:function(a){},updateLine:function(a){},drawTicks:function(a){},updateTicks:function(a){},drawCurve:function(a){},updateCurve:function(a){},drawEllipse:function(a){},updateEllipse:function(a){},drawPolygon:function(a){},updatePolygon:function(a){},displayCopyright:function(a,s){},drawInternalText:function(a){},updateInternalText:function(a){},drawText:function(a){},updateText:function(a){},updateTextStyle:function(a,s){},updateInternalTextStyle:function(a,s,o){},drawImage:function(a){},updateImage:function(a){},updateImageURL:function(a){},appendChildPrim:function(a,s){},appendNodesToElement:function(a,s){},remove:function(a){},makeArrows:function(a){},updateEllipsePrim:function(a,s,o,c,h){},updateLinePrim:function(a,s,o,c,h,d){},updatePathPrim:function(a,s,o){},updatePathStringPoint:function(a,s,o){},updatePathStringPrim:function(a){},updatePathStringBezierPrim:function(a){},updatePolygonPrim:function(a,s){},updateRectPrim:function(a,s,o,c,h){},setPropertyPrim:function(a,s,o){},show:function(a){},hide:function(a){},setBuffering:function(a,s){},setDashStyle:function(a){},setDraft:function(a){},removeDraft:function(a){},setGradient:function(a){},updateGradient:function(a){},setObjectTransition:function(a,s){},setObjectFillColor:function(a,s,o){},setObjectStrokeColor:function(a,s,o){},setObjectStrokeWidth:function(a,s){},setShadow:function(a){},highlight:function(a){},noHighlight:function(a){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(a){},getElementById:function(a){return null},resize:function(a,s){},removeToInsertLater:function(){return function(){}}});JXG$1.NoRenderer.prototype=new AbstractRenderer;const NoRenderer=JXG$1.NoRenderer;JXG$1.JSXGraph={rendererType:function(){return Options$1.board.renderer="no",JXG$1.supportsVML()&&(Options$1.board.renderer="vml",document.onmousemove=function(){var a;return document.body&&(a=document.body.scrollLeft,a+=document.body.scrollTop),a}),JXG$1.supportsCanvas()&&(Options$1.board.renderer="canvas"),JXG$1.supportsSVG()&&(Options$1.board.renderer="svg"),JXG$1.isNode()&&JXG$1.supportsCanvas()&&(Options$1.board.renderer="canvas"),(JXG$1.isNode()||Options$1.renderer==="no")&&(Options$1.text.display="internal",Options$1.infobox.display="internal"),Options$1.board.renderer}(),initRenderer:function(a,s,o,c){var h,d;if((!JXG$1.exists(o)||o===!1)&&typeof document=="object"&&(o=document),typeof o=="object"&&a!==null)for(h=JXG$1.isString(a)?o.getElementById(a):a;h.firstChild;)h.removeChild(h.firstChild);else h=a;return(c===void 0||c==="auto")&&(c=this.rendererType),c==="svg"?d=new SVGRenderer(h,s):c==="vml"?d=new VMLRenderer(h):c==="canvas"?d=new CanvasRenderer(h,s):d=new NoRenderer,d},_setAttributes:function(a,s){var o=JXG$1.copyAttributes(a,s,"board"),c=["drag","fullscreen","intl","keyboard","logging","pan","resize","screenshot","selection","zoom"],h=c.length,d,b;for(d=0;d<h;d++)b=c[d],o[b]=JXG$1.copyAttributes(o,s,"board",b);return o.navbar=JXG$1.copyAttributes(o.navbar,s,"navbar"),o.movetarget=a.moveTarget||a.movetarget||s.board.moveTarget,o},_fillBoard:function(a,s,o){a.initInfobox(s.infobox),a.maxboundingbox=s.maxboundingbox,a.resizeContainer(o.width,o.height,!0,!0),a._createSelectionPolygon(s),a.renderer.drawNavigationBar(a,s.navbar),JXG$1.boards[a.id]=a},_setARIA:function(a,s){var o=s.document,c;if(typeof o!="object"){if(!JXG$1.isBrowser)return;o=document}c=JXG$1.isString(a)?o.getElementById(a):a,c.setAttribute("role","region"),c.setAttribute("aria-label",s.title)},_removeARIANodes:function(a){var s,o,c;c=a.document||document,typeof c=="object"&&(o=a.containerObj.getAttribute("aria-labelledby"),s=c.getElementById(o),s&&s.parentNode&&s.parentNode.removeChild(s),o=a.containerObj.getAttribute("aria-describedby"),s=c.getElementById(o),s&&s.parentNode&&s.parentNode.removeChild(s))},initBoard:function(a,s){var o,c,h,d,b,_,$=0,j=0,Xt,Lt,fr,Jr,Js,qs,zo,js,eu={},Oo;return s=s||{},s.theme!=="default"&&JXG$1.exists(JXG$1.themes[s.theme])&&(eu=JXG$1.themes[s.theme]),js=JXG$1.deepCopy(Options$1,eu,!0),Jr=this._setAttributes(s,js),Lt=JXG$1.getDimensions(a,Jr.document),Jr.unitx||Jr.unity?(o=JXG$1.def(Jr.originx,150),c=JXG$1.def(Jr.originy,150),h=JXG$1.def(Jr.unitx,50),d=JXG$1.def(Jr.unity,50)):(fr=Jr.boundingbox,fr[0]<Jr.maxboundingbox[0]&&(fr[0]=Jr.maxboundingbox[0]),fr[1]>Jr.maxboundingbox[1]&&(fr[1]=Jr.maxboundingbox[1]),fr[2]>Jr.maxboundingbox[2]&&(fr[2]=Jr.maxboundingbox[2]),fr[3]<Jr.maxboundingbox[3]&&(fr[3]=Jr.maxboundingbox[3]),b=parseInt(Lt.width,10),_=parseInt(Lt.height,10),JXG$1.exists(fr)&&Jr.keepaspectratio?(h=b/(fr[2]-fr[0]),d=_/(fr[1]-fr[3]),Math.abs(h)<Math.abs(d)?(d=Math.abs(h)*d/Math.abs(d),j=(_/d-(fr[1]-fr[3]))*.5):(h=Math.abs(d)*h/Math.abs(h),$=(b/h-(fr[2]-fr[0]))*.5)):(h=b/(fr[2]-fr[0]),d=_/(fr[1]-fr[3])),o=-h*(fr[0]-$),c=d*(fr[1]+j)),Xt=this.initRenderer(a,Lt,Jr.document,Jr.renderer),this._setARIA(a,Jr),Oo=new Board(a,Xt,Jr.id,[o,c],Jr.zoomx,Jr.zoomy,h,d,Lt.width,Lt.height,Jr),Oo.keepaspectratio=Jr.keepaspectratio,this._fillBoard(Oo,Jr,Lt),Oo.suspendUpdate(),Jr=Oo.attr,Jr.axis&&(Js=typeof Jr.axis=="object"?Jr.axis:{},qs=JXG$1.deepCopy(js.board.defaultaxes.x,Js),zo=JXG$1.deepCopy(js.board.defaultaxes.y,Js),Jr.defaultaxes.x&&(qs=JXG$1.deepCopy(qs,Jr.defaultaxes.x)),Jr.defaultaxes.y&&(zo=JXG$1.deepCopy(zo,Jr.defaultaxes.y)),Oo.defaultAxes={},Oo.defaultAxes.x=Oo.create("axis",[[0,0],[1,0]],qs),Oo.defaultAxes.y=Oo.create("axis",[[0,0],[0,1]],zo)),Jr.grid&&Oo.create("grid",[],typeof Jr.grid=="object"?Jr.grid:{}),Oo.unsuspendUpdate(),Oo},loadBoardFromFile:function(a,s,o,c,h){var d,b,_,$,j;return c=c||{},d=this._setAttributes(c),$=JXG$1.getDimensions(a,d.document),b=this.initRenderer(a,$,d.document,d.renderer),this._setARIA(a,d),_=new Board(a,b,"",[150,150],1,1,50,50,$.width,$.height,d),this._fillBoard(_,d,$),j=d.encoding||"iso-8859-1",FileReader$1.parseFileContent(s,_,o,!0,j,h),_},loadBoardFromString:function(a,s,o,c,h){var d,b,_,$;return c=c||{},d=this._setAttributes(c),$=JXG$1.getDimensions(a,d.document),b=this.initRenderer(a,$,d.document,d.renderer),this._setARIA(a,d),_=new Board(a,b,"",[150,150],1,1,50,50,$.width,$.height,d),this._fillBoard(_,d,$),FileReader$1.parseString(s,_,o,!0,h),_},freeBoard:function(a){var s;typeof a=="string"&&(a=JXG$1.boards[a]),this._removeARIANodes(a),a.removeEventHandlers(),a.suspendUpdate();for(s in a.objects)a.objects.hasOwnProperty(s)&&a.objects[s].remove();for(;a.containerObj.firstChild;)a.containerObj.removeChild(a.containerObj.firstChild);for(s in a.objects)a.objects.hasOwnProperty(s)&&delete a.objects[s];delete a.renderer,a.jc.creator.clearCache(),delete a.jc,delete JXG$1.boards[a.id]},registerElement:function(a,s){JXG$1.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),JXG$1.registerElement(a,s)}};JXG$1.isBrowser&&typeof window=="object"&&typeof document=="object"&&JXG$1.addEvent(window,"load",function(){var a,s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu=!1,Oo=document.getElementsByTagName("script"),tu=function(vu,t1,e1){var r1=JXG$1.JSXGraph.initBoard(h,{boundingbox:e1,keepaspectratio:!0,grid:Js,axis:Jr,showReload:!0});if(t1.toLowerCase().indexOf("script")>-1)r1.construct(vu);else try{r1.jc.parse(vu)}catch(a1){JXG$1.debug(a1)}return r1},Bo=function(vu,t1,e1,r1){return function(){var a1;JXG$1.JSXGraph.freeBoard(vu),a1=tu(t1,e1,r1),a1.reload=Bo(a1,t1,e1,r1)}};for(s=0;s<Oo.length;s++)if(a=Oo[s].getAttribute("type",!1),JXG$1.exists(a)&&(a.toLowerCase()==="text/jessiescript"||a.toLowerCase()==="jessiescript"||a.toLowerCase()==="text/jessiecode"||a.toLowerCase()==="jessiecode")){if(Lt=Oo[s].getAttribute("class",!1)||"",_=Oo[s].getAttribute("width",!1)||"",$=Oo[s].getAttribute("height",!1)||"",j=Oo[s].getAttribute("maxwidth",!1)||"100%",Xt=Oo[s].getAttribute("aspectratio",!1)||"1/1",fr=Oo[s].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",h=Oo[s].getAttribute("container",!1),zo=Oo[s].getAttribute("src",!1),fr=fr.split(","),fr.length!==4)fr=[-5,5,5,-5];else for(o=0;o<fr.length;o++)fr[o]=parseFloat(fr[o]);if(Jr=JXG$1.str2Bool(Oo[s].getAttribute("axis",!1)||"false"),Js=JXG$1.str2Bool(Oo[s].getAttribute("grid",!1)||"false"),JXG$1.exists(h))c=document.getElementById(h);else{h="jessiescript_autgen_jxg_"+s,c=document.createElement("div"),c.setAttribute("id",h),b=_!==""?"width:"+_+";":"",b+=$!==""?"height:"+$+";":"",b+=j!==""?"max-width:"+j+";":"",b+=Xt!==""?"aspect-ratio:"+Xt+";":"",c.setAttribute("style",b),c.setAttribute("class","jxgbox "+Lt);try{document.body.insertBefore(c,Oo[s])}catch{JXG$1.exists(jQuery)&&typeof jQuery=="object"&&jQuery(c).insertBefore(Oo[s])}}qs="",JXG$1.exists(zo)?(eu=!0,js=new XMLHttpRequest,js.open("GET",zo),js.overrideMimeType("text/plain; charset=x-user-defined"),js.addEventListener("load",function(){if(this.status<400)qs=this.responseText+`
`+qs,d=tu(qs,a,fr),d.reload=Bo(d,qs,a,fr);else throw new Error(`
JSXGraph: failed to load file`,zo,":",this.responseText)}),js.addEventListener("error",function(vu){throw new Error(`
JSXGraph: failed to load file`,zo,":",vu)}),js.send()):eu=!1,document.getElementById(h)?(qs=Oo[s].innerHTML,qs=qs.replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),Oo[s].innerHTML=qs,eu||(d=tu(qs,a,fr),d.reload=Bo(d,qs,a,fr))):JXG$1.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window);JXG$1.JSXGraph;JXG$1.Point=function(a,s,o){this.constructor(a,o,Const.OBJECT_TYPE_POINT,Const.OBJECT_CLASS_POINT),this.element=this.board.select(o.anchor),this.coordsConstructor(s),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()};JXG$1.Point.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Point,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.Point.prototype,{hasPoint:function(a,s){var o=this.coords.scrCoords,c,h,d,b=this.evalVisProp("sizeunit");return JXG$1.isObject(this.evalVisProp("precision"))?(d=this.board._inputDevice,h=this.evalVisProp("precision."+d)):h=this.board.options.precision.hasPoint,c=parseFloat(this.evalVisProp("size")),b==="user"&&(c*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),c+=parseFloat(this.evalVisProp("strokewidth"))*.5,c<h&&(c=h),Math.abs(o[1]-a)<c+2&&Math.abs(o[2]-s)<c+2},update:function(a){return this.needsUpdate?(this.updateCoords(a),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateTransform:function(a){var s,o;if(this.transformations.length===0||this.baseElement===null)return this;for(this.transformations[0].update(),this===this.baseElement?s=this.transformations[0].apply(this,"self"):s=this.transformations[0].apply(this.baseElement),o=1;o<this.transformations.length;o++)this.transformations[o].update(),s=Mat.matVecMult(this.transformations[o].matrix,s);return this.coords.setCoordinates(Const.COORDS_BY_USER,s),this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(a,s,o,c){var h;a=this.board.select(a),s=this.board.select(s),h=Geometry.intersectionFunction(this.board,a,s,o,c,this.visProp.alwaysintersect),this.addConstraint([h]);try{a.addChild(this),s.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof a+"' and '"+typeof s+"'.")}this.type=Const.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[a.id,s.id,o,c],this.generatePolynomial=function(){var d=a.generatePolynomial(this),b=s.generatePolynomial(this);return d.length===0||b.length===0?[]:[d[0],b[0]]},this.prepareUpdate().update()},setStyle:function(a){var s=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"],o=[2,3,4,1,2,3,4,2,3,4,2,3,4];return this.visProp.face=s[a],this.visProp.size=o[a],this.board.renderer.changePointStyle(this),this},normalizeFace:function(a){return JXG$1.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),Options$1.normalizePointFace(a)},face:function(a){JXG$1.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:a})},size:function(a){JXG$1.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:a})},isOn:function(a,s){var o,c;return s=s||Mat.eps,JXG$1.isPoint(a)?this.Dist(a)<s:a.elementClass===Const.OBJECT_CLASS_LINE?a.elType==="segment"&&!this.evalVisProp("alwaysintersect")?(o=JXG$1.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,a.point1.coords.usrCoords,a.point2.coords.usrCoords),o[1]>=0&&o[1]<=1&&Geometry.distPointLine(this.coords.usrCoords,a.stdform)<s):Geometry.distPointLine(this.coords.usrCoords,a.stdform)<s:a.elementClass===Const.OBJECT_CLASS_CIRCLE?a.evalVisProp("hasinnerpoints")?this.Dist(a.center)<a.Radius()+s:Math.abs(this.Dist(a.center)-a.Radius())<s:a.elementClass===Const.OBJECT_CLASS_CURVE?(c=Geometry.projectPointToCurve(this,a,this.board)[0],Geometry.distance(this.coords.usrCoords,c.usrCoords,3)<s):a.type===Const.OBJECT_TYPE_POLYGON?a.evalVisProp("hasinnerpoints")&&a.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],JXG$1.COORDS_BY_USER)?!0:(o=Geometry.projectCoordsToPolygon(this.coords.usrCoords,a),Geometry.distance(this.coords.usrCoords,o,3)<s):a.type===Const.OBJECT_TYPE_TURTLE?(c=Geometry.projectPointToTurtle(this,a,this.board),Geometry.distance(this.coords.usrCoords,c.usrCoords,3)<s):!1},cloneToBackground:function(){var a=JXG$1.getCloneObject(this);return this.board.renderer.drawPoint(a),this.traces[a.id]=a.rendNode,this}});JXG$1.createPoint=function(a,s,o){var c,h;if(h=JXG$1.copyAttributes(o,a.options,"point"),c=CoordsElement.create(JXG$1.Point,a,s,h),!c)throw new Error("JSXGraph: Can't create point with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return c};JXG$1.createGlider=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"glider");return s.length===1?h=[0,0]:h=s.slice(0,2),c=a.create("point",h,d),c.makeGlider(s[s.length-1]),c};JXG$1.createIntersectionPoint=function(a,s,o){var c,h,d,b,_,$,j=JXG$1.copyAttributes(o,a.options,"intersection");s.push(0,0),h=a.select(s[0]),d=a.select(s[1]),_=s[2]||0,$=s[3]||0,c=a.create("point",[0,0,0],j),b=Geometry.intersectionFunction(a,h,d,_,$,c.visProp.alwaysintersect),c.addConstraint([b]);try{h.addChild(c),d.addChild(c)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'.")}return c.type=Const.OBJECT_TYPE_INTERSECTION,c.elType="intersection",c.setParents([h.id,d.id]),c.intersectionNumbers=[_,$],c.getParents=function(){return this.parents.concat(this.intersectionNumbers)},c.generatePolynomial=function(){var Xt=h.generatePolynomial(c),Lt=d.generatePolynomial(c);return Xt.length===0||Lt.length===0?[]:[Xt[0],Lt[0]]},c};JXG$1.createOtherIntersectionPoint=function(a,s,o){var c,h,d,b,_,$,j,Xt=!0,Lt=JXG$1.copyAttributes(o,a.options,"otherintersection");if(s.length!==3)Xt=!1;else{for(h=a.select(s[0]),d=a.select(s[1]),JXG$1.isArray(s[2])?_=s[2]:_=[s[2]],b=0;b<_.length;b++)if(_[b]=a.select(_[b]),!JXG$1.isPoint(_[b])){Xt=!1;break}Xt&&(j=[h,d],j.sort(function(fr,Jr){return Jr.elementClass-fr.elementClass}),([Const.OBJECT_CLASS_CIRCLE,Const.OBJECT_CLASS_CURVE].indexOf(j[0].elementClass)<0||[Const.OBJECT_CLASS_CIRCLE,Const.OBJECT_CLASS_CURVE,Const.OBJECT_CLASS_LINE].indexOf(j[1].elementClass)<0)&&(Xt=!1))}if(!Xt)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof s[0]+"',  '"+typeof s[1]+"'and  '"+typeof s[2]+`'.
Possible parent types: [circle|curve|line,circle|curve|line, point], not two lines`);return c=a.create("point",[0,0,0],Lt),$=Geometry.otherIntersectionFunction(j,_,c.visProp.alwaysintersect,c.visProp.precision),c.addConstraint([$]),c.type=Const.OBJECT_TYPE_INTERSECTION,c.elType="otherintersection",c.setParents([h.id,d.id]),c.addParents(_),h.addChild(c),d.addChild(c),h.elementClass===Const.OBJECT_CLASS_CIRCLE&&(c.generatePolynomial=function(){var fr=h.generatePolynomial(c),Jr=d.generatePolynomial(c);return fr.length===0||Jr.length===0?[]:[fr[0],Jr[0]]}),c};JXG$1.createPolePoint=function(a,s,o){var c,h,d,b,_,$,j;if(s.length>1&&(b=s[0].type===Const.OBJECT_TYPE_CONIC||s[0].elementClass===Const.OBJECT_CLASS_CIRCLE,_=s[1].type===Const.OBJECT_TYPE_CONIC||s[1].elementClass===Const.OBJECT_CLASS_CIRCLE,$=s[0].elementClass===Const.OBJECT_CLASS_LINE,j=s[1].elementClass===Const.OBJECT_CLASS_LINE),s.length!==2||!(b&&j||$&&_))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent type: [conic|circle,line], [line,conic|circle]`);return j?(h=a.select(s[0]),d=a.select(s[1])):(h=a.select(s[1]),d=a.select(s[0])),c=a.create("point",[function(){var Xt=h.quadraticform,Lt=d.stdform.slice(0,3);return[JXG$1.Math.Numerics.det([Lt,Xt[1],Xt[2]]),JXG$1.Math.Numerics.det([Xt[0],Lt,Xt[2]]),JXG$1.Math.Numerics.det([Xt[0],Xt[1],Lt])]}],o),c.elType="polepoint",c.setParents([h.id,d.id]),h.addChild(c),d.addChild(c),c};JXG$1.registerElement("point",JXG$1.createPoint);JXG$1.registerElement("glider",JXG$1.createGlider);JXG$1.registerElement("intersection",JXG$1.createIntersectionPoint);JXG$1.registerElement("otherintersection",JXG$1.createOtherIntersectionPoint);JXG$1.registerElement("polepoint",JXG$1.createPolePoint);const Point=JXG$1.Point;JXG$1.Line=function(a,s,o,c){this.constructor(a,c,Const.OBJECT_TYPE_LINE,Const.OBJECT_CLASS_LINE),this.point1=this.board.select(s),this.point2=this.board.select(o),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=JXG$1.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"Slope",Slope:"Slope",Direction:"Direction",getRise:"getRise",Rise:"getRise",getYIntersect:"getRise",YIntersect:"getRise",getAngle:"getAngle",Angle:"getAngle",L:"L",length:"L",setFixedLength:"setFixedLength",setStraight:"setStraight"})};JXG$1.Line.prototype=new GeometryElement;JXG$1.extend(JXG$1.Line.prototype,{hasPoint:function(a,s){var o=[],c=[1,a,s],h,d,b,_,$,j,Xt,Lt,fr,Jr=this.evalVisProp("strokewidth");return JXG$1.isObject(this.evalVisProp("precision"))?(fr=this.board._inputDevice,Lt=this.evalVisProp("precision."+fr)):Lt=this.board.options.precision.hasPoint,Lt+=Jr*.5,o[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,o[1]=this.stdform[1]/this.board.unitX,o[2]=this.stdform[2]/-this.board.unitY,h=Geometry.distPointLine(c,o),isNaN(h)||h>Lt?!1:this.evalVisProp("straightfirst")&&this.evalVisProp("straightlast")?!0:(b=this.point1.coords,_=this.point2.coords,d=[0,o[1],o[2]],d=Mat.crossProduct(d,c),d=Mat.crossProduct(d,o),d[1]/=d[0],d[2]/=d[0],d[0]=1,d=new Coords(Const.COORDS_BY_SCREEN,d.slice(1),this.board).usrCoords,$=b.distance(Const.COORDS_BY_USER,_),b=b.usrCoords.slice(0),_=_.usrCoords.slice(0),$<Mat.eps?j=0:($===Number.POSITIVE_INFINITY&&($=1/Mat.eps,Math.abs(_[0])<Mat.eps?($/=Geometry.distance([0,0,0],_),_=[1,b[1]+_[1]*$,b[2]+_[2]*$]):($/=Geometry.distance([0,0,0],b),b=[1,_[1]+b[1]*$,_[2]+b[2]*$])),Xt=1,$=_[Xt]-b[Xt],Math.abs($)<Mat.eps&&(Xt=2,$=_[Xt]-b[Xt]),j=(d[Xt]-b[Xt])/$),!this.evalVisProp("straightfirst")&&j<0?!1:!(!this.evalVisProp("straightlast")&&j>1))},update:function(){var a;return this.needsUpdate?(this.constrained&&(JXG$1.isFunction(this.funps)?(a=this.funps(),a&&a.length&&a.length===2&&(this.point1=a[0],this.point2=a[1])):(JXG$1.isFunction(this.funp1)&&(a=this.funp1(),JXG$1.isPoint(a)?this.point1=a:a&&a.length&&a.length===2&&this.point1.setPositionDirectly(Const.COORDS_BY_USER,a)),JXG$1.isFunction(this.funp2)&&(a=this.funp2(),JXG$1.isPoint(a)?this.point2=a:a&&a.length&&a.length===2&&this.point2.setPositionDirectly(Const.COORDS_BY_USER,a)))),this.updateSegmentFixedLength(),this.updateStdform(),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var a,s,o,c,h,d,b,_;return this.hasFixedLength?(a=this.point1.Dist(this.point2),s=this.evalVisProp("nonnegativeonly")?Math.max(0,this.fixedLength()):Math.abs(this.fixedLength()),o=this.fixedLengthOldCoords[0].distance(Const.COORDS_BY_USER,this.point1.coords),c=this.fixedLengthOldCoords[1].distance(Const.COORDS_BY_USER,this.point2.coords),(o>Mat.eps||c>Mat.eps||a!==s)&&(h=this.point1.isDraggable&&this.point1.type!==Const.OBJECT_TYPE_GLIDER&&!this.point1.evalVisProp("fixed"),d=this.point2.isDraggable&&this.point2.type!==Const.OBJECT_TYPE_GLIDER&&!this.point2.evalVisProp("fixed"),a>Mat.eps?o>c&&d||o<=c&&d&&!h?(this.point2.setPositionDirectly(Const.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*s/a,this.point1.Y()+(this.point2.Y()-this.point1.Y())*s/a]),this.point2.fullUpdate()):(o<=c&&h||o>c&&h&&!d)&&(this.point1.setPositionDirectly(Const.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*s/a,this.point2.Y()+(this.point1.Y()-this.point2.Y())*s/a]),this.point1.fullUpdate()):(b=Math.random()-.5,_=Math.random()-.5,a=Mat.hypot(b,_),d?(this.point2.setPositionDirectly(Const.COORDS_BY_USER,[this.point1.X()+b*s/a,this.point1.Y()+_*s/a]),this.point2.fullUpdate()):h&&(this.point1.setPositionDirectly(Const.COORDS_BY_USER,[this.point2.X()+b*s/a,this.point2.Y()+_*s/a]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(Const.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(Const.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var a=Mat.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=a[0],this.stdform[1]=a[1],this.stdform[2]=a[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&Mat.innerProduct(this.stdform,this.stdform,3)>=Mat.eps*Mat.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(a){var s=this.point1.symbolic.x,o=this.point1.symbolic.y,c=this.point2.symbolic.x,h=this.point2.symbolic.y,d=a.symbolic.x,b=a.symbolic.y;return[["(",o,")*(",d,")-(",o,")*(",c,")+(",b,")*(",c,")-(",s,")*(",b,")+(",s,")*(",h,")-(",d,")*(",h,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=Mat.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=Mat.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},Direction:function(){var a=this.point1.coords.usrCoords,s=this.point2.coords.usrCoords;return s[0]===0&&a[0]!==0?s.slice(1):a[0]===0&&s[0]!==0?[-a[1],-a[2]]:[s[1]-a[1],s[2]-a[2]]},isVertical:function(){var a=this.Direction();return a[0]===0&&a[1]!==0},isHorizontal:function(){var a=this.Direction();return a[1]===0&&a[0]!==0},setStraight:function(a,s){return this.visProp.straightfirst=a,this.visProp.straightlast=s,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new Coords(Const.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(a){JXG$1.exists(this.label)&&(this.label.relativeCoords=new Coords(Const.COORDS_BY_SCREEN,[a[0],-a[1]],this.board))},getLabelAnchor:function(){var a,s,o,c,h,d,b,_,$=1.5,j=0,Xt=new Coords(Const.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),Lt=new Coords(Const.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),fr=this.evalVisProp("straightfirst"),Jr=this.evalVisProp("straightlast");if((fr||Jr)&&Geometry.calcStraight(this,Xt,Lt,0),Xt=Xt.scrCoords,Lt=Lt.scrCoords,!JXG$1.exists(this.label))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(o=this.label.evalVisProp("position"),!JXG$1.isString(o))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(o.indexOf("right")<0&&o.indexOf("left")<0)switch(o){case"last":a=Lt[1],s=Lt[2];break;case"first":a=Xt[1],s=Xt[2];break;case"lft":case"llft":case"ulft":Xt[1]<Lt[1]+Mat.eps?(a=Xt[1],s=Xt[2]):(a=Lt[1],s=Lt[2]);break;case"rt":case"lrt":case"urt":Xt[1]>Lt[1]+Mat.eps?(a=Xt[1],s=Xt[2]):(a=Lt[1],s=Lt[2]);break;default:a=.5*(Xt[1]+Lt[1]),s=.5*(Xt[2]+Lt[2])}else c=JXG$1.parsePosition(o),h=JXG$1.parseNumber(c.pos,1,1),d=Lt[1]-Xt[1],b=Lt[2]-Xt[2],_=Mat.hypot(d,b),c.pos.indexOf("px")>=0||c.pos.indexOf("fr")>=0||c.pos.indexOf("%")>=0?(c.pos.indexOf("px")>=0&&(h/=_),a=Xt[1]+h*d,s=Xt[2]+h*b):(a=Xt[1]+h*this.board.unitX*d/_,s=Xt[2]+h*this.board.unitY*b/_),c.side==="left"?d*=-1:b*=-1,JXG$1.exists(this.label)&&($=.5*this.label.evalVisProp("distance")/_),a+=b*this.label.size[0]*$,s+=d*this.label.size[1]*$;return(fr||Jr)&&(JXG$1.exists(this.label)&&(j=this.label.evalVisProp("fontsize")),Math.abs(a)<Mat.eps?a=j:this.board.canvasWidth+Mat.eps>a&&a>this.board.canvasWidth-j-Mat.eps&&(a=this.board.canvasWidth-j),Mat.eps+j>s&&s>-Mat.eps?s=j:this.board.canvasHeight+Mat.eps>s&&s>this.board.canvasHeight-j-Mat.eps&&(s=this.board.canvasHeight-j)),new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board)},cloneToBackground:function(){var a=JXG$1.getCloneObject(this),s,o,c;return a.point1=this.point1,a.point2=this.point2,a.stdform=this.stdform,o=this.getSlope(),s=this.getRise(),a.getSlope=function(){return o},a.getRise=function(){return s},c=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(a),this.board.renderer.enhancedRendering=c,this.traces[a.id]=a.rendNode,this},addTransform:function(a){var s,o=JXG$1.isArray(a)?a:[a],c=o.length;for(s=0;s<c;s++)this.point1.transformations.push(o[s]),this.point2.transformations.push(o[s]);return this},snapToGrid:function(a){var s,o,c,h,d,b,_,$,j;return this.evalVisProp("snaptogrid")?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):JXG$1.exists(a)&&($=this.evalVisProp("snapsizex"),j=this.evalVisProp("snapsizey"),s=new Coords(Const.COORDS_BY_SCREEN,[a.Xprev,a.Yprev],this.board),b=s.usrCoords[1],_=s.usrCoords[2],$<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(d=this.board.defaultAxes.x.defaultTicks,$=d.ticksDelta*(d.evalVisProp("minorticks")+1)),j<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(d=this.board.defaultAxes.y.defaultTicks,j=d.ticksDelta*(d.evalVisProp("minorticks")+1)),$>0&&j>0&&(o=Geometry.projectPointToLine({coords:s},this,this.board),c=Stat.subtract([1,Math.round(b/$)*$,Math.round(_/j)*j],o.usrCoords),h=this.board.create("transform",c.slice(1),{type:"translate"}),h.applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var a=this.evalVisProp("snaptopoints");return this.parents.length<3&&(this.point1.handleSnapToPoints(a),this.point2.handleSnapToPoints(a)),this},X:function(a){var s=this.point1.coords.usrCoords,o=this.point2.coords.usrCoords,c=this.stdform[2];return s[0]!==0?o[0]!==0?s[1]+(o[1]-s[1])*a:s[1]+c*1e5*a:s[0]!==0?o[1]-(s[1]-o[1])*a:o[1]+c*1e5*a},Y:function(a){var s=this.point1.coords.usrCoords,o=this.point2.coords.usrCoords,c=this.stdform[1];return s[0]!==0?o[0]!==0?s[2]+(o[2]-s[2])*a:s[2]-c*1e5*a:s[0]!==0?o[2]-(s[2]-o[2])*a:o[2]-c*1e5*a},Z:function(a){var s=this.point1.coords.usrCoords,o=this.point2.coords.usrCoords;return a===1&&s[0]*o[0]===0?0:1},Ft:function(a){var s=[this.Z(a),this.X(a),this.Y(a)];return s[1]/=s[0],s[2]/=s[0],s[0]/=s[0],s},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(a){return this.hasFixedLength?(this.fixedLength=JXG$1.createFunction(a,this.board),this.hasFixedLength=!0,this.addParentsFromJCFunctions([this.fixedLength]),this.board.update(),this):this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var a=this.point1.coords.usrCoords,s=this.point2.coords.usrCoords;return[Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[1],s[1]),Math.min(a[2],s[2])]},remove:function(){this.removeAllTicks(),GeometryElement.prototype.remove.call(this)}});JXG$1.createLine=function(a,s,o){var c,h,d,b,_,$,j=[],Xt=!1,Lt=!1,fr;if(s.length===2){if($=JXG$1.copyAttributes(o,a.options,"line","point1"),JXG$1.isArray(s[0])&&s[0].length>1)d=a.create("point",s[0],$);else if(JXG$1.isString(s[0])||JXG$1.isPoint(s[0]))d=a.select(s[0]);else if(JXG$1.isFunction(s[0])&&JXG$1.isPoint(s[0]()))d=s[0](),Lt=!0;else if(JXG$1.isFunction(s[0])&&s[0]().length&&s[0]().length>=2)d=JXG$1.createPoint(a,s[0](),$),Lt=!0;else if(JXG$1.isObject(s[0])&&JXG$1.isTransformationOrArray(s[1]))Xt=!0,d=a.create("point",[s[0].point1,s[1]],$);else throw new Error("JSXGraph: Can't create line with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);if($=JXG$1.copyAttributes(o,a.options,"line","point2"),Xt)b=a.create("point",[s[0].point2,s[1]],$);else if(JXG$1.isArray(s[1])&&s[1].length>1)b=a.create("point",s[1],$);else if(JXG$1.isString(s[1])||JXG$1.isPoint(s[1]))b=a.select(s[1]);else if(JXG$1.isFunction(s[1])&&JXG$1.isPoint(s[1]()))b=s[1](),Lt=!0;else if(JXG$1.isFunction(s[1])&&s[1]().length&&s[1]().length>=2)b=JXG$1.createPoint(a,s[1](),$),Lt=!0;else throw new Error("JSXGraph: Can't create line with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);$=JXG$1.copyAttributes(o,a.options,"line"),h=new JXG$1.Line(a,d,b,$),Lt?(h.constrained=!0,h.funp1=s[0],h.funp2=s[1]):Xt||(h.isDraggable=!0),h.setParents([d.id,b.id])}else if(s.length===3){for(fr=!0,_=0;_<3;_++)if(JXG$1.isNumber(s[_]))j[_]=JXG$1.createFunction(s[_]);else if(JXG$1.isFunction(s[_]))j[_]=s[_],fr=!1;else throw new Error("JSXGraph: Can't create line with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);$=JXG$1.copyAttributes(o,a.options,"line","point1"),fr?d=a.create("point",[j[2]()*j[2]()+j[1]()*j[1](),j[2]()-j[1]()*j[0]()+j[2](),-j[1]()-j[2]()*j[0]()-j[1]()],$):d=a.create("point",[function(){return(j[2]()*j[2]()+j[1]()*j[1]())*.5},function(){return(j[2]()-j[1]()*j[0]()+j[2]())*.5},function(){return(-j[1]()-j[2]()*j[0]()-j[1]())*.5}],$),$=JXG$1.copyAttributes(o,a.options,"line","point2"),fr?b=a.create("point",[j[2]()*j[2]()+j[1]()*j[1](),-j[1]()*j[0]()+j[2](),-j[2]()*j[0]()-j[1]()],$):b=a.create("point",[function(){return j[2]()*j[2]()+j[1]()*j[1]()},function(){return-j[1]()*j[0]()+j[2]()},function(){return-j[2]()*j[0]()-j[1]()}],$),d.prepareUpdate().update(),b.prepareUpdate().update(),$=JXG$1.copyAttributes(o,a.options,"line"),h=new JXG$1.Line(a,d,b,$),h.isDraggable=fr,h.setParents([d,b])}else if(s.length===1&&JXG$1.isFunction(s[0])&&s[0]().length===2&&JXG$1.isPoint(s[0]()[0])&&JXG$1.isPoint(s[0]()[1]))c=s[0](),$=JXG$1.copyAttributes(o,a.options,"line"),h=new JXG$1.Line(a,c[0],c[1],$),h.constrained=!0,h.funps=s[0],h.setParents(c);else if(s.length===1&&JXG$1.isFunction(s[0])&&s[0]().length===3&&JXG$1.isNumber(s[0]()[0])&&JXG$1.isNumber(s[0]()[1])&&JXG$1.isNumber(s[0]()[2]))c=s[0],$=JXG$1.copyAttributes(o,a.options,"line","point1"),d=a.create("point",[function(){var Jr=c();return[(Jr[2]*Jr[2]+Jr[1]*Jr[1])*.5,(Jr[2]-Jr[1]*Jr[0]+Jr[2])*.5,(-Jr[1]-Jr[2]*Jr[0]-Jr[1])*.5]}],$),$=JXG$1.copyAttributes(o,a.options,"line","point2"),b=a.create("point",[function(){var Jr=c();return[Jr[2]*Jr[2]+Jr[1]*Jr[1],-Jr[1]*Jr[0]+Jr[2],-Jr[2]*Jr[0]-Jr[1]]}],$),$=JXG$1.copyAttributes(o,a.options,"line"),h=new JXG$1.Line(a,d,b,$),h.constrained=!0,h.funps=s[0],h.setParents([d,b]);else throw new Error("JSXGraph: Can't create line with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);return h};JXG$1.registerElement("line",JXG$1.createLine);JXG$1.createSegment=function(a,s,o){var c,h;if(o.straightFirst=!1,o.straightLast=!1,h=JXG$1.copyAttributes(o,a.options,"segment"),c=a.create("line",s.slice(0,2),h),s.length===3){try{c.hasFixedLength=!0,c.fixedLengthOldCoords=[],c.fixedLengthOldCoords[0]=new Coords(Const.COORDS_BY_USER,c.point1.coords.usrCoords.slice(1,3),a),c.fixedLengthOldCoords[1]=new Coords(Const.COORDS_BY_USER,c.point2.coords.usrCoords.slice(1,3),a),c.setFixedLength(s[2])}catch{throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof s[2]+`'.
Possible third parent types: number or function`)}c.getParents=function(){return this.parents.concat(this.fixedLength())}}return c.elType="segment",c};JXG$1.registerElement("segment",JXG$1.createSegment);JXG$1.createArrow=function(a,s,o){var c,h;return o.straightFirst=!1,o.straightLast=!1,h=JXG$1.copyAttributes(o,a.options,"arrow"),c=a.create("line",s,h),c.type=Const.OBJECT_TYPE_VECTOR,c.elType="arrow",c};JXG$1.registerElement("arrow",JXG$1.createArrow);JXG$1.createAxis=function(a,s,o){var c,h,d,b;h=JXG$1.copyAttributes(o,a.options,"axis");try{c=a.create("line",s,h)}catch{throw new Error("JSXGraph: Can't create axis with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`)}c.type=Const.OBJECT_TYPE_AXIS,c.isDraggable=!1,c.point1.isDraggable=!1,c.point2.isDraggable=!1,c._point1UsrCoordsOrg=c.point1.coords.usrCoords.slice(),c._point2UsrCoordsOrg=c.point2.coords.usrCoords.slice();for(d in c.ancestors)c.ancestors.hasOwnProperty(d)&&(c.ancestors[d].type=Const.OBJECT_TYPE_AXISPOINT);return JXG$1.exists(h.ticks.ticksdistance)?b=h.ticks.ticksdistance:JXG$1.isArray(h.ticks.ticks)?b=h.ticks.ticks:b=1,c.defaultTicks=a.create("ticks",[c,b],h.ticks),c.defaultTicks.dump=!1,c.elType="axis",c.subs={ticks:c.defaultTicks},c.inherits.push(c.defaultTicks),c.update=function(){var _,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1;if(!this.needsUpdate)return this;if(_=this.board.getBoundingBox(),$=this.evalVisProp("position"),Xt=this.Direction(),Lt=this.isHorizontal(),fr=this.isVertical(),Jr=this.evalVisProp("ticksautopos"),Js=this.evalVisProp("ticksautoposthreshold"),Lt?Js=JXG$1.parseNumber(Js,Math.abs(_[1]-_[3]),1/this.board.unitX)*this.board.unitX:fr?Js=JXG$1.parseNumber(Js,Math.abs(_[1]-_[3]),1/this.board.unitY)*this.board.unitY:Js=JXG$1.parseNumber(Js,1,1),zo=this.evalVisProp("anchor"),js=zo.indexOf("left")>-1,eu=zo.indexOf("right")>-1,Oo=this.evalVisProp("anchordist"),Lt?Oo=JXG$1.parseNumber(Oo,Math.abs(_[1]-_[3]),1/this.board.unitX):fr?Oo=JXG$1.parseNumber(Oo,Math.abs(_[0]-_[2]),1/this.board.unitY):Oo=0,vu=this.board.getPointLoc(this._point1UsrCoordsOrg,Oo),tu=this.point1.coords.usrCoords.slice(),Bo=this.point2.coords.usrCoords.slice(),$==="static"||!fr&&!Lt||($==="fixed"?(Lt&&(Xt[0]>0&&eu||Xt[0]<0&&js?(tu[2]=_[3]+Oo,Bo[2]=_[3]+Oo):Xt[0]>0&&js||Xt[0]<0&&eu?(tu[2]=_[1]-Oo,Bo[2]=_[1]-Oo):(tu=this._point1UsrCoordsOrg.slice(),Bo=this._point2UsrCoordsOrg.slice())),fr&&(Xt[1]>0&&js||Xt[1]<0&&eu?(tu[1]=_[0]+Oo,Bo[1]=_[0]+Oo):Xt[1]>0&&eu||Xt[1]<0&&js?(tu[1]=_[2]-Oo,Bo[1]=_[2]-Oo):(tu=this._point1UsrCoordsOrg.slice(),Bo=this._point2UsrCoordsOrg.slice()))):$==="sticky"&&(Lt&&(vu[1]<0&&(Xt[0]>0&&eu||Xt[0]<0&&js)?(tu[2]=_[3]+Oo,Bo[2]=_[3]+Oo):vu[1]>0&&(Xt[0]>0&&js||Xt[0]<0&&eu)?(tu[2]=_[1]-Oo,Bo[2]=_[1]-Oo):(tu=this._point1UsrCoordsOrg.slice(),Bo=this._point2UsrCoordsOrg.slice())),fr&&(vu[0]<0&&(Xt[1]>0&&js||Xt[1]<0&&eu)?(tu[1]=_[0]+Oo,Bo[1]=_[0]+Oo):vu[0]>0&&(Xt[1]>0&&eu||Xt[1]<0&&js)?(tu[1]=_[2]-Oo,Bo[1]=_[2]-Oo):(tu=this._point1UsrCoordsOrg.slice(),Bo=this._point2UsrCoordsOrg.slice())))),this.point1.setPositionDirectly(JXG$1.COORDS_BY_USER,tu),this.point2.setPositionDirectly(JXG$1.COORDS_BY_USER,Bo),JXG$1.exists(this.defaultTicks)){if(t1=this.defaultTicks.visProp.label,Jr&&(Lt||fr)){if(JXG$1.exists(t1._anchorx_org)||(t1._anchorx_org=JXG$1.def(t1.anchorx,this.board.options.text.anchorX)),JXG$1.exists(t1._anchory_org)||(t1._anchory_org=JXG$1.def(t1.anchory,this.board.options.text.anchorY)),JXG$1.exists(t1._offset_org)||(t1._offset_org=t1.offset.slice()),r1=t1.offset,Lt){for(qs=c.point1.coords.scrCoords[2]-this.board.canvasHeight*.5,e1=t1.anchory,qs<0&&Math.abs(qs)>Js?t1._side==="bottom"&&(t1.anchory==="top"&&(e1="bottom"),r1[1]*=-1,t1._side="top"):qs>0&&Math.abs(qs)>Js?t1._side==="top"&&(t1.anchory==="bottom"&&(e1="top"),r1[1]*=-1,t1._side="bottom"):(e1=t1._anchory_org,r1=t1._offset_org.slice(),e1==="top"?t1._side="bottom":e1==="bottom"?t1._side="top":r1[1]<0?t1._side="bottom":t1._side="top"),j=0;j<c.defaultTicks.labels.length;j++)this.defaultTicks.labels[j].visProp.anchory=e1;t1.anchory=e1}else if(fr){for(qs=c.point1.coords.scrCoords[1]-this.board.canvasWidth*.5,qs<0&&Math.abs(qs)>Js?t1._side==="right"&&(t1.anchorx==="left"&&(e1="right"),r1[0]*=-1,t1._side="left"):qs>0&&Math.abs(qs)>Js?t1._side==="left"&&(t1.anchorx==="right"&&(e1="left"),r1[0]*=-1,t1._side="right"):(e1=t1._anchorx_org,r1=t1._offset_org.slice(),e1==="left"?t1._side="right":e1==="right"||r1[0]<0?t1._side="left":t1._side="right"),j=0;j<c.defaultTicks.labels.length;j++)this.defaultTicks.labels[j].visProp.anchorx=e1;t1.anchorx=e1}t1.offset=r1}else delete t1._anchorx_org,delete t1._anchory_org,delete t1._offset_org;this.defaultTicks.needsUpdate=!0}return JXG$1.Line.prototype.update.call(this),this},c};JXG$1.registerElement("axis",JXG$1.createAxis);JXG$1.createTangent=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr=[];if(s.length===1)c=s[0],h=c.slideObject;else if(s.length===2)if(JXG$1.isPoint(s[0]))c=s[0],h=s[1];else if(JXG$1.isPoint(s[1]))h=s[0],c=s[1];else throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);else throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);if($=JXG$1.copyAttributes(o,a.options,"tangent"),h.elementClass===Const.OBJECT_CLASS_LINE)_=a.create("line",[h.point1,h.point2],$),_.glider=c;else if(h.elementClass===Const.OBJECT_CLASS_CURVE&&h.type!==Const.OBJECT_TYPE_CONIC){if(Xt=h.getTransformationSource(),Lt=Xt[0],Lt)for(fr.push(h);Xt[0]&&JXG$1.exists(Xt[1]._transformationSource);)fr.push(Xt[1]),Xt=Xt[1].getTransformationSource();h.evalVisProp("curvetype")!=="plot"||Lt?(_=a.create("line",[function(){var Jr=h.X,Js=h.Y,qs,zo,js,eu,Oo,tu,Bo,vu;if(c.type===Const.OBJECT_TYPE_GLIDER?vu=c.position:h.evalVisProp("curvetype")==="functiongraph"?vu=c.X():vu=Geometry.projectPointToCurve(c,h,a)[1],Bo=c.Coords(!0),Lt){for(Oo=fr[fr.length-1]._transformationSource,Jr=Oo.X,Js=Oo.Y,eu=0;eu<fr.length;eu++)fr[eu].updateTransformMatrix(),tu=Mat.inverse(fr[eu].transformMat),Bo=Mat.matVecMult(tu,Bo);c.type!==Const.OBJECT_TYPE_GLIDER&&(Bo[1]/=Bo[0],Bo[2]/=Bo[0],Bo[0]/=Bo[0],vu=Geometry.projectCoordsToCurve(Bo[1],Bo[2],0,Oo,a)[1])}if(qs=Numerics.D(Js)(vu),zo=Numerics.D(Jr)(vu),js=[-Bo[1]*qs+Bo[2]*zo,Bo[0]*qs,-Bo[0]*zo],Lt)for(eu=fr.length-1;eu>=0;eu--)tu=Mat.transpose(Mat.inverse(fr[eu].transformMat)),js=Mat.matVecMult(tu,js);return js}],$),c.addChild(_),_.glider=c):(j=function(Jr,Js,qs){var zo=Math.floor(Jr),js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1;if(Js.bezierDegree===1)zo===Js.numberPoints-1&&zo--;else if(Js.bezierDegree===3)Js.elType==="sector"?(i1=Js.points.slice(3,Js.numberPoints-3),s1=i1.length):(i1=Js.points,s1=i1.length),zo=Math.floor(Jr*(s1-1)/3)*3,Oo=(Jr*(s1-1)-zo)/3,zo>=s1-1&&(zo=s1-4,Oo=1);else return 0;if(zo<0)return 1;switch(Js.bezierDegree===1?(js=Js.points[zo].usrCoords,eu=Js.points[zo+1].usrCoords):(tu=i1[zo].usrCoords,Bo=i1[zo+1].usrCoords,vu=i1[zo+2].usrCoords,t1=i1[zo+3].usrCoords,e1=(1-Oo)*(1-Oo)*(Bo[1]-tu[1])+2*(1-Oo)*Oo*(vu[1]-Bo[1])+Oo*Oo*(t1[1]-vu[1]),r1=(1-Oo)*(1-Oo)*(Bo[2]-tu[2])+2*(1-Oo)*Oo*(vu[2]-Bo[2])+Oo*Oo*(t1[2]-vu[2]),a1=Mat.hypot(e1,r1),e1/=a1,r1/=a1,js=c.coords.usrCoords,eu=[1,js[1]+e1,js[2]+r1]),qs){case 0:return js[2]*eu[1]-js[1]*eu[2];case 1:return eu[2]-js[2];case 2:return js[1]-eu[1];default:return[js[2]*eu[1]-js[1]*eu[2],eu[2]-js[2],js[1]-eu[1]]}},_=a.create("line",[function(){var Jr;return c.type===Const.OBJECT_TYPE_GLIDER?Jr=c.position:Jr=Geometry.projectPointToCurve(c,h,a)[1],j(Jr,h)}],$),c.addChild(_),_.glider=c)}else h.type===Const.OBJECT_TYPE_TURTLE?(_=a.create("line",[function(){var Jr,Js;for(c.type===Const.OBJECT_TYPE_GLIDER?Js=c.position:Js=Geometry.projectPointToTurtle(c,h,a)[1],Jr=Math.floor(Js),d=0;d<h.objects.length;d++)if(b=h.objects[d],b.type===Const.OBJECT_TYPE_CURVE){if(Jr<b.numberPoints)break;Jr-=b.numberPoints}return Jr===b.numberPoints-1&&Jr--,Jr<0?[1,0,0]:[b.Y(Jr)*b.X(Jr+1)-b.X(Jr)*b.Y(Jr+1),b.Y(Jr+1)-b.Y(Jr),b.X(Jr)-b.X(Jr+1)]}],$),c.addChild(_),_.glider=c):(h.elementClass===Const.OBJECT_CLASS_CIRCLE||h.type===Const.OBJECT_TYPE_CONIC)&&(_=a.create("line",[function(){return Mat.matVecMult(h.quadraticform,c.coords.usrCoords)}],$),c.addChild(_),_.glider=c);if(!JXG$1.exists(_))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return _.elType="tangent",_.type=Const.OBJECT_TYPE_TANGENT,_.setParents(s),_};JXG$1.createNormal=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr=[];for(b=0;b<s.length;++b)s[b]=a.select(s[b]);if(s.length===1)c=s[0],h=c.slideObject;else if(s.length===2)if(JXG$1.isPointType(a,s[0]))c=JXG$1.providePoints(a,[s[0]],o,"point")[0],h=s[1];else if(JXG$1.isPointType(a,s[1]))h=s[0],c=JXG$1.providePoints(a,[s[1]],o,"point")[0];else throw new Error("JSXGraph: Can't create normal with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);else throw new Error("JSXGraph: Can't create normal with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);if(_=JXG$1.copyAttributes(o,a.options,"normal"),h.elementClass===Const.OBJECT_CLASS_LINE)j=JXG$1.copyAttributes(o,a.options,"normal","point"),$=a.create("point",[function(){var Js=Mat.crossProduct([1,0,0],h.stdform);return[Js[0],-Js[2],Js[1]]}],j),$.isDraggable=!0,d=a.create("line",[c,$],_),d.point=$,d.subs={point:$},d.inherits.push($);else if(h.elementClass===Const.OBJECT_CLASS_CIRCLE)d=a.create("line",[h.midpoint,c],_);else if(h.elementClass===Const.OBJECT_CLASS_CURVE){if(Lt=h.getTransformationSource(),fr=Lt[0],fr)for(Jr.push(h);Lt[0]&&JXG$1.exists(Lt[1]._transformationSource);)Jr.push(Lt[1]),Lt=Lt[1].getTransformationSource();h.evalVisProp("curvetype")!=="plot"||fr?d=a.create("line",[function(){var Js=h.X,qs=h.Y,zo,js,eu,Oo,tu,Bo,vu,t1;if(c.type===Const.OBJECT_TYPE_GLIDER?t1=c.position:h.evalVisProp("curvetype")==="functiongraph"?t1=c.X():t1=Geometry.projectPointToCurve(c,h,a)[1],vu=c.Coords(!0),fr){for(tu=Jr[Jr.length-1]._transformationSource,Js=tu.X,qs=tu.Y,Oo=0;Oo<Jr.length;Oo++)Jr[Oo].updateTransformMatrix(),Bo=Mat.inverse(Jr[Oo].transformMat),vu=Mat.matVecMult(Bo,vu);c.type!==Const.OBJECT_TYPE_GLIDER&&(vu[1]/=vu[0],vu[2]/=vu[0],vu[0]/=vu[0],t1=Geometry.projectCoordsToCurve(vu[1],vu[2],0,tu,a)[1])}if(zo=Numerics.D(qs)(t1),js=Numerics.D(Js)(t1),eu=[-vu[1]*js-vu[2]*zo,vu[0]*js,vu[0]*zo],fr)for(Oo=Jr.length-1;Oo>=0;Oo--)Bo=Mat.transpose(Mat.inverse(Jr[Oo].transformMat)),eu=Mat.matVecMult(Bo,eu);return eu}],_):(Xt=function(Js,qs,zo){var js=Math.floor(Js),eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1,l1,f1;if(qs.bezierDegree===1)js===qs.numberPoints-1&&js--,Bo=Js;else if(qs.bezierDegree===3)qs.elType==="sector"?(l1=qs.points.slice(3,qs.numberPoints-3),f1=l1.length):(l1=qs.points,f1=l1.length),js=Math.floor(Js*(f1-1)/3)*3,Bo=(Js*(f1-1)-js)/3,js>=f1-1&&(js=f1-4,Bo=1);else return 0;if(js<0)return 1;switch(eu=Bo-js,qs.bezierDegree===1?(Oo=qs.points[js].usrCoords,tu=qs.points[js+1].usrCoords,h1=[Oo[0]+eu*(tu[0]-Oo[0]),Oo[1]+eu*(tu[1]-Oo[1]),Oo[2]+eu*(tu[2]-Oo[2])],c1=Mat.crossProduct(Oo,tu),m1=Mat.crossProduct([1,0,0],c1),m1=[m1[0],-m1[2],m1[1]],c1=Mat.crossProduct(h1,m1)):(vu=l1[js].usrCoords,t1=l1[js+1].usrCoords,e1=l1[js+2].usrCoords,r1=l1[js+3].usrCoords,a1=(1-Bo)*(1-Bo)*(t1[1]-vu[1])+2*(1-Bo)*Bo*(e1[1]-t1[1])+Bo*Bo*(r1[1]-e1[1]),i1=(1-Bo)*(1-Bo)*(t1[2]-vu[2])+2*(1-Bo)*Bo*(e1[2]-t1[2])+Bo*Bo*(r1[2]-e1[2]),s1=Mat.hypot(a1,i1),a1/=s1,i1/=s1,Oo=c.coords.usrCoords,tu=[1,Oo[1]-i1,Oo[2]+a1],c1=[Oo[2]*tu[1]-Oo[1]*tu[2],tu[2]-Oo[2],Oo[1]-tu[1]]),zo){case 0:return c1[0];case 1:return c1[1];case 2:return c1[2];default:return c1}},d=a.create("line",[function(){var Js;return c.type===Const.OBJECT_TYPE_GLIDER?Js=c.position:Js=Geometry.projectPointToCurve(c,h,a)[1],Xt(Js,h)}],_),c.addChild(d),d.glider=c)}else if(h.type===Const.OBJECT_TYPE_TURTLE)d=a.create("line",[function(){var Js,qs,zo=Math.floor(c.position),js=c.position-zo;for(qs=0;qs<h.objects.length;qs++)if(Js=h.objects[qs],Js.type===Const.OBJECT_TYPE_CURVE){if(zo<Js.numberPoints)break;zo-=Js.numberPoints}return zo===Js.numberPoints-1&&(zo-=1,js=1),zo<0?1:(Js.Y(zo)+js*(Js.Y(zo+1)-Js.Y(zo)))*(Js.Y(zo)-Js.Y(zo+1))-(Js.X(zo)+js*(Js.X(zo+1)-Js.X(zo)))*(Js.X(zo+1)-Js.X(zo))},function(){var Js,qs,zo=Math.floor(c.position);for(qs=0;qs<h.objects.length;qs++)if(Js=h.objects[qs],Js.type===Const.OBJECT_TYPE_CURVE){if(zo<Js.numberPoints)break;zo-=Js.numberPoints}return zo===Js.numberPoints-1&&(zo-=1),zo<0?0:Js.X(zo+1)-Js.X(zo)},function(){var Js,qs,zo=Math.floor(c.position);for(qs=0;qs<h.objects.length;qs++)if(Js=h.objects[qs],Js.type===Const.OBJECT_TYPE_CURVE){if(zo<Js.numberPoints)break;zo-=Js.numberPoints}return zo===Js.numberPoints-1&&(zo-=1),zo<0?0:Js.Y(zo+1)-Js.Y(zo)}],_);else throw new Error("JSXGraph: Can't create normal with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);return d.elType="normal",d.setParents(s),JXG$1.exists(c._is_new)?(d.addChild(c),delete c._is_new):c.addChild(d),h.addChild(d),d};JXG$1.createRadicalAxis=function(a,s,o){var c,h,d;if(s.length!==2||s[0].elementClass!==Const.OBJECT_CLASS_CIRCLE||s[1].elementClass!==Const.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent type: [circle,circle]`);return h=a.select(s[0]),d=a.select(s[1]),c=a.create("line",[function(){var b=h.stdform,_=d.stdform;return Mat.matVecMult(Mat.transpose([b.slice(0,3),_.slice(0,3)]),[_[3],-b[3]])}],o),c.elType="radicalaxis",c.setParents([h.id,d.id]),h.addChild(c),d.addChild(c),c};JXG$1.createPolarLine=function(a,s,o){var c,h,d,b,_,$,j;if(s.length>1&&(b=s[0].type===Const.OBJECT_TYPE_CONIC||s[0].elementClass===Const.OBJECT_CLASS_CIRCLE,_=s[1].type===Const.OBJECT_TYPE_CONIC||s[1].elementClass===Const.OBJECT_CLASS_CIRCLE,$=JXG$1.isPoint(s[0]),j=JXG$1.isPoint(s[1])),s.length!==2||!(b&&j||$&&_))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent type: [conic|circle,point], [point,conic|circle]`);return j?(h=a.select(s[0]),d=a.select(s[1])):(h=a.select(s[1]),d=a.select(s[0])),c=a.create("tangent",[h,d],o),c.elType="polarline",c};JXG$1.createTangentTo=function(a,s,o){var c,h,d,b,_,$,j;if(d=a.select(s[0]),b=JXG$1.providePoints(a,s[1],o,"point")[0],_=JXG$1.def(s[2],0),d.type!==Const.OBJECT_TYPE_CIRCLE&&d.type!==Const.OBJECT_TYPE_CONIC||b.elementClass!==Const.OBJECT_CLASS_POINT)throw new Error("JSXGraph: Can't create tangentto with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [circle|conic,point,number]`);return h=JXG$1.copyAttributes(o,a.options,"tangentto"),j=a.create("polar",[d,b],h.polar),$=a.create("intersection",[j,d,_],h.point),c=a.create("tangent",[d,$],h),c.point=$,c.polar=j,c.elType="tangentto",c};JXG$1.registerElement("tangent",JXG$1.createTangent);JXG$1.registerElement("normal",JXG$1.createNormal);JXG$1.registerElement("tangentto",JXG$1.createTangentTo);JXG$1.registerElement("polar",JXG$1.createTangent);JXG$1.registerElement("radicalaxis",JXG$1.createRadicalAxis);JXG$1.registerElement("polarline",JXG$1.createPolarLine);JXG$1.Line;JXG$1.Group=function(a,s,o,c,h){var d,b,_,$;for(this.board=a,this.objects={},d=this.board.numObjects,this.board.numObjects+=1,s===""||!JXG$1.exists(s)?this.id=this.board.id+"Group"+d:this.id=s,this.board.groups[this.id]=this,this.type=Const.OBJECT_TYPE_POINT,this.elementClass=Const.OBJECT_CLASS_POINT,o===""||!JXG$1.exists(o)?this.name="group_"+this.board.generateName(this):this.name=o,delete this.type,this.coords={},this.needsRegularUpdate=h.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],JXG$1.isArray(c)?b=c:b=Array.prototype.slice.call(arguments,3),_=0;_<b.length;_++)$=this.board.select(b[_]),!$.evalVisProp("fixed")&&JXG$1.exists($.coords)&&this.addPoint($);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}};JXG$1.extend(JXG$1.Group.prototype,{ungroup:function(){var a,s,o;for(a in this.objects)this.objects.hasOwnProperty(a)&&(s=this.objects[a].point,JXG$1.isArray(s.groups)&&(o=JXG$1.indexOf(s.groups,this.id),o>=0&&delete s.groups[o]));return this.objects={},this},addParents:function(a){var s,o,c;for(JXG$1.isArray(a)?c=a:c=arguments,o=c.length,s=0;s<o;++s)JXG$1.isId(this.board,c[s])?this.parents.push(c[s]):JXG$1.exists(c[s].id)&&this.parents.push(c[s].id);this.parents=JXG$1.uniqueArray(this.parents)},setParents:function(a){return this.parents=[],this.addParents(a),this},getParents:function(){return JXG$1.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(a){var s;a!==""&&JXG$1.exists(this.objects[a])&&(s=this.objects[a].point,this.coords[s.id]={usrCoords:s.coords.usrCoords.slice(0)})},update:function(){var a,s,o,c,h,d,b,_,$,j,Xt,Lt,fr=null;if(!this.needsUpdate)return this;if(s=this._update_find_drag_type(),s.action==="nothing")return this._updateCoordsCache(s.id),this;if(fr=this.objects[s.id].point,s.action==="translation"){if(j=[fr.coords.usrCoords[1]-this.coords[s.id].usrCoords[1],fr.coords.usrCoords[2]-this.coords[s.id].usrCoords[2]],fr.elementClass!==Const.OBJECT_CLASS_POINT){for(j.unshift(0),a=0;a<fr.transformations.length;a++)j=Mat.matVecMult(fr.transformations[a].matrix,j);j.shift()}Xt=this.board.create("transform",j,{type:"translate"}),Xt.update()}else if(s.action==="rotation"||s.action==="scaling"){if(s.action==="rotation"?c="rotationCenter":c="scaleCenter",JXG$1.exists(this[c].coords))Lt=this[c].coords.usrCoords.slice(1);else if(this[c]==="centroid")Lt=this._update_centroid_center();else if(JXG$1.isArray(this[c]))Lt=this[c];else if(JXG$1.isFunction(this[c]))Lt=this[c]();else return JXG$1.debug("Group.update: No valid center for this transformation, get out of here."),this;if(s.action==="rotation")$=Geometry.rad(this.coords[s.id].usrCoords.slice(1),Lt,this.objects[s.id].point),j=this.board.create("transform",[$,Lt[0],Lt[1]],{type:"rotate"}),j.update();else if(s.action==="scaling"){if(d=Geometry.distance(this.coords[s.id].usrCoords.slice(1),Lt),Math.abs(d)<Mat.eps)return this;d=Geometry.distance(fr.coords.usrCoords.slice(1),Lt)/d,b=this.scaleDirections[s.id].indexOf("x")>=0?d:1,_=this.scaleDirections[s.id].indexOf("y")>=0?d:1,j=this.board.create("transform",[1,0,0,Lt[0]*(1-b),b,0,Lt[1]*(1-_),0,_],{type:"generic"}),j.update()}else return this}for(o in this.objects)fr=this.objects[o].point,fr.elementClass!==Const.OBJECT_CLASS_POINT&&(JXG$1.exists(j.board)?j.meltTo(fr):s.id!==fr.id&&Xt.meltTo(fr));this._update_apply_transformation(s,j),this.needsUpdate=!1;for(o in this.objects)if(this.objects.hasOwnProperty(o))for(h in this.objects[o].descendants)this.objects[o].descendants.hasOwnProperty(h)&&(this.objects[o].descendants.needsUpdate=this.objects[o].descendants.needsRegularUpdate||this.board.needsFullUpdate);this.board.updateElements(s);for(o in this.objects)this.objects.hasOwnProperty(o)&&this._updateCoordsCache(o);return this},_update_find_drag_type:function(){var a,s,o="nothing",c=[],h;for(a in this.objects)this.objects.hasOwnProperty(a)&&(s=this.objects[a].point,s.coords.distance(Const.COORDS_BY_USER,this.coords[a])>Mat.eps&&c.push(s.id));return c.length===0?{action:o,id:"",changed:c}:(h=c[0],s=this.objects[h].point,c.length>1?o="translation":JXG$1.isInArray(this.rotationPoints,s)&&JXG$1.exists(this.rotationCenter)?o="rotation":JXG$1.isInArray(this.scalePoints,s)&&JXG$1.exists(this.scaleCenter)?o="scaling":JXG$1.isInArray(this.translationPoints,s)&&(o="translation"),{action:o,id:h,changed:c})},_update_centroid_center:function(){var a,s,o;a=[0,0],s=0;for(o in this.coords)this.coords.hasOwnProperty(o)&&(a[0]+=this.coords[o].usrCoords[1],a[1]+=this.coords[o].usrCoords[2],++s);return s>0&&(a[0]/=s,a[1]/=s),a},_update_apply_transformation:function(a,s){var o,c;for(o in this.objects)this.objects.hasOwnProperty(o)&&(JXG$1.exists(this.board.objects[o])?(c=this.objects[o].point,c.id!==a.id?a.action==="translation"?JXG$1.isInArray(a.changed,c.id)||c.elementClass===Const.OBJECT_CLASS_POINT&&c.coords.setCoordinates(Const.COORDS_BY_USER,[this.coords[o].usrCoords[1]+s[0],this.coords[o].usrCoords[2]+s[1]]):(a.action==="rotation"||a.action==="scaling")&&c.elementClass===Const.OBJECT_CLASS_POINT&&s.applyOnce([c]):(a.action==="rotation"||a.action==="scaling")&&c.coords.setCoordinates(Const.COORDS_BY_USER,Mat.matVecMult(s.matrix,this.coords[c.id].usrCoords))):delete this.objects[o])},addPoint:function(a){return this.objects[a.id]={point:this.board.select(a)},this._updateCoordsCache(a.id),this.translationPoints.push(a),a.groups.push(this.id),a.groups=JXG$1.uniqueArray(a.groups),this},addPoints:function(a){var s;for(s=0;s<a.length;s++)this.addPoint(a[s]);return this},addGroup:function(a){var s;for(s in a.objects)a.objects.hasOwnProperty(s)&&this.addPoint(a.objects[s].point);return this},removePoint:function(a){return delete this.objects[a.id],this},setRotationCenter:function(a){return this.rotationCenter=a,this},setRotationPoints:function(a){return this._setActionPoints("rotation",a)},addRotationPoint:function(a){return this._addActionPoint("rotation",a)},removeRotationPoint:function(a){return this._removeActionPoint("rotation",a)},setTranslationPoints:function(a){return this._setActionPoints("translation",a)},addTranslationPoint:function(a){return this._addActionPoint("translation",a)},removeTranslationPoint:function(a){return this._removeActionPoint("translation",a)},setScaleCenter:function(a){return this.scaleCenter=a,this},setScalePoints:function(a,s){var o,c,h;for(JXG$1.isArray(a)?o=a:o=arguments,h=o.length,c=0;c<h;++c)this.scaleDirections[this.board.select(o[c]).id]=s||"xy";return this._setActionPoints("scale",a)},addScalePoint:function(a,s){return this._addActionPoint("scale",a),this.scaleDirections[this.board.select(a).id]=s||"xy",this},removeScalePoint:function(a){return this._removeActionPoint("scale",a)},_setActionPoints:function(a,s){var o,c,h;for(JXG$1.isArray(s)?o=s:o=arguments,h=o.length,this[a+"Points"]=[],c=0;c<h;++c)this._addActionPoint(a,o[c]);return this},_addActionPoint:function(a,s){return this[a+"Points"].push(this.board.select(s)),this},_removeActionPoint:function(a,s){var o=this[a+"Points"].indexOf(this.board.select(s));return o>-1&&this[a+"Points"].splice(o,1),this},setProperty:function(){JXG$1.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var a;for(a in this.objects)this.objects.hasOwnProperty(a)&&this.objects[a].point.setAttribute.apply(this.objects[a].point,arguments);return this}});JXG$1.createGroup=function(a,s,o){var c=JXG$1.copyAttributes(o,a.options,"group"),h=new JXG$1.Group(a,c.id,c.name,s,c);return h.elType="group",h.setParents(s),h};JXG$1.registerElement("group",JXG$1.createGroup);JXG$1.Group;JXG$1.Circle=function(a,s,o,c,h){this.constructor(a,h,Const.OBJECT_TYPE_CIRCLE,Const.OBJECT_CLASS_CIRCLE),this.method=s,this.midpoint=this.board.select(o),this.center=this.board.select(o),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],s==="twoPoints"?(this.point2=a.select(c),this.radius=this.Radius()):s==="pointRadius"?(this.gxtterm=c,this.updateRadius=JXG$1.createFunction(c,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):s==="pointLine"?(this.line=a.select(c),this.radius=this.line.point1.coords.distance(Const.COORDS_BY_USER,this.line.point2.coords)):s==="pointCircle"&&(this.circle=a.select(c),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),JXG$1.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),s==="pointRadius"?this.notifyParents(c):s==="pointLine"?this.line.addChild(this):s==="pointCircle"?this.circle.addChild(this):s==="twoPoints"&&(JXG$1.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=JXG$1.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})};JXG$1.Circle.prototype=new GeometryElement;JXG$1.extend(JXG$1.Circle.prototype,{hasPoint:function(a,s){var o,c,h=this.center.coords.usrCoords,d=new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board),b=this.Radius(),_,$,j;return JXG$1.isObject(this.evalVisProp("precision"))?(c=this.board._inputDevice,o=this.evalVisProp("precision."+c)):o=this.board.options.precision.hasPoint,_=h[1]-d.usrCoords[1],$=h[2]-d.usrCoords[2],j=Mat.hypot(_,$),o+=this.evalVisProp("strokewidth")*.5,o/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),this.evalVisProp("hasinnerpoints")?j<b+o:Math.abs(j-b)<o},generatePolynomial:function(a){var s=this.center.symbolic.x,o=this.center.symbolic.y,c=a.symbolic.x,h=a.symbolic.y,d=this.generateRadiusSquared();return d===""?[]:["(("+c+")-("+s+"))^2 + (("+h+")-("+o+"))^2 - ("+d+")"]},generateRadiusSquared:function(){var a,s,o,c,h,d,b="";return this.method==="twoPoints"?(a=this.center.symbolic.x,s=this.center.symbolic.y,o=this.point2.symbolic.x,c=this.point2.symbolic.y,b="(("+o+")-("+a+"))^2 + (("+c+")-("+s+"))^2"):this.method==="pointRadius"?JXG$1.isNumber(this.radius)&&(b=(this.radius*this.radius).toString()):this.method==="pointLine"?(o=this.line.point1.symbolic.x,c=this.line.point1.symbolic.y,h=this.line.point2.symbolic.x,d=this.line.point2.symbolic.y,b="(("+o+")-("+h+"))^2 + (("+c+")-("+d+"))^2"):this.method==="pointCircle"&&(b=this.circle.Radius()),b},update:function(){var a,s,o,c,h,d;if(this.needsUpdate)for(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.method==="pointLine"?this.radius=this.line.point1.coords.distance(Const.COORDS_BY_USER,this.line.point2.coords):this.method==="pointCircle"?this.radius=this.circle.Radius():this.method==="pointRadius"&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),o=this.center.coords.usrCoords[0],a=this.center.coords.usrCoords[1]/o,s=this.center.coords.usrCoords[2]/o,o/=o,c=this.Radius(),h=.551915024494,this.numberPoints=13,this.dataX=[a+c,a+c,a+c*h,a,a-c*h,a-c,a-c,a-c,a-c*h,a,a+c*h,a+c,a+c],this.dataY=[s,s+c*h,s+c,s+c,s+c,s+c*h,s,s-c*h,s-c,s-c,s-c,s-c*h,s],this.bezierDegree=3,d=0;d<this.numberPoints;d++)this.points[d]=new Coords(Const.COORDS_BY_USER,[this.dataX[d],this.dataY[d]],this.board);return this},updateQuadraticform:function(){var a=this.center,s=a.X(),o=a.Y(),c=this.Radius();this.quadraticform=[[s*s+o*o-c*c,-s,-o],[-s,1,0],[-o,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=JXG$1.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(a){JXG$1.isString(a)&&GeonextParser.findDependencies(this,a,this.board)},setRadius:function(a){return this.updateRadius=JXG$1.createFunction(a,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(a){return JXG$1.exists(a)?(this.setRadius(a),this.Radius()):this.method==="twoPoints"?JXG$1.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||JXG$1.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):this.method==="pointLine"||this.method==="pointCircle"?this.radius:this.method==="pointRadius"?this.evalVisProp("nonnegativeonly")?Math.max(0,this.updateRadius()):Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return JXG$1.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var a,s,o,c,h,d,b=1.5,_=this.Radius(),$=this.center.coords.usrCoords,j=.7071067811865;if(!JXG$1.exists(this.label))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(o=this.label.evalVisProp("position"),!JXG$1.isString(o))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(o.indexOf("right")<0&&o.indexOf("left")<0)switch(this.evalVisProp("label.position")){case"lft":a=$[1]-_,s=$[2];break;case"llft":a=$[1]-j*_,s=$[2]-j*_;break;case"rt":a=$[1]+_,s=$[2];break;case"lrt":a=$[1]+j*_,s=$[2]-j*_;break;case"urt":a=$[1]+j*_,s=$[2]+j*_;break;case"top":a=$[1],s=$[2]+_;break;case"bot":a=$[1],s=$[2]-_;break;default:a=$[1]-j*_,s=$[2]+j*_;break}else return $=this.center.coords.scrCoords,c=JXG$1.parsePosition(o),h=JXG$1.parseNumber(c.pos,2*Math.PI,1),c.pos.indexOf("fr")<0&&c.pos.indexOf("%")<0&&(c.pos.indexOf("px")>=0?h=0:h*=Math.PI/180),d=1,c.side==="left"&&(d=-1),JXG$1.exists(this.label)&&(b=d*.5*this.label.evalVisProp("distance")),a=$[1]+(_*this.board.unitX+this.label.size[0]*b)*Math.cos(h),s=$[2]-(_*this.board.unitY+this.label.size[1]*b)*Math.sin(h),new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board);return new Coords(Const.COORDS_BY_USER,[a,s],this.board)},cloneToBackground:function(){var a,s=this.Radius(),o=JXG$1.getCloneObject(this);return o.center={coords:this.center.coords},o.Radius=function(){return s},o.getRadius=function(){return s},a=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(o),this.board.renderer.enhancedRendering=a,this.traces[o.id]=o.rendNode,this},addTransform:function(a){var s,o=JXG$1.isArray(a)?a:[a],c=o.length;for(s=0;s<c;s++)this.center.transformations.push(o[s]),this.method==="twoPoints"&&this.point2.transformations.push(o[s]);return this},snapToGrid:function(){var a=this.evalVisProp("snaptogrid");return this.center.handleSnapToGrid(a,!0),this.method==="twoPoints"&&this.point2.handleSnapToGrid(a,!0),this},snapToPoints:function(){var a=this.evalVisProp("snaptopoints");return this.center.handleSnapToPoints(a),this.method==="twoPoints"&&this.point2.handleSnapToPoints(a),this},X:function(a){return this.Radius()*Math.cos(a*2*Math.PI)+this.center.coords.usrCoords[1]},Y:function(a){return this.Radius()*Math.sin(a*2*Math.PI)+this.center.coords.usrCoords[2]},Z:function(a){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var a=this.Radius();return a*a*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var a=this.center.coords.usrCoords,s=this.Radius();return[a[1]-s,a[2]+s,a[1]+s,a[2]-s]},getParents:function(){return this.parents.length===1?this.parents.concat(this.radius):this.parents}});JXG$1.createCircle=function(a,s,o){var c,h,d,b,_,$=!0,j=["center","point2"];if(h=[],_=a.select(s[0]),JXG$1.isObject(_)&&_.elementClass===Const.OBJECT_CLASS_CIRCLE&&JXG$1.isTransformationOrArray(s[1]))return b=JXG$1.copyAttributes(o,a.options,"circle"),c=JXG$1.createEllipse(a,[_.center,_.center,function(){return 2*_.Radius()}],b),c.addTransform(s[1]),c;for(d=0;d<s.length;d++)if(JXG$1.isPointType(a,s[d])){if(s.length<3?h.push(JXG$1.providePoints(a,[s[d]],o,"circle",[j[d]])[0]):h.push(JXG$1.providePoints(a,[s[d]],o,"point")[0]),h[h.length-1]===!1)throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else h.push(s[d]);if(b=JXG$1.copyAttributes(o,a.options,"circle"),h.length===2&&JXG$1.isPoint(h[0])&&JXG$1.isPoint(h[1]))c=new JXG$1.Circle(a,"twoPoints",h[0],h[1],b);else if((JXG$1.isNumber(h[0])||JXG$1.isFunction(h[0])||JXG$1.isString(h[0]))&&JXG$1.isPoint(h[1]))c=new JXG$1.Circle(a,"pointRadius",h[1],h[0],b);else if((JXG$1.isNumber(h[1])||JXG$1.isFunction(h[1])||JXG$1.isString(h[1]))&&JXG$1.isPoint(h[0]))c=new JXG$1.Circle(a,"pointRadius",h[0],h[1],b);else if(h[0].elementClass===Const.OBJECT_CLASS_CIRCLE&&JXG$1.isPoint(h[1]))c=new JXG$1.Circle(a,"pointCircle",h[1],h[0],b);else if(h[1].elementClass===Const.OBJECT_CLASS_CIRCLE&&JXG$1.isPoint(h[0]))c=new JXG$1.Circle(a,"pointCircle",h[0],h[1],b);else if(h[0].elementClass===Const.OBJECT_CLASS_LINE&&JXG$1.isPoint(h[1]))c=new JXG$1.Circle(a,"pointLine",h[1],h[0],b);else if(h[1].elementClass===Const.OBJECT_CLASS_LINE&&JXG$1.isPoint(h[0]))c=new JXG$1.Circle(a,"pointLine",h[0],h[1],b);else if(s.length===3&&JXG$1.isPoint(h[0])&&JXG$1.isPoint(h[1])&&JXG$1.isPoint(h[2]))if(JXG$1.elements.circumcircle)c=JXG$1.elements.circumcircle(a,h,b);else throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");else throw new Error("JSXGraph: Can't create circle with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]`);for(c.isDraggable=$,c.setParents(h),c.elType="circle",d=0;d<h.length;d++)JXG$1.isPoint(h[d])&&c.inherits.push(h[d]);return c};JXG$1.registerElement("circle",JXG$1.createCircle);const Circle=JXG$1.Circle;JXG$1.createEllipse=function(a,s,o){var c,h,d,b,_,$,j,Xt=[],Lt=JXG$1.copyAttributes(o,a.options,"conic","foci"),fr=JXG$1.copyAttributes(o,a.options,"conic","center"),Jr=JXG$1.copyAttributes(o,a.options,"conic");for($=0;$<2;$++)if(s[$].length>1)Xt[$]=a.create("point",s[$],Lt);else if(JXG$1.isPoint(s[$]))Xt[$]=a.select(s[$]);else if(JXG$1.isFunction(s[$])&&JXG$1.isPoint(s[$]()))Xt[$]=s[$]();else if(JXG$1.isString(s[$]))Xt[$]=a.select(s[$]);else throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);if(JXG$1.isNumber(s[2]))_=JXG$1.createFunction(s[2],a);else if(JXG$1.isFunction(s[2])&&JXG$1.isNumber(s[2]()))_=s[2];else{if(JXG$1.isPoint(s[2]))b=a.select(s[2]);else if(s[2].length>1)b=a.create("point",s[2],Lt);else if(JXG$1.isFunction(s[2])&&JXG$1.isPoint(s[2]()))b=s[2]();else if(JXG$1.isString(s[2]))b=a.select(s[2]);else throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);_=function(){return b.Dist(Xt[0])+b.Dist(Xt[1])}}for(JXG$1.exists(s[4])||(s[4]=2*Math.PI),JXG$1.exists(s[3])||(s[3]=0),d=a.create("point",[function(){return(Xt[0].X()+Xt[1].X())*.5},function(){return(Xt[0].Y()+Xt[1].Y())*.5}],fr),h=a.create("curve",[function(Js){return 0},function(Js){return 0},s[3],s[4]],Jr),h.majorAxis=_,j=h.hasPoint,c=function(Js,qs){var zo,js,eu,Oo,tu,Bo,vu,t1,e1;qs||(zo=_(),js=zo*zo,eu=Xt[0].X(),Oo=Xt[0].Y(),tu=Xt[1].X(),Bo=Xt[1].Y(),vu=eu-tu,t1=Oo-Bo,e1=(js-eu*eu-Oo*Oo+tu*tu+Bo*Bo)/(2*zo),h.quadraticform=[[e1*e1-tu*tu-Bo*Bo,e1*vu/zo+tu,e1*t1/zo+Bo],[e1*vu/zo+tu,vu*vu/js-1,vu*t1/js],[e1*t1/zo+Bo,vu*t1/js,t1*t1/js-1]])},h.X=function(Js,qs){var zo=_(),js=Xt[1].Dist(Xt[0]),eu=.5*(js*js-zo*zo)/(js*Math.cos(Js)-zo),Oo=Math.atan2(Xt[1].Y()-Xt[0].Y(),Xt[1].X()-Xt[0].X());return qs||c(Js,qs),Xt[0].X()+Math.cos(Oo+Js)*eu},h.Y=function(Js,qs){var zo=_(),js=Xt[1].Dist(Xt[0]),eu=.5*(js*js-zo*zo)/(js*Math.cos(Js)-zo),Oo=Math.atan2(Xt[1].Y()-Xt[0].Y(),Xt[1].X()-Xt[0].X());return Xt[0].Y()+Math.sin(Oo+Js)*eu},h.midpoint=h.center=d,h.type=Const.OBJECT_TYPE_CONIC,h.subs={center:h.center},h.inherits.push(h.center,Xt[0],Xt[1]),JXG$1.isPoint(b)&&h.inherits.push(b),h.hasPoint=function(Js,qs){var zo,js,eu,Oo,tu;return this.evalVisProp("hasinnerpoints")?(zo=Xt[0].coords,js=Xt[1].coords,eu=this.majorAxis(),Oo=new Coords(Const.COORDS_BY_SCREEN,[Js,qs],this.board),tu=Oo.distance(Const.COORDS_BY_USER,zo)+Oo.distance(Const.COORDS_BY_USER,js),tu<=eu):j.apply(this,arguments)},d.addChild(h),$=0;$<2;$++)JXG$1.isPoint(Xt[$])&&Xt[$].addChild(h);return JXG$1.isPoint(b)&&b.addChild(h),h.setParents(s),h};JXG$1.createHyperbola=function(a,s,o){var c,h,d,b,_,$,j=[],Xt=JXG$1.copyAttributes(o,a.options,"conic","foci"),Lt=JXG$1.copyAttributes(o,a.options,"conic","center"),fr=JXG$1.copyAttributes(o,a.options,"conic");for($=0;$<2;$++)if(s[$].length>1)j[$]=a.create("point",s[$],Xt);else if(JXG$1.isPoint(s[$]))j[$]=a.select(s[$]);else if(JXG$1.isFunction(s[$])&&JXG$1.isPoint(s[$]()))j[$]=s[$]();else if(JXG$1.isString(s[$]))j[$]=a.select(s[$]);else throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);if(JXG$1.isNumber(s[2]))_=JXG$1.createFunction(s[2],a);else if(JXG$1.isFunction(s[2])&&JXG$1.isNumber(s[2]()))_=s[2];else{if(JXG$1.isPoint(s[2]))b=a.select(s[2]);else if(s[2].length>1)b=a.create("point",s[2],Xt);else if(JXG$1.isFunction(s[2])&&JXG$1.isPoint(s[2]()))b=s[2]();else if(JXG$1.isString(s[2]))b=a.select(s[2]);else throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);_=function(){return b.Dist(j[0])-b.Dist(j[1])}}for(JXG$1.exists(s[4])||(s[4]=1.0001*Math.PI),JXG$1.exists(s[3])||(s[3]=-1.0001*Math.PI),d=a.create("point",[function(){return(j[0].X()+j[1].X())*.5},function(){return(j[0].Y()+j[1].Y())*.5}],Lt),h=a.create("curve",[function(Jr){return 0},function(Jr){return 0},s[3],s[4]],fr),h.majorAxis=_,c=function(Jr,Js){var qs,zo,js,eu,Oo,tu,Bo,vu,t1;Js||(qs=_(),zo=qs*qs,js=j[0].X(),eu=j[0].Y(),Oo=j[1].X(),tu=j[1].Y(),Bo=js-Oo,vu=eu-tu,t1=(zo-js*js-eu*eu+Oo*Oo+tu*tu)/(2*qs),h.quadraticform=[[t1*t1-Oo*Oo-tu*tu,t1*Bo/qs+Oo,t1*vu/qs+tu],[t1*Bo/qs+Oo,Bo*Bo/zo-1,Bo*vu/zo],[t1*vu/qs+tu,Bo*vu/zo,vu*vu/zo-1]])},h.X=function(Jr,Js){var qs=_(),zo=j[1].Dist(j[0]),js=.5*(zo*zo-qs*qs)/(zo*Math.cos(Jr)+qs),eu=Math.atan2(j[1].Y()-j[0].Y(),j[1].X()-j[0].X());return Js||c(Jr,Js),j[0].X()+Math.cos(eu+Jr)*js},h.Y=function(Jr,Js){var qs=_(),zo=j[1].Dist(j[0]),js=.5*(zo*zo-qs*qs)/(zo*Math.cos(Jr)+qs),eu=Math.atan2(j[1].Y()-j[0].Y(),j[1].X()-j[0].X());return j[0].Y()+Math.sin(eu+Jr)*js},h.midpoint=h.center=d,h.subs={center:h.center},h.inherits.push(h.center,j[0],j[1]),JXG$1.isPoint(b)&&h.inherits.push(b),h.type=Const.OBJECT_TYPE_CONIC,d.addChild(h),$=0;$<2;$++)JXG$1.isPoint(j[$])&&j[$].addChild(h);return JXG$1.isPoint(b)&&b.addChild(h),h.setParents(s),h};JXG$1.createParabola=function(a,s,o){var c,h,d,b=s[0],_=s[1],$=JXG$1.copyAttributes(o,a.options,"conic","foci"),j=JXG$1.copyAttributes(o,a.options,"conic","center"),Xt=JXG$1.copyAttributes(o,a.options,"conic"),Lt;if(s[0].length>1)b=a.create("point",s[0],$);else if(JXG$1.isPoint(s[0]))b=a.select(s[0]);else if(JXG$1.isFunction(s[0])&&JXG$1.isPoint(s[0]()))b=s[0]();else if(JXG$1.isString(s[0]))b=a.select(s[0]);else throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,line]`);return JXG$1.isArray(_)&&_.length===2&&(Lt=JXG$1.copyAttributes(o,a.options,"conic","line"),_=a.create("line",_,Lt)),JXG$1.exists(s[3])||(s[3]=2*Math.PI),JXG$1.exists(s[2])||(s[2]=0),d=a.create("point",[function(){return Geometry.projectPointToLine(b,_,a).usrCoords}],j),h=a.create("curve",[function(fr){return 0},function(fr){return 0},s[2],s[3]],Xt),h.midpoint=h.center=d,h.subs={center:h.center},h.inherits.push(h.center),c=function(fr,Jr){var Js,qs,zo,js,eu,Oo;Jr||(Js=_.stdform[1],qs=_.stdform[2],zo=_.stdform[0],js=Js*Js+qs*qs,eu=b.X(),Oo=b.Y(),h.quadraticform=[[zo*zo-js*(eu*eu+Oo*Oo),zo*Js+js*eu,zo*qs+js*Oo],[zo*Js+js*eu,-qs*qs,Js*qs],[zo*qs+js*Oo,Js*qs,-Js*Js]])},h.X=function(fr,Jr){var Js,qs,zo=_.getAngle(),js=Geometry.distPointLine(b.coords.usrCoords,_.stdform),eu=_.point1.coords.usrCoords,Oo=_.point2.coords.usrCoords,tu=b.coords.usrCoords;return eu[0]===0?eu=[1,Oo[1]+_.stdform[2],Oo[2]-_.stdform[1]]:Oo[0]===0&&(Oo=[1,eu[1]+_.stdform[2],eu[2]-_.stdform[1]]),qs=(Oo[1]-eu[1])*(tu[2]-eu[2])-(Oo[2]-eu[2])*(tu[1]-eu[1])>=0?1:-1,Js=qs*js/(1-Math.sin(fr)),Jr||c(fr,Jr),b.X()+Math.cos(fr+zo)*Js},h.Y=function(fr,Jr){var Js,qs,zo=_.getAngle(),js=Geometry.distPointLine(b.coords.usrCoords,_.stdform),eu=_.point1.coords.usrCoords,Oo=_.point2.coords.usrCoords,tu=b.coords.usrCoords;return eu[0]===0?eu=[1,Oo[1]+_.stdform[2],Oo[2]-_.stdform[1]]:Oo[0]===0&&(Oo=[1,eu[1]+_.stdform[2],eu[2]-_.stdform[1]]),qs=(Oo[1]-eu[1])*(tu[2]-eu[2])-(Oo[2]-eu[2])*(tu[1]-eu[1])>=0?1:-1,Js=qs*js/(1-Math.sin(fr)),b.Y()+Math.sin(fr+zo)*Js},h.type=Const.OBJECT_TYPE_CONIC,d.addChild(h),JXG$1.isPoint(b)&&(b.addChild(h),h.inherits.push(b)),_.addChild(h),h.setParents(s),h};JXG$1.createConic=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js=[[1,0,0],[0,1,0],[0,0,1]],eu=[[1,0,0],[0,1,0],[0,0,1]],Oo=[],tu=[],Bo=JXG$1.copyAttributes(o,a.options,"conic","point"),vu=JXG$1.copyAttributes(o,a.options,"conic","center"),t1=JXG$1.copyAttributes(o,a.options,"conic");if(s.length===5)zo=!0;else if(s.length===6)zo=!1;else throw new Error("JSXGraph: Can't create generic Conic with "+s.length+" parameters.");if(zo)for(Js=0;Js<5;Js++)if(s[Js].length>1)Oo[Js]=a.create("point",s[Js],Bo);else if(JXG$1.isPoint(s[Js]))Oo[Js]=a.select(s[Js]);else if(JXG$1.isFunction(s[Js])&&JXG$1.isPoint(s[Js]()))Oo[Js]=s[Js]();else if(JXG$1.isString(s[Js]))Oo[Js]=a.select(s[Js]);else throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof s[Js]+`'.
Possible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]`);else qs=[[0,0,0],[0,0,0],[0,0,0]],qs[0][0]=JXG$1.isFunction(s[2])?function(){return s[2]()}:function(){return s[2]},qs[0][1]=JXG$1.isFunction(s[4])?function(){return s[4]()}:function(){return s[4]},qs[0][2]=JXG$1.isFunction(s[5])?function(){return s[5]()}:function(){return s[5]},qs[1][1]=JXG$1.isFunction(s[0])?function(){return s[0]()}:function(){return s[0]},qs[1][2]=JXG$1.isFunction(s[3])?function(){return s[3]()}:function(){return s[3]},qs[2][2]=JXG$1.isFunction(s[1])?function(){return s[1]()}:function(){return s[1]};if(_=function(e1){var r1,a1;for(r1=0;r1<3;r1++)for(a1=r1;a1<3;a1++)e1[r1][a1]+=e1[a1][r1];for(r1=0;r1<3;r1++)for(a1=0;a1<r1;a1++)e1[r1][a1]=e1[a1][r1];return e1},b=function(e1,r1){var a1,i1,s1=[[0,0,0],[0,0,0],[0,0,0]];for(a1=0;a1<3;a1++)for(i1=0;i1<3;i1++)s1[a1][i1]=e1[a1]*r1[i1];return _(s1)},d=function(e1,r1,a1){var i1,s1,c1,h1,m1,l1=[[0,0,0],[0,0,0],[0,0,0]];for(m1=Mat.matVecMult(r1,a1),c1=Mat.innerProduct(a1,m1),m1=Mat.matVecMult(e1,a1),h1=Mat.innerProduct(a1,m1),i1=0;i1<3;i1++)for(s1=0;s1<3;s1++)l1[i1][s1]=c1*e1[i1][s1]-h1*r1[i1][s1];return l1},h=a.create("curve",[function(e1){return 0},function(e1){return 0},0,2*Math.PI],t1),c=function(e1,r1){var a1,i1,s1;if(!r1){if(zo){for(a1=0;a1<5;a1++)tu[a1]=Oo[a1].coords.usrCoords;fr=b(Mat.crossProduct(tu[0],tu[1]),Mat.crossProduct(tu[2],tu[3])),Jr=b(Mat.crossProduct(tu[0],tu[2]),Mat.crossProduct(tu[1],tu[3])),eu=d(fr,Jr,tu[4])}else for(a1=0;a1<3;a1++)for(i1=a1;i1<3;i1++)eu[a1][i1]=qs[a1][i1](),i1>a1&&(eu[i1][a1]=eu[a1][i1]);h.quadraticform=eu,$=Numerics.Jacobi(eu),$[0][0][0]<0&&($[0][0][0]*=-1,$[0][1][1]*=-1,$[0][2][2]*=-1),js=$[1],Lt=Math.sqrt(Math.abs($[0][0][0])),j=Math.sqrt(Math.abs($[0][1][1])),Xt=Math.sqrt(Math.abs($[0][2][2]))}return $[0][1][1]<=0&&$[0][2][2]<=0?s1=Mat.matVecMult(js,[1/Lt,Math.cos(e1)/j,Math.sin(e1)/Xt]):$[0][1][1]<=0&&$[0][2][2]>0?s1=Mat.matVecMult(js,[Math.cos(e1)/Lt,1/j,Math.sin(e1)/Xt]):$[0][2][2]<0&&(s1=Mat.matVecMult(js,[Math.sin(e1)/Lt,Math.cos(e1)/j,1/Xt])),JXG$1.exists(s1)?(s1[1]/=s1[0],s1[2]/=s1[0],s1[0]=1):s1=[1,NaN,NaN],s1},h.X=function(e1,r1){return c(e1,r1)[1]},h.Y=function(e1,r1){return c(e1,r1)[2]},h.midpoint=a.create("point",[function(){var e1=h.quadraticform;return[e1[1][1]*e1[2][2]-e1[1][2]*e1[1][2],e1[1][2]*e1[0][2]-e1[2][2]*e1[0][1],e1[0][1]*e1[1][2]-e1[1][1]*e1[0][2]]}],vu),h.type=Const.OBJECT_TYPE_CONIC,h.center=h.midpoint,h.subs={center:h.center},h.inherits.push(h.center),h.inherits=h.inherits.concat(Oo),zo){for(Js=0;Js<5;Js++)JXG$1.isPoint(Oo[Js])&&Oo[Js].addChild(h);h.setParents(s)}return h.addChild(h.center),h};JXG$1.registerElement("ellipse",JXG$1.createEllipse);JXG$1.registerElement("hyperbola",JXG$1.createHyperbola);JXG$1.registerElement("parabola",JXG$1.createParabola);JXG$1.registerElement("conic",JXG$1.createConic);JXG$1.Polygon=function(a,s,o){this.constructor(a,o,Const.OBJECT_TYPE_POLYGON,Const.OBJECT_CLASS_AREA);var c,h,d,b,_,$=JXG$1.copyAttributes(o,a.options,"polygon","borders");for(this.withLines=o.withlines,this.attr_line=$,this.vertices=[],c=0;c<s.length;c++)this.vertices[c]=this.board.select(s[c]),this.vertices[c]._is_new&&(delete this.vertices[c]._is_new,this.vertices[c]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(d=this.vertices.length-1,b=0;b<d;b++)c=(b+1)%d,$.id=$.ids&&$.ids[c],$.name=$.names&&$.names[c],$.strokecolor=JXG$1.isArray($.colors)&&$.colors[c%$.colors.length]||$.strokecolor,$.visible=JXG$1.exists(o.borders.visible)?o.borders.visible:o.visible,$.strokecolor===!1&&($.strokecolor="none"),h=a.create("segment",[this.vertices[c],this.vertices[c+1]],$),h.dump=!1,this.borders[c]=h,h.parentPolygon=this,this.addChild(h);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),c=0;c<this.vertices.length-1;c++)_=this.board.select(this.vertices[c]),JXG$1.exists(_._is_new_pol)?(this.addChild(_),delete _._is_new_pol):_.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=JXG$1.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",boundingBox:"bounds",BoundingBox:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints",Intersect:"intersect"})};JXG$1.Polygon.prototype=new GeometryElement;JXG$1.extend(JXG$1.Polygon.prototype,{pnpoly:function(a,s,o){return Geometry.pnpoly(a,s,this.vertices,o,this.board)},hasPoint:function(a,s){var o,c;if(this.evalVisProp("hasinnerpoints")&&this.pnpoly(a,s))return!0;for(c=this.borders.length,o=0;o<c;o++)if(this.borders[o].hasPoint(a,s))return!0;return!1},updateRenderer:function(){var a,s;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(s=this.vertices.length-(this.elType==="polygonalchain"?0:1),this.isReal=!0,a=0;a<s;++a)if(!this.vertices[a].isReal){this.isReal=!1;break}if(!this.isReal){this.updateVisibility(!1);for(a in this.childElements)this.childElements.hasOwnProperty(a)&&this.childElements[a].setDisplayRendNode(!1)}}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var a,s,o,c,h;if(this.vertices.length===0)return new Coords(Const.COORDS_BY_USER,[1,0,0],this.board);for(a=this.vertices[0].X(),s=this.vertices[0].Y(),o=a,c=s,h=0;h<this.vertices.length;h++)this.vertices[h].X()<a&&(a=this.vertices[h].X()),this.vertices[h].X()>o&&(o=this.vertices[h].X()),this.vertices[h].Y()>s&&(s=this.vertices[h].Y()),this.vertices[h].Y()<c&&(c=this.vertices[h].Y());return new Coords(Const.COORDS_BY_USER,[(a+o)*.5,(s+c)*.5],this.board)},getLabelAnchor:JXG$1.shortcut(JXG$1.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var a,s=JXG$1.getCloneObject(this);return s.vertices=this.vertices,a=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(s),this.board.renderer.enhancedRendering=a,this.traces[s.id]=s.rendNode,this},hideElement:function(a){var s;if(JXG$1.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!a)for(s=0;s<this.borders.length;s++)this.borders[s].hideElement();this.hasLabel&&JXG$1.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(a){var s;if(JXG$1.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!a)for(s=0;s<this.borders.length;s++)this.borders[s].showElement().updateRenderer();return JXG$1.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(Geometry.signedPolygon(this.vertices,!0))},Perimeter:function(){var a,s=this.vertices.length,o=0;for(a=1;a<s;++a)o+=this.vertices[a].Dist(this.vertices[a-1]);return o},L:function(){return this.Perimeter()},boundingBox:function(){var a=[0,0,0,0],s,o,c=this.vertices.length-1;if(c===0)return a;for(a[0]=this.vertices[0].X(),a[2]=a[0],a[1]=this.vertices[0].Y(),a[3]=a[1],s=1;s<c;++s)o=this.vertices[s].X(),o<a[0]?a[0]=o:o>a[2]&&(a[2]=o),o=this.vertices[s].Y(),o>a[1]?a[1]=o:o<a[3]&&(a[3]=o);return a},bounds:function(){return this.boundingBox()},remove:function(){var a;for(a=0;a<this.borders.length;a++)this.board.removeObject(this.borders[a]);GeometryElement.prototype.remove.call(this)},findPoint:function(a){var s;if(!JXG$1.isPoint(a))return-1;for(s=0;s<this.vertices.length;s++)if(this.vertices[s].id===a.id)return s;return-1},addPoints:function(a){var s,o=Array.prototype.slice.call(arguments);return this.elType==="polygonalchain"?s=this.vertices.length-1:s=this.vertices.length-2,this.insertPoints.apply(this,[s].concat(o))},insertPoints:function(a,s){var o,c,h,d,b;if(arguments.length===0)return this;if(h=this.vertices.length-1,this.elType==="polygon"&&h--,a<-1||a>h)return this;for(c=arguments.length-1,o=1;o<c+1;o++)b=JXG$1.providePoints(this.board,[arguments[o]],{},"polygon",["vertices"])[0],b._is_new&&(this.addChild(b),delete b._is_new),this.vertices.splice(a+o,0,b);if(this.withLines)for(d=a+1,this.elType==="polygon"?a<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[a].point2=this.vertices[d]:a>=0&&(a<this.borders.length?this.borders[a].point2=this.vertices[d]:d=a),o=d;o<d+c;o++)this.borders.splice(o,0,this.board.create("segment",[this.vertices[o],this.vertices[o+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(a){var s,o,c,h,d=[],b=[],_=[],$=[];for(this.elType==="polygon"&&(h=this.vertices.pop()),s=0;s<arguments.length;s++)c=arguments[s],JXG$1.isPoint(c)&&(c=this.findPoint(c)),JXG$1.isNumber(c)&&c>-1&&c<this.vertices.length&&JXG$1.indexOf(_,c)===-1&&_.push(c);if(_.length===0)return this.elType==="polygon"&&this.vertices.push(h),this;for(s=0;s<_.length;s++)this.vertices[_[s]].removeChild(this);for(_=_.sort(),d=this.vertices.slice(),b=this.borders.slice(),this.withLines&&$.push([_[_.length-1]]),s=_.length-1;s>-1;s--)d[_[s]]=-1,this.withLines&&_.length>1&&_[s]-1>_[s-1]&&($[$.length-1][1]=_[s],$.push([_[s-1]]));for(this.withLines&&($[$.length-1][1]=_[0]),this.vertices=[],s=0;s<d.length;s++)JXG$1.isPoint(d[s])&&this.vertices.push(d[s]);if(this.elType==="polygon"&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(s=0;s<$.length;s++){for(o=$[s][1]-1;o<$[s][0]+1;o++)o<0?this.elType==="polygon"&&(this.board.removeObject(this.borders[b.length-1]),b[b.length-1]=-1):o<b.length&&(this.board.removeObject(this.borders[o]),b[o]=-1);$[s][1]!==0&&$[s][0]!==d.length-1&&(b[$[s][0]-1]=this.board.create("segment",[d[$[s][1]-1],d[$[s][0]+1]],this.attr_line))}for(this.borders=[],s=0;s<b.length;s++)b[s]!==-1&&this.borders.push(b[s]);this.elType==="polygon"&&this.vertices.length>2&&($[0][1]===this.vertices.length-1||$[$.length-1][1]===0)&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var a=GeometryElement.prototype.getAttributes.call(this),s;if(this.withLines)for(a.lines=a.lines||{},a.lines.ids=[],a.lines.colors=[],s=0;s<this.borders.length;s++)a.lines.ids.push(this.borders[s].id),a.lines.colors.push(this.borders[s].visProp.strokecolor);return a},snapToGrid:function(){var a,s;for(this.evalVisProp("snaptogrid")?s=!0:s=!1,a=0;a<this.vertices.length;a++)this.vertices[a].handleSnapToGrid(s,!0)},setPositionDirectly:function(a,s,o){var c,h,d,b,_=new Coords(a,s,this.board),$=new Coords(a,o,this.board);for(b=this.vertices.length-1,d=0;d<b;d++)if(!this.vertices[d].draggable())return this;return c=Stat.subtract(_.usrCoords,$.usrCoords),h=this.board.create("transform",c.slice(1),{type:"translate"}),h.applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(a){var s=JXG$1.Math.Geometry.sortVertices(this.vertices),o=JXG$1.Math.Geometry.sortVertices(a.vertices),c=s.length-1,h=o.length-1,d,b=[],_,$,j,Xt,Lt,fr,Jr=function(Js,qs,zo){return(qs[1]-Js[1])*(zo[2]-Js[2])-(qs[2]-Js[2])*(zo[1]-Js[1])>=0};for($=0;$<h;$++)b.push(o[$]);for($=0;$<c;$++)for(_=b.slice(0),d=_.length,b=[],Xt=_[d-1],j=0;j<d;j++)Lt=_[j],Jr(s[$],s[$+1],Lt)?(Jr(s[$],s[$+1],Xt)||(fr=JXG$1.Math.Geometry.meetSegmentSegment(Xt,Lt,s[$],s[$+1]),fr[0][1]/=fr[0][0],fr[0][2]/=fr[0][0],fr[0][0]=1,b.push(fr[0])),b.push(Lt)):Jr(s[$],s[$+1],Xt)&&(fr=JXG$1.Math.Geometry.meetSegmentSegment(Xt,Lt,s[$],s[$+1]),fr[0][1]/=fr[0][0],fr[0][2]/=fr[0][0],fr[0][0]=1,b.push(fr[0])),Xt=Lt;return b},intersect:function(a){return this.sutherlandHodgman(a)}});JXG$1.createPolygon=function(a,s,o){var c,h,d,b,_=[],$,j,Xt=!1;if($=JXG$1.copyAttributes(o,a.options,"polygon"),b=a.select(s[0]),b===null&&(b=s[0]),JXG$1.isObject(b)&&b.type===Const.OBJECT_TYPE_POLYGON&&JXG$1.isTransformationOrArray(s[1]))for(Xt=!0,d=b.vertices.length-1,j=JXG$1.copyAttributes(o,a.options,"polygon","vertices"),h=0;h<d;h++)j.withlabel&&(j.name=b.vertices[h].name===""?"":b.vertices[h].name+"'"),_.push(a.create("point",[b.vertices[h],s[1]],j));else if(_=JXG$1.providePoints(a,s,o,"polygon",["vertices"]),_===!1)throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if($=JXG$1.copyAttributes(o,a.options,"polygon"),c=new JXG$1.Polygon(a,_,$),c.isDraggable=!0,Xt)for(c.prepareUpdate().update().updateVisibility().updateRenderer(),d=b.vertices.length-1,h=0;h<d;h++)_[h].prepareUpdate().update().updateVisibility().updateRenderer();return c};JXG$1.createRegularPolygon=function(a,s,o){var c,h,d,b=[],_,$,j,Xt;if($=s.length,d=s[$-1],JXG$1.isNumber(d)&&(s.length!==3||d<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(JXG$1.isNumber(a.select(d))?($--,j=!1):(d=$,j=!0),b=JXG$1.providePoints(a,s.slice(0,$),o,"regularpolygon",["vertices"]),b===!1)throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(Xt=JXG$1.copyAttributes(o,a.options,"regularpolygon","vertices"),h=2;h<d;h++)_=a.create("transform",[Math.PI*(2-(d-2)/d),b[h-1]],{type:"rotate"}),j?(b[h].addTransform(b[h-2],_),b[h].fullUpdate()):(JXG$1.isArray(Xt.ids)&&Xt.ids.length>=d-2&&(Xt.id=Xt.ids[h-2]),b[h]=a.create("point",[b[h-2],_],Xt),b[h].type=Const.OBJECT_TYPE_CAS,b[h].isDraggable=!0,b[h].visProp.fixed=!1);return Xt=JXG$1.copyAttributes(o,a.options,"regularpolygon"),c=a.create("polygon",b,Xt),c.elType="regularpolygon",c};JXG$1.createPolygonalChain=function(a,s,o){var c,h;return c=JXG$1.copyAttributes(o,a.options,"polygonalchain"),h=a.create("polygon",s,c),h.elType="polygonalchain",h.vertices.pop(),a.removeObject(h.borders[h.borders.length-1]),h.borders.pop(),h};JXG$1.createParallelogram=function(a,s,o){var c,h,d=[],b,_;if(d=JXG$1.providePoints(a,s,o,"polygon",["vertices"]),d===!1||d.length<3)throw new Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return _=JXG$1.copyAttributes(o,a.options,"parallelogram","parallelpoint"),h=a.create("parallelpoint",d,_),b=JXG$1.copyAttributes(o,a.options,"parallelogram"),c=a.create("polygon",[d[0],d[1],h,d[2]],b),c.elType="parallelogram",c.parallelPoint=h,c.isDraggable=!0,h.isDraggable=!0,h.visProp.fixed=!1,c};JXG$1.registerElement("polygon",JXG$1.createPolygon);JXG$1.registerElement("regularpolygon",JXG$1.createRegularPolygon);JXG$1.registerElement("polygonalchain",JXG$1.createPolygonalChain);JXG$1.registerElement("parallelogram",JXG$1.createParallelogram);const Polygon=JXG$1.Polygon;JXG$1.Curve=function(a,s,o){this.constructor(a,o,Const.OBJECT_TYPE_CURVE,Const.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=this.evalVisProp("numberpointshigh"),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,JXG$1.exists(s[0])?this.varname=s[0]:this.varname="x",this.xterm=s[1],this.yterm=s[2],this.generateTerm(this.varname,this.xterm,this.yterm,s[3],s[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),JXG$1.isString(this.xterm)&&this.notifyParents(this.xterm),JXG$1.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=JXG$1.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo",MinX:"minX",MaxX:"maxX"})};JXG$1.Curve.prototype=new GeometryElement;JXG$1.extend(JXG$1.Curve.prototype,{minX:function(){var a;return this.evalVisProp("curvetype")==="polar"?0:(a=new Coords(Const.COORDS_BY_SCREEN,[-this.board.canvasWidth*.1,0],this.board,!1),a.usrCoords[1])},maxX:function(){var a;return this.evalVisProp("curvetype")==="polar"?2*Math.PI:(a=new Coords(Const.COORDS_BY_SCREEN,[this.board.canvasWidth*1.1,0],this.board,!1),a.usrCoords[1])},X:function(a){return NaN},Y:function(a){return NaN},Z:function(a){return 1},Ft:function(a){var s=[this.Z(a),this.X(a),this.Y(a)],o=this.transformations.length;return o>0&&(s=Mat.matVecMult(this.transformMat,s)),s[1]/=s[0],s[2]/=s[0],s[0]/=s[0],s},hasPoint:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr=[],Jr,Js,qs=this.evalVisProp("numberpointslow"),zo=(this.maxX()-this.minX())/qs,js,eu,Oo=1/0,tu,Bo,vu,t1,e1,r1=!0;if(JXG$1.isObject(this.evalVisProp("precision"))?(eu=this.board._inputDevice,js=this.evalVisProp("precision."+eu)):js=this.board.options.precision.hasPoint,$=new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board,!1),a=$.usrCoords[1],s=$.usrCoords[2],this.bezierDegree===1&&this.evalVisProp("hasinnerpoints")&&(Lt=Geometry.windingNumber([1,a,s],this.points,!0),Lt!==0))return!0;if(js+=this.evalVisProp("strokewidth")*.5,js*=js,tu=this.board.unitX*this.board.unitX,Bo=this.board.unitY*this.board.unitY,t1=this.minX(),e1=this.maxX(),JXG$1.exists(this._visibleArea)&&(t1=this._visibleArea[0],e1=this._visibleArea[1],zo=(e1-t1)/qs),vu=this.evalVisProp("curvetype"),vu==="parameter"||vu==="polar")for(this.transformations.length>0&&(this.updateTransformMatrix(),Xt=Mat.inverse(this.transformMat),h=Mat.matVecMult(Xt,[1,a,s]),a=h[1],s=h[2]),d=0,c=t1;d<qs;d++){if(b=this.X(c,r1),_=this.Y(c,r1),Oo=(a-b)*(a-b)*tu+(s-_)*(s-_)*Bo,Oo<=js)return!0;c+=zo}else if(vu==="plot"||vu==="functiongraph"){for((!JXG$1.exists(o)||o<0)&&(o=0),JXG$1.exists(this.qdt)&&this.evalVisProp("useqdt")&&this.bezierDegree!==3?(Js=this.qdt.query(new Coords(Const.COORDS_BY_USER,[a,s],this.board)),Jr=Js.points,j=Jr.length):(Jr=this.points,j=this.numberPoints-1),d=o;d<j;d++)if(this.bezierDegree===3?fr=Geometry.projectCoordsToBeziersegment([1,a,s],this,d):Js?(Jr[d].prev&&(fr=Geometry.projectCoordsToSegment([1,a,s],Jr[d].prev.usrCoords,Jr[d].usrCoords)),Jr[d].next&&Jr[d+1]!==Jr[d].next&&(fr=Geometry.projectCoordsToSegment([1,a,s],Jr[d].usrCoords,Jr[d].next.usrCoords))):fr=Geometry.projectCoordsToSegment([1,a,s],Jr[d].usrCoords,Jr[d+1].usrCoords),fr[1]>=0&&fr[1]<=1&&(a-fr[0][1])*(a-fr[0][1])*tu+(s-fr[0][2])*(s-fr[0][2])*Bo<=js)return!0;return!1}return Oo<js},allocatePoints:function(){var a,s;if(s=this.numberPoints,this.points.length<this.numberPoints)for(a=this.points.length;a<s;a++)this.points[a]=new Coords(Const.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=Plot.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var a,s,o,c,h,d,b=this.visProp.plotversion,_=!1;if(this.updateTransformMatrix(),this.updateDataArray(),o=this.minX(),c=this.maxX(),JXG$1.exists(this.dataX))for(this.numberPoints=this.dataX.length,s=this.numberPoints,this.allocatePoints(),a=0;a<s;a++)h=a,JXG$1.exists(this.dataY)?(d=a,this.points[a].setCoordinates(Const.COORDS_BY_USER,[this.dataX[a],this.dataY[a]],!1)):(d=this.X(h),this.points[a].setCoordinates(Const.COORDS_BY_USER,[this.dataX[a],this.Y(d,_)],!1)),this.points[a]._t=a,_=!0;else if(this.evalVisProp("doadvancedplot")?b===1||this.evalVisProp("doadvancedplotold")?Plot.updateParametricCurveOld(this,o,c):b===2?Plot.updateParametricCurve_v2(this,o,c):b===3?Plot.updateParametricCurve_v3(this,o,c):b===4?Plot.updateParametricCurve_v4(this,o,c):Plot.updateParametricCurve_v2(this,o,c):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=this.evalVisProp("numberpointshigh"):this.numberPoints=this.evalVisProp("numberpointslow"),this.allocatePoints(),Plot.updateParametricCurveNaive(this,o,c,this.numberPoints)),s=this.numberPoints,this.evalVisProp("useqdt")&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new QDT(this.board.getBoundingBox()),a=0;a<this.points.length;a++)this.qdt.insert(this.points[a]),a>0&&(this.points[a].prev=this.points[a-1]),a<s-1&&(this.points[a].next=this.points[a+1]);for(this.evalVisProp("curvetype")!=="plot"&&this.evalVisProp("rdpsmoothing")&&(this.points=Numerics.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),s=this.numberPoints,a=0;a<s;a++)this.updateTransform(this.points[a]);return this},updateTransformMatrix:function(){var a,s,o=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],s=0;s<o;s++)a=this.transformations[s],a.update(),this.transformMat=Mat.matMatMult(a.matrix,this.transformMat);return this},updateTransform:function(a){var s,o=this.transformations.length;return o>0&&(s=Mat.matVecMult(this.transformMat,a.usrCoords),a.setCoordinates(Const.COORDS_BY_USER,s,!1,!0)),a},addTransform:function(a){var s,o=JXG$1.isArray(a)?a:[a],c=o.length;for(s=0;s<c;s++)this.transformations.push(o[s]);return this},interpolationFunctionFromArray:function(a){var s="data"+a,o=this;return function(c,h){var d,b,_,$,j=o[s],Xt=j.length,Lt,fr=[];if(isNaN(c))return NaN;if(c<0)return JXG$1.isFunction(j[0])?j[0]():j[0];if(o.bezierDegree===3){if(Lt=(Xt-1)/3,c>=Lt)return JXG$1.isFunction(j[j.length-1])?j[j.length-1]():j[j.length-1];for(d=Math.floor(c)*3,_=c%1,$=1-_,b=0;b<4;b++)JXG$1.isFunction(j[d+b])?fr[b]=j[d+b]():fr[b]=j[d+b];return $*$*($*fr[0]+3*_*fr[1])+(3*$*fr[2]+_*fr[3])*_*_}if(c>Xt-2?d=Xt-2:d=parseInt(Math.floor(c),10),d===c)return JXG$1.isFunction(j[d])?j[d]():j[d];for(b=0;b<2;b++)JXG$1.isFunction(j[d+b])?fr[b]=j[d+b]():fr[b]=j[d+b];return fr[0]+(fr[1]-fr[0])*(c-d)}},generateTerm:function(a,s,o,c,h){var d,b,_;JXG$1.isArray(s)?(this.dataX=s,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=JXG$1.createFunction(s,this.board,a),JXG$1.isString(s)?this.visProp.curvetype="functiongraph":(JXG$1.isFunction(s)||JXG$1.isNumber(s))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),JXG$1.isArray(o)?(this.dataY=o,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):JXG$1.exists(o)?this.Y=JXG$1.createFunction(o,this.board,a):(_=Mat.transpose(s),this.dataX=_[0],this.dataY=_[1],this.numberPoints=this.dataX.length,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])),JXG$1.isFunction(s)&&JXG$1.isArray(o)&&(d=JXG$1.createFunction(o[0],this.board,""),b=JXG$1.createFunction(o[1],this.board,""),this.X=function($){return s($)*Math.cos($)+d()},this.X.deps=d.deps,this.Y=function($){return s($)*Math.sin($)+b()},this.Y.deps=b.deps,this.visProp.curvetype="polar"),JXG$1.exists(c)?this.minX=JXG$1.createFunction(c,this.board,""):delete this.minX,JXG$1.exists(h)?this.maxX=JXG$1.createFunction(h,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(a){var s,o,c=!1,h;h={xterm:1,yterm:1};for(s in h)if(h.hasOwnProperty(s)&&this.hasOwnProperty(s)&&this[s].origin){c=!0;for(o in this[s].origin.deps)this[s].origin.deps.hasOwnProperty(o)&&this[s].origin.deps[o].addChild(this)}c||GeonextParser.findDependencies(this,a,this.board)},getLabelPosition:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs=1.5;return j=this.minX(),Xt=this.maxX(),Lt=Numerics.findDomain(this.X,[j,Xt],null,!1),Lt=Numerics.findDomain(this.Y,Lt,null,!1),j=Math.max(Lt[0],Lt[0]),Xt=Math.min(Lt[1],Lt[1]),h=JXG$1.parsePosition(a),$=JXG$1.parseNumber(h.pos,Xt-j,1),h.pos.indexOf("fr")<0&&h.pos.indexOf("%")<0&&($=0),fr=j+$,o=this.X(fr),c=this.Y(fr),isNaN(o+c)&&($/=Xt-j,fr=j+$,o=this.X(j)+$*(this.X(Xt)-this.X(j)),c=this.Y(j)+$*(this.Y(Xt)-this.Y(j))),d=new Coords(Const.COORDS_BY_USER,[o,c],this.board).scrCoords,_=Mat.eps,fr<j+_?(Jr=(this.X(fr+_)-this.X(fr))/_,Js=(this.Y(fr+_)-this.Y(fr))/_):fr>Xt-_?(Jr=(this.X(fr)-this.X(fr-_))/_,Js=(this.Y(fr)-this.Y(fr-_))/_):(Jr=.5*(this.X(fr+_)-this.X(fr-_))/_,Js=.5*(this.Y(fr+_)-this.Y(fr-_))/_),Jr=isNaN(Jr)?1:Jr,Js=isNaN(Js)?1:Js,b=Mat.hypot(Jr,Js),h.side==="left"?Js*=-1:Jr*=-1,JXG$1.exists(this.label)&&(qs=.5*s/b),o=d[1]+Js*this.label.size[0]*qs,c=d[2]-Jr*this.label.size[1]*qs,new Coords(Const.COORDS_BY_SCREEN,[o,c],this.board)},getLabelAnchor:function(){var a,s,o,c,h=.05*this.board.canvasWidth,d=.05*this.board.canvasHeight,b=.95*this.board.canvasWidth,_=.95*this.board.canvasHeight;if(!JXG$1.exists(this.label))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(o=this.label.evalVisProp("position"),!JXG$1.isString(o))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(o.indexOf("right")<0&&o.indexOf("left")<0)switch(this.evalVisProp("label.position")){case"ulft":a=h,s=d;break;case"llft":a=h,s=_;break;case"rt":a=b,s=.5*_;break;case"lrt":a=b,s=_;break;case"urt":a=b,s=d;break;case"top":a=.5*b,s=d;break;case"bot":a=.5*b,s=_;break;default:a=h,s=.5*_}else return this.getLabelPosition(o,this.label.evalVisProp("distance"));return c=new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board,!1),Geometry.projectCoordsToCurve(c.usrCoords[1],c.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var a,s=JXG$1.getCloneObject(this);return s.points=this.points.slice(0),s.bezierDegree=this.bezierDegree,s.numberPoints=this.numberPoints,a=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(s),this.board.renderer.enhancedRendering=a,this.traces[s.id]=s.rendNode,this},bounds:function(){var a=1/0,s=-1/0,o=1/0,c=-1/0,h=this.points.length,d,b,_;if(this.bezierDegree===3){for(d=0;d<h;d++)this.points[d].X=JXG$1.bind(function(){return this.usrCoords[1]},this.points[d]),this.points[d].Y=JXG$1.bind(function(){return this.usrCoords[2]},this.points[d]);return b=Numerics.bezier(this.points),_=b[3](),a=Numerics.fminbr(function($){return b[0]($)},[0,_]),s=Numerics.fminbr(function($){return-b[0]($)},[0,_]),o=Numerics.fminbr(function($){return b[1]($)},[0,_]),c=Numerics.fminbr(function($){return-b[1]($)},[0,_]),a=b[0](a),s=b[0](s),o=b[1](o),c=b[1](c),[a,c,s,o]}for(d=0;d<h;d++)a>this.points[d].usrCoords[1]&&(a=this.points[d].usrCoords[1]),s<this.points[d].usrCoords[1]&&(s=this.points[d].usrCoords[1]),o>this.points[d].usrCoords[2]&&(o=this.points[d].usrCoords[2]),c<this.points[d].usrCoords[2]&&(c=this.points[d].usrCoords[2]);return[a,c,s,o]},getParents:function(){var a=[this.xterm,this.yterm,this.minX(),this.maxX()];return this.parents.length!==0&&(a=this.parents),a},moveTo:function(a){var s=[],o;return this.points.length>0&&!this.evalVisProp("fixed")?(o=this.points[0],a.length===3?s=[a[0]-o.usrCoords[0],a[1]-o.usrCoords[1],a[2]-o.usrCoords[2]]:s=[a[0]-o.usrCoords[1],a[1]-o.usrCoords[2]],this.setPosition(Const.COORDS_BY_USER,s),this.board.update(this)):this},getTransformationSource:function(){var a,s;return JXG$1.exists(this._transformationSource)&&(s=this._transformationSource,s.elementClass===Const.OBJECT_CLASS_CURVE&&(a=!0)),[a,s]}});JXG$1.createCurve=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"curve");return c=a.select(s[0],!0),JXG$1.isTransformationOrArray(s[1])&&JXG$1.isObject(c)&&(c.type===Const.OBJECT_TYPE_CURVE||c.type===Const.OBJECT_TYPE_ANGLE||c.type===Const.OBJECT_TYPE_ARC||c.type===Const.OBJECT_TYPE_CONIC||c.type===Const.OBJECT_TYPE_SECTOR)?(c.type===Const.OBJECT_TYPE_SECTOR?d=JXG$1.copyAttributes(o,a.options,"sector"):c.type===Const.OBJECT_TYPE_ARC?d=JXG$1.copyAttributes(o,a.options,"arc"):c.type===Const.OBJECT_TYPE_ANGLE?(JXG$1.exists(o.withLabel)||(o.withLabel=!1),d=JXG$1.copyAttributes(o,a.options,"angle")):d=JXG$1.copyAttributes(o,a.options,"curve"),d=JXG$1.copyAttributes(d,a.options,"curve"),h=new JXG$1.Curve(a,["x",[],[]],d),h.updateDataArray=function(){var b,_=c.numberPoints;for(this.bezierDegree=c.bezierDegree,this.dataX=[],this.dataY=[],b=0;b<_;b++)this.dataX.push(c.points[b].usrCoords[1]),this.dataY.push(c.points[b].usrCoords[2]);return this},h.addTransform(s[1]),c.addChild(h),h.setParents([c]),h._transformationSource=c,h):(d=JXG$1.copyAttributes(o,a.options,"curve"),new JXG$1.Curve(a,["x"].concat(s),d))};JXG$1.registerElement("curve",JXG$1.createCurve);JXG$1.createFunctiongraph=function(a,s,o){var c,h=["x","x"].concat(s);return c=JXG$1.copyAttributes(o,a.options,"functiongraph"),c=JXG$1.copyAttributes(c,a.options,"curve"),c.curvetype="functiongraph",new JXG$1.Curve(a,h,c)};JXG$1.registerElement("functiongraph",JXG$1.createFunctiongraph);JXG$1.registerElement("plot",JXG$1.createFunctiongraph);JXG$1.createSpline=function(a,s,o){var c,h,d;return h=function(){var b,_=[],$=[];return[function(j,Xt){var Lt,fr,Jr;if(!Xt){if(_=[],$=[],s.length===2&&JXG$1.isArray(s[0])&&JXG$1.isArray(s[1])&&s[0].length===s[1].length)for(Lt=0;Lt<s[0].length;Lt++)JXG$1.isFunction(s[0][Lt])?_.push(s[0][Lt]()):_.push(s[0][Lt]),JXG$1.isFunction(s[1][Lt])?$.push(s[1][Lt]()):$.push(s[1][Lt]);else for(Lt=0;Lt<s.length;Lt++)if(JXG$1.isPoint(s[Lt]))_.push(s[Lt].X()),$.push(s[Lt].Y());else if(JXG$1.isArray(s[Lt])&&s[Lt].length===2)for(fr=0;fr<s.length;fr++)JXG$1.isFunction(s[fr][0])?_.push(s[fr][0]()):_.push(s[fr][0]),JXG$1.isFunction(s[fr][1])?$.push(s[fr][1]()):$.push(s[fr][1]);else JXG$1.isFunction(s[Lt])&&s[Lt]().length===2&&(Jr=s[Lt](),_.push(Jr[0]),$.push(Jr[1]));b=Numerics.splineDef(_,$)}return Numerics.splineEval(j,_,$,b)},function(){return _[0]},function(){return _[_.length-1]}]},o=JXG$1.copyAttributes(o,a.options,"curve"),o.curvetype="functiongraph",d=h(),c=new JXG$1.Curve(a,["x","x",d[0],d[1],d[2]],o),c.setParents(s),c.elType="spline",c};JXG$1.registerElement("spline",JXG$1.createSpline);JXG$1.createCardinalSpline=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr=`
Possible parent types: [points:array, tau:number|function, type:string]`;if(!JXG$1.exists(s[0])||!JXG$1.isArray(s[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+Jr);if(!JXG$1.exists(s[1])||!JXG$1.isNumber(s[1])&&!JXG$1.isFunction(s[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+Jr);if(!JXG$1.exists(s[2])||!JXG$1.isString(s[2])?_="uniform":_=s[2],o=JXG$1.copyAttributes(o,a.options,"curve"),o=JXG$1.copyAttributes(o,a.options,"cardinalspline"),o.curvetype="parameter",$=s[0],j=[],!o.isarrayofcoordinates&&$.length===2&&JXG$1.isArray($[0])&&JXG$1.isArray($[1])&&$[0].length===$[1].length)for(Xt=0;Xt<$[0].length;Xt++)j[Xt]=[],JXG$1.isFunction($[0][Xt])?j[Xt].push($[0][Xt]()):j[Xt].push($[0][Xt]),JXG$1.isFunction($[1][Xt])?j[Xt].push($[1][Xt]()):j[Xt].push($[1][Xt]);else for(Xt=0;Xt<$.length;Xt++)JXG$1.isString($[Xt])?j.push(a.select($[Xt])):JXG$1.isPoint($[Xt])?j.push($[Xt]):JXG$1.isArray($[Xt])&&$[Xt].length===2?(j[Xt]=[],JXG$1.isFunction($[Xt][0])?j[Xt].push($[Xt][0]()):j[Xt].push($[Xt][0]),JXG$1.isFunction($[Xt][1])?j[Xt].push($[Xt][1]()):j[Xt].push($[Xt][1])):JXG$1.isFunction($[Xt])&&$[Xt]().length===2&&j.push(s[Xt]());if(o.createpoints===!0)d=JXG$1.providePoints(a,j,o,"cardinalspline",["points"]);else for(d=[],h=function(Js){return{X:function(){return j[Js][0]},Y:function(){return j[Js][1]},Dist:function(qs){var zo=this.X()-qs.X(),js=this.Y()-qs.Y();return Mat.hypot(zo,js)}}},Xt=0;Xt<j.length;Xt++)JXG$1.isPoint(j[Xt])?d.push(j[Xt]):d.push(h(Xt));for(b=s[1],fr=["x"].concat(Numerics.CardinalSpline(d,b,_)),c=new JXG$1.Curve(a,fr,o),Lt=d.length,c.setParents(d),Xt=0;Xt<Lt;Xt++)$=d[Xt],JXG$1.isPoint($)&&(JXG$1.exists($._is_new)?(c.addChild($),delete $._is_new):$.addChild(c));return c.elType="cardinalspline",c};JXG$1.registerElement("cardinalspline",JXG$1.createCardinalSpline);JXG$1.createMetapostSpline=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt=`
Possible parent types: [points:array, controls:object`;if(!JXG$1.exists(s[0])||!JXG$1.isArray(s[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+Lt);if(!JXG$1.exists(s[1])||!JXG$1.isObject(s[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+Lt);if(o=JXG$1.copyAttributes(o,a.options,"curve"),o=JXG$1.copyAttributes(o,a.options,"metapostspline"),o.curvetype="parameter",_=s[0],$=[],!o.isarrayofcoordinates&&_.length===2&&JXG$1.isArray(_[0])&&JXG$1.isArray(_[1])&&_[0].length===_[1].length)for(j=0;j<_[0].length;j++)$[j]=[],JXG$1.isFunction(_[0][j])?$[j].push(_[0][j]()):$[j].push(_[0][j]),JXG$1.isFunction(_[1][j])?$[j].push(_[1][j]()):$[j].push(_[1][j]);else for(j=0;j<_.length;j++)JXG$1.isString(_[j])?$.push(a.select(_[j])):JXG$1.isPoint(_[j])?$.push(_[j]):JXG$1.isArray(_[j])&&_[j].length===2?($[j]=[],JXG$1.isFunction(_[j][0])?$[j].push(_[j][0]()):$[j].push(_[j][0]),JXG$1.isFunction(_[j][1])?$[j].push(_[j][1]()):$[j].push(_[j][1])):JXG$1.isFunction(_[j])&&_[j]().length===2&&$.push(s[j]());if(o.createpoints===!0)d=JXG$1.providePoints(a,$,o,"metapostspline",["points"]);else for(d=[],h=function(fr){return{X:function(){return $[fr][0]},Y:function(){return $[fr][1]}}},j=0;j<$.length;j++)JXG$1.isPoint($[j])?d.push($[j]):d.push(h);for(b=s[1],c=new JXG$1.Curve(a,["t",[],[],0,_.length-1],o),c.updateDataArray=function(){var fr,Jr,Js=d.length,qs=[];for(Jr=0;Jr<Js;Jr++)qs.push([d[Jr].X(),d[Jr].Y()]);fr=Metapost.curve(qs,b),this.dataX=fr[0],this.dataY=fr[1]},c.bezierDegree=3,Xt=d.length,c.setParents(d),j=0;j<Xt;j++)JXG$1.isPoint(d[j])&&d[j].addChild(c);return c.elType="metapostspline",c};JXG$1.registerElement("metapostspline",JXG$1.createMetapostSpline);JXG$1.createRiemannsum=function(a,s,o){var c,h,d,b,_,$;if($=JXG$1.copyAttributes(o,a.options,"riemannsum"),$.curvetype="plot",d=s[0],c=JXG$1.createFunction(s[1],a,""),!JXG$1.exists(c))throw new Error(`JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);if(typeof s[2]=="string"&&(s[2]="'"+s[2]+"'"),h=JXG$1.createFunction(s[2],a,""),!JXG$1.exists(h))throw new Error(`JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);return b=[[0],[0]].concat(s.slice(3)),_=a.create("curve",b,$),_.sum=0,_.Value=function(){return this.sum},_.updateDataArray=function(){var j=Numerics.riemann(d,c(),h(),this.minX(),this.maxX());this.dataX=j[0],this.dataY=j[1],this.sum=j[2]},_.addParentsFromJCFunctions([c,h]),_};JXG$1.registerElement("riemannsum",JXG$1.createRiemannsum);JXG$1.createTracecurve=function(a,s,o){var c,h,d,b;if(s.length!==2)throw new Error(`JSXGraph: Can't create trace curve with given parent'
Possible parent types: [glider, point]`);if(h=a.select(s[0]),d=a.select(s[1]),h.type!==Const.OBJECT_TYPE_GLIDER||!JXG$1.isPoint(d))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [glider, point]`);return b=JXG$1.copyAttributes(o,a.options,"tracecurve"),b.curvetype="plot",c=a.create("curve",[[0],[0]],b),c.updateDataArray=function(){var _,$,j,Xt,Lt,fr,Jr,Js,qs,zo=this.visProp.numberpoints,js=h.position,eu=h.slideObject,Oo=eu.minX(),tu=eu.maxX();for($=(tu-Oo)/zo,this.dataX=[],this.dataY=[],eu.elementClass!==Const.OBJECT_CLASS_CURVE&&zo++,_=0;_<zo;_++){j=Oo+_*$,fr=eu.X(j)/eu.Z(j),Jr=eu.Y(j)/eu.Z(j),h.setPositionDirectly(Const.COORDS_BY_USER,[fr,Jr]),Js=!1;for(Xt in this.board.objects)if(this.board.objects.hasOwnProperty(Xt)&&(Lt=this.board.objects[Xt],Lt===h&&(Js=!0),Js&&Lt.needsRegularUpdate&&(qs=Lt.visProp.trace,Lt.visProp.trace=!1,Lt.needsUpdate=!0,Lt.update(!0),Lt.visProp.trace=qs,Lt===d)))break;this.dataX[_]=d.X(),this.dataY[_]=d.Y()}h.position=js,Js=!1;for(Xt in this.board.objects)if(this.board.objects.hasOwnProperty(Xt)&&(Lt=this.board.objects[Xt],Lt===h&&(Js=!0),Js&&Lt.needsRegularUpdate&&(qs=Lt.visProp.trace,Lt.visProp.trace=!1,Lt.needsUpdate=!0,Lt.update(!0),Lt.visProp.trace=qs,Lt===d)))break},c};JXG$1.registerElement("tracecurve",JXG$1.createTracecurve);JXG$1.createStepfunction=function(a,s,o){var c,h;if(s.length!==2)throw new Error(`JSXGraph: Can't create step function with given parent'
Possible parent types: [array, array|function]`);return h=JXG$1.copyAttributes(o,a.options,"stepfunction"),c=a.create("curve",s,h),c.updateDataArray=function(){var d,b=0,_=this.xterm.length;if(this.dataX=[],this.dataY=[],_!==0)for(this.dataX[b]=this.xterm[0],this.dataY[b]=this.yterm[0],++b,d=1;d<_;++d)this.dataX[b]=this.xterm[d],this.dataY[b]=this.dataY[b-1],++b,this.dataX[b]=this.xterm[d],this.dataY[b]=this.yterm[d],++b},c};JXG$1.registerElement("stepfunction",JXG$1.createStepfunction);JXG$1.createDerivative=function(a,s,o){var c,h,d,b,_;if(s.length!==1&&s[0].class!==Const.OBJECT_CLASS_CURVE)throw new Error(`JSXGraph: Can't create derivative curve with given parent'
Possible parent types: [curve]`);return _=JXG$1.copyAttributes(o,a.options,"curve"),h=s[0],d=Numerics.D(h.X),b=Numerics.D(h.Y),c=a.create("curve",[function($){return h.X($)},function($){return b($)/d($)},h.minX(),h.maxX()],_),c.setParents(h),c};JXG$1.registerElement("derivative",JXG$1.createDerivative);JXG$1.createCurveIntersection=function(a,s,o){var c;if(s.length!==2)throw new Error(`JSXGraph: Can't create curve intersection with given parent'
Possible parent types: [array, array|function]`);return c=a.create("curve",[[],[]],o),c.updateDataArray=function(){var h=Clip.intersection(s[0],s[1],this.board);this.dataX=h[0],this.dataY=h[1]},c};JXG$1.createCurveUnion=function(a,s,o){var c;if(s.length!==2)throw new Error(`JSXGraph: Can't create curve union with given parent'
Possible parent types: [array, array|function]`);return c=a.create("curve",[[],[]],o),c.updateDataArray=function(){var h=Clip.union(s[0],s[1],this.board);this.dataX=h[0],this.dataY=h[1]},c};JXG$1.createCurveDifference=function(a,s,o){var c;if(s.length!==2)throw new Error(`JSXGraph: Can't create curve difference with given parent'
Possible parent types: [array, array|function]`);return c=a.create("curve",[[],[]],o),c.updateDataArray=function(){var h=Clip.difference(s[0],s[1],this.board);this.dataX=h[0],this.dataY=h[1]},c};JXG$1.registerElement("curvedifference",JXG$1.createCurveDifference);JXG$1.registerElement("curveintersection",JXG$1.createCurveIntersection);JXG$1.registerElement("curveunion",JXG$1.createCurveUnion);JXG$1.createBoxPlot=function(a,s,o){var c,h,d,b=JXG$1.copyAttributes(o,a.options,"boxplot");if(s.length!==3)throw new Error(`JSXGraph: Can't create box plot with given parent'
Possible parent types: [array, number|function, number|function] containing quantiles, axis, width`);if(s[0].length<5)throw new Error(`JSXGraph: Can't create box plot with given parent[0]'
parent[0] has to contain at least 5 quantiles.`);for(c=a.create("curve",[[],[]],b),d=s[0].length,c.Q=[],h=0;h<d;h++)c.Q[h]=JXG$1.createFunction(s[0][h],a);return c.x=JXG$1.createFunction(s[1],a),c.w=JXG$1.createFunction(s[2],a),c.updateDataArray=function(){var _,$,j,Xt,Lt,fr,Jr,Js,qs;Jr=this.evalVisProp("smallwidth"),Js=this.evalVisProp("dir"),qs=this.x(),j=qs-this.w()*.5,Xt=qs-this.w()*.5*Jr,Lt=qs+this.w()*.5,fr=qs+this.w()*.5*Jr,_=[qs,Xt,fr,qs,qs,j,j,Lt,Lt,qs,NaN,j,Lt,NaN,qs,qs,Xt,fr,qs],$=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],Js==="vertical"?(this.dataX=_,this.dataY=$):(this.dataX=$,this.dataY=_)},c.addParentsFromJCFunctions([c.Q,c.x,c.w]),c};JXG$1.registerElement("boxplot",JXG$1.createBoxPlot);JXG$1.createImplicitCurve=function(a,s,o){var c,h;if([1,3,5].indexOf(s.length)<0)throw new Error(`JSXGraph: Can't create curve implicitCurve with given parent'
Possible parent types: [f], [f, rangex, rangey], [f, dfx, dfy] or [f, dfx, dfy, rangex, rangey]
with functions f, dfx, dfy and arrays of length 2 rangex, rangey.`);return h=JXG$1.copyAttributes(o,a.options,"implicitcurve"),c=a.create("curve",[[],[]],h),c.f=JXG$1.createFunction(s[0],a,"x, y"),s.length===5||JXG$1.isString(s[1])||JXG$1.isFunction(s[1])?c.dfx=JXG$1.createFunction(s[1],a,"x, y"):c.dfx=null,s.length===5||JXG$1.isString(s[2])||JXG$1.isFunction(s[2])?c.dfy=JXG$1.createFunction(s[2],a,"x, y"):c.dfy=null,c.domain=null,s.length===5?c.domain=[s[3],s[4]]:s.length===3&&(c.domain=[s[1],s[2]]),c.updateDataArray=function(){var d,b,_,$,j,Xt=[],Lt;this.domain===null?(Lt=this.evalVisProp("margin"),d=this.board.getBoundingBox(),d[0]-=Lt,d[1]+=Lt,d[2]+=Lt,d[3]-=Lt):(b=JXG$1.evaluate(this.domain[0]),_=JXG$1.evaluate(this.domain[1]),d=[Math.min(b[0],b[1]),Math.max(_[0],_[1]),Math.max(b[0],b[1]),Math.min(_[0],_[1])]),j={resolution_out:Math.max(.01,this.evalVisProp("resolution_outer")),resolution_in:Math.max(.01,this.evalVisProp("resolution_inner")),max_steps:this.evalVisProp("max_steps"),alpha_0:this.evalVisProp("alpha_0"),tol_u0:this.evalVisProp("tol_u0"),tol_newton:this.evalVisProp("tol_newton"),tol_cusp:this.evalVisProp("tol_cusp"),tol_progress:this.evalVisProp("tol_progress"),qdt_box:this.evalVisProp("qdt_box"),kappa_0:this.evalVisProp("kappa_0"),delta_0:this.evalVisProp("delta_0"),h_initial:this.evalVisProp("h_initial"),h_critical:this.evalVisProp("h_critical"),h_max:this.evalVisProp("h_max"),loop_dist:this.evalVisProp("loop_dist"),loop_dir:this.evalVisProp("loop_dir"),loop_detection:this.evalVisProp("loop_detection"),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],$=new ImplicitPlot(d,j,this.f,this.dfx,this.dfy),this.qdt=$.qdt,Xt=$.plot(),this.dataX=Xt[0],this.dataY=Xt[1]},c.elType="implicitcurve",c};JXG$1.registerElement("implicitcurve",JXG$1.createImplicitCurve);JXG$1.Curve;JXG$1.createArc=function(a,s,o){var c,h,d;if(d=JXG$1.providePoints(a,s,o,"arc",["center","radiuspoint","anglepoint"]),d===!1||d.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point], [arc, transformation]`);return h=JXG$1.copyAttributes(o,a.options,"arc"),c=a.create("curve",[[0],[0],0,4],h),c.elType="arc",c.setParents(d),c.type=Const.OBJECT_TYPE_ARC,c.center=d[0],c.radiuspoint=d[1],c.point2=c.radiuspoint,c.anglepoint=d[2],c.point3=c.anglepoint,JXG$1.exists(c.center._is_new)?(c.addChild(c.center),delete c.center._is_new):c.center.addChild(c),JXG$1.exists(c.radiuspoint._is_new)?(c.addChild(c.radiuspoint),delete c.radiuspoint._is_new):c.radiuspoint.addChild(c),JXG$1.exists(c.anglepoint._is_new)?(c.addChild(c.anglepoint),delete c.anglepoint._is_new):c.anglepoint.addChild(c),c.useDirection=h.usedirection,c.updateDataArray=function(){var b,_,$,j,Xt,Lt,fr=1,Jr=this.radiuspoint,Js=this.center,qs=this.anglepoint,zo=this.evalVisProp("selection");_=Geometry.rad(Jr,Js,qs),(zo==="minor"&&_>Math.PI||zo==="major"&&_<Math.PI)&&(fr=-1),this.useDirection&&(j=d[1].coords.usrCoords,Xt=d[3].coords.usrCoords,Lt=d[2].coords.usrCoords,$=(j[1]-Lt[1])*(j[2]-Xt[2])-(j[2]-Lt[2])*(j[1]-Xt[1]),$<0?(this.radiuspoint=d[1],this.anglepoint=d[2]):(this.radiuspoint=d[2],this.anglepoint=d[1])),Jr=Jr.coords.usrCoords,Js=Js.coords.usrCoords,qs=qs.coords.usrCoords,b=Geometry.bezierArc(Jr,Js,qs,!1,fr),this.dataX=b[0],this.dataY=b[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},c.Radius=function(){return this.radiuspoint.Dist(this.center)},c.getRadius=function(){return JXG$1.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},c.Value=function(b,_){var $;return _=_||Geometry.rad(this.radiuspoint,this.center,this.anglepoint),b=b||"length",b=b.toLocaleLowerCase(),b===""||b.indexOf("len")===0?$=_*this.Radius():b.indexOf("rad")===0?$=_:b.indexOf("deg")===0?$=_*180/Math.PI:b.indexOf("sem")===0?$=_/Math.PI:b.indexOf("cir")===0&&($=_*.5/Math.PI),$},c.L=function(){return this.Value("length")},c.hasPoint=function(b,_){var $,j,Xt,Lt,fr,Jr,Js,qs=this.Radius();return this.evalVisProp("hasinnerpoints")?this.hasPointSector(b,_):(JXG$1.isObject(this.evalVisProp("precision"))?(Js=this.board._inputDevice,Jr=this.evalVisProp("precision."+Js)):Jr=this.board.options.precision.hasPoint,Jr/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),j=new Coords(Const.COORDS_BY_SCREEN,[b,_],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),Lt=Mat.inverse(this.transformMat),fr=Mat.matVecMult(Lt,j.usrCoords),j=new Coords(Const.COORDS_BY_USER,fr,this.board)),$=this.center.coords.distance(Const.COORDS_BY_USER,j),Xt=Math.abs($-qs)<Jr,Xt&&(Xt=Geometry.coordsOnArc(this,j)),Xt)},c.hasPointSector=function(b,_){var $=new Coords(Const.COORDS_BY_SCREEN,[b,_],this.board),j=this.Radius(),Xt=this.center.coords.distance(Const.COORDS_BY_USER,$),Lt=Xt<j;return Lt&&(Lt=Geometry.coordsOnArc(this,$)),Lt},c.getTextAnchor=function(){return this.center.coords},c.getLabelAnchor=function(){var b,_,$,j,Xt,Lt=this.label.evalVisProp("position"),fr=Geometry.rad(this.radiuspoint,this.center,this.anglepoint),Jr=10/this.board.unitX,Js=10/this.board.unitY,qs=this.point2.coords.usrCoords,zo=this.center.coords.usrCoords,js=qs[1]-zo[1],eu=qs[2]-zo[2],Oo=this.evalVisProp("selection"),tu=this.label?this.label.visProp:this.visProp.label;return!JXG$1.isString(Lt)||Lt.indexOf("right")<0&&Lt.indexOf("left")<0?((Oo==="minor"&&fr>Math.PI||Oo==="major"&&fr<Math.PI)&&(fr=-(2*Math.PI-fr)),b=new Coords(Const.COORDS_BY_USER,[zo[1]+Math.cos(fr*.5)*js-Math.sin(fr*.5)*eu,zo[2]+Math.sin(fr*.5)*js+Math.cos(fr*.5)*eu],this.board),$=b.usrCoords[1]-zo[1],j=b.usrCoords[2]-zo[2],Xt=Mat.hypot($,j),$=$*(Xt+Jr)/Xt,j=j*(Xt+Js)/Xt,_=[zo[1]+$,zo[2]+j],tu.position=Geometry.calcLabelQuadrant(Geometry.rad([1,0],[0,0],_)),new Coords(Const.COORDS_BY_USER,_,this.board)):this.getLabelPosition(Lt,this.label.evalVisProp("distance"))},c.updateQuadraticform=Circle.prototype.updateQuadraticform,c.updateStdform=Circle.prototype.updateStdform,c.methodMap=JXG$1.deepCopy(c.methodMap,{getRadius:"getRadius",radius:"Radius",Radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),c.prepareUpdate().update(),c};JXG$1.registerElement("arc",JXG$1.createArc);JXG$1.createSemicircle=function(a,s,o){var c,h,d,b;if(b=JXG$1.providePoints(a,s,o,"point"),b===!1||b.length!==2)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point]`);return d=JXG$1.copyAttributes(o,a.options,"semicircle","center"),h=a.create("midpoint",b,d),h.dump=!1,d=JXG$1.copyAttributes(o,a.options,"semicircle"),c=a.create("arc",[h,b[1],b[0]],d),c.elType="semicircle",c.setParents([b[0].id,b[1].id]),c.subs={midpoint:h},c.inherits.push(h),c.midpoint=c.center=h,c};JXG$1.registerElement("semicircle",JXG$1.createSemicircle);JXG$1.createCircumcircleArc=function(a,s,o){var c,h,d,b;if(b=JXG$1.providePoints(a,s,o,"point"),b===!1||b.length!==3)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`);return d=JXG$1.copyAttributes(o,a.options,"circumcirclearc","center"),h=a.create("circumcenter",b,d),h.dump=!1,d=JXG$1.copyAttributes(o,a.options,"circumcirclearc"),d.usedirection=!0,c=a.create("arc",[h,b[0],b[2],b[1]],d),c.elType="circumcirclearc",c.setParents([b[0].id,b[1].id,b[2].id]),c.subs={center:h},c.inherits.push(h),c.center=h,c};JXG$1.registerElement("circumcirclearc",JXG$1.createCircumcircleArc);JXG$1.createMinorArc=function(a,s,o){return o.selection="minor",JXG$1.createArc(a,s,o)};JXG$1.registerElement("minorarc",JXG$1.createMinorArc);JXG$1.createMajorArc=function(a,s,o){return o.selection="major",JXG$1.createArc(a,s,o)};JXG$1.registerElement("majorarc",JXG$1.createMajorArc);JXG$1.createSector=function(a,s,o){var c,h,d,b=1e-14,_="invalid",$,j,Xt=["center","radiusPoint","anglePoint"],Lt;if(s[0].elementClass===Const.OBJECT_CLASS_LINE&&s[1].elementClass===Const.OBJECT_CLASS_LINE&&(JXG$1.isArray(s[2])||JXG$1.isNumber(s[2]))&&(JXG$1.isArray(s[3])||JXG$1.isNumber(s[3]))&&(JXG$1.isNumber(s[4])||JXG$1.isFunction(s[4])||JXG$1.isString(s[4])))_="2lines";else{if(Lt=JXG$1.providePoints(a,s,o,"sector",Xt),Lt===!1)throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+"'.");_="3points"}if(h=JXG$1.copyAttributes(o,a.options,"sector"),c=a.create("curve",[[0],[0],0,6],h),c.type=Const.OBJECT_TYPE_SECTOR,c.elType="sector",c.autoRadius=function(){var fr=20/c.board.unitX,Jr=1/0,Js=50/c.board.unitX;return JXG$1.isPoint(c.center)&&(Jr=c.center.Dist(c.point2)*.3333),Math.max(fr,Math.min(Jr,Js))},_==="2lines")c.Radius=function(){var fr=JXG$1.evaluate(s[4]);return fr==="auto"?this.autoRadius():fr},c.line1=a.select(s[0]),c.line2=a.select(s[1]),c.line1.addChild(c),c.line2.addChild(c),c.setParents(s),c.point1={visProp:{}},c.point2={visProp:{}},c.point3={visProp:{}},$=Geometry.meetLineLine(c.line1.stdform,c.line2.stdform,0,a),Geometry.distance($.usrCoords,[0,0,0],3)<b&&(c.line1.point1.Dist(c.line2.point1)<b||c.line1.point1.Dist(c.line2.point2)<b?$=c.line1.point1.coords:c.line1.point2.Dist(c.line2.point1)<b||c.line1.point2.Dist(c.line2.point1)<b?$=c.line1.point2.coords:console.log("JSXGraph warning: Can't create Sector from parallel lines with no common defining point.")),JXG$1.isArray(s[2])?(s[2].length===2&&(s[2]=[1].concat(s[2])),j=Geometry.projectPointToLine({coords:{usrCoords:s[2]}},c.line1,a),j=Stat.subtract(j.usrCoords,$.usrCoords),c.direction1=Mat.innerProduct(j,[0,c.line1.stdform[2],-c.line1.stdform[1]],3)>=0?1:-1):c.direction1=s[2]>=0?1:-1,JXG$1.isArray(s[3])?(s[3].length===2&&(s[3]=[1].concat(s[3])),j=Geometry.projectPointToLine({coords:{usrCoords:s[3]}},c.line2,a),j=Stat.subtract(j.usrCoords,$.usrCoords),c.direction2=Mat.innerProduct(j,[0,c.line2.stdform[2],-c.line2.stdform[1]],3)>=0?1:-1):c.direction2=s[3]>=0?1:-1,c.methodMap=JXG$1.deepCopy(c.methodMap,{arc:"arc",center:"center",line1:"line1",line2:"line2"}),c.updateDataArray=function(){var fr,Jr,Js,qs=1e-14,zo=[0,0,0],js=[0,0,0],eu=[0,0,0],Oo;if(Jr=this.line1,Js=this.line2,js=Mat.crossProduct(Jr.stdform,Js.stdform),Geometry.distance(js,[0,0,0],3)<qs&&(Jr.point1.Dist(Js.point1)<qs||Jr.point1.Dist(Js.point2)<qs?js=Jr.point1.coords.usrCoords:(Jr.point2.Dist(Js.point1)<qs||Jr.point2.Dist(Js.point1)<qs)&&(js=Jr.point2.coords.usrCoords)),Math.abs(js[0])>qs&&(js[1]/=js[0],js[2]/=js[0],js[0]/=js[0]),fr=this.direction1*this.Radius(),zo=Stat.add(js,[0,fr*Jr.stdform[2],-fr*Jr.stdform[1]]),fr=this.direction2*this.Radius(),eu=Stat.add(js,[0,fr*Js.stdform[2],-fr*Js.stdform[1]]),this.point2.coords=new Coords(Const.COORDS_BY_USER,zo,c.board),this.point1.coords=new Coords(Const.COORDS_BY_USER,js,c.board),this.point3.coords=new Coords(Const.COORDS_BY_USER,eu,c.board),Math.abs(zo[0])<Mat.eps||Math.abs(js[0])<Mat.eps||Math.abs(eu[0])<Mat.eps){this.dataX=[NaN],this.dataY=[NaN];return}Oo=Geometry.bezierArc(zo,js,eu,!0,1),this.dataX=Oo[0],this.dataY=Oo[1],this.bezierDegree=3};else if(_==="3points"){for(c.point1=Lt[0],c.point2=Lt[1],c.point3=Lt[2],d=0;d<3;d++)JXG$1.exists(Lt[d]._is_new)?(c.addChild(Lt[d]),delete Lt[d]._is_new):Lt[d].addChild(c);c.useDirection=o.usedirection,c.setParents(Lt),JXG$1.exists(Lt[3])&&(c.point4=Lt[3],c.point4.addChild(c)),c.methodMap=JXG$1.deepCopy(c.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),c.updateDataArray=function(){var fr,Jr,Js,qs,zo,js=this.point2,eu=this.point1,Oo=this.point3,tu,Bo=1,vu=this.evalVisProp("selection");if(!js.isReal||!eu.isReal||!Oo.isReal){this.dataX=[NaN],this.dataY=[NaN];return}tu=Geometry.rad(js,eu,Oo),(vu==="minor"&&tu>Math.PI||vu==="major"&&tu<Math.PI)&&(Bo=-1),this.useDirection&&JXG$1.exists(this.point4)&&(Js=this.point2.coords.usrCoords,qs=this.point4.coords.usrCoords,zo=this.point3.coords.usrCoords,Jr=(Js[1]-zo[1])*(Js[2]-qs[2])-(Js[2]-zo[2])*(Js[1]-qs[1]),Jr>=0&&(Oo=this.point2,js=this.point3)),js=js.coords.usrCoords,eu=eu.coords.usrCoords,Oo=Oo.coords.usrCoords,fr=Geometry.bezierArc(js,eu,Oo,!0,Bo),this.dataX=fr[0],this.dataY=fr[1],this.bezierDegree=3},c.Radius=function(){return this.point2.Dist(this.point1)}}return c.center=c.point1,c.radiuspoint=c.point2,c.anglepoint=c.point3,h=JXG$1.copyAttributes(o,a.options,"arc"),h=JXG$1.copyAttributes(h,a.options,"sector","arc"),h.withlabel=!1,h.selection=c.visProp.selection,h.name+="_arc",_==="2lines"?(c.updateDataArray(),c.arc=a.create("arc",[function(){return c.point1.coords.usrCoords},function(){var fr=c.point2.coords.distance(Const.COORDS_BY_USER,c.point1.coords);return fr===0?[c.point1.coords.usrCoords[1],c.point1.coords.usrCoords[2]]:[c.point1.coords.usrCoords[1]+c.Radius()*(c.point2.coords.usrCoords[1]-c.point1.coords.usrCoords[1])/fr,c.point1.coords.usrCoords[2]+c.Radius()*(c.point2.coords.usrCoords[2]-c.point1.coords.usrCoords[2])/fr]},function(){return c.point3.coords.usrCoords}],h)):c.arc=a.create("arc",[c.point1,function(){var fr=c.point2.Dist(c.point1);return fr===0?[c.point1.X(),c.point1.Y()]:[c.point1.X()+c.Radius()*(c.point2.X()-c.point1.X())/fr,c.point1.Y()+c.Radius()*(c.point2.Y()-c.point1.Y())/fr]},c.point3],h),c.addChild(c.arc),c.hasPointCurve=function(fr,Jr){var Js,qs,zo,js,eu,Oo=new Coords(Const.COORDS_BY_SCREEN,[fr,Jr],this.board),tu=this.Radius(),Bo=this.center.coords.distance(Const.COORDS_BY_USER,Oo),vu,t1=this.evalVisProp("selection");return JXG$1.isObject(this.evalVisProp("precision"))?(eu=this.board._inputDevice,js=this.evalVisProp("precision."+eu)):js=this.board.options.precision.hasPoint,js/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),vu=Math.abs(Bo-tu)<js,vu&&(Js=Geometry.rad(this.point2,this.center,Oo.usrCoords.slice(1)),qs=0,zo=Geometry.rad(this.point2,this.center,this.point3),(t1==="minor"&&zo>Math.PI||t1==="major"&&zo<Math.PI)&&(qs=zo,zo=2*Math.PI),(Js<qs||Js>zo)&&(vu=!1)),vu},c.hasPointSector=function(fr,Jr){var Js,qs=new Coords(Const.COORDS_BY_SCREEN,[fr,Jr],this.board),zo=this.Radius(),js=this.point1.coords.distance(Const.COORDS_BY_USER,qs),eu,Oo,tu=js<zo,Bo=this.evalVisProp("selection");return tu&&(Js=Geometry.rad(this.radiuspoint,this.center,qs.usrCoords.slice(1)),eu=0,Oo=Geometry.rad(this.radiuspoint,this.center,this.anglepoint),(Bo==="minor"&&Oo>Math.PI||Bo==="major"&&Oo<Math.PI)&&(eu=Oo,Oo=2*Math.PI),(Js<eu||Js>Oo)&&(tu=!1)),tu},c.hasPoint=function(fr,Jr){return this.evalVisProp("highlightonsector")||this.evalVisProp("hasinnerpoints")?this.hasPointSector(fr,Jr):this.hasPointCurve(fr,Jr)},c.getTextAnchor=function(){return this.point1.coords},c.getLabelAnchor=function(){var fr,Jr,Js,qs,zo,js=this.label.evalVisProp("position"),eu=Geometry.rad(this.point2,this.point1,this.point3),Oo=13/this.board.unitX,tu=13/this.board.unitY,Bo=this.point2.coords.usrCoords,vu=this.point1.coords.usrCoords,t1=Bo[1]-vu[1],e1=Bo[2]-vu[2],r1=this.evalVisProp("selection"),a1=this.label?this.label.visProp:this.visProp.label;return!JXG$1.isString(js)||js.indexOf("right")<0&&js.indexOf("left")<0?((r1==="minor"&&eu>Math.PI||r1==="major"&&eu<Math.PI)&&(eu=-(2*Math.PI-eu)),fr=new Coords(Const.COORDS_BY_USER,[vu[1]+Math.cos(eu*.5)*t1-Math.sin(eu*.5)*e1,vu[2]+Math.sin(eu*.5)*t1+Math.cos(eu*.5)*e1],this.board),Js=fr.usrCoords[1]-vu[1],qs=fr.usrCoords[2]-vu[2],zo=Mat.hypot(Js,qs),Js=Js*(zo+Oo)/zo,qs=qs*(zo+tu)/zo,Jr=[vu[1]+Js,vu[2]+qs],a1.position=Geometry.calcLabelQuadrant(Geometry.rad([1,0],[0,0],Jr)),new Coords(Const.COORDS_BY_USER,Jr,this.board)):this.getLabelPosition(js,this.label.evalVisProp("distance"))},c.setRadius=function(fr){var Jr,Js=JXG$1.evaluate(fr);fr==="auto"||Js==="auto"?Jr="auto":JXG$1.isNumber(fr)?Jr="number":JXG$1.isFunction(fr)&&!JXG$1.isString(Js)?Jr="function":Jr="undefined",Jr!=="undefined"&&(this.visProp.radius=fr),c.Radius=function(){var qs=JXG$1.evaluate(fr);return qs==="auto"?this.autoRadius():qs}},c.getRadius=function(){return JXG$1.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},c.Value=function(fr){return this.arc.Value(fr)},c.L=function(){return this.arc.L()},c.Area=function(){var fr=this.Radius();return .5*fr*fr*this.Value("radians")},c.Perimeter=function(){return this.L()+2*this.Radius()},_==="3points"&&(c.setPositionDirectly=function(fr,Jr,Js){var qs,zo,js=new Coords(fr,Jr,this.board),eu=new Coords(fr,Js,this.board);return!c.point1.draggable()||!c.point2.draggable()||!c.point3.draggable()?this:(qs=Stat.subtract(js.usrCoords,eu.usrCoords),zo=this.board.create("transform",qs.slice(1),{type:"translate"}),zo.applyOnce([c.point1,c.point2,c.point3]),this)}),c.methodMap=JXG$1.deepCopy(c.methodMap,{radius:"Radius",Radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),c};JXG$1.registerElement("sector",JXG$1.createSector);JXG$1.createCircumcircleSector=function(a,s,o){var c,h,d,b;if(b=JXG$1.providePoints(a,s,o,"point"),b===!1)throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+"'.");return h=a.create("circumcenter",b.slice(0,3),d),h.dump=!1,d=JXG$1.copyAttributes(o,a.options,"circumcirclesector"),c=a.create("sector",[h,b[0],b[2],b[1]],d),c.elType="circumcirclesector",c.setParents(b),c.center=h,c.subs={center:h},c};JXG$1.registerElement("circumcirclesector",JXG$1.createCircumcircleSector);JXG$1.createMinorSector=function(a,s,o){return o.selection="minor",JXG$1.createSector(a,s,o)};JXG$1.registerElement("minorsector",JXG$1.createMinorSector);JXG$1.createMajorSector=function(a,s,o){return o.selection="major",JXG$1.createSector(a,s,o)};JXG$1.registerElement("majorsector",JXG$1.createMajorSector);JXG$1.createAngle=function(a,s,o){var c,h,d,b,_,$,j="invalid";if(s[0].elementClass===Const.OBJECT_CLASS_LINE&&s[1].elementClass===Const.OBJECT_CLASS_LINE&&(JXG$1.isArray(s[2])||JXG$1.isNumber(s[2]))&&(JXG$1.isArray(s[3])||JXG$1.isNumber(s[3])))j="2lines";else{if(d={name:""},$=JXG$1.providePoints(a,s,d,"point"),$===!1)throw new Error("JSXGraph: Can't create angle with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+"'.");j="3points"}if(d=JXG$1.copyAttributes(o,a.options,"angle"),JXG$1.exists(d.name)||(d.name=a.generateName({type:Const.OBJECT_TYPE_ANGLE})),JXG$1.exists(d.radius)?h=d.radius:h=0,a.suspendUpdate(),j==="2lines"?(s.push(h),c=a.create("sector",s,d),c.updateDataArraySector=c.updateDataArray,c.setAngle=function(Xt){},c.free=function(Xt){}):(c=a.create("sector",[$[1],$[0],$[2]],d),c.arc.visProp.priv=!0,c.point=c.point2=c.radiuspoint=$[0],c.pointsquare=c.point3=c.anglepoint=$[2],c.Radius=function(){var Xt=JXG$1.evaluate(h);return Xt==="auto"?c.autoRadius():Xt},c.updateDataArraySector=function(){var Xt=this.point2,Lt=this.point1,fr=this.point3,Jr=this.Radius(),Js=Lt.Dist(Xt),qs,zo,js=1,eu=this.evalVisProp("selection");zo=Geometry.rad(Xt,Lt,fr),(eu==="minor"&&zo>Math.PI||eu==="major"&&zo<Math.PI)&&(js=-1),Xt=Xt.coords.usrCoords,Lt=Lt.coords.usrCoords,fr=fr.coords.usrCoords,Xt=[1,Lt[1]+(Xt[1]-Lt[1])*Jr/Js,Lt[2]+(Xt[2]-Lt[2])*Jr/Js],fr=[1,Lt[1]+(fr[1]-Lt[1])*Jr/Js,Lt[2]+(fr[2]-Lt[2])*Jr/Js],qs=Geometry.bezierArc(Xt,Lt,fr,!0,js),this.dataX=qs[0],this.dataY=qs[1],this.bezierDegree=3},c.setAngle=function(Xt){var Lt,fr,Jr,Js=this.anglepoint,qs=this.radiuspoint;return Js.draggable()&&(Lt=this.board.create("transform",[Xt,this.center],{type:"rotate"}),Js.addTransform(qs,Lt),Lt.update(),Js.moveTo(Mat.matVecMult(Lt.matrix,qs.coords.usrCoords)),JXG$1.isFunction(Xt)?Jr=function(){return Math.PI*2-Xt()}:Jr=function(){return Math.PI*2-Xt},fr=this.board.create("transform",[Jr,this.center],{type:"rotate"}),Js.coords.on("update",function(){fr.update(),qs.setPositionDirectly(Const.COORDS_BY_USER,Mat.matVecMult(fr.matrix,Js.coords.usrCoords))}),Js.setParents(qs),this.hasFixedAngle=!0),this},c.free=function(){var Xt=this.anglepoint;return Xt.transformations.length>0&&(Xt.transformations.pop(),Xt.isDraggable=!0,Xt.parents=[],Xt.coords.off("update")),this.hasFixedAngle=!1,this},c.setParents($)),JXG$1.exists(c.visProp.text)&&c.label.setText(c.evalVisProp("text")),c.elType="angle",c.type=Const.OBJECT_TYPE_ANGLE,c.subs={},c.updateDataArraySquare=function(){var Xt,Lt,fr,Jr,Js,qs,zo,js,eu=this.Radius();j==="2lines"&&this.updateDataArraySector(),Xt=this.point2,Lt=this.point1,fr=this.point3,Xt=Xt.coords.usrCoords,Lt=Lt.coords.usrCoords,fr=fr.coords.usrCoords,Jr=Geometry.distance(Xt,Lt,3),Js=Geometry.distance(fr,Lt,3),Xt=[1,Lt[1]+(Xt[1]-Lt[1])*eu/Jr,Lt[2]+(Xt[2]-Lt[2])*eu/Jr],fr=[1,Lt[1]+(fr[1]-Lt[1])*eu/Js,Lt[2]+(fr[2]-Lt[2])*eu/Js],qs=Mat.crossProduct(fr,Lt),zo=[-Xt[1]*qs[1]-Xt[2]*qs[2],Xt[0]*qs[1],Xt[0]*qs[2]],qs=Mat.crossProduct(Xt,Lt),js=[-fr[1]*qs[1]-fr[2]*qs[2],fr[0]*qs[1],fr[0]*qs[2]],qs=Mat.crossProduct(zo,js),qs[1]/=qs[0],qs[2]/=qs[0],this.dataX=[Lt[1],Xt[1],qs[1],fr[1],Lt[1]],this.dataY=[Lt[2],Xt[2],qs[2],fr[2],Lt[2]],this.bezierDegree=1},c.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},c.updateDataArray=function(){var Xt=this.evalVisProp("type"),Lt=Geometry.trueAngle(this.point2,this.point1,this.point3),fr=this.evalVisProp("selection");(fr==="minor"&&Lt>180||fr==="major"&&Lt<180)&&(Lt=360-Lt),Math.abs(Lt-90)<this.evalVisProp("orthosensitivity")+Mat.eps&&(Xt=this.evalVisProp("orthotype")),Xt==="none"?(this.updateDataArrayNone(),this.maxX=function(){return 0}):Xt==="square"?(this.updateDataArraySquare(),this.maxX=function(){return 4}):Xt==="sector"?(this.updateDataArraySector(),this.maxX=function(){return 6}):Xt==="sectordot"&&(this.updateDataArraySector(),this.maxX=function(){return 6},this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||Xt!=="sectordot"&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},b=JXG$1.copyAttributes(o,a.options,"angle","dot"),c.dot=a.create("point",[function(){var Xt,Lt,fr,Jr,Js,qs,zo,js,eu;return JXG$1.exists(c.dot)&&!c.dot.visProp.visible?[0,0]:(Xt=c.point2.coords.usrCoords,Lt=c.point1.coords.usrCoords,fr=c.Radius(),Jr=Geometry.distance(Xt,Lt,3),Js=Geometry.rad(c.point2,c.point1,c.point3),eu=c.evalVisProp("selection"),(eu==="minor"&&Js>Math.PI||eu==="major"&&Js<Math.PI)&&(Js=-(2*Math.PI-Js)),Js*=.5,qs=Math.cos(Js),zo=Math.sin(Js),Xt=[1,Lt[1]+(Xt[1]-Lt[1])*fr/Jr,Lt[2]+(Xt[2]-Lt[2])*fr/Jr],js=[[1,0,0],[Lt[1]-.5*Lt[1]*qs+.5*Lt[2]*zo,qs*.5,-zo*.5],[Lt[2]-.5*Lt[1]*zo-.5*Lt[2]*qs,zo*.5,qs*.5]],Mat.matVecMult(js,Xt))}],b),c.dot.dump=!1,c.subs.dot=c.dot,j==="2lines")for(_=0;_<2;_++)a.select(s[_]).addChild(c.dot);else for(_=0;_<3;_++)a.select($[_]).addChild(c.dot);return a.unsuspendUpdate(),c.Value=function(Xt){return Xt=Xt||"radians",Xt===""&&(Xt="radians"),c.arc.Value(Xt)},c.getLabelAnchor=function(){var Xt,Lt=12,fr,Jr,Js,qs,zo,js,eu,Oo,tu=c.evalVisProp("selection"),Bo=this.label?this.label.visProp:this.visProp.label,vu=this.label?this.label.evalVisProp("position"):this.evalVisProp("label.position");return!JXG$1.isString(vu)||vu.indexOf("right")<0&&vu.indexOf("left")<0?(JXG$1.exists(this.label)&&JXG$1.exists(this.label.visProp.fontsize)&&(Lt=this.label.evalVisProp("fontsize")),Lt/=this.board.unitX,fr=c.point2.coords.usrCoords,Jr=c.point1.coords.usrCoords,Js=c.Radius(),qs=Geometry.distance(fr,Jr,3),zo=Geometry.rad(c.point2,c.point1,c.point3),(tu==="minor"&&zo>Math.PI||tu==="major"&&zo<Math.PI)&&(zo=-(2*Math.PI-zo)),zo*=.5,js=Math.cos(zo),eu=Math.sin(zo),fr=[1,Jr[1]+(fr[1]-Jr[1])*Js/qs,Jr[2]+(fr[2]-Jr[2])*Js/qs],Oo=[[1,0,0],[Jr[1]-.5*Jr[1]*js+.5*Jr[2]*eu,js*.5,-eu*.5],[Jr[2]-.5*Jr[1]*eu-.5*Jr[2]*js,eu*.5,js*.5]],Xt=Mat.matVecMult(Oo,fr),Xt[1]/=Xt[0],Xt[2]/=Xt[0],Xt[0]/=Xt[0],qs=Geometry.distance(Xt,Jr,3),Xt=[Xt[0],Jr[1]+(Xt[1]-Jr[1])*(Js+Lt)/qs,Jr[2]+(Xt[2]-Jr[2])*(Js+Lt)/qs],Bo.position=Geometry.calcLabelQuadrant(Geometry.rad([1,0],[0,0],Xt)),new Coords(Const.COORDS_BY_USER,Xt,this.board)):this.getLabelPosition(vu,this.label.evalVisProp("distance"))},c.methodMap=JXG$1.deepCopy(c.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),c};JXG$1.registerElement("angle",JXG$1.createAngle);JXG$1.createNonreflexAngle=function(a,s,o){var c;return o.selection="minor",o=JXG$1.copyAttributes(o,a.options,"nonreflexangle"),c=JXG$1.createAngle(a,s,o),c.Value=function(h){var d=Geometry.rad(this.point2,this.point1,this.point3);return h=h||"radians",h===""&&(h="radians"),d=d<Math.PI?d:2*Math.PI-d,this.arc.Value(h,d)},c};JXG$1.registerElement("nonreflexangle",JXG$1.createNonreflexAngle);JXG$1.createReflexAngle=function(a,s,o){var c;return o.selection="major",o=JXG$1.copyAttributes(o,a.options,"reflexangle"),c=JXG$1.createAngle(a,s,o),c.Value=function(h){var d=Geometry.rad(this.point2,this.point1,this.point3);return h=h||"radians",h===""&&(h="radians"),d=d>=Math.PI?d:2*Math.PI-d,this.arc.Value(h,d)},c};JXG$1.registerElement("reflexangle",JXG$1.createReflexAngle);JXG$1.createOrthogonalProjection=function(a,s,o){var c,h,d,b;if(s[0]=a.select(s[0]),s[1]=a.select(s[1]),JXG$1.isPointType(a,s[0])&&s[1].elementClass===Const.OBJECT_CLASS_LINE)h=JXG$1.providePoints(a,[s[0]],o,"point")[0],c=s[1];else if(JXG$1.isPointType(a,s[1])&&s[0].elementClass===Const.OBJECT_CLASS_LINE)h=JXG$1.providePoints(a,[s[1]],o,"point")[0],c=s[0];else throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,line]`);return b=JXG$1.copyAttributes(o,a.options,"orthogonalprojection"),d=a.create("point",[function(){return Geometry.projectPointToLine(h,c,a)}],b),JXG$1.exists(h._is_new)?(d.addChild(h),delete h._is_new):h.addChild(d),c.addChild(d),d.elType="orthogonalprojection",d.setParents([h.id,d.id]),d.update(),d.generatePolynomial=function(){var _=c.point1.symbolic.x,$=c.point1.symbolic.y,j=c.point2.symbolic.x,Xt=c.point2.symbolic.y,Lt=h.symbolic.x,fr=h.symbolic.y,Jr=d.symbolic.x,Js=d.symbolic.y,qs="("+$+")*("+Jr+")-("+$+")*("+j+")+("+Js+")*("+j+")-("+_+")*("+Js+")+("+_+")*("+Xt+")-("+Jr+")*("+Xt+")",zo="("+fr+")*("+$+")-("+fr+")*("+Xt+")-("+Js+")*("+$+")+("+Js+")*("+Xt+")+("+Lt+")*("+_+")-("+Lt+")*("+j+")-("+Jr+")*("+_+")+("+Jr+")*("+j+")";return[qs,zo]},d};JXG$1.createPerpendicular=function(a,s,o){var c,h,d,b;if(s[0]=a.select(s[0]),s[1]=a.select(s[1]),JXG$1.isPointType(a,s[0])&&s[1].elementClass===Const.OBJECT_CLASS_LINE)h=s[1],c=JXG$1.providePoints(a,[s[0]],o,"point")[0];else if(JXG$1.isPointType(a,s[1])&&s[0].elementClass===Const.OBJECT_CLASS_LINE)h=s[0],c=JXG$1.providePoints(a,[s[1]],o,"point")[0];else throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [line,point]`);return b=JXG$1.copyAttributes(o,a.options,"perpendicular"),d=JXG$1.createLine(a,[function(){return h.stdform[2]*c.X()-h.stdform[1]*c.Y()},function(){return-h.stdform[2]*c.Z()},function(){return h.stdform[1]*c.Z()}],b),d.elType="perpendicular",d.setParents([h.id,c.id]),JXG$1.exists(c._is_new)?(d.addChild(c),delete c._is_new):c.addChild(d),h.addChild(d),d};JXG$1.createPerpendicularPoint=function(a,s,o){var c,h,d;if(s[0]=a.select(s[0]),s[1]=a.select(s[1]),JXG$1.isPointType(a,s[0])&&s[1].elementClass===Const.OBJECT_CLASS_LINE)h=JXG$1.providePoints(a,[s[0]],o,"point")[0],c=s[1];else if(JXG$1.isPointType(a,s[1])&&s[0].elementClass===Const.OBJECT_CLASS_LINE)h=JXG$1.providePoints(a,[s[1]],o,"point")[0],c=s[0];else throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,line]`);return d=a.create("point",[function(){return Geometry.perpendicular(c,h,a)[0]}],o),JXG$1.exists(h._is_new)?(d.addChild(h),delete h._is_new):h.addChild(d),c.addChild(d),d.elType="perpendicularpoint",d.setParents([h.id,c.id]),d.update(),d.generatePolynomial=function(){var b=c.point1.symbolic.x,_=c.point1.symbolic.y,$=c.point2.symbolic.x,j=c.point2.symbolic.y,Xt=h.symbolic.x,Lt=h.symbolic.y,fr=d.symbolic.x,Jr=d.symbolic.y,Js="("+_+")*("+fr+")-("+_+")*("+$+")+("+Jr+")*("+$+")-("+b+")*("+Jr+")+("+b+")*("+j+")-("+fr+")*("+j+")",qs="("+Lt+")*("+_+")-("+Lt+")*("+j+")-("+Jr+")*("+_+")+("+Jr+")*("+j+")+("+Xt+")*("+b+")-("+Xt+")*("+$+")-("+fr+")*("+b+")+("+fr+")*("+$+")";return[Js,qs]},d};JXG$1.createPerpendicularSegment=function(a,s,o){var c,h,d,b,_;if(s[0]=a.select(s[0]),s[1]=a.select(s[1]),JXG$1.isPointType(a,s[0])&&s[1].elementClass===Const.OBJECT_CLASS_LINE)h=s[1],c=JXG$1.providePoints(a,[s[0]],o,"point")[0];else if(JXG$1.isPointType(a,s[1])&&s[0].elementClass===Const.OBJECT_CLASS_LINE)h=s[0],c=JXG$1.providePoints(a,[s[1]],o,"point")[0];else throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [line,point]`);return _=JXG$1.copyAttributes(o,a.options,"perpendicularsegment","point"),b=JXG$1.createPerpendicularPoint(a,[h,c],_),b.dump=!1,JXG$1.exists(o.layer)||(o.layer=a.options.layer.line),_=JXG$1.copyAttributes(o,a.options,"perpendicularsegment"),d=JXG$1.createLine(a,[function(){return Geometry.perpendicular(h,c,a)[1]?[b,c]:[c,b]}],_),d.point=b,JXG$1.exists(c._is_new)?(d.addChild(c),delete c._is_new):c.addChild(d),h.addChild(d),d.elType="perpendicularsegment",d.setParents([c.id,h.id]),d.subs={point:b},d.inherits.push(b),d};JXG$1.createMidpoint=function(a,s,o){var c,h,d,b,_;for(b=0;b<s.length;++b)s[b]=a.select(s[b]);if(s.length===2&&JXG$1.isPointType(a,s[0])&&JXG$1.isPointType(a,s[1]))s=JXG$1.providePoints(a,s,o,"point"),c=s[0],h=s[1];else if(s.length===1&&s[0].elementClass===Const.OBJECT_CLASS_LINE)c=s[0].point1,h=s[0].point2;else throw new Error(`JSXGraph: Can't create midpoint.
Possible parent types: [point,point], [line]`);return _=JXG$1.copyAttributes(o,a.options,"midpoint"),d=a.create("point",[function(){var $=c.coords.usrCoords[1]+h.coords.usrCoords[1];return isNaN($)||Math.abs(c.coords.usrCoords[0])<Mat.eps||Math.abs(h.coords.usrCoords[0])<Mat.eps?NaN:$*.5},function(){var $=c.coords.usrCoords[2]+h.coords.usrCoords[2];return isNaN($)||Math.abs(c.coords.usrCoords[0])<Mat.eps||Math.abs(h.coords.usrCoords[0])<Mat.eps?NaN:$*.5}],_),JXG$1.exists(c._is_new)?(d.addChild(c),delete c._is_new):c.addChild(d),JXG$1.exists(h._is_new)?(d.addChild(h),delete h._is_new):h.addChild(d),d.elType="midpoint",d.setParents([c.id,h.id]),d.prepareUpdate().update(),d.generatePolynomial=function(){var $=c.symbolic.x,j=c.symbolic.y,Xt=h.symbolic.x,Lt=h.symbolic.y,fr=d.symbolic.x,Jr=d.symbolic.y,Js="("+j+")*("+fr+")-("+j+")*("+Xt+")+("+Jr+")*("+Xt+")-("+$+")*("+Jr+")+("+$+")*("+Lt+")-("+fr+")*("+Lt+")",qs="("+$+")^2 - 2*("+$+")*("+fr+")+("+j+")^2-2*("+j+")*("+Jr+")-("+Xt+")^2+2*("+Xt+")*("+fr+")-("+Lt+")^2+2*("+Lt+")*("+Jr+")";return[Js,qs]},d};JXG$1.createParallelPoint=function(a,s,o){var c,h,d,b,_,$;for(_=0;_<s.length;++_)s[_]=a.select(s[_]);if(s.length===3&&JXG$1.isPointType(a,s[0])&&JXG$1.isPointType(a,s[1])&&JXG$1.isPointType(a,s[2]))s=JXG$1.providePoints(a,s,o,"point"),c=s[0],h=s[1],d=s[2];else if(JXG$1.isPointType(a,s[0])&&s[1].elementClass===Const.OBJECT_CLASS_LINE)d=JXG$1.providePoints(a,[s[0]],o,"point")[0],c=s[1].point1,h=s[1].point2;else if(JXG$1.isPointType(a,s[1])&&s[0].elementClass===Const.OBJECT_CLASS_LINE)d=JXG$1.providePoints(a,[s[1]],o,"point")[0],c=s[0].point1,h=s[0].point2;else throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [line,point], [point,point,point]`);return $=JXG$1.copyAttributes(o,a.options,"parallelpoint"),b=a.create("point",[function(){return d.coords.usrCoords[1]+h.coords.usrCoords[1]-c.coords.usrCoords[1]},function(){return d.coords.usrCoords[2]+h.coords.usrCoords[2]-c.coords.usrCoords[2]}],$),JXG$1.exists(c._is_new)?(b.addChild(c),delete c._is_new):c.addChild(b),JXG$1.exists(h._is_new)?(b.addChild(h),delete h._is_new):h.addChild(b),JXG$1.exists(d._is_new)?(b.addChild(d),delete d._is_new):d.addChild(b),b.elType="parallelpoint",b.setParents([c.id,h.id,d.id]),b.prepareUpdate().update(),b.generatePolynomial=function(){var j=c.symbolic.x,Xt=c.symbolic.y,Lt=h.symbolic.x,fr=h.symbolic.y,Jr=d.symbolic.x,Js=d.symbolic.y,qs=b.symbolic.x,zo=b.symbolic.y,js="("+fr+")*("+qs+")-("+fr+")*("+Jr+")-("+Xt+")*("+qs+")+("+Xt+")*("+Jr+")-("+zo+")*("+Lt+")+("+zo+")*("+j+")+("+Js+")*("+Lt+")-("+Js+")*("+j+")",eu="("+zo+")*("+j+")-("+zo+")*("+Jr+")-("+fr+")*("+j+")+("+fr+")*("+Jr+")-("+qs+")*("+Xt+")+("+qs+")*("+Js+")+("+Lt+")*("+Xt+")-("+Lt+")*("+Js+")";return[js,eu]},b};JXG$1.createParallel=function(a,s,o){var c,h,d,b,_,$,j=1;for(_=0;_<s.length;++_)s[_]=a.select(s[_]);return c=null,s.length===3?(s=JXG$1.providePoints(a,s,o,"point"),c=s[2],j=0):JXG$1.isPointType(a,s[0])?(c=JXG$1.providePoints(a,[s[0]],o,"point")[0],b=function(){return s[1].stdform}):JXG$1.isPointType(a,s[1])&&(c=JXG$1.providePoints(a,[s[1]],o,"point")[0],b=function(){return s[0].stdform}),JXG$1.exists(o.layer)||(o.layer=a.options.layer.line),$=JXG$1.copyAttributes(o,a.options,"parallel","point"),j===1?h=a.create("point",[function(){return Mat.crossProduct([1,0,0],b())}],$):h=a.create("parallelpoint",s,$),h.isDraggable=!0,$=JXG$1.copyAttributes(o,a.options,"parallel"),d=a.create("line",[c,h],$),d.elType="parallel",d.subs={point:h},d.inherits.push(h),d.setParents([s[0].id,s[1].id]),s.length===3&&d.addParents(s[2].id),d.point=h,d};JXG$1.createArrowParallel=function(a,s,o){var c,h;try{return h=JXG$1.copyAttributes(o,a.options,"arrowparallel"),h.lastArrow===!1&&(h.lastArrow=!0),c=JXG$1.createParallel(a,s,h).setAttribute({straightFirst:!1,straightLast:!1}),c.type=Const.OBJECT_TYPE_VECTOR,c.elType="arrowparallel",c}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [line,point], [point,point,point]`)}};JXG$1.createBisector=function(a,s,o){var c,h,d,b;if(s=JXG$1.providePoints(a,s,o,"point"),JXG$1.isPoint(s[0])&&JXG$1.isPoint(s[1])&&JXG$1.isPoint(s[2])){for(b=JXG$1.copyAttributes(o,a.options,"bisector","point"),b.snapToGrid=!1,c=a.create("point",[function(){return Geometry.angleBisector(s[0],s[1],s[2],a)}],b),c.dump=!1,d=0;d<3;d++)JXG$1.exists(s[d]._is_new)?(c.addChild(s[d]),delete s[d]._is_new):s[d].addChild(c);return JXG$1.exists(o.layer)||(o.layer=a.options.layer.line),b=JXG$1.copyAttributes(o,a.options,"bisector"),h=JXG$1.createLine(a,[s[1],c],b),h.point=c,h.elType="bisector",h.setParents(s),h.subs={point:c},h.inherits.push(c),h}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point,point]`)};JXG$1.createAngularBisectorsOfTwoLines=function(a,s,o){var c,h,d,b,_=a.select(s[0]),$=a.select(s[1]);if(_.elementClass!==Const.OBJECT_CLASS_LINE||$.elementClass!==Const.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [line,line]`);return JXG$1.exists(o.layer)||(o.layer=a.options.layer.line),d=JXG$1.copyAttributes(o,a.options,"bisectorlines","line1"),c=a.create("line",[function(){var j=Mat.hypot(_.stdform[1],_.stdform[2]),Xt=Mat.hypot($.stdform[1],$.stdform[2]);return _.stdform[0]/j-$.stdform[0]/Xt},function(){var j=Mat.hypot(_.stdform[1],_.stdform[2]),Xt=Mat.hypot($.stdform[1],$.stdform[2]);return _.stdform[1]/j-$.stdform[1]/Xt},function(){var j=Mat.hypot(_.stdform[1],_.stdform[2]),Xt=Mat.hypot($.stdform[1],$.stdform[2]);return _.stdform[2]/j-$.stdform[2]/Xt}],d),JXG$1.exists(o.layer)||(o.layer=a.options.layer.line),d=JXG$1.copyAttributes(o,a.options,"bisectorlines","line2"),h=a.create("line",[function(){var j=Mat.hypot(_.stdform[1],_.stdform[2]),Xt=Mat.hypot($.stdform[1],$.stdform[2]);return _.stdform[0]/j+$.stdform[0]/Xt},function(){var j=Mat.hypot(_.stdform[1],_.stdform[2]),Xt=Mat.hypot($.stdform[1],$.stdform[2]);return _.stdform[1]/j+$.stdform[1]/Xt},function(){var j=Mat.hypot(_.stdform[1],_.stdform[2]),Xt=Mat.hypot($.stdform[1],$.stdform[2]);return _.stdform[2]/j+$.stdform[2]/Xt}],d),b=new Composition({line1:c,line2:h}),c.dump=!1,h.dump=!1,b.elType="bisectorlines",b.setParents([_.id,$.id]),b.subs={line1:c,line2:h},b};JXG$1.createCircumcenter=function(a,s,o){var c,h,d,b,_;if(s=JXG$1.providePoints(a,s,o,"point"),JXG$1.isPoint(s[0])&&JXG$1.isPoint(s[1])&&JXG$1.isPoint(s[2])){for(d=s[0],b=s[1],_=s[2],c=JXG$1.createPoint(a,[function(){return Geometry.circumcenter(d,b,_,a)}],o),h=0;h<3;h++)JXG$1.exists(s[h]._is_new)?(c.addChild(s[h]),delete s[h]._is_new):s[h].addChild(c);return c.elType="circumcenter",c.setParents(s),c.generatePolynomial=function(){var $=d.symbolic.x,j=d.symbolic.y,Xt=b.symbolic.x,Lt=b.symbolic.y,fr=_.symbolic.x,Jr=_.symbolic.y,Js=c.symbolic.x,qs=c.symbolic.y,zo=["((",Js,")-(",$,"))^2+((",qs,")-(",j,"))^2-((",Js,")-(",Xt,"))^2-((",qs,")-(",Lt,"))^2"].join(""),js=["((",Js,")-(",$,"))^2+((",qs,")-(",j,"))^2-((",Js,")-(",fr,"))^2-((",qs,")-(",Jr,"))^2"].join("");return[zo,js]},c}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`)};JXG$1.createIncenter=function(a,s,o){var c,h,d,b,_;if(s=JXG$1.providePoints(a,s,o,"point"),s.length>=3&&JXG$1.isPoint(s[0])&&JXG$1.isPoint(s[1])&&JXG$1.isPoint(s[2])){for(h=s[0],d=s[1],b=s[2],c=a.create("point",[function(){var $,j,Xt;return $=Mat.hypot(d.X()-b.X(),d.Y()-b.Y()),j=Mat.hypot(h.X()-b.X(),h.Y()-b.Y()),Xt=Mat.hypot(d.X()-h.X(),d.Y()-h.Y()),new Coords(Const.COORDS_BY_USER,[($*h.X()+j*d.X()+Xt*b.X())/($+j+Xt),($*h.Y()+j*d.Y()+Xt*b.Y())/($+j+Xt)],a)}],o),_=0;_<3;_++)JXG$1.exists(s[_]._is_new)?(c.addChild(s[_]),delete s[_]._is_new):s[_].addChild(c);c.elType="incenter",c.setParents(s)}else throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`);return c};JXG$1.createCircumcircle=function(a,s,o){var c,h,d,b;if(s=JXG$1.providePoints(a,s,o,"point"),s===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`);try{for(d=JXG$1.copyAttributes(o,a.options,"circumcircle","center"),c=JXG$1.createCircumcenter(a,s,d),c.dump=!1,JXG$1.exists(o.layer)||(o.layer=a.options.layer.circle),d=JXG$1.copyAttributes(o,a.options,"circumcircle"),h=JXG$1.createCircle(a,[c,s[0]],d),h.elType="circumcircle",h.setParents(s),h.subs={center:c},h.inherits.push(h),b=0;b<3;b++)JXG$1.exists(s[b]._is_new)?(h.addChild(s[b]),delete s[b]._is_new):s[b].addChild(h)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`)}return h};JXG$1.createIncircle=function(a,s,o){var c,h,d,b;if(s=JXG$1.providePoints(a,s,o,"point"),s===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`);try{for(b=JXG$1.copyAttributes(o,a.options,"incircle","center"),h=JXG$1.createIncenter(a,s,b),h.dump=!1,JXG$1.exists(o.layer)||(o.layer=a.options.layer.circle),b=JXG$1.copyAttributes(o,a.options,"incircle"),d=JXG$1.createCircle(a,[h,function(){var _=Mat.hypot(s[1].X()-s[2].X(),s[1].Y()-s[2].Y()),$=Mat.hypot(s[0].X()-s[2].X(),s[0].Y()-s[2].Y()),j=Mat.hypot(s[1].X()-s[0].X(),s[1].Y()-s[0].Y()),Xt=(_+$+j)/2;return Math.sqrt((Xt-_)*(Xt-$)*(Xt-j)/Xt)}],b),d.elType="incircle",d.setParents(s),c=0;c<3;c++)JXG$1.exists(s[c]._is_new)?(d.addChild(s[c]),delete s[c]._is_new):s[c].addChild(d);d.center=h,d.subs={center:d.center},d.inherits.push(h)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof s[0]+"', '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point,point]`)}return d};JXG$1.createReflection=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, line]`;for($=0;$<s.length;++$)s[$]=a.select(s[$]);if(j=JXG$1.copyAttributes(o,a.options,"reflection"),JXG$1.isPoint(s[0]))h=JXG$1.providePoints(a,[s[0]],Xt)[0];else if(s[0].elementClass===Const.OBJECT_CLASS_CURVE||s[0].elementClass===Const.OBJECT_CLASS_LINE||s[0].type===Const.OBJECT_TYPE_POLYGON||s[0].elementClass===Const.OBJECT_CLASS_CIRCLE)h=s[0];else throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'."+Lt);if(s[1].elementClass===Const.OBJECT_CLASS_LINE)c=s[1];else throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'."+Lt);if(_=JXG$1.createTransform(a,[c],{type:"reflect"}),JXG$1.isPoint(h))d=JXG$1.createPoint(a,[h,_],j);else if(h.elementClass===Const.OBJECT_CLASS_CURVE)d=JXG$1.createCurve(a,[h,_],j);else if(h.elementClass===Const.OBJECT_CLASS_LINE)d=JXG$1.createLine(a,[h,_],j);else if(h.type===Const.OBJECT_TYPE_POLYGON)d=JXG$1.createPolygon(a,[h,_],j);else if(h.elementClass===Const.OBJECT_CLASS_CIRCLE)j.type.toLowerCase()==="euclidean"?(Xt=JXG$1.copyAttributes(o,a.options,"reflection","center"),b=JXG$1.createPoint(a,[h.center,_],Xt),b.prepareUpdate().update().updateVisibility(b.evalVisProp("visible")).updateRenderer(),d=JXG$1.createCircle(a,[b,function(){return h.Radius()}],j)):d=JXG$1.createCircle(a,[h,_],j);else throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'."+Lt);return JXG$1.exists(h._is_new)&&(d.addChild(h),delete h._is_new),c.addChild(d),d.elType="reflection",d.addParents(c),d.prepareUpdate().update(),JXG$1.isPoint(d)&&(d.generatePolynomial=function(){var fr=c.point1.symbolic.x,Jr=c.point1.symbolic.y,Js=c.point2.symbolic.x,qs=c.point2.symbolic.y,zo=h.symbolic.x,js=h.symbolic.y,eu=d.symbolic.x,Oo=d.symbolic.y,tu=["((",Oo,")-(",js,"))*((",Jr,")-(",qs,"))+((",fr,")-(",Js,"))*((",eu,")-(",zo,"))"].join(""),Bo=["((",eu,")-(",fr,"))^2+((",Oo,")-(",Jr,"))^2-((",zo,")-(",fr,"))^2-((",js,")-(",Jr,"))^2"].join("");return[tu,Bo]}),d};JXG$1.createMirrorElement=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, point]`;for(h=0;h<s.length;++h)s[h]=a.select(s[h]);if(j=JXG$1.copyAttributes(o,a.options,"mirrorelement"),JXG$1.isPoint(s[0]))c=JXG$1.providePoints(a,[s[0]],j)[0];else if(s[0].elementClass===Const.OBJECT_CLASS_CURVE||s[0].elementClass===Const.OBJECT_CLASS_LINE||s[0].type===Const.OBJECT_TYPE_POLYGON||s[0].elementClass===Const.OBJECT_CLASS_CIRCLE)c=s[0];else throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'."+Lt);if(JXG$1.isPoint(s[1]))Xt=JXG$1.copyAttributes(o,a.options,"mirrorelement","point"),d=JXG$1.providePoints(a,[s[1]],Xt)[0];else throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'."+Lt);if($=JXG$1.createTransform(a,[Math.PI,d],{type:"rotate"}),JXG$1.isPoint(c))b=JXG$1.createPoint(a,[c,$],j);else if(c.elementClass===Const.OBJECT_CLASS_CURVE)b=JXG$1.createCurve(a,[c,$],j);else if(c.elementClass===Const.OBJECT_CLASS_LINE)b=JXG$1.createLine(a,[c,$],j);else if(c.type===Const.OBJECT_TYPE_POLYGON)b=JXG$1.createPolygon(a,[c,$],j);else if(c.elementClass===Const.OBJECT_CLASS_CIRCLE)j.type.toLowerCase()==="euclidean"?(Xt=JXG$1.copyAttributes(o,a.options,"mirrorelement","center"),_=JXG$1.createPoint(a,[c.center,$],Xt),_.prepareUpdate().update().updateVisibility(_.evalVisProp("visible")).updateRenderer(),b=JXG$1.createCircle(a,[_,function(){return c.Radius()}],j)):b=JXG$1.createCircle(a,[c,$],j);else throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'."+Lt);return JXG$1.exists(c._is_new)&&(b.addChild(c),delete c._is_new),d.addChild(b),b.elType="mirrorelement",b.addParents(d),b.prepareUpdate().update(),b};JXG$1.createMirrorPoint=function(a,s,o){var c=JXG$1.createMirrorElement(a,s,o);return c.elType="mirrorpoint",c};JXG$1.createIntegral=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js=null,eu;if(JXG$1.isArray(s[0])&&s[1].elementClass===Const.OBJECT_CLASS_CURVE)c=s[0],h=s[1];else if(JXG$1.isArray(s[1])&&s[0].elementClass===Const.OBJECT_CLASS_CURVE)c=s[1],h=s[0];else throw new Error("JSXGraph: Can't create integral with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [[number|function,number|function],curve]`);return d=JXG$1.copyAttributes(o,a.options,"integral"),d.withlabel=!1,eu=a.create("curve",[[0],[0]],d),a.objectsList.pop(),b=c[0],_=c[1],JXG$1.isFunction(b)?($=b,j=function(){return h.Y($())},b=$()):($=b,j=h.Y(b)),JXG$1.isFunction(_)?(Xt=_,Lt=function(){return h.Y(Xt())},_=Xt()):(Xt=_,Lt=h.Y(_)),d=JXG$1.copyAttributes(o,a.options,"integral","curveleft"),fr=a.create("glider",[$,j,h],d),JXG$1.isFunction($)&&fr.hideElement(),d=JXG$1.copyAttributes(o,a.options,"integral","baseleft"),Jr=a.create("point",[function(){return eu.evalVisProp("axis")==="y"?0:fr.X()},function(){return eu.evalVisProp("axis")==="y"?fr.Y():0}],d),d=JXG$1.copyAttributes(o,a.options,"integral","curveright"),Js=a.create("glider",[Xt,Lt,h],d),JXG$1.isFunction(Xt)&&Js.hideElement(),d=JXG$1.copyAttributes(o,a.options,"integral","baseright"),qs=a.create("point",[function(){return eu.evalVisProp("axis")==="y"?0:Js.X()},function(){return eu.evalVisProp("axis")==="y"?Js.Y():0}],d),eu._pos=a.objectsList.length,a.objectsList.push(eu),d=JXG$1.copyAttributes(o,a.options,"integral"),d.withlabel!==!1&&d.axis!=="y"&&(d=JXG$1.copyAttributes(o,a.options,"integral","label"),d=JXG$1.copyAttributes(d,a.options,"label"),js=a.create("text",[function(){var Oo=new Coords(Const.COORDS_BY_SCREEN,[this.evalVisProp("offset.0")+this.board.origin.scrCoords[1],0],this.board,!1),tu=this.board.getBoundingBox(),Bo=(tu[2]-tu[0])*.1,vu=Js.X();return vu<tu[0]?vu=tu[0]+Bo:vu>tu[2]&&(vu=tu[2]-Bo),vu+Oo.usrCoords[1]},function(){var Oo=new Coords(Const.COORDS_BY_SCREEN,[0,this.evalVisProp("offset.1")+this.board.origin.scrCoords[2]],this.board,!1),tu=this.board.getBoundingBox(),Bo=(tu[1]-tu[3])*.1,vu=Js.Y();return vu>tu[1]?vu=tu[1]-Bo:vu<tu[3]&&(vu=tu[3]+Bo),vu+Oo.usrCoords[2]},""],d),zo=function(){var Oo="&int;",tu=Numerics.NewtonCotes([Jr.X(),qs.X()],h.Y),Bo=js.evalVisProp("digits"),vu;return js.useLocale()?vu=js.formatNumberLocale(tu,Bo):vu=JXG$1.toFixed(tu,Bo),(js.evalVisProp("usemathjax")||js.evalVisProp("usekatex"))&&(Oo="\\int"),Oo+" = "+vu},js.setText(zo),js.dump=!1,fr.addChild(js),Js.addChild(js)),fr.dump=!1,Jr.dump=!1,Js.dump=!1,qs.dump=!1,eu.elType="integral",eu.setParents([h.id,c]),eu.subs={curveLeft:fr,baseLeft:Jr,curveRight:Js,baseRight:qs},eu.inherits.push(fr,Jr,Js,qs),d.withlabel&&(eu.subs.label=js,eu.inherits.push(js)),eu.Value=function(){return Numerics.I([Jr.X(),qs.X()],h.Y)},eu.updateDataArray=function(){var Oo,tu,Bo,vu,t1,e1,r1,a1,i1;if(this.evalVisProp("axis")==="y"){for(fr.Y()<Js.Y()?(e1=fr.X(),a1=fr.Y(),r1=Js.X(),i1=Js.Y()):(e1=Js.X(),a1=Js.Y(),r1=fr.X(),i1=fr.Y()),vu=Math.min(e1,r1),t1=Math.max(e1,r1),Oo=[0,e1],tu=[a1,a1],Bo=0;Bo<h.numberPoints;Bo++)a1<=h.points[Bo].usrCoords[2]&&vu<=h.points[Bo].usrCoords[1]&&h.points[Bo].usrCoords[2]<=i1&&h.points[Bo].usrCoords[1]<=t1&&(Oo.push(h.points[Bo].usrCoords[1]),tu.push(h.points[Bo].usrCoords[2]));Oo.push(r1),tu.push(i1),Oo.push(0),tu.push(i1),Oo.push(0),tu.push(a1)}else{for(Jr.X()<qs.X()?(vu=Jr.X(),t1=qs.X()):(vu=qs.X(),t1=Jr.X()),Oo=[vu,vu],tu=[0,h.Y(vu)],Bo=0;Bo<h.numberPoints;Bo++)vu<=h.points[Bo].usrCoords[1]&&h.points[Bo].usrCoords[1]<=t1&&(Oo.push(h.points[Bo].usrCoords[1]),tu.push(h.points[Bo].usrCoords[2]));Oo.push(t1),tu.push(h.Y(t1)),Oo.push(t1),tu.push(0),Oo.push(vu),tu.push(0)}this.dataX=Oo,this.dataY=tu},fr.addChild(eu),Js.addChild(eu),Jr.addChild(eu),qs.addChild(eu),eu.baseLeft=Jr,eu.baseRight=qs,eu.curveLeft=fr,eu.curveRight=Js,eu.methodMap=JXG$1.deepCopy(eu.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),eu.label=js,eu};JXG$1.createInequality=function(a,s,o){var c,h,d;if(d=JXG$1.copyAttributes(o,a.options,"inequality"),s[0].elementClass===Const.OBJECT_CLASS_LINE)h=a.create("curve",[[],[]],d),h.hasPoint=function(){return!1},h.updateDataArray=function(){var b,_,$,j=a.getBoundingBox(),Xt=this.evalVisProp("inverse"),Lt=Xt?-1:1,fr=1.5,Jr=fr*Math.max(j[2]-j[0],j[1]-j[3]),Js={coords:{usrCoords:[1,(j[0]+j[2])*.5,Xt?j[1]:j[3]]}},qs=s[0].stdform.slice(1),zo=qs;$=fr*Math.max(Geometry.perpendicular(s[0],Js,a)[0].distance(Const.COORDS_BY_USER,Js.coords),Jr),$*=Lt,Js={coords:{usrCoords:[1,(j[0]+j[2])*.5,(j[1]+j[3])*.5]}},Math.abs(Mat.innerProduct(Js.coords.usrCoords,s[0].stdform,3))>=Mat.eps?Js=Geometry.perpendicular(s[0],Js,a)[0].usrCoords:Js=Js.coords.usrCoords,b=[1,Js[1]+qs[1]*Jr,Js[2]-qs[0]*Jr],_=[1,Js[1]-zo[1]*Jr,Js[2]+zo[0]*Jr],this.dataX=[b[1],b[1]+qs[0]*$,_[1]+zo[0]*$,_[1],b[1]],this.dataY=[b[2],b[2]+qs[1]*$,_[2]+zo[1]*$,_[2],b[2]]};else if(s[0].elementClass===Const.OBJECT_CLASS_CURVE&&s[0].visProp.curvetype==="functiongraph")h=a.create("curve",[[],[]],d),h.updateDataArray=function(){var b=this.board.getBoundingBox(),_=[],$,j,Xt,Lt,fr,Jr=s[0].minX(),Js=s[0].maxX(),qs,zo,js,eu,Oo=(b[1]-b[3])*.3,tu=this.evalVisProp("inverse");if($=tu?1:3,this.dataX=[],this.dataY=[],Lt=s[0].points.length,Lt!==0)for(b[1]+=Oo,b[3]-=Oo,Xt=-1;Xt<Lt-1;){for(fr=Xt+1,j=Lt;fr<Lt;fr++)if(s[0].points[fr].isReal()){j=fr;break}if(j>=Lt)break;for(fr=j,Xt=Lt-1;fr<Lt-1;fr++)if(!s[0].points[fr+1].isReal()){Xt=fr;break}for(js=s[0].points[j].usrCoords[1],eu=s[0].points[Xt].usrCoords[1],qs=b[0]<Jr?Jr:b[0],zo=b[2]>Js?Js:b[2],qs=j===0?qs:Math.max(qs,js),zo=Xt===Lt-1?zo:Math.min(zo,eu),qs=j===0?Jr:js,zo=Xt===Lt-1?Js:eu,_=[],_.push([1,qs,b[$]]),_.push([1,qs,s[0].points[j].usrCoords[2]]),fr=j;fr<=Xt;fr++)_.push(s[0].points[fr].usrCoords);for(_.push([1,zo,s[0].points[Xt].usrCoords[2]]),_.push([1,zo,b[$]]),_.push(_[0]),fr=0;fr<_.length;fr++)this.dataX.push(_[fr][1]),this.dataY.push(_[fr][2]);Xt<Lt-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},h.hasPoint=function(){return!1};else if(c=JXG$1.createFunction(s[0]),h.addParentsFromJCFunctions([c]),!JXG$1.exists(c))throw new Error(`JSXGraph: Can't create area with the given parents.
Possible parent types: [line], [function]`);return h.addParents(s[0]),h};JXG$1.registerElement("arrowparallel",JXG$1.createArrowParallel);JXG$1.registerElement("bisector",JXG$1.createBisector);JXG$1.registerElement("bisectorlines",JXG$1.createAngularBisectorsOfTwoLines);JXG$1.registerElement("msector",JXG$1.createMsector);JXG$1.registerElement("circumcircle",JXG$1.createCircumcircle);JXG$1.registerElement("circumcirclemidpoint",JXG$1.createCircumcenter);JXG$1.registerElement("circumcenter",JXG$1.createCircumcenter);JXG$1.registerElement("incenter",JXG$1.createIncenter);JXG$1.registerElement("incircle",JXG$1.createIncircle);JXG$1.registerElement("integral",JXG$1.createIntegral);JXG$1.registerElement("midpoint",JXG$1.createMidpoint);JXG$1.registerElement("mirrorelement",JXG$1.createMirrorElement);JXG$1.registerElement("mirrorpoint",JXG$1.createMirrorPoint);JXG$1.registerElement("orthogonalprojection",JXG$1.createOrthogonalProjection);JXG$1.registerElement("parallel",JXG$1.createParallel);JXG$1.registerElement("parallelpoint",JXG$1.createParallelPoint);JXG$1.registerElement("perpendicular",JXG$1.createPerpendicular);JXG$1.registerElement("perpendicularpoint",JXG$1.createPerpendicularPoint);JXG$1.registerElement("perpendicularsegment",JXG$1.createPerpendicularSegment);JXG$1.registerElement("reflection",JXG$1.createReflection);JXG$1.registerElement("inequality",JXG$1.createInequality);JXG$1.createGrid=function(a,s,o){var c=Mat.eps,h=5e3,d,b,_,$,j,Xt,Lt,fr=[],Jr=[],Js;if(_=s,_.length>2||_.length>=1&&_[0].elType!=="axis"||_.length>=2&&_[1].elType!=="axis")throw new Error("JSXGraph: Can't create 'grid' with parent type '"+s[0].elType+"'. Possible parent types: [axis,axis]");return!JXG$1.exists(_[0])&&JXG$1.exists(a.defaultAxes)&&(_[0]=a.defaultAxes.x),!JXG$1.exists(_[1])&&JXG$1.exists(a.defaultAxes)&&(_[1]=a.defaultAxes.y),Js=function(qs,zo,js,eu,Oo,tu,Bo){var vu,t1,e1,r1,a1,i1,s1;switch(qs.toLowerCase()){case".":case"point":return zo.visProp.linecap="round",zo.visProp.strokewidth=Oo*zo.board.unitX+tu*zo.board.unitY,[[js,js,NaN],[eu,eu,NaN]];case"o":case"circle":return zo.visProp.linecap="square",zo.bezierDegree=3,t1=4*Math.tan(Math.PI/8)/3,[[js+Oo,js+Oo,js+t1*Oo,js,js-t1*Oo,js-Oo,js-Oo,js-Oo,js-t1*Oo,js,js+t1*Oo,js+Oo,js+Oo,NaN],[eu,eu+t1*tu,eu+tu,eu+tu,eu+tu,eu+t1*tu,eu,eu-t1*tu,eu-tu,eu-tu,eu-tu,eu-t1*tu,eu,NaN]];case"regpol":case"regularpolygon":for(zo.visProp.linecap="round",r1=zo.evalVisProp("polygonvertices"),a1=[[],[]],vu=0;vu<=2*Math.PI;vu+=2*Math.PI/r1)a1[0].push(js-Oo*Math.sin(vu)),a1[1].push(eu-tu*Math.cos(vu));return a1[0].push(NaN),a1[1].push(NaN),a1;case"[]":case"square":return zo.visProp.linecap="square",[[js-Oo,js+Oo,js+Oo,js-Oo,js-Oo,NaN],[eu+tu,eu+tu,eu-tu,eu-tu,eu+tu,NaN]];case"<>":case"diamond":return zo.visProp.linecap="square",[[js,js+Oo,js,js-Oo,js,NaN],[eu+tu,eu,eu-tu,eu,eu+tu,NaN]];case"<<>>":case"diamond2":return zo.visProp.linecap="square",i1=Oo*Math.sqrt(2),s1=tu*Math.sqrt(2),[[js,js+i1,js,js-i1,js,NaN],[eu+s1,eu,eu-s1,eu,eu+s1,NaN]];case"x":case"cross":return[[js-Oo,js+Oo,NaN,js-Oo,js+Oo,NaN],[eu+tu,eu-tu,NaN,eu-tu,eu+tu,NaN]];case"+":case"plus":return[[js-Oo,js+Oo,NaN,js,js,NaN],[eu,eu,NaN,eu-tu,eu+tu,NaN]];case"-":case"minus":return[[js-Oo,js+Oo,NaN],[eu,eu,NaN]];case"|":case"divide":return[[js,js,NaN],[eu-tu,eu+tu,NaN]];case"^":case"a":case"A":case"triangleup":return[[js-Oo,js,js+Oo,NaN],[eu-tu,eu,eu-tu,NaN]];case"v":case"triangledown":return[[js-Oo,js,js+Oo,NaN],[eu+tu,eu,eu+tu,NaN]];case"<":case"triangleleft":return[[js+Oo,js,js+Oo,NaN],[eu+tu,eu,eu-tu,NaN]];case">":case"triangleright":return[[js-Oo,js,js-Oo,NaN],[eu+tu,eu,eu-tu,NaN]];case"line":return e1=zo.evalVisProp("margin"),[[js,js,NaN,Bo[0]-e1/zo.board.unitX,Bo[2]+e1/zo.board.unitX,NaN],[Bo[1]+e1/zo.board.unitY,Bo[3]-e1/zo.board.unitY,NaN,eu,eu,NaN]];default:return[[],[]]}},$=JXG$1.copyAttributes(o,a.options,"grid"),JXG$1.mergeAttr($,$.themes[$.theme],!1),j={},JXG$1.mergeAttr(j,$,!0,!0),JXG$1.mergeAttr(j,$.major,!0,!0),d=a.create("curve",[[null],[null]],j),d.elType="grid",d.type=Const.OBJECT_TYPE_GRID,Xt={},JXG$1.mergeAttr(Xt,$,!0,!0),JXG$1.mergeAttr(Xt,$.minor,!0,!0),Xt.id===j.id&&(Xt.id=d.id+"_minor"),Xt.name===j.name&&(Xt.name=d.name+"_minor"),b=a.create("curve",[[null],[null]],Xt),b.elType="grid",b.type=Const.OBJECT_TYPE_GRID,d.minorGrid=b,b.majorGrid=d,d.hasPoint=function(){return!1},b.hasPoint=function(){return!1},d.inherits.push(b),d.updateDataArray=function(){var qs=this.board.getBoundingBox(),zo,js,eu,Oo,tu,Bo,vu,t1,e1=this.evalVisProp("gridx"),r1=this.evalVisProp("gridy"),a1=this.evalVisProp("face"),i1=this.evalVisProp("drawzero"),s1=i1===!0||JXG$1.isObject(i1)&&this.eval(i1.origin)===!0,c1=i1===!0||JXG$1.isObject(i1)&&this.eval(i1.x)===!0,h1=i1===!0||JXG$1.isObject(i1)&&this.eval(i1.y)===!0,m1=this.evalVisProp("includeboundaries"),l1=this.evalVisProp("forcesquare");if(this.dataX=[],this.dataY=[],Lt=this.evalVisProp("majorstep"),JXG$1.isArray(Lt)||(Lt=[Lt,Lt]),Lt.length<2&&(Lt=[Lt[0],Lt[0]]),JXG$1.exists(e1)&&(JXG$1.deprecated("gridX","majorStep"),Lt[0]=e1),JXG$1.exists(r1)&&(JXG$1.deprecated("gridY","majorStep"),Lt[1]=r1),Lt[0]==="auto"?(t1=Math.pow(10,Math.floor(Math.log(50/this.board.unitX)/Math.LN10)),Lt[0]=t1,JXG$1.exists(_[0])&&(Lt[0]=_[0].ticks[0].getDistanceMajorTicks())):Lt[0]=JXG$1.parseNumber(Lt[0],Math.abs(qs[1]-qs[3]),1/this.board.unitX),Lt[1]==="auto"?(t1=Math.pow(10,Math.floor(Math.log(50/this.board.unitY)/Math.LN10)),Lt[1]=t1,JXG$1.exists(_[1])&&(Lt[1]=_[1].ticks[0].getDistanceMajorTicks())):Lt[1]=JXG$1.parseNumber(Lt[1],Math.abs(qs[0]-qs[2]),1/this.board.unitY),l1==="min"||l1===!0?Lt[0]*this.board.unitX<=Lt[1]*this.board.unitY?Lt[1]=Lt[0]/this.board.unitY*this.board.unitX:Lt[0]=Lt[1]/this.board.unitX*this.board.unitY:l1==="max"&&(Lt[0]*this.board.unitX<=Lt[1]*this.board.unitY?Lt[0]=Lt[1]/this.board.unitX*this.board.unitY:Lt[1]=Lt[0]/this.board.unitY*this.board.unitX),fr=this.evalVisProp("size"),JXG$1.isArray(fr)||(fr=[fr,fr]),fr.length<2&&(fr=[fr[0],fr[0]]),JXG$1.isNumber(fr[0],!0)&&(fr[0]=fr[0]+"px"),JXG$1.isNumber(fr[1],!0)&&(fr[1]=fr[1]+"px"),fr[0]=JXG$1.parseNumber(fr[0],Lt[0],1/this.board.unitX),fr[1]=JXG$1.parseNumber(fr[1],Lt[1],1/this.board.unitY),Jr[0]=fr[0]/2,Jr[1]=fr[1]/2,zo=Mat.roundToStep(qs[0],Lt[0]),js=Mat.roundToStep(qs[1],Lt[1]),vu=isFinite(zo)&&isFinite(js)&&isFinite(qs[2])&&isFinite(qs[3])&&Math.abs(qs[2])<Math.abs(Lt[0]*h)&&Math.abs(qs[3])<Math.abs(Lt[1]*h),a1.toLowerCase()==="line"){for(tu=d.evalVisProp("margin"),Oo=js;vu&&Oo>=qs[3];Oo-=Lt[1])!s1&&Math.abs(Oo)<c||!h1&&Math.abs(Oo)<c||!m1&&(Oo<=qs[3]+Jr[1]||Oo>=qs[1]-Jr[1])||(Bo=[[qs[0]-tu/d.board.unitX,qs[2]+tu/d.board.unitX,NaN],[Oo,Oo,NaN]],JXG$1.concat(this.dataX,Bo[0]),JXG$1.concat(this.dataY,Bo[1]));for(eu=zo;vu&&eu<=qs[2];eu+=Lt[0])!s1&&Math.abs(eu)<c||!c1&&Math.abs(eu)<c||!m1&&(eu<=qs[0]+Jr[0]||eu>=qs[2]-Jr[0])||(Bo=[[eu,eu,NaN],[qs[1]+tu/d.board.unitY,qs[3]-tu/d.board.unitY,NaN]],JXG$1.concat(this.dataX,Bo[0]),JXG$1.concat(this.dataY,Bo[1]))}else for(Oo=js;vu&&Oo>=qs[3];Oo-=Lt[1])for(eu=zo;vu&&eu<=qs[2];eu+=Lt[0])!s1&&Math.abs(Oo)<c&&Math.abs(eu)<c||!c1&&Math.abs(Oo)<c&&Math.abs(eu)>=c||!h1&&Math.abs(eu)<c&&Math.abs(Oo)>=c||!m1&&(eu<=qs[0]+Jr[0]||eu>=qs[2]-Jr[0]||Oo<=qs[3]+Jr[1]||Oo>=qs[1]-Jr[1])||(Bo=Js(a1,d,eu,Oo,Jr[0],Jr[1],qs),JXG$1.concat(this.dataX,Bo[0]),JXG$1.concat(this.dataY,Bo[1]))},b.updateDataArray=function(){var qs=this.board.getBoundingBox(),zo,js,eu,Oo,tu,Bo,vu,t1=[],e1=[],r1,a1,i1,s1,c1,h1,m1,l1,f1,p1,d1,b1,C1=this.evalVisProp("minorelements"),g1=this.evalVisProp("size"),o1=this.evalVisProp("face"),S1=this.evalVisProp("drawzero"),v1=S1===!0||JXG$1.isObject(S1)&&this.eval(S1.x)===!0,B1=S1===!0||JXG$1.isObject(S1)&&this.eval(S1.y)===!0,T1=this.majorGrid.evalVisProp("face"),w1=this.majorGrid.evalVisProp("drawzero"),x1=w1===!0||JXG$1.isObject(w1)&&this.eval(w1.origin)===!0,M1=w1===!0||JXG$1.isObject(w1)&&this.eval(w1.x)===!0,O1=w1===!0||JXG$1.isObject(w1)&&this.eval(w1.y)===!0,N1=this.evalVisProp("includeboundaries");if(this.dataX=[],this.dataY=[],JXG$1.isArray(C1)||(C1=[C1,C1]),C1.length<2&&(C1=[C1[0],C1[0]]),JXG$1.isNumber(C1[0],!0)?C1[0]=parseFloat(C1[0]):(C1[0]=3,JXG$1.exists(_[0])&&(C1[0]=_[0].eval(_[0].getAttribute("ticks").minorticks))),t1[0]=Lt[0]/(C1[0]+1),JXG$1.isNumber(C1[1],!0)?C1[1]=parseFloat(C1[1]):(C1[1]=3,JXG$1.exists(_[1])&&(C1[1]=_[1].eval(_[1].getAttribute("ticks").minorticks))),t1[1]=Lt[1]/(C1[1]+1),JXG$1.isArray(g1)||(g1=[g1,g1]),g1.length<2&&(g1=[g1[0],g1[0]]),JXG$1.isNumber(g1[0],!0)&&(g1[0]=g1[0]+"px"),JXG$1.isNumber(g1[1],!0)&&(g1[1]=g1[1]+"px"),g1[0]=JXG$1.parseNumber(g1[0],t1[0],1/this.board.unitX),g1[1]=JXG$1.parseNumber(g1[1],t1[1],1/this.board.unitY),e1[0]=g1[0]*.5,e1[1]=g1[1]*.5,zo=Mat.roundToStep(qs[0],t1[0]),js=Mat.roundToStep(qs[1],t1[1]),vu=isFinite(zo)&&isFinite(js)&&isFinite(qs[2])&&isFinite(qs[3])&&Math.abs(qs[2])<=Math.abs(t1[0]*h)&&Math.abs(qs[3])<Math.abs(t1[1]*h),o1.toLowerCase()!=="line")for(Oo=js;vu&&Oo>=qs[3];Oo-=t1[1])for(eu=zo;vu&&eu<=qs[2];eu+=t1[0]){if(r1=Mat.roundToStep(Math.abs(eu),Lt[0]),r1=Math.abs(r1-Math.abs(eu)),a1=Lt[0]-r1,i1=Mat.roundToStep(Math.abs(Oo),Lt[1]),i1=Math.abs(i1-Math.abs(Oo)),s1=Lt[1]-i1,T1==="line"){if(r1-e1[0]-Jr[0]<c||a1-e1[0]-Jr[0]<c||i1-e1[1]-Jr[1]<c||s1-e1[1]-Jr[1]<c)continue}else if((r1-e1[0]-Jr[0]<c||a1-e1[0]-Jr[0]<c)&&(i1-e1[1]-Jr[1]<c||s1-e1[1]-Jr[1]<c)&&(x1||Jr[1]-Math.abs(Oo)+e1[1]<c||Jr[0]-Math.abs(eu)+e1[0]<c)&&(M1||Jr[1]-Math.abs(Oo)+e1[1]<c||Jr[0]+Math.abs(eu)-e1[0]<c)&&(O1||Jr[0]-Math.abs(eu)+e1[0]<c||Jr[1]+Math.abs(Oo)-e1[1]<c))continue;!B1&&Math.abs(eu)<c||!v1&&Math.abs(Oo)<c||(c1=Math.abs(qs[0]%Lt[0]),h1=Math.abs(qs[1]%Lt[1]),m1=Math.abs(qs[2]%Lt[0]),l1=Math.abs(qs[3]%Lt[1]),f1=Lt[0]-c1,p1=Lt[1]-h1,d1=Lt[0]-m1,b1=Lt[1]-l1,!(!N1&&(eu-e1[0]-qs[0]-Jr[0]+f1<c&&f1-Jr[0]<c||eu-e1[0]-qs[0]-Jr[0]-c1<c&&c1-Jr[0]<c||-eu-e1[0]+qs[2]-Jr[0]+d1<c&&d1-Jr[0]<c||-eu-e1[0]+qs[2]-Jr[0]-m1<c&&m1-Jr[0]<c||-Oo-e1[1]+qs[1]-Jr[1]+p1<c&&p1-Jr[1]<c||-Oo-e1[1]+qs[1]-Jr[1]-h1<c&&h1-Jr[1]<c||Oo-e1[1]-qs[3]-Jr[1]+b1<c&&b1-Jr[1]<c||Oo-e1[1]-qs[3]-Jr[1]-l1<c&&l1-Jr[1]<c||-Oo-e1[1]+qs[1]<c||eu-e1[0]-qs[0]<c||Oo-e1[1]-qs[3]<c||-eu-e1[0]+qs[2]<c))&&(Bo=Js(o1,b,eu,Oo,e1[0],e1[1],qs),JXG$1.concat(this.dataX,Bo[0]),JXG$1.concat(this.dataY,Bo[1])))}else{for(tu=b.evalVisProp("margin"),Oo=js;vu&&Oo>=qs[3];Oo-=t1[1]){if(i1=Mat.roundToStep(Math.abs(Oo),Lt[1]),i1=Math.abs(i1-Math.abs(Oo)),s1=Lt[1]-i1,T1==="line"){if(i1-e1[1]-Jr[1]<c||s1-e1[1]-Jr[1]<c)continue}else if((i1-e1[1]-Jr[1]<c||s1-e1[1]-Jr[1]<c)&&(x1||Jr[1]-Math.abs(Oo)+e1[1]<c)&&(M1||Jr[1]-Math.abs(Oo)+e1[1]<c)&&(O1||Jr[1]+Math.abs(Oo)-e1[1]<c))continue;!v1&&Math.abs(Oo)<c||(c1=Math.abs(qs[0]%Lt[0]),h1=Math.abs(qs[1]%Lt[1]),m1=Math.abs(qs[2]%Lt[0]),l1=Math.abs(qs[3]%Lt[1]),f1=Lt[0]-c1,p1=Lt[1]-h1,d1=Lt[0]-m1,b1=Lt[1]-l1,!(!N1&&(-Oo-e1[1]+qs[1]-Jr[1]+p1<c&&p1-Jr[1]<c||-Oo-e1[1]+qs[1]-Jr[1]-h1<c&&h1-Jr[1]<c||Oo-e1[1]-qs[3]-Jr[1]+b1<c&&b1-Jr[1]<c||Oo-e1[1]-qs[3]-Jr[1]-l1<c&&l1-Jr[1]<c||-Oo-e1[1]+qs[1]<c||Oo-e1[1]-qs[3]<c))&&(Bo=[[qs[0]-tu/b.board.unitX,qs[2]+tu/b.board.unitX,NaN],[Oo,Oo,NaN]],JXG$1.concat(this.dataX,Bo[0]),JXG$1.concat(this.dataY,Bo[1])))}for(eu=zo;vu&&eu<=qs[2];eu+=t1[0]){if(r1=Mat.roundToStep(Math.abs(eu),Lt[0]),r1=Math.abs(r1-Math.abs(eu)),a1=Lt[0]-r1,T1==="line"){if(r1-e1[0]-Jr[0]<c||a1-e1[0]-Jr[0]<c)continue}else if((r1-e1[0]-Jr[0]<c||a1-e1[0]-Jr[0]<c)&&(x1||Jr[0]-Math.abs(eu)+e1[0]<c)&&(M1||Jr[0]+Math.abs(eu)-e1[0]<c)&&(O1||Jr[0]-Math.abs(eu)+e1[0]<c))continue;!B1&&Math.abs(eu)<c||(c1=Math.abs(qs[0]%Lt[0]),h1=Math.abs(qs[1]%Lt[1]),m1=Math.abs(qs[2]%Lt[0]),l1=Math.abs(qs[3]%Lt[1]),f1=Lt[0]-c1,p1=Lt[1]-h1,d1=Lt[0]-m1,b1=Lt[1]-l1,!(!N1&&(eu-e1[0]-qs[0]-Jr[0]+f1<c&&f1-Jr[0]<c||eu-e1[0]-qs[0]-Jr[0]-c1<c&&c1-Jr[0]<c||-eu-e1[0]+qs[2]-Jr[0]+d1<c&&d1-Jr[0]<c||-eu-e1[0]+qs[2]-Jr[0]-m1<c&&m1-Jr[0]<c||eu-e1[0]-qs[0]<c||-eu-e1[0]+qs[2]<c))&&(Bo=[[eu,eu,NaN],[qs[1]+tu/b.board.unitY,qs[3]-tu/b.board.unitY,NaN]],JXG$1.concat(this.dataX,Bo[0]),JXG$1.concat(this.dataY,Bo[1])))}}},a.grids.push(d),a.grids.push(b),b.dump=!1,d.getParents=b.getParents=function(){return _.slice()},d};JXG$1.registerElement("grid",JXG$1.createGrid);JXG$1.Image=function(a,s,o,c,h){this.constructor(a,o,Const.OBJECT_TYPE_IMAGE,Const.OBJECT_CLASS_OTHER),this.element=this.board.select(o.anchor),this.coordsConstructor(s),this.W=JXG$1.createFunction(h[0],this.board,""),this.H=JXG$1.createFunction(h[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*a.unitX),Math.abs(this.usrSize[1]*a.unitY)],this.url=c,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=JXG$1.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H",setSize:"setSize"})};JXG$1.Image.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Image,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.Image.prototype,{hasPoint:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt=this.transformations.length;return JXG$1.isObject(this.evalVisProp("precision"))?(d=this.board._inputDevice,b=this.evalVisProp("precision."+d)):b=this.board.options.precision.hasPoint,Lt===0?(o=a-this.coords.scrCoords[1],c=this.coords.scrCoords[2]-s,h=b,o>=-h&&o-this.size[0]<=h&&c>=-h&&c-this.size[1]<=h):(_=new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board),_=_.usrCoords,$=[_[0]-this.span[0][0],_[1]-this.span[0][1],_[2]-this.span[0][2]],Xt=Mat.innerProduct,j=Xt($,this.span[1]),0<=j&&j<=Xt(this.span[1],this.span[1])&&(j=Xt($,this.span[2]),0<=j&&j<=Xt(this.span[2],this.span[2])))},update:function(a){return this.needsUpdate?(this.updateCoords(a),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var a,s,o=this.transformations.length,c=[];if(o===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(c[0]=[this.Z(),this.X(),this.Y()],c[1]=[this.Z(),this.X()+this.W(),this.Y()],c[2]=[this.Z(),this.X(),this.Y()+this.H()],a=0;a<o;a++)for(s=0;s<3;s++)c[s]=Mat.matVecMult(this.transformations[a].matrix,c[s]);for(s=0;s<3;s++)c[s][1]/=c[s][0],c[s][2]/=c[s][0],c[s][0]/=c[s][0];for(s=1;s<3;s++)c[s][0]-=c[0][0],c[s][1]-=c[0][1],c[s][2]-=c[0][2];this.span=c}return this},addTransform:function(a){var s;if(JXG$1.isArray(a))for(s=0;s<a.length;s++)this.transformations.push(a[s]);else this.transformations.push(a);return this},getParents:function(){var a=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(a=this.parents),a},setSize:function(a,s){return this.W=JXG$1.createFunction(a,this.board,""),this.H=JXG$1.createFunction(s,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}});JXG$1.createImage=function(a,s,o){var c,h,d=s[0],b=s[1],_=s[2];if(c=JXG$1.copyAttributes(o,a.options,"image"),h=CoordsElement.create(JXG$1.Image,a,b,c,d,_),!h)throw new Error("JSXGraph: Can't create image with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return c.rotate!==0&&h.addRotation(c.rotate),h};JXG$1.registerElement("image",JXG$1.createImage);JXG$1.Image;JXG$1.createSlider=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1;return a1=JXG$1.copyAttributes(o,a.options,"slider"),tu=a1.withticks,Oo=a1.withlabel,t1=a1.snapwidth,Bo=a1.snapvalues,vu=a1.snapvaluedistance,j=a.create("point",s[0],a1.point1),Xt=a.create("point",s[1],a1.point2),fr=a.create("segment",[j,Xt],a1.baseline),fr.updateStdform(),c=j.coords.usrCoords.slice(1),h=Xt.coords.usrCoords.slice(1),d=s[2][0],b=s[2][1],_=s[2][2],$=_-d,e1=JXG$1.evaluate(t1),r1=e1===-1?b:Math.round((b-d)/e1)*e1+d,js=c[0]+(h[0]-c[0])*(r1-d)/(_-d),eu=c[1]+(h[1]-c[1])*(r1-d)/(_-d),a1.withlabel=!1,Lt=a.create("glider",[js,eu,fr],a1),Lt.setAttribute({snapwidth:t1,snapvalues:Bo,snapvaluedistance:vu}),Jr=a.create("segment",[j,Lt],a1.highline),Lt.Value=function(){var i1=this._smax-this._smin,s1=this.evalVisProp("snapwidth");return s1===-1?this.position*i1+this._smin:Math.round(this.position*i1/s1)*s1+this._smin},Lt.methodMap=JXG$1.deepCopy(Lt.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin",point1:"point1",point2:"point2",baseline:"baseline",highline:"highline",ticks:"ticks",label:"label"}),Lt._smax=_,Lt._smin=d,Lt.setMax=function(i1){return this._smax=i1,this},Lt.setValue=function(i1){var s1=this._smax-this._smin;return Math.abs(s1)>Mat.eps?this.position=(i1-this._smin)/s1:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},Lt.setMin=function(i1){return this._smin=i1,this},Oo&&(zo=a.create("text",[function(){return(Xt.X()-j.X())*.05+Xt.X()},function(){return(Xt.Y()-j.Y())*.05+Xt.Y()},function(){var i1,s1=Lt.evalVisProp("digits"),c1=Lt.evalVisProp("suffixlabel"),h1=Lt.evalVisProp("unitlabel"),m1=Lt.evalVisProp("postlabel");return s1===2&&Lt.evalVisProp("precision")!==2&&(s1=Lt.evalVisProp("precision")),c1!==null?i1=c1:Lt.name&&Lt.name!==""?i1=Lt.name+" = ":i1="",Lt.useLocale()?i1+=Lt.formatNumberLocale(Lt.Value(),s1):i1+=JXG$1.toFixed(Lt.Value(),s1),h1!==null&&(i1+=h1),m1!==null&&(i1+=m1),i1}],a1.label),Lt.label=zo,Lt.visProp.withlabel=!0,Lt.hasLabel=!0),Lt.point1=j,Lt.point2=Xt,Lt.baseline=fr,Lt.highline=Jr,tu&&(JXG$1.exists(a1.generatelabeltext)||(a1.ticks.generateLabelText=function(i1,s1,c1){var h1,m1=Lt.point1.Dist(Lt.point2),l1=Lt._smin,f1=Lt._smax,p1=this.getDistanceFromZero(s1,i1)*(f1-l1)/m1+l1;return m1<Mat.eps||Math.abs(p1)<Mat.eps?h1="0":h1=this.formatLabelText(p1),h1}),Js=2,qs=a.create("ticks",[Lt.baseline,Lt.point1.Dist(j)/Js,function(i1){var s1=Lt.point1.Dist(Lt.point2),c1=Lt.point1.coords.distance(Const.COORDS_BY_USER,i1);return s1<Mat.eps?0:c1/s1*$+d}],a1.ticks),Lt.ticks=qs),Lt.remove=function(){Oo&&a.removeObject(zo),a.removeObject(Jr),a.removeObject(fr),a.removeObject(Xt),a.removeObject(j),Point.prototype.remove.call(Lt)},j.dump=!1,Xt.dump=!1,fr.dump=!1,Jr.dump=!1,Oo&&(zo.dump=!1),Lt.elType="slider",Lt.parents=s,Lt.subs={point1:j,point2:Xt,baseLine:fr,highLine:Jr},Lt.inherits.push(j,Xt,fr,Jr),fr.inherits=[],Jr.inherits=[],tu&&(qs.dump=!1,Lt.subs.ticks=qs,Lt.inherits.push(qs)),Lt.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},Lt.baseline.on("up",function(i1){var s1,c1;Lt.evalVisProp("moveonup")&&!Lt.evalVisProp("fixed")&&(s1=fr.board.getMousePosition(i1,0),c1=new Coords(Const.COORDS_BY_SCREEN,s1,this.board),Lt.moveTo([c1.usrCoords[1],c1.usrCoords[2]]),Lt.triggerEventHandlers(["drag"],[i1]))}),Lt.prepareUpdate().update(),a.isSuspendedUpdate||(Lt.updateVisibility().updateRenderer(),Lt.baseline.updateVisibility().updateRenderer(),Lt.highline.updateVisibility().updateRenderer(),tu&&Lt.ticks.updateVisibility().updateRenderer()),Lt};JXG$1.registerElement("slider",JXG$1.createSlider);JXG$1.PrefixParser={parse:function(a,s){var o,c,h,d,b,_;if(JXG$1.isNumber(a)||JXG$1.isString(a))return a;if(!JXG$1.isArray(a)||a.length<2)throw new Error("prefixParser.parse: term is not an array, number or string");if(o=a[0],h=a.length,s==="execute")if(JXG$1.isInArray(["+","-","*","/"],o))for(d=this.parse(a[1],s),c=2;c<h;c++)switch(_=this.parse(a[c],s),o){case"+":d+=_;break;case"-":d-=_;break;case"*":d*=_;break;case"/":d/=_;break}else if(o==="exec"){for(b=a[1],_=[],c=2;c<h;c++)_.push(this.parse(a[c],s));if(JXG$1.exists(Math[b]))d=Math[b].apply(this,_);else if(JXG$1.exists(Mat[b]))d=Mat[b].apply(this,_);else throw new Error("PrefixParser.parse: "+b+" is not allowed")}else{if(b=a[0],b==="V"&&(b="Value"),b==="Coords"&&(a[2]="true"),!JXG$1.exists(a[1][b]))throw new Error("PrefixParser.parse: "+b+" is not a method of "+a[1]);for(_=[],c=2;c<h;c++)_.push(this.parse(a[c],s));d=a[1][b].apply(a[1],_)}return d},dimension:function(a){var s,o,c,h,d,b,_,$;if(JXG$1.isNumber(a))return 0;if(!JXG$1.isArray(a)||a.length<2)throw new Error("PrefixParser.dimension: term is not an array");if(s=a[0],c=a.length,JXG$1.isInArray(["+","-","*","/"],s))for(h=this.dimension(a[1]),o=2;o<c;o++)switch(_=this.dimension(a[o]),s){case"+":_!==h&&(h=NaN);break;case"-":_!==h&&(h=NaN);break;case"*":h+=_;break;case"/":h-=_;break}else if(s==="exec")a[2].type===JXG$1.OBJECT_TYPE_MEASUREMENT?(h=a[2].Dimension(),JXG$1.exists(a[2].visProp.dim)&&(b=a[2].evalVisProp("dim"),b!==null&&(h=b))):h=0;else switch(d=a[0],d){case"L":case"Length":case"Perimeter":case"Radius":case"R":h=1;break;case"Area":case"A":h=2;break;default:a[1].type===JXG$1.OBJECT_TYPE_MEASUREMENT?(h=a[1].Dimension(),JXG$1.exists(a[1].visProp.dim)&&(b=a[1].evalVisProp("dim"),b!==null&&(h=b))):(h=0,(d==="Value"||d==="V")&&[Const.OBJECT_TYPE_ARC,Const.OBJECT_TYPE_SECTOR,Const.OBJECT_TYPE_ANGLE].indexOf(a[1].type)>=0&&($="",a.length===3&&JXG$1.isString(a[2])&&($=a[2].toLowerCase()),$===""?a[1].type===Const.OBJECT_TYPE_ANGLE?h=0:h=1:$.indexOf("len")===0?h=1:h=0))}return h},toPrefix:function(a){var s,o,c,h;if(JXG$1.isNumber(a))return a;if(!JXG$1.isArray(a)||a.length<2)throw new Error("PrefixParser.toPrefix: term is not an array");for(s=a[0],c=a.length,h=[s],o=1;o<c;o++)JXG$1.isInArray(["+","-","*","/"],s)?h.push(this.toPrefix(a[o])):s==="V"&&a[o].type===JXG$1.OBJECT_TYPE_MEASUREMENT?h=a[o].toPrefix():s==="exec"?o===1?h.push(a[o]):h.push(this.toPrefix(a[o])):h=[s,a[o].id];return h},getParents:function(a){var s,o,c,h;if(JXG$1.isNumber(a))return[];if(!JXG$1.isArray(a)||a.length<2)throw new Error("PrefixParser.getParents: term is not an array");for(s=a[0],c=a.length,h=[],o=1;o<c;o++)JXG$1.isInArray(["+","-","*","/"],s)?JXG$1.concat(h,this.getParents(a[o])):s==="V"&&a[o].type===JXG$1.OBJECT_TYPE_MEASUREMENT?JXG$1.concat(h,a[o].getParents()):s==="exec"?o>1&&JXG$1.concat(h,this.getParents(a[o])):h.push(a[o]);return h}};const Prefix=JXG$1.PrefixParser;JXG$1.createTapemeasure=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr;return c=s[0],h=s[1],d=JXG$1.copyAttributes(o,a.options,"tapemeasure","point1"),Xt=a.create("point",c,d),d=JXG$1.copyAttributes(o,a.options,"tapemeasure","point2"),Lt=a.create("point",h,d),Xt.setAttribute({ignoredSnapToPoints:[Lt.id]}),Lt.setAttribute({ignoredSnapToPoints:[Xt.id]}),d=JXG$1.copyAttributes(o,a.options,"tapemeasure"),b=d.withticks,_=d.withlabel,$=d.digits,$===2&&d.precision!==2&&($=d.precision),_&&(d.withlabel=!0),j=a.create("segment",[Xt,Lt],d),_&&(o.name&&o.name!==""?fr=o.name+" = ":fr="",j.label.setText(function(){var Js=j.label.evalVisProp("digits");return j.label.useLocale()?fr+j.label.formatNumberLocale(Xt.Dist(Lt),Js):fr+JXG$1.toFixed(Xt.Dist(Lt),Js)})),b&&(d=JXG$1.copyAttributes(o,a.options,"tapemeasure","ticks"),Jr=a.create("ticks",[j,.1],d),j.inherits.push(Jr)),j.remove=function(){b&&j.removeTicks(Jr),a.removeObject(Lt),a.removeObject(Xt),GeometryElement.prototype.remove.call(this)},j.Value=function(){return Xt.Dist(Lt)},Xt.dump=!1,Lt.dump=!1,j.elType="tapemeasure",j.getParents=function(){return[[Xt.X(),Xt.Y()],[Lt.X(),Lt.Y()]]},j.subs={point1:Xt,point2:Lt},b&&(Jr.dump=!1),j.methodMap=JXG$1.deepCopy(j.methodMap,{Value:"Value"}),j.prepareUpdate().update(),a.isSuspendedUpdate||(j.updateVisibility().updateRenderer(),j.point1.updateVisibility().updateRenderer(),j.point2.updateVisibility().updateRenderer()),j};JXG$1.registerElement("tapemeasure",JXG$1.createTapemeasure);JXG$1.createMeasurement=function(a,s,o){var c,h,d,b,_,$;for(h=JXG$1.copyAttributes(o,a.options,"measurement"),d=s[0],b=s[1],_=s[2],c=a.create("text",[d,b,""],h),c.type=JXG$1.OBJECT_TYPE_MEASUREMENT,c.elType="measurement",c.Value=function(){return Prefix.parse(_,"execute")},c.Dimension=function(){var j=c.evalVisProp("dim");return j!==null?j:Prefix.dimension(_)},c.Unit=function(j){var Xt="",Lt=c.evalVisProp("units"),fr=j,Jr={},Js;if(JXG$1.exists(fr)||(fr=c.Dimension()),JXG$1.isArray(j)){for(Js=0;Js<j.length;Js++)Jr["dim"+j[Js]]=c.Unit(j[Js]);return Jr}return JXG$1.isObject(Lt)&&JXG$1.exists(Lt[fr])&&Lt[fr]!==!1?Xt=c.eval(Lt[fr]):JXG$1.isObject(Lt)&&JXG$1.exists(Lt["dim"+fr])&&Lt["dim"+fr]!==!1?Xt=c.eval(Lt["dim"+fr]):(Xt=c.evalVisProp("baseunit"),fr===0?Xt="":fr>1&&Xt!==""&&(Xt=Xt+"^{"+fr+"}")),Xt},c.getTerm=function(){return _},c.getMethod=function(){var j=_[0];return j==="V"&&(j="Value"),j},c.toPrefix=function(){return Prefix.toPrefix(_)},c.getParents=function(){return Prefix.getParents(_)},c.addParents(c.getParents()),$=0;$<c.parents.length;$++)a.select(c.parents[$]).addChild(c);return c.setText(function(){var j="",Xt="",Lt=c.Dimension(),fr=c.evalVisProp("digits"),Jr=c.Unit(),Js=c.Value(),qs;if(c.evalVisProp("showprefix")&&(j=c.evalVisProp("prefix")),c.evalVisProp("showsuffix")&&(Xt=c.evalVisProp("suffix")),JXG$1.isNumber(Js))fr==="none"||(fr==="auto"?c.useLocale()?Js=c.formatNumberLocale(Js):Js=JXG$1.autoDigits(Js):c.useLocale()?Js=c.formatNumberLocale(Js,fr):Js=JXG$1.toFixed(Js,fr));else if(JXG$1.isArray(Js))for(qs=0;qs<Js.length;qs++)JXG$1.isNumber(Js[qs])&&(fr==="none"||(fr==="auto"?c.useLocale()?Js[qs]=c.formatNumberLocale(Js[qs]):Js[qs]=JXG$1.autoDigits(Js[qs]):c.useLocale()?Js[qs]=c.formatNumberLocale(Js[qs],fr):Js[qs]=JXG$1.toFixed(Js[qs],fr)));return Lt==="coords"&&JXG$1.isArray(Js)&&(Js.length===2&&Js.unshift(void 0),Js=c.visProp.formatcoords(c,Js[1],Js[2],Js[0])),Lt==="direction"&&JXG$1.isArray(Js)&&(Js=c.visProp.formatdirection(c,Js[0],Js[1])),JXG$1.isString(Lt)?j+Js+Xt:isNaN(Lt)?j+"NaN"+Xt:j+Js+Jr+Xt}),c.methodMap=JXG$1.deepCopy(c.methodMap,{Value:"Value",Dimension:"Dimension",Unit:"Unit",getTerm:"getTerm",Term:"getTerm",getMethod:"getMethod",Method:"getMethod",getParents:"getParents",Parents:"getParents"}),c};JXG$1.registerElement("measurement",JXG$1.createMeasurement);JXG$1.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this};JXG$1.extend(JXG$1.DataSource.prototype,{loadFromArray:function(a,s,o){var c,h,d;if(JXG$1.isArray(s)&&(this.columnHeaders=s,s=!1),JXG$1.isArray(o)&&(this.rowHeaders=o,o=!1),this.data=[],s&&(this.columnHeaders=[]),o&&(this.rowHeaders=[]),JXG$1.exists(a)){for(this.data=[],c=0;c<a.length;c++)for(this.data[c]=[],h=0;h<a[c].length;h++)d=a[c][h],parseFloat(d).toString()===d?this.data[c][h]=parseFloat(d):d!=="-"?this.data[c][h]=d:this.data[c][h]=NaN;if(s&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),o)for(this.rowHeaders=[],c=0;c<this.data.length;c++)this.rowHeaders.push(this.data[c][0]),this.data[c]=this.data[c].slice(1)}return this},loadFromTable:function(a,s,o){var c,h,d,b,_;if(JXG$1.isArray(s)&&(this.columnHeaders=s,s=!1),JXG$1.isArray(o)&&(this.rowHeaders=o,o=!1),this.data=[],s&&(this.columnHeaders=[]),o&&(this.rowHeaders=[]),a=document.getElementById(a),JXG$1.exists(a)){for(c=a.getElementsByTagName("tr"),this.data=[],h=0;h<c.length;h++)for(b=c[h].getElementsByTagName("td"),this.data[h]=[],d=0;d<b.length;d++)_=b[d].innerText,parseFloat(_).toString()===_?this.data[h][d]=parseFloat(_):_!=="-"?this.data[h][d]=_:this.data[h][d]=NaN;if(s&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),o)for(this.rowHeaders=[],h=0;h<this.data.length;h++)this.rowHeaders.push(this.data[h][0]),this.data[h]=this.data[h].slice(1)}return this},addColumn:function(a,s,o){throw new Error("not implemented")},addRow:function(a,s,o){throw new Error("not implemented")},getColumn:function(a){var s,o=[];if(JXG$1.isString(a)){for(s=0;s<this.columnHeaders.length;s++)if(a===this.columnHeaders[s]){a=s;break}}for(s=0;s<this.data.length;s++)this.data[s].length>a&&(o[s]=parseFloat(this.data[s][a]));return o},getRow:function(a){var s,o;if(JXG$1.isString(a)){for(o=0;o<this.rowHeaders.length;o++)if(a===this.rowHeaders[o]){a=o;break}}for(s=[],o=0;o<this.data[a].length;o++)s[o]=this.data[a][o];return s}});const DataSource=JXG$1.DataSource;JXG$1.Chart=function(a,s,o){this.constructor(a,o);var c,h,d,b,_,$;if(!JXG$1.isArray(s)||s.length===0)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],JXG$1.isNumber(s[0]))for(h=s,c=[],d=0;d<h.length;d++)c[d]=d+1;else if(s.length===1&&JXG$1.isArray(s[0]))for(h=s[0],c=[],$=JXG$1.evaluate(h).length,d=0;d<$;d++)c[d]=d+1;else s.length===2&&($=Math.min(s[0].length,s[1].length),c=s[0].slice(0,$),h=s[1].slice(0,$));if(JXG$1.isArray(h)&&h.length===0)throw new Error("JSXGraph: Can't create charts without data.");for(_=o.chartstyle.replace(/ /g,"").split(","),d=0;d<_.length;d++){switch(_[d]){case"bar":b=this.drawBar(a,c,h,o);break;case"line":b=this.drawLine(a,c,h,o);break;case"fit":b=this.drawFit(a,c,h,o);break;case"spline":b=this.drawSpline(a,c,h,o);break;case"pie":b=this.drawPie(a,h,o);break;case"point":b=this.drawPoints(a,c,h,o);break;case"radar":b=this.drawRadar(a,s,o);break}this.elements.push(b)}return this.id=this.board.setId(this,"Chart"),this.elements};JXG$1.Chart.prototype=new GeometryElement;JXG$1.extend(JXG$1.Chart.prototype,{drawLine:function(a,s,o,c){return c.fillcolor="none",c.highlightfillcolor="none",a.create("curve",[s,o],c)},drawSpline:function(a,s,o,c){return c.fillColor="none",c.highlightfillcolor="none",a.create("spline",[s,o],c)},drawFit:function(a,s,o,c){var h=c.degree;return h=Math.max(parseInt(h,10),1)||1,c.fillcolor="none",c.highlightfillcolor="none",a.create("functiongraph",[Numerics.regressionPolynomial(h,s,o)],c)},drawBar:function(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr=[],Jr=[],Js,qs,zo=function(eu,Oo){return function(){return s[eu]()-Oo*b}},js={fixed:!0,withLabel:!1,visible:!1,name:""};if(Js=JXG$1.copyAttributes(c,a.options,"chart"),Js&&Js.width)b=Js.width;else{if(s.length<=1)b=1;else for(b=s[1]-s[0],h=1;h<s.length-1;h++)b=s[h+1]-s[h]<b?s[h+1]-s[h]:b;b*=.8}for(qs=JXG$1.copyAttributes(c,a.options,"chart","label"),h=0;h<s.length;h++)JXG$1.isFunction(s[h])?(_=zo(h,-.5),$=zo(h,0),j=zo(h,.5)):(_=s[h]-b*.5,$=s[h],j=s[h]+b*.5),JXG$1.isFunction(o[h])?Xt=o[h]():Xt=o[h],Xt=o[h],Js.dir==="horizontal"?(Jr[0]=a.create("point",[0,_],js),Jr[1]=a.create("point",[Xt,_],js),Jr[2]=a.create("point",[Xt,j],js),Jr[3]=a.create("point",[0,j],js),JXG$1.exists(Js.labels)&&JXG$1.exists(Js.labels[h])&&(qs.anchorX=function(eu){return eu.X()>=0?"left":"right"},qs.anchorY="middle",d=a.create("text",[Xt,$,Js.labels[h]],qs))):(Jr[0]=a.create("point",[_,0],js),Jr[1]=a.create("point",[_,Xt],js),Jr[2]=a.create("point",[j,Xt],js),Jr[3]=a.create("point",[j,0],js),JXG$1.exists(Js.labels)&&JXG$1.exists(Js.labels[h])&&(qs.anchorX="middle",qs.anchorY=function(eu){return eu.Y()>=0?"bottom":"top"},d=a.create("text",[$,Xt,Js.labels[h]],qs))),JXG$1.isArray(Js.colors)&&(Lt=Js.colors,Js.fillcolor=Lt[h%Lt.length]),fr[h]=a.create("polygon",Jr,Js),JXG$1.exists(Js.labels)&&JXG$1.exists(Js.labels[h])&&(fr[h].text=d,fr[h].addChild(d));return fr},drawPoints:function(a,s,o,c){var h,d=[],b=c.infoboxarray;for(c.fixed=!0,c.name="",h=0;h<s.length;h++)c.infoboxtext=b?b[h%b.length]:!1,d[h]=a.create("point",[s[h],o[h]],c);return d},drawPie:function(a,s,o){var c,h,d=[],b=[],_=o.colors,$=o.highlightcolors,j=o.labels,Xt=o.radius||4,Lt=Xt,fr=o.center||[0,0],Jr=fr[0],Js=fr[1],qs=function(tu,Bo,vu){return function(){var t1,e1,r1,a1=0;for(e1=0;e1<=tu;e1++)a1+=parseFloat(JXG$1.evaluate(s[e1]));for(t1=a1,e1=tu+1;e1<s.length;e1++)t1+=parseFloat(JXG$1.evaluate(s[e1]));return r1=t1!==0?2*Math.PI*a1/t1:0,Lt()*Math[Bo](r1)+vu}},zo=function(tu,Bo){var vu=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],t1=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];JXG$1.exists(this.label)&&(this.label.rendNode.style.fontSize=Bo*this.label.evalVisProp("fontsize")+"px",this.label.fullUpdate()),this.point2.coords=new Coords(Const.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+vu*tu,this.point1.coords.usrCoords[2]+t1*tu],this.board),this.fullUpdate()},js=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),zo.call(this,1.1,2))},eu=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),zo.call(this,.9090909,1))},Oo={fixed:!0,withLabel:!1,visible:!1,name:""};if(!JXG$1.isArray(j))for(j=[],c=0;c<s.length;c++)j[c]="";for(JXG$1.isFunction(Xt)||(Lt=function(){return Xt}),o.highlightonsector=o.highlightonsector||!1,o.straightfirst=!1,o.straightlast=!1,h=a.create("point",[Jr,Js],Oo),d[0]=a.create("point",[function(){return Lt()+Jr},function(){return Js}],Oo),c=0;c<s.length;c++)d[c+1]=a.create("point",[qs(c,"cos",Jr),qs(c,"sin",Js)],Oo),o.name=j[c],o.withlabel=o.name!=="",o.fillcolor=_&&_[c%_.length],o.labelcolor=_&&_[c%_.length],o.highlightfillcolor=$&&$[c%$.length],b[c]=a.create("sector",[h,d[c],d[c+1]],o),o.highlightonsector&&(b[c].hasPoint=b[c].hasPointSector),o.highlightbysize&&(b[c].highlight=js,b[c].noHighlight=eu);return{sectors:b,points:d,midpoint:h}},drawRadar:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1,h1,m1,l1,f1,p1,d1,b1,C1,g1,o1,S1,v1,B1,T1,w1,x1,M1,O1=s.length,N1=function(){var G1,q1,H1,W1,j1=this.evalVisProp("label.offset).slice(0");return G1=this.point1.X(),q1=this.point2.X(),H1=this.point1.Y(),W1=this.point2.Y(),q1<G1&&(j1[0]=-j1[0]),W1<H1&&(j1[1]=-j1[1]),this.setLabelRelativeCoords(j1),new Coords(Const.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},L1=function(G1,q1){var H1,W1,j1;return H1=a.create("transform",[-(js[q1]-qs[q1]),0],{type:"translate"}),W1=a.create("transform",[Bo/(eu[q1]+zo[q1]-(js[q1]-qs[q1])),1],{type:"scale"}),H1.melt(W1),j1=a.create("transform",[G1],{type:"rotate"}),H1.melt(j1),H1};if(O1<=0)throw new Error("JSXGraph radar chart: no data");if(d=o.paramarray,!JXG$1.exists(d))throw new Error("JSXGraph radar chart: need paramArray attribute");if(b=d.length,b<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(c=0;c<O1;c++)if(b!==s[c].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+s[c].length+" != "+b+")");for(_=[],$=[],h=0;h<b;h++)_[h]=s[0][h],$[h]=_[h];for(c=1;c<O1;c++)for(h=0;h<b;h++)s[c][h]>_[h]&&(_[h]=s[c][h]),s[c][h]<$[h]&&($[h]=s[c][h]);for(j=[],Xt=[],c=0;c<O1;c++)j[c]="",Xt[c]=[];for(Lt=[],fr=[],Jr=o.startshiftratio||0,Js=o.endshiftratio||0,c=0;c<b;c++)Lt[c]=(_[c]-$[c])*Jr,fr[c]=(_[c]-$[c])*Js;if(qs=o.startshiftarray||Lt,zo=o.endshiftarray||fr,js=o.startarray||$,JXG$1.exists(o.start))for(c=0;c<b;c++)js[c]=o.start;if(eu=o.endarray||_,JXG$1.exists(o.end))for(c=0;c<b;c++)eu[c]=o.end;if(qs.length!==b)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(zo.length!==b)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(js.length!==b)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(eu.length!==b)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(Oo=o.labelarray||j,tu=o.colors,Bo=o.radius||10,x1=o.strokewidth||1,JXG$1.exists(o.highlightonsector)||(o.highlightonsector=!1),vu={name:o.name,id:o.id,strokewidth:x1,polystrokewidth:o.polystrokewidth||x1,strokecolor:o.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:o.fillColor||"#FFFF88",fillopacity:o.fillOpacity||.4,highlightfillcolor:o.highlightFillColor||"#FF7400",highlightstrokecolor:o.highlightStrokeColor||"black",gradient:o.gradient||"none"},t1=o.center||[0,0],e1=t1[0],r1=t1[1],a1=a.create("point",[e1,r1],{name:"",fixed:!0,withlabel:!1,visible:!1}),i1=Math.PI/2-Math.PI/b,i1=o.startangle||0,s1=i1,c1=[],h1=[],c=0;c<b;c++)for(s1+=2*Math.PI/b,l1=Bo*Math.cos(s1)+e1,f1=Bo*Math.sin(s1)+r1,c1[c]=a.create("point",[l1,f1],{name:"",fixed:!0,withlabel:!1,visible:!1}),h1[c]=a.create("line",[a1,c1[c]],{name:d[c],strokeColor:vu.strokecolor,strokeWidth:vu.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:vu.highlightstrokecolor}),h1[c].getLabelAnchor=N1,m1=L1(s1,c),h=0;h<s.length;h++)M1=s[h][c],Xt[h][c]=a.create("point",[M1,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),Xt[h][c].addTransform(Xt[h][c],m1);for(p1=[],c=0;c<O1;c++)for(vu.labelcolor=tu&&tu[c%tu.length],vu.strokecolor=tu&&tu[c%tu.length],vu.fillcolor=tu&&tu[c%tu.length],p1[c]=a.create("polygon",Xt[c],{withLines:!0,withLabel:!1,fillColor:vu.fillcolor,fillOpacity:vu.fillopacity,highlightFillColor:vu.highlightfillcolor}),h=0;h<b;h++)p1[c].borders[h].setAttribute("strokecolor:"+tu[c%tu.length]),p1[c].borders[h].setAttribute("strokewidth:"+vu.polystrokewidth);switch(d1=o.legendposition||"none",d1){case"right":C1=o.legendleftoffset||2,g1=o.legendtopoffset||1,this.legend=a.create("legend",[e1+Bo+C1,r1+Bo-g1],{labels:Oo,colors:tu});break;case"none":break;default:JXG$1.debug("Unknown legend position")}if(b1=[],o.showcircles){for(o1=[],c=0;c<6;c++)o1[c]=20*c;if(o1[0]="0",S1=o.circlelabelarray||o1,v1=S1.length,v1<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(B1=[],T1=i1+Math.PI/b,m1=L1(T1,0),vu.fillcolor="none",vu.highlightfillcolor="none",vu.strokecolor=o.strokecolor||"black",vu.strokewidth=o.circlestrokewidth||.5,vu.layer=0,w1=(eu[0]-js[0])/(v1-1),c=0;c<v1;c++)B1[c]=a.create("point",[js[0]+c*w1,0],{name:S1[c],size:0,fixed:!0,withLabel:!0,visible:!0}),B1[c].addTransform(B1[c],m1),b1[c]=a.create("circle",[a1,B1[c]],vu)}return this.rendNode=p1[0].rendNode,{circles:b1,lines:h1,points:Xt,midpoint:a1,polygons:p1}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}});JXG$1.createChart=function(a,s,o){var c,h,d,b,_,$=[],j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu=JXG$1.isBrowser?a.document.getElementById(s[0]):null;if(s.length===1&&JXG$1.isString(s[0])){if(JXG$1.exists(tu)){if(fr=JXG$1.copyAttributes(o,a.options,"chart"),tu=new DataSource().loadFromTable(s[0],fr.withheaders,fr.withheaders),c=tu.data,_=tu.columnHeaders,h=tu.rowHeaders,Jr=fr.width,Js=fr.name,qs=fr.strokecolor,zo=fr.fillcolor,js=fr.highlightstrokecolor,eu=fr.highlightfillcolor,a.suspendUpdate(),Oo=c.length,Lt=[],fr.rows&&JXG$1.isArray(fr.rows)){for(d=0;d<Oo;d++)for(b=0;b<fr.rows.length;b++)if(fr.rows[b]===d||fr.withheaders&&fr.rows[b]===h[d]){Lt.push(c[d]);break}}else Lt=c;for(Oo=Lt.length,d=0;d<Oo;d++){if(Xt=[],fr.chartstyle&&fr.chartstyle.indexOf("bar")!==-1){for(Jr?j=Jr:j=.8,Xt.push(1-j/2+(d+.5)*j/Oo),b=1;b<Lt[d].length;b++)Xt.push(Xt[b-1]+1);fr.width=j/Oo}Js&&Js.length===Oo?fr.name=Js[d]:fr.withheaders&&(fr.name=_[d]),qs&&qs.length===Oo?fr.strokecolor=qs[d]:fr.strokecolor=JXG$1.hsv2rgb((d+1)/Oo*360,.9,.6),zo&&zo.length===Oo?fr.fillcolor=zo[d]:fr.fillcolor=JXG$1.hsv2rgb((d+1)/Oo*360,.9,1),js&&js.length===Oo?fr.highlightstrokecolor=js[d]:fr.highlightstrokecolor=JXG$1.hsv2rgb((d+1)/Oo*360,.9,1),eu&&eu.length===Oo?fr.highlightfillcolor=eu[d]:fr.highlightfillcolor=JXG$1.hsv2rgb((d+1)/Oo*360,.9,.6),fr.chartstyle&&fr.chartstyle.indexOf("bar")!==-1?$.push(new JXG$1.Chart(a,[Xt,Lt[d]],fr)):$.push(new JXG$1.Chart(a,[Lt[d]],fr))}a.unsuspendUpdate()}return $}return fr=JXG$1.copyAttributes(o,a.options,"chart"),new JXG$1.Chart(a,s,fr)};JXG$1.registerElement("chart",JXG$1.createChart);JXG$1.Legend=function(a,s,o){var c;if(this.constructor(),c=JXG$1.copyAttributes(o,a.options,"legend"),this.board=a,this.coords=new Coords(Const.COORDS_BY_USER,s,this.board),this.myAtts={},this.label_array=c.labelarray||c.labels,this.color_array=c.colorarray||c.colors,this.opacy_array=c.strokeopacity||[1],this.lines=[],this.myAtts.strokewidth=c.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.myAtts.frozen=c.frozen||!1,this.style=c.legendstyle||c.style,this.style==="vertical")this.drawVerticalLegend(a,c);else throw new Error("JSXGraph: Unknown legend style: "+this.style);this.id=this.board.setId(this,"Leg")};JXG$1.Legend.prototype=new GeometryElement;JXG$1.Legend.prototype.drawVerticalLegend=function(a,s){var o,c=s.linelength||1,h=(s.rowheight||20)/this.board.unitY,d=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new Coords(Const.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(o=0;o<this.label_array.length;o++)this.myAtts.name=this.label_array[o],this.myAtts.strokecolor=this.color_array[o%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[o%this.color_array.length],this.myAtts.strokeopacity=this.opacy_array[o%this.opacy_array.length],this.myAtts.highlightstrokeopacity=this.opacy_array[o%this.opacy_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[o%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[o]=a.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-o*h],[this.coords.usrCoords[1]+c,this.coords.usrCoords[2]-o*h]],this.myAtts),this.myAtts.frozen&&this.lines[o].setAttribute({point1:{frozen:!0},point2:{frozen:!0}}),this.lines[o].getLabelAnchor=d,this.lines[o].prepareUpdate().update().updateVisibility(this.lines[o].evalVisProp("visible")).updateRenderer(),this.addChild(this.lines[o])};JXG$1.createLegend=function(a,s,o){var c=[0,0];if(JXG$1.exists(s)&&s.length===2)c=s;else throw new Error("JSXGraph: Legend element needs two numbers as parameters");return new JXG$1.Legend(a,c,o)};JXG$1.registerElement("legend",JXG$1.createLegend);JXG$1.Chart,JXG$1.Legend;JXG$1.Transformation=function(a,s,o,c){this.elementClass=Const.OBJECT_CLASS_OTHER,this.type=Const.OBJECT_TYPE_TRANSFORMATION,c?(this.is3D=!0,this.matrix=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]):(this.is3D=!1,this.matrix=[[1,0,0],[0,1,0],[0,0,1]]),this.board=a,this.isNumericMatrix=!1,this.is3D?this.setMatrix3D(o[0],s,o.slice(1)):this.setMatrix(a,s,o),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt",meltTo:"meltTo"}};JXG$1.Transformation.prototype={};JXG$1.extend(JXG$1.Transformation.prototype,{update:function(){return this},setMatrix:function(a,s,o){var c;for(this.isNumericMatrix=!0,c=0;c<o.length;c++)if(typeof o[c]!="number"){this.isNumericMatrix=!1;break}if(s==="translate"){if(o.length!==2)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=JXG$1.createEvalFunction(a,o,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if(s==="scale"){if(o.length!==2)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=JXG$1.createEvalFunction(a,o,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if(s==="reflect")o.length<4&&(o[0]=a.select(o[0])),o.length===2&&(o[1]=a.select(o[1])),o.length===4&&(this.evalParam=JXG$1.createEvalFunction(a,o,4)),this.update=function(){var h,d,b,_,$,j,Xt,Lt;o.length===1?Xt=o[0].stdform:o.length===2?Xt=Mat.crossProduct(o[1].coords.usrCoords,o[0].coords.usrCoords):o.length===4&&(Xt=Mat.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),h=Xt[1],d=Xt[2],b=Xt[0],Lt=[-b*h,-b*d,h*h+d*d],j=Lt[2],_=Lt[0]/Lt[2],$=Lt[1]/Lt[2],h=-Xt[2],d=Xt[1],this.matrix[1][1]=(h*h-d*d)/j,this.matrix[1][2]=2*h*d/j,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=_*(1-this.matrix[1][1])-$*this.matrix[1][2],this.matrix[2][0]=$*(1-this.matrix[2][2])-_*this.matrix[2][1]};else if(s==="rotate")o.length===3?this.evalParam=JXG$1.createEvalFunction(a,o,3):o.length>0&&o.length<=2&&(this.evalParam=JXG$1.createEvalFunction(a,o,1),o.length===2&&!JXG$1.isArray(o[1])&&(o[1]=a.select(o[1]))),this.update=function(){var h,d,b=this.evalParam(0),_=Math.cos(b),$=Math.sin(b);this.matrix[1][1]=_,this.matrix[1][2]=-$,this.matrix[2][1]=$,this.matrix[2][2]=_,o.length>1&&(o.length===3?(h=this.evalParam(1),d=this.evalParam(2)):JXG$1.isArray(o[1])?(h=o[1][0],d=o[1][1]):(h=o[1].X(),d=o[1].Y()),this.matrix[1][0]=h*(1-_)+d*$,this.matrix[2][0]=d*(1-_)-h*$)};else if(s==="shear"){if(o.length!==2)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=JXG$1.createEvalFunction(a,o,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if(s==="generic"){if(o.length!==9)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=JXG$1.createEvalFunction(a,o,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}else if(s==="matrix"){if(o.length!==1)throw new Error("JSXGraph: transformation of type 'matrix' needs 1 parameter.");this.evalParam=o[0].slice(),this.update=function(){var h,d;for(h=0;h<3;h++)for(d=0;d<3;d++)this.matrix[h][d]=JXG$1.evaluate(this.evalParam[h][d])}}},setMatrix3D:function(a,s,o){var c,h=a.board;for(this.isNumericMatrix=!0,c=0;c<o.length;c++)if(typeof o[c]!="number"){this.isNumericMatrix=!1;break}if(s==="translate"){if(o.length!==3)throw new Error("JSXGraph: 3D translate transformation needs 3 parameters.");this.evalParam=JXG$1.createEvalFunction(h,o,3),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1),this.matrix[3][0]=this.evalParam(2)}}else if(s==="scale"){if(o.length!==3&&o.length!==4)throw new Error("JSXGraph: 3D scale transformation needs either 3 or 4 parameters.");this.evalParam=JXG$1.createEvalFunction(h,o,3),this.update=function(){var d=this.evalParam(0),b=this.evalParam(1),_=this.evalParam(2);this.matrix[1][1]=d,this.matrix[2][2]=b,this.matrix[3][3]=_}}else if(s==="rotateX")o.splice(1,0,[1,0,0]),this.setMatrix3D(a,"rotate",o);else if(s==="rotateY")o.splice(1,0,[0,1,0]),this.setMatrix3D(a,"rotate",o);else if(s==="rotateZ")o.splice(1,0,[0,0,1]),this.setMatrix3D(a,"rotate",o);else if(s==="rotate"){if(o.length<2)throw new Error("JSXGraph: 3D rotate transformation needs 2 or 3 parameters.");o.length===3&&!JXG$1.isFunction(o[2])&&!JXG$1.isArray(o[2])?(this.evalParam=JXG$1.createEvalFunction(h,o,2),o[2]=a.select(o[2])):this.evalParam=JXG$1.createEvalFunction(h,o,o.length),this.update=function(){var d=this.evalParam(0),b=this.evalParam(1),_=[1,0,0,0],$=Math.cos(d),j=Math.sin(d),Xt,Lt,fr,Jr=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Js=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],qs=Mat.norm(b);b.length===3?(Xt=b[0]/qs,Lt=b[1]/qs,fr=b[2]/qs):(Xt=b[1]/qs,Lt=b[2]/qs,fr=b[3]/qs),o.length===3&&(o.length===3&&JXG$1.exists(o[2].is3D)?_=o[2].coords.slice():_=this.evalParam(2),_.length===3&&_.unshift(1),Jr[1][0]=-_[1],Jr[2][0]=-_[2],Jr[3][0]=-_[3],Js[1][0]=_[1],Js[2][0]=_[2],Js[3][0]=_[3]),this.matrix=[[1,0,0,0],[0,Xt*Xt*(1-$)+$,Xt*Lt*(1-$)-fr*j,Xt*fr*(1-$)+Lt*j],[0,Lt*Xt*(1-$)+fr*j,Lt*Lt*(1-$)+$,Lt*fr*(1-$)-Xt*j],[0,fr*Xt*(1-$)-Lt*j,fr*Lt*(1-$)+Xt*j,fr*fr*(1-$)+$]],this.matrix=Mat.matMatMult(this.matrix,Jr),this.matrix=Mat.matMatMult(Js,this.matrix)}}},apply:function(a,s){var o;return this.update(),this.is3D?o=a.coords:JXG$1.exists(s)?o=a.initialCoords.usrCoords:o=a.coords.usrCoords,Mat.matVecMult(this.matrix,o)},applyOnce:function(a){var s,o,c;for(JXG$1.isArray(a)||(a=[a]),o=a.length,c=0;c<o;c++)this.update(),this.is3D?a[c].coords=Mat.matVecMult(this.matrix,a[c].coords):(s=Mat.matVecMult(this.matrix,a[c].coords.usrCoords),a[c].coords.setCoordinates(Const.COORDS_BY_USER,s))},bindTo:function(a){var s,o;if(JXG$1.isArray(a))for(o=a.length,s=0;s<o;s++)a[s].transformations.push(this);else a.transformations.push(this)},meltTo:function(a){var s,o,c;if(JXG$1.isArray(a))for(s=0;s<a.length;s++)this.meltTo(a[s]);else o=a.transformations,o.length>0&&o[o.length-1].isNumericMatrix&&this.isNumericMatrix?o[o.length-1].melt(this):(c=this.clone(),o.push(c))},clone:function(){var a=null;return this.isNumericMatrix&&(a=new JXG$1.Transformation(this.board,"none",[]),a.matrix=this.matrix.slice()),a},setProperty:function(a){JXG$1.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(a){},melt:function(a){var s=[];return this.update(),a.update(),s=Mat.matMatMult(a.matrix,this.matrix),this.update=function(){this.matrix=s},this},getParents:function(){var a=[[].concat.apply([],this.matrix)];return this.parents.length!==0&&(a=this.parents),a}});JXG$1.createTransform=function(a,s,o){return new JXG$1.Transformation(a,o.type,s)};JXG$1.registerElement("transform",JXG$1.createTransform);JXG$1.createTransform3D=function(a,s,o){return new JXG$1.Transformation(a,o.type,s,!0)};JXG$1.registerElement("transform3d",JXG$1.createTransform3D);JXG$1.Transformation;JXG$1.Turtle=function(a,s,o){var c,h,d;return this.constructor(a,o,Const.OBJECT_TYPE_TURTLE,Const.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=a,this.visProp.curveType="plot",this._attributes=JXG$1.copyAttributes(this.visProp,a.options,"turtle"),delete this._attributes.id,c=0,h=0,d=90,s.length!==0&&(s.length===3?(c=s[0],h=s[1],d=s[2]):s.length===2?JXG$1.isArray(s[0])?(c=s[0][0],h=s[0][1],d=s[1]):(c=s[0],h=s[1]):(c=s[0][0],h=s[0][1])),this.init(c,h,d),this.methodMap=JXG$1.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",up:"penUp",penDown:"penDown",pd:"penDown",down:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",hide:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",show:"showTurtle",penSize:"setPenSize",setPenSize:"setPenSize",penColor:"setPenColor",setPenColor:"setPenColor",highlightPenColor:"setHighlightPenColor",setHighlightPenColor:"setHighlightPenColor",getPenColor:"getPenColor",Color:"getPenColor",getHighlightPenColor:"getHighlightPenColor",HighlightColor:"getHighlightPenColor",getPenSize:"getPenSize",Size:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",Pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this};JXG$1.Turtle.prototype=new GeometryElement;JXG$1.extend(JXG$1.Turtle.prototype,{init:function(a,s,o){var c={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Mat.hypot(this.board.unitX,this.board.unitY),this.pos=[a,s],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,c),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],c),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-o),this.board.update()},forward:function(a){if(a===0)return this;var s,o=a*Math.cos(this.dir*Math.PI/180),c=a*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||(s=this.board.create("transform",[o,c],{type:"translate"}),s.applyOnce(this.turtle),s.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=o,this.pos[1]+=c,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(a){return this.forward(-a)},right:function(a){if(this.dir-=a,this.dir%=360,!this.turtleIsHidden){var s=this.board.create("transform",[-a*Math.PI/180,this.turtle],{type:"rotate"});s.applyOnce(this.turtle2)}return this.board.update(),this},left:function(a){return this.right(-a)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var a,s;for(a=0;a<this.objects.length;a++)s=this.objects[a],s.type===Const.OBJECT_TYPE_CURVE&&(this.board.removeObject(s),this.objects.splice(a,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){return this.board.removeObject(this.objects),this.objects=[],this.init(0,0,90),this},setPos:function(a,s){var o;return JXG$1.isArray(a)?this.pos=a:this.pos=[a,s],this.turtleIsHidden||(this.turtle.setPositionDirectly(Const.COORDS_BY_USER,[a,s]),this.turtle2.setPositionDirectly(Const.COORDS_BY_USER,[a,s+this.arrowLen]),o=this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}),o.applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(a){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",a)),this.objects.push(this.curve),this},setPenColor:function(a){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",a)),this.objects.push(this.curve),this},getPenAttribute:function(a){var s,o=this.objects.length;return o===4?s=0:s=o-1,this.objects[s].evalVisProp(a)},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(a){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",a)),this.objects.push(this.curve),this},setAttribute:function(a){var s,o,c,h=this.objects.length;for(s=0;s<h;s++)o=this.objects[s],o.type===Const.OBJECT_TYPE_CURVE&&o.setAttribute(a);return c=this.visProp.id,this.visProp=JXG$1.deepCopy(this.curve.visProp),this.visProp.id=c,this._attributes=JXG$1.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(a,s){return this._attributes[a.toLowerCase()]=s,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var a=this.stack.pop();return this.pos[0]=a[0],this.pos[1]=a[1],this.dir=a[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(a){var s,o,c,h,d;return JXG$1.isArray(a)?(s=this.pos[0],o=this.pos[1],c=a[0],h=a[1],d=Math.atan2(h-o,c-s),this.right(this.dir-d*180/Math.PI)):JXG$1.isNumber(a)&&this.right(this.dir-a),this},moveTo:function(a){var s,o,c;return JXG$1.isArray(a)&&(s=a[0]-this.pos[0],o=a[1]-this.pos[1],this.turtleIsHidden||(c=this.board.create("transform",[s,o],{type:"translate"}),c.applyOnce(this.turtle),c.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=a[0],this.pos[1]=a[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(a){return this.forward(a)},bk:function(a){return this.back(a)},lt:function(a){return this.left(a)},rt:function(a){return this.right(a)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(a,s){var o,c,h,d,b=this.objects.length;for(o=0,c=0;o<b;o++)if(h=this.objects[o],h.elementClass===Const.OBJECT_CLASS_CURVE){if(c<=a&&a<c+h.numberPoints)return d=a-c,h[s](d);c+=h.numberPoints}return this[s]()},X:function(a){return JXG$1.exists(a)?this.evalAt(a,"X"):this.pos[0]},Y:function(a){return JXG$1.exists(a)?this.evalAt(a,"Y"):this.pos[1]},Z:function(a){return 1},minX:function(){return 0},maxX:function(){var a,s,o=this.objects.length,c=0;for(a=0;a<o;a++)s=this.objects[a],s.elementClass===Const.OBJECT_CLASS_CURVE&&(c+=this.objects[a].numberPoints);return c},hasPoint:function(a,s){var o,c;for(o=0;o<this.objects.length;o++)if(c=this.objects[o],c.type===Const.OBJECT_TYPE_CURVE&&c.hasPoint(a,s))return!0;return!1}});JXG$1.createTurtle=function(a,s,o){var c;return s=s||[],c=JXG$1.copyAttributes(o,a.options,"turtle"),new JXG$1.Turtle(a,s,c)};JXG$1.registerElement("turtle",JXG$1.createTurtle);JXG$1.Turtle;JXG$1.Ticks=function(a,s,o){if(this.constructor(a.board,o,Const.OBJECT_TYPE_TICKS,Const.OBJECT_CLASS_OTHER),this.line=a,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],JXG$1.isFunction(s))throw this.ticksFunction=s,new Error("Function arguments are no longer supported.");JXG$1.isArray(s)?this.fixedTicks=s:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")};JXG$1.Ticks.prototype=new GeometryElement;JXG$1.extend(JXG$1.Ticks.prototype,{hasPoint:function(a,s){var o,c,h,d,b=this.ticks&&this.ticks.length||0;if(!this.line.evalVisProp("scalable")||this.line.elementClass===Const.OBJECT_CLASS_CURVE||(JXG$1.isObject(this.evalVisProp("precision"))?(d=this.board._inputDevice,h=this.evalVisProp("precision."+d)):h=this.board.options.precision.hasPoint,h+=this.evalVisProp("strokewidth")*.5,this.line.stdform[1]!==0&&this.line.stdform[2]!==0&&this.line.type!==Const.OBJECT_TYPE_AXIS))return!1;for(o=0;o<b;o++)if(c=this.ticks[o],c[2]&&!(this.line.stdform[1]===0&&Math.abs(c[0][0]-this.line.point1.coords.scrCoords[1])<Mat.eps||this.line.stdform[2]===0&&Math.abs(c[1][0]-this.line.point1.coords.scrCoords[2])<Mat.eps)&&(Math.abs(c[0][0]-c[0][1])>=1||Math.abs(c[1][0]-c[1][1])>=1)){if(this.line.stdform[1]===0){if(Math.abs(s-this.line.point1.coords.scrCoords[2])<2*h&&c[0][0]-h<a&&a<c[0][1]+h)return!0}else if(this.line.stdform[2]===0&&Math.abs(a-this.line.point1.coords.scrCoords[1])<2*h&&c[1][0]-h<s&&s<c[1][1]+h)return!0}return!1},setPositionDirectly:function(a,s,o){var c,h,d=new Coords(a,s,this.board),b=new Coords(a,o,this.board),_=this.board.getBoundingBox();return this.line.type!==Const.OBJECT_TYPE_AXIS||!this.line.evalVisProp("scalable")?this:(Math.abs(this.line.stdform[1])<Mat.eps&&Math.abs(d.usrCoords[1]*b.usrCoords[1])>Mat.eps?(c=b.usrCoords[1]/d.usrCoords[1],_[0]*=c,_[2]*=c,this.board.setBoundingBox(_,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<Mat.eps&&Math.abs(d.usrCoords[2]*b.usrCoords[2])>Mat.eps&&(h=b.usrCoords[2]/d.usrCoords[2],_[3]*=h,_[1]*=h,this.board.setBoundingBox(_,this.board.keepaspectratio,"update")),this)},calculateTicksCoordinates:function(){var a,s,o,c;if(!(this.line.elementClass===Const.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<Mat.eps&&Math.abs(this.dy)<Mat.eps)))return a=this.getZeroCoordinates(),this.line.elementClass===Const.OBJECT_CLASS_LINE?s=this.getLowerAndUpperBounds(a,"ticksdistance"):s={lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},this.evalVisProp("type")==="polar"&&(c=this.board.getBoundingBox(),o=Math.max(Mat.hypot(c[0],c[1]),Mat.hypot(c[2],c[3])),s.upper=o),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(a,s):this.generateFixedTicks(a,s),this},setTicksSizeVariables:function(a){var s,o,c,h,d=this.evalVisProp("majorheight")*.5,b=this.evalVisProp("minorheight")*.5;JXG$1.exists(a)?(o=this.line.minX(),c=this.line.maxX(),h=this.line.points.length,h<2?(this.dxMaj=0,this.dyMaj=0):Mat.relDif(a,o)<Mat.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):Mat.relDif(a,c)<Mat.eps?(this.dxMaj=this.line.points[h-2].usrCoords[2]-this.line.points[h-1].usrCoords[2],this.dyMaj=this.line.points[h-1].usrCoords[1]-this.line.points[h-2].usrCoords[1]):(this.dxMaj=-Numerics.D(this.line.Y)(a),this.dyMaj=Numerics.D(this.line.X)(a))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,s=Mat.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=d/s*this.board.unitX,this.dyMaj*=d/s*this.board.unitY,this.dxMin*=b/s*this.board.unitX,this.dyMin*=b/s*this.board.unitY,this.minStyle=this.evalVisProp("minorheight")<0?"infinite":"finite",this.majStyle=this.evalVisProp("majorheight")<0?"infinite":"finite"},getZeroCoordinates:function(){var a,s,o,c,h,d,b,_,$,j=this.evalVisProp("anchor");return this.line.elementClass===Const.OBJECT_CLASS_LINE?this.line.type===Const.OBJECT_TYPE_AXIS?Geometry.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(o=this.line.point1.coords.usrCoords[0],a=this.line.point1.coords.usrCoords[1],s=this.line.point1.coords.usrCoords[2],d=this.line.point2.coords.usrCoords[0],c=this.line.point2.coords.usrCoords[1],h=this.line.point2.coords.usrCoords[2],j==="right"?this.line.point2.coords:j==="middle"?new Coords(Const.COORDS_BY_USER,[(o+d)*.5,(a+c)*.5,(s+h)*.5],this.board):JXG$1.isNumber(j)?new Coords(Const.COORDS_BY_USER,[o+(d-o)*j,a+(c-a)*j,s+(h-s)*j],this.board):this.line.point1.coords):(_=this.line.minX(),$=this.line.maxX(),j==="right"?b=$:j==="middle"?b=(_+$)*.5:JXG$1.isNumber(j)?b=_*(1-j)+$*j:b=_,b)},getLowerAndUpperBounds:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js=Mat.eps*10,eu=this.line.evalVisProp("straightfirst"),Oo=this.line.evalVisProp("straightlast"),tu=this.evalVisProp("includeboundaries");return this.line.elementClass===Const.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(b=new Coords(Const.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),_=new Coords(Const.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),$=Math.abs(b.usrCoords[0])>=Mat.eps&&b.scrCoords[1]>=0&&b.scrCoords[1]<=this.board.canvasWidth&&b.scrCoords[2]>=0&&b.scrCoords[2]<=this.board.canvasHeight,j=Math.abs(_.usrCoords[0])>=Mat.eps&&_.scrCoords[1]>=0&&_.scrCoords[1]<=this.board.canvasWidth&&_.scrCoords[2]>=0&&_.scrCoords[2]<=this.board.canvasHeight,JXG$1.exists(s)&&s==="ticksdistance"?(Geometry.calcStraight(this.line,b,_,0),qs=this.getDistanceFromZero(a,b),zo=this.getDistanceFromZero(a,_),Geometry.calcStraight(this.line,b,_,this.line.evalVisProp("margin")),qs=this.getDistanceFromZero(a,b)-qs,zo=this.getDistanceFromZero(a,_).m2):Geometry.calcLineDelimitingPoints(this.line,b,_),h=this.line.evalVisProp("firstarrow"),d=this.line.evalVisProp("lastarrow"),Jr=this.getDistanceFromZero(a,b),Js=this.getDistanceFromZero(a,_),(h||d)&&(fr=this.board.renderer.getArrowHeadData(this.line,this.line.evalVisProp("strokewidth"),""),this.board.renderer.getPositionArrowHead(this.line,b,_,fr)),Xt=this.getDistanceFromZero(a,b),Lt=this.getDistanceFromZero(a,_),Jr=Xt-Jr,Js=Xt-Js,Xt<Lt?(o=Xt,c=Lt,!eu&&$&&!tu&&(o+=js),!Oo&&j&&!tu&&(c-=js)):Lt<Xt?(o=Lt,c=Xt,!Oo&&j&&!tu&&(o+=js),!eu&&$&&!tu&&(c-=js)):(o=0,c=0),{lower:o,upper:c,a1:Jr,a2:Js,m1:qs,m2:zo})},getDistanceFromZero:function(a,s){var o,c,h,d,b;return o=this.line.point1.coords,c=this.line.point2.coords,b=a.distance(Const.COORDS_BY_USER,s),h=[c.usrCoords[0]-o.usrCoords[0],c.usrCoords[1]-o.usrCoords[1],c.usrCoords[2]-o.usrCoords[2]],d=[s.usrCoords[0]-a.usrCoords[0],s.usrCoords[1]-a.usrCoords[1],s.usrCoords[2]-a.usrCoords[2]],Mat.innerProduct(h,d,3)<0&&(b*=-1),b},generateEquidistantTicks:function(a,s){var o,c=Mat.eps,h,d,b=this.evalVisProp("minorticks");if(d=this.getDistanceMajorTicks(),this.line.elementClass===Const.OBJECT_CLASS_LINE&&(h=this.getXandYdeltas()),d*=this.evalVisProp("scale"),d/=b+1,this.ticksDelta=d,!(d<Mat.eps)){if(Math.abs(s.upper-s.lower)>d*2048){JXG$1.warn("JSXGraph ticks: too many ticks (>2048). Please increase ticksDistance.");return}for(o=0,this.evalVisProp("drawzero")||(o=d),o<s.lower&&(o=Math.floor((s.lower-c)/d)*d);o<=s.upper+c&&(o>=s.lower-c&&this.processTickPosition(a,o,d,h),o+=d,!(s.upper-o>d*1e4)););for(o=-d,o>s.upper&&(o=Math.ceil((s.upper+c)/-d)*-d);o>=s.lower-c&&(o<=s.upper+c&&this.processTickPosition(a,o,d,h),o-=d,!(o-s.lower>d*1e4)););}},getDistanceMajorTicks:function(){var a,s,o,c,h,d,b=5,_,$,j;return this.evalVisProp("insertticks")?(o=this.getLowerAndUpperBounds(this.getZeroCoordinates(),""),h=o.upper-o.lower,d=this.evalVisProp("scale"),_=h/(b+1)/d,$=this.evalVisProp("minticksdistance")/d,j=this.evalVisProp("minorticks"),c=this.getXandYdeltas(),c.x*=this.board.unitX,c.y*=this.board.unitY,$/=Mat.hypot(c.x,c.y),$*=j+1,a=Math.pow(10,Math.floor(Math.log($)/Math.LN10)),2*a>=$?a*=2:5*a>=$&&(a*=5),s=Math.pow(10,Math.floor(Math.log(_)/Math.LN10)),5*s<_?s*=5:2*s<_&&(s*=2),a=Math.max(a,s),a):this.evalVisProp("ticksdistance")},processTickPosition:function(a,s,o,c){var h,d,b,_,$,j,Xt=this.evalVisProp("ticksperlabel"),Lt=null;this.line.elementClass===Const.OBJECT_CLASS_LINE?(h=a.usrCoords[1]+s*c.x,d=a.usrCoords[2]+s*c.y):(h=this.line.X(a+s),d=this.line.Y(a+s)),b=new Coords(Const.COORDS_BY_USER,[h,d],this.board),this.line.elementClass===Const.OBJECT_CLASS_CURVE&&(Lt=a+s,this.setTicksSizeVariables(Lt)),$=this.evalVisProp("minorticks"),b.major=Math.round(s/o)%($+1)===0,Xt||(Xt=$+1),j=Math.round(s/o)%Xt===0,_=this.createTickPath(b,b.major),_.length===3&&(this.ticks.push(_),j&&this.evalVisProp("drawlabels")?this.labelsData.push(this.generateLabelData(this.generateLabelText(b,a,Lt),b,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(a,s){var o,c,h,d,b,_,$=Mat.eps,j,Xt=JXG$1.isArray(this.visProp.labels),Lt,fr=this.evalVisProp("drawlabels");for(this.line.elementClass===Const.OBJECT_CLASS_LINE&&(Lt=this.getXandYdeltas()),h=0;h<this.fixedTicks.length;h++)this.line.elementClass===Const.OBJECT_CLASS_LINE?(j=this.fixedTicks[h],b=a.usrCoords[1]+j*Lt.x,_=a.usrCoords[2]+j*Lt.y):(j=a+this.fixedTicks[h],b=this.line.X(j),_=this.line.Y(j)),o=new Coords(Const.COORDS_BY_USER,[b,_],this.board),this.line.elementClass===Const.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(j),d=this.createTickPath(o,!0),d.length===3&&j>=s.lower-$&&j<=s.upper+$&&(this.ticks.push(d),fr&&(Xt||JXG$1.exists(this.visProp.labels[h]))?(c=Xt?this.evalVisProp("labels."+h):j,this.labelsData.push(this.generateLabelData(this.generateLabelText(o,a,c),o,h))):this.labelsData.push(null))},getXandYdeltas:function(){var a,s,o=this.line.point1.Dist(this.line.point2);return a=this.line.point1.coords.usrCoords,s=this.line.point2.coords.usrCoords,{x:(s[1]-a[1])/o,y:(s[2]-a[2])/o}},_isInsideCanvas:function(a,s,o){var c=this.board.canvasWidth,h=this.board.canvasHeight;return o===void 0&&(o=0),a[0]>=o&&a[0]<=c-o&&s[0]>=o&&s[0]<=h-o||a[1]>=o&&a[1]<=c-o&&s[1]>=o&&s[1]<=h-o},createTickPath:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt=[-2e6,-2e6],fr=[-2e6,-2e6],Jr,Js,qs,zo,js,eu,Oo,tu,Bo;if(o=a.scrCoords,s?(d=this.dxMaj,b=this.dyMaj,Xt=this.majStyle,Oo=this.evalVisProp("majortickendings.0")>0,tu=this.evalVisProp("majortickendings.1")>0):(d=this.dxMin,b=this.dyMin,Xt=this.minStyle,Oo=this.evalVisProp("tickendings.0")>0,tu=this.evalVisProp("tickendings.1")>0),c=[-b*o[1]-d*o[2],b,d],s&&this.evalVisProp("type")==="polar"){if(zo=this.board.getBoundingBox(),js=2*Math.PI,eu=js/180,o=a.usrCoords,Js=Mat.hypot(o[1],o[2]),qs=Math.max(Mat.hypot(zo[0],zo[1]),Mat.hypot(zo[2],zo[3])),Js<qs){for(Lt=[],fr=[],Jr=0;Jr<=js;Jr+=eu)Lt.push(this.board.origin.scrCoords[1]+Js*Math.cos(Jr)*this.board.unitX),fr.push(this.board.origin.scrCoords[2]+Js*Math.sin(Jr)*this.board.unitY);return[Lt,fr,s]}}else{if(Xt==="infinite"){if(this.evalVisProp("ignoreinfinitetickendings")&&(Oo=tu=!0),h=Geometry.meetLineBoard(c,this.board),Oo&&tu)Lt[0]=h[0].scrCoords[1],Lt[1]=h[1].scrCoords[1],fr[0]=h[0].scrCoords[2],fr[1]=h[1].scrCoords[2];else if(Bo=[Mat.innerProduct(h[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],Mat.innerProduct(h[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]],Bo[0]<Bo[1]&&(h.reverse(),Bo.reverse()),Oo){if(Bo[0]<0)return[];Bo[1]<0?(Lt[0]=h[0].scrCoords[1],fr[0]=h[0].scrCoords[2],Lt[1]=o[1],fr[1]=o[2]):(Lt[0]=h[0].scrCoords[1],fr[0]=h[0].scrCoords[2],Lt[1]=h[1].scrCoords[1],fr[1]=h[1].scrCoords[2])}else if(tu){if(Bo[1]>0)return[];Bo[0]>0?(Lt[0]=o[1],fr[0]=o[2],Lt[1]=h[1].scrCoords[1],fr[1]=h[1].scrCoords[2]):(Lt[0]=h[0].scrCoords[1],fr[0]=h[0].scrCoords[2],Lt[1]=h[1].scrCoords[1],fr[1]=h[1].scrCoords[2])}}else this.evalVisProp("face")===">"?j=Math.PI/4:this.evalVisProp("face")==="<"?j=-Math.PI/4:j=0,_=Math.cos(j)*d-Math.sin(j)*b,$=Math.sin(j)*d+Math.cos(j)*b,Lt[0]=o[1]+_*Oo,fr[0]=o[2]-$*Oo,Lt[1]=o[1],fr[1]=o[2],j=-j,_=Math.cos(j)*d-Math.sin(j)*b,$=Math.sin(j)*d+Math.cos(j)*b,Lt[2]=o[1]-_*tu,fr[2]=o[2]+$*tu;if(this._isInsideCanvas(Lt,fr))return[Lt,fr,s]}return[]},formatLabelText:function(a){var s,o,c=this.evalVisProp("label.usemathjax"),h=this.evalVisProp("label.usekatex"),d=this.evalVisProp("scalesymbol");return JXG$1.isNumber(a)?(this.evalVisProp("label.tofraction")?c?s="\\("+JXG$1.toFraction(a,!0)+"\\)":s=JXG$1.toFraction(a,h):(o=this.evalVisProp("digits"),this.useLocale()?s=this.formatNumberLocale(a,o):(s=(Math.round(a*1e11)/1e11).toString(),(s.length>this.evalVisProp("maxlabellength")||s.indexOf("e")!==-1)&&(this.evalVisProp("precision")!==3&&o===3&&(o=this.evalVisProp("precision")),s=a.toExponential(o).toString()))),this.evalVisProp("beautifulscientificticklabels")&&(s=this.beautifyScientificNotationLabel(s)),s.indexOf(".")>-1&&s.indexOf("e")===-1&&(s=s.replace(/0+$/,""),s=s.replace(/\.$/,""))):s=a.toString(),d.length>0&&(s==="1"?s=d:s==="-1"?s="-"+d:s!=="0"&&(s=s+d)),this.evalVisProp("useunicodeminus")&&(s=s.replace(/-/g,"")),s},beautifyScientificNotationLabel:function(a){var s;return a.indexOf("e")===-1?a:(s=parseFloat(a.substring(0,a.indexOf("e")))+a.substring(a.indexOf("e")),s=s.replace(/e(.*)$/g,function(o,c){var h="10";return h+=c.replace(/-/g,"").replace(/\+/g,"").replace(/0/g,"").replace(/1/g,"").replace(/2/g,"").replace(/3/g,"").replace(/4/g,"").replace(/5/g,"").replace(/6/g,"").replace(/7/g,"").replace(/8/g,"").replace(/9/g,""),h}),s)},generateLabelText:function(a,s,o){var c,h;if(!JXG$1.exists(o)){if(h=this.getDistanceFromZero(s,a),Math.abs(h)<Mat.eps)return"0";o=h/this.evalVisProp("scale")}return c=this.formatLabelText(o),c},generateLabelData:function(a,s,o){var c,h,d,b;return b=this.evalVisProp("label.fontsize"),c=[s.scrCoords[1],s.scrCoords[1]],h=[s.scrCoords[2],s.scrCoords[2]],d=b===void 0?12:b,d*=.5,this._isInsideCanvas(c,h,d)?(c=this.evalVisProp("label.offset")[0],h=this.evalVisProp("label.offset")[1],{x:s.usrCoords[1]+c/this.board.unitX,y:s.usrCoords[2]+h/this.board.unitY,t:a,i:o}):null},update:function(){return this.needsUpdate&&this.board.canvasWidth!==0&&this.board.canvasHeight!==0&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var a,s,o,c,h,d,b,_;for(o=this.labelsData.length,c=this.labels.length,a=0,s=0;a<o;a++)this.labelsData[a]!==null&&(b=this.labelsData[a],s<c?(d=this.labels[s],d.setText(b.t),d.setCoords(b.x,b.y),s++):(this.labelCounter+=1,h=JXG$1.deepCopy(this.visProp.label),h.isLabel=!0,h.priv=this.visProp.priv,h.id=this.id+b.i+"Label"+this.labelCounter,d=JXG$1.createText(this.board,[b.x,b.y,b.t],h),this.addChild(d),d.setParents(this),d.isDraggable=!1,d.dump=!1,this.labels.push(d)),_=this.evalVisProp("label.visible"),_==="inherit"&&(_=this.visPropCalc.visible),d.prepareUpdate().updateVisibility(_).updateRenderer(),d.distanceX=this.evalVisProp("label.offset")[0],d.distanceY=this.evalVisProp("label.offset")[1]);for(o=s,s=o;s<c;s++)this.board.renderer.display(this.labels[s],!1),this.labels[s].visProp.visible=this.labels[s].visPropCalc.visible=!1;return this},hideElement:function(){var a;for(JXG$1.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),a=0;a<this.labels.length;a++)JXG$1.exists(this.labels[a])&&this.labels[a].hideElement();return this},showElement:function(){var a;for(JXG$1.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),a=0;a<this.labels.length;a++)JXG$1.exists(this.labels[a])&&this.labels[a].showElement();return this}});JXG$1.createTicks=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"ticks");if(s.length<2?h=d.ticksdistance:h=s[1],s[0].elementClass===Const.OBJECT_CLASS_LINE||s[0].elementClass===Const.OBJECT_CLASS_CURVE)c=new JXG$1.Ticks(s[0],h,d);else throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof s[0]+"'.");return JXG$1.isFunction(d.generatelabelvalue)&&(c.generateLabelText=d.generatelabelvalue),JXG$1.isFunction(d.generatelabeltext)&&(c.generateLabelText=d.generatelabeltext),c.setParents(s[0]),c.isDraggable=!0,c.fullUpdate(s[0].visPropCalc.visible),c};JXG$1.createHatchmark=function(a,s,o){var c,h,d,b,_,$,j=[],Xt=JXG$1.copyAttributes(o,a.options,"hatch");if(s[0].elementClass!==Const.OBJECT_CLASS_LINE&&s[0].elementClass!==Const.OBJECT_CLASS_CURVE||typeof s[1]!="number")throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof s[0]+"' and '"+typeof s[1]+" and ''"+typeof s[2]+"'.");for(c=s[1],b=Xt.ticksdistance,_=(c-1)*b,d=-_*.5,h=0;h<c;h++)j[h]=d+h*b;return $=a.create("ticks",[s[0],j],Xt),$.elType="hatch",s[0].inherits.push($),$};JXG$1.registerElement("ticks",JXG$1.createTicks);JXG$1.registerElement("hash",JXG$1.createHatchmark);JXG$1.registerElement("hatch",JXG$1.createHatchmark);JXG$1.Ticks;var bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NAMEMAX=256;JXG$1.Util=JXG$1.Util||{};JXG$1.Util.Unzip=function(a){var s,o,c,h,d=[],b=0,_=[],$=new Array(32768),j=0,Xt=!1,Lt=a.length,fr=0,Jr=1,Js=new Array(288),qs=new Array(32),zo=0,js=null,eu=0,Oo=new Array(17),tu=[];Oo[0]=0;function Bo(){return fr<Lt?a[fr++]:-1}function vu(){Jr=1}function t1(){var d1;try{d1=Jr&1,Jr>>=1,Jr===0&&(Jr=Bo(),d1=Jr&1,Jr=Jr>>1|128)}catch(b1){throw console.log("Probably problems on iOS7 with >>"),b1}return d1}function e1(d1){var b1=0,C1=d1;try{for(;C1--;)b1=b1<<1|t1();d1&&(b1=bitReverse[b1]>>8-d1)}catch(g1){throw console.log("Probably problems on iOS7 with >>"),g1}return b1}function r1(){j=0}function a1(d1){$[j++]=d1,d.push(String.fromCharCode(d1)),j===32768&&(j=0)}function i1(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function s1(){for(var d1=!0;d1;){if(Oo[eu]>=h)return-1;if(c[Oo[eu]]===eu)return Oo[eu]++;Oo[eu]++}}function c1(){var d1=js[zo],b1;if(eu===17)return-1;if(zo++,eu++,b1=s1(),b1>=0)d1.b0=b1;else if(d1.b0=32768,c1())return-1;if(b1=s1(),b1>=0)d1.b1=b1,d1.jump=null;else if(d1.b1=32768,d1.jump=js[zo],d1.jumppos=zo,c1())return-1;return eu--,0}function h1(d1,b1,C1,g1){var o1;for(js=d1,zo=0,c=C1,h=b1,o1=0;o1<17;o1++)Oo[o1]=0;return eu=0,c1()?-1:0}function m1(d1){for(var b1,C1,g1,o1=!0,S1=0,v1=d1[S1];o1;)if(g1=t1(),g1){if(!(v1.b1&32768))return v1.b1;for(v1=v1.jump,b1=d1.length,C1=0;C1<b1;C1++)if(d1[C1]===v1){S1=C1;break}}else{if(!(v1.b0&32768))return v1.b0;S1++,v1=d1[S1]}}function l1(){var d1,b1,C1,g1,o1,S1,v1,B1,T1,w1,x1,M1,O1,N1,L1,G1,q1=!0;do if(d1=t1(),C1=e1(2),C1===0)for(vu(),w1=Bo(),w1|=Bo()<<8,M1=Bo(),M1|=Bo()<<8,(w1^~M1)&65535&&JXG$1.debug(`BlockLen checksum mismatch
`);w1--;)b1=Bo(),a1(b1);else if(C1===1)for(;q1;)if(o1=bitReverse[e1(7)]>>1,o1>23?(o1=o1<<1|t1(),o1>199?(o1-=128,o1=o1<<1|t1()):(o1-=48,o1>143&&(o1=o1+136))):o1+=256,o1<256)a1(o1);else{if(o1===256)break;for(o1-=257,T1=e1(cplext[o1])+cplens[o1],o1=bitReverse[e1(5)]>>3,cpdext[o1]>8?(x1=e1(8),x1|=e1(cpdext[o1]-8)<<8):x1=e1(cpdext[o1]),x1+=cpdist[o1],o1=0;o1<T1;o1++)b1=$[j-x1&32767],a1(b1)}else if(C1===2){for(v1=new Array(320),N1=257+e1(5),L1=1+e1(5),G1=4+e1(4),o1=0;o1<19;o1++)v1[o1]=0;for(o1=0;o1<G1;o1++)v1[border[o1]]=e1(3);for(T1=qs.length,g1=0;g1<T1;g1++)qs[g1]=new i1;if(h1(qs,19,v1))return r1(),1;for(O1=N1+L1,g1=0;g1<O1;)if(o1=m1(qs),o1<16)v1[g1++]=o1;else if(o1===16){if(o1=3+e1(2),g1+o1>O1)return r1(),1;for(S1=g1?v1[g1-1]:0;o1--;)v1[g1++]=S1}else{if(o1===17?o1=3+e1(3):o1=11+e1(7),g1+o1>O1)return r1(),1;for(;o1--;)v1[g1++]=0}for(T1=Js.length,g1=0;g1<T1;g1++)Js[g1]=new i1;if(h1(Js,N1,v1))return r1(),1;for(T1=Js.length,g1=0;g1<T1;g1++)qs[g1]=new i1;for(B1=[],g1=N1;g1<v1.length;g1++)B1[g1-N1]=v1[g1];if(h1(qs,L1,B1))return r1(),1;for(;q1;)if(o1=m1(Js),o1>=256){if(o1-=256,o1===0)break;for(o1-=1,T1=e1(cplext[o1])+cplens[o1],o1=m1(qs),cpdext[o1]>8?(x1=e1(8),x1|=e1(cpdext[o1]-8)<<8):x1=e1(cpdext[o1]),x1+=cpdist[o1];T1--;)b1=$[j-x1&32767],a1(b1)}else a1(o1)}while(!d1);return r1(),vu(),0}function f1(){var d1,b1,C1,g1,o1,S1,v1,B1,T1=[];try{if(d=[],Xt=!1,T1[0]=Bo(),T1[1]=Bo(),T1[0]===120&&T1[1]===218&&(l1(),_[b]=[d.join(""),"geonext.gxt"],b++),T1[0]===31&&T1[1]===139&&(p1(),_[b]=[d.join(""),"file"],b++),T1[0]===80&&T1[1]===75){if(Xt=!0,T1[2]=Bo(),T1[3]=Bo(),T1[2]===3&&T1[3]===4){for(T1[0]=Bo(),T1[1]=Bo(),s=Bo(),s|=Bo()<<8,B1=Bo(),B1|=Bo()<<8,Bo(),Bo(),Bo(),Bo(),v1=Bo(),v1|=Bo()<<8,v1|=Bo()<<16,v1|=Bo()<<24,S1=Bo(),S1|=Bo()<<8,S1|=Bo()<<16,S1|=Bo()<<24,o1=Bo(),o1|=Bo()<<8,o1|=Bo()<<16,o1|=Bo()<<24,g1=Bo(),g1|=Bo()<<8,C1=Bo(),C1|=Bo()<<8,d1=0,tu=[];g1--;)b1=Bo(),b1==="/"|b1===":"?d1=0:d1<NAMEMAX-1&&(tu[d1++]=String.fromCharCode(b1));for(o||(o=tu),d1=0;d1<C1;)b1=Bo(),d1++;if(B1===8&&(l1(),_[b]=new Array(2),_[b][0]=d.join(""),_[b][1]=tu.join(""),b++),p1())return!1}return!0}}catch(w1){throw console.log("Probably problems on iOS7 with >>"),w1}return!1}function p1(){var d1,b1,C1,g1,o1,S1=[];if(s&8&&(S1[0]=Bo(),S1[1]=Bo(),S1[2]=Bo(),S1[3]=Bo(),S1[0]===80&&S1[1]===75&&S1[2]===7&&S1[3]===8?(d1=Bo(),d1|=Bo()<<8,d1|=Bo()<<16,d1|=Bo()<<24):d1=S1[0]|S1[1]<<8|S1[2]<<16|S1[3]<<24,b1=Bo(),b1|=Bo()<<8,b1|=Bo()<<16,b1|=Bo()<<24,C1=Bo(),C1|=Bo()<<8,C1|=Bo()<<16,C1|=Bo()<<24),Xt&&f1())return!1;if(S1[0]=Bo(),S1[0]!==8)return!0;if(s=Bo(),Bo(),Bo(),Bo(),Bo(),Bo(),Bo(),s&4)for(S1[0]=Bo(),S1[2]=Bo(),eu=S1[0]+256*S1[1],g1=0;g1<eu;g1++)Bo();if(s&8)for(g1=0,tu=[],o1=Bo();o1;)(o1==="7"||o1===":")&&(g1=0),g1<NAMEMAX-1&&(tu[g1++]=o1),o1=Bo();if(s&16)for(o1=Bo();o1;)o1=Bo();return s&2&&(Bo(),Bo()),l1(),d1=Bo(),d1|=Bo()<<8,d1|=Bo()<<16,d1|=Bo()<<24,C1=Bo(),C1|=Bo()<<8,C1|=Bo()<<16,C1|=Bo()<<24,Xt&&f1(),!1}JXG$1.Util.Unzip.prototype.unzipFile=function(d1){var b1;for(this.unzip(),b1=0;b1<_.length;b1++)if(_[b1][1]===d1)return _[b1][0];return""},JXG$1.Util.Unzip.prototype.unzip=function(){return f1(),_}};JXG$1.Util;JXG$1.CA=function(a,s,o){this.node=a,this.createNode=s,this.parser=o};JXG$1.extend(JXG$1.CA.prototype,{findMapNode:function(a,s){var o,c,h;if(s.value==="op_assign"&&s.children[0].value===a)return s.children[1];if(s.children){for(c=s.children.length,o=0;o<c;++o)if(h=this.findMapNode(a,s.children[o]),h!==null)return h}return null},setMath:function(a){var s,o;if((a.type=="node_op"&&(a.value=="op_add"||a.value=="op_sub"||a.value=="op_mul"||a.value=="op_div"||a.value=="op_neg"||a.value=="op_execfun"||a.value=="op_exp")||a.type=="node_var"||a.type=="node_const")&&(a.isMath=!0),a.children)for(o=a.children.length,s=0;s<o;++s)this.setMath(a.children[s])},deriveElementary:function(a,s){var o=a.children[0].value,c=a.children[1],h;switch(o){case"abs":h=this.createNode("node_op","op_div",c[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0]))]));break;case"sqrt":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(a.type,a.value,JXG$1.deepCopy(a.children[0]),JXG$1.deepCopy(a.children[1]))));break;case"sin":h=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),JXG$1.deepCopy(c));break;case"cos":h=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),JXG$1.deepCopy(c)));break;case"tan":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),JXG$1.deepCopy(c)),this.createNode("node_const",2)));break;case"cot":h=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),JXG$1.deepCopy(c)),this.createNode("node_const",2))));break;case"exp":h=this.createNode(a.type,a.value,JXG$1.deepCopy(a.children[0]),JXG$1.deepCopy(a.children[1]));break;case"pow":h=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",JXG$1.deepCopy(a.children[0]),JXG$1.deepCopy(a.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(a.children[1][0],s),this.createNode("node_op","op_div",JXG$1.deepCopy(a.children[1][1]),JXG$1.deepCopy(a.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(a.children[1][1],s),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[JXG$1.deepCopy(a.children[1][0])]))));break;case"log":case"ln":h=this.createNode("node_op","op_div",this.createNode("node_const",1),JXG$1.deepCopy(c[0]));break;case"log2":case"lb":case"ld":h=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),JXG$1.deepCopy(c[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":h=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),JXG$1.deepCopy(c[0])),this.createNode("node_const",.43429448190325176));break;case"asin":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0])))]));break;case"acos":h=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0])))])));break;case"atan":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0]))));break;case"acot":h=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0])))));break;case"sinh":h=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[JXG$1.deepCopy(c[0])]);break;case"cosh":h=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[JXG$1.deepCopy(c[0])]);break;case"tanh":h=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[JXG$1.deepCopy(c[0])]),this.createNode("node_const",2)));break;case"asinh":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0])),this.createNode("node_const",1))]));break;case"acosh":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0])),this.createNode("node_const",1))]));break;case"atanh":h=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(c[0]),JXG$1.deepCopy(c[0]))));break;default:throw h=this.createNode("node_const",0),console.log('Derivative of "'+o+'" not yet implemented'),new Error("Error("+this.line+"): ")}return h},derivative:function(a,s){var o;switch(a.type){case"node_op":switch(a.value){case"op_execfun":a.children[0].value=="pow"?o=this.deriveElementary(a,s):a.children[1].length===0?o=this.createNode("node_const",0):o=this.createNode("node_op","op_mul",this.deriveElementary(a,s),this.derivative(a.children[1][0],s));break;case"op_div":o=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(a.children[0],s),JXG$1.deepCopy(a.children[1])),this.createNode("node_op","op_mul",JXG$1.deepCopy(a.children[0]),this.derivative(a.children[1],s))),this.createNode("node_op","op_mul",JXG$1.deepCopy(a.children[1]),JXG$1.deepCopy(a.children[1])));break;case"op_mul":o=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",JXG$1.deepCopy(a.children[0]),this.derivative(a.children[1],s)),this.createNode("node_op","op_mul",this.derivative(a.children[0],s),JXG$1.deepCopy(a.children[1])));break;case"op_neg":o=this.createNode("node_op","op_neg",this.derivative(a.children[0],s));break;case"op_add":case"op_sub":o=this.createNode("node_op",a.value,this.derivative(a.children[0],s),this.derivative(a.children[1],s));break;case"op_exp":o=this.createNode("node_op","op_mul",JXG$1.deepCopy(a),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(a.children[0],s),this.createNode("node_op","op_div",JXG$1.deepCopy(a.children[1]),JXG$1.deepCopy(a.children[0]))),this.createNode("node_op","op_mul",this.derivative(a.children[1],s),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[JXG$1.deepCopy(a.children[0])]))));break}break;case"node_var":a.value===s?o=this.createNode("node_const",1):o=this.createNode("node_const",0);break;case"node_const":o=this.createNode("node_const",0);break}return o},expandDerivatives:function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs;if($=0,!a)return $;for(this.line=a.line,this.col=a.col,c=a.children.length,h=0;h<c;++h)if(a.children[h]&&a.children[h].type)a.children[h]=this.expandDerivatives(a.children[h],a,o);else if(JXG$1.isArray(a.children[h]))for(d=0;d<a.children[h].length;++d)a.children[h][d]&&a.children[h][d].type&&(a.children[h][d]=this.expandDerivatives(a.children[h][d],a,o));switch(a.type){case"node_op":switch(a.value){case"op_execfun":if(a.children[0]&&a.children[0].value==="D"){if(qs=!1,a.children[1][0].type=="node_var"&&(Lt=a.children[1][0].value,b=this.findMapNode(Lt,o),b!==null&&(qs=!0)),qs?(Jr=b.children[0],a.children[1].length>=2?fr=a.children[1][1].value:fr=b.children[0][0],_=b.children[1]):(_=a.children[1][0],Jr=["x"],a.children[1].length>=2?fr=a.children[1][1].value:fr="x"),a.children[1].length>=3?Js=a.children[1][2].value:Js=1,Xt=_,Js>=1)for(;Js>=1;)Xt=this.derivative(Xt,fr),Xt=this.removeTrivialNodes(Xt),Js--;s.type=="node_op"&&s.value=="op_assign"?j=this.createNode("node_op","op_map",Jr,Xt):j=Xt,this.setMath(j),a.type=j.type,a.value=j.value,j.children.length>0&&(a.children[0]=j.children[0]),j.children.length>1&&(a.children[1]=j.children[1])}}break}return a},removeTrivialNodes:function(a){var s,o,c,h,d;if(JXG$1.isArray(a))for(o=a.length,s=0;s<o;++s)a[s]=this.removeTrivialNodes(a[s]);if(a.type!="node_op"||!a.children)return a;for(o=a.children.length,s=0;s<o;++s){this.mayNotBeSimplified=!1;do a.children[s]=this.removeTrivialNodes(a.children[s]);while(this.mayNotBeSimplified)}switch(a.value){case"op_map":if(c=a.children[0],h=a.children[1],h.type=="node_var"){for(s=0;s<c.length;++s)if(c[s]==h.value){h.isMath=!0;break}}break;case"op_add":if(c=a.children[0],h=a.children[1],c.type=="node_const"&&c.value===0)return h;if(h.type=="node_const"&&h.value===0)return c;if(c.type=="node_const"&&h.type=="node_const")return c.value+=h.value,c;break;case"op_mul":if(c=a.children[0],h=a.children[1],c.type=="node_const"&&c.value==1)return h;if(h.type=="node_const"&&h.value==1||c.type=="node_const"&&c.value===0)return c;if(h.type=="node_const"&&h.value===0||h.type=="node_const"&&h.value===0)return h;if(c.type=="node_op"&&c.value=="op_neg"&&h.type=="node_op"&&h.value=="op_neg")return a.children=[c.children[0],h.children[0]],this.mayNotBeSimplified=!0,a;if(c.value=="op_neg"&&h.value!="op_neg")return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_mul",c.children[0],h)],this.mayNotBeSimplified=!0,a;if(c.value!="op_neg"&&h.value=="op_neg")return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_mul",c,h.children[0])],this.mayNotBeSimplified=!0,a;if(c.value=="op_div"&&c.children[0].type=="node_const"&&c.children[0].value==1)return a.type="node_op",a.value="op_div",a.children=[h,c.children[1]],this.mayNotBeSimplified=!0,a;if(h.value=="op_div"&&h.children[0].type=="node_const"&&h.children[0].value==1)return a.type="node_op",a.value="op_div",a.children=[c,h.children[1]],this.mayNotBeSimplified=!0,a;if(c.type!="node_const"&&h.type=="node_const")return a.children=[h,c],this.mayNotBeSimplified=!0,a;if(c.type!="node_const"&&h.type=="node_op"&&h.value=="op_neg"&&h.children[0].type=="node_const")return a.children=[h,c],this.mayNotBeSimplified=!0,a;if(c.type=="node_op"&&c.value!="op_execfun"&&(h.type=="node_var"||h.type=="node_op"&&h.value=="op_execfun"))return a.children=[h,c],this.mayNotBeSimplified=!0,a;if(c.type!="node_op"&&h.type=="node_op"&&h.value=="op_neg"&&h.children[0].type=="node_var")return a.children=[h,c],this.mayNotBeSimplified=!0,a;if(c.type!="node_const"&&h.type=="node_op"&&(h.value=="op_mul"||h.value=="op_div")&&h.children[0].type=="node_const")return d=h.children[0],h.children[0]=c,a.children=[d,h],this.mayNotBeSimplified=!0,a;if(h.type!="node_const"&&c.type=="node_op"&&c.value=="op_mul"&&c.children[0].type=="node_const")return a.children=[c.children[0],this.createNode("node_op","op_mul",c.children[1],h)],this.mayNotBeSimplified=!0,a;if(c.type=="node_const"&&h.type=="node_const")return c.value*=h.value,c;if(c.type=="node_const"&&h.type=="node_op"&&(h.value=="op_mul"||h.value=="op_div")&&h.children[0].type=="node_const")return h.children[0].value*=c.value,h;if(c.hash=this.parser.compile(c),h.hash=this.parser.compile(h),c.hash===h.hash)return a.value="op_exp",a.children[1]=this.createNode("node_const",2),a;if(c.type=="node_const"&&h.type=="node_op"&&(h.value=="op_mul"||h.value=="op_div")&&h.children[0].type=="node_const")return h.children[0].value*=c.value,h;if(h.type=="node_op"&&h.value=="op_exp"&&(c.hash||(c.hash=this.parser.compile(c)),h.children[0].hash||(h.children[0].hash=this.parser.compile(h.children[0])),c.hash===h.children[0].hash))return h.children[1]=this.createNode("node_op","op_add",h.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,h;if(c.type=="node_op"&&c.value=="op_exp"&&h.type=="node_op"&&h.value=="op_exp"&&(c.children[0].hash=this.parser.compile(c.children[0]),h.children[0].hash=this.parser.compile(h.children[0]),c.children[0].hash===h.children[0].hash))return c.children[1]=this.createNode("node_op","op_add",c.children[1],h.children[1]),this.mayNotBeSimplified=!0,c;break;case"op_sub":if(c=a.children[0],h=a.children[1],c.type=="node_const"&&c.value===0)return a.value="op_neg",a.children[0]=h,a;if(h.type=="node_const"&&h.value===0)return c;if(c.type=="node_const"&&h.type=="node_const"&&c.value==h.value)return this.createNode("node_const",0);if(c.type=="node_var"&&h.type=="node_var"&&c.value==h.value)return this.createNode("node_const",0);if(c.type=="node_const"&&h.type=="node_const")return c.value-=h.value,c;if(c.type=="node_op"&&c.value=="op_mul"&&h.type=="node_op"&&h.value=="op_mul"&&(c.children[1].hash=this.parser.compile(c.children[1]),h.children[1].hash=this.parser.compile(h.children[1]),c.children[1].hash===h.children[1].hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_sub",c.children[0],h.children[0]),c.children[1]],this.mayNotBeSimplified=!0,a;if(c.type=="node_op"&&c.value=="op_mul"&&(c.children[1].hash=this.parser.compile(c.children[1]),h.hash=this.parser.compile(h),c.children[1].hash===h.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_sub",c.children[0],this.createNode("node_const",1)),h],this.mayNotBeSimplified=!0,a;if(h.type=="node_op"&&h.value=="op_mul"&&(h.children[1].hash=this.parser.compile(h.children[1]),c.hash=this.parser.compile(c),h.children[1].hash===c.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),h.children[0]),c],this.mayNotBeSimplified=!0,a;break;case"op_neg":if(c=a.children[0],c.type=="node_const"&&c.value===0)return c;if(c.type=="node_op"&&c.value=="op_neg")return c.children[0];break;case"op_div":if(c=a.children[0],h=a.children[1],c.type=="node_const"&&h.type=="node_const"&&c.value==h.value&&c.value!==0)return c.value=1,c;if(c.type=="node_const"&&c.value===0&&h.type=="node_const"&&h.value!==0)return c.value=0,c;if(c.type=="node_const"&&c.value===0&&(h.type=="node_op"||h.type=="node_var"))return a.type="node_const",a.value=0,a;if(c.type=="node_var"&&h.type=="node_var"&&c.value==h.value)return this.createNode("node_const",1);if(c.type=="node_const"&&c.value!==0&&h.type=="node_const"&&h.value===0)return c.value>0?c.value=1/0:c.value=-1/0,c;if(c.type=="node_op"&&c.value=="op_neg"&&h.type=="node_op"&&h.value=="op_neg")return a.children=[c.children[0],h.children[0]],this.mayNotBeSimplified=!0,a;if(c.value=="op_neg"&&h.value!="op_neg")return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_div",c.children[0],h)],this.mayNotBeSimplified=!0,a;if(c.value!="op_neg"&&h.value=="op_neg")return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_div",c,h.children[0])],this.mayNotBeSimplified=!0,a;if(c.type=="node_op"&&c.value=="op_exp"&&(h.hash||(h.hash=this.parser.compile(h)),c.children[0].hash||(c.children[0].hash=this.parser.compile(c.children[0])),h.hash===c.children[0].hash))return c.children[1]=this.createNode("node_op","op_sub",c.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,c;if(h.type!="node_const"&&c.type=="node_op"&&c.value=="op_mul"&&c.children[0].type=="node_const")return a.value="op_mul",a.children=[c.children[0],this.createNode("node_op","op_div",c.children[1],h)],this.mayNotBeSimplified=!0,a;if(c.type=="node_op"&&c.value=="op_exp"&&h.type=="node_op"&&h.value=="op_exp"&&(c.children[0].hash=this.parser.compile(c.children[0]),h.children[0].hash=this.parser.compile(h.children[0]),c.children[0].hash===h.children[0].hash))return c.children[1]=this.createNode("node_op","op_sub",c.children[1],h.children[1]),this.mayNotBeSimplified=!0,c;break;case"op_exp":if(c=a.children[0],h=a.children[1],h.type=="node_const"&&h.value===0)return h.value=1,h;if(h.type=="node_const"&&h.value==1||c.type=="node_const"&&c.value==1||c.type=="node_const"&&c.value===0&&h.type=="node_const"&&h.value!==0)return c;if(c.type=="node_op"&&c.value=="op_exp")return a.children=[c.children[0],this.createNode("node_op","op_mul",c.children[1],h)],a;break}switch(a.value){case"op_add":if(c=a.children[0],h=a.children[1],c.type=="node_const"&&h.type=="node_const"&&c.value==h.value)return c.value+=h.value,c;if(c.type=="node_var"&&h.type=="node_var"&&c.value==h.value)return a.children[0]=this.createNode("node_const",2),a.value="op_mul",a;if(c.type=="node_op"&&c.value=="op_neg")return a.value="op_sub",a.children[0]=h,a.children[1]=c.children[0],this.mayNotBeSimplified=!0,a;if(h.type=="node_op"&&h.value=="op_neg")return a.value="op_sub",a.children[1]=h.children[0],this.mayNotBeSimplified=!0,a;if(c.type=="node_op"&&c.value=="op_mul"&&h.type=="node_op"&&h.value=="op_mul"&&(c.children[1].hash=this.parser.compile(c.children[1]),h.children[1].hash=this.parser.compile(h.children[1]),c.children[1].hash===h.children[1].hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_add",c.children[0],h.children[0]),c.children[1]],this.mayNotBeSimplified=!0,a;if(c.type=="node_op"&&c.value=="op_mul"&&(c.children[1].hash=this.parser.compile(c.children[1]),h.hash=this.parser.compile(h),c.children[1].hash===h.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_add",c.children[0],this.createNode("node_const",1)),h],this.mayNotBeSimplified=!0,a;if(h.type=="node_op"&&h.value=="op_mul"&&(h.children[1].hash=this.parser.compile(h.children[1]),c.hash=this.parser.compile(c),h.children[1].hash===c.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),h.children[0]),c],this.mayNotBeSimplified=!0,a;break;case"op_sub":if(c=a.children[0],h=a.children[1],h.type=="node_op"&&h.value=="op_neg")return a.value="op_add",a.children[1]=h.children[0],this.mayNotBeSimplified=!0,a;break;case"op_execfun":return this.simplifyElementary(a)}return a},simplifyElementary:function(a){var s=a.children[0].value,o=a.children[1];if(o.length==0)return a;switch(s){case"sin":case"tan":if(o[0].type=="node_const"&&o[0].value===0||o[0].type=="node_var"&&o[0].value=="PI"||o[0].type=="node_op"&&o[0].value=="op_mul"&&o[0].children[0].type=="node_const"&&o[0].children[0].value%1===0&&o[0].children[1].type=="node_var"&&o[0].children[1].value=="PI")return a.type="node_const",a.value=0,a;break;case"cos":if(o[0].type=="node_const"&&o[0].value===0)return a.type="node_const",a.value=1,a;if(o[0].type=="node_var"&&o[0].value=="PI")return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_const",1)],a;break;case"exp":if(o[0].type=="node_const"&&o[0].value===0)return a.type="node_const",a.value=1,a;break;case"pow":if(o[1].type=="node_const"&&o[1].value===0)return a.type="node_const",a.value=1,a;break}return a}});JXG$1.CA;JXG$1.Dump={addMarkers:function(a,s,o){var c,h,d;JXG$1.isArray(s)||(s=[s]),JXG$1.isArray(o)||(o=[o]),h=Math.min(s.length,o.length),s.length=h,o.length=h;for(c in a.objects)if(a.objects.hasOwnProperty(c))for(d=0;d<h;d++)a.objects[c][s[d]]=o[d]},deleteMarkers:function(a,s){var o,c,h;JXG$1.isArray(s)||(s=[s]),c=s.length,s.length=c;for(o in a.objects)if(a.objects.hasOwnProperty(o))for(h=0;h<c;h++)delete a.objects[o][s[h]]},str:function(a){return typeof a=="string"&&a.slice(0,7)!=="function"&&(a='"'+a+'"'),a},minimizeObject:function(a,s){var o,c,h,d={},b=JXG$1.deepCopy(a),_=[];for(h=1;h<arguments.length;h++)_.push(arguments[h]);for(d=JXG$1.deepCopy(d,JXG$1.Options.elements,!0),h=_.length;h>0;h--)d=JXG$1.deepCopy(d,_[h-1],!0);for(o in d)d.hasOwnProperty(o)&&(c=o.toLowerCase(),d[o]!==null&&typeof d[o]!="object"&&d[o]===b[c]&&delete b[c]);return b},prepareAttributes:function(a,s){var o,c;o=this.minimizeObject(s.getAttributes(),JXG$1.Options[s.elType]);for(c in s.subs)s.subs.hasOwnProperty(c)&&(o[c]=this.minimizeObject(s.subs[c].getAttributes(),JXG$1.Options[s.elType][c],JXG$1.Options[s.subs[c].elType]),o[c].id=s.subs[c].id,o[c].name=s.subs[c].name);return o.id=s.id,o.name=s.name,o},setBoundingBox:function(a,s,o){return a.push({obj:o,method:"setBoundingBox",params:[s.getBoundingBox(),s.keepaspectratio]}),a},dump:function(a){var s,o,c,h,d=[],b=[],_=[],$=a.objectsList.length;for(this.addMarkers(a,"dumped",!1),s=0;s<$;s++)if(o=a.objectsList[s],c={},!o.dumped&&o.dump){for(c.type=o.getType(),c.parents=o.getParents().slice(),c.type==="point"&&c.parents[0]===1&&(c.parents=c.parents.slice(1)),h=0;h<c.parents.length;h++)JXG$1.isString(c.parents[h])&&c.parents[h][0]!=="'"&&c.parents[h][0]!=='"'?c.parents[h]='"'+c.parents[h]+'"':JXG$1.isArray(c.parents[h])&&(c.parents[h]="["+c.parents[h].toString()+"]");c.attributes=this.prepareAttributes(a,o),c.type==="glider"&&o.onPolygon&&d.push({obj:o.id,prop:"onPolygon",val:!0}),_.push(c)}return this.deleteMarkers(a,"dumped"),{elements:_,props:d,methods:b}},arrayToParamStr:function(a,s){var o,c=[];for(o=0;o<a.length;o++)c.push(s.call(this,a[o]));return c.join(", ")},toJCAN:function(a){var s,o,c;switch(typeof a){case"object":if(a){if(o=[],JXG$1.isArray(a)){for(s=0;s<a.length;s++)o.push(this.toJCAN(a[s]));return"["+o.join(",")+"]"}for(c in a)a.hasOwnProperty(c)&&o.push(c+": "+this.toJCAN(a[c]));return"<<"+o.join(", ")+">> "}return"null";case"string":return"'"+a.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return a.toString();case"null":return"null"}},toJessie:function(a){var s,o,c,h=this.dump(a),d=[];for(h.methods=this.setBoundingBox(h.methods,a,"$board"),o=h.elements,s=0;s<o.length;s++)o[s].attributes.name.length>0&&d.push("// "+o[s].attributes.name),d.push("s"+s+" = "+o[s].type+"("+o[s].parents.join(", ")+") "+this.toJCAN(o[s].attributes).replace(/\n/,"\\n")+";"),o[s].type==="axis"&&(c=o[s].attributes.id,a.objects[c].defaultTicks===null&&d.push("s"+s+".removeAllTicks();")),d.push("");for(s=0;s<h.methods.length;s++)d.push(h.methods[s].obj+"."+h.methods[s].method+"("+this.arrayToParamStr(h.methods[s].params,this.toJCAN)+");"),d.push("");for(s=0;s<h.props.length;s++)d.push(h.props[s].obj+"."+h.props[s].prop+" = "+this.toJCAN(h.props[s].val)+";"),d.push("");return d.join(`
`)},toJavaScript:function(a){var s,o,c,h=this.dump(a),d=[];for(h.methods=this.setBoundingBox(h.methods,a,"board"),o=h.elements,s=0;s<o.length;s++)d.push('board.create("'+o[s].type+'", ['+o[s].parents.join(", ")+"], "+JXG$1.toJSON(o[s].attributes)+");"),o[s].type==="axis"&&(c=o[s].attributes.id,a.objects[c].defaultTicks===null&&d.push('board.objects["'+c+'"].removeTicks(board.objects["'+c+'"].defaultTicks);'));for(s=0;s<h.methods.length;s++)d.push(h.methods[s].obj+"."+h.methods[s].method+"("+this.arrayToParamStr(h.methods[s].params,JXG$1.toJSON)+");"),d.push("");for(s=0;s<h.props.length;s++)d.push(h.props[s].obj+"."+h.props[s].prop+" = "+JXG$1.toJSON(h.props[s].val)+";"),d.push("");return d.join(`
`)}};JXG$1.Dump;JXG$1.createComb=function(a,s,o){var c,h,d,b,_;if(s.length===2){if(JXG$1.isArray(s[0])&&s[0].length>1)b=JXG$1.copyAttributes(o,a.options,"comb","point1"),c=a.create("point",s[0],b);else if(JXG$1.isString(s[0])||JXG$1.isPoint(s[0]))c=a.select(s[0]);else if(JXG$1.isFunction(s[0])&&JXG$1.isPoint(s[0]()))c=s[0]();else if(JXG$1.isFunction(s[0])&&s[0]().length&&s[0]().length>=2)b=JXG$1.copyAttributes(o,a.options,"comb","point1"),c=JXG$1.createPoint(a,s[0](),b);else throw new Error("JSXGraph: Can't create comb with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);if(JXG$1.isArray(s[1])&&s[1].length>1)b=JXG$1.copyAttributes(o,a.options,"comb","point2"),h=a.create("point",s[1],b);else if(JXG$1.isString(s[1])||JXG$1.isPoint(s[1]))h=a.select(s[1]);else if(JXG$1.isFunction(s[1])&&JXG$1.isPoint(s[1]()))h=s[1]();else if(JXG$1.isFunction(s[1])&&s[1]().length&&s[1]().length>=2)b=JXG$1.copyAttributes(o,a.options,"comb","point2"),h=JXG$1.createPoint(a,s[1](),b);else throw new Error("JSXGraph: Can't create comb with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`)}else throw _=s.map(function($){return"'"+typeof $+"'"}),new Error("JSXGraph: Can't create comb with parent types "+_.join(", ")+`.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);return b=JXG$1.copyAttributes(o,a.options,"comb"),d=a.create("curve",[[0],[0]],b),d.updateDataArray=function(){var $=0,j=c.Dist(h),Xt,Lt,fr,Jr,Js,qs,zo,js=c,eu=h,Oo,tu,Bo;for(Oo=d.evalVisProp("frequency"),tu=-d.evalVisProp("angle"),Bo=d.evalVisProp("width"),d.evalVisProp("reverse")&&(js=h,eu=c,tu=-tu),Xt=Math.cos(tu),Lt=Math.sin(tu),fr=(eu.X()-js.X())/j,Jr=(eu.Y()-js.Y())/j,Xt*=Bo/Math.abs(Lt),Lt*=Bo/Math.abs(Lt),this.dataX=[],this.dataY=[];$<j;)Js=js.X()+fr*$,qs=js.Y()+Jr*$,zo=Math.min(Xt,j-$)/Math.abs(Xt),Lt*=zo,Xt*=zo,this.dataX.push(Js),this.dataY.push(qs),this.dataX.push(Js+fr*Xt+Jr*Lt),this.dataY.push(qs-fr*Lt+Jr*Xt),this.dataX.push(NaN),this.dataY.push(NaN),$+=Oo},d};JXG$1.registerElement("comb",JXG$1.createComb);var priv$3={removeSlopeTriangle:function(){Polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()},Direction:function(){return this.tangent.Direction()}};JXG$1.createSlopeTriangle=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr=!1;if(s.length===1&&s[0].type===Const.OBJECT_TYPE_TANGENT)h=s[0],d=h.glider;else if(s.length===1&&s[0].type===Const.OBJECT_TYPE_GLIDER)d=s[0],Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle","tangent"),h=a.create("tangent",[d],Lt),fr=!0;else if(s.length===2&&s[0].elementClass===Const.OBJECT_CLASS_LINE&&JXG$1.isPoint(s[1]))h=s[0],d=s[1];else throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof s[0]+"'.");return Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle","basepoint"),j=a.create("point",[function(){return[d.X()+1,d.Y()]}],Lt),Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle","baseline"),$=a.create("line",[d,j],Lt),Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle","glider"),b=a.create("glider",[d.X()+1,d.Y(),$],Lt),Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle","toppoint"),_=a.create("point",[function(){return[b.X(),b.Y()+(b.X()-d.X())*h.getSlope()]}],Lt),Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle"),c=a.create("polygon",[d,b,_],Lt),c.Value=priv$3.Value,c.Direction=priv$3.Direction,c.tangent=h,c._isPrivateTangent=fr,c.borders[2].setArrow(!1,!1),Lt=JXG$1.copyAttributes(o,a.options,"slopetriangle","label"),Lt=JXG$1.copyAttributes(Lt,a.options,"label"),Lt.isLabel=!0,Lt.anchor=c.borders[1],Lt.priv=c.borders[1].visProp.priv,Lt.id=c.borders[1].id+"Label",Xt=a.create("text",[0,0,function(){return""}],Lt),Xt.needsUpdate=!0,Xt.dump=!1,c.borders[1].label=Xt,c.borders[1].hasLabel=!0,c.borders[1].visProp.withlabel=!0,Xt._setText(function(){var Jr=Xt.evalVisProp("digits");return Xt.useLocale()?Xt.formatNumberLocale(c.Value(),Jr):JXG$1.toFixed(c.Value(),Jr)}),Xt.fullUpdate(),c.glider=b,c.basepoint=j,c.baseline=$,c.toppoint=_,c.label=Xt,c.subs={glider:b,basePoint:j,baseLine:$,topPoint:_,label:Xt},c.inherits.push(b,j,$,_,Xt),c.methodMap=JXG$1.deepCopy(c.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value",Direction:"Direction"}),c.remove=priv$3.removeSlopeTriangle,c};JXG$1.registerElement("slopetriangle",JXG$1.createSlopeTriangle);var priv$2={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};JXG$1.createCheckbox=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"checkbox");return h=[s[0],s[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],c=a.create("text",h,d),c.type=JXG$1.OBJECT_TYPE_CHECKBOX,c.rendNodeCheckbox=c.rendNode.childNodes[0].childNodes[0],c.rendNodeLabel=c.rendNode.childNodes[0].childNodes[1],c.rendNodeTag=c.rendNodeCheckbox,c.rendNodeTag.disabled=!!d.disabled,c.rendNodeCheckbox.id=c.rendNode.id+"_checkbox",c.rendNodeLabel.id=c.rendNode.id+"_label",c.rendNodeLabel.setAttribute("for",c.rendNodeCheckbox.id),c.setText(s[2]),c.visPropOld.fontsize="0px",a.renderer.updateTextStyle(c,!1),c.rendNodeCheckbox.checked=d.checked,c._value=d.checked,c.Value=function(){return this._value},c.update=function(){return this.needsUpdate&&(JXG$1.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},JXG$1.addEvent(c.rendNodeCheckbox,"change",priv$2.CheckboxChangeEventHandler,c),c};JXG$1.registerElement("checkbox",JXG$1.createCheckbox);var priv$1={InputInputEventHandler:function(a){this._value=this.rendNodeInput.value,this.board.update()}};JXG$1.createInput=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"input");return h=[s[0],s[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><label></label><input type="text" maxlength="'+d.maxlength+'" style="width:100%" /></span>'],c=a.create("text",h,d),c.type=JXG$1.OBJECT_TYPE_INPUT,c.rendNodeLabel=c.rendNode.childNodes[0].childNodes[0],c.rendNodeInput=c.rendNode.childNodes[0].childNodes[1],c.rendNodeInput.value=s[2],c.rendNodeTag=c.rendNodeInput,c.rendNodeTag.disabled=!!d.disabled,c.rendNodeLabel.id=c.rendNode.id+"_label",c.rendNodeInput.id=c.rendNode.id+"_input",c.rendNodeInput.setAttribute("aria-labelledby",c.rendNodeLabel.id),c.setText(s[3]),c._value=s[2],c.rendNodeInput.addEventListener("keydown",b=>{(b.key==="ArrowLeft"||b.key==="ArrowRight")&&b.stopPropagation()}),c.update=function(){return this.needsUpdate&&(JXG$1.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},c.Value=function(){return this._value},c.set=function(b){return this._value=b,this.rendNodeInput.value=b,this},JXG$1.addEvent(c.rendNodeInput,"input",priv$1.InputInputEventHandler,c),JXG$1.addEvent(c.rendNodeInput,"mousedown",function(b){JXG$1.exists(b.stopPropagation)&&b.stopPropagation()},c),JXG$1.addEvent(c.rendNodeInput,"touchstart",function(b){JXG$1.exists(b.stopPropagation)&&b.stopPropagation()},c),JXG$1.addEvent(c.rendNodeInput,"pointerdown",function(b){JXG$1.exists(b.stopPropagation)&&b.stopPropagation()},c),c.visPropOld.fontsize="0px",a.renderer.updateTextStyle(c,!1),c};JXG$1.registerElement("input",JXG$1.createInput);var priv={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};JXG$1.createButton=function(a,s,o){var c,h,d=JXG$1.copyAttributes(o,a.options,"button");return h=[s[0],s[1],'<button type="button" style="width:100%; height:100%;" tabindex="0"></button>'],c=a.create("text",h,d),c.type=JXG$1.OBJECT_TYPE_BUTTON,c.rendNodeButton=c.rendNode.childNodes[0],c.rendNodeButton.id=c.rendNode.id+"_button",c.rendNodeTag=c.rendNodeButton,c.rendNodeTag.disabled=!!d.disabled,c.setText(s[2]),c.visPropOld.fontsize="0px",a.renderer.updateTextStyle(c,!1),s[3]&&(JXG$1.isString(s[3])?(c._jc=new JXG$1.JessieCode,c._jc.use(a),c._handler=function(){c._jc.parse(s[3])}):c._handler=s[3]),JXG$1.addEvent(c.rendNodeButton,"click",priv.ButtonClickEventHandler,c),JXG$1.addEvent(c.rendNodeButton,"mousedown",function(b){JXG$1.exists(b.stopPropagation)&&b.stopPropagation()},c),JXG$1.addEvent(c.rendNodeButton,"touchstart",function(b){JXG$1.exists(b.stopPropagation)&&b.stopPropagation()},c),JXG$1.addEvent(c.rendNodeButton,"pointerdown",function(b){JXG$1.exists(b.stopPropagation)&&b.stopPropagation()},c),c};JXG$1.registerElement("button",JXG$1.createButton);JXG$1.createVectorField=function(a,s,o){var c,h;if(!(s.length>=3&&(JXG$1.isArray(s[0])||JXG$1.isFunction(s[0])||JXG$1.isString(s[0]))&&JXG$1.isArray(s[1])&&s[1].length===3&&JXG$1.isArray(s[2])&&s[2].length===3))throw new Error("JSXGraph: Can't create vector field with parent types '"+typeof s[0]+"', '"+typeof s[1]+"', '"+typeof s[2]+"'.");return h=JXG$1.copyAttributes(o,a.options,"vectorfield"),c=a.create("curve",[[],[]],h),c.elType="vectorfield",c.setF=function(d,b){var _,$;return JXG$1.isArray(d)?(_=JXG$1.createFunction(d[0],this.board,b),$=JXG$1.createFunction(d[1],this.board,b),this.F=function(j,Xt){return[_(j,Xt),$(j,Xt)]}):this.F=JXG$1.createFunction(d,c.board,b),this},c.setF(s[0],"x, y"),c.xData=s[1],c.yData=s[2],c.updateDataArray=function(){var d,b,_,$,j=this.evalVisProp("scale"),Xt=JXG$1.evaluate(this.xData[0]),Lt=JXG$1.evaluate(this.xData[1]),fr=JXG$1.evaluate(this.xData[2]),Jr=(fr-Xt)/Lt,Js=JXG$1.evaluate(this.yData[0]),qs=JXG$1.evaluate(this.yData[1]),zo=JXG$1.evaluate(this.yData[2]),js=(zo-Js)/qs,eu,Oo,tu,Bo,vu=this.evalVisProp("arrowhead.enabled"),t1,e1,r1,a1;for(vu&&(t1=this.evalVisProp("arrowhead.size"),e1=t1/a.unitX,r1=t1/a.unitY,a1=this.evalVisProp("arrowhead.angle")),this.dataX=[],this.dataY=[],_=0,d=Xt;_<=Lt;d+=Jr,_++)for($=0,b=Js;$<=qs;b+=js,$++)eu=this.F(d,b),eu[0]*=j,eu[1]*=j,JXG$1.concat(this.dataX,[d,d+eu[0],NaN]),JXG$1.concat(this.dataY,[b,b+eu[1],NaN]),vu&&Math.abs(eu[0])+Math.abs(eu[1])>0&&(Oo=Math.atan2(eu[1],eu[0]),tu=Oo+a1,Bo=Oo-a1,JXG$1.concat(this.dataX,[d+eu[0]-Math.cos(tu)*e1,d+eu[0],d+eu[0]-Math.cos(Bo)*e1,NaN]),JXG$1.concat(this.dataY,[b+eu[1]-Math.sin(tu)*r1,b+eu[1],b+eu[1]-Math.sin(Bo)*r1,NaN]))},c.methodMap=JXG$1.deepCopy(c.methodMap,{setF:"setF"}),c};JXG$1.registerElement("vectorfield",JXG$1.createVectorField);JXG$1.createSlopeField=function(a,s,o){var c,h,d;if(!(s.length>=3&&(JXG$1.isFunction(s[0])||JXG$1.isString(s[0]))&&JXG$1.isArray(s[1])&&s[1].length===3&&JXG$1.isArray(s[2])&&s[2].length===3))throw new Error("JSXGraph: Can't create slope field with parent types '"+typeof s[0]+"', '"+typeof s[1]+"', '"+typeof s[2]+"'.");return h=JXG$1.createFunction(s[0],a,"x, y"),s[0]=function(b,_){var $=h(b,_),j=Math.sqrt(1+$*$);return[1/j,$/j]},d=JXG$1.copyAttributes(o,a.options,"slopefield"),c=a.create("vectorfield",s,d),c.elType="slopefield",c.setF=function(b,_){var $=JXG$1.createFunction(b,c.board,_);this.F=function(j,Xt){var Lt=$(j,Xt),fr=Math.sqrt(1+Lt*Lt);return[1/fr,Lt/fr]}},c.methodMap=JXG$1.deepCopy(c.methodMap,{setF:"setF"}),c};JXG$1.registerElement("slopefield",JXG$1.createSlopeField);JXG$1.createSmartLabel=function(a,s,o){var c,h,d,b,_,$;if(s.length===0||[Const.OBJECT_CLASS_POINT,Const.OBJECT_CLASS_LINE,Const.OBJECT_CLASS_CIRCLE].indexOf(s[0].elementClass)<0&&[Const.OBJECT_TYPE_POLYGON,Const.OBJECT_TYPE_ANGLE].indexOf(s[0].type)<0)throw new Error("JSXGraph: Can't create smartlabel with parent types '"+typeof s[0]+"', '"+typeof s[1]+"'.");return d=s[0],b=s[1]||"",d.elementClass===Const.OBJECT_CLASS_POINT?h=JXG$1.copyAttributes(o,a.options,"smartlabelpoint"):d.elementClass===Const.OBJECT_CLASS_LINE?(h=JXG$1.copyAttributes(o,a.options,"smartlabelline"),h.rotate=function(){return Math.atan(d.getSlope())*180/Math.PI},h.visible=function(){return!(d.L()<1.5)}):d.elementClass===Const.OBJECT_CLASS_CIRCLE?(h=JXG$1.copyAttributes(o,a.options,"smartlabelcircle"),h.visible=function(){return!(d.Radius()<1.5)}):d.type===Const.OBJECT_TYPE_POLYGON?h=JXG$1.copyAttributes(o,a.options,"smartlabelpolygon"):d.type===Const.OBJECT_TYPE_ANGLE&&(h=JXG$1.copyAttributes(o,a.options,"smartlabelangle"),h.rotate=function(){var j=d.center.coords.usrCoords,Xt=d.getLabelAnchor().usrCoords,Lt=Math.atan2(Xt[2]-j[2],Xt[1]-j[1])*180/Math.PI;return Lt>90&&Lt<270?Lt+180:Lt},h.anchorX=function(){var j=d.center.coords.usrCoords,Xt=d.getLabelAnchor().usrCoords,Lt=Math.atan2(Xt[2]-j[2],Xt[1]-j[1])*180/Math.PI;return Lt>90&&Lt<270?"right":"left"}),_=function(j,Xt,Lt,fr){var Jr;switch(fr){case"length":Jr=function(){return Xt.L()};break;case"slope":Jr=function(){return Xt.Slope()};break;case"area":Jr=function(){return Xt.Area()};break;case"radius":Jr=function(){return Xt.Radius()};break;case"perimeter":Jr=function(){return Xt.Perimeter()};break;case"rad":Jr=function(){return Xt.Value()};break;case"deg":Jr=function(){return Xt.Value()*180/Math.PI};break;default:Jr=function(){return 0}}return function(){var Js="",qs,zo=JXG$1.evaluate(b),js=j.evalVisProp("digits"),eu=j.evalVisProp("unit"),Oo=j.evalVisProp("prefix"),tu=j.evalVisProp("suffix"),Bo=j.evalVisProp("usemathjax")||j.evalVisProp("usekatex");return zo===""?(j.useLocale()?qs=j.formatNumberLocale(Jr(),js):qs=JXG$1.toFixed(Jr(),js),Bo?Js=["\\(",Oo,qs,"\\,",eu,tu,"\\)"].join(""):Js=[Oo,qs,eu,tu].join("")):Js=zo,Js}},d.elementClass===Const.OBJECT_CLASS_POINT?(c=a.create("text",[function(){return d.X()},function(){return d.Y()},""],h),$=function(){var j="",Xt=JXG$1.evaluate(b),Lt=c.evalVisProp("digits"),fr=c.evalVisProp("unit"),Jr=c.evalVisProp("prefix"),Js=c.evalVisProp("suffix"),qs=c.evalVisProp("dir"),zo=c.evalVisProp("usemathjax")||c.evalVisProp("usekatex"),js,eu;return c.useLocale()?(js=c.formatNumberLocale(d.X(),Lt),eu=c.formatNumberLocale(d.Y(),Lt)):(js=JXG$1.toFixed(d.X(),Lt),eu=JXG$1.toFixed(d.Y(),Lt)),Xt===""?qs==="row"?zo?j=["\\(",Jr,js,"\\,",fr," / ",eu,"\\,",fr,Js,"\\)"].join(""):j=[Jr,js," ",fr," / ",eu," ",fr,Js].join(""):qs.indexOf("col")===0&&(zo?j=["\\(",Jr,"\\left(\\array{",js,"\\,",fr,"\\\\ ",eu,"\\,",fr,"}\\right)",Js,"\\)"].join(""):j=[Jr,js," ",fr,"<br />",eu," ",fr,Js].join("")):j=Xt,j}):d.elementClass===Const.OBJECT_CLASS_LINE?h.measure==="length"?(c=a.create("text",[function(){return(d.point1.X()+d.point2.X())*.5},function(){return(d.point1.Y()+d.point2.Y())*.5},""],h),$=_(c,d,"line","length")):h.measure==="slope"&&(c=a.create("text",[function(){return d.point1.X()*.25+d.point2.X()*.75},function(){return d.point1.Y()*.25+d.point2.Y()*.75},""],h),$=_(c,d,"line","slope")):d.elementClass===Const.OBJECT_CLASS_CIRCLE?h.measure==="radius"?(c=a.create("text",[function(){return d.center.X()+d.Radius()*.5},function(){return d.center.Y()},""],h),$=_(c,d,"circle","radius")):h.measure==="area"?(c=a.create("text",[function(){return d.center.X()},function(){return d.center.Y()+d.Radius()*.5},""],h),$=_(c,d,"circle","area")):(h.measure==="circumference"||h.measure==="perimeter")&&(c=a.create("text",[function(){return d.getLabelAnchor()},""],h),$=_(c,d,"circle","perimeter")):d.type===Const.OBJECT_TYPE_POLYGON?h.measure==="area"?(c=a.create("text",[function(){return d.getTextAnchor()},""],h),$=_(c,d,"polygon","area")):h.measure==="perimeter"&&(c=a.create("text",[function(){var j=d.borders.length-1;return j>=0?[(d.borders[j].point1.X()+d.borders[j].point2.X())*.5,(d.borders[j].point1.Y()+d.borders[j].point2.Y())*.5]:d.getTextAnchor()},""],h),$=_(c,d,"polygon","perimeter")):d.type===Const.OBJECT_TYPE_ANGLE&&(c=a.create("text",[function(){return d.getLabelAnchor()},""],h),$=_(c,d,"angle",h.measure)),JXG$1.exists(c)&&(c.setText($),d.addChild(c),c.setParents([d])),c};JXG$1.registerElement("smartlabel",JXG$1.createSmartLabel);JXG$1.ForeignObject=function(a,s,o,c,h){this.constructor(a,o,Const.OBJECT_TYPE_FOREIGNOBJECT,Const.OBJECT_CLASS_OTHER),this.element=this.board.select(o.anchor),this.coordsConstructor(s),this._useUserSize=!1,this.size=[1,1],JXG$1.exists(h)&&h.length>0&&(this._useUserSize=!0,this.W=JXG$1.createFunction(h[0],this.board,""),this.H=JXG$1.createFunction(h[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=c,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=JXG$1.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H"})};JXG$1.ForeignObject.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.ForeignObject,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.ForeignObject.prototype,{hasPoint:function(a,s){var o,c,h,d,b,_,$,j,Xt,Lt=this.transformations.length;return JXG$1.isObject(this.evalVisProp("precision"))?(d=this.board._inputDevice,b=this.evalVisProp("precision."+d)):b=this.board.options.precision.hasPoint,Lt===0?(o=a-this.coords.scrCoords[1],c=this.coords.scrCoords[2]-s,h=b,o>=-h&&o-this.size[0]<=h&&c>=-h&&c-this.size[1]<=h):(_=new Coords(Const.COORDS_BY_SCREEN,[a,s],this.board),_=_.usrCoords,$=[_[0]-this.span[0][0],_[1]-this.span[0][1],_[2]-this.span[0][2]],Xt=Mat.innerProduct,j=Xt($,this.span[1]),0<=j&&j<=Xt(this.span[1],this.span[1])&&(j=Xt($,this.span[2]),0<=j&&j<=Xt(this.span[2],this.span[2])))},update:function(a){return this.needsUpdate?(this.updateCoords(a),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var a=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(a=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[a.width,a.height]),this},updateSpan:function(){var a,s,o=this.transformations.length,c=[];if(o===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(c[0]=[this.Z(),this.X(),this.Y()],c[1]=[this.Z(),this.X()+this.W(),this.Y()],c[2]=[this.Z(),this.X(),this.Y()+this.H()],a=0;a<o;a++)for(s=0;s<3;s++)c[s]=Mat.matVecMult(this.transformations[a].matrix,c[s]);for(s=0;s<3;s++)c[s][1]/=c[s][0],c[s][2]/=c[s][0],c[s][0]/=c[s][0];for(s=1;s<3;s++)c[s][0]-=c[0][0],c[s][1]-=c[0][1],c[s][2]-=c[0][2];this.span=c}return this},addTransform:function(a){var s;if(JXG$1.isArray(a))for(s=0;s<a.length;s++)this.transformations.push(a[s]);else this.transformations.push(a);return this},getParents:function(){var a=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(a=this.parents),a},setSize:function(a,s){return this.W=JXG$1.createFunction(a,this.board,""),this.H=JXG$1.createFunction(s,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}});JXG$1.createForeignObject=function(a,s,o){var c,h,d=s[0],b=s[1],_=[];if(s.length>=2&&(_=s[2]),c=JXG$1.copyAttributes(o,a.options,"foreignobject"),h=CoordsElement.create(JXG$1.ForeignObject,a,b,c,d,_),!h)throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof s[0]+"' and '"+typeof s[1]+`'.
Possible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]`);return h};JXG$1.registerElement("foreignobject",JXG$1.createForeignObject);JXG$1.registerElement("fo",JXG$1.createForeignObject);JXG$1.ForeignObject;JXG$1.extend(Options$1,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"},strokeColor:JXG$1.palette.red},yAxis:{visible:!0,point2:{name:"y"},strokeColor:JXG$1.palette.green},zAxis:{visible:!0,point2:{name:"z"},strokeColor:JXG$1.palette.blue},xAxisBorder:{name:"x",visible:"nherit",withLabel:!1,label:{position:"50% left",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},yAxisBorder:{name:"y",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[0,-30],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle"}}},zAxisBorder:{name:"z",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},xPlaneRear:{visible:!0,layer:0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",mesh3d:{layer:1}},yPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,fixed:!0,strokeColor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:"",withLabel:!1},point2:{visible:!1,name:"",withLabel:!1,label:{visible:!0}}},circle3d:{layer:12,point:{visible:!1,name:""},needsRegularUpdate:!0},curve3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200,needsRegularUpdate:!0},face3d:{transitionProperties:[],layer:12,highlight:!1,tabindex:null,strokeWidth:1,fillColor:JXG$1.palette.yellow,fillOpacity:.4,needsRegularUpdate:!0,shader:{enabled:!1,type:"angle",hue:60,saturation:90,minLightness:30,maxLightness:90}},intersectionline3d:{point1:{visible:!1,name:""},point2:{visible:!1,name:""}},line3d:{layer:12,strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,needsRegularUpdate:!0,point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""},straightFirst:!1,straightLast:!1},mesh3d:{layer:12,strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,tabindex:null,needsRegularUpdate:!0,stepWidthU:1,stepWidthV:1},plane3d:{layer:12,strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,needsRegularUpdate:!0,visible:!0,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,mesh3d:{visible:"inherit"},threePoints:!1,point:{visible:!1,name:"",fixed:!0},point1:{visible:!1,name:""},point2:{visible:!1,name:""},point3:{visible:!1,name:""}},point3d:{layer:13,infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555",gradientFX:.7,gradientFY:.3,needsRegularUpdate:!0},polygon3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,fillColor:"none",needsRegularUpdate:!0},polyhedron3d:{fillColorArray:["white","black"],needsRegularUpdate:!0},sphere3d:{layer:12,highlight:!1,strokeWidth:1,strokeColor:"#00ff80",fillColor:"white",gradient:"radial",gradientSecondColor:"#00ff80",gradientFX:.7,gradientFY:.3,fillOpacity:.4,needsRegularUpdate:!0},surface3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30,needsRegularUpdate:!0},text3d:{withLabel:!1,needsRegularUpdate:!0},ticks3d:{visible:!0,ticksDistance:1,majorHeight:10,minorTicks:0,tickEndings:[0,1],drawLabels:!0,needsRegularUpdate:!0,label:{visible:!0,withLabel:!1}},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:Math.PI*.125},needsRegularUpdate:!0},view3d:{needsRegularUpdate:!0,depthOrder:{enabled:!1,layers:[12,13]},projection:"parallel",verticalDrag:{enabled:!0,key:"shift"},az:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{pos:"auto",frozen:!1},point2:{pos:"auto",frozen:!1},min:0,max:2*Math.PI,start:1}},el:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:0,max:2*Math.PI,start:.3}},bank:{pointer:{enabled:!0,speed:.08,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:-Math.PI,max:Math.PI,start:0}},trackball:{enabled:!1,outside:!0,button:-1,key:"none"},r:"auto",fov:1/5*2*Math.PI,values:[[0,1.57],[.78,.62],[0,0],[5.49,.62],[4.71,0],[3.93,.62],[3.14,0],[2.36,.62],[1.57,1.57]],infobox:{strokeColor:"#000000",fontSize:16,useKatex:!1,useMathjax:!1,intl:{enabled:!0,options:{minimumFractionDigits:2,maximumFractionDigits:3}}},_currentView:-1}});JXG$1.Options;JXG$1.View3D=function(a,s,o){this.constructor(a,o,Const.OBJECT_TYPE_VIEW3D,Const.OBJECT_CLASS_3D),this.objects={},this.depthOrdered={},this.elementsByName={},this.defaultAxes=null,this.angles={az:null,el:null,bank:null},this.matrix3DRot=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3DRotShift=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.boxToCam=[],this.llftCorner=s[0],this.size=s[1],this.bbox3D=s[2],this.r=-1,this.focalDist=-1,this.projectionType="parallel",this.trackballEnabled=!1,this.timeoutAzimuth=null,this.zIndexMin=1/0,this.zIndexMax=-1/0,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.View3D.prototype=new GeometryElement;JXG$1.extend(JXG$1.View3D.prototype,{create:function(a,s,o){var c=[],h;return a.indexOf("3d")>0&&c.push(this),h=this.board.create(a,c.concat(s),o),h},select:function(a,s){var o,c,h,d,b=a;if(b===null)return b;if(JXG$1.isString(b)&&b!=="")JXG$1.exists(this.objects[b])?b=this.objects[b]:JXG$1.exists(this.elementsByName[b])&&(b=this.elementsByName[b]);else if(!s&&(JXG$1.isFunction(b)||JXG$1.isObject(b)&&!JXG$1.isFunction(b.setAttribute))){for(o=JXG$1.filterElements(this.objectsList,b),c={},d=o.length,h=0;h<d;h++)c[o[h].id]=o[h];b=new Composition(c)}else JXG$1.isObject(b)&&JXG$1.exists(b.id)&&!JXG$1.exists(this.objects[b.id])&&(b=null);return b},setAnglesFromRotation:function(){var a=this.matrix3DRot,s,o,c,h,d,b,_;s=Math.sqrt(a[1][3]*a[1][3]+a[2][3]*a[2][3]),s>Mat.eps?(o=a[2][3]/s,c=a[1][3]/s):(o=Math.cos(this.angles.bank),c=Math.sin(this.angles.bank)),a=Mat.matMatMult([[1,0,0,0],[0,o,-c,0],[0,c,o,0],[0,0,0,1]],a),this.angles.bank=Math.atan2(c,o),h=a[2][3],d=a[3][3],a=Mat.matMatMult([[1,0,0,0],[0,1,0,0],[0,0,h,d],[0,0,-d,h]],a),this.angles.el=Math.atan2(d,h),b=-a[1][1],_=a[3][1],this.angles.az=Math.atan2(_,b),this.angles.az<0&&(this.angles.az+=2*Math.PI),this.setSlidersFromAngles()},anglesHaveMoved:function(){return this._hasMoveAz||this._hasMoveEl||Math.abs(this.angles.az-this.az_slide.Value())>Mat.eps||Math.abs(this.angles.el-this.el_slide.Value())>Mat.eps||Math.abs(this.angles.bank-this.bank_slide.Value())>Mat.eps},getAnglesFromSliders:function(){this.angles.az=this.az_slide.Value(),this.angles.el=this.el_slide.Value(),this.angles.bank=this.bank_slide.Value()},setSlidersFromAngles:function(){this.az_slide.setValue(this.angles.az),this.el_slide.setValue(this.angles.el),this.bank_slide.setValue(this.angles.bank)},getRotationFromAngles:function(){var a,s,o,c,h,d,b=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return a=this.angles.az,s=this.angles.el,o=this.angles.bank,c=-Math.sin(s),b[1][1]=-Math.cos(a),b[1][2]=Math.sin(a),b[1][3]=0,b[2][1]=c*Math.sin(a),b[2][2]=c*Math.cos(a),b[2][3]=Math.cos(s),b[3][1]=Math.cos(s)*Math.sin(a),b[3][2]=Math.cos(s)*Math.cos(a),b[3][3]=Math.sin(s),h=Math.cos(o),d=Math.sin(o),b=Mat.matMatMult([[1,0,0,0],[0,h,d,0],[0,-d,h,0],[0,0,0,1]],b),b},_projectToSphere:function(a,s,o){var c=Mat.hypot(s,o),h,d;return c<a*.7071067811865475?d=Math.sqrt(a*a-c*c):(h=a/1.414213562373095,d=h*h/c),d},updateProjectionTrackball:function(a){var s=100,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return JXG$1.exists(this._trackball)?(o=this._trackball.dx,c=this._trackball.dy,h=o*o+c*c,h>Mat.eps&&(s=(this.size[0]*this.board.unitX+this.size[1]*this.board.unitY)*.25,_=this._trackball.x,$=this._trackball.y,b=[_,$,this._projectToSphere(s,_,$)],_-=o,$-=c,d=[_,$,this._projectToSphere(s,_,$)],Js=Mat.crossProduct(d,b),Lt=Mat.hypot(Js[0],Js[1],Js[2]),Js[0]/=Lt,Js[1]/=Lt,Js[2]/=Lt,Xt=Geometry.distance(b,d,3)/(2*s),Xt=Xt>1?1:Xt,Xt=Xt<-1?-1:Xt,j=2*Math.asin(Xt),fr=Math.cos(j),Xt=1-fr,Jr=Math.sin(j),qs[1][1]=fr+Js[0]*Js[0]*Xt,qs[2][1]=Js[1]*Js[0]*Xt+Js[2]*Jr,qs[3][1]=Js[2]*Js[0]*Xt-Js[1]*Jr,qs[1][2]=Js[0]*Js[1]*Xt-Js[2]*Jr,qs[2][2]=fr+Js[1]*Js[1]*Xt,qs[3][2]=Js[2]*Js[1]*Xt+Js[0]*Jr,qs[1][3]=Js[0]*Js[2]*Xt+Js[1]*Jr,qs[2][3]=Js[1]*Js[2]*Xt-Js[0]*Jr,qs[3][3]=fr+Js[2]*Js[2]*Xt),qs=Mat.matMatMult(qs,this.matrix3DRot),qs):this.matrix3DRot},updateAngleSliderBounds:function(){var a,s,o,c,h,d,b,_,$,j,Xt,Lt,fr;this.trackballEnabled=this.evalVisProp("trackball.enabled"),this.trackballEnabled?(this.az_slide.setMin(0),this.az_slide.setMax(2*Math.PI),this.el_slide.setMin(-.5*Math.PI),this.el_slide.setMax(.5*Math.PI),this.bank_slide.setMin(-Math.PI),this.bank_slide.setMax(Math.PI)):(this.az_slide.setMin(this.visProp.az.slider.min),this.az_slide.setMax(this.visProp.az.slider.max),this.el_slide.setMin(this.visProp.el.slider.min),this.el_slide.setMax(this.visProp.el.slider.max),this.bank_slide.setMin(this.visProp.bank.slider.min),this.bank_slide.setMax(this.visProp.bank.slider.max)),a=this.az_slide._smax,s=this.az_slide._smin,o=this.el_slide._smax,c=this.el_slide._smin,Lt=this.bank_slide._smax,fr=this.bank_slide._smin,this.trackballEnabled?(h=Mat.mod(this.angles.el,2*Math.PI),.5*Math.PI<h&&h<1.5*Math.PI&&(this.angles.el=Math.PI-h,this.angles.az=Mat.wrap(this.angles.az+Math.PI,s,a),this.angles.bank=Mat.wrap(this.angles.bank+Math.PI,fr,Lt)),this.angles.az=Mat.wrap(this.angles.az,s,a),this.angles.el=Mat.wrap(this.angles.el,c,o),this.angles.bank=Mat.wrap(this.angles.bank,fr,Lt)):(Xt=function(Jr){return Jr<c?c-Jr:o<Jr?Jr-o:0},d=.5*(c+o),b=Mat.wrap(this.angles.el,d-Math.PI,d+Math.PI),_=Mat.wrap(Math.PI-this.angles.el,d-Math.PI,d+Math.PI),$=Xt(b),j=Xt(_),$<=j?this.angles.el=Mat.clamp(b,c,o):(this.angles.el=Mat.clamp(_,c,o),this.angles.az=Mat.wrap(this.angles.az+Math.PI,s,a),this.angles.bank=Mat.wrap(this.angles.bank+Math.PI,fr,Lt)),this.angles.az=Mat.wrapAndClamp(this.angles.az,s,a,2*Math.PI),this.angles.bank=Mat.wrapAndClamp(this.angles.bank,fr,Lt,2*Math.PI),this.matrix3DRot=this.getRotationFromAngles()),this.setSlidersFromAngles()},_updateCentralProjection:function(){var a=20,s=8,o,c;return o=this.evalVisProp("r"),o==="auto"&&(o=Mat.hypot(this.bbox3D[0][0]-this.bbox3D[0][1],this.bbox3D[1][0]-this.bbox3D[1][1],this.bbox3D[2][0]-this.bbox3D[2][1])*1.01),this.boxToCam=this.matrix3DRot.map(function(h){return h.slice()}),this.boxToCam[3][0]=-o,this.focalDist=1/Math.tan(.5*this.evalVisProp("fov")),c=[[0,0,0,-1],[0,this.focalDist,0,0],[0,0,this.focalDist,0],[2*a*s/(s-a),0,0,(a+s)/(s-a)]],Mat.matMatMult(c,this.boxToCam)},update:function(){var a=this.r,s=[[1,0,0,0],[0,-a,0,0],[0,0,-a,0],[0,0,0,1]],o,c,h,d,b;if(!JXG$1.exists(this.el_slide)||!JXG$1.exists(this.az_slide)||!JXG$1.exists(this.bank_slide)||!this.needsUpdate)return this.needsUpdate=!1,this;switch(o=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=this.evalVisProp("projection").toLowerCase(),this.trackballEnabled!==this.evalVisProp("trackball.enabled")&&this.updateAngleSliderBounds(),this._hasMoveTrackball?(this.matrix3DRot=this.updateProjectionTrackball(),this.setAnglesFromRotation()):this.anglesHaveMoved()&&(this.getAnglesFromSliders(),this.matrix3DRot=this.getRotationFromAngles()),this.shift=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],this.projectionType){case"central":h=2*.4,o[1][1]=this.size[0]/h,o[2][2]=this.size[1]/h,o[1][0]=this.llftCorner[0]+o[1][1]*.5*h,o[2][0]=this.llftCorner[1]+o[2][2]*.5*h,this.viewPortTransform=o,c=this._updateCentralProjection(),this.matrix3D=Mat.matMatMult(c,this.shift);break;case"parallel":default:d=this.bbox3D[0][1]-this.bbox3D[0][0],b=this.bbox3D[1][1]-this.bbox3D[1][0],o[1][1]=this.size[0]/d,o[2][2]=this.size[1]/b,o[1][0]=this.llftCorner[0]+o[1][1]*.5*d,o[2][0]=this.llftCorner[1]+o[2][2]*.5*b,this.matrix3D=Mat.matMatMult(o,Mat.matMatMult(Mat.matMatMult(this.matrix3DRot,s),this.shift).slice(0,3))}return this.matrix3DRotShift=Mat.matMatMult(this.matrix3DRot,this.shift),this},compareDepth:function(a,s){return a.zIndex-s.zIndex},updateZIndices:function(){var a,s;for(a in this.objects)this.objects.hasOwnProperty(a)&&(s=this.objects[a],(s.type===Const.OBJECT_TYPE_LINE3D||s.type===Const.OBJECT_TYPE_POLYGON3D)&&JXG$1.exists(s.element2D)&&s.element2D.evalVisProp("visible")&&s.updateZIndex())},updateShaders:function(){var a,s,o;for(a in this.objects)this.objects.hasOwnProperty(a)&&(s=this.objects[a],JXG$1.exists(s.shader)&&(o=s.shader(),o<this.zIndexMin?this.zIndexMin=o:o>this.zIndexMax&&(this.zIndexMax=o)))},updateDepthOrdering:function(){var a,s,o,c,h,d,b;for(d=this.evalVisProp("depthorder.layers"),o=0;o<d.length;o++)this.depthOrdered[d[o]]=[];for(a in this.objects)this.objects.hasOwnProperty(a)&&(s=this.objects[a],(s.type===Const.OBJECT_TYPE_FACE3D||s.type===Const.OBJECT_TYPE_LINE3D||s.type===Const.OBJECT_TYPE_POINT3D||s.type===Const.OBJECT_TYPE_POLYGON3D)&&JXG$1.exists(s.element2D)&&s.element2D.evalVisProp("visible")&&(b=s.element2D.evalVisProp("layer"),d.indexOf(b)>=0&&this.depthOrdered[b].push(s)));if(this.board.renderer&&this.board.renderer.type==="svg")for(o=0;o<d.length;o++)for(b=d[o],this.depthOrdered[b].sort(this.compareDepth.bind(this)),h=this.depthOrdered[b],c=0;c<h.length;c++)this.board.renderer.setLayer(h[c].element2D,b);return this},updateRenderer:function(){return this.needsUpdate?(this.depthOrdered={},this.shift!==void 0&&this.evalVisProp("depthorder.enabled")&&(this.updateZIndices(),this.updateShaders(),this.board.renderer&&this.board.renderer.type==="svg"&&this.updateDepthOrdering()),this.needsUpdate=!1,this):this},removeObject:function(a,s){var o,c;if(JXG$1.isArray(a)){for(o=0;o<a.length;o++)this.removeObject(a[o]);return this}if(a=this.select(a),!JXG$1.exists(a)||JXG$1.isString(a))return this;try{for(c in a.childElements)a.childElements.hasOwnProperty(c)&&this.removeObject(a.childElements[c]);delete this.objects[a.id]}catch(h){JXG$1.debug("View3D "+a.id+": Could not be removed: "+h)}return this.board.removeObject(a,s),this},worldToFocal:function(a,s=!0){var o,c=Mat.matVecMult(this.boxToCam,Mat.matVecMult(this.shift,a));if(c[3]-=c[0]*this.focalDist,s)return c;for(o=1;o<4;o++)c[o]/=c[0];return c.slice(1,4)},project3DTo2D:function(a,s,o){var c,h;switch(arguments.length===3?c=[1,a,s,o]:a.length===3?(c=a.slice(),c.unshift(1)):c=a,h=Mat.matVecMult(this.matrix3D,c),this.projectionType){case"central":return h[1]/=h[0],h[2]/=h[0],h[3]/=h[0],h[0]/=h[0],Mat.matVecMult(this.viewPortTransform,h.slice(0,3));case"parallel":default:return h}},_getW0:function(a,s,o){var c=Mat.inverse(a),h=c[0][0]+s[1]*c[0][1]+s[2]*c[0][2],d=c[3][0]+s[1]*c[3][1]+s[2]*c[3][2],b,_,$;return $=o*c[0][3]-c[3][3],b=(d*c[0][3]-h*c[3][3])/$,_=(d-h*o)/$,[1/b,_]},project2DTo3DPlane:function(a,s,o){var c,h,d,b,_,$=o.slice(1)||[0,0,0],j=s.slice(1),Xt,Lt,fr;if(b=Mat.norm(j,3),d=Mat.innerProduct($,j,3)/b,this.projectionType==="parallel"){c=this.matrix3D.slice(0,3),c.push([0,j[0],j[1],j[2]]),h=a.coords.usrCoords.slice(),h.push(d);try{c[2][3]===1&&(c[2][1]=c[2][2]=Mat.eps*.001),_=Mat.Numerics.Gauss(c,h)}catch{_=[0,NaN,NaN,NaN]}}else{c=this.matrix3D,h=a.coords.usrCoords.slice(),Xt=Mat.Numerics.Gauss(this.viewPortTransform,h),fr=this._getW0(c,Xt,d),Lt=fr[0],h=[Xt[0]*Lt,Xt[1]*Lt,Xt[2]*Lt,fr[1]*Lt];try{c[2][3]===1&&(c[2][1]=c[2][2]=Mat.eps*.001),_=Mat.Numerics.Gauss(c,h),_[1]/=_[0],_[2]/=_[0],_[3]/=_[0],_[0]/=_[0]}catch{_=[0,NaN,NaN,NaN]}}return _},projectScreenToSegment:function(a,s,o){var c=this.project3DTo2D(s).slice(1,3),h=this.project3DTo2D(o).slice(1,3),d=[h[0]-c[0],h[1]-c[1]],b=Mat.innerProduct(d,d),_=[a[0]-c[0],a[1]-c[1]],$=Mat.innerProduct(_,d)/b,j,Xt,Lt,fr,Jr,Js,qs;return this.projectionType==="central"?(j=[.5*(s[0]+o[0]),.5*(s[1]+o[1]),.5*(s[2]+o[2])],Xt=this.project3DTo2D(j).slice(1,3),Lt=[Xt[0]-c[0],Xt[1]-c[1]],fr=Mat.innerProduct(Lt,d)/b,Jr=(1-fr)*$/((1-2*fr)*$+fr)):Jr=$,Js=Math.min(Math.max(Jr,0),1),qs=1-Js,[1,qs*s[0]+Js*o[0],qs*s[1]+Js*o[1],qs*s[2]+Js*o[2]]},project2DTo3DVertical:function(a,s){var o=a.coords.usrCoords.slice(1,3),c=[s[1],s[2],this.bbox3D[2][0]],h=[s[1],s[2],this.bbox3D[2][1]];return this.projectScreenToSegment(o,c,h)},project3DToCube:function(a){var s=this.bbox3D,o=!1;return a[1]<s[0][0]&&(a[1]=s[0][0],o=!0),a[1]>s[0][1]&&(a[1]=s[0][1],o=!0),a[2]<s[1][0]&&(a[2]=s[1][0],o=!0),a[2]>s[1][1]&&(a[2]=s[1][1],o=!0),a[3]<=s[2][0]&&(a[3]=s[2][0],o=!0),a[3]>=s[2][1]&&(a[3]=s[2][1],o=!0),[a,o]},intersectionLineCube:function(a,s,o){var c,h,d,b,_;for(_=s.length===3?s:s.slice(1),c=o,h=0;h<3;h++)_[h]!==0&&(d=(this.bbox3D[h][0]-a[h+1])/_[h],b=(this.bbox3D[h][1]-a[h+1])/_[h],o<0?c=Math.max(c,Math.min(d,b)):c=Math.min(c,Math.max(d,b)));return c},isInCube:function(a,s){var o;if(a.length===4){if(a[0]===0)return!1;o=a.slice(1)}return o[0]>this.bbox3D[0][0]-Mat.eps&&o[0]<this.bbox3D[0][1]+Mat.eps&&o[1]>this.bbox3D[1][0]-Mat.eps&&o[1]<this.bbox3D[1][1]+Mat.eps&&o[2]>this.bbox3D[2][0]-Mat.eps&&o[2]<this.bbox3D[2][1]+Mat.eps},intersectionPlanePlane:function(a,s,o){var c=[!1,!1],h,d,b,_,$;return o=o||s.d,_=Mat.crossProduct(a.normal.slice(1),s.normal.slice(1)),_.unshift(0),h=Mat.Geometry.meet3Planes(a.normal,a.d,s.normal,o,_,0),$=Mat.Geometry.meetPlanePlane(a.vec1,a.vec2,s.vec1,s.vec2),b=this.intersectionLineCube(h,$,1/0),d=Mat.axpy(b,$,h),this.isInCube(d)&&(c[0]=d),b=this.intersectionLineCube(h,$,-1/0),d=Mat.axpy(b,$,h),this.isInCube(d)&&(c[1]=d),c},intersectionPlaneFace:function(a,s){var o=[],c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo=[],tu=[],Bo;for(eu=Mat.crossProduct(a.normal.slice(1),s.normal.slice(1)),eu.unshift(0),d=Geometry.meet3Planes(a.normal,a.d,s.normal,s.d,eu,0),zo=Geometry.meetPlanePlane(a.vec1,a.vec2,s.vec1,s.vec2),Xt=s.polyhedron.faces[s.faceNumber],b=s.polyhedron.coords,Lt=Xt.length,c=1;c<=Lt;c++)_=b[Xt[c-1]],$=b[Xt[c%Lt]],js=[0,$[1]-_[1],$[2]-_[2],$[3]-_[3]],fr=Math.random(),Jr=Math.random(),Js=Math.random(),qs=Math.random(),Oo=[[fr*zo[1]+Jr*zo[3],fr*-js[1]+Jr*-js[3]],[Js*zo[2]+qs*zo[3],Js*-js[2]+qs*-js[3]]],tu=[fr*(_[1]-d[1])+Jr*(_[3]-d[3]),Js*(_[2]-d[2])+qs*(_[3]-d[3])],Bo=Numerics.Gauss(Oo,tu),h=Bo[1],h>-Mat.eps&&h<1+Mat.eps&&(j=[1,_[1]+h*js[1],_[2]+h*js[2],_[3]+h*js[3]],o.push(j));return o},intersectionPlanePolyhedron:function(a,s){var o,c,h,d,b,_,$,j=1e-12,Xt=[],Lt=[],fr=[],Jr=[];for(o=0;o<s.numberFaces;o++)if(!(s.def.faces[o].length<3)&&(h=this.intersectionPlaneFace(a,s.faces[o]),!(h.length<2)&&h[0].length===4&&h[1].length===4)){for(c=0;c<Xt.length&&!(Geometry.distance(h[0],Xt[c][0],4)<j&&Geometry.distance(h[1],Xt[c][1],4)<j||Geometry.distance(h[0],Xt[c][1],4)<j&&Geometry.distance(h[1],Xt[c][0],4)<j);c++);c===Xt.length&&Xt.push(h.slice())}if(Xt.length===0)return{X:Lt,Y:fr,Z:Jr};b=0,_=b,o=0;do{for(d=Xt[_][o],d.length===4&&(Lt.push(d[1]),fr.push(d[2]),Jr.push(d[3])),o=(o+1)%2,d=Xt[_][o],$=_,c=0;c<Xt.length;c++){if(c!==_&&Geometry.distance(d,Xt[c][0])<j){_=c,o=0;break}if(c!==_&&Geometry.distance(d,Xt[c][1])<j){_=c,o=1;break}}if(_===$){console.log("Error face3d intersection update: did not find next",_,o);break}}while(_!==b);return Lt.push(Lt[0]),fr.push(fr[0]),Jr.push(Jr[0]),{X:Lt,Y:fr,Z:Jr}},getMesh:function(a,s,o){var c,h,d,b,_,$,j,Xt=[0,0,0],Lt=JXG$1.evaluate(s[2]),fr=JXG$1.evaluate(o[2]),Jr=[],Js=[];for($=(JXG$1.evaluate(s[1])-JXG$1.evaluate(s[0]))/Lt,j=(JXG$1.evaluate(o[1])-JXG$1.evaluate(o[0]))/fr,c=0;c<=Lt;c++){for(d=s[0]+$*c,h=0;h<=fr;h++)b=o[0]+j*h,JXG$1.isFunction(a)?Xt=a(d,b):Xt=[a[0](d,b),a[1](d,b),a[2](d,b)],_=this.project3DTo2D(Xt),Jr.push(_[1]),Js.push(_[2]);Jr.push(NaN),Js.push(NaN)}for(h=0;h<=fr;h++){for(b=o[0]+j*h,c=0;c<=Lt;c++)d=s[0]+$*c,JXG$1.isFunction(a)?Xt=a(d,b):Xt=[a[0](d,b),a[1](d,b),a[2](d,b)],_=this.project3DTo2D(Xt),Jr.push(_[1]),Js.push(_[2]);Jr.push(NaN),Js.push(NaN)}return[Jr,Js]},animateAzimuth:function(){var a=this.az_slide._smin,s=this.az_slide._smax,o=s-a,c=this.az_slide.Value()+.1;this.az_slide.position=(c-a)/o,this.az_slide.position>1&&(this.az_slide.position=0),this.board._change3DView=!0,this.board.update(),this.board._change3DView=!1,this.timeoutAzimuth=setTimeout((function(){this.animateAzimuth()}).bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var a=this.board,s;return this.evalVisProp("verticaldrag.enabled")?(s="_"+this.evalVisProp("verticaldrag.key")+"Key",a[s]):!1},setView:function(a,s,o){return o=o||this.r,this.az_slide.setValue(a),this.el_slide.setValue(s),this.r=o,this.board.update(),this},nextView:function(){var a=this.evalVisProp("values"),s=this.visProp._currentview;return s=(s+1)%a.length,this.setCurrentView(s),this},previousView:function(){var a=this.evalVisProp("values"),s=this.visProp._currentview;return s=(s+a.length-1)%a.length,this.setCurrentView(s),this},setCurrentView:function(a){var s=this.evalVisProp("values");return(a<0||a>=s.length)&&(a=(a%s.length+s.length)%s.length),this.setView(s[a][0],s[a][1],s[a][2]),this.visProp._currentview=a,this},_azEventHandler:function(a){var s=this.az_slide._smax,o=this.az_slide._smin,c=(s-o)/this.board.canvasWidth*this.evalVisProp("az.pointer.speed"),h=a.movementX,d=this.az_slide.Value(),b=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG?this:(this.evalVisProp("az.keyboard.enabled")&&(a.key==="ArrowRight"?d=d+this.evalVisProp("az.keyboard.step")*Math.PI/180:a.key==="ArrowLeft"&&(d=d-this.evalVisProp("az.keyboard.step")*Math.PI/180)),this.evalVisProp("az.pointer.enabled")&&h!==0&&a.key==null&&(d+=h*c),this.evalVisProp("az.continuous")?d=Mat.wrap(d,o,s):d>0?d=Math.min(s,d):d<0&&(d=Math.max(o,d)),this.setView(d,b),this)},_elEventHandler:function(a){var s=this.el_slide._smax,o=this.el_slide._smin,c=(s-o)/this.board.canvasHeight*this.evalVisProp("el.pointer.speed"),h=a.movementY,d=this.az_slide.Value(),b=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG?this:(this.evalVisProp("el.keyboard.enabled")&&(a.key==="ArrowUp"?b=b-this.evalVisProp("el.keyboard.step")*Math.PI/180:a.key==="ArrowDown"&&(b=b+this.evalVisProp("el.keyboard.step")*Math.PI/180)),this.evalVisProp("el.pointer.enabled")&&h!==0&&a.key==null&&(b+=h*c),this.evalVisProp("el.continuous")&&!this.trackballEnabled?b=Mat.wrap(b,o,s):b>0?b=Math.min(s,b):b<0&&(b=Math.max(o,b)),this.setView(d,b),this)},_bankEventHandler:function(a){var s=this.bank_slide._smax,o=this.bank_slide._smin,c,h,d=a.deltaY,b=this.bank_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG?this:(this.evalVisProp("bank.keyboard.enabled")&&(c=this.evalVisProp("bank.keyboard.step")*Math.PI/180,a.key==="."||a.key==="<"?b-=c:(a.key===","||a.key===">")&&(b+=c)),this.evalVisProp("bank.pointer.enabled")&&d!==0&&a.key==null&&(h=(s-o)/this.board.canvasHeight*this.evalVisProp("bank.pointer.speed"),b+=d*h,a.preventDefault()),this.evalVisProp("bank.continuous")?b=Mat.wrap(b,o,s):b=Mat.clamp(b,o,s),this.bank_slide.setValue(b),this.board.update(),this)},_trackballHandler:function(a){var s=this.board.getMousePosition(a),o,c,h;return h=new Coords(Const.COORDS_BY_USER,[this.llftCorner[0]+this.size[0]*.5,this.llftCorner[1]+this.size[1]*.5],this.board),o=s[0]-h.scrCoords[1],c=s[1]-h.scrCoords[2],this._trackball={dx:a.movementX,dy:-a.movementY,x:o,y:-c},this.board.update(),this},pointerDownHandler:function(a){var s,o,c;this._hasMoveAz=!1,this._hasMoveEl=!1,this._hasMoveBank=!1,this._hasMoveTrackball=!1,this.board.mode===this.board.BOARD_MODE_NONE&&(this.board._change3DView=!0,this.evalVisProp("trackball.enabled")?(s=this.evalVisProp("trackball.button"),o=this.evalVisProp("trackball.key"),(s===-1||s===a.button)&&(o==="none"||o.indexOf("shift")>-1&&a.shiftKey||o.indexOf("ctrl")>-1&&a.ctrlKey)&&(c=this.evalVisProp("trackball.outside")?document:this.board.containerObj,JXG$1.addEvent(c,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!0)):(this.evalVisProp("az.pointer.enabled")&&(s=this.evalVisProp("az.pointer.button"),o=this.evalVisProp("az.pointer.key"),(s===-1||s===a.button)&&(o==="none"||o.indexOf("shift")>-1&&a.shiftKey||o.indexOf("ctrl")>-1&&a.ctrlKey)&&(c=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,JXG$1.addEvent(c,"pointermove",this._azEventHandler,this),this._hasMoveAz=!0)),this.evalVisProp("el.pointer.enabled")&&(s=this.evalVisProp("el.pointer.button"),o=this.evalVisProp("el.pointer.key"),(s===-1||s===a.button)&&(o==="none"||o.indexOf("shift")>-1&&a.shiftKey||o.indexOf("ctrl")>-1&&a.ctrlKey)&&(c=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,JXG$1.addEvent(c,"pointermove",this._elEventHandler,this),this._hasMoveEl=!0)),this.evalVisProp("bank.pointer.enabled")&&(s=this.evalVisProp("bank.pointer.button"),o=this.evalVisProp("bank.pointer.key"),(s===-1||s===a.button)&&(o==="none"||o.indexOf("shift")>-1&&a.shiftKey||o.indexOf("ctrl")>-1&&a.ctrlKey)&&(c=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,JXG$1.addEvent(c,"wheel",this._bankEventHandler,this,{passive:!1}),this._hasMoveBank=!0))),JXG$1.addEvent(document,"pointerup",this.pointerUpHandler,this))},pointerUpHandler:function(a){var s;this._hasMoveAz&&(s=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,JXG$1.removeEvent(s,"pointermove",this._azEventHandler,this),this._hasMoveAz=!1),this._hasMoveEl&&(s=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,JXG$1.removeEvent(s,"pointermove",this._elEventHandler,this),this._hasMoveEl=!1),this._hasMoveBank&&(s=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,JXG$1.removeEvent(s,"wheel",this._bankEventHandler,this),this._hasMoveBank=!1),this._hasMoveTrackball&&(s=this.evalVisProp("trackball.outside")?document:this.board.containerObj,JXG$1.removeEvent(s,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!1),JXG$1.removeEvent(document,"pointerup",this.pointerUpHandler,this),this.board._change3DView=!1}});JXG$1.createView3D=function(a,s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs=s[0],zo=s[1];return h=JXG$1.copyAttributes(o,a.options,"view3d"),c=new JXG$1.View3D(a,s,h),c.defaultAxes=c.create("axes3d",[],h),$=qs[0],j=qs[1],Xt=zo[0],Lt=zo[1],d=JXG$1.copyAttributes(h,a.options,"view3d","az","slider"),d.name="az",b=JXG$1.copyAttributes(h,a.options,"view3d","el","slider"),b.name="el",_=JXG$1.copyAttributes(h,a.options,"view3d","bank","slider"),_.name="bank",Js=JXG$1.evaluate(d.point1.pos),JXG$1.isArray(Js)?fr=Js:fr=[$-1,j-2],Js=JXG$1.evaluate(d.point2.pos),JXG$1.isArray(Js)?Jr=Js:Jr=[$+Xt+1,j-2],c.az_slide=a.create("slider",[fr,Jr,[JXG$1.evaluate(d.min),JXG$1.evaluate(d.start),JXG$1.evaluate(d.max)]],d),c.inherits.push(c.az_slide),c.az_slide.elType="view3d_slider",Js=JXG$1.evaluate(b.point1.pos),JXG$1.isArray(Js)?fr=Js:fr=[$-1,j],Js=JXG$1.evaluate(b.point2.pos),JXG$1.isArray(Js)?Jr=Js:Jr=[$-1,j+Lt],c.el_slide=a.create("slider",[fr,Jr,[JXG$1.evaluate(b.min),JXG$1.evaluate(b.start),JXG$1.evaluate(b.max)]],b),c.inherits.push(c.el_slide),c.el_slide.elType="view3d_slider",Js=JXG$1.evaluate(_.point1.pos),JXG$1.isArray(Js)?fr=Js:fr=[$-1,j+Lt+2],Js=JXG$1.evaluate(_.point2.pos),JXG$1.isArray(Js)?Jr=Js:Jr=[$+Xt+1,j+Lt+2],c.bank_slide=a.create("slider",[fr,Jr,[JXG$1.evaluate(_.min),JXG$1.evaluate(_.start),JXG$1.evaluate(_.max)]],_),c.inherits.push(c.bank_slide),c.bank_slide.elType="view3d_slider",c.board.infobox.visProp=JXG$1.merge(c.board.infobox.visProp,h.infobox),c.board.highlightInfobox=function(js,eu,Oo){var tu,Bo,vu,t1,e1="",r1=Oo.board,a1,i1,s1=null;for(this.mode===this.BOARD_MODE_DRAG&&(c.isVerticalDrag()?e1='<span style="color:black; font-size:200%"> &nbsp;</span>':e1='<span style="color:black; font-size:200%"> &nbsp;</span>'),Bo=0;Bo<Oo.parents.length&&(s1=r1.objects[Oo.parents[Bo]],!s1.is3D);Bo++);if(s1&&JXG$1.exists(s1.element2D)){if(t1=[1,0,0,s1.coords[3]],c._w0=Mat.innerProduct(c.matrix3D[0],t1,4),vu=c.project2DTo3DPlane(s1.element2D,[1,0,0,1],t1),!c.isInCube(vu)){c.board.highlightCustomInfobox("",s1);return}tu=s1.evalVisProp("infoboxdigits"),i1=c.board.infobox,tu==="auto"?i1.useLocale()?a1=[e1,"(",i1.formatNumberLocale(s1.X())," | ",i1.formatNumberLocale(s1.Y())," | ",i1.formatNumberLocale(s1.Z()),")"]:a1=[e1,"(",JXG$1.autoDigits(s1.X())," | ",JXG$1.autoDigits(s1.Y())," | ",JXG$1.autoDigits(s1.Z()),")"]:i1.useLocale()?a1=[e1,"(",i1.formatNumberLocale(s1.X(),tu)," | ",i1.formatNumberLocale(s1.Y(),tu)," | ",i1.formatNumberLocale(s1.Z(),tu),")"]:a1=[e1,"(",JXG$1.toFixed(s1.X(),tu)," | ",JXG$1.toFixed(s1.Y(),tu)," | ",JXG$1.toFixed(s1.Z(),tu),")"],c.board.highlightCustomInfobox(a1.join(""),s1)}else c.board.highlightCustomInfobox("("+js+", "+eu+")",Oo)},c.BOARD_MODE_NONE=0,JXG$1.addEvent(a.containerObj,"keydown",function(js){var eu,Oo=!1;c.evalVisProp("el.keyboard.enabled")&&(js.key==="ArrowUp"||js.key==="ArrowDown")&&(eu=c.evalVisProp("el.keyboard.key"),(eu==="none"||eu.indexOf("shift")>-1&&js.shiftKey||eu.indexOf("ctrl")>-1&&js.ctrlKey)&&(c._elEventHandler(js),Oo=!0)),c.evalVisProp("az.keyboard.enabled")&&(js.key==="ArrowLeft"||js.key==="ArrowRight")&&(eu=c.evalVisProp("az.keyboard.key"),(eu==="none"||eu.indexOf("shift")>-1&&js.shiftKey||eu.indexOf("ctrl")>-1&&js.ctrlKey)&&(c._azEventHandler(js),Oo=!0)),c.evalVisProp("bank.keyboard.enabled")&&(js.key===","||js.key==="<"||js.key==="."||js.key===">")&&(eu=c.evalVisProp("bank.keyboard.key"),(eu==="none"||eu.indexOf("shift")>-1&&js.shiftKey||eu.indexOf("ctrl")>-1&&js.ctrlKey)&&(c._bankEventHandler(js),Oo=!0)),js.key==="PageUp"?(c.nextView(),Oo=!0):js.key==="PageDown"&&(c.previousView(),Oo=!0),Oo&&js.preventDefault(),this.board._change3DView=!1},c),JXG$1.addEvent(a.containerObj,"pointerdown",c.pointerDownHandler,c),c.getAnglesFromSliders(),c.matrix3DRot=c.getRotationFromAngles(),c.updateAngleSliderBounds(),c.board.update(),c};JXG$1.registerElement("view3d",JXG$1.createView3D);JXG$1.View3D;JXG$1.GeometryElement3D=function(a,s){this.elType=s,this.view=a,this.id=this.view.board.setId(this,s),this.element2D=null,this.is3D=!0,this.zIndex=0,this.view.objects[this.id]=this,this.name!==""&&(this.view.elementsByName[this.name]=this)};JXG$1.extend(JXG$1.GeometryElement3D.prototype,{setAttr2D:function(a){var s=a;return s.name=this.name,s.element3d=this,s.id=null,s},setAttribute:function(a){var s,o,c,h,d,b={};for(s=0;s<arguments.length;s++)h=arguments[s],JXG$1.isString(h)?(d=h.split(":"),b[JXG$1.trim(d[0])]=JXG$1.trim(d[1])):JXG$1.isArray(h)?b[h[0]]=h[1]:JXG$1.extend(b,h);for(s in b)if(b.hasOwnProperty(s))switch(o=s.replace(/\s+/g,"").toLowerCase(),c=b[s],o){case"numberpointshigh":case"stepsu":case"stepsv":JXG$1.exists(this.visProp[o])&&(!JXG$1.Validator[o]||JXG$1.Validator[o]&&JXG$1.Validator[o](c)||JXG$1.Validator[o]&&JXG$1.isFunction(c)&&JXG$1.Validator[o](c()))&&(c=c.toLowerCase&&c.toLowerCase()==="false"?!1:c,this._set(o,c));break;default:JXG$1.exists(this.element2D)&&this.element2D.setAttribute(b)}},getAttribute:function(a){var s;switch(a=a.toLowerCase(),a){case"numberpointshigh":case"stepsu":case"stepsv":s=this.visProp[a];break;default:JXG$1.exists(this.element2D)&&(s=this.element2D.getAttribute(a));break}return s},getAttributes:function(){var a={},s,o,c=["numberpointshigh","stepsu","stepsv"],h=c.length;for(JXG$1.exists(this.element2D)&&(a=JXG$1.merge(this.element2D.getAttributes())),s=0;s<h;s++)o=c[s],JXG$1.exists(this.visProp[o])&&(a[o]=this.visProp[o]);return a},addTransformGeneric:function(a,s){var o,c=JXG$1.isArray(s)?s:[s],h=c.length;for(this.transformations.length===0&&(this.baseElement=a),o=0;o<h;o++)this.transformations.push(c[o]);return this},setPosition2D:function(a){},projectCoords:function(a,s){},remove:function(){}});JXG$1.GeometryElement3D;JXG$1.createAxes3D=function(a,s,o){var c=s[0],h=["x","y","z"],d="Axis",b=["Rear","Front"],_=[0,0,0],$=[0,0,0],j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1={};if(JXG$1.exists(c.bbox3D))for(j=0;j<h.length;j++)_[j]=c.bbox3D[j][0],$[j]=c.bbox3D[j][1];else for(j=0;j<h.length;j++)_[j]=s[1][j],$[j]=s[2][1];for(Js=JXG$1.copyAttributes(o,a.options,"axes3d"),qs=Js.axesposition,j=0;j<h.length;j++)zo=h[j],r1=zo+d,qs==="center"?(Oo=[0,0,0],tu=[0,0,0],tu[j]=$[j],s1[r1]=c.create("axis3d",[Oo,tu],Js[r1.toLowerCase()]),s1[r1].view=c):qs==="border"&&(r1+="Border",Oo=_.slice(),tu=$.slice(),zo==="z"?(Oo[1]=$[1],tu[0]=_[0]):zo==="x"?(Oo=[_[0],$[1],_[2]],tu=[$[0],$[1],_[2]]):(Oo=[$[0],_[1],_[2]],tu=[$[0],$[1],_[2]]),tu[j]=$[j],s1[r1]=c.create("axis3d",[Oo,tu],Js[r1.toLowerCase()]),s1[r1].view=c,i1=Js[r1.toLowerCase()].ticks3d,i1.element3d=!0,eu=$[j]-_[j],zo==="x"?s1[r1+"Ticks"]=c.create("ticks3d",[Oo,[1,0,0],eu,[0,1,0]],i1):zo==="y"?s1[r1+"Ticks"]=c.create("ticks3d",[Oo,[0,1,0],eu,[1,0,0]],i1):s1[r1+"Ticks"]=c.create("ticks3d",[Oo,[0,0,1],eu,[0,1,0]],i1),s1[r1+"Ticks"].view=c);for(qs==="center"?(s1.O=c.create("intersection",[s1[h[0]+d],s1[h[1]+d]],{name:"",visible:!1,withLabel:!1}),s1.O.view=c):s1.O=null,j=0;j<h.length;j++)for(fr=(j+1)%3,Jr=(j+2)%3,zo=h[j],Xt=0;Xt<b.length;Xt++)r1=zo+"Plane"+b[Xt],Oo=[0,0,0],Oo[j]=Xt===0?_[j]:$[j],Bo=[0,0,0],vu=[0,0,0],Bo[fr]=1,vu[Jr]=1,t1=[_[fr],$[fr]],e1=[_[Jr],$[Jr]],Js=JXG$1.copyAttributes(o,a.options,"axes3d",r1),s1[r1]=c.create("plane3d",[Oo,Bo,vu,t1,e1],Js),s1[r1].elType="axisplane3d";for(j=0;j<h.length;j++)for(zo=h[j],Xt=0;Xt<b.length;Xt++)for(Lt=1;Lt<=2;Lt++)fr=(j+Lt)%3,js=h[fr],r1=zo+"Plane"+b[Xt]+js.toUpperCase()+"Axis",a1=zo+"Plane"+b[Xt],Oo=[0,0,0],tu=[0,0,0],Oo[j]=tu[j]=Xt===0?_[j]:$[j],Oo[fr]=_[fr],tu[fr]=$[fr],Js=JXG$1.copyAttributes(o,a.options,"axes3d",r1),s1[r1]=c.create("axis3d",[Oo,tu],Js),s1[r1].view=c,s1[a1].addChild(s1[r1]),s1[a1].element2D.inherits.push(s1[r1]);return s1};JXG$1.registerElement("axes3d",JXG$1.createAxes3D);JXG$1.createAxis3D=function(a,s,o){var c=s[0],h,d=s[1],b=s[2],_,$,j;return h=JXG$1.copyAttributes(o.point1,a.options,"axis3d","point1"),h.element3d=!0,_=c.create("point",[function(Xt,Lt,fr){return function(){return c.project3DTo2D(Xt,Lt,fr)[1]}}(d[0],d[1],d[2]),function(Xt,Lt,fr){return function(){return c.project3DTo2D(Xt,Lt,fr)[2]}}(d[0],d[1],d[2])],h),h=JXG$1.copyAttributes(o.point2,a.options,"axis3d","point2"),h.element3d=!0,$=c.create("point",[function(Xt,Lt,fr){return function(){return c.project3DTo2D(Xt,Lt,fr)[1]}}(b[0],b[1],b[2]),function(Xt,Lt,fr){return function(){return c.project3DTo2D(Xt,Lt,fr)[2]}}(b[0],b[1],b[2])],h),h=JXG$1.copyAttributes(o,a.options,"axis3d"),h.element3d=!0,j=c.create("arrow",[_,$],h),j};JXG$1.registerElement("axis3d",JXG$1.createAxis3D);JXG$1.createMesh3D=function(a,s,o){var c=s[0],h,d;return h=JXG$1.copyAttributes(o,a.options,"mesh3d"),h.element3d=!0,d=c.create("curve",[[],[]],h),d.point=s[1],d.direction1=s[2],d.direction2=s[3],d.range1=s[4],d.range2=s[5],d.updateDataArray=function(){var b=JXG$1.evaluate(this.range1),_=JXG$1.evaluate(this.range2),$=b[0],j=b[1],Xt=_[0],Lt=_[1],fr,Jr,Js,qs,zo=[0,0,0],js=[0,0,0],eu=this.evalVisProp("stepwidthu"),Oo=this.evalVisProp("stepwidthv"),tu=[0,0,0];if(this.dataX=[],this.dataY=[],JXG$1.isFunction(this.point))tu=this.point();else if(JXG$1.isPoint3D(this.point))tu=this.point.coords;else for(qs=0;qs<this.point.length;qs++)tu[qs]=JXG$1.evaluate(this.point[qs]);if(JXG$1.isFunction(this.direction1))zo=JXG$1.evaluate(this.direction1);else for(qs=0;qs<this.direction1.length;qs++)zo[qs]=JXG$1.evaluate(this.direction1[qs]);if(JXG$1.isFunction(this.direction2))js=JXG$1.evaluate(this.direction2);else for(qs=0;qs<this.direction2.length;qs++)js[qs]=JXG$1.evaluate(this.direction2[qs]);for(tu.length===4&&(tu=tu.slice(1)),zo.length===4&&(zo=zo.slice(1)),js.length===4&&(js=js.slice(1)),fr=JXG$1.Math.norm(zo,3),Jr=JXG$1.Math.norm(js,3),qs=0;qs<3;qs++)zo[qs]/=fr,js[qs]/=Jr;Js=c.getMesh([function(Bo,vu){return tu[0]+Bo*zo[0]+vu*js[0]},function(Bo,vu){return tu[1]+Bo*zo[1]+vu*js[1]},function(Bo,vu){return tu[2]+Bo*zo[2]+vu*js[2]}],[Math.ceil($),Math.floor(j),(Math.ceil(j)-Math.floor($))/eu],[Math.ceil(Xt),Math.floor(Lt),(Math.ceil(Lt)-Math.floor(Xt))/Oo]),this.dataX=Js[0],this.dataY=Js[1]},d};JXG$1.registerElement("mesh3d",JXG$1.createMesh3D);JXG$1.Circle3D=function(a,s,o,c,h){var d,b;this.constructor(a.board,h,Const.OBJECT_TYPE_CIRCLE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"circle3d"),this.center=this.board.select(s),this.normalFunc=o,this.normal=[0,0,0,0],this.curve,this.frame1,this.frame2,JXG$1.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),this.updateRadius=JXG$1.createFunction(c,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.updateNormal(),this.frame1=Mat.crossProduct(this.normal.slice(1),[1,0,0]),this.frame1.unshift(0),d=Mat.crossProduct(this.normal.slice(1),[-.5,.8660254037844386,0]),d.unshift(0),Mat.norm(d)>Mat.norm(this.frame1)&&(this.frame1=d),this.frame2=Mat.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),b=this,this.curve=a.create("curve3d",[function(_){var $=b.Radius(),j=Math.sin(_),Xt=Math.cos(_);return[b.center.coords[1]+$*(Xt*b.frame1[1]+j*b.frame2[1]),b.center.coords[2]+$*(Xt*b.frame1[2]+j*b.frame2[2]),b.center.coords[3]+$*(Xt*b.frame1[3]+j*b.frame2[3])]},[0,2*Math.PI]],h)};JXG$1.Circle3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Circle3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Circle3D.prototype,{update:function(){return this.needsUpdate&&(this.updateNormal().updateFrame(),this.curve.visProp.visible=!isNaN(this.Radius())),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(a){return this.updateRadius=JXG$1.createFunction(a,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(a){return JXG$1.exists(a)?(this.setRadius(a),this.Radius()):Math.abs(this.updateRadius())},normalizeFrame:function(){var a=Mat.norm(this.frame1),s=Mat.norm(this.frame2),o;for(o=0;o<4;o++)this.frame1[o]/=a,this.frame2[o]/=s;return this},updateNormal:function(){var a,s,o=1e-12;if(this.normal=JXG$1.evaluate(this.normalFunc),s=Mat.norm(this.normal),Math.abs(s)>o)for(a=0;a<4;a++)this.normal[a]/=s;return this},updateFrame:function(){return this.frame1=Mat.crossProduct(this.frame2.slice(1),this.normal.slice(1)),this.frame1.unshift(0),this.frame2=Mat.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),this},projectCoords:function(a,s){return this.curve.projectCoords(a,s)}});JXG$1.createCircle3D=function(a,s,o){var c=s[0],h=JXG$1.copyAttributes(o,a.options,"circle3d"),d=JXG$1.providePoints3D(c,[s[1]],o,"circle3d",["point"])[0],b=s[2],_=s[3],$;return $=new JXG$1.Circle3D(c,d,b,_,h),$.curve.addParents([$]),$.addChild($.curve),$.update(),$};JXG$1.registerElement("circle3d",JXG$1.createCircle3D);JXG$1.createIntersectionCircle3D=function(a,s,o){var c=s[0],h=s[1],d=s[2],b,_,$,j=JXG$1.copyAttributes(o,a.options,"intersectioncircle3d");$=Geometry.intersectionFunction3D(c,h,d),_=c.create("point3d",$[0],{visible:!1}),b=c.create("circle3d",[_,$[1],$[2]],j);try{h.addChild(b),d.addChild(b)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof s[1]+"' and '"+typeof s[2]+"'.")}return b.type=Const.OBJECT_TYPE_INTERSECTION_CIRCLE3D,b.elType="intersectioncircle3d",b.setParents([h.id,d.id]),b};JXG$1.registerElement("intersectioncircle3d",JXG$1.createIntersectionCircle3D);JXG$1.Point3D=function(a,s,o,c){this.constructor(a.board,c,Const.OBJECT_TYPE_POINT3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.initialCoords=[0,0,0,0],this.F=s,this.slide=o,this.position=[],this.movePath=[],this.moveCallback=null,this.moveInterval=null,this._c2d=null,this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Point3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Point3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Point3D.prototype,{X:function(){return this.coords[1]},Y:function(){return this.coords[2]},Z:function(){return this.coords[3]},W:function(){return this.coords[0]},updateCoords:function(){var a,s=0;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,s=1),a=0;a<this.F.length;a++)JXG$1.isFunction(this.F[a])&&(this.coords[s+a]=JXG$1.evaluate(this.F[a]));return this},initCoords:function(){var a,s=0;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,s=1),a=0;a<this.F.length;a++)this.coords[s+a]=JXG$1.evaluate(this.F[a]);return this.initialCoords=this.coords.slice(),this},normalizeCoords:function(){return Math.abs(this.coords[0])>1e-14&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(a,s){var o=this.coords;return a.length===3?(o[0]=1,o[1]=a[0],o[2]=a[1],o[3]=a[2]):(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[2],this.normalizeCoords()),this},addTransform:function(a,s){return this.addTransformGeneric(a,s),this},updateTransform:function(){var a,s;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?a=this.initialCoords:a=this.baseElement.coords,s=0;s<this.transformations.length;s++)this.transformations[s].update(),a=Mat.matVecMult(this.transformations[s].matrix,a);return this.coords=a,this},update:function(a){var s,o,c;return this.element2D.draggable()&&Geometry.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?s=this.view.project2DTo3DVertical(this.element2D,this.coords):(o=[1,0,0,this.coords[3]],s=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],o)),s[0]!==0&&(c=this.view.project3DToCube(s),this.coords=c[0],c[1]&&this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords().updateTransform(),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position)),s=this.coords,this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(s)),this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],s)),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>1e-12},distance:function(a){var s=1e-12,o=this.coords,c=a.coords;return o[0]*o[0]>s&&c[0]*c[0]>s?Mat.hypot(c[1]-o[1],c[2]-o[2],c[3]-o[3]):Number.POSITIVE_INFINITY},moveTo:function(a,s,o){o=o||{};var c,h=Math.ceil(s/this.board.attr.animationdelay),d=a[0],b=a[1],_=a[2],$=this.coords[1]-d,j=this.coords[2]-b,Xt=this.coords[3]-_,Lt=()=>{},fr;if(o.callback&&(Lt=o.callback),fr=function(Jr){var Js=Jr/h;if(o.effect){if(o.effect==="<>")return Math.pow(Math.sin(Js*Math.PI/2),2);if(o.effect==="<")return Js*Js*Js;if(o.effect===">")return 1-Math.pow(1-Js,3);if(o.effect==="==")return Jr/h;throw new Error("valid effects are '==', '<>', '>', and '<'.")}return Jr/h},!JXG$1.exists(s)||s===0)return this.setPosition([d,b,_],!0),this.board.update(this);if(!JXG$1.exists(o.callback)&&Math.abs($)<Mat.eps&&Math.abs(j)<Mat.eps&&Math.abs(Xt)<Mat.eps)return this;for(this.animationPath=[],c=h;c>=0;c--)this.animationPath[h-c]=[d+$*fr(c),b+j*fr(c),_+Xt*fr(c)];return this.moveAlong(this.animationPath,s,{callback:Lt})},moveAlong:function(a,s,o){let c=s/a.length;if(JXG$1.isObject(o)&&"callback"in o&&(this.moveCallback=o.callback),this.movePath.length>0){this.movePath=a;return}return this.movePath=a,new Promise((h,d)=>{this.moveInterval=setInterval(()=>{if(this.movePath.length>0){let b=this.movePath.shift();this.setPosition(b,!0),this.board.update(this)}this.movePath.length===0&&(clearInterval(this.moveInterval),h(),JXG$1.isFunction(this.moveCallback)&&this.moveCallback())},c)})},__evt__update3D:function(a){}});JXG$1.createPoint3D=function(a,s,o){var c=s[0],h,d,b,_,$,j=null,Xt=null;if(s.length>2&&JXG$1.exists(s[s.length-1].is3D)&&!JXG$1.isTransformationOrArray(s[s.length-1])?b=s.pop():b=null,s.length===2)d=s[1];else if(s.length===3&&JXG$1.isPoint3D(s[1])&&JXG$1.isTransformationOrArray(s[2]))d=[0,0,0],j=s[1],Xt=s[2];else if(s.length===4)d=s.slice(1);else if(s.length===5)d=s.slice(1);else throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [[x,y,z]], [x,y,z], or [[x,y,z], slide], () => [x, y, z], or [point, transformation(s)]`);return h=JXG$1.copyAttributes(o,a.options,"point3d"),$=new JXG$1.Point3D(c,d,b,h),$.initCoords(),j!==null&&Xt!==null&&$.addTransform(j,Xt),_=c.project3DTo2D($.coords),h=$.setAttr2D(h),$.element2D=c.create("point",_,h),$.element2D.view=c,$.addChild($.element2D),$.inherits.push($.element2D),$.element2D.setParents($),$.slide&&($.slide.addChild($),$.setParents($.slide)),j&&$.setParents(j),$._c2d=$.element2D.coords.usrCoords.slice(),$};JXG$1.registerElement("point3d",JXG$1.createPoint3D);JXG$1.Curve3D=function(a,s,o,c,h,d,b){this.constructor(a.board,b,Const.OBJECT_TYPE_CURVE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"curve3d"),this.board.finalizeAdding(this),this._F=s,this._X=o,this._Y=c,this._Z=h,this.points=[],this.numberPoints=0,this.dataX=null,this.dataY=null,this.dataZ=null,this._F!==null?(this._X=function(_){return this._F(_)[0]},this._Y=function(_){return this._F(_)[1]},this._Z=function(_){return this._F(_)[2]}):JXG$1.isFunction(this._X)?this._F=function(_){return[this._X(_),this._Y(_),this._Z(_)]}:this._F=null,this.range=d,this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Curve3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Curve3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Curve3D.prototype,{updateCoords:function(){var a=this.evalVisProp("numberpointshigh"),s,o,c,h,d,b,_=[1,0,0,0];if(this.points=[],JXG$1.exists(this.dataX))for(a=this.dataX.length,d=0;d<a;d++)this.points.push([1,this.dataX[d],this.dataY[d],this.dataZ[d]]);else if(JXG$1.isArray(this._X))for(a=this._X.length,d=0;d<a;d++)this.points.push([1,this._X[d],this._Y[d],this._Z[d]]);else for(s=JXG$1.evaluate(this.range),o=JXG$1.evaluate(s[0]),c=JXG$1.evaluate(s[1]),h=(c-o)/(a-1),b=0,d=o;b<a&&d<=c;b++,d+=h)_=this.F(d),_.unshift(1),this.points.push(_);return this.numberPoints=this.points.length,this},evalF:function(a){var s,o,c=[0,0,0,0];if(this.transformations.length===0||!JXG$1.exists(this.baseElement))return JXG$1.exists(this._F)?c=this._F(a):c=[this._X[a],this._Y[a],this._Z[a]],c;for(s=this.transformations,o=0;o<s.length;o++)s[o].update();for(c.length===3&&c.unshift(1),this===this.baseElement?JXG$1.exists(this._F)?c=this._F(a):c=[this._X[a],this._Y[a],this._Z[a]]:c=this.baseElement.evalF(a),c.unshift(1),c=Mat.matVecMult(s[0].matrix,c),o=1;o<s.length;o++)c=Mat.matVecMult(s[o].matrix,c);return c.slice(1)},F:function(a){return this.evalF(a)},X:function(a){return this.evalF(a)[0]},Y:function(a){return this.evalF(a)[1]},Z:function(a){return this.evalF(a)[2]},updateDataArray2D:function(){var a,s,o=[],c=[],h=this.points.length;for(a=0;a<h;a++)s=this.view.project3DTo2D(this.points[a]),o.push(s[1]),c.push(s[2]);return{X:o,Y:c}},addTransform:function(a,s){return this.addTransformGeneric(a,s),this},updateTransform:function(){var a,s,o,c,h;if(this.transformations.length===0||this.baseElement===null||JXG$1.exists(this._F))return this;for(a=this.transformations,o=0;o<a.length;o++)a[o].update();for(h=this.baseElement.numberPoints,o=0;o<h;o++){for(this===this.baseElement?s=this.points[o]:s=this.baseElement.points[o],c=0;c<a.length;c++)s=Mat.matVecMult(a[c].matrix,s);this.points[o]=s}return this.numberPoints=h,this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords().updateTransform()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(a,s){return Geometry.projectCoordsToParametric(a,this,1,s)}});JXG$1.createCurve3D=function(a,s,o){var c=s[0],h,d,b,_,$,j,Xt,Lt,fr=null,Jr=null;return s.length===3?JXG$1.isTransformationOrArray(s[2])&&s[1].type===Const.OBJECT_TYPE_CURVE3D?(fr=s[1],Jr=s[2],h=null,d=[],b=[],_=[]):(h=s[1],$=s[2],d=null,b=null,_=null):s.length===2&&JXG$1.isArray(s[1])?(Lt=Mat.transpose(s[1]),d=Lt[0],b=Lt[1],_=Lt[2],h=null):(d=s[1],b=s[2],_=s[3],$=s[4],h=null),j=JXG$1.copyAttributes(o,a.options,"curve3d"),Xt=new JXG$1.Curve3D(c,h,d,b,_,$,j),j=Xt.setAttr2D(j),Xt.element2D=c.create("curve",[[],[]],j),Xt.element2D.view=c,fr!==null&&(Xt.addTransform(fr,Jr),Xt.addParents(fr)),Xt.element2D.updateDataArray=function(){var Js=Xt.updateDataArray2D();this.dataX=Js.X,this.dataY=Js.Y},Xt.addChild(Xt.element2D),Xt.inherits.push(Xt.element2D),Xt.element2D.setParents(Xt),Xt.element2D.prepareUpdate().update(),a.isSuspendedUpdate||Xt.element2D.updateVisibility().updateRenderer(),Xt};JXG$1.registerElement("curve3d",JXG$1.createCurve3D);JXG$1.createVectorfield3D=function(a,s,o){var c=s[0],h,d;if(!(s.length>=5&&(JXG$1.isArray(s[1])||JXG$1.isFunction(s[1])||JXG$1.isString(s[1]))&&JXG$1.isArray(s[2])&&s[1].length===3&&JXG$1.isArray(s[3])&&s[2].length===3&&JXG$1.isArray(s[4])&&s[3].length===3))throw new Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof s[1]+"', '"+typeof s[2]+"', '"+typeof s[3]+"'.'"+typeof s[4]+"', ");return d=JXG$1.copyAttributes(o,a.options,"vectorfield3d"),h=c.create("curve3d",[[],[],[]],d),h.setF=function(b,_){var $,j,Xt;return JXG$1.isArray(b)?($=JXG$1.createFunction(b[0],this.board,_),j=JXG$1.createFunction(b[1],this.board,_),Xt=JXG$1.createFunction(b[2],this.board,_),this.F=function(Lt,fr,Jr){return[$(Lt,fr,Jr),j(Lt,fr,Jr),Xt(Lt,fr,Jr)]}):this.F=JXG$1.createFunction(b,h.board,_),this},h.setF(s[1],"x, y, z"),h.xData=s[2],h.yData=s[3],h.zData=s[4],h.updateDataArray=function(){var b,_,$,j,Xt,Lt,fr,Jr,Js=this.evalVisProp("scale"),qs=[JXG$1.evaluate(this.xData[0]),JXG$1.evaluate(this.yData[0]),JXG$1.evaluate(this.zData[0])],zo=[JXG$1.evaluate(this.xData[1]),JXG$1.evaluate(this.yData[1]),JXG$1.evaluate(this.zData[1])],js=[JXG$1.evaluate(this.xData[2]),JXG$1.evaluate(this.yData[2]),JXG$1.evaluate(this.zData[2])],eu=[(js[0]-qs[0])/zo[0],(js[1]-qs[1])/zo[1],(js[2]-qs[2])/zo[2]],Oo,tu,Bo,vu,t1=this.evalVisProp("arrowhead.enabled"),e1,r1,a1,i1,s1;for(t1&&(e1=this.evalVisProp("arrowhead.size"),s1=this.evalVisProp("arrowhead.angle"),r1=e1/a.unitX,a1=e1/a.unitY,i1=e1/Math.sqrt(a.unitX*a.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],_=0,Lt=qs[0];_<=zo[0];Lt+=eu[0],_++)for($=0,fr=qs[1];$<=zo[1];fr+=eu[1],$++)for(b=0,Jr=qs[2];b<=zo[2];Jr+=eu[2],b++)j=this.F(Lt,fr,Jr),Xt=Mat.norm(j),!(Xt<Number.EPSILON)&&(j[0]*=Js,j[1]*=Js,j[2]*=Js,JXG$1.concat(this.dataX,[Lt,Lt+j[0],NaN]),JXG$1.concat(this.dataY,[fr,fr+j[1],NaN]),JXG$1.concat(this.dataZ,[Jr,Jr+j[2],NaN]),t1&&(Xt*=Js,Oo=Math.atan2(j[1],j[0]),vu=Math.asin(j[2]/Xt),tu=vu-s1,Bo=vu+s1,JXG$1.concat(this.dataX,[Lt+j[0]-r1*Math.cos(Oo)*Math.cos(tu),Lt+j[0],Lt+j[0]-r1*Math.cos(Oo)*Math.cos(Bo),NaN]),JXG$1.concat(this.dataY,[fr+j[1]-a1*Math.sin(Oo)*Math.cos(tu),fr+j[1],fr+j[1]-a1*Math.sin(Oo)*Math.cos(Bo),NaN]),JXG$1.concat(this.dataZ,[Jr+j[2]-i1*Math.sin(Bo),Jr+j[2],Jr+j[2]-i1*Math.sin(tu),NaN])))},h.methodMap=JXG$1.deepCopy(h.methodMap,{setF:"setF"}),h};JXG$1.registerElement("vectorfield3D",JXG$1.createVectorfield3D);JXG$1.Line3D=function(a,s,o,c,h){this.constructor(a.board,h,Const.OBJECT_TYPE_LINE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"line3d"),this.point=s,this.direction=o,this.vec=[0,0,0,0],this.range=c||[-1/0,1/0],this.point1=null,this.point2=null,this.board.finalizeAdding(this),this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Line3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Line3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Line3D.prototype,{updateCoords:function(){var a,s=0;if(JXG$1.exists(this.direction.view)&&this.direction.type===Const.OBJECT_TYPE_LINE3D)this.vec=this.direction.vec.slice();else if(JXG$1.isFunction(this.direction))this.vec=JXG$1.evaluate(this.direction),this.vec.length===3&&this.vec.unshift(0);else for(this.direction.length===3&&(this.vec[0]=0,s=1),a=0;a<this.direction.length;a++)this.vec[s+a]=JXG$1.evaluate(this.direction[a]);return this},getPointCoords:function(a){var s=[],o=[],c;return s=this.point.coords,o=this.vec,c=JXG$1.evaluate(a),a=this.view.intersectionLineCube(s,o,c),Math.abs(a)===1/0&&(a=0),[s[0]+o[0]*a,s[1]+o[1]*a,s[2]+o[2]*a,s[3]+o[3]*a]},addTransform:function(a,s){return this.point.addTransform(a.point,s),this.addTransformGeneric(a,s),this},updateTransform:function(){var a,s;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?a=this.vec:a=this.baseElement.vec,s=0;s<this.transformations.length;s++)this.transformations[s].update(),a=Mat.matVecMult(this.transformations[s].matrix,a);return this.vec=a,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},setPosition2D:function(a){var s,o;for(s=0;s<this.parents.length;s++)o=this.view.select(this.parents[s]),o.elType==="point3d"&&o.element2D.draggable()&&a.applyOnce(o.element2D);this.endpoints[0].update(),this.endpoints[1].update()},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(a,s){var o=this.getPointCoords(0),c=this.getPointCoords(1),h=[c[0]-o[0],c[1]-o[1],c[2]-o[2]],d=[a[0]-o[0],a[1]-o[1],a[2]-o[2]],b=Mat.innerProduct(d,h)/Mat.innerProduct(h,h),_=Math.min(Math.max(b,JXG$1.evaluate(this.range[0])),JXG$1.evaluate(this.range[1])),$;return $=this.getPointCoords(_).slice(),s[0]=_,$},updateZIndex:function(){var a=this.endpoints[0],s=this.endpoints[1],o=[1,a.X()+s.X(),a.Y()+s.Y(),a.Z()+s.Z()];return o[1]*=.5,o[2]*=.5,o[3]*=.5,this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],o),this}});JXG$1.createLine3D=function(a,s,o){var c=s[0],h,d,b,_,$,j,Xt,Lt,fr,Jr=null,Js=null;if(h=JXG$1.copyAttributes(o,a.options,"line3d"),s[1].type===Const.OBJECT_TYPE_LINE3D&&JXG$1.isTransformationOrArray(s[2])&&(Jr=s[1],Js=s[2],d=JXG$1.providePoints3D(c,[[0,0,0,0],[0,0,0,0]],o,"line3d",["point1","point2"])),Jr===null&&(JXG$1.isPoint3D(s[2])||s.length===3&&(JXG$1.isArray(s[2])||JXG$1.isFunction(s[2]))))j=JXG$1.providePoints3D(c,[s[1]],o,"line3d",["point1"])[0],Xt=JXG$1.providePoints3D(c,[s[2]],o,"line3d",["point2"])[0],_=function(){return[0,Xt.X()-j.X(),Xt.Y()-j.Y(),Xt.Z()-j.Z()]},$=[0,1],fr=new JXG$1.Line3D(c,j,_,$,h),fr.prepareUpdate().update(),Lt=JXG$1.providePoints3D(c,[[1,0,0,0],[1,0,0,0]],{visible:!0},"line3d",["point1","point2"]),Lt[0].F=function(){var qs=0;return fr.evalVisProp("straightfirst")&&(qs=-1/0),fr.getPointCoords(qs)},Lt[1].F=function(){var qs=1;return fr.evalVisProp("straightlast")&&(qs=1/0),fr.getPointCoords(qs)},Lt[0].prepareUpdate().update(),Lt[1].prepareUpdate().update(),h=fr.setAttr2D(h),h.straightfirst=!1,h.straightlast=!1,fr.element2D=c.create("segment",[Lt[0].element2D,Lt[1].element2D],h),fr.element2D.view=c,fr.endpoints=Lt,fr.addChild(Lt[0]),fr.addChild(Lt[1]),fr.addParents([j,Xt]);else{if(Jr!==null)b=JXG$1.providePoints3D(c,[[0,0,0]],o,"line3d",["point"])[0],_=[0,0,0,1e-4],$=s[3]||[-1/0,1/0];else if(JXG$1.exists(s[2].view)&&s[2].type===Const.OBJECT_TYPE_LINE3D||JXG$1.isFunction(s[2])||s[2].length===3||s[2].length===4)b=JXG$1.providePoints3D(c,[s[1]],o,"line3d",["point"])[0],_=s[2],$=s[3];else throw new Error("JSXGraph: Can't create line3d with parents of type '"+typeof s[1]+", "+typeof s[2]+", "+typeof s[3]+"'.");d=JXG$1.providePoints3D(c,[[1,0,0,0],[1,0,0,0]],o,"line3d",["point1","point2"]),fr=new JXG$1.Line3D(c,b,_,$,h),fr.prepareUpdate().update(),d[0].F=function(){return fr.getPointCoords(JXG$1.evaluate(fr.range[0]))},d[0].prepareUpdate().update(),j=d[0],d[1].F=function(){return fr.getPointCoords(JXG$1.evaluate(fr.range[1]))},d[1].prepareUpdate().update(),Xt=d[1],h=fr.setAttr2D(h),h.straightfirst=!1,h.straightlast=!1,fr.element2D=c.create("segment",[j.element2D,Xt.element2D],h),fr.element2D.view=c,fr.endpoints=d,fr.addParents(b),Jr!==null&&Js!==null&&(fr.addTransform(Jr,Js),fr.addParents(Jr))}return fr.addChild(fr.element2D),fr.inherits.push(fr.element2D),fr.element2D.addParents(fr),fr.point1=j,fr.point2=Xt,fr.point1._is_new?(fr.addChild(fr.point1),delete fr.point1._is_new):fr.point1.addChild(fr),fr.point2._is_new?(fr.addChild(fr.point2),delete fr.point2._is_new):fr.point2.addChild(fr),JXG$1.exists(b)&&(b._is_new?(fr.addChild(b),delete b._is_new):b.addChild(fr)),fr.update(),fr.element2D.prepareUpdate().update().updateRenderer(),fr};JXG$1.registerElement("line3d",JXG$1.createLine3D);JXG$1.Plane3D=function(a,s,o,c,h,d,b){this.constructor(a.board,b,Const.OBJECT_TYPE_PLANE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"plane3d"),this.board.finalizeAdding(this),this.point=s,this.direction1=o,this.direction2=h,this.range_u=c||[-1/0,1/0],this.range_v=d||[-1/0,1/0],this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.mesh3d=null,this.normal=[0,0,0,0],this.d=0,this.updateCoords(),this.updateNormal(),this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Plane3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Plane3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Plane3D.prototype,{F:function(a,s){var o,c,h,d,b;for(c=this.vec1.slice(),h=this.vec2.slice(),d=Mat.norm(c,3),b=Mat.norm(h,3),o=0;o<3;o++)c[o]/=d,h[o]/=b;return[this.point.X()+a*c[0]+s*h[0],this.point.Y()+a*c[1]+s*h[1],this.point.Z()+a*c[2]+s*h[2]]},X:function(a,s){return this.F(a,s)[0]},Y:function(a,s){return this.F(a,s)[1]},Z:function(a,s){return this.F(a,s)[2]},updateCoords:function(){var a,s;if(JXG$1.exists(this.direction1.view)&&this.direction1.type===Const.OBJECT_TYPE_LINE3D)this.vec1=this.direction1.vec.slice();else if(JXG$1.isFunction(this.direction1))this.vec1=JXG$1.evaluate(this.direction1),this.vec1.length===3&&this.vec1.unshift(0);else for(s=0,this.direction1.length===3&&(this.vec1[0]=0,s=1),a=0;a<this.direction1.length;a++)this.vec1[s+a]=JXG$1.evaluate(this.direction1[a]);if(JXG$1.exists(this.direction2.view)&&this.direction2.type===Const.OBJECT_TYPE_LINE3D)this.vec2=this.direction2.vec.slice();else if(JXG$1.isFunction(this.direction2))this.vec2=JXG$1.evaluate(this.direction2),this.vec2.length===3&&this.vec2.unshift(0);else for(s=0,this.direction2.length===3&&(this.vec2[0]=0,s=1),a=0;a<this.direction2.length;a++)this.vec2[s+a]=JXG$1.evaluate(this.direction2[a]);return this},updateNormal:function(){var a,s;if(this.needsUpdate,this.normal=Mat.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),s=Mat.norm(this.normal),Math.abs(s)>Mat.eps*Mat.eps)for(a=0;a<3;a++)this.normal[a]/=s;return this.normal.unshift(0),this.d=Mat.innerProduct(this.point.coords,this.normal,4),this},updateDataArray:function(){var a,s,o,c,h,d,b,_=["xPlaneRear","yPlaneRear","zPlaneRear"],$=[],j=[0,0,0],Xt=[0,0,0],Lt=[0,0,0],fr=[0,0,0],Jr=1e-12,Js,qs,zo,js,eu,Oo,tu,Bo,vu=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),this.elType!=="axisplane3d"&&vu.defaultAxes&&JXG$1.evaluate(this.range_u[0])===-1/0&&JXG$1.evaluate(this.range_u[1])===1/0&&JXG$1.evaluate(this.range_v[0])===-1/0&&JXG$1.evaluate(this.range_v[1])===1/0){for(zo=0;zo<_.length;zo++){if(fr=vu.intersectionPlanePlane(this,vu.defaultAxes[_[zo]]),fr[0]!==!1&&fr[1]!==!1){for(qs=0;qs<$.length&&!(Geometry.distance(fr[0],$[qs][0],4)<Jr&&Geometry.distance(fr[1],$[qs][1],4)<Jr||Geometry.distance(fr[0],$[qs][1],4)<Jr&&Geometry.distance(fr[1],$[qs][0],4)<Jr);qs++);qs===$.length&&$.push(fr.slice())}if(fr=[1,0,0,0],fr[zo+1]=vu.bbox3D[zo][1],Js=Mat.innerProduct(fr,vu.defaultAxes[_[zo]].normal,4),fr=vu.intersectionPlanePlane(this,vu.defaultAxes[_[zo]],Js),fr[0]!==!1&&fr[1]!==!1){for(qs=0;qs<$.length&&!(Geometry.distance(fr[0],$[qs][0],4)<Jr&&Geometry.distance(fr[1],$[qs][1],4)<Jr||Geometry.distance(fr[0],$[qs][1],4)<Jr&&Geometry.distance(fr[1],$[qs][0],4)<Jr);qs++);qs===$.length&&$.push(fr.slice())}}if($.length===0)return{X:this.dataX,Y:this.dataY};Oo=0,tu=Oo,qs=0;do{for(fr=$[tu][qs],fr.length===4&&(h=vu.project3DTo2D(fr),this.dataX.push(h[1]),this.dataY.push(h[2])),qs=(qs+1)%2,fr=$[tu][qs],Bo=tu,zo=0;zo<$.length;zo++){if(zo!==tu&&Geometry.distance(fr,$[zo][0])<Jr){tu=zo,qs=0;break}if(zo!==tu&&Geometry.distance(fr,$[zo][1])<Jr){tu=zo,qs=1;break}}if(tu===Bo){console.log("Error plane3d update: did not find next",tu);break}}while(tu!==Oo);h=vu.project3DTo2D($[Oo][0]),this.dataX.push(h[1]),this.dataY.push(h[2])}else{for(a=JXG$1.evaluate(this.range_u[0]),s=JXG$1.evaluate(this.range_u[1]),o=JXG$1.evaluate(this.range_v[0]),c=JXG$1.evaluate(this.range_v[1]),Lt=this.point.coords,j=this.vec1.slice(),Xt=this.vec2.slice(),d=Mat.norm(j,4),b=Mat.norm(Xt,4),qs=1;qs<4;qs++)j[qs]/=d,Xt[qs]/=b;for(zo=0;zo<4;zo++){switch(zo){case 0:js=a,eu=o;break;case 1:js=s,eu=o;break;case 2:js=s,eu=c;break;case 3:js=a,eu=c}for(qs=0;qs<4;qs++)fr[qs]=Lt[qs]+js*j[qs]+eu*Xt[qs];h=vu.project3DTo2D(fr),this.dataX.push(h[1]),this.dataY.push(h[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},addTransform:function(a,s){return this.addTransformGeneric(a,s),this.point.addTransform(a.point,s),this},updateTransform:function(){var a,s,o;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?(a=this.vec1,s=this.vec2):(a=this.baseElement.vec1,s=this.baseElement.vec2),o=0;o<this.transformations.length;o++)this.transformations[o].update(),a=Mat.matVecMult(this.transformations[o].matrix,a),s=Mat.matVecMult(this.transformations[o].matrix,s);return this.vec1=a,this.vec2=s,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(a,s){return Geometry.projectCoordsToParametric(a,this,2,s)}});JXG$1.createPlane3D=function(a,s,o){var c=s[0],h,d,b,_,$,j,Xt,Lt,fr,Jr,Js=null,qs=null;if(h=JXG$1.copyAttributes(o,a.options,"plane3d"),h.threepoints||JXG$1.isPoint3D(s[2])||JXG$1.isPoint3D(s[3]))d=JXG$1.providePoints3D(c,[s[1]],o,"plane3d",["point1"])[0],b=JXG$1.providePoints3D(c,[s[2]],o,"plane3d",["point2"])[0],_=JXG$1.providePoints3D(c,[s[3]],o,"plane3d",["point3"])[0],$=function(){return[b.X()-d.X(),b.Y()-d.Y(),b.Z()-d.Z()]},j=function(){return[_.X()-d.X(),_.Y()-d.Y(),_.Z()-d.Z()]},Xt=s[4]||[-1/0,1/0],Lt=s[5]||[-1/0,1/0];else{if(s[1].type===Const.OBJECT_TYPE_PLANE3D&&JXG$1.isTransformationOrArray(s[2])?(Js=s[1],qs=s[2],d=JXG$1.providePoints3D(c,[[0,0,0,0]],o,"plane3d",["point"])[0],$=[0,1e-4,0,0],j=[0,0,1e-4,0],Xt=s[3]||[-1/0,1/0],Lt=s[4]||[-1/0,1/0]):(d=JXG$1.providePoints3D(c,[s[1]],o,"plane3d",["point"])[0],$=s[2],j=s[3],Xt=s[4]||[-1/0,1/0],Lt=s[5]||[-1/0,1/0]),d===!1)throw new Error("JSXGraph: Can't create plane3d with first parent of type '"+typeof s[1]+`'.
Possible first parent types are: point3d, array of length 3, function returning an array of length 3.`);if(Js!==null&&s<3||Js===null&&s.length<4)throw new Error("JSXGraph: Can't create plane3d with parents of type '"+typeof s[1]+", "+typeof s[2]+", "+typeof s[3]+", "+typeof s[4]+", "+typeof s[5]+"'.")}return fr=new JXG$1.Plane3D(c,d,$,Xt,j,Lt,h),d.addChild(fr),h=fr.setAttr2D(h),fr.element2D=c.create("curve",[[],[]],h),fr.element2D.view=c,Js!==null&&qs!==null&&(fr.addTransform(Js,qs),fr.addParents(Js)),fr.element2D.updateDataArray=function(){var zo=fr.updateDataArray();this.dataX=zo.X,this.dataY=zo.Y},fr.addChild(fr.element2D),fr.inherits.push(fr.element2D),fr.element2D.setParents(fr),Math.abs(fr.range_u[0])!==1/0&&Math.abs(fr.range_u[1])!==1/0&&Math.abs(fr.range_v[0])!==1/0&&Math.abs(fr.range_v[1])!==1/0&&(h=JXG$1.copyAttributes(h.mesh3d,a.options,"mesh3d"),Jr=c.create("mesh3d",[function(){return d.coords},function(){return fr.vec1},function(){return fr.vec2},fr.range_u,fr.range_v],h),fr.mesh3d=Jr,fr.addChild(Jr),fr.inherits.push(Jr),fr.element2D.inherits.push(Jr),Jr.setParents(fr),fr.mesh3d.view=c),fr.element2D.prepareUpdate().update(),a.isSuspendedUpdate||fr.element2D.updateVisibility().updateRenderer(),fr};JXG$1.registerElement("plane3d",JXG$1.createPlane3D);JXG$1.createIntersectionLine3D=function(a,s,o){var c=s[0],h=s[1],d=s[2],b,_,$,j=JXG$1.copyAttributes(o,a.options,"intersectionline3d"),Xt=[];for($=Geometry.intersectionFunction3D(c,h,d),_=0;_<2;_++)Xt[_]=c.create("point3d",$[_],j["point"+(_+1)]);b=c.create("line3d",Xt,j);try{h.addChild(b),d.addChild(b)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof s[1]+"' and '"+typeof s[2]+"'.")}return b.type=Const.OBJECT_TYPE_INTERSECTION_LINE3D,b.elType="intersectionline3d",b.setParents([h.id,d.id]),b};JXG$1.registerElement("intersectionline3d",JXG$1.createIntersectionLine3D);JXG$1.Text3D=function(a,s,o,c,h){this.constructor(a.board,h,Const.OBJECT_TYPE_TEXT3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"text3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=s,this.slide=c,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this.position=[],this._c2d=null,this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Text3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Text3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Text3D.prototype,{updateCoords:function(){var a;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,a=0;a<3;a++)JXG$1.isFunction(this.F[a])&&(this.coords[a+1]=JXG$1.evaluate(this.F[a]));return this},initCoords:function(){var a;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,a=0;a<3;a++)this.coords[a+1]=JXG$1.evaluate(this.F[a]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>Mat.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(a,s){var o=this.coords;return a.length===3?(o[0]=1,o[1]=a[0],o[2]=a[1],o[3]=a[2]):(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[2],this.normalizeCoords()),this},update:function(a){var s,o,c;return this.element2D.draggable()&&Geometry.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?s=this.view.project2DTo3DVertical(this.element2D,this.coords):(o=[1,0,0,this.coords[3]],s=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],o)),s[0]!==0&&(c=this.view.project3DToCube(s),this.coords=c[0],c[1]&&this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords(),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position)),s=this.coords,this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(s)),this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],s),this.element2D.prepareUpdate().update()),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>Mat.eps},__evt__update3D:function(a){}});JXG$1.createText3D=function(a,s,o){var c=s[0],h,d,b,_,$,j;if(s.length>2&&JXG$1.exists(s[s.length-1].is3D)?b=s.pop():b=null,s.length===3)d=s[1],_=s[2];else if(s.length===5)d=s.slice(1,4),_=s[4];else throw new Error("JSXGraph: Can't create text3d with parent types '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [[x,y,z], text], [x,y,z, text]`);return h=JXG$1.copyAttributes(o,a.options,"text3d"),j=new JXG$1.Text3D(c,d,_,b,h),j.initCoords(),$=c.project3DTo2D(j.coords),h=j.setAttr2D(h),j.element2D=c.create("text",[$[1],$[2],_],h),j.element2D.view=c,j.addChild(j.element2D),j.inherits.push(j.element2D),j.element2D.setParents(j),j.slide&&(j.slide.addChild(j),j.setParents(j.slide)),j._c2d=j.element2D.coords.usrCoords.slice(),j};JXG$1.registerElement("text3d",JXG$1.createText3D);JXG$1.createTicks3D=function(a,s,o){var c=s[0],h=s[1],d=s[2],b=s[3],_=s[4],$,j;return j=JXG$1.copyAttributes(o,a.options,"ticks3d"),$=c.create("curve",[[],[]],j),$.point=h,$.direction1=d,$.len=b,$.direction2=_,$.drawLabels=function(Xt){var Lt=0,fr=this.len,Jr=this.evalVisProp("ticksdistance"),Js=this.evalVisProp("tickendings"),qs=this.evalVisProp("majorheight"),zo,js,eu,Oo,tu,Bo,vu,t1=[0,0,0],e1=[0,0,0],r1=[0,0,0],a1=[];if(qs/=Math.sqrt(a.unitX*a.unitY),zo=qs*Js[1]*2,this.dataX=[],this.dataY=[],JXG$1.isFunction(this.point))r1=this.point().slice(1);else for(Oo=0;Oo<3;Oo++)r1[Oo]=JXG$1.evaluate(this.point[Oo]);for(Oo=0;Oo<3;Oo++)t1[Oo]=JXG$1.evaluate(this.direction1[Oo]),e1[Oo]=JXG$1.evaluate(this.direction2[Oo]);for(js=JXG$1.Math.norm(t1,3),eu=JXG$1.Math.norm(e1,3),Oo=0;Oo<3;Oo++)t1[Oo]/=js,e1[Oo]/=eu;if(!(Math.abs(Jr)<Mat.eps)){for(tu=Lt;tu<=fr;tu+=Jr){for(vu=[r1[0]+tu*t1[0]+zo*e1[0],r1[1]+tu*t1[1]+zo*e1[1],r1[2]+tu*t1[2]+zo*e1[2]],Oo=0;Oo<3;Oo++)t1[Oo]!==0&&(Bo=r1[Oo]+tu*t1[Oo]);a1.push(c.create("text3d",[vu,Bo],Xt))}return a1}},$.evalVisProp("drawlabels")&&($.labels=$.drawLabels(j.label)),$.updateDataArray=function(){var Xt=0,Lt=this.len,fr=this.evalVisProp("ticksdistance"),Jr=this.evalVisProp("tickendings"),Js=this.evalVisProp("majorheight"),qs,zo,js,eu,Oo,tu,Bo,vu,t1=[0,0,0],e1=[0,0,0],r1=[0,0,0];if(Js/=Math.sqrt(a.unitX*a.unitY),qs=Js*-Jr[0],zo=Js*Jr[1],this.dataX=[],this.dataY=[],JXG$1.isFunction(this.point))r1=this.point().slice(1);else for(Oo=0;Oo<3;Oo++)r1[Oo]=JXG$1.evaluate(this.point[Oo]);for(Oo=0;Oo<3;Oo++)t1[Oo]=JXG$1.evaluate(this.direction1[Oo]),e1[Oo]=JXG$1.evaluate(this.direction2[Oo]);for(js=JXG$1.Math.norm(t1,3),eu=JXG$1.Math.norm(e1,3),Oo=0;Oo<3;Oo++)t1[Oo]/=js,e1[Oo]/=eu;if(!(Math.abs(fr)<Mat.eps))for(tu=Xt;tu<=Lt;tu+=fr)vu=[r1[0]+tu*t1[0]+qs*e1[0],r1[1]+tu*t1[1]+qs*e1[1],r1[2]+tu*t1[2]+qs*e1[2]],Bo=c.project3DTo2D(vu),this.dataX.push(Bo[1]),this.dataY.push(Bo[2]),vu=[r1[0]+tu*t1[0]+zo*e1[0],r1[1]+tu*t1[1]+zo*e1[1],r1[2]+tu*t1[2]+zo*e1[2]],Bo=c.project3DTo2D(vu),this.dataX.push(Bo[1]),this.dataY.push(Bo[2]),this.dataX.push(NaN),this.dataY.push(NaN)},$};JXG$1.registerElement("ticks3d",JXG$1.createTicks3D);JXG$1.Polygon3D=function(a,s,o){var c;for(this.constructor(a.board,o,Const.OBJECT_TYPE_POLYGON3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"polygon3d"),this.board.finalizeAdding(this),this.vertices=[],c=0;c<s.length;c++)this.vertices[c]=this.board.select(s[c]),this.vertices[c]._is_new&&(delete this.vertices[c]._is_new,this.vertices[c]._is_new_pol=!0)};JXG$1.Polygon3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Polygon3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Polygon3D.prototype,{update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this},updateZIndex:function(){var a,s=this.vertices.length,o=[1,0,0,0];if(s<=0)return[NaN,NaN,NaN,NaN];for(a=0;a<s;a++)o[1]+=this.vertices[a].coords[1],o[2]+=this.vertices[a].coords[2],o[3]+=this.vertices[a].coords[3];return o[1]/=s,o[2]/=s,o[3]/=s,this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],o),this}});JXG$1.createPolygon3D=function(a,s,o){var c=s[0],h,d,b,_,$=[],j=[],Xt,Lt,fr=!1;if(Xt=JXG$1.copyAttributes(o,a.options,"polygon3d"),_=a.select(s[1]),_===null&&(_=s[1]),JXG$1.isObject(_)&&_.type===Const.OBJECT_TYPE_POLYGON3D&&JXG$1.isTransformationOrArray(s[2]))for(fr=!0,b=_.vertices.length-1,Lt=JXG$1.copyAttributes(o,a.options,"polygon3d","vertices"),d=0;d<b;d++)Lt.withlabel&&(Lt.name=_.vertices[d].name===""?"":_.vertices[d].name+"'"),$.push(a.create("point3d",[_.vertices[d],s[2]],Lt));else if(JXG$1.isArray(s[1])&&s[1].every(Jr=>JXG$1.isPoint3D(Jr)))$=s[1];else if($=JXG$1.providePoints3D(c,s.slice(1),o,"polygon3d",["vertices"]),$===!1)throw new Error("JSXGraph: Can't create polygon3d with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon3d and a transformation can be supplied");for(h=new JXG$1.Polygon3D(c,$,Xt),h.isDraggable=!0,Xt=h.setAttr2D(Xt),d=0;d<$.length;d++)j.push($[d].element2D);if(h.element2D=a.create("polygon",j,Xt),h.element2D.view=c,h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),fr)for(h.prepareUpdate().update().updateVisibility().updateRenderer(),b=_.vertices.length-1,d=0;d<b;d++)$[d].prepareUpdate().update().updateVisibility().updateRenderer();return h};JXG$1.registerElement("polygon3d",JXG$1.createPolygon3D);JXG$1.Face3D=function(a,s,o,c){this.constructor(a.board,c,Const.OBJECT_TYPE_FACE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"face3d"),this.board.finalizeAdding(this),this.polyhedron=s,this.faceNumber=o,this.normal=[0,0,0,0],this.d=0,this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.faceNumber===0&&this.updateCoords(),this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Face3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Face3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Face3D.prototype,{updateCoords:function(){var a,s,o,c,h=this.polyhedron;for(a in h.vertices){if(c=h.vertices[a],JXG$1.isFunction(c))h.coords[a]=JXG$1.evaluate(c);else if(JXG$1.isArray(c))for(h.coords[a]=[],o=c.length,s=0;s<o;s++)h.coords[a][s]=JXG$1.evaluate(c[s]);else if(c=h.view.select(c),JXG$1.isPoint3D(c))h.coords[a]=c.coords;else throw new Error("Polyhedron3D.updateCoords: unknown vertices type!");h.coords[a].length===3&&h.coords[a].unshift(1)}return this},updateDataArray2D:function(){var a,s,o,c,h=[],d=[],b=this.polyhedron,_=b.faces[this.faceNumber];if(this.faceNumber===0)for(a in b.vertices)b.coords2D[a]=[];for(s=_.length,this.zIndex=0,a=0;a<s;a++)c=b.coords2D[_[a]],c.length===0&&(o=b.coords[_[a]],c=this.view.project3DTo2D(o),b.coords2D[_[a]]=c,b.zIndex[_[a]]=Mat.innerProduct(this.view.matrix3DRotShift[3],o)),h.push(c[1]),d.push(c[2]),this.zIndex+=b.zIndex[_[a]];return s>0&&(this.zIndex/=s),s!==2&&(h.push(h[0]),d.push(d[0])),{X:h,Y:d}},addTransform:function(a,s){return this.faceNumber===0&&this.addTransformGeneric(a,s),this},updateTransform:function(){var a,s,o,c,h;if(this.faceNumber!==0)return this;if(this.transformations.length===0||this.baseElement===null)return this;for(a=this.transformations,o=0;o<a.length;o++)a[o].update();this===this.baseElement?h=this.polyhedron:h=this.baseElement.polyhedron;for(o in h.coords)if(h.coords.hasOwnProperty(o)){for(s=h.coords[o],c=0;c<a.length;c++)s=Mat.matVecMult(a[c].matrix,s);this.polyhedron.coords[o]=s}return this},update:function(){var a,s,o,c,h,d,b;if(this.needsUpdate&&!this.view.board._change3DView){if(o=this.polyhedron,this.faceNumber===0&&this.updateCoords().updateTransform(),b=o.faces[this.faceNumber],s=b.length,s<3)return this;if(h=o.coords[b[0]],d=o.coords[b[1]],this.vec1=[d[0]-h[0],d[1]-h[1],d[2]-h[2],d[3]-h[3]],d=o.coords[b[2]],this.vec2=[d[0]-h[0],d[1]-h[1],d[2]-h[2],d[3]-h[3]],this.normal=Mat.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),c=Mat.norm(this.normal),this.normal.unshift(0),Math.abs(c)>1e-12)for(a=1;a<4;a++)this.normal[a]/=c;this.d=Mat.innerProduct(h,this.normal,4)}return this},updateRenderer:function(){return this.needsUpdate&&(this.needsUpdate=!1,this.shader()),this},shader:function(){var a,s,o,c,h,d,b,_,$;if(this.evalVisProp("shader.enabled"))return a=this.evalVisProp("shader.hue"),s=this.evalVisProp("shader.saturation"),_=this.evalVisProp("shader.minlightness"),$=this.evalVisProp("shader.maxlightness"),this.evalVisProp("shader.type").toLowerCase()==="angle"?(c=Mat.innerProduct(this.view.matrix3DRotShift[3],this.normal),c=Math.abs(c),o=_+($-_)*c):(b=this.view.zIndexMax,d=this.view.zIndexMin,o=_+($-_)*((this.zIndex-d)/(b-d))),h="hsl("+a+","+s+"%,"+o+"%)",this.element2D.visProp.fillcolor=h,this.zIndex}});JXG$1.createFace3D=function(a,s,o){var c=s[0],h=s[1],d=s[2],b,_;return b=JXG$1.copyAttributes(o,a.options,"face3d"),_=new JXG$1.Face3D(c,h,d,b),b=_.setAttr2D(b),_.element2D=c.create("curve",[[],[]],b),_.element2D.view=c,_.element2D.updateDataArray=function(){var $=_.updateDataArray2D();this.dataX=$.X,this.dataY=$.Y},_.addChild(_.element2D),_.inherits.push(_.element2D),_.element2D.setParents(_),_.element2D.prepareUpdate().update(),a.isSuspendedUpdate||_.element2D.updateVisibility().updateRenderer(),_};JXG$1.registerElement("face3d",JXG$1.createFace3D);JXG$1.Polyhedron3D=function(a,s,o,c){var h,d,b,_=this;for(this.constructor(a.board,c,Const.OBJECT_TYPE_POLYHEDRON3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"polyhedron3d"),this.board.finalizeAdding(this),this.elType="polyhedron3d",this.faces=o,this.numberFaces=o.length,this.def=s,d=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],b=function($){return function(){var j;for(j in _.faces)_.faces.hasOwnProperty(j)&&JXG$1.exists(_.faces[j][$])&&_.faces[j][$].apply(_.faces[j],arguments);return _}},h=0;h<d.length;h++)this[d[h]]=b(d[h]);this.methodMap=JXG$1.deepCopy(this.methodMap,{setAttribute:"setAttribute",setParents:"setParents",addTransform:"addTransform"})};JXG$1.Polyhedron3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Polyhedron3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Polyhedron3D.prototype,{addTransform:function(a,s){if(this.faces.length>0&&a.faces.length>0)this.faces[0].addTransform(a.faces[0],s);else throw new Error("Adding transformation failed. At least one of the two polyhedra has no faces.");return this},toSTL:function(a){var s,o,c,h,d,b,_="solid ";for(a===void 0&&(a=this.name),_+=a+`
`,s=0;s<this.def.faces.length;s++){for(_+=` facet normal 0 0 0
  outer loop
`,h=this.def.faces[s],b=h.length,c=this.def.coords,o=0;o<b;o++)d=c[h[o]],_+="   vertex "+d[1]+" "+d[2]+" "+d[3]+`
`;_+=`  endloop
 endfacet
`}return _+="endsolid "+a+`
`,_}});JXG$1.createPolyhedron3D=function(a,s,o){var c=s[0],h,d,b,_,$,j,Xt,Lt=[],fr=null,Jr=null,Js={view:c,vertices:{},coords:{},coords2D:{},zIndex:{},faces:[]};if(JXG$1.exists(s[1].type)&&s[1].type===Const.OBJECT_TYPE_POLYHEDRON3D)fr=s[1],Jr=s[2],Js.vertices=fr.def.vertices,Js.faces=fr.def.faces;else{if(JXG$1.isArray(s[1]))for(d=s[1].length,h=0;h<d;h++)Js.vertices[h]=s[1][h];else if(JXG$1.isObject(s[1]))for(h in s[1])s[1].hasOwnProperty(h)&&(Js.vertices[h]=s[1][h]);Js.faces=s[2]}for(Xt=JXG$1.copyAttributes(o,a.options,"polyhedron3d"),console.time("polyhedron"),c.board.suspendUpdate(),d=Js.faces.length,h=0;h<d;h++)j=JXG$1.copyAttributes(o,a.options,"face3d"),Xt.fillcolorarray.length>0&&(j.fillcolor=Xt.fillcolorarray[h%Xt.fillcolorarray.length]),_=Js.faces[h],JXG$1.isArray(_)&&_.length===2&&JXG$1.isObject(_[1])&&JXG$1.isArray(_[0])&&(JXG$1.mergeAttr(j,_[1]),Js.faces[h]=_[0]),b=c.create("face3d",[Js,h],j),Lt.push(b);for($=new JXG$1.Polyhedron3D(c,Js,Lt,Xt),$.setParents($),h=0;h<d;h++)$.inherits.push($.faces[h]),$.addChild($.faces[h]);return fr!==null&&($.addTransform(fr,Jr),$.addParents(fr)),c.board.unsuspendUpdate(),console.timeEnd("polyhedron"),$};JXG$1.registerElement("polyhedron3d",JXG$1.createPolyhedron3D);JXG$1.Sphere3D=function(a,s,o,c,h){this.constructor(a.board,h,Const.OBJECT_TYPE_SPHERE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"sphere3d"),this.board.finalizeAdding(this),this.method=s,this.center=this.board.select(o),this.point2=null,this.points=[],this.element2D=null,this.aux2D=[],this.projectionType=a.projectionType,s==="twoPoints"?(this.point2=this.board.select(c),this.radius=this.Radius()):s==="pointRadius"&&(this.updateRadius=JXG$1.createFunction(c,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])),JXG$1.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),s==="twoPoints"&&(JXG$1.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=JXG$1.deepCopy(this.methodMap,{center:"center",point2:"point2",Radius:"Radius"})};JXG$1.Sphere3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Sphere3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Sphere3D.prototype,{X:function(a,s){var o=this.Radius();return o*Math.sin(a)*Math.cos(s)},Y:function(a,s){var o=this.Radius();return o*Math.sin(a)*Math.sin(s)},Z:function(a,s){var o=this.Radius();return o*Math.cos(a)},range_u:[0,2*Math.PI],range_v:[0,Math.PI],update:function(){return this.projectionType!==this.view.projectionType&&this.rebuildProjection(),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(a){return this.updateRadius=JXG$1.createFunction(a,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(a){return JXG$1.exists(a)?(this.setRadius(a),this.Radius()):this.method==="twoPoints"?!this.center.testIfFinite()||!this.point2.testIfFinite()?NaN:this.center.distance(this.point2):this.method==="pointRadius"?Math.abs(this.updateRadius()):NaN},focusFn:function(a){var s=this;return function(){var o=s.view.boxToCam[3],c=s.Radius();return s.view.project3DTo2D([s.center.X()+a*c*o[1],s.center.Y()+a*c*o[2],s.center.Z()+a*c*o[3]]).slice(1,3)}},innerVertexFn:function(){var a=this;return function(){var s=a.view,o=s.worldToFocal(a.center.coords,!1),c=Mat.hypot(o[0],o[1]),h=s.boxToCam,d=a.Radius(),b=Math.atan(-c/o[2]),_=Math.acos(d/Mat.norm(o)),$=b+_,j=Math.cos($),Xt=Math.sin($),Lt;return c>1e-8?Lt=[-(o[0]*h[1][1]+o[1]*h[2][1])/c,-(o[0]*h[1][2]+o[1]*h[2][2])/c,-(o[0]*h[1][3]+o[1]*h[2][3])/c]:Lt=[h[1][1],h[1][2],h[1][3]],s.project3DTo2D([a.center.X()+d*(Xt*Lt[0]+j*h[3][1]),a.center.Y()+d*(Xt*Lt[1]+j*h[3][2]),a.center.Z()+d*(Xt*Lt[2]+j*h[3][3])])}},buildCentralProjection:function(a){var s=this.view,o={visible:!1,withLabel:!1},c=s.create("point",this.focusFn(-1),o),h=s.create("point",this.focusFn(1),o),d=s.create("point",this.innerVertexFn(s),o);this.aux2D=[c,h,d],this.element2D=s.create("ellipse",this.aux2D,a===void 0?this.visProp:a)},buildParallelProjection:function(a){var s=this,o=function(){var c=s.view.bbox3D[0][1]-s.view.bbox3D[0][0];return s.Radius()*s.view.size[0]/c};this.aux2D=[],this.element2D=this.view.create("circle",[s.center.element2D,o],a===void 0?this.visProp:a)},rebuildProjection:function(a){var s;if(this.element2D){this.view.board.removeObject(this.element2D);for(s in this.aux2D)this.aux2D.hasOwnProperty(s)&&this.view.board.removeObject(this.aux2D[s])}this.projectionType=this.view.projectionType,this.projectionType==="central"?this.buildCentralProjection(a):this.buildParallelProjection(a),this.addChild(this.element2D),this.inherits.push(this.element2D),this.element2D.view=this.view},projectCoords:function(a,s){var o=this.Radius(),c=[1].concat(a),h=this.center.coords,d=Geometry.distance(h,c,4),b=Stat.subtract(c,h);return d===0?(s[0]=0,s[1]=0,[1,o,0,0]):o===0?(s[0]=0,s[1]=0,this.center.coords):(d=o/d,b[0]=1,b[1]*=d,b[2]*=d,b[3]*=d,s[1]=Math.atan2(b[2],b[1]),s[1]+=s[1]<0?Math.PI:0,s[1]!==0?s[0]=Math.atan2(b[2],b[3]*Math.sin(s[1])):s[0]=Math.atan2(b[1],b[3]*Math.cos(s[1])),s[0]+=s[0]<0?2*Math.PI:0,b)}});JXG$1.createSphere3D=function(a,s,o){var c=s[0],h,d,b,_,$,j;for(h=JXG$1.copyAttributes(o,a.options,"sphere3d"),d=[],j=1;j<s.length;j++)if(JXG$1.isPointType3D(a,s[j])){if(d.length===0?b="center":b="point",_=JXG$1.providePoints3D(c,[s[j]],o,"sphere3d",[b])[0],_===!1)throw new Error("JSXGraph: Can't create sphere3d from this type. Please provide a point type.");d.push(_)}else d.push(s[j]);if(JXG$1.isPoint3D(d[0])&&JXG$1.isPoint3D(d[1]))$=new JXG$1.Sphere3D(c,"twoPoints",d[0],d[1],h);else if(JXG$1.isPoint3D(d[0])&&(JXG$1.isNumber(d[1])||JXG$1.isFunction(d[1])||JXG$1.isString(d[1])))$=new JXG$1.Sphere3D(c,"pointRadius",d[0],d[1],h);else throw new Error("JSXGraph: Can't create sphere3d with parent types '"+typeof s[1]+"' and '"+typeof s[2]+`'.
Possible parent types: [point,point], [point,number], [point,function]`);return h=$.setAttr2D(h),$.rebuildProjection(h),$.element2D.prepareUpdate().update(),a.isSuspendedUpdate||$.element2D.updateVisibility().updateRenderer(),$};JXG$1.registerElement("sphere3d",JXG$1.createSphere3D);JXG$1.Surface3D=function(a,s,o,c,h,d,b,_){this.constructor(a.board,_,Const.OBJECT_TYPE_SURFACE3D,Const.OBJECT_CLASS_3D),this.constructor3D(a,"surface3d"),this.board.finalizeAdding(this),this._F=s,this._X=o,this._Y=c,this._Z=h,this._F!==null?(this._X=function($,j){return this._F($,j)[0]},this._Y=function($,j){return this._F($,j)[1]},this._Z=function($,j){return this._F($,j)[2]}):this._X!==null&&(this._F=function($,j){return[this._X($,j),this._Y($,j),this._Z($,j)]}),this.range_u=d,this.range_v=b,this.dataX=null,this.dataY=null,this.dataZ=null,this.points=[],this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Surface3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Surface3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Surface3D.prototype,{updateWireframe:function(){var a,s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js=[1,0,0,0];for(this.points=[],a=this.evalVisProp("stepsu"),s=this.evalVisProp("stepsv"),h=JXG$1.evaluate(this.range_u),d=JXG$1.evaluate(this.range_v),b=JXG$1.evaluate(h[0]),_=JXG$1.evaluate(d[0]),$=JXG$1.evaluate(h[1]),j=JXG$1.evaluate(d[1]),Xt=($-b)/a,Lt=(j-_)/s,o=0,fr=b;o<=a;o++,fr+=Xt)for(this.points.push([]),c=0,Jr=_;c<=s;c++,Jr+=Lt)Js=this.F(fr,Jr),Js.unshift(1),this.points[o].push(Js);return this},updateCoords:function(){return this._F!==null?this.updateWireframe():this.updateTransform(),this},evalF:function(a,s){var o,c,h=[0,0,0,0];if(this.transformations.length===0||!JXG$1.exists(this.baseElement))return h=this._F(a,s),h;for(o=this.transformations,c=0;c<o.length;c++)o[c].update();for(this===this.baseElement?h=this._F(a,s):h=this.baseElement.evalF(a,s),h.unshift(1),h=Mat.matVecMult(o[0].matrix,h),c=1;c<o.length;c++)h=Mat.matVecMult(o[c].matrix,h);return h.slice(1)},F:function(a,s){return this.evalF(a,s)},X:function(a,s){return this.evalF(a,s)[0]},Y:function(a,s){return this.evalF(a,s)[1]},Z:function(a,s){return this.evalF(a,s)[2]},updateDataArray2D:function(){var a,s,o,c,h=[],d=[],b;if(o=this.points.length,o!==0){for(c=this.points[0].length,a=0;a<o;a++){for(s=0;s<c;s++)b=this.view.project3DTo2D(this.points[a][s]),h.push(b[1]),d.push(b[2]);h.push(NaN),d.push(NaN)}for(s=0;s<c;s++){for(a=0;a<o;a++)b=this.view.project3DTo2D(this.points[a][s]),h.push(b[1]),d.push(b[2]);h.push(NaN),d.push(NaN)}}return{X:h,Y:d}},addTransform:function(a,s){return this.addTransformGeneric(a,s),this},updateTransform:function(){var a,s,o,c,h,d,b;if(this.transformations.length===0||this.baseElement===null||JXG$1.exists(this._F))return this;for(a=this.transformations,o=0;o<a.length;o++)a[o].update();if(this!==this.baseElement&&(this.points=[]),d=this.baseElement.points.length,d>0)for(b=this.baseElement.points[0].length,o=0;o<d;o++)for(this!==this.baseElement&&this.points.push([]),c=0;c<b;c++){for(this===this.baseElement?s=this.points[o][c]:s=this.baseElement.points[o][c],h=0;h<a.length;h++)s=Mat.matVecMult(a[h].matrix,s);this===this.baseElement?this.points[o][c]=s:this.points[o].push(s)}return this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(a,s){return Geometry.projectCoordsToParametric(a,this,2,s)}});JXG$1.createParametricSurface3D=function(a,s,o){var c=s[0],h,d,b,_,$,j,Xt,Lt=null,fr=null,Jr;return s.length===3?(Lt=s[1],fr=s[2],h=null,d=null,b=null,_=null):s.length===4?(h=s[1],$=s[2],j=s[3],d=null,b=null,_=null):(d=s[1],b=s[2],_=s[3],$=s[4],j=s[5],h=null),Xt=JXG$1.copyAttributes(o,a.options,"surface3d"),Jr=new JXG$1.Surface3D(c,h,d,b,_,$,j,Xt),Xt=Jr.setAttr2D(Xt),Jr.element2D=c.create("curve",[[],[]],Xt),Jr.element2D.view=c,Lt!==null&&(Jr.addTransform(Lt,fr),Jr.addParents(Lt)),Jr.element2D.updateDataArray=function(){var Js=Jr.updateDataArray2D();this.dataX=Js.X,this.dataY=Js.Y},Jr.addChild(Jr.element2D),Jr.inherits.push(Jr.element2D),Jr.element2D.setParents(Jr),Jr.element2D.prepareUpdate().update(),a.isSuspendedUpdate||Jr.element2D.updateVisibility().updateRenderer(),Jr};JXG$1.registerElement("parametricsurface3d",JXG$1.createParametricSurface3D);JXG$1.createFunctiongraph3D=function(a,s,o){var c=s[0],h=function(Xt,Lt){return Xt},d=function(Xt,Lt){return Lt},b=JXG$1.createFunction(s[1],a,"x, y"),_=s[2],$=s[3],j;return j=c.create("parametricsurface3d",[h,d,b,_,$],o),j.elType="functiongraph3d",j};JXG$1.registerElement("functiongraph3d",JXG$1.createFunctiongraph3D);JXG$1.Parse3D={STL:function(a){var s,o,c,h,d,b,_,$,j,Xt=[],Lt=[],fr=[];for(b=a.split(`
`),h=b.length,s=0;s<h;s++)if(d=b[s].trim(),d.indexOf("solid")===0)$=-1,Lt=[],fr=[];else if(d.indexOf("endsolid")===0)Xt.push([Lt.slice(),fr.slice()]);else if(d.indexOf("facet")===0)$++,fr.push([]);else{if(d.indexOf("outer loop")===0||d.indexOf("endloop")===0)continue;if(d.indexOf("vertex")===0){for(_=d.split(" ").slice(1).map(Jr=>parseFloat(Jr)),j=!1,o=0;o<Lt.length;o++)if(JXG$1.Math.Geometry.distance(Lt[o],_,3)<JXG$1.Math.eps){j=!0,c=o;break}j===!1&&(c=Lt.length,Lt.push(_)),fr[$].push(c)}}return Xt}};JXG$1.Parse3D;let size$1=.75,color="#000";JXG$1.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:color}},arc:{strokeColor:color,strokeWidth:size$1,highlightStrokeColor:color,highlightStrokeWidth:size$1},axis:{},boxplot:{strokeWidth:size$1,strokeColor:color,fillColor:color,fillOpacity:.2,highlightStrokeWidth:size$1,highlightStrokeColor:color,highlightFillColor:color,highlightFillOpacity:.1},circle:{strokeWidth:size$1,highlightStrokeWidth:1.5*size$1,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color},point2:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color}},circumcircle:{strokeWidth:size$1,highlightStrokeWidth:1.5*size$1,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color}},circumcirclearc:{strokeColor:color,strokeWidth:size$1,highlightStrokeColor:color,highlightStrokeWidth:size$1},circumcirclesector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:color,strokeWidth:size$1},conic:{strokeWidth:size$1,highlightStrokeWidth:1.5*size$1,strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:color,strokeWidth:size$1,highlightStrokeColor:color,highlightStrokeWidth:size$1},grid:{strokeWidth:size$1},hatch:{strokeColor:color,strokeWidth:size$1},incircle:{strokeWidth:size$1,highlightStrokeWidth:1.5*size$1,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},integral:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaa33",fillOpacity:.3,highlightFillOpacity:.3,curveLeft:{color},baseLeft:{color},curveRight:{color},baseRight:{color}},label:{strokeColor:color},line:{strokeColor:color,strokeWidth:size$1,highlightStrokeColor:color,highlightStrokeWidth:size$1,point1:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color},point2:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color}},normal:{strokeColor:color},parallel:{strokeColor:color},perpendicular:{strokeColor:color},perpendicularsegment:{strokeColor:color},point:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color},borders:{strokeColor:color,strokeWidth:size$1,highlightStrokeColor:color,highlightStrokeWidth:size$1}},sector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color}},slider:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color,baseline:{strokeWidth:size$1,strokeColor:color,highlightStrokeColor:color},label:{strokeColor:color},highline:{strokeWidth:3*size$1,name:"",strokeColor:color,highlightStrokeColor:color},ticks:{strokeColor:color}},slopefield:{strokeWidth:.75*size$1,highlightStrokeWidth:size$1,highlightStrokeColor:color,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:color,strokeWidth:size$1,highlightStrokeColor:color,highlightStrokeWidth:size$1,point1:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color},point2:{size:size$1,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size$1,highlightFillColor:color,highlightStrokeColor:color},ticks:{strokeWidth:size$1}},text:{strokeColor:color},tracecurve:{strokeColor:color},turtle:{strokeWidth:size$1,strokeColor:color,arrow:{strokeWidth:2*size$1,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.75*size$1,highlightStrokeWidth:size$1,highlightStrokeColor:color,highlightStrokeOpacity:.8}};JXG$1.COORDS_BY_SCREEN;JXG$1.COORDS_BY_USER;JXG$1.Dump;JXG$1.Expect;JXG$1.JSXGraph;JXG$1.Math;JXG$1.Options;JXG$1.boards;JXG$1.elements;JXG$1.palette;JXG$1.paletteWong;JXG$1.Board;JXG$1.Chart;JXG$1.Circle;JXG$1.Complex;JXG$1.Composition;JXG$1.Coords;JXG$1.CoordsElement;JXG$1.Curve;JXG$1.GeometryElement;JXG$1.Group;JXG$1.Image;JXG$1.JessieCode;JXG$1.PrefixParser;JXG$1.Line;JXG$1.Point;JXG$1.Polygon;JXG$1.Text;JXG$1.Ticks;JXG$1.Transformation;JXG$1.Turtle;JXG$1.View3D;JXG$1.LMS2rgb;JXG$1.addEvent;JXG$1.autoDigits;JXG$1.autoHighlight;JXG$1.bind;JXG$1.capitalize;JXG$1.clearVisPropOld;JXG$1.clone;JXG$1.cloneAndCopy;JXG$1.cmpArrays;JXG$1.coordsArrayToMatrix;JXG$1.copyAttributes;JXG$1.createEvalFunction;JXG$1.createFunction;JXG$1.createHTMLSlider;JXG$1.darkenColor;JXG$1.debug;JXG$1.debugInt;JXG$1.debugLine;JXG$1.debugWST;JXG$1.deepCopy;JXG$1.def;JXG$1.deprecated;JXG$1.eliminateDuplicates;JXG$1.escapeHTML;JXG$1.evalSlider;JXG$1.evaluate;JXG$1.filterElements;JXG$1.getBoardByContainerId;JXG$1.getCSSTransformMatrix;JXG$1.getCSSTransform;JXG$1.getDimensions;JXG$1.getOffset;JXG$1.getPosition;JXG$1.getProp;JXG$1.hex2rgb;JXG$1.hsv2rgb;JXG$1.isAndroid;JXG$1.isApple;JXG$1.isArray;JXG$1.isDesktop;JXG$1.isInArray;JXG$1.isInObject;JXG$1.isMetroApp;JXG$1.isMobile;JXG$1.isMozilla;JXG$1.isBoard;JXG$1.isName;JXG$1.isNode;JXG$1.isNumber;JXG$1.isObject;JXG$1.isPoint;JXG$1.isPoint3D;JXG$1.isPointType;JXG$1.isPointType3D;JXG$1.isString;JXG$1.isTouchDevice;JXG$1.isTransformationOrArray;JXG$1.isWebWorker;JXG$1.isWebkitAndroid;JXG$1.isWebkitApple;JXG$1.keys;JXG$1.lightenColor;JXG$1.merge;JXG$1.normalizePointFace;JXG$1.providePoints;JXG$1.registerElement;JXG$1.registerReader;JXG$1.removeAllEvents;JXG$1.removeElementFromArray;JXG$1.removeEvent;JXG$1.rgb2LMS;JXG$1.rgb2bw;JXG$1.rgb2cb;JXG$1.rgb2css;JXG$1.rgb2hex;JXG$1.rgb2hsv;JXG$1.rgbParser;JXG$1.rgba2rgbo;JXG$1.rgbo2rgba;JXG$1.sanitizeHTML;JXG$1.shortcut;JXG$1.str2Bool;JXG$1.supportsCanvas;JXG$1.supportsPointerEvents;JXG$1.supportsSVG;JXG$1.supportsVML;JXG$1.swap;JXG$1.timedChunk;JXG$1.toFixed;JXG$1.toFullscreen;JXG$1.toJSON;JXG$1.trim;JXG$1.trimNumber;JXG$1.truncate;JXG$1.unescapeHTML;JXG$1.uniqueArray;JXG$1.useBlackWhiteOptions;JXG$1.useStandardOptions;JXG$1.warn;JXG$1.isBrowser?window.JXG=JXG$1:JXG$1.isWebWorker()&&(self.JXG=JXG$1);function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var c in o)({}).hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a},_extends$1.apply(null,arguments)}var DEFAULT_CONFIG={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function getSafeProperty(a,s){if(isSafeProperty(a,s))return a[s];throw typeof a[s]=="function"&&isSafeMethod(a,s)?new Error('Cannot access method "'+s+'" as a property'):new Error('No access to property "'+s+'"')}function setSafeProperty(a,s,o){if(isSafeProperty(a,s))return a[s]=o,o;throw new Error('No access to property "'+s+'"')}function isSafeProperty(a,s){return!isPlainObject(a)&&!Array.isArray(a)?!1:hasOwnProperty(safeNativeProperties,s)?!0:!(s in Object.prototype||s in Function.prototype)}function getSafeMethod(a,s){if(!isSafeMethod(a,s))throw new Error('No access to method "'+s+'"');return a[s]}function isSafeMethod(a,s){return a==null||typeof a[s]!="function"||hasOwnProperty(a,s)&&Object.getPrototypeOf&&s in Object.getPrototypeOf(a)?!1:hasOwnProperty(safeNativeMethods,s)?!0:!(s in Object.prototype||s in Function.prototype)}function isPlainObject(a){return typeof a=="object"&&a&&a.constructor===Object}var safeNativeProperties={length:!0,name:!0},safeNativeMethods={toString:!0,valueOf:!0,toLocaleString:!0};class ObjectWrappingMap{constructor(s){this.wrappedObject=s,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(s=>this.has(s)).values()}get(s){return getSafeProperty(this.wrappedObject,s)}set(s,o){return setSafeProperty(this.wrappedObject,s,o),this}has(s){return isSafeProperty(this.wrappedObject,s)&&s in this.wrappedObject}entries(){return mapIterator(this.keys(),s=>[s,this.get(s)])}forEach(s){for(var o of this.keys())s(this.get(o),o,this)}delete(s){isSafeProperty(this.wrappedObject,s)&&delete this.wrappedObject[s]}clear(){for(var s of this.keys())this.delete(s)}get size(){return Object.keys(this.wrappedObject).length}}class PartitionedMap{constructor(s,o,c){this.a=s,this.b=o,this.bKeys=c,this[Symbol.iterator]=this.entries}get(s){return this.bKeys.has(s)?this.b.get(s):this.a.get(s)}set(s,o){return this.bKeys.has(s)?this.b.set(s,o):this.a.set(s,o),this}has(s){return this.b.has(s)||this.a.has(s)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return mapIterator(this.keys(),s=>[s,this.get(s)])}forEach(s){for(var o of this.keys())s(this.get(o),o,this)}delete(s){return this.bKeys.has(s)?this.b.delete(s):this.a.delete(s)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function mapIterator(a,s){return{next:()=>{var o=a.next();return o.done?o:{value:s(o.value),done:!1}}}}function createEmptyMap(){return new Map}function createMap$1(a){if(!a)return createEmptyMap();if(isMap(a))return a;if(isObject(a))return new ObjectWrappingMap(a);throw new Error("createMap can create maps from objects or Maps")}function toObject(a){if(a instanceof ObjectWrappingMap)return a.wrappedObject;var s={};for(var o of a.keys()){var c=a.get(o);setSafeProperty(s,o,c)}return s}function isNumber(a){return typeof a=="number"}function isBigNumber(a){return!a||typeof a!="object"||typeof a.constructor!="function"?!1:a.isBigNumber===!0&&typeof a.constructor.prototype=="object"&&a.constructor.prototype.isBigNumber===!0||typeof a.constructor.isDecimal=="function"&&a.constructor.isDecimal(a)===!0}function isBigInt(a){return typeof a=="bigint"}function isComplex(a){return a&&typeof a=="object"&&Object.getPrototypeOf(a).isComplex===!0||!1}function isFraction(a){return a&&typeof a=="object"&&Object.getPrototypeOf(a).isFraction===!0||!1}function isUnit(a){return a&&a.constructor.prototype.isUnit===!0||!1}function isString(a){return typeof a=="string"}var isArray=Array.isArray;function isMatrix(a){return a&&a.constructor.prototype.isMatrix===!0||!1}function isCollection(a){return Array.isArray(a)||isMatrix(a)}function isDenseMatrix(a){return a&&a.isDenseMatrix&&a.constructor.prototype.isMatrix===!0||!1}function isSparseMatrix(a){return a&&a.isSparseMatrix&&a.constructor.prototype.isMatrix===!0||!1}function isRange(a){return a&&a.constructor.prototype.isRange===!0||!1}function isIndex(a){return a&&a.constructor.prototype.isIndex===!0||!1}function isBoolean(a){return typeof a=="boolean"}function isResultSet(a){return a&&a.constructor.prototype.isResultSet===!0||!1}function isHelp(a){return a&&a.constructor.prototype.isHelp===!0||!1}function isFunction(a){return typeof a=="function"}function isDate(a){return a instanceof Date}function isRegExp(a){return a instanceof RegExp}function isObject(a){return!!(a&&typeof a=="object"&&a.constructor===Object&&!isComplex(a)&&!isFraction(a))}function isMap(a){return a?a instanceof Map||a instanceof ObjectWrappingMap||typeof a.set=="function"&&typeof a.get=="function"&&typeof a.keys=="function"&&typeof a.has=="function":!1}function isNull(a){return a===null}function isUndefined(a){return a===void 0}function isAccessorNode(a){return a&&a.isAccessorNode===!0&&a.constructor.prototype.isNode===!0||!1}function isArrayNode(a){return a&&a.isArrayNode===!0&&a.constructor.prototype.isNode===!0||!1}function isAssignmentNode(a){return a&&a.isAssignmentNode===!0&&a.constructor.prototype.isNode===!0||!1}function isBlockNode(a){return a&&a.isBlockNode===!0&&a.constructor.prototype.isNode===!0||!1}function isConditionalNode(a){return a&&a.isConditionalNode===!0&&a.constructor.prototype.isNode===!0||!1}function isConstantNode(a){return a&&a.isConstantNode===!0&&a.constructor.prototype.isNode===!0||!1}function rule2Node(a){return isConstantNode(a)||isOperatorNode(a)&&a.args.length===1&&isConstantNode(a.args[0])&&"-+~".includes(a.op)}function isFunctionAssignmentNode(a){return a&&a.isFunctionAssignmentNode===!0&&a.constructor.prototype.isNode===!0||!1}function isFunctionNode(a){return a&&a.isFunctionNode===!0&&a.constructor.prototype.isNode===!0||!1}function isIndexNode(a){return a&&a.isIndexNode===!0&&a.constructor.prototype.isNode===!0||!1}function isNode(a){return a&&a.isNode===!0&&a.constructor.prototype.isNode===!0||!1}function isObjectNode(a){return a&&a.isObjectNode===!0&&a.constructor.prototype.isNode===!0||!1}function isOperatorNode(a){return a&&a.isOperatorNode===!0&&a.constructor.prototype.isNode===!0||!1}function isParenthesisNode(a){return a&&a.isParenthesisNode===!0&&a.constructor.prototype.isNode===!0||!1}function isRangeNode(a){return a&&a.isRangeNode===!0&&a.constructor.prototype.isNode===!0||!1}function isRelationalNode(a){return a&&a.isRelationalNode===!0&&a.constructor.prototype.isNode===!0||!1}function isSymbolNode(a){return a&&a.isSymbolNode===!0&&a.constructor.prototype.isNode===!0||!1}function isChain(a){return a&&a.constructor.prototype.isChain===!0||!1}function typeOf$1(a){var s=typeof a;return s==="object"?a===null?"null":isBigNumber(a)?"BigNumber":a.constructor&&a.constructor.name?a.constructor.name:"Object":s}function clone$3(a){var s=typeof a;if(s==="number"||s==="bigint"||s==="string"||s==="boolean"||a===null||a===void 0)return a;if(typeof a.clone=="function")return a.clone();if(Array.isArray(a))return a.map(function(o){return clone$3(o)});if(a instanceof Date)return new Date(a.valueOf());if(isBigNumber(a))return a;if(isObject(a))return mapObject(a,clone$3);if(s==="function")return a;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(a,")"))}function mapObject(a,s){var o={};for(var c in a)hasOwnProperty(a,c)&&(o[c]=s(a[c]));return o}function extend(a,s){for(var o in s)hasOwnProperty(s,o)&&(a[o]=s[o]);return a}function deepStrictEqual(a,s){var o,c,h;if(Array.isArray(a)){if(!Array.isArray(s)||a.length!==s.length)return!1;for(c=0,h=a.length;c<h;c++)if(!deepStrictEqual(a[c],s[c]))return!1;return!0}else{if(typeof a=="function")return a===s;if(a instanceof Object){if(Array.isArray(s)||!(s instanceof Object))return!1;for(o in a)if(!(o in s)||!deepStrictEqual(a[o],s[o]))return!1;for(o in s)if(!(o in a))return!1;return!0}else return a===s}}function lazy(a,s,o){var c=!0,h;Object.defineProperty(a,s,{get:function(){return c&&(h=o(),c=!1),h},set:function(b){h=b,c=!1},configurable:!0,enumerable:!0})}function hasOwnProperty(a,s){return a&&Object.hasOwnProperty.call(a,s)}function pickShallow(a,s){for(var o={},c=0;c<s.length;c++){var h=s[c],d=a[h];d!==void 0&&(o[h]=d)}return o}var MATRIX_OPTIONS=["Matrix","Array"],NUMBER_OPTIONS=["number","BigNumber","bigint","Fraction"],config$1=function a(s){if(s)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(DEFAULT_CONFIG)};_extends$1(config$1,DEFAULT_CONFIG,{MATRIX_OPTIONS,NUMBER_OPTIONS});function ok(){return!0}function notOk(){return!1}function undef(){}const NOT_TYPED_FUNCTION="Argument is not a typed-function.";function create(){function a(y1){return typeof y1=="object"&&y1!==null&&y1.constructor===Object}const s=[{name:"number",test:function(y1){return typeof y1=="number"}},{name:"string",test:function(y1){return typeof y1=="string"}},{name:"boolean",test:function(y1){return typeof y1=="boolean"}},{name:"Function",test:function(y1){return typeof y1=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(y1){return y1 instanceof Date}},{name:"RegExp",test:function(y1){return y1 instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(y1){return y1===null}},{name:"undefined",test:function(y1){return y1===void 0}}],o={name:"any",test:ok,isAny:!0};let c,h,d=0,b={createCount:0};function _(y1){const _1=c.get(y1);if(_1)return _1;let D1='Unknown type "'+y1+'"';const E1=y1.toLowerCase();let P1;for(P1 of h)if(P1.toLowerCase()===E1){D1+='. Did you mean "'+P1+'" ?';break}throw new TypeError(D1)}function $(y1){let _1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const D1=_1?_(_1).index:h.length,E1=[];for(let X1=0;X1<y1.length;++X1){if(!y1[X1]||typeof y1[X1].name!="string"||typeof y1[X1].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const V1=y1[X1].name;if(c.has(V1))throw new TypeError('Duplicate type name "'+V1+'"');E1.push(V1),c.set(V1,{name:V1,test:y1[X1].test,isAny:y1[X1].isAny,index:D1+X1,conversionsTo:[]})}const P1=h.slice(D1);h=h.slice(0,D1).concat(E1).concat(P1);for(let X1=D1+E1.length;X1<h.length;++X1)c.get(h[X1]).index=X1}function j(){c=new Map,h=[],d=0,$([o],!1)}j(),$(s);function Xt(){let y1;for(y1 of h)c.get(y1).conversionsTo=[];d=0}function Lt(y1){const _1=h.filter(D1=>{const E1=c.get(D1);return!E1.isAny&&E1.test(y1)});return _1.length?_1:["any"]}function fr(y1){return y1&&typeof y1=="function"&&"_typedFunctionData"in y1}function Jr(y1,_1,D1){if(!fr(y1))throw new TypeError(NOT_TYPED_FUNCTION);const E1=D1&&D1.exact,P1=Array.isArray(_1)?_1.join(","):_1,X1=tu(P1),V1=zo(X1);if(!E1||V1 in y1.signatures){const Y1=y1._typedFunctionData.signatureMap.get(V1);if(Y1)return Y1}const F1=X1.length;let z1;if(E1){z1=[];let Y1;for(Y1 in y1.signatures)z1.push(y1._typedFunctionData.signatureMap.get(Y1))}else z1=y1._typedFunctionData.signatures;for(let Y1=0;Y1<F1;++Y1){const ev=X1[Y1],Z1=[];let R1;for(R1 of z1){const K1=e1(R1.params,Y1);if(!(!K1||ev.restParam&&!K1.restParam)){if(!K1.hasAny){const u1=Oo(K1);if(ev.types.some(k1=>!u1.has(k1.name)))continue}Z1.push(R1)}}if(z1=Z1,z1.length===0)break}let J1;for(J1 of z1)if(J1.params.length<=F1)return J1;throw new TypeError("Signature not found (signature: "+(y1.name||"unnamed")+"("+zo(X1,", ")+"))")}function Js(y1,_1,D1){return Jr(y1,_1,D1).implementation}function qs(y1,_1){const D1=_(_1);if(D1.test(y1))return y1;const E1=D1.conversionsTo;if(E1.length===0)throw new Error("There are no conversions to "+_1+" defined.");for(let P1=0;P1<E1.length;P1++)if(_(E1[P1].from).test(y1))return E1[P1].convert(y1);throw new Error("Cannot convert "+y1+" to "+_1)}function zo(y1){let _1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return y1.map(D1=>D1.name).join(_1)}function js(y1){const _1=y1.indexOf("...")===0,E1=(_1?y1.length>3?y1.slice(3):"any":y1).split("|").map(F1=>_(F1.trim()));let P1=!1,X1=_1?"...":"";return{types:E1.map(function(F1){return P1=F1.isAny||P1,X1+=F1.name+"|",{name:F1.name,typeIndex:F1.index,test:F1.test,isAny:F1.isAny,conversion:null,conversionIndex:-1}}),name:X1.slice(0,-1),hasAny:P1,hasConversion:!1,restParam:_1}}function eu(y1){const _1=y1.types.map(V1=>V1.name),D1=f1(_1);let E1=y1.hasAny,P1=y1.name;const X1=D1.map(function(V1){const F1=_(V1.from);return E1=F1.isAny||E1,P1+="|"+V1.from,{name:V1.from,typeIndex:F1.index,test:F1.test,isAny:F1.isAny,conversion:V1,conversionIndex:V1.index}});return{types:y1.types.concat(X1),name:P1,hasAny:E1,hasConversion:X1.length>0,restParam:y1.restParam}}function Oo(y1){return y1.typeSet||(y1.typeSet=new Set,y1.types.forEach(_1=>y1.typeSet.add(_1.name))),y1.typeSet}function tu(y1){const _1=[];if(typeof y1!="string")throw new TypeError("Signatures must be strings");const D1=y1.trim();if(D1==="")return _1;const E1=D1.split(",");for(let P1=0;P1<E1.length;++P1){const X1=js(E1[P1].trim());if(X1.restParam&&P1!==E1.length-1)throw new SyntaxError('Unexpected rest parameter "'+E1[P1]+'": only allowed for the last parameter');if(X1.types.length===0)return null;_1.push(X1)}return _1}function Bo(y1){const _1=x1(y1);return _1?_1.restParam:!1}function vu(y1){if(!y1||y1.types.length===0)return ok;if(y1.types.length===1)return _(y1.types[0].name).test;if(y1.types.length===2){const _1=_(y1.types[0].name).test,D1=_(y1.types[1].name).test;return function(P1){return _1(P1)||D1(P1)}}else{const _1=y1.types.map(function(D1){return _(D1.name).test});return function(E1){for(let P1=0;P1<_1.length;P1++)if(_1[P1](E1))return!0;return!1}}}function t1(y1){let _1,D1,E1;if(Bo(y1)){_1=w1(y1).map(vu);const P1=_1.length,X1=vu(x1(y1)),V1=function(F1){for(let z1=P1;z1<F1.length;z1++)if(!X1(F1[z1]))return!1;return!0};return function(z1){for(let J1=0;J1<_1.length;J1++)if(!_1[J1](z1[J1]))return!1;return V1(z1)&&z1.length>=P1+1}}else return y1.length===0?function(X1){return X1.length===0}:y1.length===1?(D1=vu(y1[0]),function(X1){return D1(X1[0])&&X1.length===1}):y1.length===2?(D1=vu(y1[0]),E1=vu(y1[1]),function(X1){return D1(X1[0])&&E1(X1[1])&&X1.length===2}):(_1=y1.map(vu),function(X1){for(let V1=0;V1<_1.length;V1++)if(!_1[V1](X1[V1]))return!1;return X1.length===_1.length})}function e1(y1,_1){return _1<y1.length?y1[_1]:Bo(y1)?x1(y1):null}function r1(y1,_1){const D1=e1(y1,_1);return D1?Oo(D1):new Set}function a1(y1){return y1.conversion===null||y1.conversion===void 0}function i1(y1,_1){const D1=new Set;return y1.forEach(E1=>{const P1=r1(E1.params,_1);let X1;for(X1 of P1)D1.add(X1)}),D1.has("any")?["any"]:Array.from(D1)}function s1(y1,_1,D1){let E1,P1;const X1=y1||"unnamed";let V1=D1,F1;for(F1=0;F1<_1.length;F1++){const ev=[];if(V1.forEach(Z1=>{const R1=e1(Z1.params,F1),K1=vu(R1);(F1<Z1.params.length||Bo(Z1.params))&&K1(_1[F1])&&ev.push(Z1)}),ev.length===0){if(P1=i1(V1,F1),P1.length>0){const Z1=Lt(_1[F1]);return E1=new TypeError("Unexpected type of argument in function "+X1+" (expected: "+P1.join(" or ")+", actual: "+Z1.join(" | ")+", index: "+F1+")"),E1.data={category:"wrongType",fn:X1,index:F1,actual:Z1,expected:P1},E1}}else V1=ev}const z1=V1.map(function(ev){return Bo(ev.params)?1/0:ev.params.length});if(_1.length<Math.min.apply(null,z1))return P1=i1(V1,F1),E1=new TypeError("Too few arguments in function "+X1+" (expected: "+P1.join(" or ")+", index: "+_1.length+")"),E1.data={category:"tooFewArgs",fn:X1,index:_1.length,expected:P1},E1;const J1=Math.max.apply(null,z1);if(_1.length>J1)return E1=new TypeError("Too many arguments in function "+X1+" (expected: "+J1+", actual: "+_1.length+")"),E1.data={category:"tooManyArgs",fn:X1,index:_1.length,expectedLength:J1},E1;const Y1=[];for(let ev=0;ev<_1.length;++ev)Y1.push(Lt(_1[ev]).join("|"));return E1=new TypeError('Arguments of type "'+Y1.join(", ")+'" do not match any of the defined signatures of function '+X1+"."),E1.data={category:"mismatch",actual:Y1},E1}function c1(y1){let _1=h.length+1;for(let D1=0;D1<y1.types.length;D1++)_1=Math.min(_1,y1.types[D1].typeIndex);return _1}function h1(y1){let _1=d+1;for(let D1=0;D1<y1.types.length;D1++)a1(y1.types[D1])||(_1=Math.min(_1,y1.types[D1].conversionIndex));return _1}function m1(y1,_1){if(y1.hasAny){if(!_1.hasAny)return .1}else if(_1.hasAny)return-.1;if(y1.restParam){if(!_1.restParam)return .01}else if(_1.restParam)return-.01;const D1=c1(y1)-c1(_1);if(D1<0)return-.001;if(D1>0)return .001;const E1=h1(y1),P1=h1(_1);if(y1.hasConversion){if(!_1.hasConversion)return(1+E1)*1e-6}else if(_1.hasConversion)return-(1+P1)*1e-6;const X1=E1-P1;return X1<0?-1e-7:X1>0?1e-7:0}function l1(y1,_1){const D1=y1.params,E1=_1.params,P1=x1(D1),X1=x1(E1),V1=Bo(D1),F1=Bo(E1);if(V1&&P1.hasAny){if(!F1||!X1.hasAny)return 1e7}else if(F1&&X1.hasAny)return-1e7;let z1=0,J1=0,Y1;for(Y1 of D1)Y1.hasAny&&++z1,Y1.hasConversion&&++J1;let ev=0,Z1=0;for(Y1 of E1)Y1.hasAny&&++ev,Y1.hasConversion&&++Z1;if(z1!==ev)return(z1-ev)*1e6;if(V1&&P1.hasConversion){if(!F1||!X1.hasConversion)return 1e5}else if(F1&&X1.hasConversion)return-1e5;if(J1!==Z1)return(J1-Z1)*1e4;if(V1){if(!F1)return 1e3}else if(F1)return-1e3;const R1=(D1.length-E1.length)*(V1?-100:100);if(R1!==0)return R1;const K1=[];let u1=0;for(let iv=0;iv<D1.length;++iv){const tv=m1(D1[iv],E1[iv]);K1.push(tv),u1+=tv}if(u1!==0)return(u1<0?-10:10)+u1;let k1,I1=9;const U1=I1/(K1.length+1);for(k1 of K1){if(k1!==0)return(k1<0?-I1:I1)+k1;I1-=U1}return 0}function f1(y1){if(y1.length===0)return[];const _1=y1.map(_);if(y1.length===1)return _1[0].conversionsTo;const D1=new Set(y1),E1=new Set;for(let X1=0;X1<_1.length;++X1)for(const V1 of _1[X1].conversionsTo)D1.has(V1.from)||E1.add(V1.from);const P1=[];for(const X1 of E1){let V1=d+1,F1=null;for(let z1=0;z1<_1.length;++z1)for(const J1 of _1[z1].conversionsTo)J1.from===X1&&J1.index<V1&&(V1=J1.index,F1=J1);P1.push(F1)}return P1}function p1(y1,_1){let D1=_1,E1="";if(y1.some(X1=>X1.hasConversion)){const X1=Bo(y1),V1=y1.map(d1);E1=V1.map(F1=>F1.name).join(";"),D1=function(){const z1=[],J1=X1?arguments.length-1:arguments.length;for(let Y1=0;Y1<J1;Y1++)z1[Y1]=V1[Y1](arguments[Y1]);return X1&&(z1[J1]=arguments[J1].map(V1[J1])),_1.apply(this,z1)}}let P1=D1;if(Bo(y1)){const X1=y1.length-1;P1=function(){return D1.apply(this,M1(arguments,0,X1).concat([M1(arguments,X1)]))}}return E1&&Object.defineProperty(P1,"name",{value:E1}),P1}function d1(y1){let _1,D1,E1,P1;const X1=[],V1=[];let F1="";y1.types.forEach(function(J1){J1.conversion&&(F1+=J1.conversion.from+"~>"+J1.conversion.to+",",X1.push(_(J1.conversion.from).test),V1.push(J1.conversion.convert))}),F1?F1=F1.slice(0,-1):F1="pass";let z1=J1=>J1;switch(V1.length){case 0:break;case 1:_1=X1[0],E1=V1[0],z1=function(Y1){return _1(Y1)?E1(Y1):Y1};break;case 2:_1=X1[0],D1=X1[1],E1=V1[0],P1=V1[1],z1=function(Y1){return _1(Y1)?E1(Y1):D1(Y1)?P1(Y1):Y1};break;default:z1=function(Y1){for(let ev=0;ev<V1.length;ev++)if(X1[ev](Y1))return V1[ev](Y1);return Y1}}return Object.defineProperty(z1,"name",{value:F1}),z1}function b1(y1){function _1(D1,E1,P1){if(E1<D1.length){const X1=D1[E1];let V1=[];if(X1.restParam){const F1=X1.types.filter(a1);F1.length<X1.types.length&&V1.push({types:F1,name:"..."+F1.map(z1=>z1.name).join("|"),hasAny:F1.some(z1=>z1.isAny),hasConversion:!1,restParam:!0}),V1.push(X1)}else V1=X1.types.map(function(F1){return{types:[F1],name:F1.name,hasAny:F1.isAny,hasConversion:F1.conversion,restParam:!1}});return N1(V1,function(F1){return _1(D1,E1+1,P1.concat([F1]))})}else return[P1]}return _1(y1,0,[])}function C1(y1,_1){const D1=Math.max(y1.length,_1.length);for(let F1=0;F1<D1;F1++){const z1=r1(y1,F1),J1=r1(_1,F1);let Y1=!1,ev;for(ev of J1)if(z1.has(ev)){Y1=!0;break}if(!Y1)return!1}const E1=y1.length,P1=_1.length,X1=Bo(y1),V1=Bo(_1);return X1?V1?E1===P1:P1>=E1:V1?E1>=P1:E1===P1}function g1(y1){return y1.map(_1=>W1(_1)?q1(_1.referToSelf.callback):H1(_1)?G1(_1.referTo.references,_1.referTo.callback):_1)}function o1(y1,_1,D1){const E1=[];let P1;for(P1 of y1){let X1=D1[P1];if(typeof X1!="number")throw new TypeError('No definition for referenced signature "'+P1+'"');if(X1=_1[X1],typeof X1!="function")return!1;E1.push(X1)}return E1}function S1(y1,_1,D1){const E1=g1(y1),P1=new Array(E1.length).fill(!1);let X1=!0;for(;X1;){X1=!1;let V1=!0;for(let F1=0;F1<E1.length;++F1){if(P1[F1])continue;const z1=E1[F1];if(W1(z1))E1[F1]=z1.referToSelf.callback(D1),E1[F1].referToSelf=z1.referToSelf,P1[F1]=!0,V1=!1;else if(H1(z1)){const J1=o1(z1.referTo.references,E1,_1);J1?(E1[F1]=z1.referTo.callback.apply(this,J1),E1[F1].referTo=z1.referTo,P1[F1]=!0,V1=!1):X1=!0}}if(V1&&X1)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return E1}function v1(y1){const _1=/\bthis(\(|\.signatures\b)/;Object.keys(y1).forEach(D1=>{const E1=y1[D1];if(_1.test(E1.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function B1(y1,_1){if(b.createCount++,Object.keys(_1).length===0)throw new SyntaxError("No signatures provided");b.warnAgainstDeprecatedThis&&v1(_1);const D1=[],E1=[],P1={},X1=[];let V1;for(V1 in _1){if(!Object.prototype.hasOwnProperty.call(_1,V1))continue;const nv=tu(V1);if(!nv)continue;D1.forEach(function($v){if(C1($v,nv))throw new TypeError('Conflicting signatures "'+zo($v)+'" and "'+zo(nv)+'".')}),D1.push(nv);const lv=E1.length;E1.push(_1[V1]);const Ly=nv.map(eu);let Dv;for(Dv of b1(Ly)){const $v=zo(Dv);X1.push({params:Dv,name:$v,fn:lv}),Dv.every(Jy=>!Jy.hasConversion)&&(P1[$v]=lv)}}X1.sort(l1);const F1=S1(E1,P1,_v);let z1;for(z1 in P1)Object.prototype.hasOwnProperty.call(P1,z1)&&(P1[z1]=F1[P1[z1]]);const J1=[],Y1=new Map;for(z1 of X1)Y1.has(z1.name)||(z1.fn=F1[z1.fn],J1.push(z1),Y1.set(z1.name,z1));const ev=J1[0]&&J1[0].params.length<=2&&!Bo(J1[0].params),Z1=J1[1]&&J1[1].params.length<=2&&!Bo(J1[1].params),R1=J1[2]&&J1[2].params.length<=2&&!Bo(J1[2].params),K1=J1[3]&&J1[3].params.length<=2&&!Bo(J1[3].params),u1=J1[4]&&J1[4].params.length<=2&&!Bo(J1[4].params),k1=J1[5]&&J1[5].params.length<=2&&!Bo(J1[5].params),I1=ev&&Z1&&R1&&K1&&u1&&k1;for(let nv=0;nv<J1.length;++nv)J1[nv].test=t1(J1[nv].params);const U1=ev?vu(J1[0].params[0]):notOk,iv=Z1?vu(J1[1].params[0]):notOk,tv=R1?vu(J1[2].params[0]):notOk,av=K1?vu(J1[3].params[0]):notOk,hv=u1?vu(J1[4].params[0]):notOk,yv=k1?vu(J1[5].params[0]):notOk,Av=ev?vu(J1[0].params[1]):notOk,Pv=Z1?vu(J1[1].params[1]):notOk,sv=R1?vu(J1[2].params[1]):notOk,dv=K1?vu(J1[3].params[1]):notOk,ov=u1?vu(J1[4].params[1]):notOk,Cv=k1?vu(J1[5].params[1]):notOk;for(let nv=0;nv<J1.length;++nv)J1[nv].implementation=p1(J1[nv].params,J1[nv].fn);const mv=ev?J1[0].implementation:undef,bv=Z1?J1[1].implementation:undef,cv=R1?J1[2].implementation:undef,Nv=K1?J1[3].implementation:undef,xv=u1?J1[4].implementation:undef,wv=k1?J1[5].implementation:undef,gv=ev?J1[0].params.length:-1,Ny=Z1?J1[1].params.length:-1,Dy=R1?J1[2].params.length:-1,ky=K1?J1[3].params.length:-1,Ay=u1?J1[4].params.length:-1,Py=k1?J1[5].params.length:-1,Ty=I1?6:0,Oy=J1.length,By=J1.map(nv=>nv.test),Xy=J1.map(nv=>nv.implementation),Gy=function(){for(let lv=Ty;lv<Oy;lv++)if(By[lv](arguments))return Xy[lv].apply(this,arguments);return b.onMismatch(y1,arguments,J1)};function _v(nv,lv){return arguments.length===gv&&U1(nv)&&Av(lv)?mv.apply(this,arguments):arguments.length===Ny&&iv(nv)&&Pv(lv)?bv.apply(this,arguments):arguments.length===Dy&&tv(nv)&&sv(lv)?cv.apply(this,arguments):arguments.length===ky&&av(nv)&&dv(lv)?Nv.apply(this,arguments):arguments.length===Ay&&hv(nv)&&ov(lv)?xv.apply(this,arguments):arguments.length===Py&&yv(nv)&&Cv(lv)?wv.apply(this,arguments):Gy.apply(this,arguments)}try{Object.defineProperty(_v,"name",{value:y1})}catch{}return _v.signatures=P1,_v._typedFunctionData={signatures:J1,signatureMap:Y1},_v}function T1(y1,_1,D1){throw s1(y1,_1,D1)}function w1(y1){return M1(y1,0,y1.length-1)}function x1(y1){return y1[y1.length-1]}function M1(y1,_1,D1){return Array.prototype.slice.call(y1,_1,D1)}function O1(y1,_1){for(let D1=0;D1<y1.length;D1++)if(_1(y1[D1]))return y1[D1]}function N1(y1,_1){return Array.prototype.concat.apply([],y1.map(_1))}function L1(){const y1=w1(arguments).map(D1=>zo(tu(D1))),_1=x1(arguments);if(typeof _1!="function")throw new TypeError("Callback function expected as last argument");return G1(y1,_1)}function G1(y1,_1){return{referTo:{references:y1,callback:_1}}}function q1(y1){if(typeof y1!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:y1}}}function H1(y1){return y1&&typeof y1.referTo=="object"&&Array.isArray(y1.referTo.references)&&typeof y1.referTo.callback=="function"}function W1(y1){return y1&&typeof y1.referToSelf=="object"&&typeof y1.referToSelf.callback=="function"}function j1(y1,_1){if(!y1)return _1;if(_1&&_1!==y1){const D1=new Error("Function names do not match (expected: "+y1+", actual: "+_1+")");throw D1.data={actual:_1,expected:y1},D1}return y1}function Q1(y1){let _1;for(const D1 in y1)Object.prototype.hasOwnProperty.call(y1,D1)&&(fr(y1[D1])||typeof y1[D1].signature=="string")&&(_1=j1(_1,y1[D1].name));return _1}function rv(y1,_1){let D1;for(D1 in _1)if(Object.prototype.hasOwnProperty.call(_1,D1)){if(D1 in y1&&_1[D1]!==y1[D1]){const E1=new Error('Signature "'+D1+'" is defined twice');throw E1.data={signature:D1,sourceFunction:_1[D1],destFunction:y1[D1]},E1}y1[D1]=_1[D1]}}const $1=b;b=function(y1){const _1=typeof y1=="string",D1=_1?1:0;let E1=_1?y1:"";const P1={};for(let X1=D1;X1<arguments.length;++X1){const V1=arguments[X1];let F1={},z1;if(typeof V1=="function"?(z1=V1.name,typeof V1.signature=="string"?F1[V1.signature]=V1:fr(V1)&&(F1=V1.signatures)):a(V1)&&(F1=V1,_1||(z1=Q1(V1))),Object.keys(F1).length===0){const J1=new TypeError("Argument to 'typed' at index "+X1+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw J1.data={index:X1,argument:V1},J1}_1||(E1=j1(E1,z1)),rv(P1,F1)}return B1(E1||"",P1)},b.create=create,b.createCount=$1.createCount,b.onMismatch=T1,b.throwMismatchError=T1,b.createError=s1,b.clear=j,b.clearConversions=Xt,b.addTypes=$,b._findType=_,b.referTo=L1,b.referToSelf=q1,b.convert=qs,b.findSignature=Jr,b.find=Js,b.isTypedFunction=fr,b.warnAgainstDeprecatedThis=!0,b.addType=function(y1,_1){let D1="any";_1!==!1&&c.has("Object")&&(D1="Object"),b.addTypes([y1],D1)};function A1(y1){if(!y1||typeof y1.from!="string"||typeof y1.to!="string"||typeof y1.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(y1.to===y1.from)throw new SyntaxError('Illegal to define conversion from "'+y1.from+'" to itself.')}return b.addConversion=function(y1){let _1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};A1(y1);const D1=_(y1.to),E1=D1.conversionsTo.find(P1=>P1.from===y1.from);if(E1)if(_1&&_1.override)b.removeConversion({from:E1.from,to:y1.to,convert:E1.convert});else throw new Error('There is already a conversion from "'+y1.from+'" to "'+D1.name+'"');D1.conversionsTo.push({from:y1.from,to:D1.name,convert:y1.convert,index:d++})},b.addConversions=function(y1,_1){y1.forEach(D1=>b.addConversion(D1,_1))},b.removeConversion=function(y1){A1(y1);const _1=_(y1.to),D1=O1(_1.conversionsTo,P1=>P1.from===y1.from);if(!D1)throw new Error("Attempt to remove nonexistent conversion from "+y1.from+" to "+y1.to);if(D1.convert!==y1.convert)throw new Error("Conversion to remove does not match existing conversion");const E1=_1.conversionsTo.indexOf(D1);_1.conversionsTo.splice(E1,1)},b.resolve=function(y1,_1){if(!fr(y1))throw new TypeError(NOT_TYPED_FUNCTION);const D1=y1._typedFunctionData.signatures;for(let E1=0;E1<D1.length;++E1)if(D1[E1].test(_1))return D1[E1];return null},b}const typedFunction=create();function factory(a,s,o,c){function h(d){var b=pickShallow(d,s.map(stripOptionalNotation));return assertDependencies(a,s,d),o(b)}return h.isFactory=!0,h.fn=a,h.dependencies=s.slice().sort(),c&&(h.meta=c),h}function assertDependencies(a,s,o){var c=s.filter(d=>!isOptionalDependency(d)).every(d=>o[d]!==void 0);if(!c){var h=s.filter(d=>o[d]===void 0);throw new Error('Cannot create function "'.concat(a,'", ')+"some dependencies are missing: ".concat(h.map(d=>'"'.concat(d,'"')).join(", "),"."))}}function isOptionalDependency(a){return a&&a[0]==="?"}function stripOptionalNotation(a){return a&&a[0]==="?"?a.slice(1):a}function isInteger$1(a){return typeof a=="boolean"?!0:Number.isFinite(a)?a===Math.round(a):!1}function safeNumberType(a,s){if(s.number==="bigint")try{BigInt(a)}catch{return s.numberFallback}return s.number}var sign$2=Math.sign||function(a){return a>0?1:a<0?-1:0},log2$2=Math.log2||function a(s){return Math.log(s)/Math.LN2},log10$2=Math.log10||function a(s){return Math.log(s)/Math.LN10},log1p$1=Math.log1p||function(a){return Math.log(a+1)},cbrt$2=Math.cbrt||function a(s){if(s===0)return s;var o=s<0,c;return o&&(s=-s),Number.isFinite(s)?(c=Math.exp(Math.log(s)/3),c=(s/(c*c)+2*c)/3):c=s,o?-c:c},expm1$1=Math.expm1||function a(s){return s>=2e-4||s<=-2e-4?Math.exp(s)-1:s+s*s/2+s*s*s/6};function formatNumberToBase(a,s,o){var c={2:"0b",8:"0o",16:"0x"},h=c[s],d="";if(o){if(o<1)throw new Error("size must be in greater than 0");if(!isInteger$1(o))throw new Error("size must be an integer");if(a>2**(o-1)-1||a<-(2**(o-1)))throw new Error("Value must be in range [-2^".concat(o-1,", 2^").concat(o-1,"-1]"));if(!isInteger$1(a))throw new Error("Value must be an integer");a<0&&(a=a+2**o),d="i".concat(o)}var b="";return a<0&&(a=-a,b="-"),"".concat(b).concat(h).concat(a.toString(s)).concat(d)}function format$3(a,s){if(typeof s=="function")return s(a);if(a===1/0)return"Infinity";if(a===-1/0)return"-Infinity";if(isNaN(a))return"NaN";var{notation:o,precision:c,wordSize:h}=normalizeFormatOptions(s);switch(o){case"fixed":return toFixed$1(a,c);case"exponential":return toExponential$1(a,c);case"engineering":return toEngineering$1(a,c);case"bin":return formatNumberToBase(a,2,h);case"oct":return formatNumberToBase(a,8,h);case"hex":return formatNumberToBase(a,16,h);case"auto":return toPrecision(a,c,s).replace(/((\.\d*?)(0+))($|e)/,function(){var d=arguments[2],b=arguments[4];return d!=="."?d+b:b});default:throw new Error('Unknown notation "'+o+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function normalizeFormatOptions(a){var s="auto",o,c;if(a!==void 0)if(isNumber(a))o=a;else if(isBigNumber(a))o=a.toNumber();else if(isObject(a))a.precision!==void 0&&(o=_toNumberOrThrow(a.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),a.wordSize!==void 0&&(c=_toNumberOrThrow(a.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),a.notation&&(s=a.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:s,precision:o,wordSize:c}}function splitNumber(a){var s=String(a).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!s)throw new SyntaxError("Invalid number "+a);var o=s[1],c=s[2],h=parseFloat(s[4]||"0"),d=c.indexOf(".");h+=d!==-1?d-1:c.length-1;var b=c.replace(".","").replace(/^0*/,function(_){return h-=_.length,""}).replace(/0*$/,"").split("").map(function(_){return parseInt(_)});return b.length===0&&(b.push(0),h++),{sign:o,coefficients:b,exponent:h}}function toEngineering$1(a,s){if(isNaN(a)||!Number.isFinite(a))return String(a);var o=splitNumber(a),c=roundDigits(o,s),h=c.exponent,d=c.coefficients,b=h%3===0?h:h<0?h-3-h%3:h-h%3;if(isNumber(s))for(;s>d.length||h-b+1>d.length;)d.push(0);else for(var _=Math.abs(h-b)-(d.length-1),$=0;$<_;$++)d.push(0);for(var j=Math.abs(h-b),Xt=1;j>0;)Xt++,j--;var Lt=d.slice(Xt).join(""),fr=isNumber(s)&&Lt.length||Lt.match(/[1-9]/)?"."+Lt:"",Jr=d.slice(0,Xt).join("")+fr+"e"+(h>=0?"+":"")+b.toString();return c.sign+Jr}function toFixed$1(a,s){if(isNaN(a)||!Number.isFinite(a))return String(a);var o=splitNumber(a),c=typeof s=="number"?roundDigits(o,o.exponent+1+s):o,h=c.coefficients,d=c.exponent+1,b=d+(s||0);return h.length<b&&(h=h.concat(zeros$1(b-h.length))),d<0&&(h=zeros$1(-d+1).concat(h),d=1),d<h.length&&h.splice(d,0,d===0?"0.":"."),c.sign+h.join("")}function toExponential$1(a,s){if(isNaN(a)||!Number.isFinite(Number(a)))return String(a);var o=splitNumber(a),c=s?roundDigits(o,s):o,h=c.coefficients,d=c.exponent;h.length<s&&(h=h.concat(zeros$1(s-h.length)));var b=h.shift();return c.sign+b+(h.length>0?"."+h.join(""):"")+"e"+(d>=0?"+":"")+d}function toPrecision(a,s,o){if(isNaN(a)||!Number.isFinite(a))return String(a);var c=_toNumberOrDefault$1(o==null?void 0:o.lowerExp,-3),h=_toNumberOrDefault$1(o==null?void 0:o.upperExp,5),d=splitNumber(a),b=s?roundDigits(d,s):d;if(b.exponent<c||b.exponent>=h)return toExponential$1(a,s);var _=b.coefficients,$=b.exponent;_.length<s&&(_=_.concat(zeros$1(s-_.length))),_=_.concat(zeros$1($-_.length+1+(_.length<s?s-_.length:0))),_=zeros$1(-$).concat(_);var j=$>0?$:0;return j<_.length-1&&_.splice(j+1,0,"."),b.sign+_.join("")}function roundDigits(a,s){for(var o={sign:a.sign,coefficients:a.coefficients,exponent:a.exponent},c=o.coefficients;s<=0;)c.unshift(0),o.exponent++,s++;if(c.length>s){var h=c.splice(s,c.length-s);if(h[0]>=5){var d=s-1;for(c[d]++;c[d]===10;)c.pop(),d===0&&(c.unshift(0),o.exponent++,d++),d--,c[d]++}}return o}function zeros$1(a){for(var s=[],o=0;o<a;o++)s.push(0);return s}function digits(a){return a.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function nearlyEqual$1(a,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(o<=0)throw new Error("Relative tolerance must be greater than 0");if(c<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(a)||isNaN(s)?!1:!Number.isFinite(a)||!Number.isFinite(s)?a===s:a===s?!0:Math.abs(a-s)<=Math.max(o*Math.max(Math.abs(a),Math.abs(s)),c)}var acosh$2=Math.acosh||function(a){return Math.log(Math.sqrt(a*a-1)+a)},asinh$2=Math.asinh||function(a){return Math.log(Math.sqrt(a*a+1)+a)},atanh$2=Math.atanh||function(a){return Math.log((1+a)/(1-a))/2},cosh$3=Math.cosh||function(a){return(Math.exp(a)+Math.exp(-a))/2},sinh$3=Math.sinh||function(a){return(Math.exp(a)-Math.exp(-a))/2},tanh$2=Math.tanh||function(a){var s=Math.exp(2*a);return(s-1)/(s+1)};function copysign(a,s){var o=!0,c=s>0?!0:s<0?!1:1/s===1/0;return o^c?-a:a}function _toNumberOrThrow(a,s){if(isNumber(a))return a;if(isBigNumber(a))return a.toNumber();s()}function _toNumberOrDefault$1(a,s){return isNumber(a)?a:isBigNumber(a)?a.toNumber():s}var _createTyped2=function a(){return _createTyped2=typedFunction.create,typedFunction},dependencies$50=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],createTyped=factory("typed",dependencies$50,function a(s){var{BigNumber:o,Complex:c,DenseMatrix:h,Fraction:d}=s,b=_createTyped2();return b.clear(),b.addTypes([{name:"number",test:isNumber},{name:"Complex",test:isComplex},{name:"BigNumber",test:isBigNumber},{name:"bigint",test:isBigInt},{name:"Fraction",test:isFraction},{name:"Unit",test:isUnit},{name:"identifier",test:_=>isString&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(_)},{name:"string",test:isString},{name:"Chain",test:isChain},{name:"Array",test:isArray},{name:"Matrix",test:isMatrix},{name:"DenseMatrix",test:isDenseMatrix},{name:"SparseMatrix",test:isSparseMatrix},{name:"Range",test:isRange},{name:"Index",test:isIndex},{name:"boolean",test:isBoolean},{name:"ResultSet",test:isResultSet},{name:"Help",test:isHelp},{name:"function",test:isFunction},{name:"Date",test:isDate},{name:"RegExp",test:isRegExp},{name:"null",test:isNull},{name:"undefined",test:isUndefined},{name:"AccessorNode",test:isAccessorNode},{name:"ArrayNode",test:isArrayNode},{name:"AssignmentNode",test:isAssignmentNode},{name:"BlockNode",test:isBlockNode},{name:"ConditionalNode",test:isConditionalNode},{name:"ConstantNode",test:isConstantNode},{name:"FunctionNode",test:isFunctionNode},{name:"FunctionAssignmentNode",test:isFunctionAssignmentNode},{name:"IndexNode",test:isIndexNode},{name:"Node",test:isNode},{name:"ObjectNode",test:isObjectNode},{name:"OperatorNode",test:isOperatorNode},{name:"ParenthesisNode",test:isParenthesisNode},{name:"RangeNode",test:isRangeNode},{name:"RelationalNode",test:isRelationalNode},{name:"SymbolNode",test:isSymbolNode},{name:"Map",test:isMap},{name:"Object",test:isObject}]),b.addConversions([{from:"number",to:"BigNumber",convert:function($){if(o||throwNoBignumber($),digits($)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+$+"). Use function bignumber(x) to convert to BigNumber.");return new o($)}},{from:"number",to:"Complex",convert:function($){return c||throwNoComplex($),new c($,0)}},{from:"BigNumber",to:"Complex",convert:function($){return c||throwNoComplex($),new c($.toNumber(),0)}},{from:"bigint",to:"number",convert:function($){if($>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+$+")");return Number($)}},{from:"bigint",to:"BigNumber",convert:function($){return o||throwNoBignumber($),new o($.toString())}},{from:"bigint",to:"Fraction",convert:function($){return d||throwNoFraction($),new d($)}},{from:"Fraction",to:"BigNumber",convert:function($){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function($){return c||throwNoComplex($),new c($.valueOf(),0)}},{from:"number",to:"Fraction",convert:function($){d||throwNoFraction($);var j=new d($);if(j.valueOf()!==$)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+$+"). Use function fraction(x) to convert to Fraction.");return j}},{from:"string",to:"number",convert:function($){var j=Number($);if(isNaN(j))throw new Error('Cannot convert "'+$+'" to a number');return j}},{from:"string",to:"BigNumber",convert:function($){o||throwNoBignumber($);try{return new o($)}catch{throw new Error('Cannot convert "'+$+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function($){try{return BigInt($)}catch{throw new Error('Cannot convert "'+$+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function($){d||throwNoFraction($);try{return new d($)}catch{throw new Error('Cannot convert "'+$+'" to Fraction')}}},{from:"string",to:"Complex",convert:function($){c||throwNoComplex($);try{return new c($)}catch{throw new Error('Cannot convert "'+$+'" to Complex')}}},{from:"boolean",to:"number",convert:function($){return+$}},{from:"boolean",to:"BigNumber",convert:function($){return o||throwNoBignumber($),new o(+$)}},{from:"boolean",to:"bigint",convert:function($){return BigInt(+$)}},{from:"boolean",to:"Fraction",convert:function($){return d||throwNoFraction($),new d(+$)}},{from:"boolean",to:"string",convert:function($){return String($)}},{from:"Array",to:"Matrix",convert:function($){return h||throwNoMatrix(),new h($)}},{from:"Matrix",to:"Array",convert:function($){return $.valueOf()}}]),b.onMismatch=(_,$,j)=>{var Xt=b.createError(_,$,j);if(["wrongType","mismatch"].includes(Xt.data.category)&&$.length===1&&isCollection($[0])&&j.some(fr=>!fr.params.includes(","))){var Lt=new TypeError("Function '".concat(_,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(_,")'."));throw Lt.data=Xt.data,Lt}throw Xt},b.onMismatch=(_,$,j)=>{var Xt=b.createError(_,$,j);if(["wrongType","mismatch"].includes(Xt.data.category)&&$.length===1&&isCollection($[0])&&j.some(fr=>!fr.params.includes(","))){var Lt=new TypeError("Function '".concat(_,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(_,")'."));throw Lt.data=Xt.data,Lt}throw Xt},b});function throwNoBignumber(a){throw new Error("Cannot convert value ".concat(a," into a BigNumber: no class 'BigNumber' provided"))}function throwNoComplex(a){throw new Error("Cannot convert value ".concat(a," into a Complex number: no class 'Complex' provided"))}function throwNoMatrix(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function throwNoFraction(a){throw new Error("Cannot convert value ".concat(a," into a Fraction, no class 'Fraction' provided."))}var name$4$="ResultSet",dependencies$4$=[],createResultSet=factory(name$4$,dependencies$4$,()=>{function a(s){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this.entries=s||[]}return a.prototype.type="ResultSet",a.prototype.isResultSet=!0,a.prototype.valueOf=function(){return this.entries},a.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},a.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},a.fromJSON=function(s){return new a(s.entries)},a},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10$1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10$1.length-1,PI_PRECISION=PI.length-1,P$4={toStringTag:tag};P$4.absoluteValue=P$4.abs=function(){var a=new this.constructor(this);return a.s<0&&(a.s=1),finalise(a)};P$4.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P$4.clampedTo=P$4.clamp=function(a,s){var o,c=this,h=c.constructor;if(a=new h(a),s=new h(s),!a.s||!s.s)return new h(NaN);if(a.gt(s))throw Error(invalidArgument+s);return o=c.cmp(a),o<0?a:c.cmp(s)>0?s:new h(c)};P$4.comparedTo=P$4.cmp=function(a){var s,o,c,h,d=this,b=d.d,_=(a=new d.constructor(a)).d,$=d.s,j=a.s;if(!b||!_)return!$||!j?NaN:$!==j?$:b===_?0:!b^$<0?1:-1;if(!b[0]||!_[0])return b[0]?$:_[0]?-j:0;if($!==j)return $;if(d.e!==a.e)return d.e>a.e^$<0?1:-1;for(c=b.length,h=_.length,s=0,o=c<h?c:h;s<o;++s)if(b[s]!==_[s])return b[s]>_[s]^$<0?1:-1;return c===h?0:c>h^$<0?1:-1};P$4.cosine=P$4.cos=function(){var a,s,o=this,c=o.constructor;return o.d?o.d[0]?(a=c.precision,s=c.rounding,c.precision=a+Math.max(o.e,o.sd())+LOG_BASE,c.rounding=1,o=cosine(c,toLessThanHalfPi(c,o)),c.precision=a,c.rounding=s,finalise(quadrant==2||quadrant==3?o.neg():o,a,s,!0)):new c(1):new c(NaN)};P$4.cubeRoot=P$4.cbrt=function(){var a,s,o,c,h,d,b,_,$,j,Xt=this,Lt=Xt.constructor;if(!Xt.isFinite()||Xt.isZero())return new Lt(Xt);for(external=!1,d=Xt.s*mathpow(Xt.s*Xt,1/3),!d||Math.abs(d)==1/0?(o=digitsToString(Xt.d),a=Xt.e,(d=(a-o.length+1)%3)&&(o+=d==1||d==-2?"0":"00"),d=mathpow(o,1/3),a=mathfloor((a+1)/3)-(a%3==(a<0?-1:2)),d==1/0?o="5e"+a:(o=d.toExponential(),o=o.slice(0,o.indexOf("e")+1)+a),c=new Lt(o),c.s=Xt.s):c=new Lt(d.toString()),b=(a=Lt.precision)+3;;)if(_=c,$=_.times(_).times(_),j=$.plus(Xt),c=divide$1(j.plus(Xt).times(_),j.plus($),b+2,1),digitsToString(_.d).slice(0,b)===(o=digitsToString(c.d)).slice(0,b))if(o=o.slice(b-3,b+1),o=="9999"||!h&&o=="4999"){if(!h&&(finalise(_,a+1,0),_.times(_).times(_).eq(Xt))){c=_;break}b+=4,h=1}else{(!+o||!+o.slice(1)&&o.charAt(0)=="5")&&(finalise(c,a+1,1),s=!c.times(c).times(c).eq(Xt));break}return external=!0,finalise(c,a,Lt.rounding,s)};P$4.decimalPlaces=P$4.dp=function(){var a,s=this.d,o=NaN;if(s){if(a=s.length-1,o=(a-mathfloor(this.e/LOG_BASE))*LOG_BASE,a=s[a],a)for(;a%10==0;a/=10)o--;o<0&&(o=0)}return o};P$4.dividedBy=P$4.div=function(a){return divide$1(this,new this.constructor(a))};P$4.dividedToIntegerBy=P$4.divToInt=function(a){var s=this,o=s.constructor;return finalise(divide$1(s,new o(a),0,1,1),o.precision,o.rounding)};P$4.equals=P$4.eq=function(a){return this.cmp(a)===0};P$4.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P$4.greaterThan=P$4.gt=function(a){return this.cmp(a)>0};P$4.greaterThanOrEqualTo=P$4.gte=function(a){var s=this.cmp(a);return s==1||s===0};P$4.hyperbolicCosine=P$4.cosh=function(){var a,s,o,c,h,d=this,b=d.constructor,_=new b(1);if(!d.isFinite())return new b(d.s?1/0:NaN);if(d.isZero())return _;o=b.precision,c=b.rounding,b.precision=o+Math.max(d.e,d.sd())+4,b.rounding=1,h=d.d.length,h<32?(a=Math.ceil(h/3),s=(1/tinyPow(4,a)).toString()):(a=16,s="2.3283064365386962890625e-10"),d=taylorSeries(b,1,d.times(s),new b(1),!0);for(var $,j=a,Xt=new b(8);j--;)$=d.times(d),d=_.minus($.times(Xt.minus($.times(Xt))));return finalise(d,b.precision=o,b.rounding=c,!0)};P$4.hyperbolicSine=P$4.sinh=function(){var a,s,o,c,h=this,d=h.constructor;if(!h.isFinite()||h.isZero())return new d(h);if(s=d.precision,o=d.rounding,d.precision=s+Math.max(h.e,h.sd())+4,d.rounding=1,c=h.d.length,c<3)h=taylorSeries(d,2,h,h,!0);else{a=1.4*Math.sqrt(c),a=a>16?16:a|0,h=h.times(1/tinyPow(5,a)),h=taylorSeries(d,2,h,h,!0);for(var b,_=new d(5),$=new d(16),j=new d(20);a--;)b=h.times(h),h=h.times(_.plus(b.times($.times(b).plus(j))))}return d.precision=s,d.rounding=o,finalise(h,s,o,!0)};P$4.hyperbolicTangent=P$4.tanh=function(){var a,s,o=this,c=o.constructor;return o.isFinite()?o.isZero()?new c(o):(a=c.precision,s=c.rounding,c.precision=a+7,c.rounding=1,divide$1(o.sinh(),o.cosh(),c.precision=a,c.rounding=s)):new c(o.s)};P$4.inverseCosine=P$4.acos=function(){var a=this,s=a.constructor,o=a.abs().cmp(1),c=s.precision,h=s.rounding;return o!==-1?o===0?a.isNeg()?getPi(s,c,h):new s(0):new s(NaN):a.isZero()?getPi(s,c+4,h).times(.5):(s.precision=c+6,s.rounding=1,a=new s(1).minus(a).div(a.plus(1)).sqrt().atan(),s.precision=c,s.rounding=h,a.times(2))};P$4.inverseHyperbolicCosine=P$4.acosh=function(){var a,s,o=this,c=o.constructor;return o.lte(1)?new c(o.eq(1)?0:NaN):o.isFinite()?(a=c.precision,s=c.rounding,c.precision=a+Math.max(Math.abs(o.e),o.sd())+4,c.rounding=1,external=!1,o=o.times(o).minus(1).sqrt().plus(o),external=!0,c.precision=a,c.rounding=s,o.ln()):new c(o)};P$4.inverseHyperbolicSine=P$4.asinh=function(){var a,s,o=this,c=o.constructor;return!o.isFinite()||o.isZero()?new c(o):(a=c.precision,s=c.rounding,c.precision=a+2*Math.max(Math.abs(o.e),o.sd())+6,c.rounding=1,external=!1,o=o.times(o).plus(1).sqrt().plus(o),external=!0,c.precision=a,c.rounding=s,o.ln())};P$4.inverseHyperbolicTangent=P$4.atanh=function(){var a,s,o,c,h=this,d=h.constructor;return h.isFinite()?h.e>=0?new d(h.abs().eq(1)?h.s/0:h.isZero()?h:NaN):(a=d.precision,s=d.rounding,c=h.sd(),Math.max(c,a)<2*-h.e-1?finalise(new d(h),a,s,!0):(d.precision=o=c-h.e,h=divide$1(h.plus(1),new d(1).minus(h),o+a,1),d.precision=a+4,d.rounding=1,h=h.ln(),d.precision=a,d.rounding=s,h.times(.5))):new d(NaN)};P$4.inverseSine=P$4.asin=function(){var a,s,o,c,h=this,d=h.constructor;return h.isZero()?new d(h):(s=h.abs().cmp(1),o=d.precision,c=d.rounding,s!==-1?s===0?(a=getPi(d,o+4,c).times(.5),a.s=h.s,a):new d(NaN):(d.precision=o+6,d.rounding=1,h=h.div(new d(1).minus(h.times(h)).sqrt().plus(1)).atan(),d.precision=o,d.rounding=c,h.times(2)))};P$4.inverseTangent=P$4.atan=function(){var a,s,o,c,h,d,b,_,$,j=this,Xt=j.constructor,Lt=Xt.precision,fr=Xt.rounding;if(j.isFinite()){if(j.isZero())return new Xt(j);if(j.abs().eq(1)&&Lt+4<=PI_PRECISION)return b=getPi(Xt,Lt+4,fr).times(.25),b.s=j.s,b}else{if(!j.s)return new Xt(NaN);if(Lt+4<=PI_PRECISION)return b=getPi(Xt,Lt+4,fr).times(.5),b.s=j.s,b}for(Xt.precision=_=Lt+10,Xt.rounding=1,o=Math.min(28,_/LOG_BASE+2|0),a=o;a;--a)j=j.div(j.times(j).plus(1).sqrt().plus(1));for(external=!1,s=Math.ceil(_/LOG_BASE),c=1,$=j.times(j),b=new Xt(j),h=j;a!==-1;)if(h=h.times($),d=b.minus(h.div(c+=2)),h=h.times($),b=d.plus(h.div(c+=2)),b.d[s]!==void 0)for(a=s;b.d[a]===d.d[a]&&a--;);return o&&(b=b.times(2<<o-1)),external=!0,finalise(b,Xt.precision=Lt,Xt.rounding=fr,!0)};P$4.isFinite=function(){return!!this.d};P$4.isInteger=P$4.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P$4.isNaN=function(){return!this.s};P$4.isNegative=P$4.isNeg=function(){return this.s<0};P$4.isPositive=P$4.isPos=function(){return this.s>0};P$4.isZero=function(){return!!this.d&&this.d[0]===0};P$4.lessThan=P$4.lt=function(a){return this.cmp(a)<0};P$4.lessThanOrEqualTo=P$4.lte=function(a){return this.cmp(a)<1};P$4.logarithm=P$4.log=function(a){var s,o,c,h,d,b,_,$,j=this,Xt=j.constructor,Lt=Xt.precision,fr=Xt.rounding,Jr=5;if(a==null)a=new Xt(10),s=!0;else{if(a=new Xt(a),o=a.d,a.s<0||!o||!o[0]||a.eq(1))return new Xt(NaN);s=a.eq(10)}if(o=j.d,j.s<0||!o||!o[0]||j.eq(1))return new Xt(o&&!o[0]?-1/0:j.s!=1?NaN:o?0:1/0);if(s)if(o.length>1)d=!0;else{for(h=o[0];h%10===0;)h/=10;d=h!==1}if(external=!1,_=Lt+Jr,b=naturalLogarithm(j,_),c=s?getLn10(Xt,_+10):naturalLogarithm(a,_),$=divide$1(b,c,_,1),checkRoundingDigits($.d,h=Lt,fr))do if(_+=10,b=naturalLogarithm(j,_),c=s?getLn10(Xt,_+10):naturalLogarithm(a,_),$=divide$1(b,c,_,1),!d){+digitsToString($.d).slice(h+1,h+15)+1==1e14&&($=finalise($,Lt+1,0));break}while(checkRoundingDigits($.d,h+=10,fr));return external=!0,finalise($,Lt,fr)};P$4.minus=P$4.sub=function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr=this,Js=Jr.constructor;if(a=new Js(a),!Jr.d||!a.d)return!Jr.s||!a.s?a=new Js(NaN):Jr.d?a.s=-a.s:a=new Js(a.d||Jr.s!==a.s?Jr:NaN),a;if(Jr.s!=a.s)return a.s=-a.s,Jr.plus(a);if(j=Jr.d,fr=a.d,_=Js.precision,$=Js.rounding,!j[0]||!fr[0]){if(fr[0])a.s=-a.s;else if(j[0])a=new Js(Jr);else return new Js($===3?-0:0);return external?finalise(a,_,$):a}if(o=mathfloor(a.e/LOG_BASE),Xt=mathfloor(Jr.e/LOG_BASE),j=j.slice(),d=Xt-o,d){for(Lt=d<0,Lt?(s=j,d=-d,b=fr.length):(s=fr,o=Xt,b=j.length),c=Math.max(Math.ceil(_/LOG_BASE),b)+2,d>c&&(d=c,s.length=1),s.reverse(),c=d;c--;)s.push(0);s.reverse()}else{for(c=j.length,b=fr.length,Lt=c<b,Lt&&(b=c),c=0;c<b;c++)if(j[c]!=fr[c]){Lt=j[c]<fr[c];break}d=0}for(Lt&&(s=j,j=fr,fr=s,a.s=-a.s),b=j.length,c=fr.length-b;c>0;--c)j[b++]=0;for(c=fr.length;c>d;){if(j[--c]<fr[c]){for(h=c;h&&j[--h]===0;)j[h]=BASE-1;--j[h],j[c]+=BASE}j[c]-=fr[c]}for(;j[--b]===0;)j.pop();for(;j[0]===0;j.shift())--o;return j[0]?(a.d=j,a.e=getBase10Exponent(j,o),external?finalise(a,_,$):a):new Js($===3?-0:0)};P$4.modulo=P$4.mod=function(a){var s,o=this,c=o.constructor;return a=new c(a),!o.d||!a.s||a.d&&!a.d[0]?new c(NaN):!a.d||o.d&&!o.d[0]?finalise(new c(o),c.precision,c.rounding):(external=!1,c.modulo==9?(s=divide$1(o,a.abs(),0,3,1),s.s*=a.s):s=divide$1(o,a,0,c.modulo,1),s=s.times(a),external=!0,o.minus(s))};P$4.naturalExponential=P$4.exp=function(){return naturalExponential(this)};P$4.naturalLogarithm=P$4.ln=function(){return naturalLogarithm(this)};P$4.negated=P$4.neg=function(){var a=new this.constructor(this);return a.s=-a.s,finalise(a)};P$4.plus=P$4.add=function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt=this,fr=Lt.constructor;if(a=new fr(a),!Lt.d||!a.d)return!Lt.s||!a.s?a=new fr(NaN):Lt.d||(a=new fr(a.d||Lt.s===a.s?Lt:NaN)),a;if(Lt.s!=a.s)return a.s=-a.s,Lt.minus(a);if(j=Lt.d,Xt=a.d,_=fr.precision,$=fr.rounding,!j[0]||!Xt[0])return Xt[0]||(a=new fr(Lt)),external?finalise(a,_,$):a;if(d=mathfloor(Lt.e/LOG_BASE),c=mathfloor(a.e/LOG_BASE),j=j.slice(),h=d-c,h){for(h<0?(o=j,h=-h,b=Xt.length):(o=Xt,c=d,b=j.length),d=Math.ceil(_/LOG_BASE),b=d>b?d+1:b+1,h>b&&(h=b,o.length=1),o.reverse();h--;)o.push(0);o.reverse()}for(b=j.length,h=Xt.length,b-h<0&&(h=b,o=Xt,Xt=j,j=o),s=0;h;)s=(j[--h]=j[h]+Xt[h]+s)/BASE|0,j[h]%=BASE;for(s&&(j.unshift(s),++c),b=j.length;j[--b]==0;)j.pop();return a.d=j,a.e=getBase10Exponent(j,c),external?finalise(a,_,$):a};P$4.precision=P$4.sd=function(a){var s,o=this;if(a!==void 0&&a!==!!a&&a!==1&&a!==0)throw Error(invalidArgument+a);return o.d?(s=getPrecision(o.d),a&&o.e+1>s&&(s=o.e+1)):s=NaN,s};P$4.round=function(){var a=this,s=a.constructor;return finalise(new s(a),a.e+1,s.rounding)};P$4.sine=P$4.sin=function(){var a,s,o=this,c=o.constructor;return o.isFinite()?o.isZero()?new c(o):(a=c.precision,s=c.rounding,c.precision=a+Math.max(o.e,o.sd())+LOG_BASE,c.rounding=1,o=sine(c,toLessThanHalfPi(c,o)),c.precision=a,c.rounding=s,finalise(quadrant>2?o.neg():o,a,s,!0)):new c(NaN)};P$4.squareRoot=P$4.sqrt=function(){var a,s,o,c,h,d,b=this,_=b.d,$=b.e,j=b.s,Xt=b.constructor;if(j!==1||!_||!_[0])return new Xt(!j||j<0&&(!_||_[0])?NaN:_?b:1/0);for(external=!1,j=Math.sqrt(+b),j==0||j==1/0?(s=digitsToString(_),(s.length+$)%2==0&&(s+="0"),j=Math.sqrt(s),$=mathfloor(($+1)/2)-($<0||$%2),j==1/0?s="5e"+$:(s=j.toExponential(),s=s.slice(0,s.indexOf("e")+1)+$),c=new Xt(s)):c=new Xt(j.toString()),o=($=Xt.precision)+3;;)if(d=c,c=d.plus(divide$1(b,d,o+2,1)).times(.5),digitsToString(d.d).slice(0,o)===(s=digitsToString(c.d)).slice(0,o))if(s=s.slice(o-3,o+1),s=="9999"||!h&&s=="4999"){if(!h&&(finalise(d,$+1,0),d.times(d).eq(b))){c=d;break}o+=4,h=1}else{(!+s||!+s.slice(1)&&s.charAt(0)=="5")&&(finalise(c,$+1,1),a=!c.times(c).eq(b));break}return external=!0,finalise(c,$,Xt.rounding,a)};P$4.tangent=P$4.tan=function(){var a,s,o=this,c=o.constructor;return o.isFinite()?o.isZero()?new c(o):(a=c.precision,s=c.rounding,c.precision=a+10,c.rounding=1,o=o.sin(),o.s=1,o=divide$1(o,new c(1).minus(o.times(o)).sqrt(),a+10,0),c.precision=a,c.rounding=s,finalise(quadrant==2||quadrant==4?o.neg():o,a,s,!0)):new c(NaN)};P$4.times=P$4.mul=function(a){var s,o,c,h,d,b,_,$,j,Xt=this,Lt=Xt.constructor,fr=Xt.d,Jr=(a=new Lt(a)).d;if(a.s*=Xt.s,!fr||!fr[0]||!Jr||!Jr[0])return new Lt(!a.s||fr&&!fr[0]&&!Jr||Jr&&!Jr[0]&&!fr?NaN:!fr||!Jr?a.s/0:a.s*0);for(o=mathfloor(Xt.e/LOG_BASE)+mathfloor(a.e/LOG_BASE),$=fr.length,j=Jr.length,$<j&&(d=fr,fr=Jr,Jr=d,b=$,$=j,j=b),d=[],b=$+j,c=b;c--;)d.push(0);for(c=j;--c>=0;){for(s=0,h=$+c;h>c;)_=d[h]+Jr[c]*fr[h-c-1]+s,d[h--]=_%BASE|0,s=_/BASE|0;d[h]=(d[h]+s)%BASE|0}for(;!d[--b];)d.pop();return s?++o:d.shift(),a.d=d,a.e=getBase10Exponent(d,o),external?finalise(a,Lt.precision,Lt.rounding):a};P$4.toBinary=function(a,s){return toStringBinary(this,2,a,s)};P$4.toDecimalPlaces=P$4.toDP=function(a,s){var o=this,c=o.constructor;return o=new c(o),a===void 0?o:(checkInt32(a,0,MAX_DIGITS),s===void 0?s=c.rounding:checkInt32(s,0,8),finalise(o,a+o.e+1,s))};P$4.toExponential=function(a,s){var o,c=this,h=c.constructor;return a===void 0?o=finiteToString(c,!0):(checkInt32(a,0,MAX_DIGITS),s===void 0?s=h.rounding:checkInt32(s,0,8),c=finalise(new h(c),a+1,s),o=finiteToString(c,!0,a+1)),c.isNeg()&&!c.isZero()?"-"+o:o};P$4.toFixed=function(a,s){var o,c,h=this,d=h.constructor;return a===void 0?o=finiteToString(h):(checkInt32(a,0,MAX_DIGITS),s===void 0?s=d.rounding:checkInt32(s,0,8),c=finalise(new d(h),a+h.e+1,s),o=finiteToString(c,!1,a+c.e+1)),h.isNeg()&&!h.isZero()?"-"+o:o};P$4.toFraction=function(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr=this,Js=Jr.d,qs=Jr.constructor;if(!Js)return new qs(Jr);if(j=o=new qs(1),c=$=new qs(0),s=new qs(c),d=s.e=getPrecision(Js)-Jr.e-1,b=d%LOG_BASE,s.d[0]=mathpow(10,b<0?LOG_BASE+b:b),a==null)a=d>0?s:j;else{if(_=new qs(a),!_.isInt()||_.lt(j))throw Error(invalidArgument+_);a=_.gt(s)?d>0?s:j:_}for(external=!1,_=new qs(digitsToString(Js)),Xt=qs.precision,qs.precision=d=Js.length*LOG_BASE*2;Lt=divide$1(_,s,0,1,1),h=o.plus(Lt.times(c)),h.cmp(a)!=1;)o=c,c=h,h=j,j=$.plus(Lt.times(h)),$=h,h=s,s=_.minus(Lt.times(h)),_=h;return h=divide$1(a.minus(o),c,0,1,1),$=$.plus(h.times(j)),o=o.plus(h.times(c)),$.s=j.s=Jr.s,fr=divide$1(j,c,d,1).minus(Jr).abs().cmp(divide$1($,o,d,1).minus(Jr).abs())<1?[j,c]:[$,o],qs.precision=Xt,external=!0,fr};P$4.toHexadecimal=P$4.toHex=function(a,s){return toStringBinary(this,16,a,s)};P$4.toNearest=function(a,s){var o=this,c=o.constructor;if(o=new c(o),a==null){if(!o.d)return o;a=new c(1),s=c.rounding}else{if(a=new c(a),s===void 0?s=c.rounding:checkInt32(s,0,8),!o.d)return a.s?o:a;if(!a.d)return a.s&&(a.s=o.s),a}return a.d[0]?(external=!1,o=divide$1(o,a,0,s,1).times(a),external=!0,finalise(o)):(a.s=o.s,o=a),o};P$4.toNumber=function(){return+this};P$4.toOctal=function(a,s){return toStringBinary(this,8,a,s)};P$4.toPower=P$4.pow=function(a){var s,o,c,h,d,b,_=this,$=_.constructor,j=+(a=new $(a));if(!_.d||!a.d||!_.d[0]||!a.d[0])return new $(mathpow(+_,j));if(_=new $(_),_.eq(1))return _;if(c=$.precision,d=$.rounding,a.eq(1))return finalise(_,c,d);if(s=mathfloor(a.e/LOG_BASE),s>=a.d.length-1&&(o=j<0?-j:j)<=MAX_SAFE_INTEGER)return h=intPow($,_,o,c),a.s<0?new $(1).div(h):finalise(h,c,d);if(b=_.s,b<0){if(s<a.d.length-1)return new $(NaN);if(a.d[s]&1||(b=1),_.e==0&&_.d[0]==1&&_.d.length==1)return _.s=b,_}return o=mathpow(+_,j),s=o==0||!isFinite(o)?mathfloor(j*(Math.log("0."+digitsToString(_.d))/Math.LN10+_.e+1)):new $(o+"").e,s>$.maxE+1||s<$.minE-1?new $(s>0?b/0:0):(external=!1,$.rounding=_.s=1,o=Math.min(12,(s+"").length),h=naturalExponential(a.times(naturalLogarithm(_,c+o)),c),h.d&&(h=finalise(h,c+5,1),checkRoundingDigits(h.d,c,d)&&(s=c+10,h=finalise(naturalExponential(a.times(naturalLogarithm(_,s+o)),s),s+5,1),+digitsToString(h.d).slice(c+1,c+15)+1==1e14&&(h=finalise(h,c+1,0)))),h.s=b,external=!0,$.rounding=d,finalise(h,c,d))};P$4.toPrecision=function(a,s){var o,c=this,h=c.constructor;return a===void 0?o=finiteToString(c,c.e<=h.toExpNeg||c.e>=h.toExpPos):(checkInt32(a,1,MAX_DIGITS),s===void 0?s=h.rounding:checkInt32(s,0,8),c=finalise(new h(c),a,s),o=finiteToString(c,a<=c.e||c.e<=h.toExpNeg,a)),c.isNeg()&&!c.isZero()?"-"+o:o};P$4.toSignificantDigits=P$4.toSD=function(a,s){var o=this,c=o.constructor;return a===void 0?(a=c.precision,s=c.rounding):(checkInt32(a,1,MAX_DIGITS),s===void 0?s=c.rounding:checkInt32(s,0,8)),finalise(new c(o),a,s)};P$4.toString=function(){var a=this,s=a.constructor,o=finiteToString(a,a.e<=s.toExpNeg||a.e>=s.toExpPos);return a.isNeg()&&!a.isZero()?"-"+o:o};P$4.truncated=P$4.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P$4.valueOf=P$4.toJSON=function(){var a=this,s=a.constructor,o=finiteToString(a,a.e<=s.toExpNeg||a.e>=s.toExpPos);return a.isNeg()?"-"+o:o};function digitsToString(a){var s,o,c,h=a.length-1,d="",b=a[0];if(h>0){for(d+=b,s=1;s<h;s++)c=a[s]+"",o=LOG_BASE-c.length,o&&(d+=getZeroString(o)),d+=c;b=a[s],c=b+"",o=LOG_BASE-c.length,o&&(d+=getZeroString(o))}else if(b===0)return"0";for(;b%10===0;)b/=10;return d+b}function checkInt32(a,s,o){if(a!==~~a||a<s||a>o)throw Error(invalidArgument+a)}function checkRoundingDigits(a,s,o,c){var h,d,b,_;for(d=a[0];d>=10;d/=10)--s;return--s<0?(s+=LOG_BASE,h=0):(h=Math.ceil((s+1)/LOG_BASE),s%=LOG_BASE),d=mathpow(10,LOG_BASE-s),_=a[h]%d|0,c==null?s<3?(s==0?_=_/100|0:s==1&&(_=_/10|0),b=o<4&&_==99999||o>3&&_==49999||_==5e4||_==0):b=(o<4&&_+1==d||o>3&&_+1==d/2)&&(a[h+1]/d/100|0)==mathpow(10,s-2)-1||(_==d/2||_==0)&&(a[h+1]/d/100|0)==0:s<4?(s==0?_=_/1e3|0:s==1?_=_/100|0:s==2&&(_=_/10|0),b=(c||o<4)&&_==9999||!c&&o>3&&_==4999):b=((c||o<4)&&_+1==d||!c&&o>3&&_+1==d/2)&&(a[h+1]/d/1e3|0)==mathpow(10,s-3)-1,b}function convertBase(a,s,o){for(var c,h=[0],d,b=0,_=a.length;b<_;){for(d=h.length;d--;)h[d]*=s;for(h[0]+=NUMERALS.indexOf(a.charAt(b++)),c=0;c<h.length;c++)h[c]>o-1&&(h[c+1]===void 0&&(h[c+1]=0),h[c+1]+=h[c]/o|0,h[c]%=o)}return h.reverse()}function cosine(a,s){var o,c,h;if(s.isZero())return s;c=s.d.length,c<32?(o=Math.ceil(c/3),h=(1/tinyPow(4,o)).toString()):(o=16,h="2.3283064365386962890625e-10"),a.precision+=o,s=taylorSeries(a,1,s.times(h),new a(1));for(var d=o;d--;){var b=s.times(s);s=b.times(b).minus(b).times(8).plus(1)}return a.precision-=o,s}var divide$1=function(){function a(c,h,d){var b,_=0,$=c.length;for(c=c.slice();$--;)b=c[$]*h+_,c[$]=b%d|0,_=b/d|0;return _&&c.unshift(_),c}function s(c,h,d,b){var _,$;if(d!=b)$=d>b?1:-1;else for(_=$=0;_<d;_++)if(c[_]!=h[_]){$=c[_]>h[_]?1:-1;break}return $}function o(c,h,d,b){for(var _=0;d--;)c[d]-=_,_=c[d]<h[d]?1:0,c[d]=_*b+c[d]-h[d];for(;!c[0]&&c.length>1;)c.shift()}return function(c,h,d,b,_,$){var j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1,r1,a1,i1,s1,c1=c.constructor,h1=c.s==h.s?1:-1,m1=c.d,l1=h.d;if(!m1||!m1[0]||!l1||!l1[0])return new c1(!c.s||!h.s||(m1?l1&&m1[0]==l1[0]:!l1)?NaN:m1&&m1[0]==0||!l1?h1*0:h1/0);for($?(Jr=1,Xt=c.e-h.e):($=BASE,Jr=LOG_BASE,Xt=mathfloor(c.e/Jr)-mathfloor(h.e/Jr)),i1=l1.length,r1=m1.length,js=new c1(h1),eu=js.d=[],Lt=0;l1[Lt]==(m1[Lt]||0);Lt++);if(l1[Lt]>(m1[Lt]||0)&&Xt--,d==null?(vu=d=c1.precision,b=c1.rounding):_?vu=d+(c.e-h.e)+1:vu=d,vu<0)eu.push(1),Js=!0;else{if(vu=vu/Jr+2|0,Lt=0,i1==1){for(fr=0,l1=l1[0],vu++;(Lt<r1||fr)&&vu--;Lt++)t1=fr*$+(m1[Lt]||0),eu[Lt]=t1/l1|0,fr=t1%l1|0;Js=fr||Lt<r1}else{for(fr=$/(l1[0]+1)|0,fr>1&&(l1=a(l1,fr,$),m1=a(m1,fr,$),i1=l1.length,r1=m1.length),e1=i1,Oo=m1.slice(0,i1),tu=Oo.length;tu<i1;)Oo[tu++]=0;s1=l1.slice(),s1.unshift(0),a1=l1[0],l1[1]>=$/2&&++a1;do fr=0,j=s(l1,Oo,i1,tu),j<0?(Bo=Oo[0],i1!=tu&&(Bo=Bo*$+(Oo[1]||0)),fr=Bo/a1|0,fr>1?(fr>=$&&(fr=$-1),qs=a(l1,fr,$),zo=qs.length,tu=Oo.length,j=s(qs,Oo,zo,tu),j==1&&(fr--,o(qs,i1<zo?s1:l1,zo,$))):(fr==0&&(j=fr=1),qs=l1.slice()),zo=qs.length,zo<tu&&qs.unshift(0),o(Oo,qs,tu,$),j==-1&&(tu=Oo.length,j=s(l1,Oo,i1,tu),j<1&&(fr++,o(Oo,i1<tu?s1:l1,tu,$))),tu=Oo.length):j===0&&(fr++,Oo=[0]),eu[Lt++]=fr,j&&Oo[0]?Oo[tu++]=m1[e1]||0:(Oo=[m1[e1]],tu=1);while((e1++<r1||Oo[0]!==void 0)&&vu--);Js=Oo[0]!==void 0}eu[0]||eu.shift()}if(Jr==1)js.e=Xt,inexact=Js;else{for(Lt=1,fr=eu[0];fr>=10;fr/=10)Lt++;js.e=Lt+Xt*Jr-1,finalise(js,_?d+js.e+1:d,b,Js)}return js}}();function finalise(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr=a.constructor;e:if(s!=null){if(Lt=a.d,!Lt)return a;for(h=1,_=Lt[0];_>=10;_/=10)h++;if(d=s-h,d<0)d+=LOG_BASE,b=s,Xt=Lt[fr=0],$=Xt/mathpow(10,h-b-1)%10|0;else if(fr=Math.ceil((d+1)/LOG_BASE),_=Lt.length,fr>=_)if(c){for(;_++<=fr;)Lt.push(0);Xt=$=0,h=1,d%=LOG_BASE,b=d-LOG_BASE+1}else break e;else{for(Xt=_=Lt[fr],h=1;_>=10;_/=10)h++;d%=LOG_BASE,b=d-LOG_BASE+h,$=b<0?0:Xt/mathpow(10,h-b-1)%10|0}if(c=c||s<0||Lt[fr+1]!==void 0||(b<0?Xt:Xt%mathpow(10,h-b-1)),j=o<4?($||c)&&(o==0||o==(a.s<0?3:2)):$>5||$==5&&(o==4||c||o==6&&(d>0?b>0?Xt/mathpow(10,h-b):0:Lt[fr-1])%10&1||o==(a.s<0?8:7)),s<1||!Lt[0])return Lt.length=0,j?(s-=a.e+1,Lt[0]=mathpow(10,(LOG_BASE-s%LOG_BASE)%LOG_BASE),a.e=-s||0):Lt[0]=a.e=0,a;if(d==0?(Lt.length=fr,_=1,fr--):(Lt.length=fr+1,_=mathpow(10,LOG_BASE-d),Lt[fr]=b>0?(Xt/mathpow(10,h-b)%mathpow(10,b)|0)*_:0),j)for(;;)if(fr==0){for(d=1,b=Lt[0];b>=10;b/=10)d++;for(b=Lt[0]+=_,_=1;b>=10;b/=10)_++;d!=_&&(a.e++,Lt[0]==BASE&&(Lt[0]=1));break}else{if(Lt[fr]+=_,Lt[fr]!=BASE)break;Lt[fr--]=0,_=1}for(d=Lt.length;Lt[--d]===0;)Lt.pop()}return external&&(a.e>Jr.maxE?(a.d=null,a.e=NaN):a.e<Jr.minE&&(a.e=0,a.d=[0])),a}function finiteToString(a,s,o){if(!a.isFinite())return nonFiniteToString(a);var c,h=a.e,d=digitsToString(a.d),b=d.length;return s?(o&&(c=o-b)>0?d=d.charAt(0)+"."+d.slice(1)+getZeroString(c):b>1&&(d=d.charAt(0)+"."+d.slice(1)),d=d+(a.e<0?"e":"e+")+a.e):h<0?(d="0."+getZeroString(-h-1)+d,o&&(c=o-b)>0&&(d+=getZeroString(c))):h>=b?(d+=getZeroString(h+1-b),o&&(c=o-h-1)>0&&(d=d+"."+getZeroString(c))):((c=h+1)<b&&(d=d.slice(0,c)+"."+d.slice(c)),o&&(c=o-b)>0&&(h+1===b&&(d+="."),d+=getZeroString(c))),d}function getBase10Exponent(a,s){var o=a[0];for(s*=LOG_BASE;o>=10;o/=10)s++;return s}function getLn10(a,s,o){if(s>LN10_PRECISION)throw external=!0,o&&(a.precision=o),Error(precisionLimitExceeded);return finalise(new a(LN10$1),s,1,!0)}function getPi(a,s,o){if(s>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new a(PI),s,o,!0)}function getPrecision(a){var s=a.length-1,o=s*LOG_BASE+1;if(s=a[s],s){for(;s%10==0;s/=10)o--;for(s=a[0];s>=10;s/=10)o++}return o}function getZeroString(a){for(var s="";a--;)s+="0";return s}function intPow(a,s,o,c){var h,d=new a(1),b=Math.ceil(c/LOG_BASE+4);for(external=!1;;){if(o%2&&(d=d.times(s),truncate(d.d,b)&&(h=!0)),o=mathfloor(o/2),o===0){o=d.d.length-1,h&&d.d[o]===0&&++d.d[o];break}s=s.times(s),truncate(s.d,b)}return external=!0,d}function isOdd(a){return a.d[a.d.length-1]&1}function maxOrMin(a,s,o){for(var c,h,d=new a(s[0]),b=0;++b<s.length;){if(h=new a(s[b]),!h.s){d=h;break}c=d.cmp(h),(c===o||c===0&&d.s===o)&&(d=h)}return d}function naturalExponential(a,s){var o,c,h,d,b,_,$,j=0,Xt=0,Lt=0,fr=a.constructor,Jr=fr.rounding,Js=fr.precision;if(!a.d||!a.d[0]||a.e>17)return new fr(a.d?a.d[0]?a.s<0?0:1/0:1:a.s?a.s<0?0:a:NaN);for(s==null?(external=!1,$=Js):$=s,_=new fr(.03125);a.e>-2;)a=a.times(_),Lt+=5;for(c=Math.log(mathpow(2,Lt))/Math.LN10*2+5|0,$+=c,o=d=b=new fr(1),fr.precision=$;;){if(d=finalise(d.times(a),$,1),o=o.times(++Xt),_=b.plus(divide$1(d,o,$,1)),digitsToString(_.d).slice(0,$)===digitsToString(b.d).slice(0,$)){for(h=Lt;h--;)b=finalise(b.times(b),$,1);if(s==null)if(j<3&&checkRoundingDigits(b.d,$-c,Jr,j))fr.precision=$+=10,o=d=_=new fr(1),Xt=0,j++;else return finalise(b,fr.precision=Js,Jr,external=!0);else return fr.precision=Js,b}b=_}}function naturalLogarithm(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr=1,Js=10,qs=a,zo=qs.d,js=qs.constructor,eu=js.rounding,Oo=js.precision;if(qs.s<0||!zo||!zo[0]||!qs.e&&zo[0]==1&&zo.length==1)return new js(zo&&!zo[0]?-1/0:qs.s!=1?NaN:zo?0:qs);if(s==null?(external=!1,Xt=Oo):Xt=s,js.precision=Xt+=Js,o=digitsToString(zo),c=o.charAt(0),Math.abs(d=qs.e)<15e14){for(;c<7&&c!=1||c==1&&o.charAt(1)>3;)qs=qs.times(a),o=digitsToString(qs.d),c=o.charAt(0),Jr++;d=qs.e,c>1?(qs=new js("0."+o),d++):qs=new js(c+"."+o.slice(1))}else return j=getLn10(js,Xt+2,Oo).times(d+""),qs=naturalLogarithm(new js(c+"."+o.slice(1)),Xt-Js).plus(j),js.precision=Oo,s==null?finalise(qs,Oo,eu,external=!0):qs;for(Lt=qs,$=b=qs=divide$1(qs.minus(1),qs.plus(1),Xt,1),fr=finalise(qs.times(qs),Xt,1),h=3;;){if(b=finalise(b.times(fr),Xt,1),j=$.plus(divide$1(b,new js(h),Xt,1)),digitsToString(j.d).slice(0,Xt)===digitsToString($.d).slice(0,Xt))if($=$.times(2),d!==0&&($=$.plus(getLn10(js,Xt+2,Oo).times(d+""))),$=divide$1($,new js(Jr),Xt,1),s==null)if(checkRoundingDigits($.d,Xt-Js,eu,_))js.precision=Xt+=Js,j=b=qs=divide$1(Lt.minus(1),Lt.plus(1),Xt,1),fr=finalise(qs.times(qs),Xt,1),h=_=1;else return finalise($,js.precision=Oo,eu,external=!0);else return js.precision=Oo,$;$=j,h+=2}}function nonFiniteToString(a){return String(a.s*a.s/0)}function parseDecimal(a,s){var o,c,h;for((o=s.indexOf("."))>-1&&(s=s.replace(".","")),(c=s.search(/e/i))>0?(o<0&&(o=c),o+=+s.slice(c+1),s=s.substring(0,c)):o<0&&(o=s.length),c=0;s.charCodeAt(c)===48;c++);for(h=s.length;s.charCodeAt(h-1)===48;--h);if(s=s.slice(c,h),s){if(h-=c,a.e=o=o-c-1,a.d=[],c=(o+1)%LOG_BASE,o<0&&(c+=LOG_BASE),c<h){for(c&&a.d.push(+s.slice(0,c)),h-=LOG_BASE;c<h;)a.d.push(+s.slice(c,c+=LOG_BASE));s=s.slice(c),c=LOG_BASE-s.length}else c-=h;for(;c--;)s+="0";a.d.push(+s),external&&(a.e>a.constructor.maxE?(a.d=null,a.e=NaN):a.e<a.constructor.minE&&(a.e=0,a.d=[0]))}else a.e=0,a.d=[0];return a}function parseOther(a,s){var o,c,h,d,b,_,$,j,Xt;if(s.indexOf("_")>-1){if(s=s.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(s))return parseDecimal(a,s)}else if(s==="Infinity"||s==="NaN")return+s||(a.s=NaN),a.e=NaN,a.d=null,a;if(isHex.test(s))o=16,s=s.toLowerCase();else if(isBinary.test(s))o=2;else if(isOctal.test(s))o=8;else throw Error(invalidArgument+s);for(d=s.search(/p/i),d>0?($=+s.slice(d+1),s=s.substring(2,d)):s=s.slice(2),d=s.indexOf("."),b=d>=0,c=a.constructor,b&&(s=s.replace(".",""),_=s.length,d=_-d,h=intPow(c,new c(o),d,d*2)),j=convertBase(s,o,BASE),Xt=j.length-1,d=Xt;j[d]===0;--d)j.pop();return d<0?new c(a.s*0):(a.e=getBase10Exponent(j,Xt),a.d=j,external=!1,b&&(a=divide$1(a,h,_*4)),$&&(a=a.times(Math.abs($)<54?mathpow(2,$):Decimal.pow(2,$))),external=!0,a)}function sine(a,s){var o,c=s.d.length;if(c<3)return s.isZero()?s:taylorSeries(a,2,s,s);o=1.4*Math.sqrt(c),o=o>16?16:o|0,s=s.times(1/tinyPow(5,o)),s=taylorSeries(a,2,s,s);for(var h,d=new a(5),b=new a(16),_=new a(20);o--;)h=s.times(s),s=s.times(d.plus(h.times(b.times(h).minus(_))));return s}function taylorSeries(a,s,o,c,h){var d,b,_,$,j=a.precision,Xt=Math.ceil(j/LOG_BASE);for(external=!1,$=o.times(o),_=new a(c);;){if(b=divide$1(_.times($),new a(s++*s++),j,1),_=h?c.plus(b):c.minus(b),c=divide$1(b.times($),new a(s++*s++),j,1),b=_.plus(c),b.d[Xt]!==void 0){for(d=Xt;b.d[d]===_.d[d]&&d--;);if(d==-1)break}d=_,_=c,c=b,b=d}return external=!0,b.d.length=Xt+1,b}function tinyPow(a,s){for(var o=a;--s;)o*=a;return o}function toLessThanHalfPi(a,s){var o,c=s.s<0,h=getPi(a,a.precision,1),d=h.times(.5);if(s=s.abs(),s.lte(d))return quadrant=c?4:1,s;if(o=s.divToInt(h),o.isZero())quadrant=c?3:2;else{if(s=s.minus(o.times(h)),s.lte(d))return quadrant=isOdd(o)?c?2:3:c?4:1,s;quadrant=isOdd(o)?c?1:4:c?3:2}return s.minus(h).abs()}function toStringBinary(a,s,o,c){var h,d,b,_,$,j,Xt,Lt,fr,Jr=a.constructor,Js=o!==void 0;if(Js?(checkInt32(o,1,MAX_DIGITS),c===void 0?c=Jr.rounding:checkInt32(c,0,8)):(o=Jr.precision,c=Jr.rounding),!a.isFinite())Xt=nonFiniteToString(a);else{for(Xt=finiteToString(a),b=Xt.indexOf("."),Js?(h=2,s==16?o=o*4-3:s==8&&(o=o*3-2)):h=s,b>=0&&(Xt=Xt.replace(".",""),fr=new Jr(1),fr.e=Xt.length-b,fr.d=convertBase(finiteToString(fr),10,h),fr.e=fr.d.length),Lt=convertBase(Xt,10,h),d=$=Lt.length;Lt[--$]==0;)Lt.pop();if(!Lt[0])Xt=Js?"0p+0":"0";else{if(b<0?d--:(a=new Jr(a),a.d=Lt,a.e=d,a=divide$1(a,fr,o,c,0,h),Lt=a.d,d=a.e,j=inexact),b=Lt[o],_=h/2,j=j||Lt[o+1]!==void 0,j=c<4?(b!==void 0||j)&&(c===0||c===(a.s<0?3:2)):b>_||b===_&&(c===4||j||c===6&&Lt[o-1]&1||c===(a.s<0?8:7)),Lt.length=o,j)for(;++Lt[--o]>h-1;)Lt[o]=0,o||(++d,Lt.unshift(1));for($=Lt.length;!Lt[$-1];--$);for(b=0,Xt="";b<$;b++)Xt+=NUMERALS.charAt(Lt[b]);if(Js){if($>1)if(s==16||s==8){for(b=s==16?4:3,--$;$%b;$++)Xt+="0";for(Lt=convertBase(Xt,h,s),$=Lt.length;!Lt[$-1];--$);for(b=1,Xt="1.";b<$;b++)Xt+=NUMERALS.charAt(Lt[b])}else Xt=Xt.charAt(0)+"."+Xt.slice(1);Xt=Xt+(d<0?"p":"p+")+d}else if(d<0){for(;++d;)Xt="0"+Xt;Xt="0."+Xt}else if(++d>$)for(d-=$;d--;)Xt+="0";else d<$&&(Xt=Xt.slice(0,d)+"."+Xt.slice(d))}Xt=(s==16?"0x":s==2?"0b":s==8?"0o":"")+Xt}return a.s<0?"-"+Xt:Xt}function truncate(a,s){if(a.length>s)return a.length=s,!0}function abs$1(a){return new this(a).abs()}function acos$1(a){return new this(a).acos()}function acosh$1(a){return new this(a).acosh()}function add$1(a,s){return new this(a).plus(s)}function asin$1(a){return new this(a).asin()}function asinh$1(a){return new this(a).asinh()}function atan$1(a){return new this(a).atan()}function atanh$1(a){return new this(a).atanh()}function atan2$1(a,s){a=new this(a),s=new this(s);var o,c=this.precision,h=this.rounding,d=c+4;return!a.s||!s.s?o=new this(NaN):!a.d&&!s.d?(o=getPi(this,d,1).times(s.s>0?.25:.75),o.s=a.s):!s.d||a.isZero()?(o=s.s<0?getPi(this,c,h):new this(0),o.s=a.s):!a.d||s.isZero()?(o=getPi(this,d,1).times(.5),o.s=a.s):s.s<0?(this.precision=d,this.rounding=1,o=this.atan(divide$1(a,s,d,1)),s=getPi(this,d,1),this.precision=c,this.rounding=h,o=a.s<0?o.minus(s):o.plus(s)):o=this.atan(divide$1(a,s,d,1)),o}function cbrt$1(a){return new this(a).cbrt()}function ceil$1(a){return finalise(a=new this(a),a.e+1,2)}function clamp(a,s,o){return new this(a).clamp(s,o)}function config(a){if(!a||typeof a!="object")throw Error(decimalError+"Object expected");var s,o,c,h=a.defaults===!0,d=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(s=0;s<d.length;s+=3)if(o=d[s],h&&(this[o]=DEFAULTS[o]),(c=a[o])!==void 0)if(mathfloor(c)===c&&c>=d[s+1]&&c<=d[s+2])this[o]=c;else throw Error(invalidArgument+o+": "+c);if(o="crypto",h&&(this[o]=DEFAULTS[o]),(c=a[o])!==void 0)if(c===!0||c===!1||c===0||c===1)if(c)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[o]=!0;else throw Error(cryptoUnavailable);else this[o]=!1;else throw Error(invalidArgument+o+": "+c);return this}function cos$1(a){return new this(a).cos()}function cosh$2(a){return new this(a).cosh()}function clone$2(a){var s,o,c;function h(d){var b,_,$,j=this;if(!(j instanceof h))return new h(d);if(j.constructor=h,isDecimalInstance(d)){j.s=d.s,external?!d.d||d.e>h.maxE?(j.e=NaN,j.d=null):d.e<h.minE?(j.e=0,j.d=[0]):(j.e=d.e,j.d=d.d.slice()):(j.e=d.e,j.d=d.d?d.d.slice():d.d);return}if($=typeof d,$==="number"){if(d===0){j.s=1/d<0?-1:1,j.e=0,j.d=[0];return}if(d<0?(d=-d,j.s=-1):j.s=1,d===~~d&&d<1e7){for(b=0,_=d;_>=10;_/=10)b++;external?b>h.maxE?(j.e=NaN,j.d=null):b<h.minE?(j.e=0,j.d=[0]):(j.e=b,j.d=[d]):(j.e=b,j.d=[d]);return}if(d*0!==0){d||(j.s=NaN),j.e=NaN,j.d=null;return}return parseDecimal(j,d.toString())}if($==="string")return(_=d.charCodeAt(0))===45?(d=d.slice(1),j.s=-1):(_===43&&(d=d.slice(1)),j.s=1),isDecimal.test(d)?parseDecimal(j,d):parseOther(j,d);if($==="bigint")return d<0?(d=-d,j.s=-1):j.s=1,parseDecimal(j,d.toString());throw Error(invalidArgument+d)}if(h.prototype=P$4,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.EUCLID=9,h.config=h.set=config,h.clone=clone$2,h.isDecimal=isDecimalInstance,h.abs=abs$1,h.acos=acos$1,h.acosh=acosh$1,h.add=add$1,h.asin=asin$1,h.asinh=asinh$1,h.atan=atan$1,h.atanh=atanh$1,h.atan2=atan2$1,h.cbrt=cbrt$1,h.ceil=ceil$1,h.clamp=clamp,h.cos=cos$1,h.cosh=cosh$2,h.div=div,h.exp=exp$1,h.floor=floor$1,h.hypot=hypot$2,h.ln=ln$1,h.log=log$1,h.log10=log10$1,h.log2=log2$1,h.max=max$1,h.min=min$1,h.mod=mod$1,h.mul=mul,h.pow=pow$1,h.random=random$1,h.round=round$1,h.sign=sign$1,h.sin=sin$1,h.sinh=sinh$2,h.sqrt=sqrt$1,h.sub=sub$1,h.sum=sum$1,h.tan=tan$1,h.tanh=tanh$1,h.trunc=trunc,a===void 0&&(a={}),a&&a.defaults!==!0)for(c=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],s=0;s<c.length;)a.hasOwnProperty(o=c[s++])||(a[o]=this[o]);return h.config(a),h}function div(a,s){return new this(a).div(s)}function exp$1(a){return new this(a).exp()}function floor$1(a){return finalise(a=new this(a),a.e+1,3)}function hypot$2(){var a,s,o=new this(0);for(external=!1,a=0;a<arguments.length;)if(s=new this(arguments[a++]),s.d)o.d&&(o=o.plus(s.times(s)));else{if(s.s)return external=!0,new this(1/0);o=s}return external=!0,o.sqrt()}function isDecimalInstance(a){return a instanceof Decimal||a&&a.toStringTag===tag||!1}function ln$1(a){return new this(a).ln()}function log$1(a,s){return new this(a).log(s)}function log2$1(a){return new this(a).log(2)}function log10$1(a){return new this(a).log(10)}function max$1(){return maxOrMin(this,arguments,-1)}function min$1(){return maxOrMin(this,arguments,1)}function mod$1(a,s){return new this(a).mod(s)}function mul(a,s){return new this(a).mul(s)}function pow$1(a,s){return new this(a).pow(s)}function random$1(a){var s,o,c,h,d=0,b=new this(1),_=[];if(a===void 0?a=this.precision:checkInt32(a,1,MAX_DIGITS),c=Math.ceil(a/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(s=crypto.getRandomValues(new Uint32Array(c));d<c;)h=s[d],h>=429e7?s[d]=crypto.getRandomValues(new Uint32Array(1))[0]:_[d++]=h%1e7;else if(crypto.randomBytes){for(s=crypto.randomBytes(c*=4);d<c;)h=s[d]+(s[d+1]<<8)+(s[d+2]<<16)+((s[d+3]&127)<<24),h>=214e7?crypto.randomBytes(4).copy(s,d):(_.push(h%1e7),d+=4);d=c/4}else throw Error(cryptoUnavailable);else for(;d<c;)_[d++]=Math.random()*1e7|0;for(c=_[--d],a%=LOG_BASE,c&&a&&(h=mathpow(10,LOG_BASE-a),_[d]=(c/h|0)*h);_[d]===0;d--)_.pop();if(d<0)o=0,_=[0];else{for(o=-1;_[0]===0;o-=LOG_BASE)_.shift();for(c=1,h=_[0];h>=10;h/=10)c++;c<LOG_BASE&&(o-=LOG_BASE-c)}return b.e=o,b.d=_,b}function round$1(a){return finalise(a=new this(a),a.e+1,this.rounding)}function sign$1(a){return a=new this(a),a.d?a.d[0]?a.s:0*a.s:a.s||NaN}function sin$1(a){return new this(a).sin()}function sinh$2(a){return new this(a).sinh()}function sqrt$1(a){return new this(a).sqrt()}function sub$1(a,s){return new this(a).sub(s)}function sum$1(){var a=0,s=arguments,o=new this(s[a]);for(external=!1;o.s&&++a<s.length;)o=o.plus(s[a]);return external=!0,finalise(o,this.precision,this.rounding)}function tan$1(a){return new this(a).tan()}function tanh$1(a){return new this(a).tanh()}function trunc(a){return finalise(a=new this(a),a.e+1,1)}P$4[Symbol.for("nodejs.util.inspect.custom")]=P$4.toString;P$4[Symbol.toStringTag]="Decimal";var Decimal=P$4.constructor=clone$2(DEFAULTS);LN10$1=new Decimal(LN10$1);PI=new Decimal(PI);var name$4_="BigNumber",dependencies$4_=["?on","config"],createBigNumberClass=factory(name$4_,dependencies$4_,a=>{var{on:s,config:o}=a,c=Decimal.clone({precision:o.precision,modulo:Decimal.EUCLID});return c.prototype=Object.create(c.prototype),c.prototype.type="BigNumber",c.prototype.isBigNumber=!0,c.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},c.fromJSON=function(h){return new c(h.value)},s&&s("config",function(h,d){h.precision!==d.precision&&c.config({precision:h.precision})}),c},{isClass:!0});const cosh$1=Math.cosh||function(a){return Math.abs(a)<1e-9?1-a:(Math.exp(a)+Math.exp(-a))*.5},sinh$1=Math.sinh||function(a){return Math.abs(a)<1e-9?a:(Math.exp(a)-Math.exp(-a))*.5},cosm1=a=>{const s=Math.sin(.5*a);return-2*s*s},hypot$1=function(a,s){return a=Math.abs(a),s=Math.abs(s),a<s&&([a,s]=[s,a]),a<1e8?Math.sqrt(a*a+s*s):(s/=a,a*Math.sqrt(1+s*s))},parser_exit=function(){throw SyntaxError("Invalid Param")};function logHypot(a,s){const o=Math.abs(a),c=Math.abs(s);return a===0?Math.log(c):s===0?Math.log(o):o<3e3&&c<3e3?Math.log(a*a+s*s)*.5:(a=a*.5,s=s*.5,.5*Math.log(a*a+s*s)+Math.LN2)}const P$3={re:0,im:0},parse$2=function(a,s){const o=P$3;if(a==null)o.re=o.im=0;else if(s!==void 0)o.re=a,o.im=s;else switch(typeof a){case"object":if("im"in a&&"re"in a)o.re=a.re,o.im=a.im;else if("abs"in a&&"arg"in a){if(!isFinite(a.abs)&&isFinite(a.arg))return Complex$1.INFINITY;o.re=a.abs*Math.cos(a.arg),o.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!isFinite(a.r)&&isFinite(a.phi))return Complex$1.INFINITY;o.re=a.r*Math.cos(a.phi),o.im=a.r*Math.sin(a.phi)}else a.length===2?(o.re=a[0],o.im=a[1]):parser_exit();break;case"string":o.im=o.re=0;const c=a.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let h=1,d=0;c===null&&parser_exit();for(let b=0;b<c.length;b++){const _=c[b];_===" "||_==="	"||_===`
`||(_==="+"?h++:_==="-"?d++:_==="i"||_==="I"?(h+d===0&&parser_exit(),c[b+1]!==" "&&!isNaN(c[b+1])?(o.im+=parseFloat((d%2?"-":"")+c[b+1]),b++):o.im+=parseFloat((d%2?"-":"")+"1"),h=d=0):((h+d===0||isNaN(_))&&parser_exit(),c[b+1]==="i"||c[b+1]==="I"?(o.im+=parseFloat((d%2?"-":"")+_),b++):o.re+=parseFloat((d%2?"-":"")+_),h=d=0))}h+d>0&&parser_exit();break;case"number":o.im=0,o.re=a;break;default:parser_exit()}return isNaN(o.re)||isNaN(o.im),o};function Complex$1(a,s){if(!(this instanceof Complex$1))return new Complex$1(a,s);const o=parse$2(a,s);this.re=o.re,this.im=o.im}Complex$1.prototype={re:0,im:0,sign:function(){const a=hypot$1(this.re,this.im);return new Complex$1(this.re/a,this.im/a)},add:function(a,s){const o=parse$2(a,s),c=this.isInfinite(),h=!(isFinite(o.re)&&isFinite(o.im));return c||h?c&&h?Complex$1.NAN:Complex$1.INFINITY:new Complex$1(this.re+o.re,this.im+o.im)},sub:function(a,s){const o=parse$2(a,s),c=this.isInfinite(),h=!(isFinite(o.re)&&isFinite(o.im));return c||h?c&&h?Complex$1.NAN:Complex$1.INFINITY:new Complex$1(this.re-o.re,this.im-o.im)},mul:function(a,s){const o=parse$2(a,s),c=this.isInfinite(),h=!(isFinite(o.re)&&isFinite(o.im)),d=this.re===0&&this.im===0,b=o.re===0&&o.im===0;return c&&b||h&&d?Complex$1.NAN:c||h?Complex$1.INFINITY:o.im===0&&this.im===0?new Complex$1(this.re*o.re,0):new Complex$1(this.re*o.re-this.im*o.im,this.re*o.im+this.im*o.re)},div:function(a,s){const o=parse$2(a,s),c=this.isInfinite(),h=!(isFinite(o.re)&&isFinite(o.im)),d=this.re===0&&this.im===0,b=o.re===0&&o.im===0;if(d&&b||c&&h)return Complex$1.NAN;if(b||c)return Complex$1.INFINITY;if(d||h)return Complex$1.ZERO;if(o.im===0)return new Complex$1(this.re/o.re,this.im/o.re);if(Math.abs(o.re)<Math.abs(o.im)){const _=o.re/o.im,$=o.re*_+o.im;return new Complex$1((this.re*_+this.im)/$,(this.im*_-this.re)/$)}else{const _=o.im/o.re,$=o.im*_+o.re;return new Complex$1((this.re+this.im*_)/$,(this.im-this.re*_)/$)}},pow:function(a,s){const o=parse$2(a,s),c=this.re===0&&this.im===0;if(o.re===0&&o.im===0)return Complex$1.ONE;if(o.im===0){if(this.im===0&&this.re>0)return new Complex$1(Math.pow(this.re,o.re),0);if(this.re===0)switch((o.re%4+4)%4){case 0:return new Complex$1(Math.pow(this.im,o.re),0);case 1:return new Complex$1(0,Math.pow(this.im,o.re));case 2:return new Complex$1(-Math.pow(this.im,o.re),0);case 3:return new Complex$1(0,-Math.pow(this.im,o.re))}}if(c&&o.re>0)return Complex$1.ZERO;const d=Math.atan2(this.im,this.re),b=logHypot(this.re,this.im);let _=Math.exp(o.re*b-o.im*d),$=o.im*b+o.re*d;return new Complex$1(_*Math.cos($),_*Math.sin($))},sqrt:function(){const a=this.re,s=this.im;if(s===0)return a>=0?new Complex$1(Math.sqrt(a),0):new Complex$1(0,Math.sqrt(-a));const o=hypot$1(a,s);let c=Math.sqrt(.5*(o+Math.abs(a))),h=Math.abs(s)/(2*c);return a>=0?new Complex$1(c,s<0?-h:h):new Complex$1(h,s<0?-c:c)},exp:function(){const a=Math.exp(this.re);return this.im===0?new Complex$1(a,0):new Complex$1(a*Math.cos(this.im),a*Math.sin(this.im))},expm1:function(){const a=this.re,s=this.im;return new Complex$1(Math.expm1(a)*Math.cos(s)+cosm1(s),Math.exp(a)*Math.sin(s))},log:function(){const a=this.re,s=this.im;return s===0&&a>0?new Complex$1(Math.log(a),0):new Complex$1(logHypot(a,s),Math.atan2(s,a))},abs:function(){return hypot$1(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const a=this.re,s=this.im;return new Complex$1(Math.sin(a)*cosh$1(s),Math.cos(a)*sinh$1(s))},cos:function(){const a=this.re,s=this.im;return new Complex$1(Math.cos(a)*cosh$1(s),-Math.sin(a)*sinh$1(s))},tan:function(){const a=2*this.re,s=2*this.im,o=Math.cos(a)+cosh$1(s);return new Complex$1(Math.sin(a)/o,sinh$1(s)/o)},cot:function(){const a=2*this.re,s=2*this.im,o=Math.cos(a)-cosh$1(s);return new Complex$1(-Math.sin(a)/o,sinh$1(s)/o)},sec:function(){const a=this.re,s=this.im,o=.5*cosh$1(2*s)+.5*Math.cos(2*a);return new Complex$1(Math.cos(a)*cosh$1(s)/o,Math.sin(a)*sinh$1(s)/o)},csc:function(){const a=this.re,s=this.im,o=.5*cosh$1(2*s)-.5*Math.cos(2*a);return new Complex$1(Math.sin(a)*cosh$1(s)/o,-Math.cos(a)*sinh$1(s)/o)},asin:function(){const a=this.re,s=this.im,o=new Complex$1(s*s-a*a+1,-2*a*s).sqrt(),c=new Complex$1(o.re-s,o.im+a).log();return new Complex$1(c.im,-c.re)},acos:function(){const a=this.re,s=this.im,o=new Complex$1(s*s-a*a+1,-2*a*s).sqrt(),c=new Complex$1(o.re-s,o.im+a).log();return new Complex$1(Math.PI/2-c.im,c.re)},atan:function(){const a=this.re,s=this.im;if(a===0){if(s===1)return new Complex$1(0,1/0);if(s===-1)return new Complex$1(0,-1/0)}const o=a*a+(1-s)*(1-s),c=new Complex$1((1-s*s-a*a)/o,-2*a/o).log();return new Complex$1(-.5*c.im,.5*c.re)},acot:function(){const a=this.re,s=this.im;if(s===0)return new Complex$1(Math.atan2(1,a),0);const o=a*a+s*s;return o!==0?new Complex$1(a/o,-s/o).atan():new Complex$1(a!==0?a/0:0,s!==0?-s/0:0).atan()},asec:function(){const a=this.re,s=this.im;if(a===0&&s===0)return new Complex$1(0,1/0);const o=a*a+s*s;return o!==0?new Complex$1(a/o,-s/o).acos():new Complex$1(a!==0?a/0:0,s!==0?-s/0:0).acos()},acsc:function(){const a=this.re,s=this.im;if(a===0&&s===0)return new Complex$1(Math.PI/2,1/0);const o=a*a+s*s;return o!==0?new Complex$1(a/o,-s/o).asin():new Complex$1(a!==0?a/0:0,s!==0?-s/0:0).asin()},sinh:function(){const a=this.re,s=this.im;return new Complex$1(sinh$1(a)*Math.cos(s),cosh$1(a)*Math.sin(s))},cosh:function(){const a=this.re,s=this.im;return new Complex$1(cosh$1(a)*Math.cos(s),sinh$1(a)*Math.sin(s))},tanh:function(){const a=2*this.re,s=2*this.im,o=cosh$1(a)+Math.cos(s);return new Complex$1(sinh$1(a)/o,Math.sin(s)/o)},coth:function(){const a=2*this.re,s=2*this.im,o=cosh$1(a)-Math.cos(s);return new Complex$1(sinh$1(a)/o,-Math.sin(s)/o)},csch:function(){const a=this.re,s=this.im,o=Math.cos(2*s)-cosh$1(2*a);return new Complex$1(-2*sinh$1(a)*Math.cos(s)/o,2*cosh$1(a)*Math.sin(s)/o)},sech:function(){const a=this.re,s=this.im,o=Math.cos(2*s)+cosh$1(2*a);return new Complex$1(2*cosh$1(a)*Math.cos(s)/o,-2*sinh$1(a)*Math.sin(s)/o)},asinh:function(){const a=this.re,s=this.im;if(s===0){if(a===0)return new Complex$1(0,0);const d=Math.abs(a),b=Math.log(d+Math.sqrt(d*d+1));return new Complex$1(a<0?-b:b,0)}const o=a*a-s*s+1,c=2*a*s,h=new Complex$1(o,c).sqrt();return new Complex$1(a+h.re,s+h.im).log()},acosh:function(){const a=this.re,s=this.im;if(s===0){if(a>1)return new Complex$1(Math.log(a+Math.sqrt(a-1)*Math.sqrt(a+1)),0);if(a<-1){const h=Math.sqrt(a*a-1);return new Complex$1(Math.log(-a+h),Math.PI)}return new Complex$1(0,Math.acos(a))}const o=new Complex$1(a-1,s).sqrt(),c=new Complex$1(a+1,s).sqrt();return new Complex$1(a+o.re*c.re-o.im*c.im,s+o.re*c.im+o.im*c.re).log()},atanh:function(){const a=this.re,s=this.im;if(s===0){if(a===0)return new Complex$1(0,0);if(a===1)return new Complex$1(1/0,0);if(a===-1)return new Complex$1(-1/0,0);if(-1<a&&a<1)return new Complex$1(.5*Math.log((1+a)/(1-a)),0);if(a>1){const $=(a+1)/(a-1);return new Complex$1(.5*Math.log($),-Math.PI/2)}const _=(1+a)/(1-a);return new Complex$1(.5*Math.log(-_),Math.PI/2)}const o=1-a,c=1+a,h=o*o+s*s;if(h===0)return new Complex$1(a!==-1?a/0:0,s!==0?s/0:0);const d=(c*o-s*s)/h,b=(s*o+c*s)/h;return new Complex$1(logHypot(d,b)/2,Math.atan2(b,d)/2)},acoth:function(){const a=this.re,s=this.im;if(a===0&&s===0)return new Complex$1(0,Math.PI/2);const o=a*a+s*s;return o!==0?new Complex$1(a/o,-s/o).atanh():new Complex$1(a!==0?a/0:0,s!==0?-s/0:0).atanh()},acsch:function(){const a=this.re,s=this.im;if(s===0){if(a===0)return new Complex$1(1/0,0);const c=1/a;return new Complex$1(Math.log(c+Math.sqrt(c*c+1)),0)}const o=a*a+s*s;return o!==0?new Complex$1(a/o,-s/o).asinh():new Complex$1(a!==0?a/0:0,s!==0?-s/0:0).asinh()},asech:function(){const a=this.re,s=this.im;if(this.isZero())return Complex$1.INFINITY;const o=a*a+s*s;return o!==0?new Complex$1(a/o,-s/o).acosh():new Complex$1(a!==0?a/0:0,s!==0?-s/0:0).acosh()},inverse:function(){if(this.isZero())return Complex$1.INFINITY;if(this.isInfinite())return Complex$1.ZERO;const a=this.re,s=this.im,o=a*a+s*s;return new Complex$1(a/o,-s/o)},conjugate:function(){return new Complex$1(this.re,-this.im)},neg:function(){return new Complex$1(-this.re,-this.im)},ceil:function(a){return a=Math.pow(10,a||0),new Complex$1(Math.ceil(this.re*a)/a,Math.ceil(this.im*a)/a)},floor:function(a){return a=Math.pow(10,a||0),new Complex$1(Math.floor(this.re*a)/a,Math.floor(this.im*a)/a)},round:function(a){return a=Math.pow(10,a||0),new Complex$1(Math.round(this.re*a)/a,Math.round(this.im*a)/a)},equals:function(a,s){const o=parse$2(a,s);return Math.abs(o.re-this.re)<=Complex$1.EPSILON&&Math.abs(o.im-this.im)<=Complex$1.EPSILON},clone:function(){return new Complex$1(this.re,this.im)},toString:function(){let a=this.re,s=this.im,o="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<Complex$1.EPSILON&&(a=0),Math.abs(s)<Complex$1.EPSILON&&(s=0),s===0?o+a:(a!==0?(o+=a,o+=" ",s<0?(s=-s,o+="-"):o+="+",o+=" "):s<0&&(s=-s,o+="-"),s!==1&&(o+=s),o+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Complex$1.ZERO=new Complex$1(0,0);Complex$1.ONE=new Complex$1(1,0);Complex$1.I=new Complex$1(0,1);Complex$1.PI=new Complex$1(Math.PI,0);Complex$1.E=new Complex$1(Math.E,0);Complex$1.INFINITY=new Complex$1(1/0,1/0);Complex$1.NAN=new Complex$1(NaN,NaN);Complex$1.EPSILON=1e-15;var name$4Z="Complex",dependencies$4Z=[],createComplexClass=factory(name$4Z,dependencies$4Z,()=>(Object.defineProperty(Complex$1,"name",{value:"Complex"}),Complex$1.prototype.constructor=Complex$1,Complex$1.prototype.type="Complex",Complex$1.prototype.isComplex=!0,Complex$1.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Complex$1.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Complex$1.prototype.format=function(a){var s="",o=this.im,c=this.re,h=format$3(this.re,a),d=format$3(this.im,a),b=isNumber(a)?a:a?a.precision:null;if(b!==null){var _=Math.pow(10,-b);Math.abs(c/o)<_&&(c=0),Math.abs(o/c)<_&&(o=0)}return o===0?s=h:c===0?o===1?s="i":o===-1?s="-i":s=d+"i":o<0?o===-1?s=h+" - i":s=h+" - "+d.substring(1)+"i":o===1?s=h+" + i":s=h+" + "+d+"i",s},Complex$1.fromPolar=function(a){switch(arguments.length){case 1:{var s=arguments[0];if(typeof s=="object")return Complex$1(s);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var o=arguments[0],c=arguments[1];if(isNumber(o)){if(isUnit(c)&&c.hasBase("ANGLE")&&(c=c.toNumber("rad")),isNumber(c))return new Complex$1({r:o,phi:c});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Complex$1.prototype.valueOf=Complex$1.prototype.toString,Complex$1.fromJSON=function(a){return new Complex$1(a)},Complex$1.compare=function(a,s){return a.re>s.re?1:a.re<s.re?-1:a.im>s.im?1:a.im<s.im?-1:0},Complex$1),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(a){if(isNaN(a))throw new Error("");return a});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_THREE=BigInt(3),C_FIVE=BigInt(5),C_TEN=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const MAX_CYCLE_LEN=2e3,P$2={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(a,s){try{a=BigInt(a)}catch{throw InvalidParameter()}return a*s}function ifloor(a){return typeof a=="bigint"?a:Math.floor(a)}function newFraction(a,s){if(s===C_ZERO)throw DivisionByZero();const o=Object.create(Fraction$1.prototype);o.s=a<C_ZERO?-C_ONE:C_ONE,a=a<C_ZERO?-a:a;const c=gcd$1(a,s);return o.n=a/c,o.d=s/c,o}const FACTORSTEPS=[C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO*C_THREE,C_TWO,C_TWO*C_THREE];function factorize(a){const s=Object.create(null);if(a<=C_ONE)return s[a]=C_ONE,s;const o=c=>{s[c]=(s[c]||C_ZERO)+C_ONE};for(;a%C_TWO===C_ZERO;)o(C_TWO),a/=C_TWO;for(;a%C_THREE===C_ZERO;)o(C_THREE),a/=C_THREE;for(;a%C_FIVE===C_ZERO;)o(C_FIVE),a/=C_FIVE;for(let c=0,h=C_TWO+C_FIVE;h*h<=a;){for(;a%h===C_ZERO;)o(h),a/=h;h+=FACTORSTEPS[c],c=c+1&7}return a>C_ONE&&o(a),s}const parse$1=function(a,s){let o=C_ZERO,c=C_ONE,h=C_ONE;if(a!=null)if(s!==void 0){if(typeof a=="bigint")o=a;else{if(isNaN(a))throw InvalidParameter();if(a%1!==0)throw NonIntegerParameter();o=BigInt(a)}if(typeof s=="bigint")c=s;else{if(isNaN(s))throw InvalidParameter();if(s%1!==0)throw NonIntegerParameter();c=BigInt(s)}h=o*c}else if(typeof a=="object"){if("d"in a&&"n"in a)o=BigInt(a.n),c=BigInt(a.d),"s"in a&&(o*=BigInt(a.s));else if(0 in a)o=BigInt(a[0]),1 in a&&(c=BigInt(a[1]));else if(typeof a=="bigint")o=a;else throw InvalidParameter();h=o*c}else if(typeof a=="number"){if(isNaN(a))throw InvalidParameter();if(a<0&&(h=-C_ONE,a=-a),a%1===0)o=BigInt(a);else{let d=1,b=0,_=1,$=1,j=1,Xt=1e7;for(a>=1&&(d=10**Math.floor(1+Math.log10(a)),a/=d);_<=Xt&&j<=Xt;){let Lt=(b+$)/(_+j);if(a===Lt){_+j<=Xt?(o=b+$,c=_+j):j>_?(o=$,c=j):(o=b,c=_);break}else a>Lt?(b+=$,_+=j):($+=b,j+=_),_>Xt?(o=$,c=j):(o=b,c=_)}o=BigInt(o)*BigInt(d),c=BigInt(c)}}else if(typeof a=="string"){let d=0,b=C_ZERO,_=C_ZERO,$=C_ZERO,j=C_ONE,Xt=C_ONE,Lt=a.replace(/_/g,"").match(/\d+|./g);if(Lt===null)throw InvalidParameter();if(Lt[d]==="-"?(h=-C_ONE,d++):Lt[d]==="+"&&d++,Lt.length===d+1?_=assign(Lt[d++],h):Lt[d+1]==="."||Lt[d]==="."?(Lt[d]!=="."&&(b=assign(Lt[d++],h)),d++,(d+1===Lt.length||Lt[d+1]==="("&&Lt[d+3]===")"||Lt[d+1]==="'"&&Lt[d+3]==="'")&&(_=assign(Lt[d],h),j=C_TEN**BigInt(Lt[d].length),d++),(Lt[d]==="("&&Lt[d+2]===")"||Lt[d]==="'"&&Lt[d+2]==="'")&&($=assign(Lt[d+1],h),Xt=C_TEN**BigInt(Lt[d+1].length)-C_ONE,d+=3)):Lt[d+1]==="/"||Lt[d+1]===":"?(_=assign(Lt[d],h),j=assign(Lt[d+2],C_ONE),d+=3):Lt[d+3]==="/"&&Lt[d+1]===" "&&(b=assign(Lt[d],h),_=assign(Lt[d+2],h),j=assign(Lt[d+4],C_ONE),d+=5),Lt.length<=d)c=j*Xt,h=o=$+c*b+Xt*_;else throw InvalidParameter()}else if(typeof a=="bigint")o=a,h=a,c=C_ONE;else throw InvalidParameter();if(c===C_ZERO)throw DivisionByZero();P$2.s=h<C_ZERO?-C_ONE:C_ONE,P$2.n=o<C_ZERO?-o:o,P$2.d=c<C_ZERO?-c:c};function modpow(a,s,o){let c=C_ONE;for(;s>C_ZERO;a=a*a%o,s>>=C_ONE)s&C_ONE&&(c=c*a%o);return c}function cycleLen(a,s){for(;s%C_TWO===C_ZERO;s/=C_TWO);for(;s%C_FIVE===C_ZERO;s/=C_FIVE);if(s===C_ONE)return C_ZERO;let o=C_TEN%s,c=1;for(;o!==C_ONE;c++)if(o=o*C_TEN%s,c>MAX_CYCLE_LEN)return C_ZERO;return BigInt(c)}function cycleStart(a,s,o){let c=C_ONE,h=modpow(C_TEN,o,s);for(let d=0;d<300;d++){if(c===h)return BigInt(d);c=c*C_TEN%s,h=h*C_TEN%s}return 0}function gcd$1(a,s){if(!a)return s;if(!s)return a;for(;;){if(a%=s,!a)return s;if(s%=a,!s)return a}}function Fraction$1(a,s){if(parse$1(a,s),this instanceof Fraction$1)a=gcd$1(P$2.d,P$2.n),this.s=P$2.s,this.n=P$2.n/a,this.d=P$2.d/a;else return newFraction(P$2.s*P$2.n,P$2.d)}const DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction$1.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(a,s){return parse$1(a,s),newFraction(this.s*this.n*P$2.d+P$2.s*this.d*P$2.n,this.d*P$2.d)},sub:function(a,s){return parse$1(a,s),newFraction(this.s*this.n*P$2.d-P$2.s*this.d*P$2.n,this.d*P$2.d)},mul:function(a,s){return parse$1(a,s),newFraction(this.s*P$2.s*this.n*P$2.n,this.d*P$2.d)},div:function(a,s){return parse$1(a,s),newFraction(this.s*P$2.s*this.n*P$2.d,this.d*P$2.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(a,s){if(a===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse$1(a,s),C_ZERO===P$2.n*this.d)throw DivisionByZero();return newFraction(this.s*(P$2.d*this.n)%(P$2.n*this.d),P$2.d*this.d)},gcd:function(a,s){return parse$1(a,s),newFraction(gcd$1(P$2.n,this.n)*gcd$1(P$2.d,this.d),P$2.d*this.d)},lcm:function(a,s){return parse$1(a,s),P$2.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P$2.n*this.n,gcd$1(P$2.n,this.n)*gcd$1(P$2.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(a,s){if(parse$1(a,s),P$2.d===C_ONE)return P$2.s<C_ZERO?newFraction((this.s*this.d)**P$2.n,this.n**P$2.n):newFraction((this.s*this.n)**P$2.n,this.d**P$2.n);if(this.s<C_ZERO)return null;let o=factorize(this.n),c=factorize(this.d),h=C_ONE,d=C_ONE;for(let b in o)if(b!=="1"){if(b==="0"){h=C_ZERO;break}if(o[b]*=P$2.n,o[b]%P$2.d===C_ZERO)o[b]/=P$2.d;else return null;h*=BigInt(b)**o[b]}for(let b in c)if(b!=="1"){if(c[b]*=P$2.n,c[b]%P$2.d===C_ZERO)c[b]/=P$2.d;else return null;d*=BigInt(b)**c[b]}return P$2.s<C_ZERO?newFraction(d,h):newFraction(h,d)},log:function(a,s){if(parse$1(a,s),this.s<=C_ZERO||P$2.s<=C_ZERO)return null;const o=Object.create(null),c=factorize(P$2.n),h=factorize(P$2.d),d=factorize(this.n),b=factorize(this.d);for(const j in h)c[j]=(c[j]||C_ZERO)-h[j];for(const j in b)d[j]=(d[j]||C_ZERO)-b[j];for(const j in c)j!=="1"&&(o[j]=!0);for(const j in d)j!=="1"&&(o[j]=!0);let _=null,$=null;for(const j in o){const Xt=c[j]||C_ZERO,Lt=d[j]||C_ZERO;if(Xt===C_ZERO){if(Lt!==C_ZERO)return null;continue}let fr=Lt,Jr=Xt;const Js=gcd$1(fr,Jr);if(fr/=Js,Jr/=Js,_===null&&$===null)_=fr,$=Jr;else if(fr*$!==_*Jr)return null}return _!==null&&$!==null?newFraction(_,$):null},equals:function(a,s){return parse$1(a,s),this.s*this.n*P$2.d===P$2.s*P$2.n*this.d},lt:function(a,s){return parse$1(a,s),this.s*this.n*P$2.d<P$2.s*P$2.n*this.d},lte:function(a,s){return parse$1(a,s),this.s*this.n*P$2.d<=P$2.s*P$2.n*this.d},gt:function(a,s){return parse$1(a,s),this.s*this.n*P$2.d>P$2.s*P$2.n*this.d},gte:function(a,s){return parse$1(a,s),this.s*this.n*P$2.d>=P$2.s*P$2.n*this.d},compare:function(a,s){parse$1(a,s);let o=this.s*this.n*P$2.d-P$2.s*P$2.n*this.d;return(C_ZERO<o)-(o<C_ZERO)},ceil:function(a){return a=C_TEN**BigInt(a||0),newFraction(ifloor(this.s*a*this.n/this.d)+(a*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),a)},floor:function(a){return a=C_TEN**BigInt(a||0),newFraction(ifloor(this.s*a*this.n/this.d)-(a*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),a)},round:function(a){return a=C_TEN**BigInt(a||0),newFraction(ifloor(this.s*a*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(a*this.n%this.d)>this.d?C_ONE:C_ZERO),a)},roundTo:function(a,s){parse$1(a,s);const o=this.n*P$2.d,c=this.d*P$2.n,h=o%c;let d=ifloor(o/c);return h+h>=c&&d++,newFraction(this.s*d*P$2.n,P$2.d)},divisible:function(a,s){return parse$1(a,s),P$2.n===C_ZERO?!1:this.n*P$2.d%(P$2.n*this.d)===C_ZERO},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(a=15){let s=this.n,o=this.d,c=cycleLen(s,o),h=cycleStart(s,o,c),d=this.s<C_ZERO?"-":"";if(d+=ifloor(s/o),s%=o,s*=C_TEN,s&&(d+="."),c){for(let b=h;b--;)d+=ifloor(s/o),s%=o,s*=C_TEN;d+="(";for(let b=c;b--;)d+=ifloor(s/o),s%=o,s*=C_TEN;d+=")"}else for(let b=a;s&&b--;)d+=ifloor(s/o),s%=o,s*=C_TEN;return d},toFraction:function(a=!1){let s=this.n,o=this.d,c=this.s<C_ZERO?"-":"";if(o===C_ONE)c+=s;else{const h=ifloor(s/o);a&&h>C_ZERO&&(c+=h,c+=" ",s%=o),c+=s,c+="/",c+=o}return c},toLatex:function(a=!1){let s=this.n,o=this.d,c=this.s<C_ZERO?"-":"";if(o===C_ONE)c+=s;else{const h=ifloor(s/o);a&&h>C_ZERO&&(c+=h,s%=o),c+="\\frac{",c+=s,c+="}{",c+=o,c+="}"}return c},toContinued:function(){let a=this.n,s=this.d;const o=[];for(;s;){o.push(ifloor(a/s));const c=a%s;a=s,s=c}return o},simplify:function(a=.001){const s=BigInt(Math.ceil(1/a)),o=this.abs(),c=o.toContinued();for(let h=1;h<c.length;h++){let d=newFraction(c[h-1],C_ONE);for(let _=h-2;_>=0;_--)d=d.inverse().add(c[_]);let b=d.sub(o);if(b.n*s<b.d)return d.mul(this.s)}return this}};var name$4Y="Fraction",dependencies$4Y=[],createFractionClass=factory(name$4Y,dependencies$4Y,()=>(Object.defineProperty(Fraction$1,"name",{value:"Fraction"}),Fraction$1.prototype.constructor=Fraction$1,Fraction$1.prototype.type="Fraction",Fraction$1.prototype.isFraction=!0,Fraction$1.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Fraction$1.fromJSON=function(a){return new Fraction$1(a)},Fraction$1),{isClass:!0}),name$4X="Range",dependencies$4X=[],createRangeClass=factory(name$4X,dependencies$4X,()=>{function a(s,o,c){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");var h=s!=null,d=o!=null,b=c!=null;if(h){if(isBigNumber(s))s=s.toNumber();else if(typeof s!="number"&&!isBigInt(s))throw new TypeError("Parameter start must be a number or bigint")}if(d){if(isBigNumber(o))o=o.toNumber();else if(typeof o!="number"&&!isBigInt(o))throw new TypeError("Parameter end must be a number or bigint")}if(b){if(isBigNumber(c))c=c.toNumber();else if(typeof c!="number"&&!isBigInt(c))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=h?parseFloat(s):0,this.end=d?parseFloat(o):0,this.step=b?parseFloat(c):1,b&&nearlyEqual$1(this.step,0))throw new Error("Step must not be zero")}return a.prototype.type="Range",a.prototype.isRange=!0,a.parse=function(s){if(typeof s!="string")return null;var o=s.split(":"),c=o.map(function(d){return parseFloat(d)}),h=c.some(function(d){return isNaN(d)});if(h)return null;switch(c.length){case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[2],c[1]);default:return null}},a.prototype.clone=function(){return new a(this.start,this.end,this.step)},a.prototype.size=function(){var s=0,o=this.start,c=this.step,h=this.end,d=h-o;return sign$2(c)===sign$2(d)?s=Math.ceil(d/c):d===0&&(s=0),isNaN(s)&&(s=0),[s]},a.prototype.min=function(){var s=this.size()[0];if(s>0)return this.step>0?this.start:this.start+(s-1)*this.step},a.prototype.max=function(){var s=this.size()[0];if(s>0)return this.step>0?this.start+(s-1)*this.step:this.start},a.prototype.forEach=function(s){var o=this.start,c=this.step,h=this.end,d=0;if(c>0)for(;o<h;)s(o,[d],this),o+=c,d++;else if(c<0)for(;o>h;)s(o,[d],this),o+=c,d++},a.prototype.map=function(s){var o=[];return this.forEach(function(c,h,d){o[h[0]]=s(c,h,d)}),o},a.prototype.toArray=function(){var s=[];return this.forEach(function(o,c){s[c[0]]=o}),s},a.prototype.valueOf=function(){return this.toArray()},a.prototype.format=function(s){var o=format$3(this.start,s);return this.step!==1&&(o+=":"+format$3(this.step,s)),o+=":"+format$3(this.end,s),o},a.prototype.toString=function(){return this.format()},a.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},a.fromJSON=function(s){return new a(s.start,s.end,s.step)},a},{isClass:!0}),name$4W="Matrix",dependencies$4W=[],createMatrixClass=factory(name$4W,dependencies$4W,()=>{function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator")}return a.prototype.type="Matrix",a.prototype.isMatrix=!0,a.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},a.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},a.prototype.create=function(s,o){throw new Error("Cannot invoke create on a Matrix interface")},a.prototype.subset=function(s,o,c){throw new Error("Cannot invoke subset on a Matrix interface")},a.prototype.get=function(s){throw new Error("Cannot invoke get on a Matrix interface")},a.prototype.set=function(s,o,c){throw new Error("Cannot invoke set on a Matrix interface")},a.prototype.resize=function(s,o){throw new Error("Cannot invoke resize on a Matrix interface")},a.prototype.reshape=function(s,o){throw new Error("Cannot invoke reshape on a Matrix interface")},a.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},a.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},a.prototype.map=function(s,o){throw new Error("Cannot invoke map on a Matrix interface")},a.prototype.forEach=function(s){throw new Error("Cannot invoke forEach on a Matrix interface")},a.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},a.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},a.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},a.prototype.format=function(s){throw new Error("Cannot invoke format on a Matrix interface")},a.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},a},{isClass:!0});function formatBigNumberToBase(a,s,o){var c=a.constructor,h=new c(2),d="";if(o){if(o<1)throw new Error("size must be in greater than 0");if(!isInteger$1(o))throw new Error("size must be an integer");if(a.greaterThan(h.pow(o-1).sub(1))||a.lessThan(h.pow(o-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(o-1,", 2^").concat(o-1,"-1]"));if(!a.isInteger())throw new Error("Value must be an integer");a.lessThan(0)&&(a=a.add(h.pow(o))),d="i".concat(o)}switch(s){case 2:return"".concat(a.toBinary()).concat(d);case 8:return"".concat(a.toOctal()).concat(d);case 16:return"".concat(a.toHexadecimal()).concat(d);default:throw new Error("Base ".concat(s," not supported "))}}function format$2(a,s){if(typeof s=="function")return s(a);if(!a.isFinite())return a.isNaN()?"NaN":a.gt(0)?"Infinity":"-Infinity";var{notation:o,precision:c,wordSize:h}=normalizeFormatOptions(s);switch(o){case"fixed":return toFixed(a,c);case"exponential":return toExponential(a,c);case"engineering":return toEngineering(a,c);case"bin":return formatBigNumberToBase(a,2,h);case"oct":return formatBigNumberToBase(a,8,h);case"hex":return formatBigNumberToBase(a,16,h);case"auto":{var d=_toNumberOrDefault(s==null?void 0:s.lowerExp,-3),b=_toNumberOrDefault(s==null?void 0:s.upperExp,5);if(a.isZero())return"0";var _,$=a.toSignificantDigits(c),j=$.e;return j>=d&&j<b?_=$.toFixed():_=toExponential(a,c),_.replace(/((\.\d*?)(0+))($|e)/,function(){var Xt=arguments[2],Lt=arguments[4];return Xt!=="."?Xt+Lt:Lt})}default:throw new Error('Unknown notation "'+o+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function toEngineering(a,s){var o=a.e,c=o%3===0?o:o<0?o-3-o%3:o-o%3,h=a.mul(Math.pow(10,-c)),d=h.toPrecision(s);if(d.includes("e")){var b=a.constructor;d=new b(d).toFixed()}return d+"e"+(o>=0?"+":"")+c.toString()}function toExponential(a,s){return s!==void 0?a.toExponential(s-1):a.toExponential()}function toFixed(a,s){return a.toFixed(s)}function _toNumberOrDefault(a,s){return isNumber(a)?a:isBigNumber(a)?a.toNumber():s}function endsWith(a,s){var o=a.length-s.length,c=a.length;return a.substring(o,c)===s}function format$1(a,s){var o=_format(a,s);return s&&typeof s=="object"&&"truncate"in s&&o.length>s.truncate?o.substring(0,s.truncate-3)+"...":o}function _format(a,s){if(typeof a=="number")return format$3(a,s);if(isBigNumber(a))return format$2(a,s);if(looksLikeFraction(a))return!s||s.fraction!=="decimal"?"".concat(a.s*a.n,"/").concat(a.d):a.toString();if(Array.isArray(a))return formatArray(a,s);if(isString(a))return stringify(a);if(typeof a=="function")return a.syntax?String(a.syntax):"function";if(a&&typeof a=="object"){if(typeof a.format=="function")return a.format(s);if(a&&a.toString(s)!=={}.toString())return a.toString(s);var o=Object.keys(a).map(c=>stringify(c)+": "+format$1(a[c],s));return"{"+o.join(", ")+"}"}return String(a)}function stringify(a){for(var s=String(a),o="",c=0;c<s.length;){var h=s.charAt(c);o+=h in controlCharacters?controlCharacters[h]:h,c++}return'"'+o+'"'}var controlCharacters={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function escape$1(a){var s=String(a);return s=s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),s}function formatArray(a,s){if(Array.isArray(a)){for(var o="[",c=a.length,h=0;h<c;h++)h!==0&&(o+=", "),o+=formatArray(a[h],s);return o+="]",o}else return format$1(a,s)}function looksLikeFraction(a){return a&&typeof a=="object"&&typeof a.s=="bigint"&&typeof a.n=="bigint"&&typeof a.d=="bigint"||!1}function compareText$1(a,s){if(!isString(a))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+typeOf$1(a)+", index: 0)");if(!isString(s))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+typeOf$1(s)+", index: 1)");return a===s?0:a>s?1:-1}function DimensionError(a,s,o){if(!(this instanceof DimensionError))throw new SyntaxError("Constructor must be called with the new operator");this.actual=a,this.expected=s,this.relation=o,this.message="Dimension mismatch ("+(Array.isArray(a)?"["+a.join(", ")+"]":a)+" "+(this.relation||"!=")+" "+(Array.isArray(s)?"["+s.join(", ")+"]":s)+")",this.stack=new Error().stack}DimensionError.prototype=new RangeError;DimensionError.prototype.constructor=RangeError;DimensionError.prototype.name="DimensionError";DimensionError.prototype.isDimensionError=!0;function IndexError(a,s,o){if(!(this instanceof IndexError))throw new SyntaxError("Constructor must be called with the new operator");this.index=a,arguments.length<3?(this.min=0,this.max=s):(this.min=s,this.max=o),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}IndexError.prototype=new RangeError;IndexError.prototype.constructor=RangeError;IndexError.prototype.name="IndexError";IndexError.prototype.isIndexError=!0;function arraySize(a){for(var s=[];Array.isArray(a);)s.push(a.length),a=a[0];return s}function _validate(a,s,o){var c,h=a.length;if(h!==s[o])throw new DimensionError(h,s[o]);if(o<s.length-1){var d=o+1;for(c=0;c<h;c++){var b=a[c];if(!Array.isArray(b))throw new DimensionError(s.length-1,s.length,"<");_validate(a[c],s,d)}}else for(c=0;c<h;c++)if(Array.isArray(a[c]))throw new DimensionError(s.length+1,s.length,">")}function validate(a,s){var o=s.length===0;if(o){if(Array.isArray(a))throw new DimensionError(a.length,0)}else _validate(a,s,0)}function validateIndexSourceSize(a,s){var o=a.isMatrix?a._size:arraySize(a),c=s._sourceSize;c.forEach((h,d)=>{if(h!==null&&h!==o[d])throw new DimensionError(h,o[d])})}function validateIndex(a,s){if(a!==void 0){if(!isNumber(a)||!isInteger$1(a))throw new TypeError("Index must be an integer (value: "+a+")");if(a<0||typeof s=="number"&&a>=s)throw new IndexError(a,s)}}function isEmptyIndex(a){for(var s=0;s<a._dimensions.length;++s){var o=a._dimensions[s];if(o._data&&isArray(o._data)){if(o._size[0]===0)return!0}else if(o.isRange){if(o.start===o.end)return!0}else if(isString(o)&&o.length===0)return!0}return!1}function resize$1(a,s,o){if(!Array.isArray(s))throw new TypeError("Array expected");if(s.length===0)throw new Error("Resizing to scalar is not supported");s.forEach(function(h){if(!isNumber(h)||!isInteger$1(h)||h<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format$1(s)+")")}),(isNumber(a)||isBigNumber(a))&&(a=[a]);var c=o!==void 0?o:0;return _resize(a,s,0,c),a}function _resize(a,s,o,c){var h,d,b=a.length,_=s[o],$=Math.min(b,_);if(a.length=_,o<s.length-1){var j=o+1;for(h=0;h<$;h++)d=a[h],Array.isArray(d)||(d=[d],a[h]=d),_resize(d,s,j,c);for(h=$;h<_;h++)d=[],a[h]=d,_resize(d,s,j,c)}else{for(h=0;h<$;h++)for(;Array.isArray(a[h]);)a[h]=a[h][0];for(h=$;h<_;h++)a[h]=c}}function reshape$1(a,s){var o=flatten$1(a,!0),c=o.length;if(!Array.isArray(a)||!Array.isArray(s))throw new TypeError("Array expected");if(s.length===0)throw new DimensionError(0,c,"!=");s=processSizesWildcard(s,c);var h=product$1(s);if(c!==h)throw new DimensionError(h,c,"!=");try{return _reshape(o,s)}catch(d){throw d instanceof DimensionError?new DimensionError(h,c,"!="):d}}function processSizesWildcard(a,s){var o=product$1(a),c=a.slice(),h=-1,d=a.indexOf(h),b=a.indexOf(h,d+1)>=0;if(b)throw new Error("More than one wildcard in sizes");var _=d>=0,$=s%o===0;if(_)if($)c[d]=-s/o;else throw new Error("Could not replace wildcard, since "+s+" is no multiple of "+-o);return c}function product$1(a){return a.reduce((s,o)=>s*o,1)}function _reshape(a,s){for(var o=a,c,h=s.length-1;h>0;h--){var d=s[h];c=[];for(var b=o.length/d,_=0;_<b;_++)c.push(o.slice(_*d,(_+1)*d));o=c}return o}function squeeze$1(a,s){for(var o=arraySize(a);Array.isArray(a)&&a.length===1;)a=a[0],o.shift();for(var c=o.length;o[c-1]===1;)c--;return c<o.length&&(a=_squeeze(a,c,0),o.length=c),a}function _squeeze(a,s,o){var c,h;if(o<s){var d=o+1;for(c=0,h=a.length;c<h;c++)a[c]=_squeeze(a[c],s,d)}else for(;Array.isArray(a);)a=a[0];return a}function unsqueeze(a,s,o,c){var h=c||arraySize(a);if(o)for(var d=0;d<o;d++)a=[a],h.unshift(1);for(a=_unsqueeze(a,s,0);h.length<s;)h.push(1);return a}function _unsqueeze(a,s,o){var c,h;if(Array.isArray(a)){var d=o+1;for(c=0,h=a.length;c<h;c++)a[c]=_unsqueeze(a[c],s,d)}else for(var b=o;b<s;b++)a=[a];return a}function flatten$1(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(a))return a;if(typeof s!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var o=[];return s?h(a):c(a),o;function c(d){for(var b=0;b<d.length;b++){var _=d[b];Array.isArray(_)?c(_):o.push(_)}}function h(d){if(Array.isArray(d[0]))for(var b=0;b<d.length;b++)h(d[b]);else for(var _=0;_<d.length;_++)o.push(d[_])}}function map$1(a,s){return Array.prototype.map.call(a,s)}function forEach$1(a,s){Array.prototype.forEach.call(a,s)}function filter$1(a,s){if(arraySize(a).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(a,s)}function filterRegExp(a,s){if(arraySize(a).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(a,o=>s.test(o))}function join(a,s){return Array.prototype.join.call(a,s)}function identify(a){if(!Array.isArray(a))throw new TypeError("Array input expected");if(a.length===0)return a;var s=[],o=0;s[0]={value:a[0],identifier:0};for(var c=1;c<a.length;c++)a[c]===a[c-1]?o++:o=0,s.push({value:a[c],identifier:o});return s}function generalize(a){if(!Array.isArray(a))throw new TypeError("Array input expected");if(a.length===0)return a;for(var s=[],o=0;o<a.length;o++)s.push(a[o].value);return s}function getArrayDataType(a,s){for(var o,c=0,h=0;h<a.length;h++){var d=a[h],b=Array.isArray(d);if(h===0&&b&&(c=d.length),b&&d.length!==c)return;var _=b?getArrayDataType(d,s):s(d);if(o===void 0)o=_;else if(o!==_)return"mixed"}return o}function concatRecursive(a,s,o,c){if(c<o){if(a.length!==s.length)throw new DimensionError(a.length,s.length);for(var h=[],d=0;d<a.length;d++)h[d]=concatRecursive(a[d],s[d],o,c+1);return h}else return a.concat(s)}function concat$1(){var a=Array.prototype.slice.call(arguments,0,-1),s=Array.prototype.slice.call(arguments,-1);if(a.length===1)return a[0];if(a.length>1)return a.slice(1).reduce(function(o,c){return concatRecursive(o,c,s,0)},a[0]);throw new Error("Wrong number of arguments in function concat")}function broadcastSizes(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];for(var c=s.map(fr=>fr.length),h=Math.max(...c),d=new Array(h).fill(null),b=0;b<s.length;b++)for(var _=s[b],$=c[b],j=0;j<$;j++){var Xt=h-$+j;_[j]>d[Xt]&&(d[Xt]=_[j])}for(var Lt=0;Lt<s.length;Lt++)checkBroadcastingRules(s[Lt],d);return d}function checkBroadcastingRules(a,s){for(var o=s.length,c=a.length,h=0;h<c;h++){var d=o-c+h;if(a[h]<s[d]&&a[h]>1||a[h]>s[d])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(c," with size ").concat(a[h]," to size ").concat(s[d]))}}function broadcastTo(a,s){var o=arraySize(a);if(deepStrictEqual(o,s))return a;checkBroadcastingRules(o,s);var c=broadcastSizes(o,s),h=c.length,d=[...Array(h-o.length).fill(1),...o],b=clone$1(a);o.length<h&&(b=reshape$1(b,d),o=arraySize(b));for(var _=0;_<h;_++)o[_]<c[_]&&(b=stretch(b,c[_],_),o=arraySize(b));return b}function stretch(a,s,o){return concat$1(...Array(s).fill(a),o)}function get(a,s){if(!Array.isArray(a))throw new Error("Array expected");var o=arraySize(a);if(s.length!==o.length)throw new DimensionError(s.length,o.length);for(var c=0;c<s.length;c++)validateIndex(s[c],o[c]);return s.reduce((h,d)=>h[d],a)}function deepMap$1(a,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a.length===0)return[];if(o)return d(a);var c=[];return h(a,0);function h(b,_){if(Array.isArray(b)){for(var $=b.length,j=Array($),Xt=0;Xt<$;Xt++)c[_]=Xt,j[Xt]=h(b[Xt],_+1);return j}else return s(b,c.slice(0,_),a)}function d(b){if(Array.isArray(b)){for(var _=b.length,$=Array(_),j=0;j<_;j++)$[j]=d(b[j]);return $}else return s(b)}}function deepForEach$1(a,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a.length===0)return;if(o){d(a);return}var c=[];h(a,0);function h(b,_){if(Array.isArray(b))for(var $=b.length,j=0;j<$;j++)c[_]=j,h(b[j],_+1);else s(b,c.slice(0,_),a)}function d(b){if(Array.isArray(b))for(var _=b.length,$=0;$<_;$++)d(b[$]);else s(b)}}function clone$1(a){return _extends$1([],a)}function optimizeCallback(a,s,o,c){if(typedFunction.isTypedFunction(a)){var h;if(c)h=1;else{var d=s.isMatrix?s.size():arraySize(s),b=d.length?d[d.length-1]===0:!0;if(b)return{isUnary:c,fn:a};var _=d.map(()=>0),$=s.isMatrix?s.get(_):get(s,_);h=_findNumberOfArgumentsTyped(a,$,_,s)}var j;if(s.isMatrix&&s.dataType!=="mixed"&&s.dataType!==void 0){var Xt=_findSingleSignatureWithArity(a,h);j=Xt!==void 0?Xt:a}else j=a;return h>=1&&h<=3?{isUnary:h===1,fn:function(){for(var fr=arguments.length,Jr=new Array(fr),Js=0;Js<fr;Js++)Jr[Js]=arguments[Js];return _tryFunctionWithArgs(j,Jr.slice(0,h),o,a.name)}}:{isUnary:!1,fn:function(){for(var fr=arguments.length,Jr=new Array(fr),Js=0;Js<fr;Js++)Jr[Js]=arguments[Js];return _tryFunctionWithArgs(j,Jr,o,a.name)}}}return c===void 0?{isUnary:_findIfCallbackIsUnary(a),fn:a}:{isUnary:c,fn:a}}function _findSingleSignatureWithArity(a,s){var o=[];if(Object.entries(a.signatures).forEach(c=>{var[h,d]=c;h.split(",").length===s&&o.push(d)}),o.length===1)return o[0]}function _findIfCallbackIsUnary(a){if(a.length!==1)return!1;var s=a.toString();if(/arguments/.test(s))return!1;var o=s.match(/\(.*?\)/);return!/\.\.\./.test(o)}function _findNumberOfArgumentsTyped(a,s,o,c){for(var h=[s,o,c],d=3;d>0;d--){var b=h.slice(0,d);if(typedFunction.resolve(a,b)!==null)return d}}function _tryFunctionWithArgs(a,s,o,c){try{return a(...s)}catch(h){_createCallbackError(h,s,o,c)}}function _createCallbackError(a,s,o,c){var h;if(a instanceof TypeError&&((h=a.data)===null||h===void 0?void 0:h.category)==="wrongType"){var d=[];throw d.push("value: ".concat(typeOf$1(s[0]))),s.length>=2&&d.push("index: ".concat(typeOf$1(s[1]))),s.length>=3&&d.push("array: ".concat(typeOf$1(s[2]))),new TypeError("Function ".concat(o," cannot apply callback arguments ")+"".concat(c,"(").concat(d.join(", "),") at index ").concat(JSON.stringify(s[1])))}else throw new TypeError("Function ".concat(o," cannot apply callback arguments ")+"to function ".concat(c,": ").concat(a.message))}var name$4V="DenseMatrix",dependencies$4V=["Matrix","config"],createDenseMatrixClass=factory(name$4V,dependencies$4V,a=>{var{Matrix:s,config:o}=a;function c(Lt,fr){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(fr&&!isString(fr))throw new Error("Invalid datatype: "+fr);if(isMatrix(Lt))Lt.type==="DenseMatrix"?(this._data=clone$3(Lt._data),this._size=clone$3(Lt._size),this._datatype=fr||Lt._datatype):(this._data=Lt.toArray(),this._size=Lt.size(),this._datatype=fr||Lt._datatype);else if(Lt&&isArray(Lt.data)&&isArray(Lt.size))this._data=Lt.data,this._size=Lt.size,validate(this._data,this._size),this._datatype=fr||Lt.datatype;else if(isArray(Lt))this._data=Xt(Lt),this._size=arraySize(this._data),validate(this._data,this._size),this._datatype=fr;else{if(Lt)throw new TypeError("Unsupported type of data ("+typeOf$1(Lt)+")");this._data=[],this._size=[0],this._datatype=fr}}c.prototype=new s,c.prototype.createDenseMatrix=function(Lt,fr){return new c(Lt,fr)},Object.defineProperty(c,"name",{value:"DenseMatrix"}),c.prototype.constructor=c,c.prototype.type="DenseMatrix",c.prototype.isDenseMatrix=!0,c.prototype.getDataType=function(){return getArrayDataType(this._data,typeOf$1)},c.prototype.storage=function(){return"dense"},c.prototype.datatype=function(){return this._datatype},c.prototype.create=function(Lt,fr){return new c(Lt,fr)},c.prototype.subset=function(Lt,fr,Jr){switch(arguments.length){case 1:return h(this,Lt);case 2:case 3:return b(this,Lt,fr,Jr);default:throw new SyntaxError("Wrong number of arguments")}},c.prototype.get=function(Lt){return get(this._data,Lt)},c.prototype.set=function(Lt,fr,Jr){if(!isArray(Lt))throw new TypeError("Array expected");if(Lt.length<this._size.length)throw new DimensionError(Lt.length,this._size.length,"<");var Js,qs,zo,js=Lt.map(function(Oo){return Oo+1});j(this,js,Jr);var eu=this._data;for(Js=0,qs=Lt.length-1;Js<qs;Js++)zo=Lt[Js],validateIndex(zo,eu.length),eu=eu[zo];return zo=Lt[Lt.length-1],validateIndex(zo,eu.length),eu[zo]=fr,this};function h(Lt,fr){if(!isIndex(fr))throw new TypeError("Invalid index");var Jr=o.legacySubset?fr.size().every(Bo=>Bo===1):fr.isScalar();if(Jr)return Lt.get(fr.min());var Js=fr.size();if(Js.length!==Lt._size.length)throw new DimensionError(Js.length,Lt._size.length);for(var qs=fr.min(),zo=fr.max(),js=0,eu=Lt._size.length;js<eu;js++)validateIndex(qs[js],Lt._size[js]),validateIndex(zo[js],Lt._size[js]);var Oo=new c,tu=d(Lt._data,fr);return Oo._size=tu.size,Oo._datatype=Lt._datatype,Oo._data=tu.data,o.legacySubset?Oo.reshape(fr.size()):Oo}function d(Lt,fr){var Jr=fr.size().length-1,Js=Array(Jr);return{data:qs(Lt),size:Js.filter(zo=>zo!==null)};function qs(zo){var js=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,eu=fr.dimension(js);function Oo(tu,Bo){return isNumber(tu)?Bo(tu):tu.map(Bo).valueOf()}return isNumber(eu)?Js[js]=null:Js[js]=eu.size()[0],js<Jr?Oo(eu,tu=>(validateIndex(tu,zo.length),qs(zo[tu],js+1))):Oo(eu,tu=>(validateIndex(tu,zo.length),zo[tu]))}}function b(Lt,fr,Jr,Js){if(!fr||fr.isIndex!==!0)throw new TypeError("Invalid index");var qs=fr.size(),zo=fr.isScalar(),js;if(isMatrix(Jr)?(js=Jr.size(),Jr=Jr.valueOf()):js=arraySize(Jr),zo){if(js.length!==0)throw new TypeError("Scalar expected");Lt.set(fr.min(),Jr,Js)}else{if(!deepStrictEqual(js,qs)){if(js.length===0)Jr=broadcastTo([Jr],qs);else try{Jr=broadcastTo(Jr,qs)}catch{}js=arraySize(Jr)}if(qs.length<Lt._size.length)throw new DimensionError(qs.length,Lt._size.length,"<");if(js.length<qs.length){for(var eu=0,Oo=0;qs[eu]===1&&js[eu]===1;)eu++;for(;qs[eu]===1;)Oo++,eu++;Jr=unsqueeze(Jr,qs.length,Oo,js)}if(!deepStrictEqual(qs,js))throw new DimensionError(qs,js,">");var tu=fr.max().map(function(Bo){return Bo+1});j(Lt,tu,Js),_(Lt._data,fr,Jr)}return Lt}function _(Lt,fr,Jr){var Js=fr.size().length-1;qs(Lt,Jr);function qs(zo,js){var eu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Oo=fr.dimension(eu),tu=(vu,t1)=>{validateIndex(vu,zo.length),qs(zo[vu],js[t1[0]],eu+1)},Bo=(vu,t1)=>{validateIndex(vu,zo.length),zo[vu]=js[t1[0]]};eu<Js?isNumber(Oo)?tu(Oo,[0]):Oo.forEach(tu):isNumber(Oo)?Bo(Oo,[0]):Oo.forEach(Bo)}}c.prototype.resize=function(Lt,fr,Jr){if(!isCollection(Lt))throw new TypeError("Array or Matrix expected");var Js=Lt.valueOf().map(zo=>Array.isArray(zo)&&zo.length===1?zo[0]:zo),qs=Jr?this.clone():this;return $(qs,Js,fr)};function $(Lt,fr,Jr){if(fr.length===0){for(var Js=Lt._data;isArray(Js);)Js=Js[0];return Js}return Lt._size=fr.slice(0),Lt._data=resize$1(Lt._data,Lt._size,Jr),Lt}c.prototype.reshape=function(Lt,fr){var Jr=fr?this.clone():this;Jr._data=reshape$1(Jr._data,Lt);var Js=Jr._size.reduce((qs,zo)=>qs*zo);return Jr._size=processSizesWildcard(Lt,Js),Jr};function j(Lt,fr,Jr){for(var Js=Lt._size.slice(0),qs=!1;Js.length<fr.length;)Js.push(0),qs=!0;for(var zo=0,js=fr.length;zo<js;zo++)fr[zo]>Js[zo]&&(Js[zo]=fr[zo],qs=!0);qs&&$(Lt,Js,Jr)}c.prototype.clone=function(){var Lt=new c({data:clone$3(this._data),size:clone$3(this._size),datatype:this._datatype});return Lt},c.prototype.size=function(){return this._size.slice(0)},c.prototype.map=function(Lt){var fr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Jr=this,Js=Jr._size.length-1;if(Js<0)return Jr.clone();var qs=optimizeCallback(Lt,Jr,"map",fr),zo=qs.fn,js=Jr.create(void 0,Jr._datatype);if(js._size=Jr._size,fr||qs.isUnary)return js._data=t1(Jr._data),js;if(Js===0){for(var eu=Jr.valueOf(),Oo=Array(eu.length),tu=0;tu<eu.length;tu++)Oo[tu]=zo(eu[tu],[tu],Jr);return js._data=Oo,js}var Bo=[];return js._data=vu(Jr._data),js;function vu(e1){var r1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a1=Array(e1.length);if(r1<Js)for(var i1=0;i1<e1.length;i1++)Bo[r1]=i1,a1[i1]=vu(e1[i1],r1+1);else for(var s1=0;s1<e1.length;s1++)Bo[r1]=s1,a1[s1]=zo(e1[s1],Bo.slice(),Jr);return a1}function t1(e1){var r1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a1=Array(e1.length);if(r1<Js)for(var i1=0;i1<e1.length;i1++)a1[i1]=t1(e1[i1],r1+1);else for(var s1=0;s1<e1.length;s1++)a1[s1]=zo(e1[s1]);return a1}},c.prototype.forEach=function(Lt){var fr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Jr=this,Js=Jr._size.length-1;if(Js<0)return;var qs=optimizeCallback(Lt,Jr,"map",fr),zo=qs.fn;if(fr||qs.isUnary){tu(Jr._data);return}if(Js===0){for(var js=0;js<Jr._data.length;js++)zo(Jr._data[js],[js],Jr);return}var eu=[];Oo(Jr._data);function Oo(Bo){var vu=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(vu<Js)for(var t1=0;t1<Bo.length;t1++)eu[vu]=t1,Oo(Bo[t1],vu+1);else for(var e1=0;e1<Bo.length;e1++)eu[vu]=e1,zo(Bo[e1],eu.slice(),Jr)}function tu(Bo){var vu=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(vu<Js)for(var t1=0;t1<Bo.length;t1++)tu(Bo[t1],vu+1);else for(var e1=0;e1<Bo.length;e1++)zo(Bo[e1])}},c.prototype[Symbol.iterator]=function*(){var Lt=this._size.length-1;if(!(Lt<0)){if(Lt===0){for(var fr=0;fr<this._data.length;fr++)yield{value:this._data[fr],index:[fr]};return}for(var Jr=Array(Lt+1).fill(0),Js=this._size.reduce((Oo,tu)=>Oo*tu,1),qs=0;qs<Js;qs++){for(var zo=this._data,js=0;js<Lt;js++)zo=zo[Jr[js]];yield{value:zo[Jr[Lt]],index:Jr.slice()};for(var eu=Lt;eu>=0&&(Jr[eu]++,!(Jr[eu]<this._size[eu]));eu--)Jr[eu]=0}}},c.prototype.rows=function(){var Lt=[],fr=this.size();if(fr.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var Jr=this._data;for(var Js of Jr)Lt.push(new c([Js],this._datatype));return Lt},c.prototype.columns=function(){var Lt=this,fr=[],Jr=this.size();if(Jr.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var Js=this._data,qs=function(eu){var Oo=Js.map(tu=>[tu[eu]]);fr.push(new c(Oo,Lt._datatype))},zo=0;zo<Jr[1];zo++)qs(zo);return fr},c.prototype.toArray=function(){return clone$3(this._data)},c.prototype.valueOf=function(){return this._data},c.prototype.format=function(Lt){return format$1(this._data,Lt)},c.prototype.toString=function(){return format$1(this._data)},c.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},c.prototype.diagonal=function(Lt){if(Lt){if(isBigNumber(Lt)&&(Lt=Lt.toNumber()),!isNumber(Lt)||!isInteger$1(Lt))throw new TypeError("The parameter k must be an integer number")}else Lt=0;for(var fr=Lt>0?Lt:0,Jr=Lt<0?-Lt:0,Js=this._size[0],qs=this._size[1],zo=Math.min(Js-Jr,qs-fr),js=[],eu=0;eu<zo;eu++)js[eu]=this._data[eu+Jr][eu+fr];return new c({data:js,size:[zo],datatype:this._datatype})},c.diagonal=function(Lt,fr,Jr,Js){if(!isArray(Lt))throw new TypeError("Array expected, size parameter");if(Lt.length!==2)throw new Error("Only two dimensions matrix are supported");if(Lt=Lt.map(function(e1){if(isBigNumber(e1)&&(e1=e1.toNumber()),!isNumber(e1)||!isInteger$1(e1)||e1<1)throw new Error("Size values must be positive integers");return e1}),Jr){if(isBigNumber(Jr)&&(Jr=Jr.toNumber()),!isNumber(Jr)||!isInteger$1(Jr))throw new TypeError("The parameter k must be an integer number")}else Jr=0;var qs=Jr>0?Jr:0,zo=Jr<0?-Jr:0,js=Lt[0],eu=Lt[1],Oo=Math.min(js-zo,eu-qs),tu;if(isArray(fr)){if(fr.length!==Oo)throw new Error("Invalid value array length");tu=function(r1){return fr[r1]}}else if(isMatrix(fr)){var Bo=fr.size();if(Bo.length!==1||Bo[0]!==Oo)throw new Error("Invalid matrix length");tu=function(r1){return fr.get([r1])}}else tu=function(){return fr};Js||(Js=isBigNumber(tu(0))?tu(0).mul(0):0);var vu=[];if(Lt.length>0){vu=resize$1(vu,Lt,Js);for(var t1=0;t1<Oo;t1++)vu[t1+zo][t1+qs]=tu(t1)}return new c({data:vu,size:[js,eu]})},c.fromJSON=function(Lt){return new c(Lt)},c.prototype.swapRows=function(Lt,fr){if(!isNumber(Lt)||!isInteger$1(Lt)||!isNumber(fr)||!isInteger$1(fr))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(Lt,this._size[0]),validateIndex(fr,this._size[0]),c._swapRows(Lt,fr,this._data),this},c._swapRows=function(Lt,fr,Jr){var Js=Jr[Lt];Jr[Lt]=Jr[fr],Jr[fr]=Js};function Xt(Lt){return isMatrix(Lt)?Xt(Lt.valueOf()):isArray(Lt)?Lt.map(Xt):Lt}return c},{isClass:!0}),name$4U="clone",dependencies$4U=["typed"],createClone=factory(name$4U,dependencies$4U,a=>{var{typed:s}=a;return s(name$4U,{any:clone$3})});function _switch$1(a){var s=a.length,o=a[0].length,c,h,d=[];for(h=0;h<o;h++){var b=[];for(c=0;c<s;c++)b.push(a[c][h]);d.push(b)}return d}function containsCollections(a){for(var s=0;s<a.length;s++)if(isCollection(a[s]))return!0;return!1}function deepForEach(a,s){isMatrix(a)?a.forEach(o=>s(o),!1,!0):deepForEach$1(a,s,!0)}function deepMap(a,s,o){if(!o)return isMatrix(a)?a.map(h=>s(h),!1,!0):deepMap$1(a,s,!0);var c=h=>h===0?h:s(h);return isMatrix(a)?a.map(h=>c(h),!1,!0):deepMap$1(a,c,!0)}function reduce(a,s,o){var c=Array.isArray(a)?arraySize(a):a.size();if(s<0||s>=c.length)throw new IndexError(s,c.length);return isMatrix(a)?a.create(_reduce(a.valueOf(),s,o),a.datatype()):_reduce(a,s,o)}function _reduce(a,s,o){var c,h,d,b;if(s<=0)if(Array.isArray(a[0])){for(b=_switch$1(a),h=[],c=0;c<b.length;c++)h[c]=_reduce(b[c],s-1,o);return h}else{for(d=a[0],c=1;c<a.length;c++)d=o(d,a[c]);return d}else{for(h=[],c=0;c<a.length;c++)h[c]=_reduce(a[c],s-1,o);return h}}function scatter(a,s,o,c,h,d,b,_,$,j,Xt){var Lt=a._values,fr=a._index,Jr=a._ptr,Js,qs,zo,js;if(c)for(qs=Jr[s],zo=Jr[s+1],Js=qs;Js<zo;Js++)js=fr[Js],o[js]!==d?(o[js]=d,b.push(js),c[js]=Lt[Js]):(c[js]=_(c[js],Lt[Js]),h[js]=d);else for(qs=Jr[s],zo=Jr[s+1],Js=qs;Js<zo;Js++)js=fr[Js],o[js]!==d?(o[js]=d,b.push(js)):h[js]=d}var name$4T="isInteger",dependencies$4T=["typed","equal"],createIsInteger=factory(name$4T,dependencies$4T,a=>{var{typed:s,equal:o}=a;return s(name$4T,{number:c=>Number.isFinite(c)?o(c,Math.round(c)):!1,BigNumber:c=>c.isFinite()?o(c.round(),c):!1,bigint:c=>!0,Fraction:c=>c.d===1n,"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),n1$4="number",n2$2="number, number";function absNumber(a){return Math.abs(a)}absNumber.signature=n1$4;function addNumber(a,s){return a+s}addNumber.signature=n2$2;function subtractNumber(a,s){return a-s}subtractNumber.signature=n2$2;function multiplyNumber(a,s){return a*s}multiplyNumber.signature=n2$2;function unaryMinusNumber(a){return-a}unaryMinusNumber.signature=n1$4;function unaryPlusNumber(a){return a}unaryPlusNumber.signature=n1$4;function cbrtNumber(a){return cbrt$2(a)}cbrtNumber.signature=n1$4;function cubeNumber(a){return a*a*a}cubeNumber.signature=n1$4;function expNumber(a){return Math.exp(a)}expNumber.signature=n1$4;function expm1Number(a){return expm1$1(a)}expm1Number.signature=n1$4;function lcmNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Parameters in function lcm must be integer numbers");if(a===0||s===0)return 0;for(var o,c=a*s;s!==0;)o=s,s=a%o,a=o;return Math.abs(c/a)}lcmNumber.signature=n2$2;function logNumber(a,s){return s?Math.log(a)/Math.log(s):Math.log(a)}function log10Number(a){return log10$2(a)}log10Number.signature=n1$4;function log2Number(a){return log2$2(a)}log2Number.signature=n1$4;function nthRootNumber(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,o=s<0;if(o&&(s=-s),s===0)throw new Error("Root must be non-zero");if(a<0&&Math.abs(s)%2!==1)throw new Error("Root must be odd when a is negative.");if(a===0)return o?1/0:0;if(!isFinite(a))return o?0:a;var c=Math.pow(Math.abs(a),1/s);return c=a<0?-c:c,o?1/c:c}function signNumber(a){return sign$2(a)}signNumber.signature=n1$4;function squareNumber(a){return a*a}squareNumber.signature=n1$4;function xgcdNumber(a,s){var o,c,h,d=0,b=1,_=1,$=0;if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Parameters in function xgcd must be integer numbers");for(;s;)c=Math.floor(a/s),h=a-c*s,o=d,d=b-c*d,b=o,o=_,_=$-c*_,$=o,a=s,s=h;var j;return a<0?j=[-a,-b,-$]:j=[a,a?b:0,$],j}xgcdNumber.signature=n2$2;function powNumber(a,s){return a*a<1&&s===1/0||a*a>1&&s===-1/0?0:Math.pow(a,s)}powNumber.signature=n2$2;function roundNumber(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!isInteger$1(s)||s<0||s>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(toFixed$1(a,s))}var n1$3="number",n2$1="number, number";function bitAndNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Integers expected in function bitAnd");return a&s}bitAndNumber.signature=n2$1;function bitNotNumber(a){if(!isInteger$1(a))throw new Error("Integer expected in function bitNot");return~a}bitNotNumber.signature=n1$3;function bitOrNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Integers expected in function bitOr");return a|s}bitOrNumber.signature=n2$1;function bitXorNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Integers expected in function bitXor");return a^s}bitXorNumber.signature=n2$1;function leftShiftNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Integers expected in function leftShift");return a<<s}leftShiftNumber.signature=n2$1;function rightArithShiftNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Integers expected in function rightArithShift");return a>>s}rightArithShiftNumber.signature=n2$1;function rightLogShiftNumber(a,s){if(!isInteger$1(a)||!isInteger$1(s))throw new Error("Integers expected in function rightLogShift");return a>>>s}rightLogShiftNumber.signature=n2$1;function product(a,s){if(s<a)return 1;if(s===a)return s;var o=s+a>>1;return product(a,o)*product(o+1,s)}function combinationsNumber(a,s){if(!isInteger$1(a)||a<0)throw new TypeError("Positive integer value expected in function combinations");if(!isInteger$1(s)||s<0)throw new TypeError("Positive integer value expected in function combinations");if(s>a)throw new TypeError("k must be less than or equal to n");for(var o=a-s,c=1,h=s<o?o+1:s+1,d=2,b=s<o?s:o,_=h;_<=a;++_)for(c*=_;d<=b&&c%d===0;)c/=d,++d;return d<=b&&(c/=product(d,b)),c}combinationsNumber.signature="number, number";var pi$2=Math.PI,tau$1=2*Math.PI,e$1=Math.E,phi$1=1.618033988749895,n1$2="number",n2="number, number";function notNumber(a){return!a}notNumber.signature=n1$2;function orNumber(a,s){return!!(a||s)}orNumber.signature=n2;function xorNumber(a,s){return!!a!=!!s}xorNumber.signature=n2;function andNumber(a,s){return!!(a&&s)}andNumber.signature=n2;function gammaNumber(a){var s;if(isInteger$1(a))return a<=0?Number.isFinite(a)?1/0:NaN:a>171?1/0:product(1,a-1);if(a<.5)return Math.PI/(Math.sin(Math.PI*a)*gammaNumber(1-a));if(a>=171.35)return 1/0;if(a>85){var o=a*a,c=o*a,h=c*a,d=h*a;return Math.sqrt(2*Math.PI/a)*Math.pow(a/Math.E,a)*(1+1/(12*a)+1/(288*o)-139/(51840*c)-571/(2488320*h)+163879/(209018880*d)+5246819/(75246796800*d*a))}--a,s=gammaP[0];for(var b=1;b<gammaP.length;++b)s+=gammaP[b]/(a+b);var _=a+gammaG+.5;return Math.sqrt(2*Math.PI)*Math.pow(_,a+.5)*Math.exp(-_)*s}gammaNumber.signature="number";var gammaG=4.7421875,gammaP=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],lnSqrt2PI=.9189385332046728,lgammaG=5,lgammaN=7,lgammaSeries=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function lgammaNumber(a){if(a<0)return NaN;if(a===0)return 1/0;if(!Number.isFinite(a))return a;if(a<.5)return Math.log(Math.PI/Math.sin(Math.PI*a))-lgammaNumber(1-a);a=a-1;for(var s=a+lgammaG+.5,o=lgammaSeries[0],c=lgammaN-1;c>=1;c--)o+=lgammaSeries[c]/(a+c);return lnSqrt2PI+(a+.5)*Math.log(s)-s+Math.log(o)}lgammaNumber.signature="number";var n1$1="number";function acoshNumber(a){return acosh$2(a)}acoshNumber.signature=n1$1;function acotNumber(a){return Math.atan(1/a)}acotNumber.signature=n1$1;function acothNumber(a){return Number.isFinite(a)?(Math.log((a+1)/a)+Math.log(a/(a-1)))/2:0}acothNumber.signature=n1$1;function acscNumber(a){return Math.asin(1/a)}acscNumber.signature=n1$1;function acschNumber(a){var s=1/a;return Math.log(s+Math.sqrt(s*s+1))}acschNumber.signature=n1$1;function asecNumber(a){return Math.acos(1/a)}asecNumber.signature=n1$1;function asechNumber(a){var s=1/a,o=Math.sqrt(s*s-1);return Math.log(o+s)}asechNumber.signature=n1$1;function asinhNumber(a){return asinh$2(a)}asinhNumber.signature=n1$1;function atanhNumber(a){return atanh$2(a)}atanhNumber.signature=n1$1;function cotNumber(a){return 1/Math.tan(a)}cotNumber.signature=n1$1;function cothNumber(a){var s=Math.exp(2*a);return(s+1)/(s-1)}cothNumber.signature=n1$1;function cscNumber(a){return 1/Math.sin(a)}cscNumber.signature=n1$1;function cschNumber(a){return a===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(a)-Math.exp(-a)))*sign$2(a)}cschNumber.signature=n1$1;function secNumber(a){return 1/Math.cos(a)}secNumber.signature=n1$1;function sechNumber(a){return 2/(Math.exp(a)+Math.exp(-a))}sechNumber.signature=n1$1;function sinhNumber(a){return sinh$3(a)}sinhNumber.signature=n1$1;var n1="number";function isNegativeNumber(a){return a<0}isNegativeNumber.signature=n1;function isPositiveNumber(a){return a>0}isPositiveNumber.signature=n1;function isNaNNumber(a){return Number.isNaN(a)}isNaNNumber.signature=n1;function nearlyEqual(a,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(o<=0)throw new Error("Relative tolerance must be greater than 0");if(c<0)throw new Error("Absolute tolerance must be at least 0");return a.isNaN()||s.isNaN()?!1:!a.isFinite()||!s.isFinite()?a.eq(s):a.eq(s)?!0:a.minus(s).abs().lte(a.constructor.max(a.constructor.max(a.abs(),s.abs()).mul(o),c))}var name$4S="isNegative",dependencies$4S=["typed","config"],createIsNegative=factory(name$4S,dependencies$4S,a=>{var{typed:s,config:o}=a;return s(name$4S,{number:c=>nearlyEqual$1(c,0,o.relTol,o.absTol)?!1:isNegativeNumber(c),BigNumber:c=>nearlyEqual(c,new c.constructor(0),o.relTol,o.absTol)?!1:c.isNeg()&&!c.isZero()&&!c.isNaN(),bigint:c=>c<0n,Fraction:c=>c.s<0n,Unit:s.referToSelf(c=>h=>s.find(c,h.valueType())(h.value)),"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$4R="isNumeric",dependencies$4R=["typed"],createIsNumeric=factory(name$4R,dependencies$4R,a=>{var{typed:s}=a;return s(name$4R,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$4Q="hasNumericValue",dependencies$4Q=["typed","isNumeric"],createHasNumericValue=factory(name$4Q,dependencies$4Q,a=>{var{typed:s,isNumeric:o}=a;return s(name$4Q,{boolean:()=>!0,string:function(h){return h.trim().length>0&&!isNaN(Number(h))},any:function(h){return o(h)}})}),name$4P="isPositive",dependencies$4P=["typed","config"],createIsPositive=factory(name$4P,dependencies$4P,a=>{var{typed:s,config:o}=a;return s(name$4P,{number:c=>nearlyEqual$1(c,0,o.relTol,o.absTol)?!1:isPositiveNumber(c),BigNumber:c=>nearlyEqual(c,new c.constructor(0),o.relTol,o.absTol)?!1:!c.isNeg()&&!c.isZero()&&!c.isNaN(),bigint:c=>c>0n,Fraction:c=>c.s>0n&&c.n>0n,Unit:s.referToSelf(c=>h=>s.find(c,h.valueType())(h.value)),"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$4O="isZero",dependencies$4O=["typed","equalScalar"],createIsZero=factory(name$4O,dependencies$4O,a=>{var{typed:s,equalScalar:o}=a;return s(name$4O,{"number | BigNumber | Complex | Fraction":c=>o(c,0),bigint:c=>c===0n,Unit:s.referToSelf(c=>h=>s.find(c,h.valueType())(h.value)),"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$4N="isNaN",dependencies$4N=["typed"],createIsNaN=factory(name$4N,dependencies$4N,a=>{var{typed:s}=a;return s(name$4N,{number:isNaNNumber,BigNumber:function(c){return c.isNaN()},bigint:function(c){return!1},Fraction:function(c){return!1},Complex:function(c){return c.isNaN()},Unit:function(c){return Number.isNaN(c.value)},"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$4M="isBounded",dependencies$4M=["typed"],createIsBounded=factory(name$4M,dependencies$4M,a=>{var{typed:s}=a;return s(name$4M,{number:o=>Number.isFinite(o),"BigNumber | Complex":o=>o.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:s.referToSelf(o=>c=>o(c.value)),"Array | Matrix":s.referToSelf(o=>c=>(Array.isArray(c)||(c=c.valueOf()),c.every(h=>o(h))))})}),name$4L="isFinite",dependencies$4L=["typed","isBounded","map"],createIsFinite=factory(name$4L,dependencies$4L,a=>{var{typed:s,isBounded:o,map:c}=a;return s(name$4L,{"Array | Matrix":h=>c(h,o),any:h=>o(h)})}),name$4K="typeOf",dependencies$4K=["typed"],createTypeOf=factory(name$4K,dependencies$4K,a=>{var{typed:s}=a;return s(name$4K,{any:typeOf$1})});function complexEquals(a,s,o,c){return nearlyEqual$1(a.re,s.re,o,c)&&nearlyEqual$1(a.im,s.im,o,c)}var createCompareUnits=factory("compareUnits",["typed"],a=>{var{typed:s}=a;return{"Unit, Unit":s.referToSelf(o=>(c,h)=>{if(!c.equalBase(h))throw new Error("Cannot compare units with different base");return s.find(o,[c.valueType(),h.valueType()])(c.value,h.value)})}}),name$4J="equalScalar",dependencies$4J=["typed","config"],createEqualScalar=factory(name$4J,dependencies$4J,a=>{var{typed:s,config:o}=a,c=createCompareUnits({typed:s});return s(name$4J,{"boolean, boolean":function(d,b){return d===b},"number, number":function(d,b){return nearlyEqual$1(d,b,o.relTol,o.absTol)},"BigNumber, BigNumber":function(d,b){return d.eq(b)||nearlyEqual(d,b,o.relTol,o.absTol)},"bigint, bigint":function(d,b){return d===b},"Fraction, Fraction":function(d,b){return d.equals(b)},"Complex, Complex":function(d,b){return complexEquals(d,b,o.relTol,o.absTol)}},c)});factory(name$4J,["typed","config"],a=>{var{typed:s,config:o}=a;return s(name$4J,{"number, number":function(h,d){return nearlyEqual$1(h,d,o.relTol,o.absTol)}})});var name$4I="SparseMatrix",dependencies$4I=["typed","equalScalar","Matrix"],createSparseMatrixClass=factory(name$4I,dependencies$4I,a=>{var{typed:s,equalScalar:o,Matrix:c}=a;function h(qs,zo){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(zo&&!isString(zo))throw new Error("Invalid datatype: "+zo);if(isMatrix(qs))d(this,qs,zo);else if(qs&&isArray(qs.index)&&isArray(qs.ptr)&&isArray(qs.size))this._values=qs.values,this._index=qs.index,this._ptr=qs.ptr,this._size=qs.size,this._datatype=zo||qs.datatype;else if(isArray(qs))b(this,qs,zo);else{if(qs)throw new TypeError("Unsupported type of data ("+typeOf$1(qs)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=zo}}function d(qs,zo,js){zo.type==="SparseMatrix"?(qs._values=zo._values?clone$3(zo._values):void 0,qs._index=clone$3(zo._index),qs._ptr=clone$3(zo._ptr),qs._size=clone$3(zo._size),qs._datatype=js||zo._datatype):b(qs,zo.valueOf(),js||zo._datatype)}function b(qs,zo,js){qs._values=[],qs._index=[],qs._ptr=[],qs._datatype=js;var eu=zo.length,Oo=0,tu=o,Bo=0;if(isString(js)&&(tu=s.find(o,[js,js])||o,Bo=s.convert(0,js)),eu>0){var vu=0;do{qs._ptr.push(qs._index.length);for(var t1=0;t1<eu;t1++){var e1=zo[t1];if(isArray(e1)){if(vu===0&&Oo<e1.length&&(Oo=e1.length),vu<e1.length){var r1=e1[vu];tu(r1,Bo)||(qs._values.push(r1),qs._index.push(t1))}}else vu===0&&Oo<1&&(Oo=1),tu(e1,Bo)||(qs._values.push(e1),qs._index.push(t1))}vu++}while(vu<Oo)}for(;qs._ptr.length<=Oo;)qs._ptr.push(qs._index.length);qs._size=[eu,Oo]}h.prototype=new c,h.prototype.createSparseMatrix=function(qs,zo){return new h(qs,zo)},Object.defineProperty(h,"name",{value:"SparseMatrix"}),h.prototype.constructor=h,h.prototype.type="SparseMatrix",h.prototype.isSparseMatrix=!0,h.prototype.getDataType=function(){return getArrayDataType(this._values,typeOf$1)},h.prototype.storage=function(){return"sparse"},h.prototype.datatype=function(){return this._datatype},h.prototype.create=function(qs,zo){return new h(qs,zo)},h.prototype.density=function(){var qs=this._size[0],zo=this._size[1];return qs!==0&&zo!==0?this._index.length/(qs*zo):0},h.prototype.subset=function(qs,zo,js){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return _(this,qs);case 2:case 3:return $(this,qs,zo,js);default:throw new SyntaxError("Wrong number of arguments")}};function _(qs,zo){if(!isIndex(zo))throw new TypeError("Invalid index");var js=zo.isScalar();if(js)return qs.get(zo.min());var eu=zo.size();if(eu.length!==qs._size.length)throw new DimensionError(eu.length,qs._size.length);var Oo,tu,Bo,vu,t1=zo.min(),e1=zo.max();for(Oo=0,tu=qs._size.length;Oo<tu;Oo++)validateIndex(t1[Oo],qs._size[Oo]),validateIndex(e1[Oo],qs._size[Oo]);var r1=qs._values,a1=qs._index,i1=qs._ptr,s1=zo.dimension(0),c1=zo.dimension(1),h1=[],m1=[];function l1(C1,g1){m1[C1]=g1[0],h1[C1]=!0}Number.isInteger(s1)?l1(s1,[0]):s1.forEach(l1);var f1=r1?[]:void 0,p1=[],d1=[];function b1(C1){for(d1.push(p1.length),Bo=i1[C1],vu=i1[C1+1];Bo<vu;Bo++)Oo=a1[Bo],h1[Oo]===!0&&(p1.push(m1[Oo]),f1&&f1.push(r1[Bo]))}return Number.isInteger(c1)?b1(c1):c1.forEach(b1),d1.push(p1.length),new h({values:f1,index:p1,ptr:d1,size:eu,datatype:qs._datatype})}function $(qs,zo,js,eu){if(!zo||zo.isIndex!==!0)throw new TypeError("Invalid index");var Oo=zo.size(),tu=zo.isScalar(),Bo;if(isMatrix(js)?(Bo=js.size(),js=js.toArray()):Bo=arraySize(js),tu){if(Bo.length!==0)throw new TypeError("Scalar expected");qs.set(zo.min(),js,eu)}else{if(Oo.length!==1&&Oo.length!==2)throw new DimensionError(Oo.length,qs._size.length,"<");if(Bo.length<Oo.length){for(var vu=0,t1=0;Oo[vu]===1&&Bo[vu]===1;)vu++;for(;Oo[vu]===1;)t1++,vu++;js=unsqueeze(js,Oo.length,t1,Bo)}if(!deepStrictEqual(Oo,Bo))throw new DimensionError(Oo,Bo,">");if(Oo.length===1){var e1=zo.dimension(0);i1(e1,(s1,c1)=>{validateIndex(s1),qs.set([s1,0],js[c1[0]],eu)})}else{var r1=zo.dimension(0),a1=zo.dimension(1);i1(r1,(s1,c1)=>{validateIndex(s1),i1(a1,(h1,m1)=>{validateIndex(h1),qs.set([s1,h1],js[c1[0]][m1[0]],eu)})})}}return qs;function i1(s1,c1){isNumber(s1)?c1(s1,[0]):s1.forEach(c1)}}h.prototype.get=function(qs){if(!isArray(qs))throw new TypeError("Array expected");if(qs.length!==this._size.length)throw new DimensionError(qs.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var zo=qs[0],js=qs[1];validateIndex(zo,this._size[0]),validateIndex(js,this._size[1]);var eu=j(zo,this._ptr[js],this._ptr[js+1],this._index);return eu<this._ptr[js+1]&&this._index[eu]===zo?this._values[eu]:0},h.prototype.set=function(qs,zo,js){if(!isArray(qs))throw new TypeError("Array expected");if(qs.length!==this._size.length)throw new DimensionError(qs.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var eu=qs[0],Oo=qs[1],tu=this._size[0],Bo=this._size[1],vu=o,t1=0;isString(this._datatype)&&(vu=s.find(o,[this._datatype,this._datatype])||o,t1=s.convert(0,this._datatype)),(eu>tu-1||Oo>Bo-1)&&(fr(this,Math.max(eu+1,tu),Math.max(Oo+1,Bo),js),tu=this._size[0],Bo=this._size[1]),validateIndex(eu,tu),validateIndex(Oo,Bo);var e1=j(eu,this._ptr[Oo],this._ptr[Oo+1],this._index);return e1<this._ptr[Oo+1]&&this._index[e1]===eu?vu(zo,t1)?Xt(e1,Oo,this._values,this._index,this._ptr):this._values[e1]=zo:vu(zo,t1)||Lt(e1,eu,Oo,zo,this._values,this._index,this._ptr),this};function j(qs,zo,js,eu){if(js-zo===0)return js;for(var Oo=zo;Oo<js;Oo++)if(eu[Oo]===qs)return Oo;return zo}function Xt(qs,zo,js,eu,Oo){js.splice(qs,1),eu.splice(qs,1);for(var tu=zo+1;tu<Oo.length;tu++)Oo[tu]--}function Lt(qs,zo,js,eu,Oo,tu,Bo){Oo.splice(qs,0,eu),tu.splice(qs,0,zo);for(var vu=js+1;vu<Bo.length;vu++)Bo[vu]++}h.prototype.resize=function(qs,zo,js){if(!isCollection(qs))throw new TypeError("Array or Matrix expected");var eu=qs.valueOf().map(tu=>Array.isArray(tu)&&tu.length===1?tu[0]:tu);if(eu.length!==2)throw new Error("Only two dimensions matrix are supported");eu.forEach(function(tu){if(!isNumber(tu)||!isInteger$1(tu)||tu<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format$1(eu)+")")});var Oo=js?this.clone():this;return fr(Oo,eu[0],eu[1],zo)};function fr(qs,zo,js,eu){var Oo=eu||0,tu=o,Bo=0;isString(qs._datatype)&&(tu=s.find(o,[qs._datatype,qs._datatype])||o,Bo=s.convert(0,qs._datatype),Oo=s.convert(Oo,qs._datatype));var vu=!tu(Oo,Bo),t1=qs._size[0],e1=qs._size[1],r1,a1,i1;if(js>e1){for(a1=e1;a1<js;a1++)if(qs._ptr[a1]=qs._values.length,vu)for(r1=0;r1<t1;r1++)qs._values.push(Oo),qs._index.push(r1);qs._ptr[js]=qs._values.length}else js<e1&&(qs._ptr.splice(js+1,e1-js),qs._values.splice(qs._ptr[js],qs._values.length),qs._index.splice(qs._ptr[js],qs._index.length));if(e1=js,zo>t1){if(vu){var s1=0;for(a1=0;a1<e1;a1++){qs._ptr[a1]=qs._ptr[a1]+s1,i1=qs._ptr[a1+1]+s1;var c1=0;for(r1=t1;r1<zo;r1++,c1++)qs._values.splice(i1+c1,0,Oo),qs._index.splice(i1+c1,0,r1),s1++}qs._ptr[e1]=qs._values.length}}else if(zo<t1){var h1=0;for(a1=0;a1<e1;a1++){qs._ptr[a1]=qs._ptr[a1]-h1;var m1=qs._ptr[a1],l1=qs._ptr[a1+1]-h1;for(i1=m1;i1<l1;i1++)r1=qs._index[i1],r1>zo-1&&(qs._values.splice(i1,1),qs._index.splice(i1,1),h1++)}qs._ptr[a1]=qs._values.length}return qs._size[0]=zo,qs._size[1]=js,qs}h.prototype.reshape=function(qs,zo){if(!isArray(qs))throw new TypeError("Array expected");if(qs.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");qs.forEach(function(d1){if(!isNumber(d1)||!isInteger$1(d1)||d1<=-2||d1===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+format$1(qs)+")")});var js=this._size[0]*this._size[1];qs=processSizesWildcard(qs,js);var eu=qs[0]*qs[1];if(js!==eu)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var Oo=zo?this.clone():this;if(this._size[0]===qs[0]&&this._size[1]===qs[1])return Oo;for(var tu=[],Bo=0;Bo<Oo._ptr.length;Bo++)for(var vu=0;vu<Oo._ptr[Bo+1]-Oo._ptr[Bo];vu++)tu.push(Bo);for(var t1=Oo._values.slice(),e1=Oo._index.slice(),r1=0;r1<Oo._index.length;r1++){var a1=e1[r1],i1=tu[r1],s1=a1*Oo._size[1]+i1;tu[r1]=s1%qs[1],e1[r1]=Math.floor(s1/qs[1])}Oo._values.length=0,Oo._index.length=0,Oo._ptr.length=qs[1]+1,Oo._size=qs.slice();for(var c1=0;c1<Oo._ptr.length;c1++)Oo._ptr[c1]=0;for(var h1=0;h1<t1.length;h1++){var m1=e1[h1],l1=tu[h1],f1=t1[h1],p1=j(m1,Oo._ptr[l1],Oo._ptr[l1+1],Oo._index);Lt(p1,m1,l1,f1,Oo._values,Oo._index,Oo._ptr)}return Oo},h.prototype.clone=function(){var qs=new h({values:this._values?clone$3(this._values):void 0,index:clone$3(this._index),ptr:clone$3(this._ptr),size:clone$3(this._size),datatype:this._datatype});return qs},h.prototype.size=function(){return this._size.slice(0)},h.prototype.map=function(qs,zo){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var js=this,eu=this._size[0],Oo=this._size[1],tu=optimizeCallback(qs,js,"map"),Bo=function(t1,e1,r1){return tu.fn(t1,[e1,r1],js)};return Jr(this,0,eu-1,0,Oo-1,Bo,zo)};function Jr(qs,zo,js,eu,Oo,tu,Bo){var vu=[],t1=[],e1=[],r1=o,a1=0;isString(qs._datatype)&&(r1=s.find(o,[qs._datatype,qs._datatype])||o,a1=s.convert(0,qs._datatype));for(var i1=function(o1,S1,v1){var B1=tu(o1,S1,v1);r1(B1,a1)||(vu.push(B1),t1.push(S1))},s1=eu;s1<=Oo;s1++){e1.push(vu.length);var c1=qs._ptr[s1],h1=qs._ptr[s1+1];if(Bo)for(var m1=c1;m1<h1;m1++){var l1=qs._index[m1];l1>=zo&&l1<=js&&i1(qs._values[m1],l1-zo,s1-eu)}else{for(var f1={},p1=c1;p1<h1;p1++){var d1=qs._index[p1];f1[d1]=qs._values[p1]}for(var b1=zo;b1<=js;b1++){var C1=b1 in f1?f1[b1]:0;i1(C1,b1-zo,s1-eu)}}}return e1.push(vu.length),new h({values:vu,index:t1,ptr:e1,size:[js-zo+1,Oo-eu+1]})}h.prototype.forEach=function(qs,zo){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var js=this,eu=this._size[0],Oo=this._size[1],tu=optimizeCallback(qs,js,"forEach"),Bo=0;Bo<Oo;Bo++){var vu=this._ptr[Bo],t1=this._ptr[Bo+1];if(zo)for(var e1=vu;e1<t1;e1++){var r1=this._index[e1];tu.fn(this._values[e1],[r1,Bo],js)}else{for(var a1={},i1=vu;i1<t1;i1++){var s1=this._index[i1];a1[s1]=this._values[i1]}for(var c1=0;c1<eu;c1++){var h1=c1 in a1?a1[c1]:0;tu.fn(h1,[c1,Bo],js)}}}},h.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var qs=this._size[1],zo=0;zo<qs;zo++)for(var js=this._ptr[zo],eu=this._ptr[zo+1],Oo=js;Oo<eu;Oo++){var tu=this._index[Oo];yield{value:this._values[Oo],index:[tu,zo]}}},h.prototype.toArray=function(){return Js(this._values,this._index,this._ptr,this._size,!0)},h.prototype.valueOf=function(){return Js(this._values,this._index,this._ptr,this._size,!1)};function Js(qs,zo,js,eu,Oo){var tu=eu[0],Bo=eu[1],vu=[],t1,e1;for(t1=0;t1<tu;t1++)for(vu[t1]=[],e1=0;e1<Bo;e1++)vu[t1][e1]=0;for(e1=0;e1<Bo;e1++)for(var r1=js[e1],a1=js[e1+1],i1=r1;i1<a1;i1++)t1=zo[i1],vu[t1][e1]=qs?Oo?clone$3(qs[i1]):qs[i1]:1;return vu}return h.prototype.format=function(qs){for(var zo=this._size[0],js=this._size[1],eu=this.density(),Oo="Sparse Matrix ["+format$1(zo,qs)+" x "+format$1(js,qs)+"] density: "+format$1(eu,qs)+`
`,tu=0;tu<js;tu++)for(var Bo=this._ptr[tu],vu=this._ptr[tu+1],t1=Bo;t1<vu;t1++){var e1=this._index[t1];Oo+=`
    (`+format$1(e1,qs)+", "+format$1(tu,qs)+") ==> "+(this._values?format$1(this._values[t1],qs):"X")}return Oo},h.prototype.toString=function(){return format$1(this.toArray())},h.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},h.prototype.diagonal=function(qs){if(qs){if(isBigNumber(qs)&&(qs=qs.toNumber()),!isNumber(qs)||!isInteger$1(qs))throw new TypeError("The parameter k must be an integer number")}else qs=0;var zo=qs>0?qs:0,js=qs<0?-qs:0,eu=this._size[0],Oo=this._size[1],tu=Math.min(eu-js,Oo-zo),Bo=[],vu=[],t1=[];t1[0]=0;for(var e1=zo;e1<Oo&&Bo.length<tu;e1++)for(var r1=this._ptr[e1],a1=this._ptr[e1+1],i1=r1;i1<a1;i1++){var s1=this._index[i1];if(s1===e1-zo+js){Bo.push(this._values[i1]),vu[Bo.length-1]=s1-js;break}}return t1.push(Bo.length),new h({values:Bo,index:vu,ptr:t1,size:[tu,1]})},h.fromJSON=function(qs){return new h(qs)},h.diagonal=function(qs,zo,js,eu,Oo){if(!isArray(qs))throw new TypeError("Array expected, size parameter");if(qs.length!==2)throw new Error("Only two dimensions matrix are supported");if(qs=qs.map(function(d1){if(isBigNumber(d1)&&(d1=d1.toNumber()),!isNumber(d1)||!isInteger$1(d1)||d1<1)throw new Error("Size values must be positive integers");return d1}),js){if(isBigNumber(js)&&(js=js.toNumber()),!isNumber(js)||!isInteger$1(js))throw new TypeError("The parameter k must be an integer number")}else js=0;var tu=o,Bo=0;isString(Oo)&&(tu=s.find(o,[Oo,Oo])||o,Bo=s.convert(0,Oo));var vu=js>0?js:0,t1=js<0?-js:0,e1=qs[0],r1=qs[1],a1=Math.min(e1-t1,r1-vu),i1;if(isArray(zo)){if(zo.length!==a1)throw new Error("Invalid value array length");i1=function(b1){return zo[b1]}}else if(isMatrix(zo)){var s1=zo.size();if(s1.length!==1||s1[0]!==a1)throw new Error("Invalid matrix length");i1=function(b1){return zo.get([b1])}}else i1=function(){return zo};for(var c1=[],h1=[],m1=[],l1=0;l1<r1;l1++){m1.push(c1.length);var f1=l1-vu;if(f1>=0&&f1<a1){var p1=i1(f1);tu(p1,Bo)||(h1.push(f1+t1),c1.push(p1))}}return m1.push(c1.length),new h({values:c1,index:h1,ptr:m1,size:[e1,r1]})},h.prototype.swapRows=function(qs,zo){if(!isNumber(qs)||!isInteger$1(qs)||!isNumber(zo)||!isInteger$1(zo))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(qs,this._size[0]),validateIndex(zo,this._size[0]),h._swapRows(qs,zo,this._size[1],this._values,this._index,this._ptr),this},h._forEachRow=function(qs,zo,js,eu,Oo){for(var tu=eu[qs],Bo=eu[qs+1],vu=tu;vu<Bo;vu++)Oo(js[vu],zo[vu])},h._swapRows=function(qs,zo,js,eu,Oo,tu){for(var Bo=0;Bo<js;Bo++){var vu=tu[Bo],t1=tu[Bo+1],e1=j(qs,vu,t1,Oo),r1=j(zo,vu,t1,Oo);if(e1<t1&&r1<t1&&Oo[e1]===qs&&Oo[r1]===zo){if(eu){var a1=eu[e1];eu[e1]=eu[r1],eu[r1]=a1}continue}if(e1<t1&&Oo[e1]===qs&&(r1>=t1||Oo[r1]!==zo)){var i1=eu?eu[e1]:void 0;Oo.splice(r1,0,zo),eu&&eu.splice(r1,0,i1),Oo.splice(r1<=e1?e1+1:e1,1),eu&&eu.splice(r1<=e1?e1+1:e1,1);continue}if(r1<t1&&Oo[r1]===zo&&(e1>=t1||Oo[e1]!==qs)){var s1=eu?eu[r1]:void 0;Oo.splice(e1,0,qs),eu&&eu.splice(e1,0,s1),Oo.splice(e1<=r1?r1+1:r1,1),eu&&eu.splice(e1<=r1?r1+1:r1,1)}}},h},{isClass:!0}),name$4H="number",dependencies$4H=["typed"];function getNonDecimalNumberParts(a){var s=a.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(s){var o={"0b":2,"0o":8,"0x":16}[s[1]],c=s[2],h=s[3];return{input:a,radix:o,integerPart:c,fractionalPart:h}}else return null}function makeNumberFromNonDecimalParts(a){for(var s=parseInt(a.integerPart,a.radix),o=0,c=0;c<a.fractionalPart.length;c++){var h=parseInt(a.fractionalPart[c],a.radix);o+=h/Math.pow(a.radix,c+1)}var d=s+o;if(isNaN(d))throw new SyntaxError('String "'+a.input+'" is not a valid number');return d}var createNumber=factory(name$4H,dependencies$4H,a=>{var{typed:s}=a,o=s("number",{"":function(){return 0},number:function(h){return h},string:function(h){if(h==="NaN")return NaN;var d=getNonDecimalNumberParts(h);if(d)return makeNumberFromNonDecimalParts(d);var b=0,_=h.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);_&&(b=Number(_[2]),h=_[1]);var $=Number(h);if(isNaN($))throw new SyntaxError('String "'+h+'" is not a valid number');if(_){if($>2**b-1)throw new SyntaxError('String "'.concat(h,'" is out of range'));$>=2**(b-1)&&($=$-2**b)}return $},BigNumber:function(h){return h.toNumber()},bigint:function(h){return Number(h)},Fraction:function(h){return h.valueOf()},Unit:s.referToSelf(c=>h=>{var d=h.clone();return d.value=c(h.value),d}),null:function(h){return 0},"Unit, string | Unit":function(h,d){return h.toNumber(d)},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))});return o.fromJSON=function(c){return parseFloat(c.value)},o}),name$4G="bigint",dependencies$4G=["typed"],createBigint=factory(name$4G,dependencies$4G,a=>{var{typed:s}=a,o=s("bigint",{"":function(){return 0n},bigint:function(h){return h},number:function(h){return BigInt(h.toFixed())},BigNumber:function(h){return BigInt(h.round().toString())},Fraction:function(h){return BigInt(h.valueOf().toFixed())},"string | boolean":function(h){return BigInt(h)},null:function(h){return 0n},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))});return o.fromJSON=function(c){return BigInt(c.value)},o}),name$4F="string",dependencies$4F=["typed"],createString=factory(name$4F,dependencies$4F,a=>{var{typed:s}=a;return s(name$4F,{"":function(){return""},number:format$3,null:function(c){return"null"},boolean:function(c){return c+""},string:function(c){return c},"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o)),any:function(c){return String(c)}})}),name$4E="boolean",dependencies$4E=["typed"],createBoolean=factory(name$4E,dependencies$4E,a=>{var{typed:s}=a;return s(name$4E,{"":function(){return!1},boolean:function(c){return c},number:function(c){return!!c},null:function(c){return!1},BigNumber:function(c){return!c.isZero()},string:function(c){var h=c.toLowerCase();if(h==="true")return!0;if(h==="false")return!1;var d=Number(c);if(c!==""&&!isNaN(d))return!!d;throw new Error('Cannot convert "'+c+'" to a boolean')},"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$4D="bignumber",dependencies$4D=["typed","BigNumber"],createBignumber=factory(name$4D,dependencies$4D,a=>{var{typed:s,BigNumber:o}=a;return s("bignumber",{"":function(){return new o(0)},number:function(h){return new o(h+"")},string:function(h){var d=h.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(d){var b=d[2],_=o(d[1]),$=new o(2).pow(Number(b));if(_.gt($.sub(1)))throw new SyntaxError('String "'.concat(h,'" is out of range'));var j=new o(2).pow(Number(b)-1);return _.gte(j)?_.sub($):_}return new o(h)},BigNumber:function(h){return h},bigint:function(h){return new o(h.toString())},Unit:s.referToSelf(c=>h=>{var d=h.clone();return d.value=c(h.value),d}),Fraction:function(h){return new o(String(h.n)).div(String(h.d)).times(String(h.s))},null:function(h){return new o(0)},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$4C="complex",dependencies$4C=["typed","Complex"],createComplex=factory(name$4C,dependencies$4C,a=>{var{typed:s,Complex:o}=a;return s("complex",{"":function(){return o.ZERO},number:function(h){return new o(h,0)},"number, number":function(h,d){return new o(h,d)},"BigNumber, BigNumber":function(h,d){return new o(h.toNumber(),d.toNumber())},Fraction:function(h){return new o(h.valueOf(),0)},Complex:function(h){return h.clone()},string:function(h){return o(h)},null:function(h){return o(0)},Object:function(h){if("re"in h&&"im"in h)return new o(h.re,h.im);if("r"in h&&"phi"in h||"abs"in h&&"arg"in h)return new o(h);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$4B="fraction",dependencies$4B=["typed","Fraction"],createFraction=factory(name$4B,dependencies$4B,a=>{var{typed:s,Fraction:o}=a;return s("fraction",{number:function(h){if(!Number.isFinite(h)||isNaN(h))throw new Error(h+" cannot be represented as a fraction");return new o(h)},string:function(h){return new o(h)},"number, number":function(h,d){return new o(h,d)},"bigint, bigint":function(h,d){return new o(h,d)},null:function(h){return new o(0)},BigNumber:function(h){return new o(h.toString())},bigint:function(h){return new o(h.toString())},Fraction:function(h){return h},Unit:s.referToSelf(c=>h=>{var d=h.clone();return d.value=c(h.value),d}),Object:function(h){return new o(h)},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$4A="matrix",dependencies$4A=["typed","Matrix","DenseMatrix","SparseMatrix"],createMatrix=factory(name$4A,dependencies$4A,a=>{var{typed:s,Matrix:o,DenseMatrix:c,SparseMatrix:h}=a;return s(name$4A,{"":function(){return d([])},string:function(_){return d([],_)},"string, string":function(_,$){return d([],_,$)},Array:function(_){return d(_)},Matrix:function(_){return d(_,_.storage())},"Array | Matrix, string":d,"Array | Matrix, string, string":d});function d(b,_,$){if(_==="dense"||_==="default"||_===void 0)return new c(b,$);if(_==="sparse")return new h(b,$);throw new TypeError("Unknown matrix type "+JSON.stringify(_)+".")}}),name$4z="matrixFromFunction",dependencies$4z=["typed","matrix","isZero"],createMatrixFromFunction=factory(name$4z,dependencies$4z,a=>{var{typed:s,matrix:o,isZero:c}=a;return s(name$4z,{"Array | Matrix, function, string, string":function(b,_,$,j){return h(b,_,$,j)},"Array | Matrix, function, string":function(b,_,$){return h(b,_,$)},"Matrix, function":function(b,_){return h(b,_,"dense")},"Array, function":function(b,_){return h(b,_,"dense").toArray()},"Array | Matrix, string, function":function(b,_,$){return h(b,$,_)},"Array | Matrix, string, string, function":function(b,_,$,j){return h(b,j,_,$)}});function h(d,b,_,$){var j;return $!==void 0?j=o(_,$):j=o(_),j.resize(d),j.forEach(function(Xt,Lt){var fr=b(Lt);c(fr)||j.set(Lt,fr)}),j}}),name$4y="matrixFromRows",dependencies$4y=["typed","matrix","flatten","size"],createMatrixFromRows=factory(name$4y,dependencies$4y,a=>{var{typed:s,matrix:o,flatten:c,size:h}=a;return s(name$4y,{"...Array":function($){return d($)},"...Matrix":function($){return o(d($.map(j=>j.toArray())))}});function d(_){if(_.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var $=b(_[0]),j=[];for(var Xt of _){var Lt=b(Xt);if(Lt!==$)throw new TypeError("The vectors had different length: "+($|0)+"  "+(Lt|0));j.push(c(Xt))}return j}function b(_){var $=h(_);if($.length===1)return $[0];if($.length===2){if($[0]===1)return $[1];if($[1]===1)return $[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),name$4x="matrixFromColumns",dependencies$4x=["typed","matrix","flatten","size"],createMatrixFromColumns=factory(name$4x,dependencies$4x,a=>{var{typed:s,matrix:o,flatten:c,size:h}=a;return s(name$4x,{"...Array":function($){return d($)},"...Matrix":function($){return o(d($.map(j=>j.toArray())))}});function d(_){if(_.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var $=b(_[0]),j=[],Xt=0;Xt<$;Xt++)j[Xt]=[];for(var Lt of _){var fr=b(Lt);if(fr!==$)throw new TypeError("The vectors had different length: "+($|0)+"  "+(fr|0));for(var Jr=c(Lt),Js=0;Js<$;Js++)j[Js].push(Jr[Js])}return j}function b(_){var $=h(_);if($.length===1)return $[0];if($.length===2){if($[0]===1)return $[1];if($[1]===1)return $[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),name$4w="splitUnit",dependencies$4w=["typed"],createSplitUnit=factory(name$4w,dependencies$4w,a=>{var{typed:s}=a;return s(name$4w,{"Unit, Array":function(c,h){return c.splitUnit(h)}})}),name$4v="unaryMinus",dependencies$4v=["typed"],createUnaryMinus=factory(name$4v,dependencies$4v,a=>{var{typed:s}=a;return s(name$4v,{number:unaryMinusNumber,"Complex | BigNumber | Fraction":o=>o.neg(),bigint:o=>-o,Unit:s.referToSelf(o=>c=>{var h=c.clone();return h.value=s.find(o,h.valueType())(c.value),h}),"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o,!0))})}),name$4u="unaryPlus",dependencies$4u=["typed","config","numeric"],createUnaryPlus=factory(name$4u,dependencies$4u,a=>{var{typed:s,config:o,numeric:c}=a;return s(name$4u,{number:unaryPlusNumber,Complex:function(d){return d},BigNumber:function(d){return d},bigint:function(d){return d},Fraction:function(d){return d},Unit:function(d){return d.clone()},"Array | Matrix":s.referToSelf(h=>d=>deepMap(d,h,!0)),boolean:function(d){return c(d?1:0,o.number)},string:function(d){return c(d,safeNumberType(d,o))}})}),name$4t="abs",dependencies$4t=["typed"],createAbs=factory(name$4t,dependencies$4t,a=>{var{typed:s}=a;return s(name$4t,{number:absNumber,"Complex | BigNumber | Fraction | Unit":o=>o.abs(),bigint:o=>o<0n?-o:o,"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o,!0))})}),name$4s="mapSlices",dependencies$4s=["typed","isInteger"],createMapSlices=factory(name$4s,dependencies$4s,a=>{var{typed:s,isInteger:o}=a;return s(name$4s,{"Array | Matrix, number | BigNumber, function":function(h,d,b){if(!o(d))throw new TypeError("Integer number expected for dimension");var _=Array.isArray(h)?arraySize(h):h.size();if(d<0||d>=_.length)throw new IndexError(d,_.length);return isMatrix(h)?h.create(_mapSlices(h.valueOf(),d,b),h.datatype()):_mapSlices(h,d,b)}})},{formerly:"apply"});function _mapSlices(a,s,o){var c,h,d;if(s<=0)if(Array.isArray(a[0])){for(d=_switch(a),h=[],c=0;c<d.length;c++)h[c]=_mapSlices(d[c],s-1,o);return h}else return o(a);else{for(h=[],c=0;c<a.length;c++)h[c]=_mapSlices(a[c],s-1,o);return h}}function _switch(a){var s=a.length,o=a[0].length,c,h,d=[];for(h=0;h<o;h++){var b=[];for(c=0;c<s;c++)b.push(a[c][h]);d.push(b)}return d}var name$4r="addScalar",dependencies$4r=["typed"],createAddScalar=factory(name$4r,dependencies$4r,a=>{var{typed:s}=a;return s(name$4r,{"number, number":addNumber,"Complex, Complex":function(c,h){return c.add(h)},"BigNumber, BigNumber":function(c,h){return c.plus(h)},"bigint, bigint":function(c,h){return c+h},"Fraction, Fraction":function(c,h){return c.add(h)},"Unit, Unit":s.referToSelf(o=>(c,h)=>{if(c.value===null||c.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(h.value===null||h.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!c.equalBase(h))throw new Error("Units do not match");var d=c.clone();return d.value=s.find(o,[d.valueType(),h.valueType()])(d.value,h.value),d.fixPrefix=!1,d})})}),name$4q="subtractScalar",dependencies$4q=["typed"],createSubtractScalar=factory(name$4q,dependencies$4q,a=>{var{typed:s}=a;return s(name$4q,{"number, number":subtractNumber,"Complex, Complex":function(c,h){return c.sub(h)},"BigNumber, BigNumber":function(c,h){return c.minus(h)},"bigint, bigint":function(c,h){return c-h},"Fraction, Fraction":function(c,h){return c.sub(h)},"Unit, Unit":s.referToSelf(o=>(c,h)=>{if(c.value===null||c.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(h.value===null||h.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!c.equalBase(h))throw new Error("Units do not match");var d=c.clone();return d.value=s.find(o,[d.valueType(),h.valueType()])(d.value,h.value),d.fixPrefix=!1,d})})}),name$4p="cbrt",dependencies$4p=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],createCbrt=factory(name$4p,dependencies$4p,a=>{var{config:s,typed:o,isNegative:c,unaryMinus:h,matrix:d,Complex:b,BigNumber:_,Fraction:$}=a;return o(name$4p,{number:cbrtNumber,Complex:j,"Complex, boolean":j,BigNumber:function(fr){return fr.cbrt()},Unit:Xt});function j(Lt,fr){var Jr=Lt.arg()/3,Js=Lt.abs(),qs=new b(cbrtNumber(Js),0).mul(new b(0,Jr).exp());if(fr){var zo=[qs,new b(cbrtNumber(Js),0).mul(new b(0,Jr+Math.PI*2/3).exp()),new b(cbrtNumber(Js),0).mul(new b(0,Jr-Math.PI*2/3).exp())];return s.matrix==="Array"?zo:d(zo)}else return qs}function Xt(Lt){if(Lt.value&&isComplex(Lt.value)){var fr=Lt.clone();return fr.value=1,fr=fr.pow(1/3),fr.value=j(Lt.value),fr}else{var Jr=c(Lt.value);Jr&&(Lt.value=h(Lt.value));var Js;isBigNumber(Lt.value)?Js=new _(1).div(3):isFraction(Lt.value)?Js=new $(1,3):Js=1/3;var qs=Lt.pow(Js);return Jr&&(qs.value=h(qs.value)),qs}}}),name$4o="matAlgo11xS0s",dependencies$4o=["typed","equalScalar"],createMatAlgo11xS0s=factory(name$4o,dependencies$4o,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b,_){var $=h._values,j=h._index,Xt=h._ptr,Lt=h._size,fr=h._datatype;if(!$)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var Jr=Lt[0],Js=Lt[1],qs,zo=o,js=0,eu=b;typeof fr=="string"&&(qs=fr,zo=s.find(o,[qs,qs]),js=s.convert(0,qs),d=s.convert(d,qs),eu=s.find(b,[qs,qs]));for(var Oo=[],tu=[],Bo=[],vu=0;vu<Js;vu++){Bo[vu]=tu.length;for(var t1=Xt[vu],e1=Xt[vu+1],r1=t1;r1<e1;r1++){var a1=j[r1],i1=_?eu(d,$[r1]):eu($[r1],d);zo(i1,js)||(tu.push(a1),Oo.push(i1))}}return Bo[Js]=tu.length,h.createSparseMatrix({values:Oo,index:tu,ptr:Bo,size:[Jr,Js],datatype:qs})}}),name$4n="matAlgo12xSfs",dependencies$4n=["typed","DenseMatrix"],createMatAlgo12xSfs=factory(name$4n,dependencies$4n,a=>{var{typed:s,DenseMatrix:o}=a;return function(h,d,b,_){var $=h._values,j=h._index,Xt=h._ptr,Lt=h._size,fr=h._datatype;if(!$)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var Jr=Lt[0],Js=Lt[1],qs,zo=b;typeof fr=="string"&&(qs=fr,d=s.convert(d,qs),zo=s.find(b,[qs,qs]));for(var js=[],eu=[],Oo=[],tu=0;tu<Js;tu++){for(var Bo=tu+1,vu=Xt[tu],t1=Xt[tu+1],e1=vu;e1<t1;e1++){var r1=j[e1];eu[r1]=$[e1],Oo[r1]=Bo}for(var a1=0;a1<Jr;a1++)tu===0&&(js[a1]=[]),Oo[a1]===Bo?js[a1][tu]=_?zo(d,eu[a1]):zo(eu[a1],d):js[a1][tu]=_?zo(d,0):zo(0,d)}return new o({data:js,size:[Jr,Js],datatype:qs})}}),name$4m="matAlgo14xDs",dependencies$4m=["typed"],createMatAlgo14xDs=factory(name$4m,dependencies$4m,a=>{var{typed:s}=a;return function(h,d,b,_){var $=h._data,j=h._size,Xt=h._datatype,Lt,fr=b;typeof Xt=="string"&&(Lt=Xt,d=s.convert(d,Lt),fr=s.find(b,[Lt,Lt]));var Jr=j.length>0?o(fr,0,j,j[0],$,d,_):[];return h.createDenseMatrix({data:Jr,size:clone$3(j),datatype:Lt})};function o(c,h,d,b,_,$,j){var Xt=[];if(h===d.length-1)for(var Lt=0;Lt<b;Lt++)Xt[Lt]=j?c($,_[Lt]):c(_[Lt],$);else for(var fr=0;fr<b;fr++)Xt[fr]=o(c,h+1,d,d[h+1],_[fr],$,j);return Xt}}),name$4l="ceil",dependencies$4l=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],bigTen$1=new Decimal(10),createCeilNumber=factory(name$4l,["typed","config","round"],a=>{var{typed:s,config:o,round:c}=a;function h(d){var b=Math.ceil(d),_=c(d);return b===_?b:nearlyEqual$1(d,_,o.relTol,o.absTol)&&!nearlyEqual$1(d,b,o.relTol,o.absTol)?_:b}return s(name$4l,{number:h,"number, number":function(b,_){if(!isInteger$1(_))throw new RangeError("number of decimals in function ceil must be an integer");if(_<0||_>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var $=10**_;return h(b*$)/$}})}),createCeil=factory(name$4l,dependencies$4l,a=>{var{typed:s,config:o,round:c,matrix:h,equalScalar:d,zeros:b,DenseMatrix:_}=a,$=createMatAlgo11xS0s({typed:s,equalScalar:d}),j=createMatAlgo12xSfs({typed:s,DenseMatrix:_}),Xt=createMatAlgo14xDs({typed:s}),Lt=createCeilNumber({typed:s,config:o,round:c});function fr(Jr){var Js=(js,eu)=>nearlyEqual(js,eu,o.relTol,o.absTol),qs=Jr.ceil(),zo=c(Jr);return qs.eq(zo)?qs:Js(Jr,zo)&&!Js(Jr,qs)?zo:qs}return s("ceil",{number:Lt.signatures.number,"number,number":Lt.signatures["number,number"],Complex:function(Js){return Js.ceil()},"Complex, number":function(Js,qs){return Js.ceil(qs)},"Complex, BigNumber":function(Js,qs){return Js.ceil(qs.toNumber())},BigNumber:fr,"BigNumber, BigNumber":function(Js,qs){var zo=bigTen$1.pow(qs);return fr(Js.mul(zo)).div(zo)},bigint:Jr=>Jr,"bigint, number":(Jr,Js)=>Jr,"bigint, BigNumber":(Jr,Js)=>Jr,Fraction:function(Js){return Js.ceil()},"Fraction, number":function(Js,qs){return Js.ceil(qs)},"Fraction, BigNumber":function(Js,qs){return Js.ceil(qs.toNumber())},"Unit, number, Unit":s.referToSelf(Jr=>function(Js,qs,zo){var js=Js.toNumeric(zo);return zo.multiply(Jr(js,qs))}),"Unit, BigNumber, Unit":s.referToSelf(Jr=>(Js,qs,zo)=>Jr(Js,qs.toNumber(),zo)),"Array | Matrix, number | BigNumber, Unit":s.referToSelf(Jr=>(Js,qs,zo)=>deepMap(Js,js=>Jr(js,qs,zo),!0)),"Array | Matrix | Unit, Unit":s.referToSelf(Jr=>(Js,qs)=>Jr(Js,0,qs)),"Array | Matrix":s.referToSelf(Jr=>Js=>deepMap(Js,Jr,!0)),"Array, number | BigNumber":s.referToSelf(Jr=>(Js,qs)=>deepMap(Js,zo=>Jr(zo,qs),!0)),"SparseMatrix, number | BigNumber":s.referToSelf(Jr=>(Js,qs)=>$(Js,qs,Jr,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(Jr=>(Js,qs)=>Xt(Js,qs,Jr,!1)),"number | Complex | Fraction | BigNumber, Array":s.referToSelf(Jr=>(Js,qs)=>Xt(h(qs),Js,Jr,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":s.referToSelf(Jr=>(Js,qs)=>d(Js,0)?b(qs.size(),qs.storage()):qs.storage()==="dense"?Xt(qs,Js,Jr,!0):j(qs,Js,Jr,!0))})}),name$4k="cube",dependencies$4k=["typed"],createCube=factory(name$4k,dependencies$4k,a=>{var{typed:s}=a;return s(name$4k,{number:cubeNumber,Complex:function(c){return c.mul(c).mul(c)},BigNumber:function(c){return c.times(c).times(c)},bigint:function(c){return c*c*c},Fraction:function(c){return c.pow(3)},Unit:function(c){return c.pow(3)}})}),name$4j="exp",dependencies$4j=["typed"],createExp=factory(name$4j,dependencies$4j,a=>{var{typed:s}=a;return s(name$4j,{number:expNumber,Complex:function(c){return c.exp()},BigNumber:function(c){return c.exp()}})}),name$4i="expm1",dependencies$4i=["typed","Complex"],createExpm1=factory(name$4i,dependencies$4i,a=>{var{typed:s,Complex:o}=a;return s(name$4i,{number:expm1Number,Complex:function(h){var d=Math.exp(h.re);return new o(d*Math.cos(h.im)-1,d*Math.sin(h.im))},BigNumber:function(h){return h.exp().minus(1)}})}),name$4h="fix",dependencies$4h=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],createFixNumber=factory(name$4h,["typed","ceil","floor"],a=>{var{typed:s,ceil:o,floor:c}=a;return s(name$4h,{number:function(d){return d>0?c(d):o(d)},"number, number":function(d,b){return d>0?c(d,b):o(d,b)}})}),createFix=factory(name$4h,dependencies$4h,a=>{var{typed:s,Complex:o,matrix:c,ceil:h,floor:d,equalScalar:b,zeros:_,DenseMatrix:$}=a,j=createMatAlgo12xSfs({typed:s,DenseMatrix:$}),Xt=createMatAlgo14xDs({typed:s}),Lt=createFixNumber({typed:s,ceil:h,floor:d});return s("fix",{number:Lt.signatures.number,"number, number | BigNumber":Lt.signatures["number,number"],Complex:function(Jr){return new o(Jr.re>0?Math.floor(Jr.re):Math.ceil(Jr.re),Jr.im>0?Math.floor(Jr.im):Math.ceil(Jr.im))},"Complex, number":function(Jr,Js){return new o(Jr.re>0?d(Jr.re,Js):h(Jr.re,Js),Jr.im>0?d(Jr.im,Js):h(Jr.im,Js))},"Complex, BigNumber":function(Jr,Js){var qs=Js.toNumber();return new o(Jr.re>0?d(Jr.re,qs):h(Jr.re,qs),Jr.im>0?d(Jr.im,qs):h(Jr.im,qs))},BigNumber:function(Jr){return Jr.isNegative()?h(Jr):d(Jr)},"BigNumber, number | BigNumber":function(Jr,Js){return Jr.isNegative()?h(Jr,Js):d(Jr,Js)},bigint:fr=>fr,"bigint, number":(fr,Jr)=>fr,"bigint, BigNumber":(fr,Jr)=>fr,Fraction:function(Jr){return Jr.s<0n?Jr.ceil():Jr.floor()},"Fraction, number | BigNumber":function(Jr,Js){return Jr.s<0n?h(Jr,Js):d(Jr,Js)},"Unit, number, Unit":s.referToSelf(fr=>function(Jr,Js,qs){var zo=Jr.toNumeric(qs);return qs.multiply(fr(zo,Js))}),"Unit, BigNumber, Unit":s.referToSelf(fr=>(Jr,Js,qs)=>fr(Jr,Js.toNumber(),qs)),"Array | Matrix, number | BigNumber, Unit":s.referToSelf(fr=>(Jr,Js,qs)=>deepMap(Jr,zo=>fr(zo,Js,qs),!0)),"Array | Matrix | Unit, Unit":s.referToSelf(fr=>(Jr,Js)=>fr(Jr,0,Js)),"Array | Matrix":s.referToSelf(fr=>Jr=>deepMap(Jr,fr,!0)),"Array | Matrix, number | BigNumber":s.referToSelf(fr=>(Jr,Js)=>deepMap(Jr,qs=>fr(qs,Js),!0)),"number | Complex | Fraction | BigNumber, Array":s.referToSelf(fr=>(Jr,Js)=>Xt(c(Js),Jr,fr,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":s.referToSelf(fr=>(Jr,Js)=>b(Jr,0)?_(Js.size(),Js.storage()):Js.storage()==="dense"?Xt(Js,Jr,fr,!0):j(Js,Jr,fr,!0))})}),name$4g="floor",dependencies$4g=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],bigTen=new Decimal(10),createFloorNumber=factory(name$4g,["typed","config","round"],a=>{var{typed:s,config:o,round:c}=a;function h(d){var b=Math.floor(d),_=c(d);return b===_?b:nearlyEqual$1(d,_,o.relTol,o.absTol)&&!nearlyEqual$1(d,b,o.relTol,o.absTol)?_:b}return s(name$4g,{number:h,"number, number":function(b,_){if(!isInteger$1(_))throw new RangeError("number of decimals in function floor must be an integer");if(_<0||_>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var $=10**_;return h(b*$)/$}})}),createFloor=factory(name$4g,dependencies$4g,a=>{var{typed:s,config:o,round:c,matrix:h,equalScalar:d,zeros:b,DenseMatrix:_}=a,$=createMatAlgo11xS0s({typed:s,equalScalar:d}),j=createMatAlgo12xSfs({typed:s,DenseMatrix:_}),Xt=createMatAlgo14xDs({typed:s}),Lt=createFloorNumber({typed:s,config:o,round:c});function fr(Jr){var Js=(js,eu)=>nearlyEqual(js,eu,o.relTol,o.absTol),qs=Jr.floor(),zo=c(Jr);return qs.eq(zo)?qs:Js(Jr,zo)&&!Js(Jr,qs)?zo:qs}return s("floor",{number:Lt.signatures.number,"number,number":Lt.signatures["number,number"],Complex:function(Js){return Js.floor()},"Complex, number":function(Js,qs){return Js.floor(qs)},"Complex, BigNumber":function(Js,qs){return Js.floor(qs.toNumber())},BigNumber:fr,"BigNumber, BigNumber":function(Js,qs){var zo=bigTen.pow(qs);return fr(Js.mul(zo)).div(zo)},bigint:Jr=>Jr,"bigint, number":(Jr,Js)=>Jr,"bigint, BigNumber":(Jr,Js)=>Jr,Fraction:function(Js){return Js.floor()},"Fraction, number":function(Js,qs){return Js.floor(qs)},"Fraction, BigNumber":function(Js,qs){return Js.floor(qs.toNumber())},"Unit, number, Unit":s.referToSelf(Jr=>function(Js,qs,zo){var js=Js.toNumeric(zo);return zo.multiply(Jr(js,qs))}),"Unit, BigNumber, Unit":s.referToSelf(Jr=>(Js,qs,zo)=>Jr(Js,qs.toNumber(),zo)),"Array | Matrix, number | BigNumber, Unit":s.referToSelf(Jr=>(Js,qs,zo)=>deepMap(Js,js=>Jr(js,qs,zo),!0)),"Array | Matrix | Unit, Unit":s.referToSelf(Jr=>(Js,qs)=>Jr(Js,0,qs)),"Array | Matrix":s.referToSelf(Jr=>Js=>deepMap(Js,Jr,!0)),"Array, number | BigNumber":s.referToSelf(Jr=>(Js,qs)=>deepMap(Js,zo=>Jr(zo,qs),!0)),"SparseMatrix, number | BigNumber":s.referToSelf(Jr=>(Js,qs)=>$(Js,qs,Jr,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(Jr=>(Js,qs)=>Xt(Js,qs,Jr,!1)),"number | Complex | Fraction | BigNumber, Array":s.referToSelf(Jr=>(Js,qs)=>Xt(h(qs),Js,Jr,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":s.referToSelf(Jr=>(Js,qs)=>d(Js,0)?b(qs.size(),qs.storage()):qs.storage()==="dense"?Xt(qs,Js,Jr,!0):j(qs,Js,Jr,!0))})}),name$4f="matAlgo02xDS0",dependencies$4f=["typed","equalScalar"],createMatAlgo02xDS0=factory(name$4f,dependencies$4f,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b,_){var $=h._data,j=h._size,Xt=h._datatype||h.getDataType(),Lt=d._values,fr=d._index,Jr=d._ptr,Js=d._size,qs=d._datatype||d._data===void 0?d._datatype:d.getDataType();if(j.length!==Js.length)throw new DimensionError(j.length,Js.length);if(j[0]!==Js[0]||j[1]!==Js[1])throw new RangeError("Dimension mismatch. Matrix A ("+j+") must match Matrix B ("+Js+")");if(!Lt)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var zo=j[0],js=j[1],eu,Oo=o,tu=0,Bo=b;typeof Xt=="string"&&Xt===qs&&Xt!=="mixed"&&(eu=Xt,Oo=s.find(o,[eu,eu]),tu=s.convert(0,eu),Bo=s.find(b,[eu,eu]));for(var vu=[],t1=[],e1=[],r1=0;r1<js;r1++){e1[r1]=t1.length;for(var a1=Jr[r1],i1=Jr[r1+1],s1=a1;s1<i1;s1++){var c1=fr[s1],h1=_?Bo(Lt[s1],$[c1][r1]):Bo($[c1][r1],Lt[s1]);Oo(h1,tu)||(t1.push(c1),vu.push(h1))}}return e1[js]=t1.length,d.createSparseMatrix({values:vu,index:t1,ptr:e1,size:[zo,js],datatype:Xt===h._datatype&&qs===d._datatype?eu:void 0})}}),name$4e="matAlgo03xDSf",dependencies$4e=["typed"],createMatAlgo03xDSf=factory(name$4e,dependencies$4e,a=>{var{typed:s}=a;return function(c,h,d,b){var _=c._data,$=c._size,j=c._datatype||c.getDataType(),Xt=h._values,Lt=h._index,fr=h._ptr,Jr=h._size,Js=h._datatype||h._data===void 0?h._datatype:h.getDataType();if($.length!==Jr.length)throw new DimensionError($.length,Jr.length);if($[0]!==Jr[0]||$[1]!==Jr[1])throw new RangeError("Dimension mismatch. Matrix A ("+$+") must match Matrix B ("+Jr+")");if(!Xt)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var qs=$[0],zo=$[1],js,eu=0,Oo=d;typeof j=="string"&&j===Js&&j!=="mixed"&&(js=j,eu=s.convert(0,js),Oo=s.find(d,[js,js]));for(var tu=[],Bo=0;Bo<qs;Bo++)tu[Bo]=[];for(var vu=[],t1=[],e1=0;e1<zo;e1++){for(var r1=e1+1,a1=fr[e1],i1=fr[e1+1],s1=a1;s1<i1;s1++){var c1=Lt[s1];vu[c1]=b?Oo(Xt[s1],_[c1][e1]):Oo(_[c1][e1],Xt[s1]),t1[c1]=r1}for(var h1=0;h1<qs;h1++)t1[h1]===r1?tu[h1][e1]=vu[h1]:tu[h1][e1]=b?Oo(eu,_[h1][e1]):Oo(_[h1][e1],eu)}return c.createDenseMatrix({data:tu,size:[qs,zo],datatype:j===c._datatype&&Js===h._datatype?js:void 0})}}),name$4d="matAlgo05xSfSf",dependencies$4d=["typed","equalScalar"],createMatAlgo05xSfSf=factory(name$4d,dependencies$4d,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b){var _=h._values,$=h._index,j=h._ptr,Xt=h._size,Lt=h._datatype||h._data===void 0?h._datatype:h.getDataType(),fr=d._values,Jr=d._index,Js=d._ptr,qs=d._size,zo=d._datatype||d._data===void 0?d._datatype:d.getDataType();if(Xt.length!==qs.length)throw new DimensionError(Xt.length,qs.length);if(Xt[0]!==qs[0]||Xt[1]!==qs[1])throw new RangeError("Dimension mismatch. Matrix A ("+Xt+") must match Matrix B ("+qs+")");var js=Xt[0],eu=Xt[1],Oo,tu=o,Bo=0,vu=b;typeof Lt=="string"&&Lt===zo&&Lt!=="mixed"&&(Oo=Lt,tu=s.find(o,[Oo,Oo]),Bo=s.convert(0,Oo),vu=s.find(b,[Oo,Oo]));var t1=_&&fr?[]:void 0,e1=[],r1=[],a1=t1?[]:void 0,i1=t1?[]:void 0,s1=[],c1=[],h1,m1,l1,f1;for(m1=0;m1<eu;m1++){r1[m1]=e1.length;var p1=m1+1;for(l1=j[m1],f1=j[m1+1];l1<f1;l1++)h1=$[l1],e1.push(h1),s1[h1]=p1,a1&&(a1[h1]=_[l1]);for(l1=Js[m1],f1=Js[m1+1];l1<f1;l1++)h1=Jr[l1],s1[h1]!==p1&&e1.push(h1),c1[h1]=p1,i1&&(i1[h1]=fr[l1]);if(t1)for(l1=r1[m1];l1<e1.length;){h1=e1[l1];var d1=s1[h1],b1=c1[h1];if(d1===p1||b1===p1){var C1=d1===p1?a1[h1]:Bo,g1=b1===p1?i1[h1]:Bo,o1=vu(C1,g1);tu(o1,Bo)?e1.splice(l1,1):(t1.push(o1),l1++)}}}return r1[eu]=e1.length,h.createSparseMatrix({values:t1,index:e1,ptr:r1,size:[js,eu],datatype:Lt===h._datatype&&zo===d._datatype?Oo:void 0})}}),name$4c="matAlgo13xDD",dependencies$4c=["typed"],createMatAlgo13xDD=factory(name$4c,dependencies$4c,a=>{var{typed:s}=a;return function(h,d,b){var _=h._data,$=h._size,j=h._datatype,Xt=d._data,Lt=d._size,fr=d._datatype,Jr=[];if($.length!==Lt.length)throw new DimensionError($.length,Lt.length);for(var Js=0;Js<$.length;Js++){if($[Js]!==Lt[Js])throw new RangeError("Dimension mismatch. Matrix A ("+$+") must match Matrix B ("+Lt+")");Jr[Js]=$[Js]}var qs,zo=b;typeof j=="string"&&j===fr&&(qs=j,zo=s.find(b,[qs,qs]));var js=Jr.length>0?o(zo,0,Jr,Jr[0],_,Xt):[];return h.createDenseMatrix({data:js,size:Jr,datatype:qs})};function o(c,h,d,b,_,$){var j=[];if(h===d.length-1)for(var Xt=0;Xt<b;Xt++)j[Xt]=c(_[Xt],$[Xt]);else for(var Lt=0;Lt<b;Lt++)j[Lt]=o(c,h+1,d,d[h+1],_[Lt],$[Lt]);return j}});function broadcast(a,s){if(deepStrictEqual(a.size(),s.size()))return[a,s];var o=broadcastSizes(a.size(),s.size());return[a,s].map(c=>_broadcastTo(c,o))}function _broadcastTo(a,s){return deepStrictEqual(a.size(),s)?a:a.create(broadcastTo(a.valueOf(),s),a.datatype())}var name$4b="matrixAlgorithmSuite",dependencies$4b=["typed","matrix"],createMatrixAlgorithmSuite=factory(name$4b,dependencies$4b,a=>{var{typed:s,matrix:o}=a,c=createMatAlgo13xDD({typed:s}),h=createMatAlgo14xDs({typed:s});return function(b){var _=b.elop,$=b.SD||b.DS,j;_?(j={"DenseMatrix, DenseMatrix":(Jr,Js)=>c(...broadcast(Jr,Js),_),"Array, Array":(Jr,Js)=>c(...broadcast(o(Jr),o(Js)),_).valueOf(),"Array, DenseMatrix":(Jr,Js)=>c(...broadcast(o(Jr),Js),_),"DenseMatrix, Array":(Jr,Js)=>c(...broadcast(Jr,o(Js)),_)},b.SS&&(j["SparseMatrix, SparseMatrix"]=(Jr,Js)=>b.SS(...broadcast(Jr,Js),_,!1)),b.DS&&(j["DenseMatrix, SparseMatrix"]=(Jr,Js)=>b.DS(...broadcast(Jr,Js),_,!1),j["Array, SparseMatrix"]=(Jr,Js)=>b.DS(...broadcast(o(Jr),Js),_,!1)),$&&(j["SparseMatrix, DenseMatrix"]=(Jr,Js)=>$(...broadcast(Js,Jr),_,!0),j["SparseMatrix, Array"]=(Jr,Js)=>$(...broadcast(o(Js),Jr),_,!0))):(j={"DenseMatrix, DenseMatrix":s.referToSelf(Jr=>(Js,qs)=>c(...broadcast(Js,qs),Jr)),"Array, Array":s.referToSelf(Jr=>(Js,qs)=>c(...broadcast(o(Js),o(qs)),Jr).valueOf()),"Array, DenseMatrix":s.referToSelf(Jr=>(Js,qs)=>c(...broadcast(o(Js),qs),Jr)),"DenseMatrix, Array":s.referToSelf(Jr=>(Js,qs)=>c(...broadcast(Js,o(qs)),Jr))},b.SS&&(j["SparseMatrix, SparseMatrix"]=s.referToSelf(Jr=>(Js,qs)=>b.SS(...broadcast(Js,qs),Jr,!1))),b.DS&&(j["DenseMatrix, SparseMatrix"]=s.referToSelf(Jr=>(Js,qs)=>b.DS(...broadcast(Js,qs),Jr,!1)),j["Array, SparseMatrix"]=s.referToSelf(Jr=>(Js,qs)=>b.DS(...broadcast(o(Js),qs),Jr,!1))),$&&(j["SparseMatrix, DenseMatrix"]=s.referToSelf(Jr=>(Js,qs)=>$(...broadcast(qs,Js),Jr,!0)),j["SparseMatrix, Array"]=s.referToSelf(Jr=>(Js,qs)=>$(...broadcast(o(qs),Js),Jr,!0))));var Xt=b.scalar||"any",Lt=b.Ds||b.Ss;Lt&&(_?(j["DenseMatrix,"+Xt]=(Jr,Js)=>h(Jr,Js,_,!1),j[Xt+", DenseMatrix"]=(Jr,Js)=>h(Js,Jr,_,!0),j["Array,"+Xt]=(Jr,Js)=>h(o(Jr),Js,_,!1).valueOf(),j[Xt+", Array"]=(Jr,Js)=>h(o(Js),Jr,_,!0).valueOf()):(j["DenseMatrix,"+Xt]=s.referToSelf(Jr=>(Js,qs)=>h(Js,qs,Jr,!1)),j[Xt+", DenseMatrix"]=s.referToSelf(Jr=>(Js,qs)=>h(qs,Js,Jr,!0)),j["Array,"+Xt]=s.referToSelf(Jr=>(Js,qs)=>h(o(Js),qs,Jr,!1).valueOf()),j[Xt+", Array"]=s.referToSelf(Jr=>(Js,qs)=>h(o(qs),Js,Jr,!0).valueOf())));var fr=b.sS!==void 0?b.sS:b.Ss;return _?(b.Ss&&(j["SparseMatrix,"+Xt]=(Jr,Js)=>b.Ss(Jr,Js,_,!1)),fr&&(j[Xt+", SparseMatrix"]=(Jr,Js)=>fr(Js,Jr,_,!0))):(b.Ss&&(j["SparseMatrix,"+Xt]=s.referToSelf(Jr=>(Js,qs)=>b.Ss(Js,qs,Jr,!1))),fr&&(j[Xt+", SparseMatrix"]=s.referToSelf(Jr=>(Js,qs)=>fr(qs,Js,Jr,!0)))),_&&_.signatures&&extend(j,_.signatures),j}}),name$4a="mod",dependencies$4a=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],createMod=factory(name$4a,dependencies$4a,a=>{var{typed:s,config:o,round:c,matrix:h,equalScalar:d,zeros:b,DenseMatrix:_,concat:$}=a,j=createFloor({typed:s,config:o,round:c,matrix:h,equalScalar:d,zeros:b,DenseMatrix:_}),Xt=createMatAlgo02xDS0({typed:s,equalScalar:d}),Lt=createMatAlgo03xDSf({typed:s}),fr=createMatAlgo05xSfSf({typed:s,equalScalar:d}),Jr=createMatAlgo11xS0s({typed:s,equalScalar:d}),Js=createMatAlgo12xSfs({typed:s,DenseMatrix:_}),qs=createMatrixAlgorithmSuite({typed:s,matrix:h,concat:$});return s(name$4a,{"number, number":zo,"BigNumber, BigNumber":function(eu,Oo){return Oo.isZero()?eu:eu.sub(Oo.mul(j(eu.div(Oo))))},"bigint, bigint":function(eu,Oo){if(Oo===0n)return eu;if(eu<0){var tu=eu%Oo;return tu===0n?tu:tu+Oo}return eu%Oo},"Fraction, Fraction":function(eu,Oo){return Oo.equals(0)?eu:eu.sub(Oo.mul(j(eu.div(Oo))))}},qs({SS:fr,DS:Lt,SD:Xt,Ss:Jr,sS:Js}));function zo(js,eu){return eu===0?js:js-eu*j(js/eu)}}),name$49="matAlgo01xDSid",dependencies$49=["typed"],createMatAlgo01xDSid=factory(name$49,dependencies$49,a=>{var{typed:s}=a;return function(c,h,d,b){var _=c._data,$=c._size,j=c._datatype||c.getDataType(),Xt=h._values,Lt=h._index,fr=h._ptr,Jr=h._size,Js=h._datatype||h._data===void 0?h._datatype:h.getDataType();if($.length!==Jr.length)throw new DimensionError($.length,Jr.length);if($[0]!==Jr[0]||$[1]!==Jr[1])throw new RangeError("Dimension mismatch. Matrix A ("+$+") must match Matrix B ("+Jr+")");if(!Xt)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var qs=$[0],zo=$[1],js=typeof j=="string"&&j!=="mixed"&&j===Js?j:void 0,eu=js?s.find(d,[js,js]):d,Oo,tu,Bo=[];for(Oo=0;Oo<qs;Oo++)Bo[Oo]=[];var vu=[],t1=[];for(tu=0;tu<zo;tu++){for(var e1=tu+1,r1=fr[tu],a1=fr[tu+1],i1=r1;i1<a1;i1++)Oo=Lt[i1],vu[Oo]=b?eu(Xt[i1],_[Oo][tu]):eu(_[Oo][tu],Xt[i1]),t1[Oo]=e1;for(Oo=0;Oo<qs;Oo++)t1[Oo]===e1?Bo[Oo][tu]=vu[Oo]:Bo[Oo][tu]=_[Oo][tu]}return c.createDenseMatrix({data:Bo,size:[qs,zo],datatype:j===c._datatype&&Js===h._datatype?js:void 0})}}),name$48="matAlgo04xSidSid",dependencies$48=["typed","equalScalar"],createMatAlgo04xSidSid=factory(name$48,dependencies$48,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b){var _=h._values,$=h._index,j=h._ptr,Xt=h._size,Lt=h._datatype||h._data===void 0?h._datatype:h.getDataType(),fr=d._values,Jr=d._index,Js=d._ptr,qs=d._size,zo=d._datatype||d._data===void 0?d._datatype:d.getDataType();if(Xt.length!==qs.length)throw new DimensionError(Xt.length,qs.length);if(Xt[0]!==qs[0]||Xt[1]!==qs[1])throw new RangeError("Dimension mismatch. Matrix A ("+Xt+") must match Matrix B ("+qs+")");var js=Xt[0],eu=Xt[1],Oo,tu=o,Bo=0,vu=b;typeof Lt=="string"&&Lt===zo&&Lt!=="mixed"&&(Oo=Lt,tu=s.find(o,[Oo,Oo]),Bo=s.convert(0,Oo),vu=s.find(b,[Oo,Oo]));var t1=_&&fr?[]:void 0,e1=[],r1=[],a1=_&&fr?[]:void 0,i1=_&&fr?[]:void 0,s1=[],c1=[],h1,m1,l1,f1,p1;for(m1=0;m1<eu;m1++){r1[m1]=e1.length;var d1=m1+1;for(f1=j[m1],p1=j[m1+1],l1=f1;l1<p1;l1++)h1=$[l1],e1.push(h1),s1[h1]=d1,a1&&(a1[h1]=_[l1]);for(f1=Js[m1],p1=Js[m1+1],l1=f1;l1<p1;l1++)if(h1=Jr[l1],s1[h1]===d1){if(a1){var b1=vu(a1[h1],fr[l1]);tu(b1,Bo)?s1[h1]=null:a1[h1]=b1}}else e1.push(h1),c1[h1]=d1,i1&&(i1[h1]=fr[l1]);if(a1&&i1)for(l1=r1[m1];l1<e1.length;)h1=e1[l1],s1[h1]===d1?(t1[l1]=a1[h1],l1++):c1[h1]===d1?(t1[l1]=i1[h1],l1++):e1.splice(l1,1)}return r1[eu]=e1.length,h.createSparseMatrix({values:t1,index:e1,ptr:r1,size:[js,eu],datatype:Lt===h._datatype&&zo===d._datatype?Oo:void 0})}}),name$47="matAlgo10xSids",dependencies$47=["typed","DenseMatrix"],createMatAlgo10xSids=factory(name$47,dependencies$47,a=>{var{typed:s,DenseMatrix:o}=a;return function(h,d,b,_){var $=h._values,j=h._index,Xt=h._ptr,Lt=h._size,fr=h._datatype;if(!$)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var Jr=Lt[0],Js=Lt[1],qs,zo=b;typeof fr=="string"&&(qs=fr,d=s.convert(d,qs),zo=s.find(b,[qs,qs]));for(var js=[],eu=[],Oo=[],tu=0;tu<Js;tu++){for(var Bo=tu+1,vu=Xt[tu],t1=Xt[tu+1],e1=vu;e1<t1;e1++){var r1=j[e1];eu[r1]=$[e1],Oo[r1]=Bo}for(var a1=0;a1<Jr;a1++)tu===0&&(js[a1]=[]),Oo[a1]===Bo?js[a1][tu]=_?zo(d,eu[a1]):zo(eu[a1],d):js[a1][tu]=d}return new o({data:js,size:[Jr,Js],datatype:qs})}});function ArgumentsError(a,s,o,c){if(!(this instanceof ArgumentsError))throw new SyntaxError("Constructor must be called with the new operator");this.fn=a,this.count=s,this.min=o,this.max=c,this.message="Wrong number of arguments in function "+a+" ("+s+" provided, "+o+(c!=null?"-"+c:"")+" expected)",this.stack=new Error().stack}ArgumentsError.prototype=new Error;ArgumentsError.prototype.constructor=Error;ArgumentsError.prototype.name="ArgumentsError";ArgumentsError.prototype.isArgumentsError=!0;var name$46="gcd",dependencies$46=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],gcdTypes="number | BigNumber | Fraction | Matrix | Array",gcdManyTypesSignature="".concat(gcdTypes,", ").concat(gcdTypes,", ...").concat(gcdTypes);function is1d(a){return!a.some(s=>Array.isArray(s))}var createGcd=factory(name$46,dependencies$46,a=>{var{typed:s,matrix:o,config:c,round:h,equalScalar:d,zeros:b,BigNumber:_,DenseMatrix:$,concat:j}=a,Xt=createMod({typed:s,config:c,round:h,matrix:o,equalScalar:d,zeros:b,DenseMatrix:$,concat:j}),Lt=createMatAlgo01xDSid({typed:s}),fr=createMatAlgo04xSidSid({typed:s,equalScalar:d}),Jr=createMatAlgo10xSids({typed:s,DenseMatrix:$}),Js=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:j});return s(name$46,{"number, number":qs,"BigNumber, BigNumber":zo,"Fraction, Fraction":(js,eu)=>js.gcd(eu)},Js({SS:fr,DS:Lt,Ss:Jr}),{[gcdManyTypesSignature]:s.referToSelf(js=>(eu,Oo,tu)=>{for(var Bo=js(eu,Oo),vu=0;vu<tu.length;vu++)Bo=js(Bo,tu[vu]);return Bo}),Array:s.referToSelf(js=>eu=>{if(eu.length===1&&Array.isArray(eu[0])&&is1d(eu[0]))return js(...eu[0]);if(is1d(eu))return js(...eu);throw new ArgumentsError("gcd() supports only 1d matrices!")}),Matrix:s.referToSelf(js=>eu=>js(eu.toArray()))});function qs(js,eu){if(!isInteger$1(js)||!isInteger$1(eu))throw new Error("Parameters in function gcd must be integer numbers");for(var Oo;eu!==0;)Oo=Xt(js,eu),js=eu,eu=Oo;return js<0?-js:js}function zo(js,eu){if(!js.isInt()||!eu.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var Oo=new _(0);!eu.isZero();){var tu=Xt(js,eu);js=eu,eu=tu}return js.lt(Oo)?js.neg():js}}),name$45="matAlgo06xS0S0",dependencies$45=["typed","equalScalar"],createMatAlgo06xS0S0=factory(name$45,dependencies$45,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b){var _=h._values,$=h._size,j=h._datatype||h._data===void 0?h._datatype:h.getDataType(),Xt=d._values,Lt=d._size,fr=d._datatype||d._data===void 0?d._datatype:d.getDataType();if($.length!==Lt.length)throw new DimensionError($.length,Lt.length);if($[0]!==Lt[0]||$[1]!==Lt[1])throw new RangeError("Dimension mismatch. Matrix A ("+$+") must match Matrix B ("+Lt+")");var Jr=$[0],Js=$[1],qs,zo=o,js=0,eu=b;typeof j=="string"&&j===fr&&j!=="mixed"&&(qs=j,zo=s.find(o,[qs,qs]),js=s.convert(0,qs),eu=s.find(b,[qs,qs]));for(var Oo=_&&Xt?[]:void 0,tu=[],Bo=[],vu=Oo?[]:void 0,t1=[],e1=[],r1=0;r1<Js;r1++){Bo[r1]=tu.length;var a1=r1+1;if(scatter(h,r1,t1,vu,e1,a1,tu,eu),scatter(d,r1,t1,vu,e1,a1,tu,eu),vu)for(var i1=Bo[r1];i1<tu.length;){var s1=tu[i1];if(e1[s1]===a1){var c1=vu[s1];zo(c1,js)?tu.splice(i1,1):(Oo.push(c1),i1++)}else tu.splice(i1,1)}else for(var h1=Bo[r1];h1<tu.length;){var m1=tu[h1];e1[m1]!==a1?tu.splice(h1,1):h1++}}return Bo[Js]=tu.length,h.createSparseMatrix({values:Oo,index:tu,ptr:Bo,size:[Jr,Js],datatype:j===h._datatype&&fr===d._datatype?qs:void 0})}}),name$44="lcm",dependencies$44=["typed","matrix","equalScalar","concat"],createLcm=factory(name$44,dependencies$44,a=>{var{typed:s,matrix:o,equalScalar:c,concat:h}=a,d=createMatAlgo02xDS0({typed:s,equalScalar:c}),b=createMatAlgo06xS0S0({typed:s,equalScalar:c}),_=createMatAlgo11xS0s({typed:s,equalScalar:c}),$=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:h}),j="number | BigNumber | Fraction | Matrix | Array",Xt={};return Xt["".concat(j,", ").concat(j,", ...").concat(j)]=s.referToSelf(fr=>(Jr,Js,qs)=>{for(var zo=fr(Jr,Js),js=0;js<qs.length;js++)zo=fr(zo,qs[js]);return zo}),s(name$44,{"number, number":lcmNumber,"BigNumber, BigNumber":Lt,"Fraction, Fraction":(fr,Jr)=>fr.lcm(Jr)},$({SS:b,DS:d,Ss:_}),Xt);function Lt(fr,Jr){if(!fr.isInt()||!Jr.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(fr.isZero())return fr;if(Jr.isZero())return Jr;for(var Js=fr.times(Jr);!Jr.isZero();){var qs=Jr;Jr=fr.mod(qs),fr=qs}return Js.div(fr).abs()}});function promoteLogarithm(a,s,o,c){return function(h){if(h>0||o.predictable){if(h<=0)return NaN;var d=h.toString(16),b=d.substring(0,15);return a*(d.length-b.length)+s(+("0x"+b))}return c(h.toNumber())}}var name$43="log10",dependencies$43=["typed","config","Complex"],log16=log10Number(16),createLog10=factory(name$43,dependencies$43,a=>{var{typed:s,config:o,Complex:c}=a;function h(b){return b.log().div(Math.LN10)}function d(b){return h(new c(b,0))}return s(name$43,{number:function(_){return _>=0||o.predictable?log10Number(_):d(_)},bigint:promoteLogarithm(log16,log10Number,o,d),Complex:h,BigNumber:function(_){return!_.isNegative()||o.predictable?_.log():d(_.toNumber())},"Array | Matrix":s.referToSelf(b=>_=>deepMap(_,b))})}),name$42="log2",dependencies$42=["typed","config","Complex"],createLog2=factory(name$42,dependencies$42,a=>{var{typed:s,config:o,Complex:c}=a;function h(b){return d(new c(b,0))}return s(name$42,{number:function(_){return _>=0||o.predictable?log2Number(_):h(_)},bigint:promoteLogarithm(4,log2Number,o,h),Complex:d,BigNumber:function(_){return!_.isNegative()||o.predictable?_.log(2):h(_.toNumber())},"Array | Matrix":s.referToSelf(b=>_=>deepMap(_,b))});function d(b){var _=Math.sqrt(b.re*b.re+b.im*b.im);return new c(Math.log2?Math.log2(_):Math.log(_)/Math.LN2,Math.atan2(b.im,b.re)/Math.LN2)}}),name$41="multiplyScalar",dependencies$41=["typed"],createMultiplyScalar=factory(name$41,dependencies$41,a=>{var{typed:s}=a;return s("multiplyScalar",{"number, number":multiplyNumber,"Complex, Complex":function(c,h){return c.mul(h)},"BigNumber, BigNumber":function(c,h){return c.times(h)},"bigint, bigint":function(c,h){return c*h},"Fraction, Fraction":function(c,h){return c.mul(h)},"number | Fraction | BigNumber | Complex, Unit":(o,c)=>c.multiply(o),"Unit, number | Fraction | BigNumber | Complex | Unit":(o,c)=>o.multiply(c)})}),name$40="multiply",dependencies$40=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],createMultiply=factory(name$40,dependencies$40,a=>{var{typed:s,matrix:o,addScalar:c,multiplyScalar:h,equalScalar:d,dot:b}=a,_=createMatAlgo11xS0s({typed:s,equalScalar:d}),$=createMatAlgo14xDs({typed:s});function j(Bo,vu){switch(Bo.length){case 1:switch(vu.length){case 1:if(Bo[0]!==vu[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(Bo[0]!==vu[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+Bo[0]+") must match Matrix rows ("+vu[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+vu.length+" dimensions)")}break;case 2:switch(vu.length){case 1:if(Bo[1]!==vu[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+Bo[1]+") must match Vector length ("+vu[0]+")");break;case 2:if(Bo[1]!==vu[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+Bo[1]+") must match Matrix B rows ("+vu[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+vu.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+Bo.length+" dimensions)")}}function Xt(Bo,vu,t1){if(t1===0)throw new Error("Cannot multiply two empty vectors");return b(Bo,vu)}function Lt(Bo,vu){if(vu.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return fr(Bo,vu)}function fr(Bo,vu){var t1=Bo._data,e1=Bo._size,r1=Bo._datatype||Bo.getDataType(),a1=vu._data,i1=vu._size,s1=vu._datatype||vu.getDataType(),c1=e1[0],h1=i1[1],m1,l1=c,f1=h;r1&&s1&&r1===s1&&typeof r1=="string"&&r1!=="mixed"&&(m1=r1,l1=s.find(c,[m1,m1]),f1=s.find(h,[m1,m1]));for(var p1=[],d1=0;d1<h1;d1++){for(var b1=f1(t1[0],a1[0][d1]),C1=1;C1<c1;C1++)b1=l1(b1,f1(t1[C1],a1[C1][d1]));p1[d1]=b1}return Bo.createDenseMatrix({data:p1,size:[h1],datatype:r1===Bo._datatype&&s1===vu._datatype?m1:void 0})}var Jr=s("_multiplyMatrixVector",{"DenseMatrix, any":qs,"SparseMatrix, any":eu}),Js=s("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":zo,"DenseMatrix, SparseMatrix":js,"SparseMatrix, DenseMatrix":Oo,"SparseMatrix, SparseMatrix":tu});function qs(Bo,vu){var t1=Bo._data,e1=Bo._size,r1=Bo._datatype||Bo.getDataType(),a1=vu._data,i1=vu._datatype||vu.getDataType(),s1=e1[0],c1=e1[1],h1,m1=c,l1=h;r1&&i1&&r1===i1&&typeof r1=="string"&&r1!=="mixed"&&(h1=r1,m1=s.find(c,[h1,h1]),l1=s.find(h,[h1,h1]));for(var f1=[],p1=0;p1<s1;p1++){for(var d1=t1[p1],b1=l1(d1[0],a1[0]),C1=1;C1<c1;C1++)b1=m1(b1,l1(d1[C1],a1[C1]));f1[p1]=b1}return Bo.createDenseMatrix({data:f1,size:[s1],datatype:r1===Bo._datatype&&i1===vu._datatype?h1:void 0})}function zo(Bo,vu){var t1=Bo._data,e1=Bo._size,r1=Bo._datatype||Bo.getDataType(),a1=vu._data,i1=vu._size,s1=vu._datatype||vu.getDataType(),c1=e1[0],h1=e1[1],m1=i1[1],l1,f1=c,p1=h;r1&&s1&&r1===s1&&typeof r1=="string"&&r1!=="mixed"&&r1!=="mixed"&&(l1=r1,f1=s.find(c,[l1,l1]),p1=s.find(h,[l1,l1]));for(var d1=[],b1=0;b1<c1;b1++){var C1=t1[b1];d1[b1]=[];for(var g1=0;g1<m1;g1++){for(var o1=p1(C1[0],a1[0][g1]),S1=1;S1<h1;S1++)o1=f1(o1,p1(C1[S1],a1[S1][g1]));d1[b1][g1]=o1}}return Bo.createDenseMatrix({data:d1,size:[c1,m1],datatype:r1===Bo._datatype&&s1===vu._datatype?l1:void 0})}function js(Bo,vu){var t1=Bo._data,e1=Bo._size,r1=Bo._datatype||Bo.getDataType(),a1=vu._values,i1=vu._index,s1=vu._ptr,c1=vu._size,h1=vu._datatype||vu._data===void 0?vu._datatype:vu.getDataType();if(!a1)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var m1=e1[0],l1=c1[1],f1,p1=c,d1=h,b1=d,C1=0;r1&&h1&&r1===h1&&typeof r1=="string"&&r1!=="mixed"&&(f1=r1,p1=s.find(c,[f1,f1]),d1=s.find(h,[f1,f1]),b1=s.find(d,[f1,f1]),C1=s.convert(0,f1));for(var g1=[],o1=[],S1=[],v1=vu.createSparseMatrix({values:g1,index:o1,ptr:S1,size:[m1,l1],datatype:r1===Bo._datatype&&h1===vu._datatype?f1:void 0}),B1=0;B1<l1;B1++){S1[B1]=o1.length;var T1=s1[B1],w1=s1[B1+1];if(w1>T1)for(var x1=0,M1=0;M1<m1;M1++){for(var O1=M1+1,N1=void 0,L1=T1;L1<w1;L1++){var G1=i1[L1];x1!==O1?(N1=d1(t1[M1][G1],a1[L1]),x1=O1):N1=p1(N1,d1(t1[M1][G1],a1[L1]))}x1===O1&&!b1(N1,C1)&&(o1.push(M1),g1.push(N1))}}return S1[l1]=o1.length,v1}function eu(Bo,vu){var t1=Bo._values,e1=Bo._index,r1=Bo._ptr,a1=Bo._datatype||Bo._data===void 0?Bo._datatype:Bo.getDataType();if(!t1)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var i1=vu._data,s1=vu._datatype||vu.getDataType(),c1=Bo._size[0],h1=vu._size[0],m1=[],l1=[],f1=[],p1,d1=c,b1=h,C1=d,g1=0;a1&&s1&&a1===s1&&typeof a1=="string"&&a1!=="mixed"&&(p1=a1,d1=s.find(c,[p1,p1]),b1=s.find(h,[p1,p1]),C1=s.find(d,[p1,p1]),g1=s.convert(0,p1));var o1=[],S1=[];f1[0]=0;for(var v1=0;v1<h1;v1++){var B1=i1[v1];if(!C1(B1,g1))for(var T1=r1[v1],w1=r1[v1+1],x1=T1;x1<w1;x1++){var M1=e1[x1];S1[M1]?o1[M1]=d1(o1[M1],b1(B1,t1[x1])):(S1[M1]=!0,l1.push(M1),o1[M1]=b1(B1,t1[x1]))}}for(var O1=l1.length,N1=0;N1<O1;N1++){var L1=l1[N1];m1[N1]=o1[L1]}return f1[1]=l1.length,Bo.createSparseMatrix({values:m1,index:l1,ptr:f1,size:[c1,1],datatype:a1===Bo._datatype&&s1===vu._datatype?p1:void 0})}function Oo(Bo,vu){var t1=Bo._values,e1=Bo._index,r1=Bo._ptr,a1=Bo._datatype||Bo._data===void 0?Bo._datatype:Bo.getDataType();if(!t1)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var i1=vu._data,s1=vu._datatype||vu.getDataType(),c1=Bo._size[0],h1=vu._size[0],m1=vu._size[1],l1,f1=c,p1=h,d1=d,b1=0;a1&&s1&&a1===s1&&typeof a1=="string"&&a1!=="mixed"&&(l1=a1,f1=s.find(c,[l1,l1]),p1=s.find(h,[l1,l1]),d1=s.find(d,[l1,l1]),b1=s.convert(0,l1));for(var C1=[],g1=[],o1=[],S1=Bo.createSparseMatrix({values:C1,index:g1,ptr:o1,size:[c1,m1],datatype:a1===Bo._datatype&&s1===vu._datatype?l1:void 0}),v1=[],B1=[],T1=0;T1<m1;T1++){o1[T1]=g1.length;for(var w1=T1+1,x1=0;x1<h1;x1++){var M1=i1[x1][T1];if(!d1(M1,b1))for(var O1=r1[x1],N1=r1[x1+1],L1=O1;L1<N1;L1++){var G1=e1[L1];B1[G1]!==w1?(B1[G1]=w1,g1.push(G1),v1[G1]=p1(M1,t1[L1])):v1[G1]=f1(v1[G1],p1(M1,t1[L1]))}}for(var q1=o1[T1],H1=g1.length,W1=q1;W1<H1;W1++){var j1=g1[W1];C1[W1]=v1[j1]}}return o1[m1]=g1.length,S1}function tu(Bo,vu){var t1=Bo._values,e1=Bo._index,r1=Bo._ptr,a1=Bo._datatype||Bo._data===void 0?Bo._datatype:Bo.getDataType(),i1=vu._values,s1=vu._index,c1=vu._ptr,h1=vu._datatype||vu._data===void 0?vu._datatype:vu.getDataType(),m1=Bo._size[0],l1=vu._size[1],f1=t1&&i1,p1,d1=c,b1=h;a1&&h1&&a1===h1&&typeof a1=="string"&&a1!=="mixed"&&(p1=a1,d1=s.find(c,[p1,p1]),b1=s.find(h,[p1,p1]));for(var C1=f1?[]:void 0,g1=[],o1=[],S1=Bo.createSparseMatrix({values:C1,index:g1,ptr:o1,size:[m1,l1],datatype:a1===Bo._datatype&&h1===vu._datatype?p1:void 0}),v1=f1?[]:void 0,B1=[],T1,w1,x1,M1,O1,N1,L1,G1,q1=0;q1<l1;q1++){o1[q1]=g1.length;var H1=q1+1;for(O1=c1[q1],N1=c1[q1+1],M1=O1;M1<N1;M1++)if(G1=s1[M1],f1)for(w1=r1[G1],x1=r1[G1+1],T1=w1;T1<x1;T1++)L1=e1[T1],B1[L1]!==H1?(B1[L1]=H1,g1.push(L1),v1[L1]=b1(i1[M1],t1[T1])):v1[L1]=d1(v1[L1],b1(i1[M1],t1[T1]));else for(w1=r1[G1],x1=r1[G1+1],T1=w1;T1<x1;T1++)L1=e1[T1],B1[L1]!==H1&&(B1[L1]=H1,g1.push(L1));if(f1)for(var W1=o1[q1],j1=g1.length,Q1=W1;Q1<j1;Q1++){var rv=g1[Q1];C1[Q1]=v1[rv]}}return o1[l1]=g1.length,S1}return s(name$40,h,{"Array, Array":s.referTo("Matrix, Matrix",Bo=>(vu,t1)=>{j(arraySize(vu),arraySize(t1));var e1=Bo(o(vu),o(t1));return isMatrix(e1)?e1.valueOf():e1}),"Matrix, Matrix":function(vu,t1){var e1=vu.size(),r1=t1.size();return j(e1,r1),e1.length===1?r1.length===1?Xt(vu,t1,e1[0]):Lt(vu,t1):r1.length===1?Jr(vu,t1):Js(vu,t1)},"Matrix, Array":s.referTo("Matrix,Matrix",Bo=>(vu,t1)=>Bo(vu,o(t1))),"Array, Matrix":s.referToSelf(Bo=>(vu,t1)=>Bo(o(vu,t1.storage()),t1)),"SparseMatrix, any":function(vu,t1){return _(vu,t1,h,!1)},"DenseMatrix, any":function(vu,t1){return $(vu,t1,h,!1)},"any, SparseMatrix":function(vu,t1){return _(t1,vu,h,!0)},"any, DenseMatrix":function(vu,t1){return $(t1,vu,h,!0)},"Array, any":function(vu,t1){return $(o(vu),t1,h,!1).valueOf()},"any, Array":function(vu,t1){return $(o(t1),vu,h,!0).valueOf()},"any, any":h,"any, any, ...any":s.referToSelf(Bo=>(vu,t1,e1)=>{for(var r1=Bo(vu,t1),a1=0;a1<e1.length;a1++)r1=Bo(r1,e1[a1]);return r1})})}),name$3$="nthRoot",dependencies$3$=["typed","matrix","equalScalar","BigNumber","concat"],createNthRoot=factory(name$3$,dependencies$3$,a=>{var{typed:s,matrix:o,equalScalar:c,BigNumber:h,concat:d}=a,b=createMatAlgo01xDSid({typed:s}),_=createMatAlgo02xDS0({typed:s,equalScalar:c}),$=createMatAlgo06xS0S0({typed:s,equalScalar:c}),j=createMatAlgo11xS0s({typed:s,equalScalar:c}),Xt=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:d});function Lt(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return s(name$3$,{number:nthRootNumber,"number, number":nthRootNumber,BigNumber:Jr=>fr(Jr,new h(2)),"BigNumber, BigNumber":fr,Complex:Lt,"Complex, number":Lt,Array:s.referTo("DenseMatrix,number",Jr=>Js=>Jr(o(Js),2).valueOf()),DenseMatrix:s.referTo("DenseMatrix,number",Jr=>Js=>Jr(Js,2)),SparseMatrix:s.referTo("SparseMatrix,number",Jr=>Js=>Jr(Js,2)),"SparseMatrix, SparseMatrix":s.referToSelf(Jr=>(Js,qs)=>{if(qs.density()===1)return $(Js,qs,Jr);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":s.referToSelf(Jr=>(Js,qs)=>{if(qs.density()===1)return b(Js,qs,Jr,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":s.referTo("DenseMatrix,SparseMatrix",Jr=>(Js,qs)=>Jr(o(Js),qs)),"number | BigNumber, SparseMatrix":s.referToSelf(Jr=>(Js,qs)=>{if(qs.density()===1)return j(qs,Js,Jr,!0);throw new Error("Root must be non-zero")})},Xt({scalar:"number | BigNumber",SD:_,Ss:j,sS:!1}));function fr(Jr,Js){var qs=h.precision,zo=h.clone({precision:qs+2}),js=new h(0),eu=new zo(1),Oo=Js.isNegative();if(Oo&&(Js=Js.neg()),Js.isZero())throw new Error("Root must be non-zero");if(Jr.isNegative()&&!Js.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(Jr.isZero())return Oo?new zo(1/0):0;if(!Jr.isFinite())return Oo?js:Jr;var tu=Jr.abs().pow(eu.div(Js));return tu=Jr.isNeg()?tu.neg():tu,new h((Oo?eu.div(tu):tu).toPrecision(qs))}}),name$3_="sign",dependencies$3_=["typed","BigNumber","Fraction","complex"],createSign=factory(name$3_,dependencies$3_,a=>{var{typed:s,BigNumber:o,complex:c,Fraction:h}=a;return s(name$3_,{number:signNumber,Complex:function(b){return b.im===0?c(signNumber(b.re)):b.sign()},BigNumber:function(b){return new o(b.cmp(0))},bigint:function(b){return b>0n?1n:b<0n?-1n:0n},Fraction:function(b){return b.n===0n?new h(0):new h(b.s)},"Array | Matrix":s.referToSelf(d=>b=>deepMap(b,d,!0)),Unit:s.referToSelf(d=>b=>{if(!b._isDerived()&&b.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return s.find(d,b.valueType())(b.value)})})}),name$3Z="sqrt",dependencies$3Z=["config","typed","Complex"],createSqrt=factory(name$3Z,dependencies$3Z,a=>{var{config:s,typed:o,Complex:c}=a;return o("sqrt",{number:h,Complex:function(b){return b.sqrt()},BigNumber:function(b){return!b.isNegative()||s.predictable?b.sqrt():h(b.toNumber())},Unit:function(b){return b.pow(.5)}});function h(d){return isNaN(d)?NaN:d>=0||s.predictable?Math.sqrt(d):new c(d,0).sqrt()}}),name$3Y="square",dependencies$3Y=["typed"],createSquare=factory(name$3Y,dependencies$3Y,a=>{var{typed:s}=a;return s(name$3Y,{number:squareNumber,Complex:function(c){return c.mul(c)},BigNumber:function(c){return c.times(c)},bigint:function(c){return c*c},Fraction:function(c){return c.mul(c)},Unit:function(c){return c.pow(2)}})}),name$3X="subtract",dependencies$3X=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],createSubtract=factory(name$3X,dependencies$3X,a=>{var{typed:s,matrix:o,equalScalar:c,subtractScalar:h,unaryMinus:d,DenseMatrix:b,concat:_}=a,$=createMatAlgo01xDSid({typed:s}),j=createMatAlgo03xDSf({typed:s}),Xt=createMatAlgo05xSfSf({typed:s,equalScalar:c}),Lt=createMatAlgo10xSids({typed:s,DenseMatrix:b}),fr=createMatAlgo12xSfs({typed:s,DenseMatrix:b}),Jr=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:_});return s(name$3X,{"any, any":h},Jr({elop:h,SS:Xt,DS:$,SD:j,Ss:fr,sS:Lt}))}),name$3W="xgcd",dependencies$3W=["typed","config","matrix","BigNumber"],createXgcd=factory(name$3W,dependencies$3W,a=>{var{typed:s,config:o,matrix:c,BigNumber:h}=a;return s(name$3W,{"number, number":function(_,$){var j=xgcdNumber(_,$);return o.matrix==="Array"?j:c(j)},"BigNumber, BigNumber":d});function d(b,_){var $,j,Xt,Lt=new h(0),fr=new h(1),Jr=Lt,Js=fr,qs=fr,zo=Lt;if(!b.isInt()||!_.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!_.isZero();)j=b.div(_).floor(),Xt=b.mod(_),$=Jr,Jr=Js.minus(j.times(Jr)),Js=$,$=qs,qs=zo.minus(j.times(qs)),zo=$,b=_,_=Xt;var js;return b.lt(Lt)?js=[b.neg(),Js.neg(),zo.neg()]:js=[b,b.isZero()?0:Js,zo],o.matrix==="Array"?js:c(js)}}),name$3V="invmod",dependencies$3V=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],createInvmod=factory(name$3V,dependencies$3V,a=>{var{typed:s,config:o,BigNumber:c,xgcd:h,equal:d,smaller:b,mod:_,add:$,isInteger:j}=a;return s(name$3V,{"number, number":Xt,"BigNumber, BigNumber":Xt});function Xt(Lt,fr){if(!j(Lt)||!j(fr))throw new Error("Parameters in function invmod must be integer numbers");if(Lt=_(Lt,fr),d(fr,0))throw new Error("Divisor must be non zero");var Jr=h(Lt,fr);Jr=Jr.valueOf();var[Js,qs]=Jr;return d(Js,c(1))?(qs=_(qs,fr),b(qs,c(0))&&(qs=$(qs,fr)),qs):NaN}}),name$3U="matAlgo09xS0Sf",dependencies$3U=["typed","equalScalar"],createMatAlgo09xS0Sf=factory(name$3U,dependencies$3U,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b){var _=h._values,$=h._index,j=h._ptr,Xt=h._size,Lt=h._datatype||h._data===void 0?h._datatype:h.getDataType(),fr=d._values,Jr=d._index,Js=d._ptr,qs=d._size,zo=d._datatype||d._data===void 0?d._datatype:d.getDataType();if(Xt.length!==qs.length)throw new DimensionError(Xt.length,qs.length);if(Xt[0]!==qs[0]||Xt[1]!==qs[1])throw new RangeError("Dimension mismatch. Matrix A ("+Xt+") must match Matrix B ("+qs+")");var js=Xt[0],eu=Xt[1],Oo,tu=o,Bo=0,vu=b;typeof Lt=="string"&&Lt===zo&&Lt!=="mixed"&&(Oo=Lt,tu=s.find(o,[Oo,Oo]),Bo=s.convert(0,Oo),vu=s.find(b,[Oo,Oo]));var t1=_&&fr?[]:void 0,e1=[],r1=[],a1=t1?[]:void 0,i1=[],s1,c1,h1,m1,l1;for(c1=0;c1<eu;c1++){r1[c1]=e1.length;var f1=c1+1;if(a1)for(m1=Js[c1],l1=Js[c1+1],h1=m1;h1<l1;h1++)s1=Jr[h1],i1[s1]=f1,a1[s1]=fr[h1];for(m1=j[c1],l1=j[c1+1],h1=m1;h1<l1;h1++)if(s1=$[h1],a1){var p1=i1[s1]===f1?a1[s1]:Bo,d1=vu(_[h1],p1);tu(d1,Bo)||(e1.push(s1),t1.push(d1))}else e1.push(s1)}return r1[eu]=e1.length,h.createSparseMatrix({values:t1,index:e1,ptr:r1,size:[js,eu],datatype:Lt===h._datatype&&zo===d._datatype?Oo:void 0})}}),name$3T="dotMultiply",dependencies$3T=["typed","matrix","equalScalar","multiplyScalar","concat"],createDotMultiply=factory(name$3T,dependencies$3T,a=>{var{typed:s,matrix:o,equalScalar:c,multiplyScalar:h,concat:d}=a,b=createMatAlgo02xDS0({typed:s,equalScalar:c}),_=createMatAlgo09xS0Sf({typed:s,equalScalar:c}),$=createMatAlgo11xS0s({typed:s,equalScalar:c}),j=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:d});return s(name$3T,j({elop:h,SS:_,DS:b,Ss:$}))});function bitAndBigNumber(a,s){if(a.isFinite()&&!a.isInteger()||s.isFinite()&&!s.isInteger())throw new Error("Integers expected in function bitAnd");var o=a.constructor;if(a.isNaN()||s.isNaN())return new o(NaN);if(a.isZero()||s.eq(-1)||a.eq(s))return a;if(s.isZero()||a.eq(-1))return s;if(!a.isFinite()||!s.isFinite()){if(!a.isFinite()&&!s.isFinite())return a.isNegative()===s.isNegative()?a:new o(0);if(!a.isFinite())return s.isNegative()?a:a.isNegative()?new o(0):s;if(!s.isFinite())return a.isNegative()?s:s.isNegative()?new o(0):a}return bitwise(a,s,function(c,h){return c&h})}function bitNotBigNumber(a){if(a.isFinite()&&!a.isInteger())throw new Error("Integer expected in function bitNot");var s=a.constructor,o=s.precision;s.config({precision:1e9});var c=a.plus(new s(1));return c.s=-c.s||null,s.config({precision:o}),c}function bitOrBigNumber(a,s){if(a.isFinite()&&!a.isInteger()||s.isFinite()&&!s.isInteger())throw new Error("Integers expected in function bitOr");var o=a.constructor;if(a.isNaN()||s.isNaN())return new o(NaN);var c=new o(-1);return a.isZero()||s.eq(c)||a.eq(s)?s:s.isZero()||a.eq(c)?a:!a.isFinite()||!s.isFinite()?!a.isFinite()&&!a.isNegative()&&s.isNegative()||a.isNegative()&&!s.isNegative()&&!s.isFinite()?c:a.isNegative()&&s.isNegative()?a.isFinite()?a:s:a.isFinite()?s:a:bitwise(a,s,function(h,d){return h|d})}function bitwise(a,s,o){var c=a.constructor,h,d,b=+(a.s<0),_=+(s.s<0);if(b){h=decCoefficientToBinaryString(bitNotBigNumber(a));for(var $=0;$<h.length;++$)h[$]^=1}else h=decCoefficientToBinaryString(a);if(_){d=decCoefficientToBinaryString(bitNotBigNumber(s));for(var j=0;j<d.length;++j)d[j]^=1}else d=decCoefficientToBinaryString(s);var Xt,Lt,fr;h.length<=d.length?(Xt=h,Lt=d,fr=b):(Xt=d,Lt=h,fr=_);var Jr=Xt.length,Js=Lt.length,qs=o(b,_)^1,zo=new c(qs^1),js=new c(1),eu=new c(2),Oo=c.precision;for(c.config({precision:1e9});Jr>0;)o(Xt[--Jr],Lt[--Js])===qs&&(zo=zo.plus(js)),js=js.times(eu);for(;Js>0;)o(fr,Lt[--Js])===qs&&(zo=zo.plus(js)),js=js.times(eu);return c.config({precision:Oo}),qs===0&&(zo.s=-zo.s),zo}function decCoefficientToBinaryString(a){for(var s=a.d,o=s[0]+"",c=1;c<s.length;++c){for(var h=s[c]+"",d=7-h.length;d--;)h="0"+h;o+=h}for(var b=o.length;o.charAt(b)==="0";)b--;var _=a.e,$=o.slice(0,b+1||1),j=$.length;if(_>0)if(++_>j)for(_-=j;_--;)$+="0";else _<j&&($=$.slice(0,_)+"."+$.slice(_));for(var Xt=[0],Lt=0;Lt<$.length;){for(var fr=Xt.length;fr--;)Xt[fr]*=10;Xt[0]+=parseInt($.charAt(Lt++));for(var Jr=0;Jr<Xt.length;++Jr)Xt[Jr]>1&&((Xt[Jr+1]===null||Xt[Jr+1]===void 0)&&(Xt[Jr+1]=0),Xt[Jr+1]+=Xt[Jr]>>1,Xt[Jr]&=1)}return Xt.reverse()}function bitXor$1(a,s){if(a.isFinite()&&!a.isInteger()||s.isFinite()&&!s.isInteger())throw new Error("Integers expected in function bitXor");var o=a.constructor;if(a.isNaN()||s.isNaN())return new o(NaN);if(a.isZero())return s;if(s.isZero())return a;if(a.eq(s))return new o(0);var c=new o(-1);return a.eq(c)?bitNotBigNumber(s):s.eq(c)?bitNotBigNumber(a):!a.isFinite()||!s.isFinite()?!a.isFinite()&&!s.isFinite()?c:new o(a.isNegative()===s.isNegative()?1/0:-1/0):bitwise(a,s,function(h,d){return h^d})}function leftShiftBigNumber(a,s){if(a.isFinite()&&!a.isInteger()||s.isFinite()&&!s.isInteger())throw new Error("Integers expected in function leftShift");var o=a.constructor;return a.isNaN()||s.isNaN()||s.isNegative()&&!s.isZero()?new o(NaN):a.isZero()||s.isZero()?a:!a.isFinite()&&!s.isFinite()?new o(NaN):s.lt(55)?a.times(Math.pow(2,s.toNumber())+""):a.times(new o(2).pow(s))}function rightArithShiftBigNumber(a,s){if(a.isFinite()&&!a.isInteger()||s.isFinite()&&!s.isInteger())throw new Error("Integers expected in function rightArithShift");var o=a.constructor;return a.isNaN()||s.isNaN()||s.isNegative()&&!s.isZero()?new o(NaN):a.isZero()||s.isZero()?a:s.isFinite()?s.lt(55)?a.div(Math.pow(2,s.toNumber())+"").floor():a.div(new o(2).pow(s)).floor():a.isNegative()?new o(-1):a.isFinite()?new o(0):new o(NaN)}var name$3S="bitAnd",dependencies$3S=["typed","matrix","equalScalar","concat"],createBitAnd=factory(name$3S,dependencies$3S,a=>{var{typed:s,matrix:o,equalScalar:c,concat:h}=a,d=createMatAlgo02xDS0({typed:s,equalScalar:c}),b=createMatAlgo06xS0S0({typed:s,equalScalar:c}),_=createMatAlgo11xS0s({typed:s,equalScalar:c}),$=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:h});return s(name$3S,{"number, number":bitAndNumber,"BigNumber, BigNumber":bitAndBigNumber,"bigint, bigint":(j,Xt)=>j&Xt},$({SS:b,DS:d,Ss:_}))}),name$3R="bitNot",dependencies$3R=["typed"],createBitNot=factory(name$3R,dependencies$3R,a=>{var{typed:s}=a;return s(name$3R,{number:bitNotNumber,BigNumber:bitNotBigNumber,bigint:o=>~o,"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$3Q="bitOr",dependencies$3Q=["typed","matrix","equalScalar","DenseMatrix","concat"],createBitOr=factory(name$3Q,dependencies$3Q,a=>{var{typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d}=a,b=createMatAlgo01xDSid({typed:s}),_=createMatAlgo04xSidSid({typed:s,equalScalar:c}),$=createMatAlgo10xSids({typed:s,DenseMatrix:h}),j=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:d});return s(name$3Q,{"number, number":bitOrNumber,"BigNumber, BigNumber":bitOrBigNumber,"bigint, bigint":(Xt,Lt)=>Xt|Lt},j({SS:_,DS:b,Ss:$}))}),name$3P="matAlgo07xSSf",dependencies$3P=["typed","SparseMatrix"],createMatAlgo07xSSf=factory(name$3P,dependencies$3P,a=>{var{typed:s,SparseMatrix:o}=a;return function(d,b,_){var $=d._size,j=d._datatype||d._data===void 0?d._datatype:d.getDataType(),Xt=b._size,Lt=b._datatype||b._data===void 0?b._datatype:b.getDataType();if($.length!==Xt.length)throw new DimensionError($.length,Xt.length);if($[0]!==Xt[0]||$[1]!==Xt[1])throw new RangeError("Dimension mismatch. Matrix A ("+$+") must match Matrix B ("+Xt+")");var fr=$[0],Jr=$[1],Js,qs=0,zo=_;typeof j=="string"&&j===Lt&&j!=="mixed"&&(Js=j,qs=s.convert(0,Js),zo=s.find(_,[Js,Js]));for(var js=[],eu=[],Oo=new Array(Jr+1).fill(0),tu=[],Bo=[],vu=[],t1=[],e1=0;e1<Jr;e1++){var r1=e1+1,a1=0;c(d,e1,vu,tu,r1),c(b,e1,t1,Bo,r1);for(var i1=0;i1<fr;i1++){var s1=vu[i1]===r1?tu[i1]:qs,c1=t1[i1]===r1?Bo[i1]:qs,h1=zo(s1,c1);h1!==0&&h1!==!1&&(eu.push(i1),js.push(h1),a1++)}Oo[e1+1]=Oo[e1]+a1}return new o({values:js,index:eu,ptr:Oo,size:[fr,Jr],datatype:j===d._datatype&&Lt===b._datatype?Js:void 0})};function c(h,d,b,_,$){for(var j=h._values,Xt=h._index,Lt=h._ptr,fr=Lt[d],Jr=Lt[d+1];fr<Jr;fr++){var Js=Xt[fr];b[Js]=$,_[Js]=j[fr]}}}),name$3O="bitXor",dependencies$3O=["typed","matrix","DenseMatrix","concat","SparseMatrix"],createBitXor=factory(name$3O,dependencies$3O,a=>{var{typed:s,matrix:o,DenseMatrix:c,concat:h,SparseMatrix:d}=a,b=createMatAlgo03xDSf({typed:s}),_=createMatAlgo07xSSf({typed:s,SparseMatrix:d}),$=createMatAlgo12xSfs({typed:s,DenseMatrix:c}),j=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:h});return s(name$3O,{"number, number":bitXorNumber,"BigNumber, BigNumber":bitXor$1,"bigint, bigint":(Xt,Lt)=>Xt^Lt},j({SS:_,DS:b,Ss:$}))}),name$3N="arg",dependencies$3N=["typed"],createArg=factory(name$3N,dependencies$3N,a=>{var{typed:s}=a;return s(name$3N,{number:function(c){return Math.atan2(0,c)},BigNumber:function(c){return c.constructor.atan2(0,c)},Complex:function(c){return c.arg()},"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$3M="conj",dependencies$3M=["typed"],createConj=factory(name$3M,dependencies$3M,a=>{var{typed:s}=a;return s(name$3M,{"number | BigNumber | Fraction":o=>o,Complex:o=>o.conjugate(),Unit:s.referToSelf(o=>c=>new c.constructor(o(c.toNumeric()),c.formatUnits())),"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$3L="im",dependencies$3L=["typed"],createIm=factory(name$3L,dependencies$3L,a=>{var{typed:s}=a;return s(name$3L,{number:()=>0,"BigNumber | Fraction":o=>o.mul(0),Complex:o=>o.im,"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$3K="re",dependencies$3K=["typed"],createRe=factory(name$3K,dependencies$3K,a=>{var{typed:s}=a;return s(name$3K,{"number | BigNumber | Fraction":o=>o,Complex:o=>o.re,"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$3J="not",dependencies$3J=["typed"],createNot=factory(name$3J,dependencies$3J,a=>{var{typed:s}=a;return s(name$3J,{"null | undefined":()=>!0,number:notNumber,Complex:function(c){return c.re===0&&c.im===0},BigNumber:function(c){return c.isZero()||c.isNaN()},bigint:o=>!o,Unit:s.referToSelf(o=>c=>s.find(o,c.valueType())(c.value)),"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$3I="nullish",dependencies$3I=["typed","matrix","size","flatten","deepEqual"],createNullish=factory(name$3I,dependencies$3I,a=>{var{typed:s,matrix:o,size:c,flatten:h,deepEqual:d}=a,b=createMatAlgo03xDSf({typed:s}),_=createMatAlgo14xDs({typed:s}),$=createMatAlgo13xDD({typed:s});return s(name$3I,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(j,Xt)=>j,"null, any":(j,Xt)=>Xt,"undefined, any":(j,Xt)=>Xt,"SparseMatrix, Array | Matrix":(j,Xt)=>{var Lt=c(j),fr=c(Xt);if(d(Lt,fr))return j;throw new DimensionError(Lt,fr)},"DenseMatrix, DenseMatrix":s.referToSelf(j=>(Xt,Lt)=>$(Xt,Lt,j)),"DenseMatrix, SparseMatrix":s.referToSelf(j=>(Xt,Lt)=>b(Xt,Lt,j,!1)),"DenseMatrix, Array":s.referToSelf(j=>(Xt,Lt)=>$(Xt,o(Lt),j)),"DenseMatrix, any":s.referToSelf(j=>(Xt,Lt)=>_(Xt,Lt,j,!1)),"Array, Array":s.referToSelf(j=>(Xt,Lt)=>$(o(Xt),o(Lt),j).valueOf()),"Array, DenseMatrix":s.referToSelf(j=>(Xt,Lt)=>$(o(Xt),Lt,j)),"Array, SparseMatrix":s.referToSelf(j=>(Xt,Lt)=>b(o(Xt),Lt,j,!1)),"Array, any":s.referToSelf(j=>(Xt,Lt)=>_(o(Xt),Lt,j,!1).valueOf())})}),name$3H="or",dependencies$3H=["typed","matrix","equalScalar","DenseMatrix","concat"],createOr=factory(name$3H,dependencies$3H,a=>{var{typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d}=a,b=createMatAlgo03xDSf({typed:s}),_=createMatAlgo05xSfSf({typed:s,equalScalar:c}),$=createMatAlgo12xSfs({typed:s,DenseMatrix:h}),j=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:d});return s(name$3H,{"number, number":orNumber,"Complex, Complex":function(Lt,fr){return Lt.re!==0||Lt.im!==0||fr.re!==0||fr.im!==0},"BigNumber, BigNumber":function(Lt,fr){return!Lt.isZero()&&!Lt.isNaN()||!fr.isZero()&&!fr.isNaN()},"bigint, bigint":orNumber,"Unit, Unit":s.referToSelf(Xt=>(Lt,fr)=>Xt(Lt.value||0,fr.value||0))},j({SS:_,DS:b,Ss:$}))}),name$3G="xor",dependencies$3G=["typed","matrix","DenseMatrix","concat","SparseMatrix"],createXor=factory(name$3G,dependencies$3G,a=>{var{typed:s,matrix:o,DenseMatrix:c,concat:h,SparseMatrix:d}=a,b=createMatAlgo03xDSf({typed:s}),_=createMatAlgo07xSSf({typed:s,SparseMatrix:d}),$=createMatAlgo12xSfs({typed:s,DenseMatrix:c}),j=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:h});return s(name$3G,{"number, number":xorNumber,"Complex, Complex":function(Lt,fr){return(Lt.re!==0||Lt.im!==0)!=(fr.re!==0||fr.im!==0)},"bigint, bigint":xorNumber,"BigNumber, BigNumber":function(Lt,fr){return(!Lt.isZero()&&!Lt.isNaN())!=(!fr.isZero()&&!fr.isNaN())},"Unit, Unit":s.referToSelf(Xt=>(Lt,fr)=>Xt(Lt.value||0,fr.value||0))},j({SS:_,DS:b,Ss:$}))}),name$3F="concat",dependencies$3F=["typed","matrix","isInteger"],createConcat=factory(name$3F,dependencies$3F,a=>{var{typed:s,matrix:o,isInteger:c}=a;return s(name$3F,{"...Array | Matrix | number | BigNumber":function(d){var b,_=d.length,$=-1,j,Xt=!1,Lt=[];for(b=0;b<_;b++){var fr=d[b];if(isMatrix(fr)&&(Xt=!0),isNumber(fr)||isBigNumber(fr)){if(b!==_-1)throw new Error("Dimension must be specified as last argument");if(j=$,$=fr.valueOf(),!c($))throw new TypeError("Integer number expected for dimension");if($<0||b>0&&$>j)throw new IndexError($,j+1)}else{var Jr=clone$3(fr).valueOf(),Js=arraySize(Jr);if(Lt[b]=Jr,j=$,$=Js.length-1,b>0&&$!==j)throw new DimensionError(j+1,$+1)}}if(Lt.length===0)throw new SyntaxError("At least one matrix expected");for(var qs=Lt.shift();Lt.length;)qs=concat$1(qs,Lt.shift(),$);return Xt?o(qs):qs},"...string":function(d){return d.join("")}})}),name$3E="column",dependencies$3E=["typed","Index","matrix","range"],createColumn=factory(name$3E,dependencies$3E,a=>{var{typed:s,Index:o,matrix:c,range:h}=a;return s(name$3E,{"Matrix, number":d,"Array, number":function(_,$){return d(c(clone$3(_)),$).valueOf()}});function d(b,_){if(b.size().length!==2)throw new Error("Only two dimensional matrix is supported");validateIndex(_,b.size()[1]);var $=h(0,b.size()[0]),j=new o($,[_]),Xt=b.subset(j);return isMatrix(Xt)?Xt:c([[Xt]])}}),name$3D="count",dependencies$3D=["typed","size","prod"],createCount=factory(name$3D,dependencies$3D,a=>{var{typed:s,size:o,prod:c}=a;return s(name$3D,{string:function(d){return d.length},"Matrix | Array":function(d){return c(o(d))}})}),name$3C="cross",dependencies$3C=["typed","matrix","subtract","multiply"],createCross=factory(name$3C,dependencies$3C,a=>{var{typed:s,matrix:o,subtract:c,multiply:h}=a;return s(name$3C,{"Matrix, Matrix":function(_,$){return o(d(_.toArray(),$.toArray()))},"Matrix, Array":function(_,$){return o(d(_.toArray(),$))},"Array, Matrix":function(_,$){return o(d(_,$.toArray()))},"Array, Array":d});function d(b,_){var $=Math.max(arraySize(b).length,arraySize(_).length);b=squeeze$1(b),_=squeeze$1(_);var j=arraySize(b),Xt=arraySize(_);if(j.length!==1||Xt.length!==1||j[0]!==3||Xt[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+j.join(", ")+"], B = ["+Xt.join(", ")+"])");var Lt=[c(h(b[1],_[2]),h(b[2],_[1])),c(h(b[2],_[0]),h(b[0],_[2])),c(h(b[0],_[1]),h(b[1],_[0]))];return $>1?[Lt]:Lt}}),name$3B="diag",dependencies$3B=["typed","matrix","DenseMatrix","SparseMatrix"],createDiag=factory(name$3B,dependencies$3B,a=>{var{typed:s,matrix:o,DenseMatrix:c,SparseMatrix:h}=a;return s(name$3B,{Array:function(j){return d(j,0,arraySize(j),null)},"Array, number":function(j,Xt){return d(j,Xt,arraySize(j),null)},"Array, BigNumber":function(j,Xt){return d(j,Xt.toNumber(),arraySize(j),null)},"Array, string":function(j,Xt){return d(j,0,arraySize(j),Xt)},"Array, number, string":function(j,Xt,Lt){return d(j,Xt,arraySize(j),Lt)},"Array, BigNumber, string":function(j,Xt,Lt){return d(j,Xt.toNumber(),arraySize(j),Lt)},Matrix:function(j){return d(j,0,j.size(),j.storage())},"Matrix, number":function(j,Xt){return d(j,Xt,j.size(),j.storage())},"Matrix, BigNumber":function(j,Xt){return d(j,Xt.toNumber(),j.size(),j.storage())},"Matrix, string":function(j,Xt){return d(j,0,j.size(),Xt)},"Matrix, number, string":function(j,Xt,Lt){return d(j,Xt,j.size(),Lt)},"Matrix, BigNumber, string":function(j,Xt,Lt){return d(j,Xt.toNumber(),j.size(),Lt)}});function d($,j,Xt,Lt){if(!isInteger$1(j))throw new TypeError("Second parameter in function diag must be an integer");var fr=j>0?j:0,Jr=j<0?-j:0;switch(Xt.length){case 1:return b($,j,Lt,Xt[0],Jr,fr);case 2:return _($,j,Lt,Xt,Jr,fr)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function b($,j,Xt,Lt,fr,Jr){var Js=[Lt+fr,Lt+Jr];if(Xt&&Xt!=="sparse"&&Xt!=="dense")throw new TypeError("Unknown matrix type ".concat(Xt,'"'));var qs=Xt==="sparse"?h.diagonal(Js,$,j):c.diagonal(Js,$,j);return Xt!==null?qs:qs.valueOf()}function _($,j,Xt,Lt,fr,Jr){if(isMatrix($)){var Js=$.diagonal(j);return Xt!==null?Xt!==Js.storage()?o(Js,Xt):Js:Js.valueOf()}for(var qs=Math.min(Lt[0]-fr,Lt[1]-Jr),zo=[],js=0;js<qs;js++)zo[js]=$[js+fr][js+Jr];return Xt!==null?o(zo):zo}}),name$3A="filter",dependencies$3A=["typed"],createFilter=factory(name$3A,dependencies$3A,a=>{var{typed:s}=a;return s("filter",{"Array, function":_filterCallback,"Matrix, function":function(c,h){return c.create(_filterCallback(c.valueOf(),h),c.datatype())},"Array, RegExp":filterRegExp,"Matrix, RegExp":function(c,h){return c.create(filterRegExp(c.valueOf(),h),c.datatype())}})});function _filterCallback(a,s){var o=optimizeCallback(s,a,"filter");return o.isUnary?filter$1(a,o.fn):filter$1(a,function(c,h,d){return o.fn(c,[h],d)})}var name$3z="flatten",dependencies$3z=["typed"],createFlatten=factory(name$3z,dependencies$3z,a=>{var{typed:s}=a;return s(name$3z,{Array:function(c){return flatten$1(c)},DenseMatrix:function(c){return c.create(flatten$1(c.valueOf(),!0),c.datatype())},SparseMatrix:function(c){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),name$3y="forEach",dependencies$3y=["typed"],createForEach=factory(name$3y,dependencies$3y,a=>{var{typed:s}=a;return s(name$3y,{"Array, function":_forEach,"Matrix, function":function(c,h){c.forEach(h)}})});function _forEach(a,s){var o=optimizeCallback(s,a,name$3y);deepForEach$1(a,o.fn,o.isUnary)}var name$3x="getMatrixDataType",dependencies$3x=["typed"],createGetMatrixDataType=factory(name$3x,dependencies$3x,a=>{var{typed:s}=a;return s(name$3x,{Array:function(c){return getArrayDataType(c,typeOf$1)},Matrix:function(c){return c.getDataType()}})}),name$3w="identity",dependencies$3w=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],createIdentity=factory(name$3w,dependencies$3w,a=>{var{typed:s,config:o,matrix:c,BigNumber:h,DenseMatrix:d,SparseMatrix:b}=a;return s(name$3w,{"":function(){return o.matrix==="Matrix"?c([]):[]},string:function(Xt){return c(Xt)},"number | BigNumber":function(Xt){return $(Xt,Xt,o.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(Xt,Lt){return $(Xt,Xt,Lt)},"number | BigNumber, number | BigNumber":function(Xt,Lt){return $(Xt,Lt,o.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(Xt,Lt,fr){return $(Xt,Lt,fr)},Array:function(Xt){return _(Xt)},"Array, string":function(Xt,Lt){return _(Xt,Lt)},Matrix:function(Xt){return _(Xt.valueOf(),Xt.storage())},"Matrix, string":function(Xt,Lt){return _(Xt.valueOf(),Lt)}});function _(j,Xt){switch(j.length){case 0:return Xt?c(Xt):[];case 1:return $(j[0],j[0],Xt);case 2:return $(j[0],j[1],Xt);default:throw new Error("Vector containing two values expected")}}function $(j,Xt,Lt){var fr=isBigNumber(j)||isBigNumber(Xt)?h:null;if(isBigNumber(j)&&(j=j.toNumber()),isBigNumber(Xt)&&(Xt=Xt.toNumber()),!isInteger$1(j)||j<1)throw new Error("Parameters in function identity must be positive integers");if(!isInteger$1(Xt)||Xt<1)throw new Error("Parameters in function identity must be positive integers");var Jr=fr?new h(1):1,Js=fr?new fr(0):0,qs=[j,Xt];if(Lt){if(Lt==="sparse")return b.diagonal(qs,Jr,0,Js);if(Lt==="dense")return d.diagonal(qs,Jr,0,Js);throw new TypeError('Unknown matrix type "'.concat(Lt,'"'))}for(var zo=resize$1([],qs,Js),js=j<Xt?j:Xt,eu=0;eu<js;eu++)zo[eu][eu]=Jr;return zo}}),name$3v="kron",dependencies$3v=["typed","matrix","multiplyScalar"],createKron=factory(name$3v,dependencies$3v,a=>{var{typed:s,matrix:o,multiplyScalar:c}=a;return s(name$3v,{"Matrix, Matrix":function(_,$){return o(d(_.toArray(),$.toArray()))},"Matrix, Array":function(_,$){return o(d(_.toArray(),$))},"Array, Matrix":function(_,$){return o(d(_,$.toArray()))},"Array, Array":d});function h(b,_){return b.flatMap($=>_.map(j=>c($,j)))}function d(b,_){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if($<0){var j=arraySize(b).length,Xt=arraySize(_).length;for($=Math.max(j,Xt);j++<$;)b=[b];for(;Xt++<$;)_=[_]}return $===1?h(b,_):b.flatMap(Lt=>_.map(fr=>d(Lt,fr,$-1)))}}),name$3u="map",dependencies$3u=["typed"],createMap=factory(name$3u,dependencies$3u,a=>{var{typed:s}=a;return s(name$3u,{"Array, function":_,"Matrix, function":function(j,Xt){return j.map(Xt)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":($,j,Xt)=>o([$,j,...Xt.slice(0,Xt.length-1)],Xt[Xt.length-1])});function o($,j){if(typeof j!="function")throw new Error("Last argument must be a callback function");var Xt=$[0].isMatrix,Lt=$.map(Bo=>Bo.isMatrix?Bo.size():arraySize(Bo)),fr=broadcastSizes(...Lt),Jr=$.length,Js=Xt?(Bo,vu)=>Bo.get(vu):get,qs=$.map((Bo,vu)=>{var t1=Lt[vu].map(()=>0);return Bo.isMatrix?Bo.get(t1):get(Bo,t1)}),zo=s.isTypedFunction(j)?b(j,qs,fr.map(()=>0),$):d(j,Jr);if(zo<2){var js=h(zo,j,null);return c($,js)}var eu=Xt?$.map(Bo=>Bo.isMatrix?Bo.create(broadcastTo(Bo.toArray(),fr),Bo.datatype()):$[0].create(broadcastTo(Bo.valueOf(),fr))):$.map(Bo=>Bo.isMatrix?broadcastTo(Bo.toArray(),fr):broadcastTo(Bo,fr)),Oo=h(zo,j,eu),tu=(Bo,vu)=>Oo([Bo,...eu.slice(1).map(t1=>Js(t1,vu))],vu);return Xt?eu[0].map(tu):_(eu[0],tu)}function c($,j){var Xt=$[0],Lt=$.map(Bo=>Bo.isMatrix?Bo.valueOf():Bo),fr=$.map(Bo=>Bo.isMatrix?Bo.size():arraySize(Bo)),Jr=broadcastSizes(...fr),Js=fr.map(Bo=>Jr.length-Bo.length),qs=Jr.length-1,zo=j.length>1,js=zo?[]:null,eu=tu(Lt,0);if(Xt.isMatrix){var Oo=Xt.create();return Oo._data=eu,Oo._size=Jr,Oo}else return eu;function tu(Bo){var vu=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t1=Jr[vu],e1=Array(t1);if(vu<qs)for(var r1=function(h1){js&&(js[vu]=h1),e1[h1]=tu(Bo.map((m1,l1)=>Js[l1]>vu?m1:m1.length===1?m1[0]:m1[h1]),vu+1)},a1=0;a1<t1;a1++)r1(a1);else for(var i1=function(h1){js&&(js[vu]=h1),e1[h1]=j(Bo.map(m1=>m1.length===1?m1[0]:m1[h1]),js?js.slice():void 0)},s1=0;s1<t1;s1++)i1(s1);return e1}}function h($,j,Xt){switch($){case 0:return Lt=>j(...Lt);case 1:return(Lt,fr)=>j(...Lt,fr);case 2:return(Lt,fr)=>j(...Lt,fr,...Xt)}}function d($,j){var Xt=$.toString();if(/arguments/.test(Xt))return 2;var Lt=Xt.match(/\(.*?\)/);return/\.\.\./.test(Lt)||$.length>j+1?2:$.length===j+1?1:0}function b($,j,Xt,Lt){return s.resolve($,[...j,Xt,...Lt])!==null?2:s.resolve($,[...j,Xt])!==null?1:(s.resolve($,j)!==null,0)}function _($,j){var Xt=optimizeCallback(j,$,name$3u);return deepMap$1($,Xt.fn,Xt.isUnary)}}),name$3t="diff",dependencies$3t=["typed","matrix","subtract","number"],createDiff=factory(name$3t,dependencies$3t,a=>{var{typed:s,matrix:o,subtract:c,number:h}=a;return s(name$3t,{"Array | Matrix":function(Xt){return isMatrix(Xt)?o(b(Xt.toArray())):b(Xt)},"Array | Matrix, number":function(Xt,Lt){if(!isInteger$1(Lt))throw new RangeError("Dimension must be a whole number");return isMatrix(Xt)?o(d(Xt.toArray(),Lt)):d(Xt,Lt)},"Array, BigNumber":s.referTo("Array,number",j=>(Xt,Lt)=>j(Xt,h(Lt))),"Matrix, BigNumber":s.referTo("Matrix,number",j=>(Xt,Lt)=>j(Xt,h(Lt)))});function d(j,Xt){if(isMatrix(j)&&(j=j.toArray()),!Array.isArray(j))throw RangeError("Array/Matrix does not have that many dimensions");if(Xt>0){var Lt=[];return j.forEach(fr=>{Lt.push(d(fr,Xt-1))}),Lt}else{if(Xt===0)return b(j);throw RangeError("Cannot have negative dimension")}}function b(j){for(var Xt=[],Lt=j.length,fr=1;fr<Lt;fr++)Xt.push(_(j[fr-1],j[fr]));return Xt}function _(j,Xt){isMatrix(j)&&(j=j.toArray()),isMatrix(Xt)&&(Xt=Xt.toArray());var Lt=Array.isArray(j),fr=Array.isArray(Xt);if(Lt&&fr)return $(j,Xt);if(!Lt&&!fr)return c(Xt,j);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function $(j,Xt){if(j.length!==Xt.length)throw RangeError("Not all sub-arrays have the same length");for(var Lt=[],fr=j.length,Jr=0;Jr<fr;Jr++)Lt.push(_(j[Jr],Xt[Jr]));return Lt}}),name$3s="ones",dependencies$3s=["typed","config","matrix","BigNumber"],createOnes=factory(name$3s,dependencies$3s,a=>{var{typed:s,config:o,matrix:c,BigNumber:h}=a;return s("ones",{"":function(){return o.matrix==="Array"?d([]):d([],"default")},"...number | BigNumber | string":function(j){var Xt=j[j.length-1];if(typeof Xt=="string"){var Lt=j.pop();return d(j,Lt)}else return o.matrix==="Array"?d(j):d(j,"default")},Array:d,Matrix:function(j){var Xt=j.storage();return d(j.valueOf(),Xt)},"Array | Matrix, string":function(j,Xt){return d(j.valueOf(),Xt)}});function d($,j){var Xt=b($),Lt=Xt?new h(1):1;if(_($),j){var fr=c(j);return $.length>0?fr.resize($,Lt):fr}else{var Jr=[];return $.length>0?resize$1(Jr,$,Lt):Jr}}function b($){var j=!1;return $.forEach(function(Xt,Lt,fr){isBigNumber(Xt)&&(j=!0,fr[Lt]=Xt.toNumber())}),j}function _($){$.forEach(function(j){if(typeof j!="number"||!isInteger$1(j)||j<0)throw new Error("Parameters in function ones must be positive integers")})}});function noBignumber(){throw new Error('No "bignumber" implementation available')}function noFraction(){throw new Error('No "fraction" implementation available')}function noMatrix(){throw new Error('No "matrix" implementation available')}var name$3r="range",dependencies$3r=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],createRange=factory(name$3r,dependencies$3r,a=>{var{typed:s,config:o,matrix:c,bignumber:h,smaller:d,smallerEq:b,larger:_,largerEq:$,add:j,isZero:Xt,isPositive:Lt}=a;return s(name$3r,{string:Jr,"string, boolean":Jr,number:function(js){throw new TypeError("Too few arguments to function range(): ".concat(js))},boolean:function(js){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(js,", number|bigint|BigNumber|Fraction"))},"number, number":function(js,eu){return fr(Js(js,eu,1,!1))},"number, number, number":function(js,eu,Oo){return fr(Js(js,eu,Oo,!1))},"number, number, boolean":function(js,eu,Oo){return fr(Js(js,eu,1,Oo))},"number, number, number, boolean":function(js,eu,Oo,tu){return fr(Js(js,eu,Oo,tu))},"bigint, bigint|number":function(js,eu){return fr(Js(js,eu,1n,!1))},"number, bigint":function(js,eu){return fr(Js(BigInt(js),eu,1n,!1))},"bigint, bigint|number, bigint|number":function(js,eu,Oo){return fr(Js(js,eu,BigInt(Oo),!1))},"number, bigint, bigint|number":function(js,eu,Oo){return fr(Js(BigInt(js),eu,BigInt(Oo),!1))},"bigint, bigint|number, boolean":function(js,eu,Oo){return fr(Js(js,eu,1n,Oo))},"number, bigint, boolean":function(js,eu,Oo){return fr(Js(BigInt(js),eu,1n,Oo))},"bigint, bigint|number, bigint|number, boolean":function(js,eu,Oo,tu){return fr(Js(js,eu,BigInt(Oo),tu))},"number, bigint, bigint|number, boolean":function(js,eu,Oo,tu){return fr(Js(BigInt(js),eu,BigInt(Oo),tu))},"BigNumber, BigNumber":function(js,eu){var Oo=js.constructor;return fr(Js(js,eu,new Oo(1),!1))},"BigNumber, BigNumber, BigNumber":function(js,eu,Oo){return fr(Js(js,eu,Oo,!1))},"BigNumber, BigNumber, boolean":function(js,eu,Oo){var tu=js.constructor;return fr(Js(js,eu,new tu(1),Oo))},"BigNumber, BigNumber, BigNumber, boolean":function(js,eu,Oo,tu){return fr(Js(js,eu,Oo,tu))},"Fraction, Fraction":function(js,eu){return fr(Js(js,eu,1,!1))},"Fraction, Fraction, Fraction":function(js,eu,Oo){return fr(Js(js,eu,Oo,!1))},"Fraction, Fraction, boolean":function(js,eu,Oo){return fr(Js(js,eu,1,Oo))},"Fraction, Fraction, Fraction, boolean":function(js,eu,Oo,tu){return fr(Js(js,eu,Oo,tu))},"Unit, Unit, Unit":function(js,eu,Oo){return fr(Js(js,eu,Oo,!1))},"Unit, Unit, Unit, boolean":function(js,eu,Oo,tu){return fr(Js(js,eu,Oo,tu))}});function fr(zo){return o.matrix==="Matrix"?c?c(zo):noMatrix():zo}function Jr(zo,js){var eu=qs(zo);if(!eu)throw new SyntaxError('String "'+zo+'" is no valid range');return o.number==="BigNumber"?(h===void 0&&noBignumber(),fr(Js(h(eu.start),h(eu.end),h(eu.step)))):fr(Js(eu.start,eu.end,eu.step,js))}function Js(zo,js,eu,Oo){var tu=[];if(Xt(eu))throw new Error("Step must be non-zero");for(var Bo=Lt(eu)?Oo?b:d:Oo?$:_,vu=zo;Bo(vu,js);)tu.push(vu),vu=j(vu,eu);return tu}function qs(zo){var js=zo.split(":"),eu=js.map(function(tu){return Number(tu)}),Oo=eu.some(function(tu){return isNaN(tu)});if(Oo)return null;switch(eu.length){case 2:return{start:eu[0],end:eu[1],step:1};case 3:return{start:eu[0],end:eu[2],step:eu[1]};default:return null}}}),name$3q="reshape",dependencies$3q=["typed","isInteger","matrix"],createReshape=factory(name$3q,dependencies$3q,a=>{var{typed:s,isInteger:o}=a;return s(name$3q,{"Matrix, Array":function(h,d){return h.reshape(d,!0)},"Array, Array":function(h,d){return d.forEach(function(b){if(!o(b))throw new TypeError("Invalid size for dimension: "+b)}),reshape$1(h,d)}})}),name$3p="resize",dependencies$3p=["config","matrix"],createResize=factory(name$3p,dependencies$3p,a=>{var{config:s,matrix:o}=a;return function(d,b,_){if(arguments.length!==2&&arguments.length!==3)throw new ArgumentsError("resize",arguments.length,2,3);if(isMatrix(b)&&(b=b.valueOf()),isBigNumber(b[0])&&(b=b.map(function(Xt){return isBigNumber(Xt)?Xt.toNumber():Xt})),isMatrix(d))return d.resize(b,_,!0);if(typeof d=="string")return c(d,b,_);var $=Array.isArray(d)?!1:s.matrix!=="Array";if(b.length===0){for(;Array.isArray(d);)d=d[0];return clone$3(d)}else{Array.isArray(d)||(d=[d]),d=clone$3(d);var j=resize$1(d,b,_);return $?o(j):j}};function c(h,d,b){if(b!==void 0){if(typeof b!="string"||b.length!==1)throw new TypeError("Single character expected as defaultValue")}else b=" ";if(d.length!==1)throw new DimensionError(d.length,1);var _=d[0];if(typeof _!="number"||!isInteger$1(_))throw new TypeError("Invalid size, must contain positive integers (size: "+format$1(d)+")");if(h.length>_)return h.substring(0,_);if(h.length<_){for(var $=h,j=0,Xt=_-h.length;j<Xt;j++)$+=b;return $}else return h}}),name$3o="rotate",dependencies$3o=["typed","multiply","rotationMatrix"],createRotate=factory(name$3o,dependencies$3o,a=>{var{typed:s,multiply:o,rotationMatrix:c}=a;return s(name$3o,{"Array , number | BigNumber | Complex | Unit":function(b,_){h(b,2);var $=o(c(_),b);return $.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(b,_){return h(b,2),o(c(_),b)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(b,_,$){h(b,3);var j=o(c(_,$),b);return j},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(b,_,$){return h(b,3),o(c(_,$),b)}});function h(d,b){var _=Array.isArray(d)?arraySize(d):d.size();if(_.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(b));if(_.length===2&&_[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(b));if(_[0]!==b)throw new RangeError("Vector must be of dimensions 1x".concat(b))}}),name$3n="rotationMatrix",dependencies$3n=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],createRotationMatrix=factory(name$3n,dependencies$3n,a=>{var{typed:s,config:o,multiplyScalar:c,addScalar:h,unaryMinus:d,norm:b,BigNumber:_,matrix:$,DenseMatrix:j,SparseMatrix:Xt,cos:Lt,sin:fr}=a;return s(name$3n,{"":function(){return o.matrix==="Matrix"?$([]):[]},string:function(Oo){return $(Oo)},"number | BigNumber | Complex | Unit":function(Oo){return Jr(Oo,o.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(Oo,tu){return Jr(Oo,tu)},"number | BigNumber | Complex | Unit, Array":function(Oo,tu){var Bo=$(tu);return Js(Bo),js(Oo,Bo,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(Oo,tu){Js(tu);var Bo=tu.storage()||(o.matrix==="Matrix"?"dense":void 0);return js(Oo,tu,Bo)},"number | BigNumber | Complex | Unit, Array, string":function(Oo,tu,Bo){var vu=$(tu);return Js(vu),js(Oo,vu,Bo)},"number | BigNumber | Complex | Unit, Matrix, string":function(Oo,tu,Bo){return Js(tu),js(Oo,tu,Bo)}});function Jr(eu,Oo){var tu=isBigNumber(eu),Bo=tu?new _(-1):-1,vu=Lt(eu),t1=fr(eu),e1=[[vu,c(Bo,t1)],[t1,vu]];return zo(e1,Oo)}function Js(eu){var Oo=eu.size();if(Oo.length<1||Oo[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function qs(eu){return eu.reduce((Oo,tu)=>c(Oo,tu))}function zo(eu,Oo){if(Oo){if(Oo==="sparse")return new Xt(eu);if(Oo==="dense")return new j(eu);throw new TypeError('Unknown matrix type "'.concat(Oo,'"'))}return eu}function js(eu,Oo,tu){var Bo=b(Oo);if(Bo===0)throw new RangeError("Rotation around zero vector");var vu=isBigNumber(eu)?_:null,t1=vu?new vu(1):1,e1=vu?new vu(-1):-1,r1=vu?new vu(Oo.get([0])/Bo):Oo.get([0])/Bo,a1=vu?new vu(Oo.get([1])/Bo):Oo.get([1])/Bo,i1=vu?new vu(Oo.get([2])/Bo):Oo.get([2])/Bo,s1=Lt(eu),c1=h(t1,d(s1)),h1=fr(eu),m1=h(s1,qs([r1,r1,c1])),l1=h(qs([r1,a1,c1]),qs([e1,i1,h1])),f1=h(qs([r1,i1,c1]),qs([a1,h1])),p1=h(qs([r1,a1,c1]),qs([i1,h1])),d1=h(s1,qs([a1,a1,c1])),b1=h(qs([a1,i1,c1]),qs([e1,r1,h1])),C1=h(qs([r1,i1,c1]),qs([e1,a1,h1])),g1=h(qs([a1,i1,c1]),qs([r1,h1])),o1=h(s1,qs([i1,i1,c1])),S1=[[m1,l1,f1],[p1,d1,b1],[C1,g1,o1]];return zo(S1,tu)}}),name$3m="row",dependencies$3m=["typed","Index","matrix","range"],createRow=factory(name$3m,dependencies$3m,a=>{var{typed:s,Index:o,matrix:c,range:h}=a;return s(name$3m,{"Matrix, number":d,"Array, number":function(_,$){return d(c(clone$3(_)),$).valueOf()}});function d(b,_){if(b.size().length!==2)throw new Error("Only two dimensional matrix is supported");validateIndex(_,b.size()[0]);var $=h(0,b.size()[1]),j=new o([_],$),Xt=b.subset(j);return isMatrix(Xt)?Xt:c([[Xt]])}}),name$3l="size",dependencies$3l=["typed"],createSize=factory(name$3l,dependencies$3l,a=>{var{typed:s}=a;return s(name$3l,{Matrix:o=>o.size(),Array:arraySize,string:o=>[o.length],"number | Complex | BigNumber | Unit | boolean | null":o=>[]})}),name$3k="squeeze",dependencies$3k=["typed"],createSqueeze=factory(name$3k,dependencies$3k,a=>{var{typed:s}=a;return s(name$3k,{Array:function(c){return squeeze$1(clone$3(c))},Matrix:function(c){var h=squeeze$1(c.toArray());return Array.isArray(h)?c.create(h,c.datatype()):h},any:function(c){return clone$3(c)}})}),name$3j="subset",dependencies$3j=["typed","matrix","zeros","add"],createSubset=factory(name$3j,dependencies$3j,a=>{var{typed:s,matrix:o,zeros:c,add:h}=a;return s(name$3j,{"Matrix, Index":function(_,$){return isEmptyIndex($)?o():(validateIndexSourceSize(_,$),_.subset($))},"Array, Index":s.referTo("Matrix, Index",function(b){return function(_,$){var j=b(o(_),$);return $.isScalar()?j:j.valueOf()}}),"Object, Index":_getObjectProperty,"string, Index":_getSubstring,"Matrix, Index, any, any":function(_,$,j,Xt){return isEmptyIndex($)?_:(validateIndexSourceSize(_,$),_.clone().subset($,d(j,$),Xt))},"Array, Index, any, any":s.referTo("Matrix, Index, any, any",function(b){return function(_,$,j,Xt){var Lt=b(o(_),$,j,Xt);return Lt.isMatrix?Lt.valueOf():Lt}}),"Array, Index, any":s.referTo("Matrix, Index, any, any",function(b){return function(_,$,j){return b(o(_),$,j,void 0).valueOf()}}),"Matrix, Index, any":s.referTo("Matrix, Index, any, any",function(b){return function(_,$,j){return b(_,$,j,void 0)}}),"string, Index, string":_setSubstring,"string, Index, string, string":_setSubstring,"Object, Index, any":_setObjectProperty});function d(b,_){if(typeof b=="string")throw new Error("can't boradcast a string");if(_.isScalar())return b;var $=_.size();if($.every(j=>j>0))try{return h(b,c($))}catch{return b}else return b}});function _getSubstring(a,s){if(!isIndex(s))throw new TypeError("Index expected");if(isEmptyIndex(s))return"";if(validateIndexSourceSize(Array.from(a),s),s.size().length!==1)throw new DimensionError(s.size().length,1);var o=a.length;validateIndex(s.min()[0],o),validateIndex(s.max()[0],o);var c=s.dimension(0),h="";function d(b){h+=a.charAt(b)}return Number.isInteger(c)?d(c):c.forEach(d),h}function _setSubstring(a,s,o,c){if(!s||s.isIndex!==!0)throw new TypeError("Index expected");if(isEmptyIndex(s))return a;if(validateIndexSourceSize(Array.from(a),s),s.size().length!==1)throw new DimensionError(s.size().length,1);if(c!==void 0){if(typeof c!="string"||c.length!==1)throw new TypeError("Single character expected as defaultValue")}else c=" ";var h=s.dimension(0),d=Number.isInteger(h)?1:h.size()[0];if(d!==o.length)throw new DimensionError(h.size()[0],o.length);var b=a.length;validateIndex(s.min()[0]),validateIndex(s.max()[0]);for(var _=[],$=0;$<b;$++)_[$]=a.charAt($);function j(fr,Jr){_[fr]=o.charAt(Jr[0])}if(Number.isInteger(h)?j(h,[0]):h.forEach(j),_.length>b)for(var Xt=b-1,Lt=_.length;Xt<Lt;Xt++)_[Xt]||(_[Xt]=c);return _.join("")}function _getObjectProperty(a,s){if(!isEmptyIndex(s)){if(s.size().length!==1)throw new DimensionError(s.size(),1);var o=s.dimension(0);if(typeof o!="string")throw new TypeError("String expected as index to retrieve an object property");return getSafeProperty(a,o)}}function _setObjectProperty(a,s,o){if(isEmptyIndex(s))return a;if(s.size().length!==1)throw new DimensionError(s.size(),1);var c=s.dimension(0);if(typeof c!="string")throw new TypeError("String expected as index to retrieve an object property");var h=clone$3(a);return setSafeProperty(h,c,o),h}var name$3i="transpose",dependencies$3i=["typed","matrix"],createTranspose=factory(name$3i,dependencies$3i,a=>{var{typed:s,matrix:o}=a;return s(name$3i,{Array:b=>c(o(b)).valueOf(),Matrix:c,any:clone$3});function c(b){var _=b.size(),$;switch(_.length){case 1:$=b.clone();break;case 2:{var j=_[0],Xt=_[1];if(Xt===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+format$1(_)+")");switch(b.storage()){case"dense":$=h(b,j,Xt);break;case"sparse":$=d(b,j,Xt);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+format$1(_)+")")}return $}function h(b,_,$){for(var j=b._data,Xt=[],Lt,fr=0;fr<$;fr++){Lt=Xt[fr]=[];for(var Jr=0;Jr<_;Jr++)Lt[Jr]=clone$3(j[Jr][fr])}return b.createDenseMatrix({data:Xt,size:[$,_],datatype:b._datatype})}function d(b,_,$){for(var j=b._values,Xt=b._index,Lt=b._ptr,fr=j?[]:void 0,Jr=[],Js=[],qs=[],zo=0;zo<_;zo++)qs[zo]=0;var js,eu,Oo;for(js=0,eu=Xt.length;js<eu;js++)qs[Xt[js]]++;for(var tu=0,Bo=0;Bo<_;Bo++)Js.push(tu),tu+=qs[Bo],qs[Bo]=Js[Bo];for(Js.push(tu),Oo=0;Oo<$;Oo++)for(var vu=Lt[Oo],t1=Lt[Oo+1],e1=vu;e1<t1;e1++){var r1=qs[Xt[e1]]++;Jr[r1]=Oo,j&&(fr[r1]=clone$3(j[e1]))}return b.createSparseMatrix({values:fr,index:Jr,ptr:Js,size:[$,_],datatype:b._datatype})}}),name$3h="ctranspose",dependencies$3h=["typed","transpose","conj"],createCtranspose=factory(name$3h,dependencies$3h,a=>{var{typed:s,transpose:o,conj:c}=a;return s(name$3h,{any:function(d){return c(o(d))}})}),name$3g="zeros",dependencies$3g=["typed","config","matrix","BigNumber"],createZeros=factory(name$3g,dependencies$3g,a=>{var{typed:s,config:o,matrix:c,BigNumber:h}=a;return s(name$3g,{"":function(){return o.matrix==="Array"?d([]):d([],"default")},"...number | BigNumber | string":function(j){var Xt=j[j.length-1];if(typeof Xt=="string"){var Lt=j.pop();return d(j,Lt)}else return o.matrix==="Array"?d(j):d(j,"default")},Array:d,Matrix:function(j){var Xt=j.storage();return d(j.valueOf(),Xt)},"Array | Matrix, string":function(j,Xt){return d(j.valueOf(),Xt)}});function d($,j){var Xt=b($),Lt=Xt?new h(0):0;if(_($),j){var fr=c(j);return $.length>0?fr.resize($,Lt):fr}else{var Jr=[];return $.length>0?resize$1(Jr,$,Lt):Jr}}function b($){var j=!1;return $.forEach(function(Xt,Lt,fr){isBigNumber(Xt)&&(j=!0,fr[Lt]=Xt.toNumber())}),j}function _($){$.forEach(function(j){if(typeof j!="number"||!isInteger$1(j)||j<0)throw new Error("Parameters in function zeros must be positive integers")})}}),name$3f="fft",dependencies$3f=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],createFft=factory(name$3f,dependencies$3f,a=>{var{typed:s,matrix:o,addScalar:c,multiplyScalar:h,divideScalar:d,exp:b,tau:_,i:$,dotDivide:j,conj:Xt,pow:Lt,ceil:fr,log2:Jr}=a;return s(name$3f,{Array:Js,Matrix:function(Oo){return Oo.create(Js(Oo.valueOf()),Oo.datatype())}});function Js(eu){var Oo=arraySize(eu);return Oo.length===1?js(eu,Oo[0]):qs(eu.map(tu=>Js(tu,Oo.slice(1))),0)}function qs(eu,Oo){var tu=arraySize(eu);if(Oo!==0)return new Array(tu[0]).fill(0).map((vu,t1)=>qs(eu[t1],Oo-1));if(tu.length===1)return js(eu);function Bo(vu){var t1=arraySize(vu);return new Array(t1[1]).fill(0).map((e1,r1)=>new Array(t1[0]).fill(0).map((a1,i1)=>vu[i1][r1]))}return Bo(qs(Bo(eu),1))}function zo(eu){for(var Oo=eu.length,tu=b(d(h(-1,h($,_)),Oo)),Bo=[],vu=1-Oo;vu<Oo;vu++)Bo.push(Lt(tu,d(Lt(vu,2),2)));for(var t1=Lt(2,fr(Jr(Oo+Oo-1))),e1=[...new Array(Oo).fill(0).map((l1,f1)=>h(eu[f1],Bo[Oo-1+f1])),...new Array(t1-Oo).fill(0)],r1=[...new Array(Oo+Oo-1).fill(0).map((l1,f1)=>d(1,Bo[f1])),...new Array(t1-(Oo+Oo-1)).fill(0)],a1=js(e1),i1=js(r1),s1=new Array(t1).fill(0).map((l1,f1)=>h(a1[f1],i1[f1])),c1=j(Xt(Js(Xt(s1))),t1),h1=[],m1=Oo-1;m1<Oo+Oo-1;m1++)h1.push(h(c1[m1],Bo[m1]));return h1}function js(eu){var Oo=eu.length;if(Oo===1)return[eu[0]];if(Oo%2===0){for(var tu=[...js(eu.filter((e1,r1)=>r1%2===0)),...js(eu.filter((e1,r1)=>r1%2===1))],Bo=0;Bo<Oo/2;Bo++){var vu=tu[Bo],t1=h(tu[Bo+Oo/2],b(h(h(_,$),d(-Bo,Oo))));tu[Bo]=c(vu,t1),tu[Bo+Oo/2]=c(vu,h(-1,t1))}return tu}else return zo(eu)}}),name$3e="ifft",dependencies$3e=["typed","fft","dotDivide","conj"],createIfft=factory(name$3e,dependencies$3e,a=>{var{typed:s,fft:o,dotDivide:c,conj:h}=a;return s(name$3e,{"Array | Matrix":function(b){var _=isMatrix(b)?b.size():arraySize(b);return c(h(o(h(b))),_.reduce(($,j)=>$*j,1))}})});function _typeof(a){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(a)}function toPrimitive(a,s){if(_typeof(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var c=o.call(a,s);if(_typeof(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}function toPropertyKey(a){var s=toPrimitive(a,"string");return _typeof(s)=="symbol"?s:s+""}function _defineProperty(a,s,o){return(s=toPropertyKey(s))in a?Object.defineProperty(a,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[s]=o,a}function ownKeys$3(a,s){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),o.push.apply(o,c)}return o}function _objectSpread$3(a){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$3(Object(o),!0).forEach(function(c){_defineProperty(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):ownKeys$3(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}var name$3d="solveODE",dependencies$3d=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],createSolveODE=factory(name$3d,dependencies$3d,a=>{var{typed:s,add:o,subtract:c,multiply:h,divide:d,max:b,map:_,abs:$,isPositive:j,isNegative:Xt,larger:Lt,smaller:fr,matrix:Jr,bignumber:Js,unaryMinus:qs}=a;function zo(e1){return function(r1,a1,i1,s1){var c1=!(a1.length===2&&(a1.every(vu)||a1.every(isUnit)));if(c1)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var h1=a1[0],m1=a1[1],l1=Lt(m1,h1),f1=s1.firstStep;if(f1!==void 0&&!j(f1))throw new Error('"firstStep" must be positive');var p1=s1.maxStep;if(p1!==void 0&&!j(p1))throw new Error('"maxStep" must be positive');var d1=s1.minStep;if(d1&&Xt(d1))throw new Error('"minStep" must be positive or zero');var b1=[h1,m1,f1,d1,p1].filter(y1=>y1!==void 0);if(!(b1.every(vu)||b1.every(isUnit)))throw new Error('Inconsistent type of "t" dependant variables');for(var C1=1,g1=s1.tol?s1.tol:1e-4,o1=s1.minDelta?s1.minDelta:.2,S1=s1.maxDelta?s1.maxDelta:5,v1=s1.maxIter?s1.maxIter:1e4,B1=[h1,m1,...i1,p1,d1].some(isBigNumber),[T1,w1,x1,M1]=B1?[Js(e1.a),Js(e1.c),Js(e1.b),Js(e1.bp)]:[e1.a,e1.c,e1.b,e1.bp],O1=f1?l1?f1:qs(f1):d(c(m1,h1),C1),N1=[h1],L1=[i1],G1=c(x1,M1),q1=0,H1=0,W1=tu(l1),j1=Bo(l1);W1(N1[q1],m1);){var Q1=[];O1=j1(N1[q1],m1,O1),Q1.push(r1(N1[q1],L1[q1]));for(var rv=1;rv<w1.length;++rv)Q1.push(r1(o(N1[q1],h(w1[rv],O1)),o(L1[q1],h(O1,T1[rv],Q1))));var $1=b($(_(h(G1,Q1),y1=>isUnit(y1)?y1.value:y1)));$1<g1&&g1/$1>1/4&&(N1.push(o(N1[q1],O1)),L1.push(o(L1[q1],h(O1,x1,Q1))),q1++);var A1=.84*(g1/$1)**(1/5);if(fr(A1,o1)?A1=o1:Lt(A1,S1)&&(A1=S1),A1=B1?Js(A1):A1,O1=h(O1,A1),p1&&Lt($(O1),p1)?O1=l1?p1:qs(p1):d1&&fr($(O1),d1)&&(O1=l1?d1:qs(d1)),H1++,H1>v1)throw new Error("Maximum number of iterations reached, try changing options")}return{t:N1,y:L1}}}function js(e1,r1,a1,i1){var s1=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],c1=[null,1/2,3/4,1],h1=[2/9,1/3,4/9,0],m1=[7/24,1/4,1/3,1/8],l1={a:s1,c:c1,b:h1,bp:m1};return zo(l1)(e1,r1,a1,i1)}function eu(e1,r1,a1,i1){var s1=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],c1=[null,1/5,3/10,4/5,8/9,1,1],h1=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],m1=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],l1={a:s1,c:c1,b:h1,bp:m1};return zo(l1)(e1,r1,a1,i1)}function Oo(e1,r1,a1,i1){var s1=i1.method?i1.method:"RK45",c1={RK23:js,RK45:eu};if(s1.toUpperCase()in c1){var h1=_objectSpread$3({},i1);return delete h1.method,c1[s1.toUpperCase()](e1,r1,a1,h1)}else{var m1=Object.keys(c1).map(f1=>'"'.concat(f1,'"')),l1="".concat(m1.slice(0,-1).join(", ")," and ").concat(m1.slice(-1));throw new Error('Unavailable method "'.concat(s1,'". Available methods are ').concat(l1))}}function tu(e1){return e1?fr:Lt}function Bo(e1){var r1=e1?Lt:fr;return function(a1,i1,s1){var c1=o(a1,s1);return r1(c1,i1)?c(i1,a1):s1}}function vu(e1){return isBigNumber(e1)||isNumber(e1)}function t1(e1,r1,a1,i1){var s1=Oo(e1,r1.toArray(),a1.toArray(),i1);return{t:Jr(s1.t),y:Jr(s1.y)}}return s("solveODE",{"function, Array, Array, Object":Oo,"function, Matrix, Matrix, Object":t1,"function, Array, Array":(e1,r1,a1)=>Oo(e1,r1,a1,{}),"function, Matrix, Matrix":(e1,r1,a1)=>t1(e1,r1,a1,{}),"function, Array, number | BigNumber | Unit":(e1,r1,a1)=>{var i1=Oo(e1,r1,[a1],{});return{t:i1.t,y:i1.y.map(s1=>s1[0])}},"function, Matrix, number | BigNumber | Unit":(e1,r1,a1)=>{var i1=Oo(e1,r1.toArray(),[a1],{});return{t:Jr(i1.t),y:Jr(i1.y.map(s1=>s1[0]))}},"function, Array, number | BigNumber | Unit, Object":(e1,r1,a1,i1)=>{var s1=Oo(e1,r1,[a1],i1);return{t:s1.t,y:s1.y.map(c1=>c1[0])}},"function, Matrix, number | BigNumber | Unit, Object":(e1,r1,a1,i1)=>{var s1=Oo(e1,r1.toArray(),[a1],i1);return{t:Jr(s1.t),y:Jr(s1.y.map(c1=>c1[0]))}}})}),name$3c="erf",dependencies$3c=["typed"],createErf=factory(name$3c,dependencies$3c,a=>{var{typed:s}=a;return s("name",{number:function(b){var _=Math.abs(b);return _>=MAX_NUM?sign$2(b):_<=THRESH?sign$2(b)*o(_):_<=4?sign$2(b)*(1-c(_)):sign$2(b)*(1-h(_))},"Array | Matrix":s.referToSelf(d=>b=>deepMap(b,d))});function o(d){var b=d*d,_=P$1[0][4]*b,$=b,j;for(j=0;j<3;j+=1)_=(_+P$1[0][j])*b,$=($+Q$1[0][j])*b;return d*(_+P$1[0][3])/($+Q$1[0][3])}function c(d){var b=P$1[1][8]*d,_=d,$;for($=0;$<7;$+=1)b=(b+P$1[1][$])*d,_=(_+Q$1[1][$])*d;var j=(b+P$1[1][7])/(_+Q$1[1][7]),Xt=parseInt(d*16)/16,Lt=(d-Xt)*(d+Xt);return Math.exp(-Xt*Xt)*Math.exp(-Lt)*j}function h(d){var b=1/(d*d),_=P$1[2][5]*b,$=b,j;for(j=0;j<4;j+=1)_=(_+P$1[2][j])*b,$=($+Q$1[2][j])*b;var Xt=b*(_+P$1[2][4])/($+Q$1[2][4]);Xt=(SQRPI-Xt)/d,b=parseInt(d*16)/16;var Lt=(d-b)*(d+b);return Math.exp(-b*b)*Math.exp(-Lt)*Xt}}),THRESH=.46875,SQRPI=.5641895835477563,P$1=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Q$1=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],MAX_NUM=Math.pow(2,53),name$3b="zeta",dependencies$3b=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],createZeta=factory(name$3b,dependencies$3b,a=>{var{typed:s,config:o,multiply:c,pow:h,divide:d,factorial:b,equal:_,smallerEq:$,isBounded:j,isNegative:Xt,gamma:Lt,sin:fr,subtract:Jr,add:Js,Complex:qs,BigNumber:zo,pi:js}=a;return s(name$3b,{number:t1=>eu(t1,e1=>e1,()=>20),BigNumber:t1=>eu(t1,e1=>new zo(e1),()=>Math.abs(Math.log10(o.relTol))),Complex:Oo});function eu(t1,e1,r1){return _(t1,0)?e1(-.5):_(t1,1)?e1(NaN):j(t1)?tu(t1,e1,r1,a1=>a1):Xt(t1)?e1(NaN):e1(1)}function Oo(t1){return t1.re===0&&t1.im===0?new qs(-.5):t1.re===1?new qs(NaN,NaN):t1.re===1/0&&t1.im===0?new qs(1):t1.im===1/0||t1.re===-1/0?new qs(NaN,NaN):tu(t1,e1=>e1,e1=>Math.round(1.3*15+.9*Math.abs(e1.im)),e1=>e1.re)}function tu(t1,e1,r1,a1){var i1=r1(t1);if(a1(t1)>-(i1-1)/2)return vu(t1,e1(i1),e1);var s1=c(h(2,t1),h(e1(js),Jr(t1,1)));return s1=c(s1,fr(c(d(e1(js),2),t1))),s1=c(s1,Lt(Jr(1,t1))),c(s1,tu(Jr(1,t1),e1,r1,a1))}function Bo(t1,e1){for(var r1=t1,a1=t1;$(a1,e1);a1=Js(a1,1)){var i1=d(c(b(Js(e1,Jr(a1,1))),h(4,a1)),c(b(Jr(e1,a1)),b(c(2,a1))));r1=Js(r1,i1)}return c(e1,r1)}function vu(t1,e1,r1){for(var a1=d(1,c(Bo(r1(0),e1),Jr(1,h(2,Jr(1,t1))))),i1=r1(0),s1=r1(1);$(s1,e1);s1=Js(s1,1))i1=Js(i1,d(c((-1)**(s1-1),Bo(s1,e1)),h(s1,t1)));return c(a1,i1)}}),name$3a="mode",dependencies$3a=["typed","isNaN","isNumeric"],createMode=factory(name$3a,dependencies$3a,a=>{var{typed:s,isNaN:o,isNumeric:c}=a;return s(name$3a,{"Array | Matrix":h,"...":function(b){return h(b)}});function h(d){d=flatten$1(d.valueOf());var b=d.length;if(b===0)throw new Error("Cannot calculate mode of an empty array");for(var _={},$=[],j=0,Xt=0;Xt<d.length;Xt++){var Lt=d[Xt];if(c(Lt)&&o(Lt))throw new Error("Cannot calculate mode of an array containing NaN values");Lt in _||(_[Lt]=0),_[Lt]++,_[Lt]===j?$.push(Lt):_[Lt]>j&&(j=_[Lt],$=[Lt])}return $}});function improveErrorMessage(a,s,o){var c;return String(a).includes("Unexpected type")?(c=arguments.length>2?" (type: "+typeOf$1(o)+", value: "+JSON.stringify(o)+")":" (type: "+a.data.actual+")",new TypeError("Cannot calculate "+s+", unexpected type of argument"+c)):String(a).includes("complex numbers")?(c=arguments.length>2?" (type: "+typeOf$1(o)+", value: "+JSON.stringify(o)+")":"",new TypeError("Cannot calculate "+s+", no ordering relation is defined for complex numbers"+c)):a}var name$39="prod",dependencies$39=["typed","config","multiplyScalar","numeric"],createProd=factory(name$39,dependencies$39,a=>{var{typed:s,config:o,multiplyScalar:c,numeric:h}=a;return s(name$39,{"Array | Matrix":d,"Array | Matrix, number | BigNumber":function(_,$){throw new Error("prod(A, dim) is not yet supported")},"...":function(_){return d(_)}});function d(b){var _;if(deepForEach(b,function($){try{_=_===void 0?$:c(_,$)}catch(j){throw improveErrorMessage(j,"prod",$)}}),typeof _=="string"&&(_=h(_,safeNumberType(_,o))),_===void 0)throw new Error("Cannot calculate prod of an empty array");return _}}),name$38="format",dependencies$38=["typed"],createFormat=factory(name$38,dependencies$38,a=>{var{typed:s}=a;return s(name$38,{any:format$1,"any, Object | function | number | BigNumber":format$1})}),name$37="bin",dependencies$37=["typed","format"],createBin=factory(name$37,dependencies$37,a=>{var{typed:s,format:o}=a;return s(name$37,{"number | BigNumber":function(h){return o(h,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(h,d){return o(h,{notation:"bin",wordSize:d})}})}),name$36="oct",dependencies$36=["typed","format"],createOct=factory(name$36,dependencies$36,a=>{var{typed:s,format:o}=a;return s(name$36,{"number | BigNumber":function(h){return o(h,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(h,d){return o(h,{notation:"oct",wordSize:d})}})}),name$35="hex",dependencies$35=["typed","format"],createHex=factory(name$35,dependencies$35,a=>{var{typed:s,format:o}=a;return s(name$35,{"number | BigNumber":function(h){return o(h,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(h,d){return o(h,{notation:"hex",wordSize:d})}})}),printTemplate=/\$([\w.]+)/g,name$34="print",dependencies$34=["typed"],createPrint=factory(name$34,dependencies$34,a=>{var{typed:s}=a;return s(name$34,{"string, Object | Array":_print,"string, Object | Array, number | Object":_print})});function _print(a,s,o){return a.replace(printTemplate,function(c,h){var d=h.split("."),b=s[d.shift()];for(b!==void 0&&b.isMatrix&&(b=b.toArray());d.length&&b!==void 0;){var _=d.shift();b=_?b[_]:b+"."}return b!==void 0?isString(b)?b:format$1(b,o):c})}var name$33="to",dependencies$33=["typed","matrix","concat"],createTo=factory(name$33,dependencies$33,a=>{var{typed:s,matrix:o,concat:c}=a,h=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:c});return s(name$33,{"Unit, Unit | string":(d,b)=>d.to(b)},h({Ds:!0}))}),name$32="toBest",dependencies$32=["typed"],createToBest=factory(name$32,dependencies$32,a=>{var{typed:s}=a;return s(name$32,{Unit:o=>o.toBest(),"Unit, string":(o,c)=>o.toBest(c.split(",")),"Unit, string, Object":(o,c,h)=>o.toBest(c.split(","),h),"Unit, Array":(o,c)=>o.toBest(c),"Unit, Array, Object":(o,c,h)=>o.toBest(c,h)})}),name$31="isPrime",dependencies$31=["typed"],createIsPrime=factory(name$31,dependencies$31,a=>{var{typed:s}=a;return s(name$31,{number:function(c){if(c<=3)return c>1;if(c%2===0||c%3===0)return!1;for(var h=5;h*h<=c;h+=6)if(c%h===0||c%(h+2)===0)return!1;return!0},bigint:function(c){if(c<=3n)return c>1n;if(c%2n===0n||c%3n===0n)return!1;for(var h=5n;h*h<=c;h+=6n)if(c%h===0n||c%(h+2n)===0n)return!1;return!0},BigNumber:function(c){if(c.lte(3))return c.gt(1);if(c.mod(2).eq(0)||c.mod(3).eq(0))return!1;if(c.lt(Math.pow(2,32))){for(var h=c.toNumber(),d=5;d*d<=h;d+=6)if(h%d===0||h%(d+2)===0)return!1;return!0}function b(eu,Oo,tu){for(var Bo=1;!Oo.eq(0);)Oo.mod(2).eq(0)?(Oo=Oo.div(2),eu=eu.mul(eu).mod(tu)):(Oo=Oo.sub(1),Bo=eu.mul(Bo).mod(tu));return Bo}var _=c.constructor.clone({precision:c.toFixed(0).length*2});c=new _(c);for(var $=0,j=c.sub(1);j.mod(2).eq(0);)j=j.div(2),$+=1;var Xt=null;if(c.lt("3317044064679887385961981"))Xt=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(eu=>eu<c);else{var Lt=Math.min(c.toNumber()-2,Math.floor(2*Math.pow(c.toFixed(0).length*Math.log(10),2)));Xt=[];for(var fr=2;fr<=Lt;fr+=1)Xt.push(Lt)}for(var Jr=0;Jr<Xt.length;Jr+=1){var Js=Xt[Jr],qs=b(c.sub(c).add(Js),j,c);if(!qs.eq(1)){for(var zo=0,js=qs;!js.eq(c.sub(1));zo+=1,js=js.mul(js).mod(c))if(zo===$-1)return!1}}return!0},"Array | Matrix":s.referToSelf(o=>c=>deepMap(c,o))})}),name$30="numeric",dependencies$30=["number","?bignumber","?fraction"],createNumeric=factory(name$30,dependencies$30,a=>{var{number:s,bignumber:o,fraction:c}=a,h={string:!0,number:!0,BigNumber:!0,Fraction:!0},d={number:b=>s(b),BigNumber:o?b=>o(b):noBignumber,bigint:b=>BigInt(b),Fraction:c?b=>c(b):noFraction};return function(_){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",j=arguments.length>2?arguments[2]:void 0;if(j!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var Xt=typeOf$1(_);if(!(Xt in h))throw new TypeError("Cannot convert "+_+' of type "'+Xt+'"; valid input types are '+Object.keys(h).join(", "));if(!($ in d))throw new TypeError("Cannot convert "+_+' to type "'+$+'"; valid output types are '+Object.keys(d).join(", "));return $===Xt?_:d[$](_)}}),name$2$="divideScalar",dependencies$2$=["typed","numeric"],createDivideScalar=factory(name$2$,dependencies$2$,a=>{var{typed:s,numeric:o}=a;return s(name$2$,{"number, number":function(h,d){return h/d},"Complex, Complex":function(h,d){return h.div(d)},"BigNumber, BigNumber":function(h,d){return h.div(d)},"bigint, bigint":function(h,d){return h/d},"Fraction, Fraction":function(h,d){return h.div(d)},"Unit, number | Complex | Fraction | BigNumber | Unit":(c,h)=>c.divide(h),"number | Fraction | Complex | BigNumber, Unit":(c,h)=>h.divideInto(c)})}),name$2_="pow",dependencies$2_=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],createPow=factory(name$2_,dependencies$2_,a=>{var{typed:s,config:o,identity:c,multiply:h,matrix:d,inv:b,number:_,fraction:$,Complex:j}=a;return s(name$2_,{"number, number":Xt,"Complex, Complex":function(Js,qs){return Js.pow(qs)},"BigNumber, BigNumber":function(Js,qs){return qs.isInteger()||Js>=0||o.predictable?Js.pow(qs):new j(Js.toNumber(),0).pow(qs.toNumber(),0)},"bigint, bigint":(Jr,Js)=>Jr**Js,"Fraction, Fraction":function(Js,qs){var zo=Js.pow(qs);if(zo!=null)return zo;if(o.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return Xt(Js.valueOf(),qs.valueOf())},"Array, number":Lt,"Array, BigNumber":function(Js,qs){return Lt(Js,qs.toNumber())},"Matrix, number":fr,"Matrix, BigNumber":function(Js,qs){return fr(Js,qs.toNumber())},"Unit, number | BigNumber":function(Js,qs){return Js.pow(qs)}});function Xt(Jr,Js){if(o.predictable&&!isInteger$1(Js)&&Jr<0)try{var qs=$(Js),zo=_(qs);if((Js===zo||Math.abs((Js-zo)/Js)<1e-14)&&qs.d%2n===1n)return(qs.n%2n===0n?1:-1)*Math.pow(-Jr,Js)}catch{}return o.predictable&&(Jr<-1&&Js===1/0||Jr>-1&&Jr<0&&Js===-1/0)?NaN:isInteger$1(Js)||Jr>=0||o.predictable?powNumber(Jr,Js):Jr*Jr<1&&Js===1/0||Jr*Jr>1&&Js===-1/0?0:new j(Jr,0).pow(Js,0)}function Lt(Jr,Js){if(!isInteger$1(Js))throw new TypeError("For A^b, b must be an integer (value is "+Js+")");var qs=arraySize(Jr);if(qs.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+qs.length+" dimensions)");if(qs[0]!==qs[1])throw new Error("For A^b, A must be square (size is "+qs[0]+"x"+qs[1]+")");if(Js<0)try{return Lt(b(Jr),-Js)}catch(eu){throw eu.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+Js+")"):eu}for(var zo=c(qs[0]).valueOf(),js=Jr;Js>=1;)(Js&1)===1&&(zo=h(js,zo)),Js>>=1,js=h(js,js);return zo}function fr(Jr,Js){return d(Lt(Jr.valueOf(),Js))}}),NO_INT="Number of decimals in function round must be an integer",name$2Z="round",dependencies$2Z=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],createRound=factory(name$2Z,dependencies$2Z,a=>{var{typed:s,config:o,matrix:c,equalScalar:h,zeros:d,BigNumber:b,DenseMatrix:_}=a,$=createMatAlgo11xS0s({typed:s,equalScalar:h}),j=createMatAlgo12xSfs({typed:s,DenseMatrix:_}),Xt=createMatAlgo14xDs({typed:s});function Lt(fr){return Math.abs(splitNumber(fr).exponent)}return s(name$2Z,{number:function(Jr){var Js=roundNumber(Jr,Lt(o.relTol)),qs=nearlyEqual$1(Jr,Js,o.relTol,o.absTol)?Js:Jr;return roundNumber(qs)},"number, number":function(Jr,Js){var qs=Lt(o.relTol);if(Js>=qs)return roundNumber(Jr,Js);var zo=roundNumber(Jr,qs),js=nearlyEqual$1(Jr,zo,o.relTol,o.absTol)?zo:Jr;return roundNumber(js,Js)},"number, BigNumber":function(Jr,Js){if(!Js.isInteger())throw new TypeError(NO_INT);return new b(Jr).toDecimalPlaces(Js.toNumber())},Complex:function(Jr){return Jr.round()},"Complex, number":function(Jr,Js){if(Js%1)throw new TypeError(NO_INT);return Jr.round(Js)},"Complex, BigNumber":function(Jr,Js){if(!Js.isInteger())throw new TypeError(NO_INT);var qs=Js.toNumber();return Jr.round(qs)},BigNumber:function(Jr){var Js=new b(Jr).toDecimalPlaces(Lt(o.relTol)),qs=nearlyEqual(Jr,Js,o.relTol,o.absTol)?Js:Jr;return qs.toDecimalPlaces(0)},"BigNumber, BigNumber":function(Jr,Js){if(!Js.isInteger())throw new TypeError(NO_INT);var qs=Lt(o.relTol);if(Js>=qs)return Jr.toDecimalPlaces(Js.toNumber());var zo=Jr.toDecimalPlaces(qs),js=nearlyEqual(Jr,zo,o.relTol,o.absTol)?zo:Jr;return js.toDecimalPlaces(Js.toNumber())},bigint:fr=>fr,"bigint, number":(fr,Jr)=>fr,"bigint, BigNumber":(fr,Jr)=>fr,Fraction:function(Jr){return Jr.round()},"Fraction, number":function(Jr,Js){if(Js%1)throw new TypeError(NO_INT);return Jr.round(Js)},"Fraction, BigNumber":function(Jr,Js){if(!Js.isInteger())throw new TypeError(NO_INT);return Jr.round(Js.toNumber())},"Unit, number, Unit":s.referToSelf(fr=>function(Jr,Js,qs){var zo=Jr.toNumeric(qs);return qs.multiply(fr(zo,Js))}),"Unit, BigNumber, Unit":s.referToSelf(fr=>(Jr,Js,qs)=>fr(Jr,Js.toNumber(),qs)),"Array | Matrix, number | BigNumber, Unit":s.referToSelf(fr=>(Jr,Js,qs)=>deepMap(Jr,zo=>fr(zo,Js,qs),!0)),"Array | Matrix | Unit, Unit":s.referToSelf(fr=>(Jr,Js)=>fr(Jr,0,Js)),"Array | Matrix":s.referToSelf(fr=>Jr=>deepMap(Jr,fr,!0)),"SparseMatrix, number | BigNumber":s.referToSelf(fr=>(Jr,Js)=>$(Jr,Js,fr,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(fr=>(Jr,Js)=>Xt(Jr,Js,fr,!1)),"Array, number | BigNumber":s.referToSelf(fr=>(Jr,Js)=>Xt(c(Jr),Js,fr,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":s.referToSelf(fr=>(Jr,Js)=>h(Jr,0)?d(Js.size(),Js.storage()):j(Js,Jr,fr,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":s.referToSelf(fr=>(Jr,Js)=>h(Jr,0)?d(Js.size(),Js.storage()):Xt(Js,Jr,fr,!0)),"number | Complex | BigNumber | Fraction, Array":s.referToSelf(fr=>(Jr,Js)=>Xt(c(Js),Jr,fr,!0).valueOf())})}),name$2Y="log",dependencies$2Y=["config","typed","typeOf","divideScalar","Complex"],nlg16=Math.log(16),createLog=factory(name$2Y,dependencies$2Y,a=>{var{typed:s,typeOf:o,config:c,divideScalar:h,Complex:d}=a;function b($){return $.log()}function _($){return b(new d($,0))}return s(name$2Y,{number:function(j){return j>=0||c.predictable?logNumber(j):_(j)},bigint:promoteLogarithm(nlg16,logNumber,c,_),Complex:b,BigNumber:function(j){return!j.isNegative()||c.predictable?j.ln():_(j.toNumber())},"any, any":s.referToSelf($=>(j,Xt)=>{if(o(j)==="Fraction"&&o(Xt)==="Fraction"){var Lt=j.log(Xt);if(Lt!==null)return Lt}return h($(j),$(Xt))})})}),name$2X="log1p",dependencies$2X=["typed","config","divideScalar","log","Complex"],createLog1p=factory(name$2X,dependencies$2X,a=>{var{typed:s,config:o,divideScalar:c,log:h,Complex:d}=a;return s(name$2X,{number:function($){return $>=-1||o.predictable?log1p$1($):b(new d($,0))},Complex:b,BigNumber:function($){var j=$.plus(1);return!j.isNegative()||o.predictable?j.ln():b(new d($.toNumber(),0))},"Array | Matrix":s.referToSelf(_=>$=>deepMap($,_)),"any, any":s.referToSelf(_=>($,j)=>c(_($),h(j)))});function b(_){var $=_.re+1;return new d(Math.log(Math.sqrt($*$+_.im*_.im)),Math.atan2(_.im,$))}}),name$2W="nthRoots",dependencies$2W=["config","typed","divideScalar","Complex"],createNthRoots=factory(name$2W,dependencies$2W,a=>{var{typed:s,config:o,divideScalar:c,Complex:h}=a,d=[function($){return new h($,0)},function($){return new h(0,$)},function($){return new h(-$,0)},function($){return new h(0,-$)}];function b(_,$){if($<0)throw new Error("Root must be greater than zero");if($===0)throw new Error("Root must be non-zero");if($%1!==0)throw new Error("Root must be an integer");if(_===0||_.abs()===0)return[new h(0,0)];var j=typeof _=="number",Xt;(j||_.re===0||_.im===0)&&(j?Xt=2*+(_<0):_.im===0?Xt=2*+(_.re<0):Xt=2*+(_.im<0)+1);for(var Lt=_.arg(),fr=_.abs(),Jr=[],Js=Math.pow(fr,1/$),qs=0;qs<$;qs++){var zo=(Xt+4*qs)/$;if(zo===Math.round(zo)){Jr.push(d[zo%4](Js));continue}Jr.push(new h({r:Js,phi:(Lt+2*Math.PI*qs)/$}))}return Jr}return s(name$2W,{Complex:function($){return b($,2)},"Complex, number":b})}),name$2V="dotPow",dependencies$2V=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],createDotPow=factory(name$2V,dependencies$2V,a=>{var{typed:s,equalScalar:o,matrix:c,pow:h,DenseMatrix:d,concat:b,SparseMatrix:_}=a,$=createMatAlgo03xDSf({typed:s}),j=createMatAlgo07xSSf({typed:s,SparseMatrix:_}),Xt=createMatAlgo11xS0s({typed:s,equalScalar:o}),Lt=createMatAlgo12xSfs({typed:s,DenseMatrix:d}),fr=createMatrixAlgorithmSuite({typed:s,matrix:c,concat:b}),Jr={};for(var Js in h.signatures)Object.prototype.hasOwnProperty.call(h.signatures,Js)&&!Js.includes("Matrix")&&!Js.includes("Array")&&(Jr[Js]=h.signatures[Js]);var qs=s(Jr);return s(name$2V,fr({elop:qs,SS:j,DS:$,Ss:Xt,sS:Lt}))}),name$2U="dotDivide",dependencies$2U=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],createDotDivide=factory(name$2U,dependencies$2U,a=>{var{typed:s,matrix:o,equalScalar:c,divideScalar:h,DenseMatrix:d,concat:b,SparseMatrix:_}=a,$=createMatAlgo02xDS0({typed:s,equalScalar:c}),j=createMatAlgo03xDSf({typed:s}),Xt=createMatAlgo07xSSf({typed:s,SparseMatrix:_}),Lt=createMatAlgo11xS0s({typed:s,equalScalar:c}),fr=createMatAlgo12xSfs({typed:s,DenseMatrix:d}),Jr=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:b});return s(name$2U,Jr({elop:h,SS:Xt,DS:j,SD:$,Ss:Lt,sS:fr}))});function createSolveValidation(a){var{DenseMatrix:s}=a;return function(c,h,d){var b=c.size();if(b.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+format$1(b)+")");var _=b[0],$=b[1];if(_!==$)throw new RangeError("Matrix must be square (size: "+format$1(b)+")");var j=[];if(isMatrix(h)){var Xt=h.size(),Lt=h._data;if(Xt.length===1){if(Xt[0]!==_)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var fr=0;fr<_;fr++)j[fr]=[Lt[fr]];return new s({data:j,size:[_,1],datatype:h._datatype})}if(Xt.length===2){if(Xt[0]!==_||Xt[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(isDenseMatrix(h)){if(d){j=[];for(var Jr=0;Jr<_;Jr++)j[Jr]=[Lt[Jr][0]];return new s({data:j,size:[_,1],datatype:h._datatype})}return h}if(isSparseMatrix(h)){for(var Js=0;Js<_;Js++)j[Js]=[0];for(var qs=h._values,zo=h._index,js=h._ptr,eu=js[1],Oo=js[0];Oo<eu;Oo++){var tu=zo[Oo];j[tu][0]=qs[Oo]}return new s({data:j,size:[_,1],datatype:h._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(isArray(h)){var Bo=arraySize(h);if(Bo.length===1){if(Bo[0]!==_)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var vu=0;vu<_;vu++)j[vu]=[h[vu]];return new s({data:j,size:[_,1]})}if(Bo.length===2){if(Bo[0]!==_||Bo[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var t1=0;t1<_;t1++)j[t1]=[h[t1][0]];return new s({data:j,size:[_,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var name$2T="lsolve",dependencies$2T=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createLsolve=factory(name$2T,dependencies$2T,a=>{var{typed:s,matrix:o,divideScalar:c,multiplyScalar:h,subtractScalar:d,equalScalar:b,DenseMatrix:_}=a,$=createSolveValidation({DenseMatrix:_});return s(name$2T,{"SparseMatrix, Array | Matrix":function(fr,Jr){return Xt(fr,Jr)},"DenseMatrix, Array | Matrix":function(fr,Jr){return j(fr,Jr)},"Array, Array | Matrix":function(fr,Jr){var Js=o(fr),qs=j(Js,Jr);return qs.valueOf()}});function j(Lt,fr){fr=$(Lt,fr,!0);for(var Jr=fr._data,Js=Lt._size[0],qs=Lt._size[1],zo=[],js=Lt._data,eu=0;eu<qs;eu++){var Oo=Jr[eu][0]||0,tu=void 0;if(b(Oo,0))tu=0;else{var Bo=js[eu][eu];if(b(Bo,0))throw new Error("Linear system cannot be solved since matrix is singular");tu=c(Oo,Bo);for(var vu=eu+1;vu<Js;vu++)Jr[vu]=[d(Jr[vu][0]||0,h(tu,js[vu][eu]))]}zo[eu]=[tu]}return new _({data:zo,size:[Js,1]})}function Xt(Lt,fr){fr=$(Lt,fr,!0);for(var Jr=fr._data,Js=Lt._size[0],qs=Lt._size[1],zo=Lt._values,js=Lt._index,eu=Lt._ptr,Oo=[],tu=0;tu<qs;tu++){var Bo=Jr[tu][0]||0;if(b(Bo,0))Oo[tu]=[0];else{for(var vu=0,t1=[],e1=[],r1=eu[tu],a1=eu[tu+1],i1=r1;i1<a1;i1++){var s1=js[i1];s1===tu?vu=zo[i1]:s1>tu&&(t1.push(zo[i1]),e1.push(s1))}if(b(vu,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var c1=c(Bo,vu),h1=0,m1=e1.length;h1<m1;h1++){var l1=e1[h1];Jr[l1]=[d(Jr[l1][0]||0,h(c1,t1[h1]))]}Oo[tu]=[c1]}}return new _({data:Oo,size:[Js,1]})}}),name$2S="usolve",dependencies$2S=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createUsolve=factory(name$2S,dependencies$2S,a=>{var{typed:s,matrix:o,divideScalar:c,multiplyScalar:h,subtractScalar:d,equalScalar:b,DenseMatrix:_}=a,$=createSolveValidation({DenseMatrix:_});return s(name$2S,{"SparseMatrix, Array | Matrix":function(fr,Jr){return Xt(fr,Jr)},"DenseMatrix, Array | Matrix":function(fr,Jr){return j(fr,Jr)},"Array, Array | Matrix":function(fr,Jr){var Js=o(fr),qs=j(Js,Jr);return qs.valueOf()}});function j(Lt,fr){fr=$(Lt,fr,!0);for(var Jr=fr._data,Js=Lt._size[0],qs=Lt._size[1],zo=[],js=Lt._data,eu=qs-1;eu>=0;eu--){var Oo=Jr[eu][0]||0,tu=void 0;if(b(Oo,0))tu=0;else{var Bo=js[eu][eu];if(b(Bo,0))throw new Error("Linear system cannot be solved since matrix is singular");tu=c(Oo,Bo);for(var vu=eu-1;vu>=0;vu--)Jr[vu]=[d(Jr[vu][0]||0,h(tu,js[vu][eu]))]}zo[eu]=[tu]}return new _({data:zo,size:[Js,1]})}function Xt(Lt,fr){fr=$(Lt,fr,!0);for(var Jr=fr._data,Js=Lt._size[0],qs=Lt._size[1],zo=Lt._values,js=Lt._index,eu=Lt._ptr,Oo=[],tu=qs-1;tu>=0;tu--){var Bo=Jr[tu][0]||0;if(b(Bo,0))Oo[tu]=[0];else{for(var vu=0,t1=[],e1=[],r1=eu[tu],a1=eu[tu+1],i1=a1-1;i1>=r1;i1--){var s1=js[i1];s1===tu?vu=zo[i1]:s1<tu&&(t1.push(zo[i1]),e1.push(s1))}if(b(vu,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var c1=c(Bo,vu),h1=0,m1=e1.length;h1<m1;h1++){var l1=e1[h1];Jr[l1]=[d(Jr[l1][0],h(c1,t1[h1]))]}Oo[tu]=[c1]}}return new _({data:Oo,size:[Js,1]})}}),name$2R="lsolveAll",dependencies$2R=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createLsolveAll=factory(name$2R,dependencies$2R,a=>{var{typed:s,matrix:o,divideScalar:c,multiplyScalar:h,subtractScalar:d,equalScalar:b,DenseMatrix:_}=a,$=createSolveValidation({DenseMatrix:_});return s(name$2R,{"SparseMatrix, Array | Matrix":function(fr,Jr){return Xt(fr,Jr)},"DenseMatrix, Array | Matrix":function(fr,Jr){return j(fr,Jr)},"Array, Array | Matrix":function(fr,Jr){var Js=o(fr),qs=j(Js,Jr);return qs.map(zo=>zo.valueOf())}});function j(Lt,fr){for(var Jr=[$(Lt,fr,!0)._data.map(e1=>e1[0])],Js=Lt._data,qs=Lt._size[0],zo=Lt._size[1],js=0;js<zo;js++)for(var eu=Jr.length,Oo=0;Oo<eu;Oo++){var tu=Jr[Oo];if(b(Js[js][js],0))if(b(tu[js],0)){if(Oo===0){var vu=[...tu];vu[js]=1;for(var t1=js+1;t1<zo;t1++)vu[t1]=d(vu[t1],Js[t1][js]);Jr.push(vu)}}else{if(Oo===0)return[];Jr.splice(Oo,1),Oo-=1,eu-=1}else{tu[js]=c(tu[js],Js[js][js]);for(var Bo=js+1;Bo<zo;Bo++)tu[Bo]=d(tu[Bo],h(tu[js],Js[Bo][js]))}}return Jr.map(e1=>new _({data:e1.map(r1=>[r1]),size:[qs,1]}))}function Xt(Lt,fr){for(var Jr=[$(Lt,fr,!0)._data.map(C1=>C1[0])],Js=Lt._size[0],qs=Lt._size[1],zo=Lt._values,js=Lt._index,eu=Lt._ptr,Oo=0;Oo<qs;Oo++)for(var tu=Jr.length,Bo=0;Bo<tu;Bo++){for(var vu=Jr[Bo],t1=[],e1=[],r1=eu[Oo],a1=eu[Oo+1],i1=0,s1=r1;s1<a1;s1++){var c1=js[s1];c1===Oo?i1=zo[s1]:c1>Oo&&(t1.push(zo[s1]),e1.push(c1))}if(b(i1,0))if(b(vu[Oo],0)){if(Bo===0){var f1=[...vu];f1[Oo]=1;for(var p1=0,d1=e1.length;p1<d1;p1++){var b1=e1[p1];f1[b1]=d(f1[b1],t1[p1])}Jr.push(f1)}}else{if(Bo===0)return[];Jr.splice(Bo,1),Bo-=1,tu-=1}else{vu[Oo]=c(vu[Oo],i1);for(var h1=0,m1=e1.length;h1<m1;h1++){var l1=e1[h1];vu[l1]=d(vu[l1],h(vu[Oo],t1[h1]))}}}return Jr.map(C1=>new _({data:C1.map(g1=>[g1]),size:[Js,1]}))}}),name$2Q="usolveAll",dependencies$2Q=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createUsolveAll=factory(name$2Q,dependencies$2Q,a=>{var{typed:s,matrix:o,divideScalar:c,multiplyScalar:h,subtractScalar:d,equalScalar:b,DenseMatrix:_}=a,$=createSolveValidation({DenseMatrix:_});return s(name$2Q,{"SparseMatrix, Array | Matrix":function(fr,Jr){return Xt(fr,Jr)},"DenseMatrix, Array | Matrix":function(fr,Jr){return j(fr,Jr)},"Array, Array | Matrix":function(fr,Jr){var Js=o(fr),qs=j(Js,Jr);return qs.map(zo=>zo.valueOf())}});function j(Lt,fr){for(var Jr=[$(Lt,fr,!0)._data.map(e1=>e1[0])],Js=Lt._data,qs=Lt._size[0],zo=Lt._size[1],js=zo-1;js>=0;js--)for(var eu=Jr.length,Oo=0;Oo<eu;Oo++){var tu=Jr[Oo];if(b(Js[js][js],0))if(b(tu[js],0)){if(Oo===0){var vu=[...tu];vu[js]=1;for(var t1=js-1;t1>=0;t1--)vu[t1]=d(vu[t1],Js[t1][js]);Jr.push(vu)}}else{if(Oo===0)return[];Jr.splice(Oo,1),Oo-=1,eu-=1}else{tu[js]=c(tu[js],Js[js][js]);for(var Bo=js-1;Bo>=0;Bo--)tu[Bo]=d(tu[Bo],h(tu[js],Js[Bo][js]))}}return Jr.map(e1=>new _({data:e1.map(r1=>[r1]),size:[qs,1]}))}function Xt(Lt,fr){for(var Jr=[$(Lt,fr,!0)._data.map(C1=>C1[0])],Js=Lt._size[0],qs=Lt._size[1],zo=Lt._values,js=Lt._index,eu=Lt._ptr,Oo=qs-1;Oo>=0;Oo--)for(var tu=Jr.length,Bo=0;Bo<tu;Bo++){for(var vu=Jr[Bo],t1=[],e1=[],r1=eu[Oo],a1=eu[Oo+1],i1=0,s1=a1-1;s1>=r1;s1--){var c1=js[s1];c1===Oo?i1=zo[s1]:c1<Oo&&(t1.push(zo[s1]),e1.push(c1))}if(b(i1,0))if(b(vu[Oo],0)){if(Bo===0){var f1=[...vu];f1[Oo]=1;for(var p1=0,d1=e1.length;p1<d1;p1++){var b1=e1[p1];f1[b1]=d(f1[b1],t1[p1])}Jr.push(f1)}}else{if(Bo===0)return[];Jr.splice(Bo,1),Bo-=1,tu-=1}else{vu[Oo]=c(vu[Oo],i1);for(var h1=0,m1=e1.length;h1<m1;h1++){var l1=e1[h1];vu[l1]=d(vu[l1],h(vu[Oo],t1[h1]))}}}return Jr.map(C1=>new _({data:C1.map(g1=>[g1]),size:[Js,1]}))}}),name$2P="matAlgo08xS0Sid",dependencies$2P=["typed","equalScalar"],createMatAlgo08xS0Sid=factory(name$2P,dependencies$2P,a=>{var{typed:s,equalScalar:o}=a;return function(h,d,b){var _=h._values,$=h._index,j=h._ptr,Xt=h._size,Lt=h._datatype||h._data===void 0?h._datatype:h.getDataType(),fr=d._values,Jr=d._index,Js=d._ptr,qs=d._size,zo=d._datatype||d._data===void 0?d._datatype:d.getDataType();if(Xt.length!==qs.length)throw new DimensionError(Xt.length,qs.length);if(Xt[0]!==qs[0]||Xt[1]!==qs[1])throw new RangeError("Dimension mismatch. Matrix A ("+Xt+") must match Matrix B ("+qs+")");if(!_||!fr)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var js=Xt[0],eu=Xt[1],Oo,tu=o,Bo=0,vu=b;typeof Lt=="string"&&Lt===zo&&Lt!=="mixed"&&(Oo=Lt,tu=s.find(o,[Oo,Oo]),Bo=s.convert(0,Oo),vu=s.find(b,[Oo,Oo]));for(var t1=[],e1=[],r1=[],a1=[],i1=[],s1,c1,h1,m1,l1=0;l1<eu;l1++){r1[l1]=e1.length;var f1=l1+1;for(c1=j[l1],h1=j[l1+1],s1=c1;s1<h1;s1++)m1=$[s1],i1[m1]=f1,a1[m1]=_[s1],e1.push(m1);for(c1=Js[l1],h1=Js[l1+1],s1=c1;s1<h1;s1++)m1=Jr[s1],i1[m1]===f1&&(a1[m1]=vu(a1[m1],fr[s1]));for(s1=r1[l1];s1<e1.length;){m1=e1[s1];var p1=a1[m1];tu(p1,Bo)?e1.splice(s1,1):(t1.push(p1),s1++)}}return r1[eu]=e1.length,h.createSparseMatrix({values:t1,index:e1,ptr:r1,size:[js,eu],datatype:Lt===h._datatype&&zo===d._datatype?Oo:void 0})}}),createUseMatrixForArrayScalar=factory("useMatrixForArrayScalar",["typed","matrix"],a=>{var{typed:s,matrix:o}=a;return{"Array, number":s.referTo("DenseMatrix, number",c=>(h,d)=>c(o(h),d).valueOf()),"Array, BigNumber":s.referTo("DenseMatrix, BigNumber",c=>(h,d)=>c(o(h),d).valueOf()),"number, Array":s.referTo("number, DenseMatrix",c=>(h,d)=>c(h,o(d)).valueOf()),"BigNumber, Array":s.referTo("BigNumber, DenseMatrix",c=>(h,d)=>c(h,o(d)).valueOf())}}),name$2O="leftShift",dependencies$2O=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],createLeftShift=factory(name$2O,dependencies$2O,a=>{var{typed:s,matrix:o,equalScalar:c,zeros:h,DenseMatrix:d,concat:b}=a,_=createMatAlgo01xDSid({typed:s}),$=createMatAlgo02xDS0({typed:s,equalScalar:c}),j=createMatAlgo08xS0Sid({typed:s,equalScalar:c}),Xt=createMatAlgo10xSids({typed:s,DenseMatrix:d}),Lt=createMatAlgo11xS0s({typed:s,equalScalar:c}),fr=createMatAlgo14xDs({typed:s}),Jr=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:b}),Js=createUseMatrixForArrayScalar({typed:s,matrix:o});return s(name$2O,{"number, number":leftShiftNumber,"BigNumber, BigNumber":leftShiftBigNumber,"bigint, bigint":(qs,zo)=>qs<<zo,"SparseMatrix, number | BigNumber":s.referToSelf(qs=>(zo,js)=>c(js,0)?zo.clone():Lt(zo,js,qs,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(qs=>(zo,js)=>c(js,0)?zo.clone():fr(zo,js,qs,!1)),"number | BigNumber, SparseMatrix":s.referToSelf(qs=>(zo,js)=>c(zo,0)?h(js.size(),js.storage()):Xt(js,zo,qs,!0)),"number | BigNumber, DenseMatrix":s.referToSelf(qs=>(zo,js)=>c(zo,0)?h(js.size(),js.storage()):fr(js,zo,qs,!0))},Js,Jr({SS:j,DS:_,SD:$}))}),name$2N="rightArithShift",dependencies$2N=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],createRightArithShift=factory(name$2N,dependencies$2N,a=>{var{typed:s,matrix:o,equalScalar:c,zeros:h,DenseMatrix:d,concat:b}=a,_=createMatAlgo01xDSid({typed:s}),$=createMatAlgo02xDS0({typed:s,equalScalar:c}),j=createMatAlgo08xS0Sid({typed:s,equalScalar:c}),Xt=createMatAlgo10xSids({typed:s,DenseMatrix:d}),Lt=createMatAlgo11xS0s({typed:s,equalScalar:c}),fr=createMatAlgo14xDs({typed:s}),Jr=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:b}),Js=createUseMatrixForArrayScalar({typed:s,matrix:o});return s(name$2N,{"number, number":rightArithShiftNumber,"BigNumber, BigNumber":rightArithShiftBigNumber,"bigint, bigint":(qs,zo)=>qs>>zo,"SparseMatrix, number | BigNumber":s.referToSelf(qs=>(zo,js)=>c(js,0)?zo.clone():Lt(zo,js,qs,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(qs=>(zo,js)=>c(js,0)?zo.clone():fr(zo,js,qs,!1)),"number | BigNumber, SparseMatrix":s.referToSelf(qs=>(zo,js)=>c(zo,0)?h(js.size(),js.storage()):Xt(js,zo,qs,!0)),"number | BigNumber, DenseMatrix":s.referToSelf(qs=>(zo,js)=>c(zo,0)?h(js.size(),js.storage()):fr(js,zo,qs,!0))},Js,Jr({SS:j,DS:_,SD:$}))}),name$2M="rightLogShift",dependencies$2M=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],createRightLogShift=factory(name$2M,dependencies$2M,a=>{var{typed:s,matrix:o,equalScalar:c,zeros:h,DenseMatrix:d,concat:b}=a,_=createMatAlgo01xDSid({typed:s}),$=createMatAlgo02xDS0({typed:s,equalScalar:c}),j=createMatAlgo08xS0Sid({typed:s,equalScalar:c}),Xt=createMatAlgo10xSids({typed:s,DenseMatrix:d}),Lt=createMatAlgo11xS0s({typed:s,equalScalar:c}),fr=createMatAlgo14xDs({typed:s}),Jr=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:b}),Js=createUseMatrixForArrayScalar({typed:s,matrix:o});return s(name$2M,{"number, number":rightLogShiftNumber,"SparseMatrix, number | BigNumber":s.referToSelf(qs=>(zo,js)=>c(js,0)?zo.clone():Lt(zo,js,qs,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(qs=>(zo,js)=>c(js,0)?zo.clone():fr(zo,js,qs,!1)),"number | BigNumber, SparseMatrix":s.referToSelf(qs=>(zo,js)=>c(zo,0)?h(js.size(),js.storage()):Xt(js,zo,qs,!0)),"number | BigNumber, DenseMatrix":s.referToSelf(qs=>(zo,js)=>c(zo,0)?h(js.size(),js.storage()):fr(js,zo,qs,!0))},Js,Jr({SS:j,DS:_,SD:$}))}),name$2L="and",dependencies$2L=["typed","matrix","equalScalar","zeros","not","concat"],createAnd=factory(name$2L,dependencies$2L,a=>{var{typed:s,matrix:o,equalScalar:c,zeros:h,not:d,concat:b}=a,_=createMatAlgo02xDS0({typed:s,equalScalar:c}),$=createMatAlgo06xS0S0({typed:s,equalScalar:c}),j=createMatAlgo11xS0s({typed:s,equalScalar:c}),Xt=createMatAlgo14xDs({typed:s}),Lt=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:b});return s(name$2L,{"number, number":andNumber,"Complex, Complex":function(Jr,Js){return(Jr.re!==0||Jr.im!==0)&&(Js.re!==0||Js.im!==0)},"BigNumber, BigNumber":function(Jr,Js){return!Jr.isZero()&&!Js.isZero()&&!Jr.isNaN()&&!Js.isNaN()},"bigint, bigint":andNumber,"Unit, Unit":s.referToSelf(fr=>(Jr,Js)=>fr(Jr.value||0,Js.value||0)),"SparseMatrix, any":s.referToSelf(fr=>(Jr,Js)=>d(Js)?h(Jr.size(),Jr.storage()):j(Jr,Js,fr,!1)),"DenseMatrix, any":s.referToSelf(fr=>(Jr,Js)=>d(Js)?h(Jr.size(),Jr.storage()):Xt(Jr,Js,fr,!1)),"any, SparseMatrix":s.referToSelf(fr=>(Jr,Js)=>d(Jr)?h(Jr.size(),Jr.storage()):j(Js,Jr,fr,!0)),"any, DenseMatrix":s.referToSelf(fr=>(Jr,Js)=>d(Jr)?h(Jr.size(),Jr.storage()):Xt(Js,Jr,fr,!0)),"Array, any":s.referToSelf(fr=>(Jr,Js)=>fr(o(Jr),Js).valueOf()),"any, Array":s.referToSelf(fr=>(Jr,Js)=>fr(Jr,o(Js)).valueOf())},Lt({SS:$,DS:_}))}),name$2K="compare",dependencies$2K=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],createCompare=factory(name$2K,dependencies$2K,a=>{var{typed:s,config:o,equalScalar:c,matrix:h,BigNumber:d,Fraction:b,DenseMatrix:_,concat:$}=a,j=createMatAlgo03xDSf({typed:s}),Xt=createMatAlgo05xSfSf({typed:s,equalScalar:c}),Lt=createMatAlgo12xSfs({typed:s,DenseMatrix:_}),fr=createMatrixAlgorithmSuite({typed:s,matrix:h,concat:$}),Jr=createCompareUnits({typed:s});return s(name$2K,createCompareNumber({typed:s,config:o}),{"boolean, boolean":function(qs,zo){return qs===zo?0:qs>zo?1:-1},"BigNumber, BigNumber":function(qs,zo){return nearlyEqual(qs,zo,o.relTol,o.absTol)?new d(0):new d(qs.cmp(zo))},"bigint, bigint":function(qs,zo){return qs===zo?0n:qs>zo?1n:-1n},"Fraction, Fraction":function(qs,zo){return new b(qs.compare(zo))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},Jr,fr({SS:Xt,DS:j,Ss:Lt}))}),createCompareNumber=factory(name$2K,["typed","config"],a=>{var{typed:s,config:o}=a;return s(name$2K,{"number, number":function(h,d){return nearlyEqual$1(h,d,o.relTol,o.absTol)?0:h>d?1:-1}})}),naturalSort=function a(s,o){var c=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,h=/(^[ ]*|[ ]*$)/g,d=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,b=/^0x[0-9a-f]+$/i,_=/^0/,$=function(Oo){return a.insensitive&&(""+Oo).toLowerCase()||""+Oo},j=$(s).replace(h,"")||"",Xt=$(o).replace(h,"")||"",Lt=j.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),fr=Xt.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),Jr=parseInt(j.match(b),16)||Lt.length!==1&&j.match(d)&&Date.parse(j),Js=parseInt(Xt.match(b),16)||Jr&&Xt.match(d)&&Date.parse(Xt)||null,qs,zo;if(Js){if(Jr<Js)return-1;if(Jr>Js)return 1}for(var js=0,eu=Math.max(Lt.length,fr.length);js<eu;js++){if(qs=!(Lt[js]||"").match(_)&&parseFloat(Lt[js])||Lt[js]||0,zo=!(fr[js]||"").match(_)&&parseFloat(fr[js])||fr[js]||0,isNaN(qs)!==isNaN(zo))return isNaN(qs)?1:-1;if(typeof qs!=typeof zo&&(qs+="",zo+=""),qs<zo)return-1;if(qs>zo)return 1}return 0};const naturalSort$1=getDefaultExportFromCjs(naturalSort);var name$2J="compareNatural",dependencies$2J=["typed","compare"],createCompareNatural=factory(name$2J,dependencies$2J,a=>{var{typed:s,compare:o}=a,c=o.signatures["boolean,boolean"];return s(name$2J,{"any, any":h});function h($,j){var Xt=typeOf$1($),Lt=typeOf$1(j),fr;if((Xt==="number"||Xt==="BigNumber"||Xt==="Fraction")&&(Lt==="number"||Lt==="BigNumber"||Lt==="Fraction"))return fr=o($,j),fr.toString()!=="0"?fr>0?1:-1:naturalSort$1(Xt,Lt);var Jr=["Array","DenseMatrix","SparseMatrix"];if(Jr.includes(Xt)||Jr.includes(Lt))return fr=d(h,$,j),fr!==0?fr:naturalSort$1(Xt,Lt);if(Xt!==Lt)return naturalSort$1(Xt,Lt);if(Xt==="Complex")return compareComplexNumbers($,j);if(Xt==="Unit")return $.equalBase(j)?h($.value,j.value):b(h,$.formatUnits(),j.formatUnits());if(Xt==="boolean")return c($,j);if(Xt==="string")return naturalSort$1($,j);if(Xt==="Object")return _(h,$,j);if(Xt==="null"||Xt==="undefined")return 0;throw new TypeError('Unsupported type of value "'+Xt+'"')}function d($,j,Xt){return isSparseMatrix(j)&&isSparseMatrix(Xt)?b($,j.toJSON().values,Xt.toJSON().values):isSparseMatrix(j)?d($,j.toArray(),Xt):isSparseMatrix(Xt)?d($,j,Xt.toArray()):isDenseMatrix(j)?d($,j.toJSON().data,Xt):isDenseMatrix(Xt)?d($,j,Xt.toJSON().data):Array.isArray(j)?Array.isArray(Xt)?b($,j,Xt):d($,j,[Xt]):d($,[j],Xt)}function b($,j,Xt){for(var Lt=0,fr=Math.min(j.length,Xt.length);Lt<fr;Lt++){var Jr=$(j[Lt],Xt[Lt]);if(Jr!==0)return Jr}return j.length>Xt.length?1:j.length<Xt.length?-1:0}function _($,j,Xt){var Lt=Object.keys(j),fr=Object.keys(Xt);Lt.sort(naturalSort$1),fr.sort(naturalSort$1);var Jr=b($,Lt,fr);if(Jr!==0)return Jr;for(var Js=0;Js<Lt.length;Js++){var qs=$(j[Lt[Js]],Xt[fr[Js]]);if(qs!==0)return qs}return 0}});function compareComplexNumbers(a,s){return a.re>s.re?1:a.re<s.re?-1:a.im>s.im?1:a.im<s.im?-1:0}var name$2I="compareText",dependencies$2I=["typed","matrix","concat"];compareText$1.signature="any, any";var createCompareText=factory(name$2I,dependencies$2I,a=>{var{typed:s,matrix:o,concat:c}=a,h=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:c});return s(name$2I,compareText$1,h({elop:compareText$1,Ds:!0}))}),name$2H="equal",dependencies$2H=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],createEqual=factory(name$2H,dependencies$2H,a=>{var{typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d,SparseMatrix:b}=a,_=createMatAlgo03xDSf({typed:s}),$=createMatAlgo07xSSf({typed:s,SparseMatrix:b}),j=createMatAlgo12xSfs({typed:s,DenseMatrix:h}),Xt=createMatrixAlgorithmSuite({typed:s,matrix:o});return s(name$2H,createEqualNumber({typed:s,equalScalar:c}),Xt({elop:c,SS:$,DS:_,Ss:j}))}),createEqualNumber=factory(name$2H,["typed","equalScalar"],a=>{var{typed:s,equalScalar:o}=a;return s(name$2H,{"any, any":function(h,d){return h===null?d===null:d===null?h===null:h===void 0?d===void 0:d===void 0?h===void 0:o(h,d)}})}),name$2G="equalText",dependencies$2G=["typed","compareText","isZero"],createEqualText=factory(name$2G,dependencies$2G,a=>{var{typed:s,compareText:o,isZero:c}=a;return s(name$2G,{"any, any":function(d,b){return c(o(d,b))}})}),name$2F="smaller",dependencies$2F=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],createSmaller=factory(name$2F,dependencies$2F,a=>{var{typed:s,config:o,bignumber:c,matrix:h,DenseMatrix:d,concat:b,SparseMatrix:_}=a,$=createMatAlgo03xDSf({typed:s}),j=createMatAlgo07xSSf({typed:s,SparseMatrix:_}),Xt=createMatAlgo12xSfs({typed:s,DenseMatrix:d}),Lt=createMatrixAlgorithmSuite({typed:s,matrix:h,concat:b}),fr=createCompareUnits({typed:s});function Jr(Js,qs){return Js.lt(qs)&&!nearlyEqual(Js,qs,o.relTol,o.absTol)}return s(name$2F,createSmallerNumber({typed:s,config:o}),{"boolean, boolean":(Js,qs)=>Js<qs,"BigNumber, BigNumber":Jr,"bigint, bigint":(Js,qs)=>Js<qs,"Fraction, Fraction":(Js,qs)=>Js.compare(qs)===-1,"Fraction, BigNumber":function(qs,zo){return Jr(c(qs),zo)},"BigNumber, Fraction":function(qs,zo){return Jr(qs,c(zo))},"Complex, Complex":function(qs,zo){throw new TypeError("No ordering relation is defined for complex numbers")}},fr,Lt({SS:j,DS:$,Ss:Xt}))}),createSmallerNumber=factory(name$2F,["typed","config"],a=>{var{typed:s,config:o}=a;return s(name$2F,{"number, number":function(h,d){return h<d&&!nearlyEqual$1(h,d,o.relTol,o.absTol)}})}),name$2E="smallerEq",dependencies$2E=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],createSmallerEq=factory(name$2E,dependencies$2E,a=>{var{typed:s,config:o,matrix:c,DenseMatrix:h,concat:d,SparseMatrix:b}=a,_=createMatAlgo03xDSf({typed:s}),$=createMatAlgo07xSSf({typed:s,SparseMatrix:b}),j=createMatAlgo12xSfs({typed:s,DenseMatrix:h}),Xt=createMatrixAlgorithmSuite({typed:s,matrix:c,concat:d}),Lt=createCompareUnits({typed:s});return s(name$2E,createSmallerEqNumber({typed:s,config:o}),{"boolean, boolean":(fr,Jr)=>fr<=Jr,"BigNumber, BigNumber":function(Jr,Js){return Jr.lte(Js)||nearlyEqual(Jr,Js,o.relTol,o.absTol)},"bigint, bigint":(fr,Jr)=>fr<=Jr,"Fraction, Fraction":(fr,Jr)=>fr.compare(Jr)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},Lt,Xt({SS:$,DS:_,Ss:j}))}),createSmallerEqNumber=factory(name$2E,["typed","config"],a=>{var{typed:s,config:o}=a;return s(name$2E,{"number, number":function(h,d){return h<=d||nearlyEqual$1(h,d,o.relTol,o.absTol)}})}),name$2D="larger",dependencies$2D=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],createLarger=factory(name$2D,dependencies$2D,a=>{var{typed:s,config:o,bignumber:c,matrix:h,DenseMatrix:d,concat:b,SparseMatrix:_}=a,$=createMatAlgo03xDSf({typed:s}),j=createMatAlgo07xSSf({typed:s,SparseMatrix:_}),Xt=createMatAlgo12xSfs({typed:s,DenseMatrix:d}),Lt=createMatrixAlgorithmSuite({typed:s,matrix:h,concat:b}),fr=createCompareUnits({typed:s});function Jr(Js,qs){return Js.gt(qs)&&!nearlyEqual(Js,qs,o.relTol,o.absTol)}return s(name$2D,createLargerNumber({typed:s,config:o}),{"boolean, boolean":(Js,qs)=>Js>qs,"BigNumber, BigNumber":Jr,"bigint, bigint":(Js,qs)=>Js>qs,"Fraction, Fraction":(Js,qs)=>Js.compare(qs)===1,"Fraction, BigNumber":function(qs,zo){return Jr(c(qs),zo)},"BigNumber, Fraction":function(qs,zo){return Jr(qs,c(zo))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},fr,Lt({SS:j,DS:$,Ss:Xt}))}),createLargerNumber=factory(name$2D,["typed","config"],a=>{var{typed:s,config:o}=a;return s(name$2D,{"number, number":function(h,d){return h>d&&!nearlyEqual$1(h,d,o.relTol,o.absTol)}})}),name$2C="largerEq",dependencies$2C=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],createLargerEq=factory(name$2C,dependencies$2C,a=>{var{typed:s,config:o,matrix:c,DenseMatrix:h,concat:d,SparseMatrix:b}=a,_=createMatAlgo03xDSf({typed:s}),$=createMatAlgo07xSSf({typed:s,SparseMatrix:b}),j=createMatAlgo12xSfs({typed:s,DenseMatrix:h}),Xt=createMatrixAlgorithmSuite({typed:s,matrix:c,concat:d}),Lt=createCompareUnits({typed:s});return s(name$2C,createLargerEqNumber({typed:s,config:o}),{"boolean, boolean":(fr,Jr)=>fr>=Jr,"BigNumber, BigNumber":function(Jr,Js){return Jr.gte(Js)||nearlyEqual(Jr,Js,o.relTol,o.absTol)},"bigint, bigint":function(Jr,Js){return Jr>=Js},"Fraction, Fraction":(fr,Jr)=>fr.compare(Jr)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},Lt,Xt({SS:$,DS:_,Ss:j}))}),createLargerEqNumber=factory(name$2C,["typed","config"],a=>{var{typed:s,config:o}=a;return s(name$2C,{"number, number":function(h,d){return h>=d||nearlyEqual$1(h,d,o.relTol,o.absTol)}})}),name$2B="deepEqual",dependencies$2B=["typed","equal"],createDeepEqual=factory(name$2B,dependencies$2B,a=>{var{typed:s,equal:o}=a;return s(name$2B,{"any, any":function(d,b){return c(d.valueOf(),b.valueOf())}});function c(h,d){if(Array.isArray(h))if(Array.isArray(d)){var b=h.length;if(b!==d.length)return!1;for(var _=0;_<b;_++)if(!c(h[_],d[_]))return!1;return!0}else return!1;else return Array.isArray(d)?!1:o(h,d)}}),name$2A="unequal",dependencies$2A=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],createUnequal=factory(name$2A,dependencies$2A,a=>{var{typed:s,config:o,equalScalar:c,matrix:h,DenseMatrix:d,concat:b,SparseMatrix:_}=a,$=createMatAlgo03xDSf({typed:s}),j=createMatAlgo07xSSf({typed:s,SparseMatrix:_}),Xt=createMatAlgo12xSfs({typed:s,DenseMatrix:d}),Lt=createMatrixAlgorithmSuite({typed:s,matrix:h,concat:b});return s(name$2A,createUnequalNumber({typed:s,equalScalar:c}),Lt({elop:fr,SS:j,DS:$,Ss:Xt}));function fr(Jr,Js){return!c(Jr,Js)}}),createUnequalNumber=factory(name$2A,["typed","equalScalar"],a=>{var{typed:s,equalScalar:o}=a;return s(name$2A,{"any, any":function(h,d){return h===null?d!==null:d===null?h!==null:h===void 0?d!==void 0:d===void 0?h!==void 0:!o(h,d)}})}),name$2z="partitionSelect",dependencies$2z=["typed","isNumeric","isNaN","compare"],createPartitionSelect=factory(name$2z,dependencies$2z,a=>{var{typed:s,isNumeric:o,isNaN:c,compare:h}=a,d=h,b=(j,Xt)=>-h(j,Xt);return s(name$2z,{"Array | Matrix, number":function(Xt,Lt){return _(Xt,Lt,d)},"Array | Matrix, number, string":function(Xt,Lt,fr){if(fr==="asc")return _(Xt,Lt,d);if(fr==="desc")return _(Xt,Lt,b);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":_});function _(j,Xt,Lt){if(!isInteger$1(Xt)||Xt<0)throw new Error("k must be a non-negative integer");if(isMatrix(j)){var fr=j.size();if(fr.length>1)throw new Error("Only one dimensional matrices supported");return $(j.valueOf(),Xt,Lt)}if(Array.isArray(j))return $(j,Xt,Lt)}function $(j,Xt,Lt){if(Xt>=j.length)throw new Error("k out of bounds");for(var fr=0;fr<j.length;fr++)if(o(j[fr])&&c(j[fr]))return j[fr];for(var Jr=0,Js=j.length-1;Jr<Js;){for(var qs=Jr,zo=Js,js=j[Math.floor(Math.random()*(Js-Jr+1))+Jr];qs<zo;)if(Lt(j[qs],js)>=0){var eu=j[zo];j[zo]=j[qs],j[qs]=eu,--zo}else++qs;Lt(j[qs],js)>0&&--qs,Xt<=qs?Js=qs:Jr=qs+1}return j[Xt]}}),name$2y="sort",dependencies$2y=["typed","matrix","compare","compareNatural"],createSort=factory(name$2y,dependencies$2y,a=>{var{typed:s,matrix:o,compare:c,compareNatural:h}=a,d=c,b=(Xt,Lt)=>-c(Xt,Lt);return s(name$2y,{Array:function(Lt){return $(Lt),Lt.sort(d)},Matrix:function(Lt){return j(Lt),o(Lt.toArray().sort(d),Lt.storage())},"Array, function":function(Lt,fr){return $(Lt),Lt.sort(fr)},"Matrix, function":function(Lt,fr){return j(Lt),o(Lt.toArray().sort(fr),Lt.storage())},"Array, string":function(Lt,fr){return $(Lt),Lt.sort(_(fr))},"Matrix, string":function(Lt,fr){return j(Lt),o(Lt.toArray().sort(_(fr)),Lt.storage())}});function _(Xt){if(Xt==="asc")return d;if(Xt==="desc")return b;if(Xt==="natural")return h;throw new Error('String "asc", "desc", or "natural" expected')}function $(Xt){if(arraySize(Xt).length!==1)throw new Error("One dimensional array expected")}function j(Xt){if(Xt.size().length!==1)throw new Error("One dimensional matrix expected")}}),name$2x="max",dependencies$2x=["typed","config","numeric","larger","isNaN"],createMax=factory(name$2x,dependencies$2x,a=>{var{typed:s,config:o,numeric:c,larger:h,isNaN:d}=a;return s(name$2x,{"Array | Matrix":_,"Array | Matrix, number | BigNumber":function(j,Xt){return reduce(j,Xt.valueOf(),b)},"...":function(j){if(containsCollections(j))throw new TypeError("Scalar values expected in function max");return _(j)}});function b($,j){try{return h($,j)?$:j}catch(Xt){throw improveErrorMessage(Xt,"max",j)}}function _($){var j;if(deepForEach($,function(Xt){try{(d(Xt)||j===void 0||h(Xt,j))&&(j=Xt)}catch(Lt){throw improveErrorMessage(Lt,"max",Xt)}}),j===void 0)throw new Error("Cannot calculate max of an empty array");return typeof j=="string"&&(j=c(j,safeNumberType(j,o))),j}}),name$2w="min",dependencies$2w=["typed","config","numeric","smaller","isNaN"],createMin=factory(name$2w,dependencies$2w,a=>{var{typed:s,config:o,numeric:c,smaller:h,isNaN:d}=a;return s(name$2w,{"Array | Matrix":_,"Array | Matrix, number | BigNumber":function(j,Xt){return reduce(j,Xt.valueOf(),b)},"...":function(j){if(containsCollections(j))throw new TypeError("Scalar values expected in function min");return _(j)}});function b($,j){try{return h($,j)?$:j}catch(Xt){throw improveErrorMessage(Xt,"min",j)}}function _($){var j;if(deepForEach($,function(Xt){try{(d(Xt)||j===void 0||h(Xt,j))&&(j=Xt)}catch(Lt){throw improveErrorMessage(Lt,"min",Xt)}}),j===void 0)throw new Error("Cannot calculate min of an empty array");return typeof j=="string"&&(j=c(j,safeNumberType(j,o))),j}}),name$2v="ImmutableDenseMatrix",dependencies$2v=["smaller","DenseMatrix"],createImmutableDenseMatrixClass=factory(name$2v,dependencies$2v,a=>{var{smaller:s,DenseMatrix:o}=a;function c(h,d){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!isString(d))throw new Error("Invalid datatype: "+d);if(isMatrix(h)||isArray(h)){var b=new o(h,d);this._data=b._data,this._size=b._size,this._datatype=b._datatype,this._min=null,this._max=null}else if(h&&isArray(h.data)&&isArray(h.size))this._data=h.data,this._size=h.size,this._datatype=h.datatype,this._min=typeof h.min<"u"?h.min:null,this._max=typeof h.max<"u"?h.max:null;else{if(h)throw new TypeError("Unsupported type of data ("+typeOf$1(h)+")");this._data=[],this._size=[0],this._datatype=d,this._min=null,this._max=null}}return c.prototype=new o,c.prototype.type="ImmutableDenseMatrix",c.prototype.isImmutableDenseMatrix=!0,c.prototype.subset=function(h){switch(arguments.length){case 1:{var d=o.prototype.subset.call(this,h);return isMatrix(d)?new c({data:d._data,size:d._size,datatype:d._datatype}):d}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},c.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},c.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},c.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},c.prototype.clone=function(){return new c({data:clone$3(this._data),size:clone$3(this._size),datatype:this._datatype})},c.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},c.fromJSON=function(h){return new c(h)},c.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},c.prototype.min=function(){if(this._min===null){var h=null;this.forEach(function(d){(h===null||s(d,h))&&(h=d)}),this._min=h!==null?h:void 0}return this._min},c.prototype.max=function(){if(this._max===null){var h=null;this.forEach(function(d){(h===null||s(h,d))&&(h=d)}),this._max=h!==null?h:void 0}return this._max},c},{isClass:!0}),name$2u="Index",dependencies$2u=["ImmutableDenseMatrix","getMatrixDataType"],createIndexClass=factory(name$2u,dependencies$2u,a=>{var{ImmutableDenseMatrix:s,getMatrixDataType:o}=a;function c(){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var d=0,b=arguments.length;d<b;d++){var _=d<0||arguments.length<=d?void 0:arguments[d],$=isArray(_),j=isMatrix(_),Xt=typeof _,Lt=null;if(isRange(_))this._dimensions.push(_),this._isScalar=!1;else if($||j){var fr=void 0;this._isScalar=!1,o(_)==="boolean"?($&&(fr=h(_booleansArrayToNumbersForIndex(_).valueOf())),j&&(fr=h(_booleansArrayToNumbersForIndex(_._data).valueOf())),Lt=_.valueOf().length):fr=h(_.valueOf()),this._dimensions.push(fr)}else if(Xt==="number")this._dimensions.push(_);else if(Xt==="bigint")this._dimensions.push(Number(_));else if(Xt==="string")this._dimensions.push(_);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(Lt)}}c.prototype.type="Index",c.prototype.isIndex=!0;function h(d){for(var b=0,_=d.length;b<_;b++)if(!isNumber(d[b])||!isInteger$1(d[b]))throw new TypeError("Index parameters must be positive integer numbers");var $=new s;return $._data=d,$._size=[d.length],$}return c.prototype.clone=function(){var d=new c;return d._dimensions=clone$3(this._dimensions),d._isScalar=this._isScalar,d._sourceSize=this._sourceSize,d},c.create=function(d){var b=new c;return c.apply(b,d),b},c.prototype.size=function(){for(var d=[],b=0,_=this._dimensions.length;b<_;b++){var $=this._dimensions[b];d[b]=isString($)||isNumber($)?1:$.size()[0]}return d},c.prototype.max=function(){for(var d=[],b=0,_=this._dimensions.length;b<_;b++){var $=this._dimensions[b];d[b]=isString($)||isNumber($)?$:$.max()}return d},c.prototype.min=function(){for(var d=[],b=0,_=this._dimensions.length;b<_;b++){var $=this._dimensions[b];d[b]=isString($)||isNumber($)?$:$.min()}return d},c.prototype.forEach=function(d){for(var b=0,_=this._dimensions.length;b<_;b++)d(this._dimensions[b],b,this)},c.prototype.dimension=function(d){var b;return isNumber(d)&&(b=this._dimensions[d])!==null&&b!==void 0?b:null},c.prototype.isObjectProperty=function(){return this._dimensions.length===1&&isString(this._dimensions[0])},c.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},c.prototype.isScalar=function(){return this._isScalar},c.prototype.toArray=function(){for(var d=[],b=0,_=this._dimensions.length;b<_;b++){var $=this._dimensions[b];d.push(isString($)||isNumber($)?$:$.toArray())}return d},c.prototype.valueOf=c.prototype.toArray,c.prototype.toString=function(){for(var d=[],b=0,_=this._dimensions.length;b<_;b++){var $=this._dimensions[b];isString($)?d.push(JSON.stringify($)):d.push($.toString())}return"["+d.join(", ")+"]"},c.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},c.fromJSON=function(d){return c.create(d.dimensions)},c},{isClass:!0});function _booleansArrayToNumbersForIndex(a){var s=[];return a.forEach((o,c)=>{o&&s.push(c)}),s}var name$2t="FibonacciHeap",dependencies$2t=["smaller","larger"],createFibonacciHeapClass=factory(name$2t,dependencies$2t,a=>{var{smaller:s,larger:o}=a,c=1/Math.log((1+Math.sqrt(5))/2);function h(){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}h.prototype.type="FibonacciHeap",h.prototype.isFibonacciHeap=!0,h.prototype.insert=function(Xt,Lt){var fr={key:Xt,value:Lt,degree:0};if(this._minimum){var Jr=this._minimum;fr.left=Jr,fr.right=Jr.right,Jr.right=fr,fr.right.left=fr,s(Xt,Jr.key)&&(this._minimum=fr)}else fr.left=fr,fr.right=fr,this._minimum=fr;return this._size++,fr},h.prototype.size=function(){return this._size},h.prototype.clear=function(){this._minimum=null,this._size=0},h.prototype.isEmpty=function(){return this._size===0},h.prototype.extractMinimum=function(){var Xt=this._minimum;if(Xt===null)return Xt;for(var Lt=this._minimum,fr=Xt.degree,Jr=Xt.child;fr>0;){var Js=Jr.right;Jr.left.right=Jr.right,Jr.right.left=Jr.left,Jr.left=Lt,Jr.right=Lt.right,Lt.right=Jr,Jr.right.left=Jr,Jr.parent=null,Jr=Js,fr--}return Xt.left.right=Xt.right,Xt.right.left=Xt.left,Xt===Xt.right?Lt=null:(Lt=Xt.right,Lt=j(Lt,this._size)),this._size--,this._minimum=Lt,Xt},h.prototype.remove=function(Xt){this._minimum=d(this._minimum,Xt,-1),this.extractMinimum()};function d(Xt,Lt,fr){Lt.key=fr;var Jr=Lt.parent;return Jr&&s(Lt.key,Jr.key)&&(b(Xt,Lt,Jr),_(Xt,Jr)),s(Lt.key,Xt.key)&&(Xt=Lt),Xt}function b(Xt,Lt,fr){Lt.left.right=Lt.right,Lt.right.left=Lt.left,fr.degree--,fr.child===Lt&&(fr.child=Lt.right),fr.degree===0&&(fr.child=null),Lt.left=Xt,Lt.right=Xt.right,Xt.right=Lt,Lt.right.left=Lt,Lt.parent=null,Lt.mark=!1}function _(Xt,Lt){var fr=Lt.parent;fr&&(Lt.mark?(b(Xt,Lt,fr),_(fr)):Lt.mark=!0)}var $=function(Lt,fr){Lt.left.right=Lt.right,Lt.right.left=Lt.left,Lt.parent=fr,fr.child?(Lt.left=fr.child,Lt.right=fr.child.right,fr.child.right=Lt,Lt.right.left=Lt):(fr.child=Lt,Lt.right=Lt,Lt.left=Lt),fr.degree++,Lt.mark=!1};function j(Xt,Lt){var fr=Math.floor(Math.log(Lt)*c)+1,Jr=new Array(fr),Js=0,qs=Xt;if(qs)for(Js++,qs=qs.right;qs!==Xt;)Js++,qs=qs.right;for(var zo;Js>0;){for(var js=qs.degree,eu=qs.right;zo=Jr[js],!!zo;){if(o(qs.key,zo.key)){var Oo=zo;zo=qs,qs=Oo}$(zo,qs),Jr[js]=null,js++}Jr[js]=qs,qs=eu,Js--}Xt=null;for(var tu=0;tu<fr;tu++)zo=Jr[tu],zo&&(Xt?(zo.left.right=zo.right,zo.right.left=zo.left,zo.left=Xt,zo.right=Xt.right,Xt.right=zo,zo.right.left=zo,s(zo.key,Xt.key)&&(Xt=zo)):Xt=zo);return Xt}return h},{isClass:!0}),name$2s="Spa",dependencies$2s=["addScalar","equalScalar","FibonacciHeap"],createSpaClass=factory(name$2s,dependencies$2s,a=>{var{addScalar:s,equalScalar:o,FibonacciHeap:c}=a;function h(){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new c}return h.prototype.type="Spa",h.prototype.isSpa=!0,h.prototype.set=function(d,b){if(this._values[d])this._values[d].value=b;else{var _=this._heap.insert(d,b);this._values[d]=_}},h.prototype.get=function(d){var b=this._values[d];return b?b.value:0},h.prototype.accumulate=function(d,b){var _=this._values[d];_?_.value=s(_.value,b):(_=this._heap.insert(d,b),this._values[d]=_)},h.prototype.forEach=function(d,b,_){var $=this._heap,j=this._values,Xt=[],Lt=$.extractMinimum();for(Lt&&Xt.push(Lt);Lt&&Lt.key<=b;)Lt.key>=d&&(o(Lt.value,0)||_(Lt.key,Lt.value,this)),Lt=$.extractMinimum(),Lt&&Xt.push(Lt);for(var fr=0;fr<Xt.length;fr++){var Jr=Xt[fr];Lt=$.insert(Jr.key,Jr.value),j[Lt.key]=Lt}},h.prototype.swap=function(d,b){var _=this._values[d],$=this._values[b];if(!_&&$)_=this._heap.insert(d,$.value),this._heap.remove($),this._values[d]=_,this._values[b]=void 0;else if(_&&!$)$=this._heap.insert(b,_.value),this._heap.remove(_),this._values[b]=$,this._values[d]=void 0;else if(_&&$){var j=_.value;_.value=$.value,$.value=j}},h},{isClass:!0});function lruQueue(a){var s=0,o=1,c=Object.create(null),h=Object.create(null),d=0,b=function($){var j=h[$];if(j&&(delete c[j],delete h[$],--s,o===j)){if(!s){d=0,o=1;return}for(;!Object.prototype.hasOwnProperty.call(c,++o););}};return a=Math.abs(a),{hit:function($){var j=h[$],Xt=++d;if(c[Xt]=$,h[$]=Xt,!j)return++s,s<=a?void 0:($=c[o],b($),$);if(delete c[j],o===j)for(;!Object.prototype.hasOwnProperty.call(c,++o););},delete:b,clear:function(){s=d=0,o=1,c=Object.create(null),h=Object.create(null)}}}function memoize(a){var{hasher:s,limit:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o=o??Number.POSITIVE_INFINITY,s=s??JSON.stringify,function c(){typeof c.cache!="object"&&(c.cache={values:new Map,lru:lruQueue(o||Number.POSITIVE_INFINITY)});for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var b=s(h);if(c.cache.values.has(b))return c.cache.lru.hit(b),c.cache.values.get(b);var _=a.apply(a,h);return c.cache.values.set(b,_),c.cache.values.delete(c.cache.lru.hit(b)),_}}var createBigNumberE=memoize(function(a){return new a(1).exp()},{hasher}),createBigNumberPhi=memoize(function(a){return new a(1).plus(new a(5).sqrt()).div(2)},{hasher}),createBigNumberPi=memoize(function(a){return a.acos(-1)},{hasher}),createBigNumberTau=memoize(function(a){return createBigNumberPi(a).times(2)},{hasher});function hasher(a){return a[0].precision}function ownKeys$2(a,s){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),o.push.apply(o,c)}return o}function _objectSpread$2(a){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$2(Object(o),!0).forEach(function(c){_defineProperty(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):ownKeys$2(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}var name$2r="Unit",dependencies$2r=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],createUnitClass=factory(name$2r,dependencies$2r,a=>{var{on:s,config:o,addScalar:c,subtractScalar:h,multiplyScalar:d,divideScalar:b,pow:_,abs:$,fix:j,round:Xt,equal:Lt,isNumeric:fr,format:Jr,number:Js,Complex:qs,BigNumber:zo,Fraction:js}=a,eu=Js,Oo=!1,tu=!0;function Bo($1,A1){if(!(this instanceof Bo))throw new Error("Constructor must be called with the new operator");if(!($1==null||fr($1)||isComplex($1)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=Oo,this.skipAutomaticSimplification=tu,A1===void 0)this.units=[],this.dimensions=S1.map(_1=>0);else if(typeof A1=="string"){var y1=Bo.parse(A1);this.units=y1.units,this.dimensions=y1.dimensions}else if(isUnit(A1)&&A1.value===null)this.fixPrefix=A1.fixPrefix,this.skipAutomaticSimplification=A1.skipAutomaticSimplification,this.dimensions=A1.dimensions.slice(0),this.units=A1.units.map(_1=>_extends$1({},_1));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize($1)}Object.defineProperty(Bo,"name",{value:"Unit"}),Bo.prototype.constructor=Bo,Bo.prototype.type="Unit",Bo.prototype.isUnit=!0;var vu,t1,e1;function r1(){for(;e1===" "||e1==="	";)s1()}function a1($1){return $1>="0"&&$1<="9"||$1==="."}function i1($1){return $1>="0"&&$1<="9"}function s1(){t1++,e1=vu.charAt(t1)}function c1($1){t1=$1,e1=vu.charAt(t1)}function h1(){var $1="",A1=t1;if(e1==="+"?s1():e1==="-"&&($1+=e1,s1()),!a1(e1))return c1(A1),null;if(e1==="."){if($1+=e1,s1(),!i1(e1))return c1(A1),null}else{for(;i1(e1);)$1+=e1,s1();e1==="."&&($1+=e1,s1())}for(;i1(e1);)$1+=e1,s1();if(e1==="E"||e1==="e"){var y1="",_1=t1;if(y1+=e1,s1(),(e1==="+"||e1==="-")&&(y1+=e1,s1()),!i1(e1))return c1(_1),$1;for($1=$1+y1;i1(e1);)$1+=e1,s1()}return $1}function m1(){for(var $1="";i1(e1)||Bo.isValidAlpha(e1);)$1+=e1,s1();var A1=$1.charAt(0);return Bo.isValidAlpha(A1)?$1:null}function l1($1){return e1===$1?(s1(),$1):null}Bo.parse=function($1,A1){if(A1=A1||{},vu=$1,t1=-1,e1="",typeof vu!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var y1=new Bo;y1.units=[];var _1=1,D1=!1;s1(),r1();var E1=h1(),P1=null;if(E1){if(o.number==="BigNumber")P1=new zo(E1);else if(o.number==="Fraction")try{P1=new js(E1)}catch{P1=parseFloat(E1)}else P1=parseFloat(E1);r1(),l1("*")?(_1=1,D1=!0):l1("/")&&(_1=-1,D1=!0)}for(var X1=[],V1=1;;){for(r1();e1==="(";)X1.push(_1),V1*=_1,_1=1,s1(),r1();var F1=void 0;if(e1){var z1=e1;if(F1=m1(),F1===null)throw new SyntaxError('Unexpected "'+z1+'" in "'+vu+'" at index '+t1.toString())}else break;var J1=f1(F1);if(J1===null)throw new SyntaxError('Unit "'+F1+'" not found.');var Y1=_1*V1;if(r1(),l1("^")){r1();var ev=h1();if(ev===null)throw new SyntaxError('In "'+$1+'", "^" must be followed by a floating-point number');Y1*=ev}y1.units.push({unit:J1.unit,prefix:J1.prefix,power:Y1});for(var Z1=0;Z1<S1.length;Z1++)y1.dimensions[Z1]+=(J1.unit.dimensions[Z1]||0)*Y1;for(r1();e1===")";){if(X1.length===0)throw new SyntaxError('Unmatched ")" in "'+vu+'" at index '+t1.toString());V1/=X1.pop(),s1(),r1()}if(D1=!1,l1("*")?(_1=1,D1=!0):l1("/")?(_1=-1,D1=!0):_1=1,J1.unit.base){var R1=J1.unit.base.key;N1.auto[R1]={unit:J1.unit,prefix:J1.prefix}}}if(r1(),e1)throw new SyntaxError('Could not parse: "'+$1+'"');if(D1)throw new SyntaxError('Trailing characters: "'+$1+'"');if(X1.length!==0)throw new SyntaxError('Unmatched "(" in "'+vu+'"');if(y1.units.length===0&&!A1.allowNoUnits)throw new SyntaxError('"'+$1+'" contains no units');return y1.value=P1!==void 0?y1._normalize(P1):null,y1},Bo.prototype.clone=function(){var $1=new Bo;$1.fixPrefix=this.fixPrefix,$1.skipAutomaticSimplification=this.skipAutomaticSimplification,$1.value=clone$3(this.value),$1.dimensions=this.dimensions.slice(0),$1.units=[];for(var A1=0;A1<this.units.length;A1++){$1.units[A1]={};for(var y1 in this.units[A1])hasOwnProperty(this.units[A1],y1)&&($1.units[A1][y1]=this.units[A1][y1])}return $1},Bo.prototype.valueType=function(){return typeOf$1(this.value)},Bo.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},Bo.prototype._normalize=function($1){if($1==null||this.units.length===0)return $1;for(var A1=$1,y1=Bo._getNumberConverter(typeOf$1($1)),_1=0;_1<this.units.length;_1++){var D1=y1(this.units[_1].unit.value),E1=y1(this.units[_1].prefix.value),P1=y1(this.units[_1].power);A1=d(A1,_(d(D1,E1),P1))}return A1},Bo.prototype._denormalize=function($1,A1){if($1==null||this.units.length===0)return $1;for(var y1=$1,_1=Bo._getNumberConverter(typeOf$1($1)),D1=0;D1<this.units.length;D1++){var E1=_1(this.units[D1].unit.value),P1=_1(this.units[D1].prefix.value),X1=_1(this.units[D1].power);y1=b(y1,_(d(E1,P1),X1))}return y1};var f1=memoize($1=>{if(hasOwnProperty(x1,$1)){var A1=x1[$1],y1=A1.prefixes[""];return{unit:A1,prefix:y1}}for(var _1 in x1)if(hasOwnProperty(x1,_1)&&endsWith($1,_1)){var D1=x1[_1],E1=$1.length-_1.length,P1=$1.substring(0,E1),X1=hasOwnProperty(D1.prefixes,P1)?D1.prefixes[P1]:void 0;if(X1!==void 0)return{unit:D1,prefix:X1}}return null},{hasher:$1=>$1[0],limit:100});Bo.isValuelessUnit=function($1){return f1($1)!==null},Bo.prototype.hasBase=function($1){if(typeof $1=="string"&&($1=v1[$1]),!$1)return!1;for(var A1=0;A1<S1.length;A1++)if(Math.abs((this.dimensions[A1]||0)-($1.dimensions[A1]||0))>1e-12)return!1;return!0},Bo.prototype.equalBase=function($1){for(var A1=0;A1<S1.length;A1++)if(Math.abs((this.dimensions[A1]||0)-($1.dimensions[A1]||0))>1e-12)return!1;return!0},Bo.prototype.equals=function($1){return this.equalBase($1)&&Lt(this.value,$1.value)},Bo.prototype.multiply=function($1){for(var A1=this.clone(),y1=isUnit($1)?$1:new Bo($1),_1=0;_1<S1.length;_1++)A1.dimensions[_1]=(this.dimensions[_1]||0)+(y1.dimensions[_1]||0);for(var D1=0;D1<y1.units.length;D1++){var E1=_objectSpread$2({},y1.units[D1]);A1.units.push(E1)}if(this.value!==null||y1.value!==null){var P1=this.value===null?this._normalize(d1(y1.value)):this.value,X1=y1.value===null?y1._normalize(d1(this.value)):y1.value;A1.value=d(P1,X1)}else A1.value=null;return isUnit($1)&&(A1.skipAutomaticSimplification=!1),p1(A1)},Bo.prototype.divideInto=function($1){return new Bo($1).divide(this)},Bo.prototype.divide=function($1){for(var A1=this.clone(),y1=isUnit($1)?$1:new Bo($1),_1=0;_1<S1.length;_1++)A1.dimensions[_1]=(this.dimensions[_1]||0)-(y1.dimensions[_1]||0);for(var D1=0;D1<y1.units.length;D1++){var E1=_objectSpread$2(_objectSpread$2({},y1.units[D1]),{},{power:-y1.units[D1].power});A1.units.push(E1)}if(this.value!==null||y1.value!==null){var P1=this.value===null?this._normalize(d1(y1.value)):this.value,X1=y1.value===null?y1._normalize(d1(this.value)):y1.value;A1.value=b(P1,X1)}else A1.value=null;return isUnit($1)&&(A1.skipAutomaticSimplification=!1),p1(A1)},Bo.prototype.pow=function($1){for(var A1=this.clone(),y1=0;y1<S1.length;y1++)A1.dimensions[y1]=(this.dimensions[y1]||0)*$1;for(var _1=0;_1<A1.units.length;_1++)A1.units[_1].power*=$1;return A1.value!==null?A1.value=_(A1.value,$1):A1.value=null,A1.skipAutomaticSimplification=!1,p1(A1)};function p1($1){return $1.equalBase(v1.NONE)&&$1.value!==null&&!o.predictable?$1.value:$1}function d1($1){var A1=Bo._getNumberConverter(typeOf$1($1));return A1(1)}Bo.prototype.abs=function(){var $1=this.clone();if($1.value!==null)if($1._isDerived()||$1.units.length===0||$1.units[0].unit.offset===0)$1.value=$($1.value);else{var A1=$1._numberConverter(),y1=A1($1.units[0].unit.value),_1=A1($1.units[0].unit.offset),D1=d(y1,_1);$1.value=h($(c($1.value,D1)),D1)}for(var E1 in $1.units)($1.units[E1].unit.name==="VA"||$1.units[E1].unit.name==="VAR")&&($1.units[E1].unit=x1.W);return $1},Bo.prototype.to=function($1){var A1=this.value===null?this._normalize(1):this.value,y1;if(typeof $1=="string")y1=Bo.parse($1);else if(isUnit($1))y1=$1.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(y1))throw new Error("Units do not match ('".concat(y1.toString(),"' != '").concat(this.toString(),"')"));if(y1.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||y1.units.length===0||this.units[0].unit.offset===y1.units[0].unit.offset)y1.value=clone$3(A1);else{var _1=Bo._getNumberConverter(typeOf$1(A1)),D1=this.units[0].unit.value,E1=this.units[0].unit.offset,P1=d(D1,E1),X1=y1.units[0].unit.value,V1=y1.units[0].unit.offset,F1=d(X1,V1);y1.value=c(A1,_1(h(P1,F1)))}return y1.fixPrefix=!0,y1.skipAutomaticSimplification=!0,y1},Bo.prototype.toNumber=function($1){return eu(this.toNumeric($1))},Bo.prototype.toNumeric=function($1){var A1;return $1?A1=this.to($1):A1=this.clone(),A1._isDerived()||A1.units.length===0?A1._denormalize(A1.value):A1._denormalize(A1.value,A1.units[0].prefix.value)},Bo.prototype.toString=function(){return this.format()},Bo.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},Bo.fromJSON=function($1){var A1,y1,_1,D1=new Bo($1.value,(A1=$1.unit)!==null&&A1!==void 0?A1:void 0);return D1.fixPrefix=(y1=$1.fixPrefix)!==null&&y1!==void 0?y1:Oo,D1.skipAutomaticSimplification=(_1=$1.skipSimp)!==null&&_1!==void 0?_1:tu,D1},Bo.prototype.valueOf=Bo.prototype.toString,Bo.prototype.simplify=function(){var $1=this.clone(),A1=[],y1;for(var _1 in L1)if(hasOwnProperty(L1,_1)&&$1.hasBase(v1[_1])){y1=_1;break}if(y1==="NONE")$1.units=[];else{var D1;if(y1&&hasOwnProperty(L1,y1)&&(D1=L1[y1]),D1)$1.units=[{unit:D1.unit,prefix:D1.prefix,power:1}];else{for(var E1=!1,P1=0;P1<S1.length;P1++){var X1=S1[P1];Math.abs($1.dimensions[P1]||0)>1e-12&&(hasOwnProperty(L1,X1)?A1.push({unit:L1[X1].unit,prefix:L1[X1].prefix,power:$1.dimensions[P1]||0}):E1=!0)}A1.length<$1.units.length&&!E1&&($1.units=A1)}}return $1},Bo.prototype.toSI=function(){for(var $1=this.clone(),A1=[],y1=0;y1<S1.length;y1++){var _1=S1[y1];if(Math.abs($1.dimensions[y1]||0)>1e-12)if(hasOwnProperty(N1.si,_1))A1.push({unit:N1.si[_1].unit,prefix:N1.si[_1].prefix,power:$1.dimensions[y1]||0});else throw new Error("Cannot express custom unit "+_1+" in SI units")}return $1.units=A1,$1.fixPrefix=!0,$1.skipAutomaticSimplification=!0,this.value!==null?($1.value=null,this.to($1)):$1},Bo.prototype.formatUnits=function(){for(var $1="",A1="",y1=0,_1=0,D1=0;D1<this.units.length;D1++)this.units[D1].power>0?(y1++,$1+=" "+this.units[D1].prefix.name+this.units[D1].unit.name,Math.abs(this.units[D1].power-1)>1e-15&&($1+="^"+this.units[D1].power)):this.units[D1].power<0&&_1++;if(_1>0)for(var E1=0;E1<this.units.length;E1++)this.units[E1].power<0&&(y1>0?(A1+=" "+this.units[E1].prefix.name+this.units[E1].unit.name,Math.abs(this.units[E1].power+1)>1e-15&&(A1+="^"+-this.units[E1].power)):(A1+=" "+this.units[E1].prefix.name+this.units[E1].unit.name,A1+="^"+this.units[E1].power));$1=$1.substr(1),A1=A1.substr(1),y1>1&&_1>0&&($1="("+$1+")"),_1>1&&y1>0&&(A1="("+A1+")");var P1=$1;return y1>0&&_1>0&&(P1+=" / "),P1+=A1,P1},Bo.prototype.toBest=function(){var $1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($1&&!Array.isArray($1))throw new Error("Invalid unit type. Expected string or Unit.");var y1=this.units[0].unit.prefixes;if($1&&$1.length>0){var _1=$1.map(P1=>{var X1=null;if(typeof P1=="string"){if(X1=Bo.parse(P1),!X1)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!isUnit(P1))throw new Error("Invalid unit type. Expected compatible string or Unit.");X1===null&&(X1=P1.clone());try{return this.to(X1.formatUnits()),X1}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),D1=_1.map(P1=>P1.units[0].prefix);this.units[0].unit.prefixes=D1.reduce((P1,X1)=>(P1[X1.name]=X1,P1),{}),this.units[0].prefix=D1[0]}var E1=b1(this,A1).simp;return this.units[0].unit.prefixes=y1,E1.fixPrefix=!0,E1},Bo.prototype.format=function($1){var{simp:A1,valueStr:y1,unitStr:_1}=b1(this,$1),D1=y1;return A1.value&&isComplex(A1.value)&&(D1="("+D1+")"),_1.length>0&&D1.length>0&&(D1+=" "),D1+=_1,D1};function b1($1){var A1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y1=$1.skipAutomaticSimplification||$1.value===null?$1.clone():$1.simplify();C1(y1),g1(y1,A1.offset);var _1=y1._denormalize(y1.value),D1=y1.value!==null?Jr(_1,A1||{}):"",E1=y1.formatUnits();return{simp:y1,valueStr:D1,unitStr:E1}}function C1($1){var A1=!1;typeof $1.value<"u"&&$1.value!==null&&isComplex($1.value)&&(A1=Math.abs($1.value.re)<1e-14);for(var y1 in $1.units)hasOwnProperty($1.units,y1)&&$1.units[y1].unit&&($1.units[y1].unit.name==="VA"&&A1?$1.units[y1].unit=x1.VAR:$1.units[y1].unit.name==="VAR"&&!A1&&($1.units[y1].unit=x1.VA))}function g1($1,A1){$1.units.length===1&&!$1.fixPrefix&&Math.abs($1.units[0].power-Math.round($1.units[0].power))<1e-14&&($1.units[0].prefix=$1._bestPrefix(A1))}Bo.prototype._bestPrefix=function(){var $1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var A1=this.value!==null?$(this.value):0,y1=$(this.units[0].unit.value),_1=this.units[0].prefix;if(A1===0)return _1;var D1=this.units[0].power,E1=Math.log(A1/Math.pow(_1.value*y1,D1))/Math.LN10-$1;if(E1>-2.200001&&E1<1.800001)return _1;E1=Math.abs(E1);var P1=this.units[0].unit.prefixes;for(var X1 in P1)if(hasOwnProperty(P1,X1)){var V1=P1[X1];if(V1.scientific){var F1=Math.abs(Math.log(A1/Math.pow(V1.value*y1,D1))/Math.LN10-$1);(F1<E1||F1===E1&&V1.name.length<_1.name.length)&&(_1=V1,E1=F1)}}return _1},Bo.prototype.splitUnit=function($1){for(var A1=this.clone(),y1=[],_1=0;_1<$1.length&&(A1=A1.to($1[_1]),_1!==$1.length-1);_1++){var D1=A1.toNumeric(),E1=Xt(D1),P1=void 0,X1=Lt(E1,D1);X1?P1=E1:P1=j(A1.toNumeric());var V1=new Bo(P1,$1[_1].toString());y1.push(V1),A1=h(A1,V1)}for(var F1=0,z1=0;z1<y1.length;z1++)F1=c(F1,y1[z1].value);return Lt(F1,this.value)&&(A1.value=0),y1.push(A1),y1};var o1={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};o1.SHORTLONG=_extends$1({},o1.SHORT,o1.LONG),o1.BINARY_SHORT=_extends$1({},o1.BINARY_SHORT_SI,o1.BINARY_SHORT_IEC),o1.BINARY_LONG=_extends$1({},o1.BINARY_LONG_SI,o1.BINARY_LONG_IEC);var S1=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],v1={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var B1 in v1)hasOwnProperty(v1,B1)&&(v1[B1].key=B1);var T1={},w1={name:"",base:T1,value:1,offset:0,dimensions:S1.map($1=>0)},x1={meter:{name:"meter",base:v1.LENGTH,prefixes:o1.LONG,value:1,offset:0},inch:{name:"inch",base:v1.LENGTH,prefixes:o1.NONE,value:.0254,offset:0},foot:{name:"foot",base:v1.LENGTH,prefixes:o1.NONE,value:.3048,offset:0},yard:{name:"yard",base:v1.LENGTH,prefixes:o1.NONE,value:.9144,offset:0},mile:{name:"mile",base:v1.LENGTH,prefixes:o1.NONE,value:1609.344,offset:0},link:{name:"link",base:v1.LENGTH,prefixes:o1.NONE,value:.201168,offset:0},rod:{name:"rod",base:v1.LENGTH,prefixes:o1.NONE,value:5.0292,offset:0},chain:{name:"chain",base:v1.LENGTH,prefixes:o1.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:v1.LENGTH,prefixes:o1.NONE,value:1e-10,offset:0},m:{name:"m",base:v1.LENGTH,prefixes:o1.SHORT,value:1,offset:0},in:{name:"in",base:v1.LENGTH,prefixes:o1.NONE,value:.0254,offset:0},ft:{name:"ft",base:v1.LENGTH,prefixes:o1.NONE,value:.3048,offset:0},yd:{name:"yd",base:v1.LENGTH,prefixes:o1.NONE,value:.9144,offset:0},mi:{name:"mi",base:v1.LENGTH,prefixes:o1.NONE,value:1609.344,offset:0},li:{name:"li",base:v1.LENGTH,prefixes:o1.NONE,value:.201168,offset:0},rd:{name:"rd",base:v1.LENGTH,prefixes:o1.NONE,value:5.02921,offset:0},ch:{name:"ch",base:v1.LENGTH,prefixes:o1.NONE,value:20.1168,offset:0},mil:{name:"mil",base:v1.LENGTH,prefixes:o1.NONE,value:254e-7,offset:0},m2:{name:"m2",base:v1.SURFACE,prefixes:o1.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:v1.SURFACE,prefixes:o1.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:v1.SURFACE,prefixes:o1.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:v1.SURFACE,prefixes:o1.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:v1.SURFACE,prefixes:o1.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:v1.SURFACE,prefixes:o1.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:v1.SURFACE,prefixes:o1.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:v1.SURFACE,prefixes:o1.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:v1.SURFACE,prefixes:o1.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:v1.SURFACE,prefixes:o1.NONE,value:1e4,offset:0},m3:{name:"m3",base:v1.VOLUME,prefixes:o1.CUBIC,value:1,offset:0},L:{name:"L",base:v1.VOLUME,prefixes:o1.SHORT,value:.001,offset:0},l:{name:"l",base:v1.VOLUME,prefixes:o1.SHORT,value:.001,offset:0},litre:{name:"litre",base:v1.VOLUME,prefixes:o1.LONG,value:.001,offset:0},cuin:{name:"cuin",base:v1.VOLUME,prefixes:o1.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:v1.VOLUME,prefixes:o1.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:v1.VOLUME,prefixes:o1.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:v1.VOLUME,prefixes:o1.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:v1.VOLUME,prefixes:o1.NONE,value:15e-6,offset:0},drop:{name:"drop",base:v1.VOLUME,prefixes:o1.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:v1.VOLUME,prefixes:o1.NONE,value:5e-8,offset:0},minim:{name:"minim",base:v1.VOLUME,prefixes:o1.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:v1.VOLUME,prefixes:o1.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:v1.VOLUME,prefixes:o1.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:v1.VOLUME,prefixes:o1.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:v1.VOLUME,prefixes:o1.NONE,value:1e-6,offset:0},cup:{name:"cup",base:v1.VOLUME,prefixes:o1.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:v1.VOLUME,prefixes:o1.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:v1.VOLUME,prefixes:o1.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:v1.VOLUME,prefixes:o1.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:v1.VOLUME,prefixes:o1.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:v1.VOLUME,prefixes:o1.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:v1.VOLUME,prefixes:o1.NONE,value:.238480942392,offset:0},g:{name:"g",base:v1.MASS,prefixes:o1.SHORT,value:.001,offset:0},gram:{name:"gram",base:v1.MASS,prefixes:o1.LONG,value:.001,offset:0},ton:{name:"ton",base:v1.MASS,prefixes:o1.SHORT,value:907.18474,offset:0},t:{name:"t",base:v1.MASS,prefixes:o1.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:v1.MASS,prefixes:o1.LONG,value:1e3,offset:0},grain:{name:"grain",base:v1.MASS,prefixes:o1.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:v1.MASS,prefixes:o1.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:v1.MASS,prefixes:o1.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:v1.MASS,prefixes:o1.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:v1.MASS,prefixes:o1.NONE,value:45.359237,offset:0},stick:{name:"stick",base:v1.MASS,prefixes:o1.NONE,value:.115,offset:0},stone:{name:"stone",base:v1.MASS,prefixes:o1.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:v1.MASS,prefixes:o1.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:v1.MASS,prefixes:o1.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:v1.MASS,prefixes:o1.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:v1.MASS,prefixes:o1.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:v1.MASS,prefixes:o1.NONE,value:45.359237,offset:0},s:{name:"s",base:v1.TIME,prefixes:o1.SHORT,value:1,offset:0},min:{name:"min",base:v1.TIME,prefixes:o1.NONE,value:60,offset:0},h:{name:"h",base:v1.TIME,prefixes:o1.NONE,value:3600,offset:0},second:{name:"second",base:v1.TIME,prefixes:o1.LONG,value:1,offset:0},sec:{name:"sec",base:v1.TIME,prefixes:o1.LONG,value:1,offset:0},minute:{name:"minute",base:v1.TIME,prefixes:o1.NONE,value:60,offset:0},hour:{name:"hour",base:v1.TIME,prefixes:o1.NONE,value:3600,offset:0},day:{name:"day",base:v1.TIME,prefixes:o1.NONE,value:86400,offset:0},week:{name:"week",base:v1.TIME,prefixes:o1.NONE,value:7*86400,offset:0},month:{name:"month",base:v1.TIME,prefixes:o1.NONE,value:2629800,offset:0},year:{name:"year",base:v1.TIME,prefixes:o1.NONE,value:31557600,offset:0},decade:{name:"decade",base:v1.TIME,prefixes:o1.NONE,value:315576e3,offset:0},century:{name:"century",base:v1.TIME,prefixes:o1.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:v1.TIME,prefixes:o1.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:v1.FREQUENCY,prefixes:o1.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:v1.FREQUENCY,prefixes:o1.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:v1.ANGLE,prefixes:o1.SHORT,value:1,offset:0},radian:{name:"radian",base:v1.ANGLE,prefixes:o1.LONG,value:1,offset:0},deg:{name:"deg",base:v1.ANGLE,prefixes:o1.SHORT,value:null,offset:0},degree:{name:"degree",base:v1.ANGLE,prefixes:o1.LONG,value:null,offset:0},grad:{name:"grad",base:v1.ANGLE,prefixes:o1.SHORT,value:null,offset:0},gradian:{name:"gradian",base:v1.ANGLE,prefixes:o1.LONG,value:null,offset:0},cycle:{name:"cycle",base:v1.ANGLE,prefixes:o1.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:v1.ANGLE,prefixes:o1.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:v1.ANGLE,prefixes:o1.NONE,value:null,offset:0},A:{name:"A",base:v1.CURRENT,prefixes:o1.SHORT,value:1,offset:0},ampere:{name:"ampere",base:v1.CURRENT,prefixes:o1.LONG,value:1,offset:0},K:{name:"K",base:v1.TEMPERATURE,prefixes:o1.SHORT,value:1,offset:0},degC:{name:"degC",base:v1.TEMPERATURE,prefixes:o1.SHORT,value:1,offset:273.15},degF:{name:"degF",base:v1.TEMPERATURE,prefixes:o1.SHORT,value:new js(5,9),offset:459.67},degR:{name:"degR",base:v1.TEMPERATURE,prefixes:o1.SHORT,value:new js(5,9),offset:0},kelvin:{name:"kelvin",base:v1.TEMPERATURE,prefixes:o1.LONG,value:1,offset:0},celsius:{name:"celsius",base:v1.TEMPERATURE,prefixes:o1.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:v1.TEMPERATURE,prefixes:o1.LONG,value:new js(5,9),offset:459.67},rankine:{name:"rankine",base:v1.TEMPERATURE,prefixes:o1.LONG,value:new js(5,9),offset:0},mol:{name:"mol",base:v1.AMOUNT_OF_SUBSTANCE,prefixes:o1.SHORT,value:1,offset:0},mole:{name:"mole",base:v1.AMOUNT_OF_SUBSTANCE,prefixes:o1.LONG,value:1,offset:0},cd:{name:"cd",base:v1.LUMINOUS_INTENSITY,prefixes:o1.SHORT,value:1,offset:0},candela:{name:"candela",base:v1.LUMINOUS_INTENSITY,prefixes:o1.LONG,value:1,offset:0},N:{name:"N",base:v1.FORCE,prefixes:o1.SHORT,value:1,offset:0},newton:{name:"newton",base:v1.FORCE,prefixes:o1.LONG,value:1,offset:0},dyn:{name:"dyn",base:v1.FORCE,prefixes:o1.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:v1.FORCE,prefixes:o1.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:v1.FORCE,prefixes:o1.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:v1.FORCE,prefixes:o1.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:v1.FORCE,prefixes:o1.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:v1.FORCE,prefixes:o1.NONE,value:9.80665,offset:0},J:{name:"J",base:v1.ENERGY,prefixes:o1.SHORT,value:1,offset:0},joule:{name:"joule",base:v1.ENERGY,prefixes:o1.LONG,value:1,offset:0},erg:{name:"erg",base:v1.ENERGY,prefixes:o1.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:v1.ENERGY,prefixes:o1.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:v1.ENERGY,prefixes:o1.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:v1.ENERGY,prefixes:o1.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:v1.ENERGY,prefixes:o1.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:v1.POWER,prefixes:o1.SHORT,value:1,offset:0},watt:{name:"watt",base:v1.POWER,prefixes:o1.LONG,value:1,offset:0},hp:{name:"hp",base:v1.POWER,prefixes:o1.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:v1.POWER,prefixes:o1.SHORT,value:qs.I,offset:0},VA:{name:"VA",base:v1.POWER,prefixes:o1.SHORT,value:1,offset:0},Pa:{name:"Pa",base:v1.PRESSURE,prefixes:o1.SHORT,value:1,offset:0},psi:{name:"psi",base:v1.PRESSURE,prefixes:o1.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:v1.PRESSURE,prefixes:o1.NONE,value:101325,offset:0},bar:{name:"bar",base:v1.PRESSURE,prefixes:o1.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:v1.PRESSURE,prefixes:o1.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:v1.PRESSURE,prefixes:o1.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:v1.PRESSURE,prefixes:o1.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:v1.PRESSURE,prefixes:o1.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:v1.ELECTRIC_CHARGE,prefixes:o1.LONG,value:1,offset:0},C:{name:"C",base:v1.ELECTRIC_CHARGE,prefixes:o1.SHORT,value:1,offset:0},farad:{name:"farad",base:v1.ELECTRIC_CAPACITANCE,prefixes:o1.LONG,value:1,offset:0},F:{name:"F",base:v1.ELECTRIC_CAPACITANCE,prefixes:o1.SHORT,value:1,offset:0},volt:{name:"volt",base:v1.ELECTRIC_POTENTIAL,prefixes:o1.LONG,value:1,offset:0},V:{name:"V",base:v1.ELECTRIC_POTENTIAL,prefixes:o1.SHORT,value:1,offset:0},ohm:{name:"ohm",base:v1.ELECTRIC_RESISTANCE,prefixes:o1.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:v1.ELECTRIC_INDUCTANCE,prefixes:o1.LONG,value:1,offset:0},H:{name:"H",base:v1.ELECTRIC_INDUCTANCE,prefixes:o1.SHORT,value:1,offset:0},siemens:{name:"siemens",base:v1.ELECTRIC_CONDUCTANCE,prefixes:o1.LONG,value:1,offset:0},S:{name:"S",base:v1.ELECTRIC_CONDUCTANCE,prefixes:o1.SHORT,value:1,offset:0},weber:{name:"weber",base:v1.MAGNETIC_FLUX,prefixes:o1.LONG,value:1,offset:0},Wb:{name:"Wb",base:v1.MAGNETIC_FLUX,prefixes:o1.SHORT,value:1,offset:0},tesla:{name:"tesla",base:v1.MAGNETIC_FLUX_DENSITY,prefixes:o1.LONG,value:1,offset:0},T:{name:"T",base:v1.MAGNETIC_FLUX_DENSITY,prefixes:o1.SHORT,value:1,offset:0},b:{name:"b",base:v1.BIT,prefixes:o1.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:v1.BIT,prefixes:o1.BINARY_LONG,value:1,offset:0},B:{name:"B",base:v1.BIT,prefixes:o1.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:v1.BIT,prefixes:o1.BINARY_LONG,value:8,offset:0}},M1={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function O1($1){if($1.number==="BigNumber"){var A1=createBigNumberPi(zo);x1.rad.value=new zo(1),x1.deg.value=A1.div(180),x1.grad.value=A1.div(200),x1.cycle.value=A1.times(2),x1.arcsec.value=A1.div(648e3),x1.arcmin.value=A1.div(10800)}else x1.rad.value=1,x1.deg.value=Math.PI/180,x1.grad.value=Math.PI/200,x1.cycle.value=Math.PI*2,x1.arcsec.value=Math.PI/648e3,x1.arcmin.value=Math.PI/10800;x1.radian.value=x1.rad.value,x1.degree.value=x1.deg.value,x1.gradian.value=x1.grad.value}O1(o),s&&s("config",function($1,A1){$1.number!==A1.number&&O1($1)});var N1={si:{NONE:{unit:w1,prefix:o1.NONE[""]},LENGTH:{unit:x1.m,prefix:o1.SHORT[""]},MASS:{unit:x1.g,prefix:o1.SHORT.k},TIME:{unit:x1.s,prefix:o1.SHORT[""]},CURRENT:{unit:x1.A,prefix:o1.SHORT[""]},TEMPERATURE:{unit:x1.K,prefix:o1.SHORT[""]},LUMINOUS_INTENSITY:{unit:x1.cd,prefix:o1.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:x1.mol,prefix:o1.SHORT[""]},ANGLE:{unit:x1.rad,prefix:o1.SHORT[""]},BIT:{unit:x1.bits,prefix:o1.SHORT[""]},FORCE:{unit:x1.N,prefix:o1.SHORT[""]},ENERGY:{unit:x1.J,prefix:o1.SHORT[""]},POWER:{unit:x1.W,prefix:o1.SHORT[""]},PRESSURE:{unit:x1.Pa,prefix:o1.SHORT[""]},ELECTRIC_CHARGE:{unit:x1.C,prefix:o1.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:x1.F,prefix:o1.SHORT[""]},ELECTRIC_POTENTIAL:{unit:x1.V,prefix:o1.SHORT[""]},ELECTRIC_RESISTANCE:{unit:x1.ohm,prefix:o1.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:x1.H,prefix:o1.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:x1.S,prefix:o1.SHORT[""]},MAGNETIC_FLUX:{unit:x1.Wb,prefix:o1.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:x1.T,prefix:o1.SHORT[""]},FREQUENCY:{unit:x1.Hz,prefix:o1.SHORT[""]}}};N1.cgs=JSON.parse(JSON.stringify(N1.si)),N1.cgs.LENGTH={unit:x1.m,prefix:o1.SHORT.c},N1.cgs.MASS={unit:x1.g,prefix:o1.SHORT[""]},N1.cgs.FORCE={unit:x1.dyn,prefix:o1.SHORT[""]},N1.cgs.ENERGY={unit:x1.erg,prefix:o1.NONE[""]},N1.us=JSON.parse(JSON.stringify(N1.si)),N1.us.LENGTH={unit:x1.ft,prefix:o1.NONE[""]},N1.us.MASS={unit:x1.lbm,prefix:o1.NONE[""]},N1.us.TEMPERATURE={unit:x1.degF,prefix:o1.NONE[""]},N1.us.FORCE={unit:x1.lbf,prefix:o1.NONE[""]},N1.us.ENERGY={unit:x1.BTU,prefix:o1.BTU[""]},N1.us.POWER={unit:x1.hp,prefix:o1.NONE[""]},N1.us.PRESSURE={unit:x1.psi,prefix:o1.NONE[""]},N1.auto=JSON.parse(JSON.stringify(N1.si));var L1=N1.auto;Bo.setUnitSystem=function($1){if(hasOwnProperty(N1,$1))L1=N1[$1];else throw new Error("Unit system "+$1+" does not exist. Choices are: "+Object.keys(N1).join(", "))},Bo.getUnitSystem=function(){for(var $1 in N1)if(hasOwnProperty(N1,$1)&&N1[$1]===L1)return $1},Bo.typeConverters={BigNumber:function(A1){return A1!=null&&A1.isFraction?new zo(String(A1.n)).div(String(A1.d)).times(String(A1.s)):new zo(A1+"")},Fraction:function(A1){return new js(A1)},Complex:function(A1){return A1},number:function(A1){return A1!=null&&A1.isFraction?Js(A1):A1}},Bo.prototype._numberConverter=function(){var $1=Bo.typeConverters[this.valueType()];if($1)return $1;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},Bo._getNumberConverter=function($1){if(!Bo.typeConverters[$1])throw new TypeError('Unsupported type "'+$1+'"');return Bo.typeConverters[$1]};for(var G1 in x1)if(hasOwnProperty(x1,G1)){var q1=x1[G1];q1.dimensions=q1.base.dimensions}for(var H1 in M1)if(hasOwnProperty(M1,H1)){var W1=x1[M1[H1]],j1={};for(var Q1 in W1)hasOwnProperty(W1,Q1)&&(j1[Q1]=W1[Q1]);j1.name=H1,x1[H1]=j1}Bo.isValidAlpha=function(A1){return/^[a-zA-Z]$/.test(A1)};function rv($1){for(var A1=0;A1<$1.length;A1++){if(e1=$1.charAt(A1),A1===0&&!Bo.isValidAlpha(e1))throw new Error('Invalid unit name (must begin with alpha character): "'+$1+'"');if(A1>0&&!(Bo.isValidAlpha(e1)||i1(e1)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+$1+'"')}}return Bo.createUnit=function($1,A1){if(typeof $1!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(A1&&A1.override){for(var y1 in $1)if(hasOwnProperty($1,y1)&&Bo.deleteUnit(y1),$1[y1].aliases)for(var _1=0;_1<$1[y1].aliases.length;_1++)Bo.deleteUnit($1[y1].aliases[_1])}var D1;for(var E1 in $1)hasOwnProperty($1,E1)&&(D1=Bo.createUnitSingle(E1,$1[E1]));return D1},Bo.createUnitSingle=function($1,A1){if((typeof A1>"u"||A1===null)&&(A1={}),typeof $1!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(hasOwnProperty(x1,$1))throw new Error('Cannot create unit "'+$1+'": a unit with that name already exists');rv($1);var y1=null,_1=[],D1=0,E1,P1,X1;if(A1&&A1.type==="Unit")y1=A1.clone();else if(typeof A1=="string")A1!==""&&(E1=A1);else if(typeof A1=="object")E1=A1.definition,P1=A1.prefixes,D1=A1.offset,X1=A1.baseName,A1.aliases&&(_1=A1.aliases.valueOf());else throw new TypeError('Cannot create unit "'+$1+'" from "'+A1.toString()+'": expecting "string" or "Unit" or "Object"');if(_1){for(var V1=0;V1<_1.length;V1++)if(hasOwnProperty(x1,_1[V1]))throw new Error('Cannot create alias "'+_1[V1]+'": a unit with that name already exists')}if(E1&&typeof E1=="string"&&!y1)try{y1=Bo.parse(E1,{allowNoUnits:!0})}catch(tv){throw tv.message='Could not create unit "'+$1+'" from "'+E1+'": '+tv.message,tv}else E1&&E1.type==="Unit"&&(y1=E1.clone());_1=_1||[],D1=D1||0,P1&&P1.toUpperCase?P1=o1[P1.toUpperCase()]||o1.NONE:P1=o1.NONE;var F1={};if(y1){F1={name:$1,value:y1.value,dimensions:y1.dimensions.slice(0),prefixes:P1,offset:D1};var ev=!1;for(var Z1 in v1)if(hasOwnProperty(v1,Z1)){for(var R1=!0,K1=0;K1<S1.length;K1++)if(Math.abs((F1.dimensions[K1]||0)-(v1[Z1].dimensions[K1]||0))>1e-12){R1=!1;break}if(R1){ev=!0,F1.base=v1[Z1];break}}if(!ev){X1=X1||$1+"_STUFF";var u1={dimensions:y1.dimensions.slice(0)};u1.key=X1,v1[X1]=u1,L1[X1]={unit:F1,prefix:o1.NONE[""]},F1.base=v1[X1]}}else{if(X1=X1||$1+"_STUFF",S1.indexOf(X1)>=0)throw new Error('Cannot create new base unit "'+$1+'": a base unit with that name already exists (and cannot be overridden)');S1.push(X1);for(var z1 in v1)hasOwnProperty(v1,z1)&&(v1[z1].dimensions[S1.length-1]=0);for(var J1={dimensions:[]},Y1=0;Y1<S1.length;Y1++)J1.dimensions[Y1]=0;J1.dimensions[S1.length-1]=1,J1.key=X1,v1[X1]=J1,F1={name:$1,value:1,dimensions:v1[X1].dimensions.slice(0),prefixes:P1,offset:D1,base:v1[X1]},L1[X1]={unit:F1,prefix:o1.NONE[""]}}Bo.UNITS[$1]=F1;for(var k1=0;k1<_1.length;k1++){var I1=_1[k1],U1={};for(var iv in F1)hasOwnProperty(F1,iv)&&(U1[iv]=F1[iv]);U1.name=I1,Bo.UNITS[I1]=U1}return delete f1.cache,new Bo(null,$1)},Bo.deleteUnit=function($1){delete Bo.UNITS[$1],delete f1.cache},Bo.PREFIXES=o1,Bo.BASE_DIMENSIONS=S1,Bo.BASE_UNITS=v1,Bo.UNIT_SYSTEMS=N1,Bo.UNITS=x1,Bo},{isClass:!0}),name$2q="unit",dependencies$2q=["typed","Unit"],createUnitFunction=factory(name$2q,dependencies$2q,a=>{var{typed:s,Unit:o}=a;return s(name$2q,{Unit:function(h){return h.clone()},string:function(h){return o.isValuelessUnit(h)?new o(null,h):o.parse(h,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(h,d){return new o(h,d)},"number | BigNumber | Fraction":function(h){return new o(h)},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$2p="sparse",dependencies$2p=["typed","SparseMatrix"],createSparse=factory(name$2p,dependencies$2p,a=>{var{typed:s,SparseMatrix:o}=a;return s(name$2p,{"":function(){return new o([])},string:function(h){return new o([],h)},"Array | Matrix":function(h){return new o(h)},"Array | Matrix, string":function(h,d){return new o(h,d)}})}),name$2o="createUnit",dependencies$2o=["typed","Unit"],createCreateUnit=factory(name$2o,dependencies$2o,a=>{var{typed:s,Unit:o}=a;return s(name$2o,{"Object, Object":function(h,d){return o.createUnit(h,d)},Object:function(h){return o.createUnit(h,{})},"string, Unit | string | Object, Object":function(h,d,b){var _={};return _[h]=d,o.createUnit(_,b)},"string, Unit | string | Object":function(h,d){var b={};return b[h]=d,o.createUnit(b,{})},string:function(h){var d={};return d[h]={},o.createUnit(d,{})}})}),name$2n="acos",dependencies$2n=["typed","config","Complex"],createAcos=factory(name$2n,dependencies$2n,a=>{var{typed:s,config:o,Complex:c}=a;return s(name$2n,{number:function(d){return d>=-1&&d<=1||o.predictable?Math.acos(d):new c(d,0).acos()},Complex:function(d){return d.acos()},BigNumber:function(d){return d.acos()}})}),name$2m="acosh",dependencies$2m=["typed","config","Complex"],createAcosh=factory(name$2m,dependencies$2m,a=>{var{typed:s,config:o,Complex:c}=a;return s(name$2m,{number:function(d){return d>=1||o.predictable?acoshNumber(d):d<=-1?new c(Math.log(Math.sqrt(d*d-1)-d),Math.PI):new c(d,0).acosh()},Complex:function(d){return d.acosh()},BigNumber:function(d){return d.acosh()}})}),name$2l="acot",dependencies$2l=["typed","BigNumber"],createAcot=factory(name$2l,dependencies$2l,a=>{var{typed:s,BigNumber:o}=a;return s(name$2l,{number:acotNumber,Complex:function(h){return h.acot()},BigNumber:function(h){return new o(1).div(h).atan()}})}),name$2k="acoth",dependencies$2k=["typed","config","Complex","BigNumber"],createAcoth=factory(name$2k,dependencies$2k,a=>{var{typed:s,config:o,Complex:c,BigNumber:h}=a;return s(name$2k,{number:function(b){return b>=1||b<=-1||o.predictable?acothNumber(b):new c(b,0).acoth()},Complex:function(b){return b.acoth()},BigNumber:function(b){return new h(1).div(b).atanh()}})}),name$2j="acsc",dependencies$2j=["typed","config","Complex","BigNumber"],createAcsc=factory(name$2j,dependencies$2j,a=>{var{typed:s,config:o,Complex:c,BigNumber:h}=a;return s(name$2j,{number:function(b){return b<=-1||b>=1||o.predictable?acscNumber(b):new c(b,0).acsc()},Complex:function(b){return b.acsc()},BigNumber:function(b){return new h(1).div(b).asin()}})}),name$2i="acsch",dependencies$2i=["typed","BigNumber"],createAcsch=factory(name$2i,dependencies$2i,a=>{var{typed:s,BigNumber:o}=a;return s(name$2i,{number:acschNumber,Complex:function(h){return h.acsch()},BigNumber:function(h){return new o(1).div(h).asinh()}})}),name$2h="asec",dependencies$2h=["typed","config","Complex","BigNumber"],createAsec=factory(name$2h,dependencies$2h,a=>{var{typed:s,config:o,Complex:c,BigNumber:h}=a;return s(name$2h,{number:function(b){return b<=-1||b>=1||o.predictable?asecNumber(b):new c(b,0).asec()},Complex:function(b){return b.asec()},BigNumber:function(b){return new h(1).div(b).acos()}})}),name$2g="asech",dependencies$2g=["typed","config","Complex","BigNumber"],createAsech=factory(name$2g,dependencies$2g,a=>{var{typed:s,config:o,Complex:c,BigNumber:h}=a;return s(name$2g,{number:function(b){if(b<=1&&b>=-1||o.predictable){var _=1/b;if(_>0||o.predictable)return asechNumber(b);var $=Math.sqrt(_*_-1);return new c(Math.log($-_),Math.PI)}return new c(b,0).asech()},Complex:function(b){return b.asech()},BigNumber:function(b){return new h(1).div(b).acosh()}})}),name$2f="asin",dependencies$2f=["typed","config","Complex"],createAsin=factory(name$2f,dependencies$2f,a=>{var{typed:s,config:o,Complex:c}=a;return s(name$2f,{number:function(d){return d>=-1&&d<=1||o.predictable?Math.asin(d):new c(d,0).asin()},Complex:function(d){return d.asin()},BigNumber:function(d){return d.asin()}})}),name$2e="asinh",dependencies$2e=["typed"],createAsinh=factory(name$2e,dependencies$2e,a=>{var{typed:s}=a;return s("asinh",{number:asinhNumber,Complex:function(c){return c.asinh()},BigNumber:function(c){return c.asinh()}})}),name$2d="atan",dependencies$2d=["typed"],createAtan=factory(name$2d,dependencies$2d,a=>{var{typed:s}=a;return s("atan",{number:function(c){return Math.atan(c)},Complex:function(c){return c.atan()},BigNumber:function(c){return c.atan()}})}),name$2c="atan2",dependencies$2c=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],createAtan2=factory(name$2c,dependencies$2c,a=>{var{typed:s,matrix:o,equalScalar:c,BigNumber:h,DenseMatrix:d,concat:b}=a,_=createMatAlgo02xDS0({typed:s,equalScalar:c}),$=createMatAlgo03xDSf({typed:s}),j=createMatAlgo09xS0Sf({typed:s,equalScalar:c}),Xt=createMatAlgo11xS0s({typed:s,equalScalar:c}),Lt=createMatAlgo12xSfs({typed:s,DenseMatrix:d}),fr=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:b});return s(name$2c,{"number, number":Math.atan2,"BigNumber, BigNumber":(Jr,Js)=>h.atan2(Jr,Js)},fr({scalar:"number | BigNumber",SS:j,DS:$,SD:_,Ss:Xt,sS:Lt}))}),name$2b="atanh",dependencies$2b=["typed","config","Complex"],createAtanh=factory(name$2b,dependencies$2b,a=>{var{typed:s,config:o,Complex:c}=a;return s(name$2b,{number:function(d){return d<=1&&d>=-1||o.predictable?atanhNumber(d):new c(d,0).atanh()},Complex:function(d){return d.atanh()},BigNumber:function(d){return d.atanh()}})}),createTrigUnit=factory("trigUnit",["typed"],a=>{var{typed:s}=a;return{Unit:s.referToSelf(o=>c=>{if(!c.hasBase(c.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return s.find(o,c.valueType())(c.value)})}}),name$2a="cos",dependencies$2a=["typed"],createCos=factory(name$2a,dependencies$2a,a=>{var{typed:s}=a,o=createTrigUnit({typed:s});return s(name$2a,{number:Math.cos,"Complex | BigNumber":c=>c.cos()},o)}),name$29="cosh",dependencies$29=["typed"],createCosh=factory(name$29,dependencies$29,a=>{var{typed:s}=a;return s(name$29,{number:cosh$3,"Complex | BigNumber":o=>o.cosh()})}),name$28="cot",dependencies$28=["typed","BigNumber"],createCot=factory(name$28,dependencies$28,a=>{var{typed:s,BigNumber:o}=a,c=createTrigUnit({typed:s});return s(name$28,{number:cotNumber,Complex:h=>h.cot(),BigNumber:h=>new o(1).div(h.tan())},c)}),name$27="coth",dependencies$27=["typed","BigNumber"],createCoth=factory(name$27,dependencies$27,a=>{var{typed:s,BigNumber:o}=a;return s(name$27,{number:cothNumber,Complex:c=>c.coth(),BigNumber:c=>new o(1).div(c.tanh())})}),name$26="csc",dependencies$26=["typed","BigNumber"],createCsc=factory(name$26,dependencies$26,a=>{var{typed:s,BigNumber:o}=a,c=createTrigUnit({typed:s});return s(name$26,{number:cscNumber,Complex:h=>h.csc(),BigNumber:h=>new o(1).div(h.sin())},c)}),name$25="csch",dependencies$25=["typed","BigNumber"],createCsch=factory(name$25,dependencies$25,a=>{var{typed:s,BigNumber:o}=a;return s(name$25,{number:cschNumber,Complex:c=>c.csch(),BigNumber:c=>new o(1).div(c.sinh())})}),name$24="sec",dependencies$24=["typed","BigNumber"],createSec=factory(name$24,dependencies$24,a=>{var{typed:s,BigNumber:o}=a,c=createTrigUnit({typed:s});return s(name$24,{number:secNumber,Complex:h=>h.sec(),BigNumber:h=>new o(1).div(h.cos())},c)}),name$23="sech",dependencies$23=["typed","BigNumber"],createSech=factory(name$23,dependencies$23,a=>{var{typed:s,BigNumber:o}=a;return s(name$23,{number:sechNumber,Complex:c=>c.sech(),BigNumber:c=>new o(1).div(c.cosh())})}),name$22="sin",dependencies$22=["typed"],createSin=factory(name$22,dependencies$22,a=>{var{typed:s}=a,o=createTrigUnit({typed:s});return s(name$22,{number:Math.sin,"Complex | BigNumber":c=>c.sin()},o)}),name$21="sinh",dependencies$21=["typed"],createSinh=factory(name$21,dependencies$21,a=>{var{typed:s}=a;return s(name$21,{number:sinhNumber,"Complex | BigNumber":o=>o.sinh()})}),name$20="tan",dependencies$20=["typed"],createTan=factory(name$20,dependencies$20,a=>{var{typed:s}=a,o=createTrigUnit({typed:s});return s(name$20,{number:Math.tan,"Complex | BigNumber":c=>c.tan()},o)}),name$1$="tanh",dependencies$1$=["typed"],createTanh=factory(name$1$,dependencies$1$,a=>{var{typed:s}=a;return s("tanh",{number:tanh$2,"Complex | BigNumber":o=>o.tanh()})}),name$1_="setCartesian",dependencies$1_=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetCartesian=factory(name$1_,dependencies$1_,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d,DenseMatrix:b}=a;return s(name$1_,{"Array | Matrix, Array | Matrix":function($,j){var Xt=[];if(c(o($),new d(0))!==0&&c(o(j),new d(0))!==0){var Lt=flatten$1(Array.isArray($)?$:$.toArray()).sort(h),fr=flatten$1(Array.isArray(j)?j:j.toArray()).sort(h);Xt=[];for(var Jr=0;Jr<Lt.length;Jr++)for(var Js=0;Js<fr.length;Js++)Xt.push([Lt[Jr],fr[Js]])}return Array.isArray($)&&Array.isArray(j)?Xt:new b(Xt)}})}),name$1Z="setDifference",dependencies$1Z=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetDifference=factory(name$1Z,dependencies$1Z,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d,DenseMatrix:b}=a;return s(name$1Z,{"Array | Matrix, Array | Matrix":function($,j){var Xt;if(c(o($),new d(0))===0)Xt=[];else{if(c(o(j),new d(0))===0)return flatten$1($.toArray());var Lt=identify(flatten$1(Array.isArray($)?$:$.toArray()).sort(h)),fr=identify(flatten$1(Array.isArray(j)?j:j.toArray()).sort(h));Xt=[];for(var Jr,Js=0;Js<Lt.length;Js++){Jr=!1;for(var qs=0;qs<fr.length;qs++)if(h(Lt[Js].value,fr[qs].value)===0&&Lt[Js].identifier===fr[qs].identifier){Jr=!0;break}Jr||Xt.push(Lt[Js])}}return Array.isArray($)&&Array.isArray(j)?generalize(Xt):new b(generalize(Xt))}})}),name$1Y="setDistinct",dependencies$1Y=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetDistinct=factory(name$1Y,dependencies$1Y,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d,DenseMatrix:b}=a;return s(name$1Y,{"Array | Matrix":function($){var j;if(c(o($),new d(0))===0)j=[];else{var Xt=flatten$1(Array.isArray($)?$:$.toArray()).sort(h);j=[],j.push(Xt[0]);for(var Lt=1;Lt<Xt.length;Lt++)h(Xt[Lt],Xt[Lt-1])!==0&&j.push(Xt[Lt])}return Array.isArray($)?j:new b(j)}})}),name$1X="setIntersect",dependencies$1X=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetIntersect=factory(name$1X,dependencies$1X,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d,DenseMatrix:b}=a;return s(name$1X,{"Array | Matrix, Array | Matrix":function($,j){var Xt;if(c(o($),new d(0))===0||c(o(j),new d(0))===0)Xt=[];else{var Lt=identify(flatten$1(Array.isArray($)?$:$.toArray()).sort(h)),fr=identify(flatten$1(Array.isArray(j)?j:j.toArray()).sort(h));Xt=[];for(var Jr=0;Jr<Lt.length;Jr++)for(var Js=0;Js<fr.length;Js++)if(h(Lt[Jr].value,fr[Js].value)===0&&Lt[Jr].identifier===fr[Js].identifier){Xt.push(Lt[Jr]);break}}return Array.isArray($)&&Array.isArray(j)?generalize(Xt):new b(generalize(Xt))}})}),name$1W="setIsSubset",dependencies$1W=["typed","size","subset","compareNatural","Index"],createSetIsSubset=factory(name$1W,dependencies$1W,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d}=a;return s(name$1W,{"Array | Matrix, Array | Matrix":function(_,$){if(c(o(_),new d(0))===0)return!0;if(c(o($),new d(0))===0)return!1;for(var j=identify(flatten$1(Array.isArray(_)?_:_.toArray()).sort(h)),Xt=identify(flatten$1(Array.isArray($)?$:$.toArray()).sort(h)),Lt,fr=0;fr<j.length;fr++){Lt=!1;for(var Jr=0;Jr<Xt.length;Jr++)if(h(j[fr].value,Xt[Jr].value)===0&&j[fr].identifier===Xt[Jr].identifier){Lt=!0;break}if(Lt===!1)return!1}return!0}})}),name$1V="setMultiplicity",dependencies$1V=["typed","size","subset","compareNatural","Index"],createSetMultiplicity=factory(name$1V,dependencies$1V,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d}=a;return s(name$1V,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(_,$){if(c(o($),new d(0))===0)return 0;for(var j=flatten$1(Array.isArray($)?$:$.toArray()),Xt=0,Lt=0;Lt<j.length;Lt++)h(j[Lt],_)===0&&Xt++;return Xt}})}),name$1U="setPowerset",dependencies$1U=["typed","size","subset","compareNatural","Index"],createSetPowerset=factory(name$1U,dependencies$1U,a=>{var{typed:s,size:o,subset:c,compareNatural:h,Index:d}=a;return s(name$1U,{"Array | Matrix":function(j){if(c(o(j),new d(0))===0)return[];for(var Xt=flatten$1(Array.isArray(j)?j:j.toArray()).sort(h),Lt=[],fr=0;fr.toString(2).length<=Xt.length;)Lt.push(b(Xt,fr.toString(2).split("").reverse())),fr++;return _(Lt)}});function b($,j){for(var Xt=[],Lt=0;Lt<j.length;Lt++)j[Lt]==="1"&&Xt.push($[Lt]);return Xt}function _($){for(var j=[],Xt=$.length-1;Xt>0;Xt--)for(var Lt=0;Lt<Xt;Lt++)$[Lt].length>$[Lt+1].length&&(j=$[Lt],$[Lt]=$[Lt+1],$[Lt+1]=j);return $}}),name$1T="setSize",dependencies$1T=["typed","compareNatural"],createSetSize=factory(name$1T,dependencies$1T,a=>{var{typed:s,compareNatural:o}=a;return s(name$1T,{"Array | Matrix":function(h){return Array.isArray(h)?flatten$1(h).length:flatten$1(h.toArray()).length},"Array | Matrix, boolean":function(h,d){if(d===!1||h.length===0)return Array.isArray(h)?flatten$1(h).length:flatten$1(h.toArray()).length;for(var b=flatten$1(Array.isArray(h)?h:h.toArray()).sort(o),_=1,$=1;$<b.length;$++)o(b[$],b[$-1])!==0&&_++;return _}})}),name$1S="setSymDifference",dependencies$1S=["typed","size","concat","subset","setDifference","Index"],createSetSymDifference=factory(name$1S,dependencies$1S,a=>{var{typed:s,size:o,concat:c,subset:h,setDifference:d,Index:b}=a;return s(name$1S,{"Array | Matrix, Array | Matrix":function($,j){if(h(o($),new b(0))===0)return flatten$1(j);if(h(o(j),new b(0))===0)return flatten$1($);var Xt=flatten$1($),Lt=flatten$1(j);return c(d(Xt,Lt),d(Lt,Xt))}})}),name$1R="setUnion",dependencies$1R=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],createSetUnion=factory(name$1R,dependencies$1R,a=>{var{typed:s,size:o,concat:c,subset:h,setIntersect:d,setSymDifference:b,Index:_}=a;return s(name$1R,{"Array | Matrix, Array | Matrix":function(j,Xt){if(h(o(j),new _(0))===0)return flatten$1(Xt);if(h(o(Xt),new _(0))===0)return flatten$1(j);var Lt=flatten$1(j),fr=flatten$1(Xt);return c(b(Lt,fr),d(Lt,fr))}})}),name$1Q="add",dependencies$1Q=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],createAdd=factory(name$1Q,dependencies$1Q,a=>{var{typed:s,matrix:o,addScalar:c,equalScalar:h,DenseMatrix:d,SparseMatrix:b,concat:_}=a,$=createMatAlgo01xDSid({typed:s}),j=createMatAlgo04xSidSid({typed:s,equalScalar:h}),Xt=createMatAlgo10xSids({typed:s,DenseMatrix:d}),Lt=createMatrixAlgorithmSuite({typed:s,matrix:o,concat:_});return s(name$1Q,{"any, any":c,"any, any, ...any":s.referToSelf(fr=>(Jr,Js,qs)=>{for(var zo=fr(Jr,Js),js=0;js<qs.length;js++)zo=fr(zo,qs[js]);return zo})},Lt({elop:c,DS:$,SS:j,Ss:Xt}))}),name$1P="hypot",dependencies$1P=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],createHypot=factory(name$1P,dependencies$1P,a=>{var{typed:s,abs:o,addScalar:c,divideScalar:h,multiplyScalar:d,sqrt:b,smaller:_,isPositive:$}=a;return s(name$1P,{"... number | BigNumber":j,Array:j,Matrix:Xt=>j(flatten$1(Xt.toArray(),!0))});function j(Xt){for(var Lt=0,fr=0,Jr=0;Jr<Xt.length;Jr++){if(isComplex(Xt[Jr]))throw new TypeError("Unexpected type of argument to hypot");var Js=o(Xt[Jr]);_(fr,Js)?(Lt=d(Lt,d(h(fr,Js),h(fr,Js))),Lt=c(Lt,1),fr=Js):Lt=c(Lt,$(Js)?d(h(Js,fr),h(Js,fr)):Js)}return d(fr,b(Lt))}}),name$1O="norm",dependencies$1O=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],createNorm=factory(name$1O,dependencies$1O,a=>{var{typed:s,abs:o,add:c,pow:h,conj:d,sqrt:b,multiply:_,equalScalar:$,larger:j,smaller:Xt,matrix:Lt,ctranspose:fr,eigs:Jr}=a;return s(name$1O,{number:Math.abs,Complex:function(e1){return e1.abs()},BigNumber:function(e1){return e1.abs()},boolean:function(e1){return Math.abs(e1)},Array:function(e1){return vu(Lt(e1),2)},Matrix:function(e1){return vu(e1,2)},"Array, number | BigNumber | string":function(e1,r1){return vu(Lt(e1),r1)},"Matrix, number | BigNumber | string":function(e1,r1){return vu(e1,r1)}});function Js(t1){var e1=0;return t1.forEach(function(r1){var a1=o(r1);j(a1,e1)&&(e1=a1)},!0),e1}function qs(t1){var e1;return t1.forEach(function(r1){var a1=o(r1);(!e1||Xt(a1,e1))&&(e1=a1)},!0),e1||0}function zo(t1,e1){if(e1===Number.POSITIVE_INFINITY||e1==="inf")return Js(t1);if(e1===Number.NEGATIVE_INFINITY||e1==="-inf")return qs(t1);if(e1==="fro")return vu(t1,2);if(typeof e1=="number"&&!isNaN(e1)){if(!$(e1,0)){var r1=0;return t1.forEach(function(a1){r1=c(h(o(a1),e1),r1)},!0),h(r1,1/e1)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function js(t1){var e1=0;return t1.forEach(function(r1,a1){e1=c(e1,_(r1,d(r1)))}),o(b(e1))}function eu(t1){var e1=[],r1=0;return t1.forEach(function(a1,i1){var s1=i1[1],c1=c(e1[s1]||0,o(a1));j(c1,r1)&&(r1=c1),e1[s1]=c1},!0),r1}function Oo(t1){var e1=t1.size();if(e1[0]!==e1[1])throw new RangeError("Invalid matrix dimensions");var r1=fr(t1),a1=_(r1,t1),i1=Jr(a1).values.toArray(),s1=i1[i1.length-1];return o(b(s1))}function tu(t1){var e1=[],r1=0;return t1.forEach(function(a1,i1){var s1=i1[0],c1=c(e1[s1]||0,o(a1));j(c1,r1)&&(r1=c1),e1[s1]=c1},!0),r1}function Bo(t1,e1){if(e1===1)return eu(t1);if(e1===Number.POSITIVE_INFINITY||e1==="inf")return tu(t1);if(e1==="fro")return js(t1);if(e1===2)return Oo(t1);throw new Error("Unsupported parameter value "+e1)}function vu(t1,e1){var r1=t1.size();if(r1.length===1)return zo(t1,e1);if(r1.length===2){if(r1[0]&&r1[1])return Bo(t1,e1);throw new RangeError("Invalid matrix dimensions")}}}),name$1N="dot",dependencies$1N=["typed","addScalar","multiplyScalar","conj","size"],createDot=factory(name$1N,dependencies$1N,a=>{var{typed:s,addScalar:o,multiplyScalar:c,conj:h,size:d}=a;return s(name$1N,{"Array | DenseMatrix, Array | DenseMatrix":_,"SparseMatrix, SparseMatrix":$});function b(j,Xt){var Lt=d(j),fr=d(Xt),Jr,Js;if(Lt.length===1)Jr=Lt[0];else if(Lt.length===2&&Lt[1]===1)Jr=Lt[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+Lt.join(", ")+")");if(fr.length===1)Js=fr[0];else if(fr.length===2&&fr[1]===1)Js=fr[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+fr.join(", ")+")");if(Jr!==Js)throw new RangeError("Vectors must have equal length ("+Jr+" != "+Js+")");if(Jr===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return Jr}function _(j,Xt){var Lt=b(j,Xt),fr=isMatrix(j)?j._data:j,Jr=isMatrix(j)?j._datatype||j.getDataType():void 0,Js=isMatrix(Xt)?Xt._data:Xt,qs=isMatrix(Xt)?Xt._datatype||Xt.getDataType():void 0,zo=d(j).length===2,js=d(Xt).length===2,eu=o,Oo=c;if(Jr&&qs&&Jr===qs&&typeof Jr=="string"&&Jr!=="mixed"){var tu=Jr;eu=s.find(o,[tu,tu]),Oo=s.find(c,[tu,tu])}if(!zo&&!js){for(var Bo=Oo(h(fr[0]),Js[0]),vu=1;vu<Lt;vu++)Bo=eu(Bo,Oo(h(fr[vu]),Js[vu]));return Bo}if(!zo&&js){for(var t1=Oo(h(fr[0]),Js[0][0]),e1=1;e1<Lt;e1++)t1=eu(t1,Oo(h(fr[e1]),Js[e1][0]));return t1}if(zo&&!js){for(var r1=Oo(h(fr[0][0]),Js[0]),a1=1;a1<Lt;a1++)r1=eu(r1,Oo(h(fr[a1][0]),Js[a1]));return r1}if(zo&&js){for(var i1=Oo(h(fr[0][0]),Js[0][0]),s1=1;s1<Lt;s1++)i1=eu(i1,Oo(h(fr[s1][0]),Js[s1][0]));return i1}}function $(j,Xt){b(j,Xt);for(var Lt=j._index,fr=j._values,Jr=Xt._index,Js=Xt._values,qs=0,zo=o,js=c,eu=0,Oo=0;eu<Lt.length&&Oo<Jr.length;){var tu=Lt[eu],Bo=Jr[Oo];if(tu<Bo){eu++;continue}if(tu>Bo){Oo++;continue}tu===Bo&&(qs=zo(qs,js(fr[eu],Js[Oo])),eu++,Oo++)}return qs}}),name$1M="trace",dependencies$1M=["typed","matrix","add"],createTrace=factory(name$1M,dependencies$1M,a=>{var{typed:s,matrix:o,add:c}=a;return s("trace",{Array:function(_){return h(o(_))},SparseMatrix:d,DenseMatrix:h,any:clone$3});function h(b){var _=b._size,$=b._data;switch(_.length){case 1:if(_[0]===1)return clone$3($[0]);throw new RangeError("Matrix must be square (size: "+format$1(_)+")");case 2:{var j=_[0],Xt=_[1];if(j===Xt){for(var Lt=0,fr=0;fr<j;fr++)Lt=c(Lt,$[fr][fr]);return Lt}else throw new RangeError("Matrix must be square (size: "+format$1(_)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(_)+")")}}function d(b){var _=b._values,$=b._index,j=b._ptr,Xt=b._size,Lt=Xt[0],fr=Xt[1];if(Lt===fr){var Jr=0;if(_.length>0)for(var Js=0;Js<fr;Js++)for(var qs=j[Js],zo=j[Js+1],js=qs;js<zo;js++){var eu=$[js];if(eu===Js){Jr=c(Jr,_[js]);break}if(eu>Js)break}return Jr}throw new RangeError("Matrix must be square (size: "+format$1(Xt)+")")}}),name$1L="index",dependencies$1L=["typed","Index"],createIndex=factory(name$1L,dependencies$1L,a=>{var{typed:s,Index:o}=a;return s(name$1L,{"...number | string | BigNumber | Range | Array | Matrix":function(h){var d=h.map(function(_){return isBigNumber(_)?_.toNumber():isArray(_)||isMatrix(_)?_.map(function($){return isBigNumber($)?$.toNumber():$}):_}),b=new o;return o.apply(b,d),b}})}),keywords=new Set(["end"]),name$1K="Node",dependencies$1K=["mathWithTransform"],createNode=factory(name$1K,dependencies$1K,a=>{var{mathWithTransform:s}=a;function o(h){for(var d of[...keywords])if(h.has(d))throw new Error('Scope contains an illegal symbol, "'+d+'" is a reserved keyword')}class c{get type(){return"Node"}get isNode(){return!0}evaluate(d){return this.compile().evaluate(d)}compile(){var d=this._compile(s,{}),b={},_=null;function $(j){var Xt=createMap$1(j);return o(Xt),d(Xt,b,_)}return{evaluate:$}}_compile(d,b){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(d){throw new Error("Cannot run forEach on a Node interface")}map(d){throw new Error("Cannot run map on a Node interface")}_ifNode(d){if(!isNode(d))throw new TypeError("Callback function must return a Node");return d}traverse(d){d(this,null,null);function b(_,$){_.forEach(function(j,Xt,Lt){$(j,Xt,Lt),b(j,$)})}b(this,d)}transform(d){function b(_,$,j){var Xt=d(_,$,j);return Xt!==_?Xt:_.map(b)}return b(this,null,null)}filter(d){var b=[];return this.traverse(function(_,$,j){d(_,$,j)&&b.push(_)}),b}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(d){return d.cloneDeep()})}equals(d){return d?this.type===d.type&&deepStrictEqual(this,d):!1}toString(d){var b=this._getCustomString(d);return typeof b<"u"?b:this._toString(d)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(d){var b=this._getCustomString(d);return typeof b<"u"?b:this._toHTML(d)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(d){var b=this._getCustomString(d);return typeof b<"u"?b:this._toTex(d)}_toTex(d){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(d){if(d&&typeof d=="object")switch(typeof d.handler){case"object":case"undefined":return;case"function":return d.handler(this,d);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return c},{isClass:!0,isNode:!0});function errorTransform(a){return a&&a.isIndexError?new IndexError(a.index+1,a.min+1,a.max!==void 0?a.max+1:void 0):a}function accessFactory(a){var{subset:s}=a;return function(c,h){try{if(Array.isArray(c))return s(c,h);if(c&&typeof c.subset=="function")return c.subset(h);if(typeof c=="string")return s(c,h);if(typeof c=="object"){if(!h.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return getSafeProperty(c,h.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(d){throw errorTransform(d)}}}var name$1J="AccessorNode",dependencies$1J=["subset","Node"],createAccessorNode=factory(name$1J,dependencies$1J,a=>{var{subset:s,Node:o}=a,c=accessFactory({subset:s});function h(b){return!(isAccessorNode(b)||isArrayNode(b)||isConstantNode(b)||isFunctionNode(b)||isObjectNode(b)||isParenthesisNode(b)||isSymbolNode(b))}class d extends o{constructor(_,$){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!isNode(_))throw new TypeError('Node expected for parameter "object"');if(!isIndexNode($))throw new TypeError('IndexNode expected for parameter "index"');this.object=_,this.index=$,this.optionalChaining=j}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return name$1J}get isAccessorNode(){return!0}_compile(_,$){var j=this.object._compile(_,$),Xt=this.index._compile(_,$),Lt=this.optionalChaining,fr=isAccessorNode(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var Jr=this.index.getObjectProperty();return function(qs,zo,js){var eu=js||{},Oo=j(qs,zo,eu);if(Lt&&Oo==null){eu.optionalShortCircuit=!0;return}if(!(fr&&eu!==null&&eu!==void 0&&eu.optionalShortCircuit))return getSafeProperty(Oo,Jr)}}else return function(qs,zo,js){var eu=js||{},Oo=j(qs,zo,eu);if(Lt&&Oo==null){eu.optionalShortCircuit=!0;return}if(!(fr&&eu!==null&&eu!==void 0&&eu.optionalShortCircuit)){var tu=Xt(qs,zo,Oo);return c(Oo,tu)}}}forEach(_){_(this.object,"object",this),_(this.index,"index",this)}map(_){return new d(this._ifNode(_(this.object,"object",this)),this._ifNode(_(this.index,"index",this)),this.optionalChaining)}clone(){return new d(this.object,this.index,this.optionalChaining)}_toString(_){var $=this.object.toString(_);h(this.object)&&($="("+$+")");var j=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return $+j+this.index.toString(_)}_toHTML(_){var $=this.object.toHTML(_);return h(this.object)&&($='<span class="math-parenthesis math-round-parenthesis">(</span>'+$+'<span class="math-parenthesis math-round-parenthesis">)</span>'),$+this.index.toHTML(_)}_toTex(_){var $=this.object.toTex(_);return h(this.object)&&($="\\left(' + object + '\\right)"),$+this.index.toTex(_)}toJSON(){return{mathjs:name$1J,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(_){return new d(_.object,_.index,_.optionalChaining)}}return _defineProperty(d,"name",name$1J),d},{isClass:!0,isNode:!0}),name$1I="ArrayNode",dependencies$1I=["Node"],createArrayNode=factory(name$1I,dependencies$1I,a=>{var{Node:s}=a;class o extends s{constructor(h){if(super(),this.items=h||[],!Array.isArray(this.items)||!this.items.every(isNode))throw new TypeError("Array containing Nodes expected")}get type(){return name$1I}get isArrayNode(){return!0}_compile(h,d){var b=map$1(this.items,function(j){return j._compile(h,d)}),_=h.config.matrix!=="Array";if(_){var $=h.matrix;return function(Xt,Lt,fr){return $(map$1(b,function(Jr){return Jr(Xt,Lt,fr)}))}}else return function(Xt,Lt,fr){return map$1(b,function(Jr){return Jr(Xt,Lt,fr)})}}forEach(h){for(var d=0;d<this.items.length;d++){var b=this.items[d];h(b,"items["+d+"]",this)}}map(h){for(var d=[],b=0;b<this.items.length;b++)d[b]=this._ifNode(h(this.items[b],"items["+b+"]",this));return new o(d)}clone(){return new o(this.items.slice(0))}_toString(h){var d=this.items.map(function(b){return b.toString(h)});return"["+d.join(", ")+"]"}toJSON(){return{mathjs:name$1I,items:this.items}}static fromJSON(h){return new o(h.items)}_toHTML(h){var d=this.items.map(function(b){return b.toHTML(h)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+d.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(h){function d(b,_){var $=b.some(isArrayNode)&&!b.every(isArrayNode),j=_||$,Xt=j?"&":"\\\\",Lt=b.map(function(fr){return fr.items?d(fr.items,!_):fr.toTex(h)}).join(Xt);return $||!j||j&&!_?"\\begin{bmatrix}"+Lt+"\\end{bmatrix}":Lt}return d(this.items,!1)}}return _defineProperty(o,"name",name$1I),o},{isClass:!0,isNode:!0});function assignFactory(a){var{subset:s,matrix:o}=a;return function(h,d,b){try{if(Array.isArray(h)){var _=o(h).subset(d,b).valueOf();return _.forEach(($,j)=>{h[j]=$}),h}else{if(h&&typeof h.subset=="function")return h.subset(d,b);if(typeof h=="string")return s(h,d,b);if(typeof h=="object"){if(!d.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return setSafeProperty(h,d.getObjectProperty(),b),h}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch($){throw errorTransform($)}}}var properties=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function unwrapParen(a,s){if(!s||s!=="auto")return a;for(var o=a;isParenthesisNode(o);)o=o.content;return o}function getPrecedence(a,s,o,c){var h=a;s!=="keep"&&(h=a.getContent());for(var d=h.getIdentifier(),b=null,_=0;_<properties.length;_++)if(d in properties[_]){b=_;break}if(d==="OperatorNode:multiply"&&h.implicit&&o!=="show"){var $=unwrapParen(h.args[0],s);!(isConstantNode($)&&c&&c.getIdentifier()==="OperatorNode:divide"&&rule2Node(unwrapParen(c.args[0],s)))&&!($.getIdentifier()==="OperatorNode:divide"&&rule2Node(unwrapParen($.args[0],s))&&isConstantNode(unwrapParen($.args[1])))&&(b+=1)}return b}function getAssociativity(a,s){var o=a;s!=="keep"&&(o=a.getContent());var c=o.getIdentifier(),h=getPrecedence(o,s);if(h===null)return null;var d=properties[h][c];if(hasOwnProperty(d,"associativity")){if(d.associativity==="left")return"left";if(d.associativity==="right")return"right";throw Error("'"+c+"' has the invalid associativity '"+d.associativity+"'.")}return null}function isAssociativeWith(a,s,o){var c=o!=="keep"?a.getContent():a,h=o!=="keep"?a.getContent():s,d=c.getIdentifier(),b=h.getIdentifier(),_=getPrecedence(c,o);if(_===null)return null;var $=properties[_][d];if(hasOwnProperty($,"associativeWith")&&$.associativeWith instanceof Array){for(var j=0;j<$.associativeWith.length;j++)if($.associativeWith[j]===b)return!0;return!1}return null}function getOperator(a){var s="OperatorNode:"+a;for(var o of properties)if(s in o)return o[s].op;return null}var name$1H="AssignmentNode",dependencies$1H=["subset","?matrix","Node"],createAssignmentNode=factory(name$1H,dependencies$1H,a=>{var{subset:s,matrix:o,Node:c}=a,h=accessFactory({subset:s}),d=assignFactory({subset:s,matrix:o});function b($,j,Xt){j||(j="keep");var Lt=getPrecedence($,j,Xt),fr=getPrecedence($.value,j,Xt);return j==="all"||fr!==null&&fr<=Lt}class _ extends c{constructor(j,Xt,Lt){if(super(),this.object=j,this.index=Lt?Xt:null,this.value=Lt||Xt,!isSymbolNode(j)&&!isAccessorNode(j))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(isSymbolNode(j)&&j.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!isIndexNode(this.index))throw new TypeError('IndexNode expected as "index"');if(!isNode(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return name$1H}get isAssignmentNode(){return!0}_compile(j,Xt){var Lt=this.object._compile(j,Xt),fr=this.index?this.index._compile(j,Xt):null,Jr=this.value._compile(j,Xt),Js=this.object.name;if(this.index)if(this.index.isObjectProperty()){var qs=this.index.getObjectProperty();return function(tu,Bo,vu){var t1=Lt(tu,Bo,vu),e1=Jr(tu,Bo,vu);return setSafeProperty(t1,qs,e1),e1}}else{if(isSymbolNode(this.object))return function(tu,Bo,vu){var t1=Lt(tu,Bo,vu),e1=Jr(tu,Bo,vu),r1=fr(tu,Bo,t1);return tu.set(Js,d(t1,r1,e1)),e1};var zo=this.object.object._compile(j,Xt);if(this.object.index.isObjectProperty()){var js=this.object.index.getObjectProperty();return function(tu,Bo,vu){var t1=zo(tu,Bo,vu),e1=getSafeProperty(t1,js),r1=fr(tu,Bo,e1),a1=Jr(tu,Bo,vu);return setSafeProperty(t1,js,d(e1,r1,a1)),a1}}else{var eu=this.object.index._compile(j,Xt);return function(tu,Bo,vu){var t1=zo(tu,Bo,vu),e1=eu(tu,Bo,t1),r1=h(t1,e1),a1=fr(tu,Bo,r1),i1=Jr(tu,Bo,vu);return d(t1,e1,d(r1,a1,i1)),i1}}}else{if(!isSymbolNode(this.object))throw new TypeError("SymbolNode expected as object");return function(tu,Bo,vu){var t1=Jr(tu,Bo,vu);return tu.set(Js,t1),t1}}}forEach(j){j(this.object,"object",this),this.index&&j(this.index,"index",this),j(this.value,"value",this)}map(j){var Xt=this._ifNode(j(this.object,"object",this)),Lt=this.index?this._ifNode(j(this.index,"index",this)):null,fr=this._ifNode(j(this.value,"value",this));return new _(Xt,Lt,fr)}clone(){return new _(this.object,this.index,this.value)}_toString(j){var Xt=this.object.toString(j),Lt=this.index?this.index.toString(j):"",fr=this.value.toString(j);return b(this,j&&j.parenthesis,j&&j.implicit)&&(fr="("+fr+")"),Xt+Lt+" = "+fr}toJSON(){return{mathjs:name$1H,object:this.object,index:this.index,value:this.value}}static fromJSON(j){return new _(j.object,j.index,j.value)}_toHTML(j){var Xt=this.object.toHTML(j),Lt=this.index?this.index.toHTML(j):"",fr=this.value.toHTML(j);return b(this,j&&j.parenthesis,j&&j.implicit)&&(fr='<span class="math-paranthesis math-round-parenthesis">(</span>'+fr+'<span class="math-paranthesis math-round-parenthesis">)</span>'),Xt+Lt+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+fr}_toTex(j){var Xt=this.object.toTex(j),Lt=this.index?this.index.toTex(j):"",fr=this.value.toTex(j);return b(this,j&&j.parenthesis,j&&j.implicit)&&(fr="\\left(".concat(fr,"\\right)")),Xt+Lt+"="+fr}}return _defineProperty(_,"name",name$1H),_},{isClass:!0,isNode:!0}),name$1G="BlockNode",dependencies$1G=["ResultSet","Node"],createBlockNode=factory(name$1G,dependencies$1G,a=>{var{ResultSet:s,Node:o}=a;class c extends o{constructor(d){if(super(),!Array.isArray(d))throw new Error("Array expected");this.blocks=d.map(function(b){var _=b&&b.node,$=b&&b.visible!==void 0?b.visible:!0;if(!isNode(_))throw new TypeError('Property "node" must be a Node');if(typeof $!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:_,visible:$}})}get type(){return name$1G}get isBlockNode(){return!0}_compile(d,b){var _=map$1(this.blocks,function($){return{evaluate:$.node._compile(d,b),visible:$.visible}});return function(j,Xt,Lt){var fr=[];return forEach$1(_,function(Js){var qs=Js.evaluate(j,Xt,Lt);Js.visible&&fr.push(qs)}),new s(fr)}}forEach(d){for(var b=0;b<this.blocks.length;b++)d(this.blocks[b].node,"blocks["+b+"].node",this)}map(d){for(var b=[],_=0;_<this.blocks.length;_++){var $=this.blocks[_],j=this._ifNode(d($.node,"blocks["+_+"].node",this));b[_]={node:j,visible:$.visible}}return new c(b)}clone(){var d=this.blocks.map(function(b){return{node:b.node,visible:b.visible}});return new c(d)}_toString(d){return this.blocks.map(function(b){return b.node.toString(d)+(b.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:name$1G,blocks:this.blocks}}static fromJSON(d){return new c(d.blocks)}_toHTML(d){return this.blocks.map(function(b){return b.node.toHTML(d)+(b.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(d){return this.blocks.map(function(b){return b.node.toTex(d)+(b.visible?"":";")}).join(`\\;\\;
`)}}return _defineProperty(c,"name",name$1G),c},{isClass:!0,isNode:!0}),name$1F="ConditionalNode",dependencies$1F=["Node"],createConditionalNode=factory(name$1F,dependencies$1F,a=>{var{Node:s}=a;function o(h){if(typeof h=="number"||typeof h=="boolean"||typeof h=="string")return!!h;if(h){if(isBigNumber(h))return!h.isZero();if(isComplex(h))return!!(h.re||h.im);if(isUnit(h))return!!h.value}if(h==null)return!1;throw new TypeError('Unsupported type of condition "'+typeOf$1(h)+'"')}class c extends s{constructor(d,b,_){if(super(),!isNode(d))throw new TypeError("Parameter condition must be a Node");if(!isNode(b))throw new TypeError("Parameter trueExpr must be a Node");if(!isNode(_))throw new TypeError("Parameter falseExpr must be a Node");this.condition=d,this.trueExpr=b,this.falseExpr=_}get type(){return name$1F}get isConditionalNode(){return!0}_compile(d,b){var _=this.condition._compile(d,b),$=this.trueExpr._compile(d,b),j=this.falseExpr._compile(d,b);return function(Lt,fr,Jr){return o(_(Lt,fr,Jr))?$(Lt,fr,Jr):j(Lt,fr,Jr)}}forEach(d){d(this.condition,"condition",this),d(this.trueExpr,"trueExpr",this),d(this.falseExpr,"falseExpr",this)}map(d){return new c(this._ifNode(d(this.condition,"condition",this)),this._ifNode(d(this.trueExpr,"trueExpr",this)),this._ifNode(d(this.falseExpr,"falseExpr",this)))}clone(){return new c(this.condition,this.trueExpr,this.falseExpr)}_toString(d){var b=d&&d.parenthesis?d.parenthesis:"keep",_=getPrecedence(this,b,d&&d.implicit),$=this.condition.toString(d),j=getPrecedence(this.condition,b,d&&d.implicit);(b==="all"||this.condition.type==="OperatorNode"||j!==null&&j<=_)&&($="("+$+")");var Xt=this.trueExpr.toString(d),Lt=getPrecedence(this.trueExpr,b,d&&d.implicit);(b==="all"||this.trueExpr.type==="OperatorNode"||Lt!==null&&Lt<=_)&&(Xt="("+Xt+")");var fr=this.falseExpr.toString(d),Jr=getPrecedence(this.falseExpr,b,d&&d.implicit);return(b==="all"||this.falseExpr.type==="OperatorNode"||Jr!==null&&Jr<=_)&&(fr="("+fr+")"),$+" ? "+Xt+" : "+fr}toJSON(){return{mathjs:name$1F,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(d){return new c(d.condition,d.trueExpr,d.falseExpr)}_toHTML(d){var b=d&&d.parenthesis?d.parenthesis:"keep",_=getPrecedence(this,b,d&&d.implicit),$=this.condition.toHTML(d),j=getPrecedence(this.condition,b,d&&d.implicit);(b==="all"||this.condition.type==="OperatorNode"||j!==null&&j<=_)&&($='<span class="math-parenthesis math-round-parenthesis">(</span>'+$+'<span class="math-parenthesis math-round-parenthesis">)</span>');var Xt=this.trueExpr.toHTML(d),Lt=getPrecedence(this.trueExpr,b,d&&d.implicit);(b==="all"||this.trueExpr.type==="OperatorNode"||Lt!==null&&Lt<=_)&&(Xt='<span class="math-parenthesis math-round-parenthesis">(</span>'+Xt+'<span class="math-parenthesis math-round-parenthesis">)</span>');var fr=this.falseExpr.toHTML(d),Jr=getPrecedence(this.falseExpr,b,d&&d.implicit);return(b==="all"||this.falseExpr.type==="OperatorNode"||Jr!==null&&Jr<=_)&&(fr='<span class="math-parenthesis math-round-parenthesis">(</span>'+fr+'<span class="math-parenthesis math-round-parenthesis">)</span>'),$+'<span class="math-operator math-conditional-operator">?</span>'+Xt+'<span class="math-operator math-conditional-operator">:</span>'+fr}_toTex(d){return"\\begin{cases} {"+this.trueExpr.toTex(d)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(d)+"}\\\\{"+this.falseExpr.toTex(d)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return _defineProperty(c,"name",name$1F),c},{isClass:!0,isNode:!0}),_extends=Object.assign||function(a){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a},defaultEscapes={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},formatEscapes={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},defaultEscapeMapFn=function a(s,o){return _extends({},s,o)},dist=function(a){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.preserveFormatting,c=o===void 0?!1:o,h=s.escapeMapFn,d=h===void 0?defaultEscapeMapFn:h,b=String(a),_="",$=d(_extends({},defaultEscapes),c?_extends({},formatEscapes):{}),j=Object.keys($),Xt=function(){var fr=!1;j.forEach(function(Jr,Js){fr||b.length>=Jr.length&&b.slice(0,Jr.length)===Jr&&(_+=$[j[Js]],b=b.slice(Jr.length,b.length),fr=!0)}),fr||(_+=b.slice(0,1),b=b.slice(1,b.length))};b;)Xt();return _};const escapeLatexLib=getDefaultExportFromCjs(dist);var latexSymbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},latexOperators={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},latexFunctions={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(latexOperators.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(latexOperators.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(latexOperators.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(latexOperators.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(latexOperators.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(latexOperators.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(latexOperators.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(latexOperators.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(latexOperators.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(latexOperators.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(latexOperators.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(latexOperators.bitAnd,"${args[1]}\\right)")},bitNot:{1:latexOperators.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(latexOperators.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(latexOperators.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(latexOperators.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(latexOperators.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(latexOperators.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(latexOperators.and,"${args[1]}\\right)")},not:{1:latexOperators.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(latexOperators.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(latexOperators.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(latexOperators.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(latexOperators.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(latexOperators.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(latexOperators.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(latexOperators.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(latexOperators.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(latexOperators.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(latexOperators.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(latexOperators.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(latexOperators.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(latexOperators.to,"${args[1]}\\right)")},numeric:function a(s,o){return s.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(latexSymbols.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)",latexUnits={deg:"^\\circ"};function escapeLatex(a){return escapeLatexLib(a,{preserveFormatting:!0})}function toSymbol(a,s){return s=typeof s>"u"?!1:s,s?hasOwnProperty(latexUnits,a)?latexUnits[a]:"\\mathrm{"+escapeLatex(a)+"}":hasOwnProperty(latexSymbols,a)?latexSymbols[a]:escapeLatex(a)}var name$1E="ConstantNode",dependencies$1E=["Node","isBounded"],createConstantNode=factory(name$1E,dependencies$1E,a=>{var{Node:s,isBounded:o}=a;class c extends s{constructor(d){super(),this.value=d}get type(){return name$1E}get isConstantNode(){return!0}_compile(d,b){var _=this.value;return function(){return _}}forEach(d){}map(d){return this.clone()}clone(){return new c(this.value)}_toString(d){return format$1(this.value,d)}_toHTML(d){var b=this._toString(d);switch(typeOf$1(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+b+"</span>";case"string":return'<span class="math-string">'+b+"</span>";case"boolean":return'<span class="math-boolean">'+b+"</span>";case"null":return'<span class="math-null-symbol">'+b+"</span>";case"undefined":return'<span class="math-undefined">'+b+"</span>";default:return'<span class="math-symbol">'+b+"</span>"}}toJSON(){return{mathjs:name$1E,value:this.value}}static fromJSON(d){return new c(d.value)}_toTex(d){var b=this._toString(d),_=typeOf$1(this.value);switch(_){case"string":return"\\mathtt{"+escapeLatex(b)+"}";case"number":case"BigNumber":{if(!o(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var $=b.toLowerCase().indexOf("e");return $!==-1?b.substring(0,$)+"\\cdot10^{"+b.substring($+1)+"}":b}case"bigint":return b.toString();case"Fraction":return this.value.toLatex();default:return b}}}return _defineProperty(c,"name",name$1E),c},{isClass:!0,isNode:!0}),name$1D="FunctionAssignmentNode",dependencies$1D=["typed","Node"],createFunctionAssignmentNode=factory(name$1D,dependencies$1D,a=>{var{typed:s,Node:o}=a;function c(d,b,_){var $=getPrecedence(d,b,_),j=getPrecedence(d.expr,b,_);return b==="all"||j!==null&&j<=$}class h extends o{constructor(b,_,$){if(super(),typeof b!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(_))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!isNode($))throw new TypeError('Node expected for parameter "expr"');if(keywords.has(b))throw new Error('Illegal function name, "'+b+'" is a reserved keyword');var j=new Set;for(var Xt of _){var Lt=typeof Xt=="string"?Xt:Xt.name;if(j.has(Lt))throw new Error('Duplicate parameter name "'.concat(Lt,'"'));j.add(Lt)}this.name=b,this.params=_.map(function(fr){return fr&&fr.name||fr}),this.types=_.map(function(fr){return fr&&fr.type||"any"}),this.expr=$}get type(){return name$1D}get isFunctionAssignmentNode(){return!0}_compile(b,_){var $=Object.create(_);forEach$1(this.params,function(qs){$[qs]=!0});var j=this.expr,Xt=j._compile(b,$),Lt=this.name,fr=this.params,Jr=join(this.types,","),Js=Lt+"("+join(this.params,", ")+")";return function(zo,js,eu){var Oo={};Oo[Jr]=function(){for(var Bo=Object.create(js),vu=0;vu<fr.length;vu++)Bo[fr[vu]]=arguments[vu];return Xt(zo,Bo,eu)};var tu=s(Lt,Oo);return tu.syntax=Js,tu.expr=j.toString(),zo.set(Lt,tu),tu}}forEach(b){b(this.expr,"expr",this)}map(b){var _=this._ifNode(b(this.expr,"expr",this));return new h(this.name,this.params.slice(0),_)}clone(){return new h(this.name,this.params.slice(0),this.expr)}_toString(b){var _=b&&b.parenthesis?b.parenthesis:"keep",$=this.expr.toString(b);return c(this,_,b&&b.implicit)&&($="("+$+")"),this.name+"("+this.params.join(", ")+") = "+$}toJSON(){var b=this.types;return{mathjs:name$1D,name:this.name,params:this.params.map(function(_,$){return{name:_,type:b[$]}}),expr:this.expr}}static fromJSON(b){return new h(b.name,b.params,b.expr)}_toHTML(b){for(var _=b&&b.parenthesis?b.parenthesis:"keep",$=[],j=0;j<this.params.length;j++)$.push('<span class="math-symbol math-parameter">'+escape$1(this.params[j])+"</span>");var Xt=this.expr.toHTML(b);return c(this,_,b&&b.implicit)&&(Xt='<span class="math-parenthesis math-round-parenthesis">(</span>'+Xt+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+escape$1(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+$.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+Xt}_toTex(b){var _=b&&b.parenthesis?b.parenthesis:"keep",$=this.expr.toTex(b);return c(this,_,b&&b.implicit)&&($="\\left(".concat($,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(toSymbol).join(",")+"\\right)="+$}}return _defineProperty(h,"name",name$1D),h},{isClass:!0,isNode:!0}),name$1C="IndexNode",dependencies$1C=["Node","size"],createIndexNode=factory(name$1C,dependencies$1C,a=>{var{Node:s,size:o}=a;class c extends s{constructor(d,b){if(super(),this.dimensions=d,this.dotNotation=b||!1,!Array.isArray(d)||!d.every(isNode))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return name$1C}get isIndexNode(){return!0}_compile(d,b){var _=map$1(this.dimensions,function(j,Xt){var Lt=j.filter(Js=>Js.isSymbolNode&&Js.name==="end").length>0;if(Lt){var fr=Object.create(b);fr.end=!0;var Jr=j._compile(d,fr);return function(qs,zo,js){if(!isMatrix(js)&&!isArray(js)&&!isString(js))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+typeOf$1(js));var eu=o(js),Oo=Object.create(zo);return Oo.end=eu[Xt],Jr(qs,Oo,js)}}else return j._compile(d,b)}),$=getSafeProperty(d,"index");return function(Xt,Lt,fr){var Jr=map$1(_,function(Js){return Js(Xt,Lt,fr)});return $(...Jr)}}forEach(d){for(var b=0;b<this.dimensions.length;b++)d(this.dimensions[b],"dimensions["+b+"]",this)}map(d){for(var b=[],_=0;_<this.dimensions.length;_++)b[_]=this._ifNode(d(this.dimensions[_],"dimensions["+_+"]",this));return new c(b,this.dotNotation)}clone(){return new c(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&isConstantNode(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(d){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:name$1C,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(d){return new c(d.dimensions,d.dotNotation)}_toHTML(d){for(var b=[],_=0;_<this.dimensions.length;_++)b[_]=this.dimensions[_].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+escape$1(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+b.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(d){var b=this.dimensions.map(function(_){return _.toTex(d)});return this.dotNotation?"."+this.getObjectProperty():"_{"+b.join(",")+"}"}}return _defineProperty(c,"name",name$1C),c},{isClass:!0,isNode:!0}),name$1B="ObjectNode",dependencies$1B=["Node"],createObjectNode=factory(name$1B,dependencies$1B,a=>{var{Node:s}=a;class o extends s{constructor(h){if(super(),this.properties=h||{},h&&(typeof h!="object"||!Object.keys(h).every(function(d){return isNode(h[d])})))throw new TypeError("Object containing Nodes expected")}get type(){return name$1B}get isObjectNode(){return!0}_compile(h,d){var b={};for(var _ in this.properties)if(hasOwnProperty(this.properties,_)){var $=stringify(_),j=JSON.parse($),Xt=getSafeProperty(this.properties,_);b[j]=Xt._compile(h,d)}return function(fr,Jr,Js){var qs={};for(var zo in b)hasOwnProperty(b,zo)&&(qs[zo]=b[zo](fr,Jr,Js));return qs}}forEach(h){for(var d in this.properties)hasOwnProperty(this.properties,d)&&h(this.properties[d],"properties["+stringify(d)+"]",this)}map(h){var d={};for(var b in this.properties)hasOwnProperty(this.properties,b)&&(d[b]=this._ifNode(h(this.properties[b],"properties["+stringify(b)+"]",this)));return new o(d)}clone(){var h={};for(var d in this.properties)hasOwnProperty(this.properties,d)&&(h[d]=this.properties[d]);return new o(h)}_toString(h){var d=[];for(var b in this.properties)hasOwnProperty(this.properties,b)&&d.push(stringify(b)+": "+this.properties[b].toString(h));return"{"+d.join(", ")+"}"}toJSON(){return{mathjs:name$1B,properties:this.properties}}static fromJSON(h){return new o(h.properties)}_toHTML(h){var d=[];for(var b in this.properties)hasOwnProperty(this.properties,b)&&d.push('<span class="math-symbol math-property">'+escape$1(b)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[b].toHTML(h));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+d.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(h){var d=[];for(var b in this.properties)hasOwnProperty(this.properties,b)&&d.push("\\mathbf{"+b+":} & "+this.properties[b].toTex(h)+"\\\\");var _="\\left\\{\\begin{array}{ll}"+d.join(`
`)+"\\end{array}\\right\\}";return _}}return _defineProperty(o,"name",name$1B),o},{isClass:!0,isNode:!0});function createSubScope(a,s){return new PartitionedMap(a,new ObjectWrappingMap(s),new Set(Object.keys(s)))}var name$1A="OperatorNode",dependencies$1A=["Node"],createOperatorNode=factory(name$1A,dependencies$1A,a=>{var{Node:s}=a;function o(d,b){var _=d;if(b==="auto")for(;isParenthesisNode(_);)_=_.content;return isConstantNode(_)?!0:isOperatorNode(_)?o(_.args[0],b):!1}function c(d,b,_,$,j){var Xt=getPrecedence(d,b,_),Lt=getAssociativity(d,b);if(b==="all"||$.length>2&&d.getIdentifier()!=="OperatorNode:add"&&d.getIdentifier()!=="OperatorNode:multiply")return $.map(function(a1){switch(a1.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var fr;switch($.length){case 0:fr=[];break;case 1:{var Jr=getPrecedence($[0],b,_,d);if(j&&Jr!==null){var Js,qs;if(b==="keep"?(Js=$[0].getIdentifier(),qs=d.getIdentifier()):(Js=$[0].getContent().getIdentifier(),qs=d.getContent().getIdentifier()),properties[Xt][qs].latexLeftParens===!1){fr=[!1];break}if(properties[Jr][Js].latexParens===!1){fr=[!1];break}}if(Jr===null){fr=[!1];break}if(Jr<=Xt){fr=[!0];break}fr=[!1]}break;case 2:{var zo,js=getPrecedence($[0],b,_,d),eu=isAssociativeWith(d,$[0],b);js===null?zo=!1:js===Xt&&Lt==="right"&&!eu||js<Xt?zo=!0:zo=!1;var Oo,tu=getPrecedence($[1],b,_,d),Bo=isAssociativeWith(d,$[1],b);if(tu===null?Oo=!1:tu===Xt&&Lt==="left"&&!Bo||tu<Xt?Oo=!0:Oo=!1,j){var vu,t1,e1;b==="keep"?(vu=d.getIdentifier(),t1=d.args[0].getIdentifier(),e1=d.args[1].getIdentifier()):(vu=d.getContent().getIdentifier(),t1=d.args[0].getContent().getIdentifier(),e1=d.args[1].getContent().getIdentifier()),js!==null&&(properties[Xt][vu].latexLeftParens===!1&&(zo=!1),properties[js][t1].latexParens===!1&&(zo=!1)),tu!==null&&(properties[Xt][vu].latexRightParens===!1&&(Oo=!1),properties[tu][e1].latexParens===!1&&(Oo=!1))}fr=[zo,Oo]}break;default:(d.getIdentifier()==="OperatorNode:add"||d.getIdentifier()==="OperatorNode:multiply")&&(fr=$.map(function(a1){var i1=getPrecedence(a1,b,_,d),s1=isAssociativeWith(d,a1,b),c1=getAssociativity(a1,b);return i1===null?!1:Xt===i1&&Lt===c1&&!s1?!0:i1<Xt}));break}if($.length>=2&&d.getIdentifier()==="OperatorNode:multiply"&&d.implicit&&b!=="all"&&_==="hide")for(var r1=1;r1<fr.length;++r1)o($[r1],b)&&!fr[r1-1]&&(b!=="keep"||!isParenthesisNode($[r1-1]))&&(fr[r1]=!0);return fr}class h extends s{constructor(b,_,$,j,Xt){if(super(),typeof b!="string")throw new TypeError('string expected for parameter "op"');if(typeof _!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray($)||!$.every(isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=j===!0,this.isPercentage=Xt===!0,this.op=b,this.fn=_,this.args=$||[]}get type(){return name$1A}get isOperatorNode(){return!0}_compile(b,_){if(typeof this.fn!="string"||!isSafeMethod(b,this.fn))throw b[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var $=getSafeProperty(b,this.fn),j=map$1(this.args,function(Js){return Js._compile(b,_)});if(typeof $=="function"&&$.rawArgs===!0){var Xt=this.args;return function(qs,zo,js){return $(Xt,b,createSubScope(qs,zo))}}else if(j.length===1){var Lt=j[0];return function(qs,zo,js){return $(Lt(qs,zo,js))}}else if(j.length===2){var fr=j[0],Jr=j[1];return function(qs,zo,js){return $(fr(qs,zo,js),Jr(qs,zo,js))}}else return function(qs,zo,js){return $.apply(null,map$1(j,function(eu){return eu(qs,zo,js)}))}}forEach(b){for(var _=0;_<this.args.length;_++)b(this.args[_],"args["+_+"]",this)}map(b){for(var _=[],$=0;$<this.args.length;$++)_[$]=this._ifNode(b(this.args[$],"args["+$+"]",this));return new h(this.op,this.fn,_,this.implicit,this.isPercentage)}clone(){return new h(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(b){var _=b&&b.parenthesis?b.parenthesis:"keep",$=b&&b.implicit?b.implicit:"hide",j=this.args,Xt=c(this,_,$,j,!1);if(j.length===1){var Lt=getAssociativity(this,_),fr=j[0].toString(b);Xt[0]&&(fr="("+fr+")");var Jr=/[a-zA-Z]+/.test(this.op);return Lt==="right"?this.op+(Jr?" ":"")+fr:Lt==="left"?fr+(Jr?" ":"")+this.op:fr+this.op}else if(j.length===2){var Js=j[0].toString(b),qs=j[1].toString(b);return Xt[0]&&(Js="("+Js+")"),Xt[1]&&(qs="("+qs+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&$==="hide"?Js+" "+qs:Js+" "+this.op+" "+qs}else if(j.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var zo=j.map(function(js,eu){return js=js.toString(b),Xt[eu]&&(js="("+js+")"),js});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&$==="hide"?zo.join(" "):zo.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:name$1A,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(b){return new h(b.op,b.fn,b.args,b.implicit,b.isPercentage)}_toHTML(b){var _=b&&b.parenthesis?b.parenthesis:"keep",$=b&&b.implicit?b.implicit:"hide",j=this.args,Xt=c(this,_,$,j,!1);if(j.length===1){var Lt=getAssociativity(this,_),fr=j[0].toHTML(b);return Xt[0]&&(fr='<span class="math-parenthesis math-round-parenthesis">(</span>'+fr+'<span class="math-parenthesis math-round-parenthesis">)</span>'),Lt==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+escape$1(this.op)+"</span>"+fr:fr+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+escape$1(this.op)+"</span>"}else if(j.length===2){var Jr=j[0].toHTML(b),Js=j[1].toHTML(b);return Xt[0]&&(Jr='<span class="math-parenthesis math-round-parenthesis">(</span>'+Jr+'<span class="math-parenthesis math-round-parenthesis">)</span>'),Xt[1]&&(Js='<span class="math-parenthesis math-round-parenthesis">(</span>'+Js+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&$==="hide"?Jr+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+Js:Jr+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+escape$1(this.op)+"</span>"+Js}else{var qs=j.map(function(zo,js){return zo=zo.toHTML(b),Xt[js]&&(zo='<span class="math-parenthesis math-round-parenthesis">(</span>'+zo+'<span class="math-parenthesis math-round-parenthesis">)</span>'),zo});return j.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&$==="hide"?qs.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):qs.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+escape$1(this.op)+"</span>"):'<span class="math-function">'+escape$1(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+qs.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(b){var _=b&&b.parenthesis?b.parenthesis:"keep",$=b&&b.implicit?b.implicit:"hide",j=this.args,Xt=c(this,_,$,j,!0),Lt=latexOperators[this.fn];if(Lt=typeof Lt>"u"?this.op:Lt,j.length===1){var fr=getAssociativity(this,_),Jr=j[0].toTex(b);return Xt[0]&&(Jr="\\left(".concat(Jr,"\\right)")),fr==="right"?Lt+Jr:Jr+Lt}else if(j.length===2){var Js=j[0],qs=Js.toTex(b);Xt[0]&&(qs="\\left(".concat(qs,"\\right)"));var zo=j[1],js=zo.toTex(b);Xt[1]&&(js="\\left(".concat(js,"\\right)"));var eu;switch(_==="keep"?eu=Js.getIdentifier():eu=Js.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return Lt+"{"+qs+"}{"+js+"}";case"OperatorNode:pow":switch(qs="{"+qs+"}",js="{"+js+"}",eu){case"ConditionalNode":case"OperatorNode:divide":qs="\\left(".concat(qs,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&$==="hide")return qs+"~"+js}return qs+Lt+js}else if(j.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var Oo=j.map(function(tu,Bo){return tu=tu.toTex(b),Xt[Bo]&&(tu="\\left(".concat(tu,"\\right)")),tu});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&$==="hide"?Oo.join("~"):Oo.join(Lt)}else return"\\mathrm{"+this.fn+"}\\left("+j.map(function(tu){return tu.toTex(b)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return _defineProperty(h,"name",name$1A),h},{isClass:!0,isNode:!0}),name$1z="ParenthesisNode",dependencies$1z=["Node"],createParenthesisNode=factory(name$1z,dependencies$1z,a=>{var{Node:s}=a;class o extends s{constructor(h){if(super(),!isNode(h))throw new TypeError('Node expected for parameter "content"');this.content=h}get type(){return name$1z}get isParenthesisNode(){return!0}_compile(h,d){return this.content._compile(h,d)}getContent(){return this.content.getContent()}forEach(h){h(this.content,"content",this)}map(h){var d=h(this.content,"content",this);return new o(d)}clone(){return new o(this.content)}_toString(h){return!h||h&&!h.parenthesis||h&&h.parenthesis==="keep"?"("+this.content.toString(h)+")":this.content.toString(h)}toJSON(){return{mathjs:name$1z,content:this.content}}static fromJSON(h){return new o(h.content)}_toHTML(h){return!h||h&&!h.parenthesis||h&&h.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(h)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(h)}_toTex(h){return!h||h&&!h.parenthesis||h&&h.parenthesis==="keep"?"\\left(".concat(this.content.toTex(h),"\\right)"):this.content.toTex(h)}}return _defineProperty(o,"name",name$1z),o},{isClass:!0,isNode:!0}),name$1y="RangeNode",dependencies$1y=["Node"],createRangeNode=factory(name$1y,dependencies$1y,a=>{var{Node:s}=a;function o(h,d,b){var _=getPrecedence(h,d,b),$={},j=getPrecedence(h.start,d,b);if($.start=j!==null&&j<=_||d==="all",h.step){var Xt=getPrecedence(h.step,d,b);$.step=Xt!==null&&Xt<=_||d==="all"}var Lt=getPrecedence(h.end,d,b);return $.end=Lt!==null&&Lt<=_||d==="all",$}class c extends s{constructor(d,b,_){if(super(),!isNode(d))throw new TypeError("Node expected");if(!isNode(b))throw new TypeError("Node expected");if(_&&!isNode(_))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=d,this.end=b,this.step=_||null}get type(){return name$1y}get isRangeNode(){return!0}needsEnd(){var d=this.filter(function(b){return isSymbolNode(b)&&b.name==="end"});return d.length>0}_compile(d,b){var _=d.range,$=this.start._compile(d,b),j=this.end._compile(d,b);if(this.step){var Xt=this.step._compile(d,b);return function(fr,Jr,Js){return _($(fr,Jr,Js),j(fr,Jr,Js),Xt(fr,Jr,Js))}}else return function(fr,Jr,Js){return _($(fr,Jr,Js),j(fr,Jr,Js))}}forEach(d){d(this.start,"start",this),d(this.end,"end",this),this.step&&d(this.step,"step",this)}map(d){return new c(this._ifNode(d(this.start,"start",this)),this._ifNode(d(this.end,"end",this)),this.step&&this._ifNode(d(this.step,"step",this)))}clone(){return new c(this.start,this.end,this.step&&this.step)}_toString(d){var b=d&&d.parenthesis?d.parenthesis:"keep",_=o(this,b,d&&d.implicit),$,j=this.start.toString(d);if(_.start&&(j="("+j+")"),$=j,this.step){var Xt=this.step.toString(d);_.step&&(Xt="("+Xt+")"),$+=":"+Xt}var Lt=this.end.toString(d);return _.end&&(Lt="("+Lt+")"),$+=":"+Lt,$}toJSON(){return{mathjs:name$1y,start:this.start,end:this.end,step:this.step}}static fromJSON(d){return new c(d.start,d.end,d.step)}_toHTML(d){var b=d&&d.parenthesis?d.parenthesis:"keep",_=o(this,b,d&&d.implicit),$,j=this.start.toHTML(d);if(_.start&&(j='<span class="math-parenthesis math-round-parenthesis">(</span>'+j+'<span class="math-parenthesis math-round-parenthesis">)</span>'),$=j,this.step){var Xt=this.step.toHTML(d);_.step&&(Xt='<span class="math-parenthesis math-round-parenthesis">(</span>'+Xt+'<span class="math-parenthesis math-round-parenthesis">)</span>'),$+='<span class="math-operator math-range-operator">:</span>'+Xt}var Lt=this.end.toHTML(d);return _.end&&(Lt='<span class="math-parenthesis math-round-parenthesis">(</span>'+Lt+'<span class="math-parenthesis math-round-parenthesis">)</span>'),$+='<span class="math-operator math-range-operator">:</span>'+Lt,$}_toTex(d){var b=d&&d.parenthesis?d.parenthesis:"keep",_=o(this,b,d&&d.implicit),$=this.start.toTex(d);if(_.start&&($="\\left(".concat($,"\\right)")),this.step){var j=this.step.toTex(d);_.step&&(j="\\left(".concat(j,"\\right)")),$+=":"+j}var Xt=this.end.toTex(d);return _.end&&(Xt="\\left(".concat(Xt,"\\right)")),$+=":"+Xt,$}}return _defineProperty(c,"name",name$1y),c},{isClass:!0,isNode:!0}),name$1x="RelationalNode",dependencies$1x=["Node"],createRelationalNode=factory(name$1x,dependencies$1x,a=>{var{Node:s}=a,o={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class c extends s{constructor(d,b){if(super(),!Array.isArray(d))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(b))throw new TypeError("Parameter params must be an array");if(d.length!==b.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=d,this.params=b}get type(){return name$1x}get isRelationalNode(){return!0}_compile(d,b){var _=this,$=this.params.map(j=>j._compile(d,b));return function(Xt,Lt,fr){for(var Jr,Js=$[0](Xt,Lt,fr),qs=0;qs<_.conditionals.length;qs++){Jr=Js,Js=$[qs+1](Xt,Lt,fr);var zo=getSafeProperty(d,_.conditionals[qs]);if(!zo(Jr,Js))return!1}return!0}}forEach(d){this.params.forEach((b,_)=>d(b,"params["+_+"]",this),this)}map(d){return new c(this.conditionals.slice(),this.params.map((b,_)=>this._ifNode(d(b,"params["+_+"]",this)),this))}clone(){return new c(this.conditionals,this.params)}_toString(d){for(var b=d&&d.parenthesis?d.parenthesis:"keep",_=getPrecedence(this,b,d&&d.implicit),$=this.params.map(function(Lt,fr){var Jr=getPrecedence(Lt,b,d&&d.implicit);return b==="all"||Jr!==null&&Jr<=_?"("+Lt.toString(d)+")":Lt.toString(d)}),j=$[0],Xt=0;Xt<this.conditionals.length;Xt++)j+=" "+o[this.conditionals[Xt]],j+=" "+$[Xt+1];return j}toJSON(){return{mathjs:name$1x,conditionals:this.conditionals,params:this.params}}static fromJSON(d){return new c(d.conditionals,d.params)}_toHTML(d){for(var b=d&&d.parenthesis?d.parenthesis:"keep",_=getPrecedence(this,b,d&&d.implicit),$=this.params.map(function(Lt,fr){var Jr=getPrecedence(Lt,b,d&&d.implicit);return b==="all"||Jr!==null&&Jr<=_?'<span class="math-parenthesis math-round-parenthesis">(</span>'+Lt.toHTML(d)+'<span class="math-parenthesis math-round-parenthesis">)</span>':Lt.toHTML(d)}),j=$[0],Xt=0;Xt<this.conditionals.length;Xt++)j+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+escape$1(o[this.conditionals[Xt]])+"</span>"+$[Xt+1];return j}_toTex(d){for(var b=d&&d.parenthesis?d.parenthesis:"keep",_=getPrecedence(this,b,d&&d.implicit),$=this.params.map(function(Lt,fr){var Jr=getPrecedence(Lt,b,d&&d.implicit);return b==="all"||Jr!==null&&Jr<=_?"\\left("+Lt.toTex(d)+"\right)":Lt.toTex(d)}),j=$[0],Xt=0;Xt<this.conditionals.length;Xt++)j+=latexOperators[this.conditionals[Xt]]+$[Xt+1];return j}}return _defineProperty(c,"name",name$1x),c},{isClass:!0,isNode:!0}),name$1w="SymbolNode",dependencies$1w=["math","?Unit","Node"],createSymbolNode=factory(name$1w,dependencies$1w,a=>{var{math:s,Unit:o,Node:c}=a;function h(b){return o?o.isValuelessUnit(b):!1}class d extends c{constructor(_){if(super(),typeof _!="string")throw new TypeError('String expected for parameter "name"');this.name=_}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(_,$){var j=this.name;if($[j]===!0)return function(Lt,fr,Jr){return getSafeProperty(fr,j)};if(j in _)return function(Lt,fr,Jr){return Lt.has(j)?Lt.get(j):getSafeProperty(_,j)};var Xt=h(j);return function(Lt,fr,Jr){return Lt.has(j)?Lt.get(j):Xt?new o(null,j):d.onUndefinedSymbol(j)}}forEach(_){}map(_){return this.clone()}static onUndefinedSymbol(_){throw new Error("Undefined symbol "+_)}clone(){return new d(this.name)}_toString(_){return this.name}_toHTML(_){var $=escape$1(this.name);return $==="true"||$==="false"?'<span class="math-symbol math-boolean">'+$+"</span>":$==="i"?'<span class="math-symbol math-imaginary-symbol">'+$+"</span>":$==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+$+"</span>":$==="NaN"?'<span class="math-symbol math-nan-symbol">'+$+"</span>":$==="null"?'<span class="math-symbol math-null-symbol">'+$+"</span>":$==="undefined"?'<span class="math-symbol math-undefined-symbol">'+$+"</span>":'<span class="math-symbol">'+$+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(_){return new d(_.name)}_toTex(_){var $=!1;typeof s[this.name]>"u"&&h(this.name)&&($=!0);var j=toSymbol(this.name,$);return j[0]==="\\"?j:" "+j}}return d},{isClass:!0,isNode:!0}),name$1v="FunctionNode",dependencies$1v=["math","Node","SymbolNode"],createFunctionNode=factory(name$1v,dependencies$1v,a=>{var s,{math:o,Node:c,SymbolNode:h}=a,d=$=>format$1($,{truncate:78});function b($,j,Xt){for(var Lt="",fr=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,Jr=0,Js;(Js=fr.exec($))!==null;)if(Lt+=$.substring(Jr,Js.index),Jr=Js.index,Js[0]==="$$")Lt+="$",Jr++;else{Jr+=Js[0].length;var qs=j[Js[1]];if(!qs)throw new ReferenceError("Template: Property "+Js[1]+" does not exist.");if(Js[2]===void 0)switch(typeof qs){case"string":Lt+=qs;break;case"object":if(isNode(qs))Lt+=qs.toTex(Xt);else if(Array.isArray(qs))Lt+=qs.map(function(zo,js){if(isNode(zo))return zo.toTex(Xt);throw new TypeError("Template: "+Js[1]+"["+js+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+Js[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+Js[1]+" has to be a Node, String or array of Nodes")}else if(isNode(qs[Js[2]]&&qs[Js[2]]))Lt+=qs[Js[2]].toTex(Xt);else throw new TypeError("Template: "+Js[1]+"["+Js[2]+"] is not a Node.")}return Lt+=$.slice(Jr),Lt}class _ extends c{constructor(j,Xt,Lt){if(super(),typeof j=="string"&&(j=new h(j)),!isNode(j))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(Xt)||!Xt.every(isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');var fr=typeof Lt;if(!(fr==="undefined"||fr==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=j,this.args=Xt||[],this.optional=!!Lt}get name(){return this.fn.name||""}get type(){return name$1v}get isFunctionNode(){return!0}_compile(j,Xt){var Lt=this.args.map(r1=>r1._compile(j,Xt)),fr=this.optional||isAccessorNode(this.fn)&&this.fn.optionalChaining;if(isSymbolNode(this.fn)){var Jr=this.fn.name;if(Xt[Jr]){var eu=this.args;return function(a1,i1,s1){var c1=getSafeProperty(i1,Jr);if(!(fr&&c1===void 0)){if(typeof c1!="function")throw new TypeError("Argument '".concat(Jr,"' was not a function; received: ").concat(d(c1)));if(c1.rawArgs)return c1(eu,j,createSubScope(a1,i1));var h1=Lt.map(m1=>m1(a1,i1,s1));return c1.apply(c1,h1)}}}else{var Js=Jr in j?getSafeProperty(j,Jr):void 0,qs=typeof Js=="function"&&Js.rawArgs===!0,zo=r1=>{var a1;if(r1.has(Jr))a1=r1.get(Jr);else if(Jr in j)a1=getSafeProperty(j,Jr);else if(fr)a1=void 0;else return _.onUndefinedFunction(Jr);if(typeof a1=="function"||fr&&a1===void 0)return a1;throw new TypeError("'".concat(Jr,`' is not a function; its value is:
  `).concat(d(a1)))};if(qs){var js=this.args;return function(a1,i1,s1){var c1=zo(a1);if(c1.rawArgs===!0)return c1(js,j,createSubScope(a1,i1));var h1=Lt.map(m1=>m1(a1,i1,s1));return c1(...h1)}}else switch(Lt.length){case 0:return function(a1,i1,s1){var c1=zo(a1);if(!(fr&&c1===void 0))return c1()};case 1:return function(a1,i1,s1){var c1=zo(a1);if(!(fr&&c1===void 0)){var h1=Lt[0];return c1(h1(a1,i1,s1))}};case 2:return function(a1,i1,s1){var c1=zo(a1);if(!(fr&&c1===void 0)){var h1=Lt[0],m1=Lt[1];return c1(h1(a1,i1,s1),m1(a1,i1,s1))}};default:return function(a1,i1,s1){var c1=zo(a1);if(!(fr&&c1===void 0)){var h1=Lt.map(m1=>m1(a1,i1,s1));return c1(...h1)}}}}}else if(isAccessorNode(this.fn)&&isIndexNode(this.fn.index)&&this.fn.index.isObjectProperty()){var Oo=this.fn.object._compile(j,Xt),tu=this.fn.index.getObjectProperty(),Bo=this.args;return function(a1,i1,s1){var c1=Oo(a1,i1,s1);if(!(fr&&(c1==null||c1[tu]===void 0))){var h1=getSafeMethod(c1,tu);if(h1!=null&&h1.rawArgs)return h1(Bo,j,createSubScope(a1,i1));var m1=Lt.map(l1=>l1(a1,i1,s1));return h1.apply(c1,m1)}}}else{var vu=this.fn.toString(),t1=this.fn._compile(j,Xt),e1=this.args;return function(a1,i1,s1){var c1=t1(a1,i1,s1);if(!(fr&&c1===void 0)){if(typeof c1!="function")throw new TypeError("Expression '".concat(vu,"' did not evaluate to a function; value is:")+`
  `.concat(d(c1)));if(c1.rawArgs)return c1(e1,j,createSubScope(a1,i1));var h1=Lt.map(m1=>m1(a1,i1,s1));return c1.apply(c1,h1)}}}}forEach(j){j(this.fn,"fn",this);for(var Xt=0;Xt<this.args.length;Xt++)j(this.args[Xt],"args["+Xt+"]",this)}map(j){for(var Xt=this._ifNode(j(this.fn,"fn",this)),Lt=[],fr=0;fr<this.args.length;fr++)Lt[fr]=this._ifNode(j(this.args[fr],"args["+fr+"]",this));return new _(Xt,Lt)}clone(){return new _(this.fn,this.args.slice(0))}toString(j){var Xt,Lt=this.fn.toString(j);return j&&typeof j.handler=="object"&&hasOwnProperty(j.handler,Lt)&&(Xt=j.handler[Lt](this,j)),typeof Xt<"u"?Xt:super.toString(j)}_toString(j){var Xt=this.args.map(function(fr){return fr.toString(j)}),Lt=isFunctionAssignmentNode(this.fn)?"("+this.fn.toString(j)+")":this.fn.toString(j);return Lt+"("+Xt.join(", ")+")"}toJSON(){return{mathjs:name$1v,fn:this.fn,args:this.args}}_toHTML(j){var Xt=this.args.map(function(Lt){return Lt.toHTML(j)});return'<span class="math-function">'+escape$1(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+Xt.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(j){var Xt;return j&&typeof j.handler=="object"&&hasOwnProperty(j.handler,this.name)&&(Xt=j.handler[this.name](this,j)),typeof Xt<"u"?Xt:super.toTex(j)}_toTex(j){var Xt=this.args.map(function(Jr){return Jr.toTex(j)}),Lt;latexFunctions[this.name]&&(Lt=latexFunctions[this.name]),o[this.name]&&(typeof o[this.name].toTex=="function"||typeof o[this.name].toTex=="object"||typeof o[this.name].toTex=="string")&&(Lt=o[this.name].toTex);var fr;switch(typeof Lt){case"function":fr=Lt(this,j);break;case"string":fr=b(Lt,this,j);break;case"object":switch(typeof Lt[Xt.length]){case"function":fr=Lt[Xt.length](this,j);break;case"string":fr=b(Lt[Xt.length],this,j);break}}return typeof fr<"u"?fr:b(defaultTemplate,this,j)}getIdentifier(){return this.type+":"+this.name}}return s=_,_defineProperty(_,"name",name$1v),_defineProperty(_,"onUndefinedFunction",function($){throw new Error("Undefined function "+$)}),_defineProperty(_,"fromJSON",function($){return new s($.fn,$.args)}),_},{isClass:!0,isNode:!0}),name$1u="parse",dependencies$1u=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],createParse=factory(name$1u,dependencies$1u,a=>{var{typed:s,numeric:o,config:c,AccessorNode:h,ArrayNode:d,AssignmentNode:b,BlockNode:_,ConditionalNode:$,ConstantNode:j,FunctionAssignmentNode:Xt,FunctionNode:Lt,IndexNode:fr,ObjectNode:Jr,OperatorNode:Js,ParenthesisNode:qs,RangeNode:zo,RelationalNode:js,SymbolNode:eu}=a,Oo=s(name$1u,{string:function(k1){return C1(k1,{})},"Array | Matrix":function(k1){return tu(k1,{})},"string, Object":function(k1,I1){var U1=I1.nodes!==void 0?I1.nodes:{};return C1(k1,U1)},"Array | Matrix, Object":tu});function tu(u1){var k1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I1=k1.nodes!==void 0?k1.nodes:{};return deepMap(u1,function(U1){if(typeof U1!="string")throw new TypeError("String expected");return C1(U1,I1)})}var Bo={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},vu={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},t1={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},e1={true:!0,false:!1,null:null,undefined:void 0},r1=["NaN","Infinity"],a1={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function i1(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:Bo.NULL,nestingLevel:0,conditionalLevel:null}}function s1(u1,k1){return u1.expression.substr(u1.index,k1)}function c1(u1){return s1(u1,1)}function h1(u1){u1.index++}function m1(u1){return u1.expression.charAt(u1.index-1)}function l1(u1){return u1.expression.charAt(u1.index+1)}function f1(u1){for(u1.tokenType=Bo.NULL,u1.token="",u1.comment="";;){if(c1(u1)==="#")for(;c1(u1)!==`
`&&c1(u1)!=="";)u1.comment+=c1(u1),h1(u1);if(Oo.isWhitespace(c1(u1),u1.nestingLevel))h1(u1);else break}if(c1(u1)===""){u1.tokenType=Bo.DELIMITER;return}if(c1(u1)===`
`&&!u1.nestingLevel){u1.tokenType=Bo.DELIMITER,u1.token=c1(u1),h1(u1);return}var k1=c1(u1),I1=s1(u1,2),U1=s1(u1,3);if(U1.length===3&&vu[U1]){u1.tokenType=Bo.DELIMITER,u1.token=U1,h1(u1),h1(u1),h1(u1);return}if(I1.length===2&&vu[I1]&&(I1!=="?."||!Oo.isDigit(u1.expression.charAt(u1.index+2)))){u1.tokenType=Bo.DELIMITER,u1.token=I1,h1(u1),h1(u1);return}if(vu[k1]){u1.tokenType=Bo.DELIMITER,u1.token=k1,h1(u1);return}if(Oo.isDigitDot(k1)){u1.tokenType=Bo.NUMBER;var iv=s1(u1,2);if(iv==="0b"||iv==="0o"||iv==="0x"){for(u1.token+=c1(u1),h1(u1),u1.token+=c1(u1),h1(u1);Oo.isAlpha(c1(u1),m1(u1),l1(u1))||Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);if(c1(u1)===".")for(u1.token+=".",h1(u1);Oo.isAlpha(c1(u1),m1(u1),l1(u1))||Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);else if(c1(u1)==="i")for(u1.token+="i",h1(u1);Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);return}if(c1(u1)==="."){if(u1.token+=c1(u1),h1(u1),!Oo.isDigit(c1(u1))){u1.tokenType=Bo.DELIMITER;return}}else{for(;Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);Oo.isDecimalMark(c1(u1),l1(u1))&&(u1.token+=c1(u1),h1(u1))}for(;Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);if(c1(u1)==="E"||c1(u1)==="e"){if(Oo.isDigit(l1(u1))||l1(u1)==="-"||l1(u1)==="+"){if(u1.token+=c1(u1),h1(u1),(c1(u1)==="+"||c1(u1)==="-")&&(u1.token+=c1(u1),h1(u1)),!Oo.isDigit(c1(u1)))throw R1(u1,'Digit expected, got "'+c1(u1)+'"');for(;Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);if(Oo.isDecimalMark(c1(u1),l1(u1)))throw R1(u1,'Digit expected, got "'+c1(u1)+'"')}else if(Oo.isDecimalMark(l1(u1),u1.expression.charAt(u1.index+2)))throw h1(u1),R1(u1,'Digit expected, got "'+c1(u1)+'"')}return}if(Oo.isAlpha(c1(u1),m1(u1),l1(u1))){for(;Oo.isAlpha(c1(u1),m1(u1),l1(u1))||Oo.isDigit(c1(u1));)u1.token+=c1(u1),h1(u1);hasOwnProperty(t1,u1.token)?u1.tokenType=Bo.DELIMITER:u1.tokenType=Bo.SYMBOL;return}for(u1.tokenType=Bo.UNKNOWN;c1(u1)!=="";)u1.token+=c1(u1),h1(u1);throw R1(u1,'Syntax error in part "'+u1.token+'"')}function p1(u1){do f1(u1);while(u1.token===`
`)}function d1(u1){u1.nestingLevel++}function b1(u1){u1.nestingLevel--}Oo.isAlpha=function(k1,I1,U1){return Oo.isValidLatinOrGreek(k1)||Oo.isValidMathSymbol(k1,U1)||Oo.isValidMathSymbol(I1,k1)},Oo.isValidLatinOrGreek=function(k1){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(k1)},Oo.isValidMathSymbol=function(k1,I1){return/^[\uD835]$/.test(k1)&&/^[\uDC00-\uDFFF]$/.test(I1)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(I1)},Oo.isWhitespace=function(k1,I1){return k1===" "||k1==="	"||k1===""||k1===`
`&&I1>0},Oo.isDecimalMark=function(k1,I1){return k1==="."&&I1!=="/"&&I1!=="*"&&I1!=="^"},Oo.isDigitDot=function(k1){return k1>="0"&&k1<="9"||k1==="."},Oo.isDigit=function(k1){return k1>="0"&&k1<="9"};function C1(u1,k1){var I1=i1();_extends$1(I1,{expression:u1,extraNodes:k1}),f1(I1);var U1=g1(I1);if(I1.token!=="")throw I1.tokenType===Bo.DELIMITER?K1(I1,"Unexpected operator "+I1.token):R1(I1,'Unexpected part "'+I1.token+'"');return U1}function g1(u1){var k1,I1=[],U1;for(u1.token!==""&&u1.token!==`
`&&u1.token!==";"&&(k1=o1(u1),u1.comment&&(k1.comment=u1.comment));u1.token===`
`||u1.token===";";)I1.length===0&&k1&&(U1=u1.token!==";",I1.push({node:k1,visible:U1})),f1(u1),u1.token!==`
`&&u1.token!==";"&&u1.token!==""&&(k1=o1(u1),u1.comment&&(k1.comment=u1.comment),U1=u1.token!==";",I1.push({node:k1,visible:U1}));return I1.length>0?new _(I1):(k1||(k1=new j(void 0),u1.comment&&(k1.comment=u1.comment)),k1)}function o1(u1){var k1,I1,U1,iv,tv=S1(u1);if(u1.token==="="){if(isSymbolNode(tv))return k1=tv.name,p1(u1),U1=o1(u1),new b(new eu(k1),U1);if(isAccessorNode(tv)){if(tv.optionalChaining)throw R1(u1,"Cannot assign to optional chain");return p1(u1),U1=o1(u1),new b(tv.object,tv.index,U1)}else if(isFunctionNode(tv)&&isSymbolNode(tv.fn)&&(iv=!0,I1=[],k1=tv.name,tv.args.forEach(function(av,hv){isSymbolNode(av)?I1[hv]=av.name:iv=!1}),iv))return p1(u1),U1=o1(u1),new Xt(k1,I1,U1);throw R1(u1,"Invalid left hand side of assignment operator =")}return tv}function S1(u1){for(var k1=v1(u1);u1.token==="?";){var I1=u1.conditionalLevel;u1.conditionalLevel=u1.nestingLevel,p1(u1);var U1=k1,iv=o1(u1);if(u1.token!==":")throw R1(u1,"False part of conditional expression expected");u1.conditionalLevel=null,p1(u1);var tv=o1(u1);k1=new $(U1,iv,tv),u1.conditionalLevel=I1}return k1}function v1(u1){for(var k1=B1(u1);u1.token==="or";)p1(u1),k1=new Js("or","or",[k1,B1(u1)]);return k1}function B1(u1){for(var k1=T1(u1);u1.token==="xor";)p1(u1),k1=new Js("xor","xor",[k1,T1(u1)]);return k1}function T1(u1){for(var k1=w1(u1);u1.token==="and";)p1(u1),k1=new Js("and","and",[k1,w1(u1)]);return k1}function w1(u1){for(var k1=x1(u1);u1.token==="|";)p1(u1),k1=new Js("|","bitOr",[k1,x1(u1)]);return k1}function x1(u1){for(var k1=M1(u1);u1.token==="^|";)p1(u1),k1=new Js("^|","bitXor",[k1,M1(u1)]);return k1}function M1(u1){for(var k1=O1(u1);u1.token==="&";)p1(u1),k1=new Js("&","bitAnd",[k1,O1(u1)]);return k1}function O1(u1){for(var k1=[N1(u1)],I1=[],U1={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};hasOwnProperty(U1,u1.token);){var iv={name:u1.token,fn:U1[u1.token]};I1.push(iv),p1(u1),k1.push(N1(u1))}return k1.length===1?k1[0]:k1.length===2?new Js(I1[0].name,I1[0].fn,k1):new js(I1.map(tv=>tv.fn),k1)}function N1(u1){var k1,I1,U1,iv;k1=L1(u1);for(var tv={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};hasOwnProperty(tv,u1.token);)I1=u1.token,U1=tv[I1],p1(u1),iv=[k1,L1(u1)],k1=new Js(I1,U1,iv);return k1}function L1(u1){var k1,I1,U1,iv;k1=G1(u1);for(var tv={to:"to",in:"to"};hasOwnProperty(tv,u1.token);)I1=u1.token,U1=tv[I1],p1(u1),I1==="in"&&"])},;".includes(u1.token)?k1=new Js("*","multiply",[k1,new eu("in")],!0):(iv=[k1,G1(u1)],k1=new Js(I1,U1,iv));return k1}function G1(u1){var k1,I1=[];if(u1.token===":"?k1=new j(1):k1=q1(u1),u1.token===":"&&u1.conditionalLevel!==u1.nestingLevel){for(I1.push(k1);u1.token===":"&&I1.length<3;)p1(u1),u1.token===")"||u1.token==="]"||u1.token===","||u1.token===""?I1.push(new eu("end")):I1.push(q1(u1));I1.length===3?k1=new zo(I1[0],I1[2],I1[1]):k1=new zo(I1[0],I1[1])}return k1}function q1(u1){var k1,I1,U1,iv;k1=H1(u1);for(var tv={"+":"add","-":"subtract"};hasOwnProperty(tv,u1.token);){I1=u1.token,U1=tv[I1],p1(u1);var av=H1(u1);av.isPercentage?iv=[k1,new Js("*","multiply",[k1,av])]:iv=[k1,av],k1=new Js(I1,U1,iv)}return k1}function H1(u1){var k1,I1,U1,iv;k1=W1(u1),I1=k1;for(var tv={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};hasOwnProperty(tv,u1.token);)U1=u1.token,iv=tv[U1],p1(u1),I1=W1(u1),k1=new Js(U1,iv,[k1,I1]);return k1}function W1(u1){var k1,I1;for(k1=j1(u1),I1=k1;u1.tokenType===Bo.SYMBOL||u1.token==="in"&&isConstantNode(k1)||u1.token==="in"&&isOperatorNode(k1)&&k1.fn==="unaryMinus"&&isConstantNode(k1.args[0])||u1.tokenType===Bo.NUMBER&&!isConstantNode(I1)&&(!isOperatorNode(I1)||I1.op==="!")||u1.token==="(";)I1=j1(u1),k1=new Js("*","multiply",[k1,I1],!0);return k1}function j1(u1){for(var k1=Q1(u1),I1=k1,U1=[];u1.token==="/"&&rule2Node(I1);)if(U1.push(_extends$1({},u1)),p1(u1),u1.tokenType===Bo.NUMBER)if(U1.push(_extends$1({},u1)),p1(u1),u1.tokenType===Bo.SYMBOL||u1.token==="("||u1.token==="in")_extends$1(u1,U1.pop()),U1.pop(),I1=Q1(u1),k1=new Js("/","divide",[k1,I1]);else{U1.pop(),_extends$1(u1,U1.pop());break}else{_extends$1(u1,U1.pop());break}return k1}function Q1(u1){var k1=rv(u1);if(u1.token==="%"){var I1=_extends$1({},u1);p1(u1);try{rv(u1),_extends$1(u1,I1)}catch{k1=new Js("/","divide",[k1,new j(100)],!1,!0)}}return k1}function rv(u1){var k1,I1,U1,iv={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return hasOwnProperty(iv,u1.token)?(U1=iv[u1.token],k1=u1.token,p1(u1),I1=[rv(u1)],new Js(k1,U1,I1)):$1(u1)}function $1(u1){var k1,I1,U1,iv;return k1=A1(u1),(u1.token==="^"||u1.token===".^")&&(I1=u1.token,U1=I1==="^"?"pow":"dotPow",p1(u1),iv=[k1,rv(u1)],k1=new Js(I1,U1,iv)),k1}function A1(u1){for(var k1=y1(u1);u1.token==="??";)p1(u1),k1=new Js("??","nullish",[k1,y1(u1)]);return k1}function y1(u1){var k1,I1,U1,iv;k1=_1(u1);for(var tv={"!":"factorial","'":"ctranspose"};hasOwnProperty(tv,u1.token);)I1=u1.token,U1=tv[I1],f1(u1),iv=[k1],k1=new Js(I1,U1,iv),k1=E1(u1,k1);return k1}function _1(u1){var k1=[];if(u1.tokenType===Bo.SYMBOL&&hasOwnProperty(u1.extraNodes,u1.token)){var I1=u1.extraNodes[u1.token];if(f1(u1),u1.token==="("){if(k1=[],d1(u1),f1(u1),u1.token!==")")for(k1.push(o1(u1));u1.token===",";)f1(u1),k1.push(o1(u1));if(u1.token!==")")throw R1(u1,"Parenthesis ) expected");b1(u1),f1(u1)}return new I1(k1)}return D1(u1)}function D1(u1){var k1,I1;return u1.tokenType===Bo.SYMBOL||u1.tokenType===Bo.DELIMITER&&u1.token in t1?(I1=u1.token,f1(u1),hasOwnProperty(e1,I1)?k1=new j(e1[I1]):r1.includes(I1)?k1=new j(o(I1,"number")):k1=new eu(I1),k1=E1(u1,k1),k1):P1(u1)}function E1(u1,k1,I1){for(var U1;;){var iv=!1;u1.token==="?."&&(iv=!0,f1(u1));var tv=(u1.token==="("||u1.token==="["||u1.token===".")&&!0;if(!(iv||tv))break;if(U1=[],u1.token==="(")if(iv||isSymbolNode(k1)||isAccessorNode(k1)){if(d1(u1),f1(u1),u1.token!==")")for(U1.push(o1(u1));u1.token===",";)f1(u1),U1.push(o1(u1));if(u1.token!==")")throw R1(u1,"Parenthesis ) expected");b1(u1),f1(u1),k1=new Lt(k1,U1,iv)}else return k1;else if(u1.token==="["){if(d1(u1),f1(u1),u1.token!=="]")for(U1.push(o1(u1));u1.token===",";)f1(u1),U1.push(o1(u1));if(u1.token!=="]")throw R1(u1,"Parenthesis ] expected");b1(u1),f1(u1),k1=new h(k1,new fr(U1),iv)}else{iv||f1(u1);var av=u1.tokenType===Bo.SYMBOL||u1.tokenType===Bo.DELIMITER&&u1.token in t1;if(!av){var hv="Property name expected after ";throw hv+=iv?"optional chain":"dot",R1(u1,hv)}U1.push(new j(u1.token)),f1(u1);var yv=!0;k1=new h(k1,new fr(U1,yv),iv)}}return k1}function P1(u1){var k1,I1;return u1.token==='"'||u1.token==="'"?(I1=X1(u1,u1.token),k1=new j(I1),k1=E1(u1,k1),k1):V1(u1)}function X1(u1,k1){for(var I1="";c1(u1)!==""&&c1(u1)!==k1;)if(c1(u1)==="\\"){h1(u1);var U1=c1(u1),iv=a1[U1];if(iv!==void 0)I1+=iv,u1.index+=1;else if(U1==="u"){var tv=u1.expression.slice(u1.index+1,u1.index+5);if(/^[0-9A-Fa-f]{4}$/.test(tv))I1+=String.fromCharCode(parseInt(tv,16)),u1.index+=5;else throw R1(u1,"Invalid unicode character \\u".concat(tv))}else throw R1(u1,"Bad escape character \\".concat(U1))}else I1+=c1(u1),h1(u1);if(f1(u1),u1.token!==k1)throw R1(u1,"End of string ".concat(k1," expected"));return f1(u1),I1}function V1(u1){var k1,I1,U1,iv;if(u1.token==="["){if(d1(u1),f1(u1),u1.token!=="]"){var tv=F1(u1);if(u1.token===";"){for(U1=1,I1=[tv];u1.token===";";)f1(u1),u1.token!=="]"&&(I1[U1]=F1(u1),U1++);if(u1.token!=="]")throw R1(u1,"End of matrix ] expected");b1(u1),f1(u1),iv=I1[0].items.length;for(var av=1;av<U1;av++)if(I1[av].items.length!==iv)throw K1(u1,"Column dimensions mismatch ("+I1[av].items.length+" !== "+iv+")");k1=new d(I1)}else{if(u1.token!=="]")throw R1(u1,"End of matrix ] expected");b1(u1),f1(u1),k1=tv}}else b1(u1),f1(u1),k1=new d([]);return E1(u1,k1)}return z1(u1)}function F1(u1){for(var k1=[o1(u1)],I1=1;u1.token===",";)f1(u1),u1.token!=="]"&&u1.token!==";"&&(k1[I1]=o1(u1),I1++);return new d(k1)}function z1(u1){if(u1.token==="{"){d1(u1);var k1,I1={};do if(f1(u1),u1.token!=="}"){if(u1.token==='"'||u1.token==="'")k1=X1(u1,u1.token);else if(u1.tokenType===Bo.SYMBOL||u1.tokenType===Bo.DELIMITER&&u1.token in t1)k1=u1.token,f1(u1);else throw R1(u1,"Symbol or string expected as object key");if(u1.token!==":")throw R1(u1,"Colon : expected after object key");f1(u1),I1[k1]=o1(u1)}while(u1.token===",");if(u1.token!=="}")throw R1(u1,"Comma , or bracket } expected after object value");b1(u1),f1(u1);var U1=new Jr(I1);return U1=E1(u1,U1),U1}return J1(u1)}function J1(u1){var k1;if(u1.tokenType===Bo.NUMBER){k1=u1.token,f1(u1);var I1=safeNumberType(k1,c),U1=o(k1,I1);return new j(U1)}return Y1(u1)}function Y1(u1){var k1;if(u1.token==="("){if(d1(u1),f1(u1),k1=o1(u1),u1.token!==")")throw R1(u1,"Parenthesis ) expected");return b1(u1),f1(u1),k1=new qs(k1),k1=E1(u1,k1),k1}return ev(u1)}function ev(u1){throw u1.token===""?R1(u1,"Unexpected end of expression"):R1(u1,"Value expected")}function Z1(u1){return u1.index-u1.token.length+1}function R1(u1,k1){var I1=Z1(u1),U1=new SyntaxError(k1+" (char "+I1+")");return U1.char=I1,U1}function K1(u1,k1){var I1=Z1(u1),U1=new SyntaxError(k1+" (char "+I1+")");return U1.char=I1,U1}return s.addConversion({from:"string",to:"Node",convert:Oo}),Oo}),name$1t="compile",dependencies$1t=["typed","parse"],createCompile=factory(name$1t,dependencies$1t,a=>{var{typed:s,parse:o}=a;return s(name$1t,{string:function(h){return o(h).compile()},"Array | Matrix":function(h){return deepMap(h,function(d){return o(d).compile()})}})}),name$1s="evaluate",dependencies$1s=["typed","parse"],createEvaluate=factory(name$1s,dependencies$1s,a=>{var{typed:s,parse:o}=a;return s(name$1s,{string:function(h){var d=createEmptyMap();return o(h).compile().evaluate(d)},"string, Map | Object":function(h,d){return o(h).compile().evaluate(d)},"Array | Matrix":function(h){var d=createEmptyMap();return deepMap(h,function(b){return o(b).compile().evaluate(d)})},"Array | Matrix, Map | Object":function(h,d){return deepMap(h,function(b){return o(b).compile().evaluate(d)})}})}),name$1r="Parser",dependencies$1r=["evaluate","parse"],createParserClass=factory(name$1r,dependencies$1r,a=>{var{evaluate:s,parse:o}=a;function c(){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:createEmptyMap(),writable:!1})}c.prototype.type="Parser",c.prototype.isParser=!0,c.prototype.evaluate=function(d){return s(d,this.scope)},c.prototype.get=function(d){if(this.scope.has(d))return this.scope.get(d)},c.prototype.getAll=function(){return toObject(this.scope)},c.prototype.getAllAsMap=function(){return this.scope};function h(d){if(d.length===0)return!1;for(var b=0;b<d.length;b++){var _=d.charAt(b-1),$=d.charAt(b),j=d.charAt(b+1),Xt=o.isAlpha($,_,j)||b>0&&o.isDigit($);if(!Xt)return!1}return!0}return c.prototype.set=function(d,b){if(!h(d))throw new Error("Invalid variable name: '".concat(d,"'. Variable names must follow the specified rules."));return this.scope.set(d,b),b},c.prototype.remove=function(d){this.scope.delete(d)},c.prototype.clear=function(){this.scope.clear()},c.prototype.toJSON=function(){var d={mathjs:"Parser",variables:{},functions:{}};for(var[b,_]of this.scope)if(isFunction(_)){if(!isExpressionFunction(_))throw new Error("Cannot serialize external function ".concat(b));d.functions[b]="".concat(_.syntax," = ").concat(_.expr)}else d.variables[b]=_;return d},c.fromJSON=function(d){var b=new c;return Object.entries(d.variables).forEach(_=>{var[$,j]=_;return b.set($,j)}),Object.entries(d.functions).forEach(_=>{var[$,j]=_;return b.evaluate(j)}),b},c},{isClass:!0});function isExpressionFunction(a){return typeof a=="function"&&typeof a.syntax=="string"&&typeof a.expr=="string"}var name$1q="parser",dependencies$1q=["typed","Parser"],createParser=factory(name$1q,dependencies$1q,a=>{var{typed:s,Parser:o}=a;return s(name$1q,{"":function(){return new o}})}),name$1p="lup",dependencies$1p=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],createLup=factory(name$1p,dependencies$1p,a=>{var{typed:s,matrix:o,abs:c,addScalar:h,divideScalar:d,multiplyScalar:b,subtractScalar:_,larger:$,equalScalar:j,unaryMinus:Xt,DenseMatrix:Lt,SparseMatrix:fr,Spa:Jr}=a;return s(name$1p,{DenseMatrix:function(js){return Js(js)},SparseMatrix:function(js){return qs(js)},Array:function(js){var eu=o(js),Oo=Js(eu);return{L:Oo.L.valueOf(),U:Oo.U.valueOf(),p:Oo.p}}});function Js(zo){var js=zo._size[0],eu=zo._size[1],Oo=Math.min(js,eu),tu=clone$3(zo._data),Bo=[],vu=[js,Oo],t1=[],e1=[Oo,eu],r1,a1,i1,s1=[];for(r1=0;r1<js;r1++)s1[r1]=r1;for(a1=0;a1<eu;a1++){if(a1>0)for(r1=0;r1<js;r1++){var c1=Math.min(r1,a1),h1=0;for(i1=0;i1<c1;i1++)h1=h(h1,b(tu[r1][i1],tu[i1][a1]));tu[r1][a1]=_(tu[r1][a1],h1)}var m1=a1,l1=0,f1=0;for(r1=a1;r1<js;r1++){var p1=tu[r1][a1],d1=c(p1);$(d1,l1)&&(m1=r1,l1=d1,f1=p1)}if(a1!==m1&&(s1[a1]=[s1[m1],s1[m1]=s1[a1]][0],Lt._swapRows(a1,m1,tu)),a1<js)for(r1=a1+1;r1<js;r1++){var b1=tu[r1][a1];j(b1,0)||(tu[r1][a1]=d(tu[r1][a1],f1))}}for(a1=0;a1<eu;a1++)for(r1=0;r1<js;r1++){if(a1===0&&(r1<eu&&(t1[r1]=[]),Bo[r1]=[]),r1<a1){r1<eu&&(t1[r1][a1]=tu[r1][a1]),a1<js&&(Bo[r1][a1]=0);continue}if(r1===a1){r1<eu&&(t1[r1][a1]=tu[r1][a1]),a1<js&&(Bo[r1][a1]=1);continue}r1<eu&&(t1[r1][a1]=0),a1<js&&(Bo[r1][a1]=tu[r1][a1])}var C1=new Lt({data:Bo,size:vu}),g1=new Lt({data:t1,size:e1}),o1=[];for(r1=0,Oo=s1.length;r1<Oo;r1++)o1[s1[r1]]=r1;return{L:C1,U:g1,p:o1,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function qs(zo){var js=zo._size[0],eu=zo._size[1],Oo=Math.min(js,eu),tu=zo._values,Bo=zo._index,vu=zo._ptr,t1=[],e1=[],r1=[],a1=[js,Oo],i1=[],s1=[],c1=[],h1=[Oo,eu],m1,l1,f1,p1=[],d1=[];for(m1=0;m1<js;m1++)p1[m1]=m1,d1[m1]=m1;var b1=function(o1,S1){var v1=d1[o1],B1=d1[S1];p1[v1]=S1,p1[B1]=o1,d1[o1]=B1,d1[S1]=v1},C1=function(){var o1=new Jr;l1<js&&(r1.push(t1.length),t1.push(1),e1.push(l1)),c1.push(i1.length);var S1=vu[l1],v1=vu[l1+1];for(f1=S1;f1<v1;f1++)m1=Bo[f1],o1.set(p1[m1],tu[f1]);l1>0&&o1.forEach(0,l1-1,function(x1,M1){fr._forEachRow(x1,t1,e1,r1,function(O1,N1){O1>x1&&o1.accumulate(O1,Xt(b(N1,M1)))})});var B1=l1,T1=o1.get(l1),w1=c(T1);o1.forEach(l1+1,js-1,function(x1,M1){var O1=c(M1);$(O1,w1)&&(B1=x1,w1=O1,T1=M1)}),l1!==B1&&(fr._swapRows(l1,B1,a1[1],t1,e1,r1),fr._swapRows(l1,B1,h1[1],i1,s1,c1),o1.swap(l1,B1),b1(l1,B1)),o1.forEach(0,js-1,function(x1,M1){x1<=l1?(i1.push(M1),s1.push(x1)):(M1=d(M1,T1),j(M1,0)||(t1.push(M1),e1.push(x1)))})};for(l1=0;l1<eu;l1++)C1();return c1.push(i1.length),r1.push(t1.length),{L:new fr({values:t1,index:e1,ptr:r1,size:a1}),U:new fr({values:i1,index:s1,ptr:c1,size:h1}),p:p1,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),name$1o="qr",dependencies$1o=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],createQr=factory(name$1o,dependencies$1o,a=>{var{typed:s,matrix:o,zeros:c,identity:h,isZero:d,equal:b,sign:_,sqrt:$,conj:j,unaryMinus:Xt,addScalar:Lt,divideScalar:fr,multiplyScalar:Jr,subtractScalar:Js,complex:qs}=a;return _extends$1(s(name$1o,{DenseMatrix:function(tu){return js(tu)},SparseMatrix:function(tu){return eu()},Array:function(tu){var Bo=o(tu),vu=js(Bo);return{Q:vu.Q.valueOf(),R:vu.R.valueOf()}}}),{_denseQRimpl:zo});function zo(Oo){var tu=Oo._size[0],Bo=Oo._size[1],vu=h([tu],"dense"),t1=vu._data,e1=Oo.clone(),r1=e1._data,a1,i1,s1,c1=c([tu],"");for(s1=0;s1<Math.min(Bo,tu);++s1){var h1=r1[s1][s1],m1=Xt(b(h1,0)?1:_(h1)),l1=j(m1),f1=0;for(a1=s1;a1<tu;a1++)f1=Lt(f1,Jr(r1[a1][s1],j(r1[a1][s1])));var p1=Jr(m1,$(f1));if(!d(p1)){var d1=Js(h1,p1);for(c1[s1]=1,a1=s1+1;a1<tu;a1++)c1[a1]=fr(r1[a1][s1],d1);var b1=Xt(j(fr(d1,p1))),C1=void 0;for(i1=s1;i1<Bo;i1++){for(C1=0,a1=s1;a1<tu;a1++)C1=Lt(C1,Jr(j(c1[a1]),r1[a1][i1]));for(C1=Jr(C1,b1),a1=s1;a1<tu;a1++)r1[a1][i1]=Jr(Js(r1[a1][i1],Jr(c1[a1],C1)),l1)}for(a1=0;a1<tu;a1++){for(C1=0,i1=s1;i1<tu;i1++)C1=Lt(C1,Jr(t1[a1][i1],c1[i1]));for(C1=Jr(C1,b1),i1=s1;i1<tu;++i1)t1[a1][i1]=fr(Js(t1[a1][i1],Jr(C1,j(c1[i1]))),l1)}}}return{Q:vu,R:e1,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function js(Oo){var tu=zo(Oo),Bo=tu.R._data;if(Oo._data.length>0)for(var vu=Bo[0][0].type==="Complex"?qs(0):0,t1=0;t1<Bo.length;++t1)for(var e1=0;e1<t1&&e1<(Bo[0]||[]).length;++e1)Bo[t1][e1]=vu;return tu}function eu(Oo){throw new Error("qr not implemented for sparse matrices yet")}});function csPermute(a,s,o,c){a._values;for(var h=a._index,d=a._ptr,b=a._size,_=a._datatype,$=b[0],j=b[1],Xt=null,Lt=[],fr=[],Jr=0,Js=0;Js<j;Js++){fr[Js]=Jr;for(var qs=o?o[Js]:Js,zo=d[qs],js=d[qs+1],eu=zo;eu<js;eu++){var Oo=h[eu];Lt[Jr]=Oo,Jr++}}return fr[j]=Jr,a.createSparseMatrix({values:Xt,index:Lt,ptr:fr,size:[$,j],datatype:_})}function csTdfs(a,s,o,c,h,d,b){var _=0;for(o[b]=a;_>=0;){var $=o[b+_],j=o[c+$];j===-1?(_--,d[s++]=$):(o[c+$]=o[h+j],++_,o[b+_]=j)}return s}function csPost(a,s){if(!a)return null;var o=0,c,h=[],d=[],b=0,_=s,$=2*s;for(c=0;c<s;c++)d[b+c]=-1;for(c=s-1;c>=0;c--)a[c]!==-1&&(d[_+c]=d[b+a[c]],d[b+a[c]]=c);for(c=0;c<s;c++)a[c]===-1&&(o=csTdfs(c,o,d,b,_,h,$));return h}function csEtree(a,s){if(!a)return null;var o=a._index,c=a._ptr,h=a._size,d=h[0],b=h[1],_=[],$=[],j=0,Xt=b,Lt,fr;for(Lt=0;Lt<d;Lt++)$[Xt+Lt]=-1;for(var Jr=0;Jr<b;Jr++){_[Jr]=-1,$[j+Jr]=-1;for(var Js=c[Jr],qs=c[Jr+1],zo=Js;zo<qs;zo++){var js=o[zo];for(Lt=$[Xt+js];Lt!==-1&&Lt<Jr;Lt=fr)fr=$[j+Lt],$[j+Lt]=Jr,fr===-1&&(_[Lt]=Jr);$[Xt+js]=Jr}}return _}function csFkeep(a,s,o){for(var c=a._values,h=a._index,d=a._ptr,b=a._size,_=b[1],$=0,j=0;j<_;j++){var Xt=d[j];for(d[j]=$;Xt<d[j+1];Xt++)s(h[Xt],j,c?c[Xt]:1,o)&&(h[$]=h[Xt],c&&(c[$]=c[Xt]),$++)}return d[_]=$,h.splice($,h.length-$),c&&c.splice($,c.length-$),$}function csFlip(a){return-a-2}var name$1n="csAmd",dependencies$1n=["add","multiply","transpose"],createCsAmd=factory(name$1n,dependencies$1n,a=>{var{add:s,multiply:o,transpose:c}=a;return function(Xt,Lt){if(!Lt||Xt<=0||Xt>3)return null;var fr=Lt._size,Jr=fr[0],Js=fr[1],qs=0,zo=Math.max(16,10*Math.sqrt(Js));zo=Math.min(Js-2,zo);var js=h(Xt,Lt,Jr,Js,zo);csFkeep(js,$,null);for(var eu=js._index,Oo=js._ptr,tu=Oo[Js],Bo=[],vu=[],t1=0,e1=Js+1,r1=2*(Js+1),a1=3*(Js+1),i1=4*(Js+1),s1=5*(Js+1),c1=6*(Js+1),h1=7*(Js+1),m1=Bo,l1=d(Js,Oo,vu,t1,a1,m1,r1,h1,e1,c1,i1,s1),f1=b(Js,Oo,vu,s1,i1,c1,zo,e1,a1,m1,r1),p1=0,d1,b1,C1,g1,o1,S1,v1,B1,T1,w1,x1,M1,O1,N1,L1,G1;f1<Js;){for(C1=-1;p1<Js&&(C1=vu[a1+p1])===-1;p1++);vu[r1+C1]!==-1&&(m1[vu[r1+C1]]=-1),vu[a1+p1]=vu[r1+C1];var q1=vu[i1+C1],H1=vu[e1+C1];f1+=H1;var W1=0;vu[e1+C1]=-H1;var j1=Oo[C1],Q1=q1===0?j1:tu,rv=Q1;for(g1=1;g1<=q1+1;g1++){for(g1>q1?(S1=C1,v1=j1,B1=vu[t1+C1]-q1):(S1=eu[j1++],v1=Oo[S1],B1=vu[t1+S1]),o1=1;o1<=B1;o1++)d1=eu[v1++],!((T1=vu[e1+d1])<=0)&&(W1+=T1,vu[e1+d1]=-T1,eu[rv++]=d1,vu[r1+d1]!==-1&&(m1[vu[r1+d1]]=m1[d1]),m1[d1]!==-1?vu[r1+m1[d1]]=vu[r1+d1]:vu[a1+vu[s1+d1]]=vu[r1+d1]);S1!==C1&&(Oo[S1]=csFlip(C1),vu[c1+S1]=0)}for(q1!==0&&(tu=rv),vu[s1+C1]=W1,Oo[C1]=Q1,vu[t1+C1]=rv-Q1,vu[i1+C1]=-2,l1=_(l1,qs,vu,c1,Js),w1=Q1;w1<rv;w1++)if(d1=eu[w1],!((x1=vu[i1+d1])<=0)){T1=-vu[e1+d1];var $1=l1-T1;for(j1=Oo[d1],M1=Oo[d1]+x1-1;j1<=M1;j1++)S1=eu[j1],vu[c1+S1]>=l1?vu[c1+S1]-=T1:vu[c1+S1]!==0&&(vu[c1+S1]=vu[s1+S1]+$1)}for(w1=Q1;w1<rv;w1++){for(d1=eu[w1],M1=Oo[d1],O1=M1+vu[i1+d1]-1,N1=M1,L1=0,G1=0,j1=M1;j1<=O1;j1++)if(S1=eu[j1],vu[c1+S1]!==0){var A1=vu[c1+S1]-l1;A1>0?(G1+=A1,eu[N1++]=S1,L1+=S1):(Oo[S1]=csFlip(C1),vu[c1+S1]=0)}vu[i1+d1]=N1-M1+1;var y1=N1,_1=M1+vu[t1+d1];for(j1=O1+1;j1<_1;j1++){b1=eu[j1];var D1=vu[e1+b1];D1<=0||(G1+=D1,eu[N1++]=b1,L1+=b1)}G1===0?(Oo[d1]=csFlip(C1),T1=-vu[e1+d1],W1-=T1,H1+=T1,f1+=T1,vu[e1+d1]=0,vu[i1+d1]=-1):(vu[s1+d1]=Math.min(vu[s1+d1],G1),eu[N1]=eu[y1],eu[y1]=eu[M1],eu[M1]=C1,vu[t1+d1]=N1-M1+1,L1=(L1<0?-L1:L1)%Js,vu[r1+d1]=vu[h1+L1],vu[h1+L1]=d1,m1[d1]=L1)}for(vu[s1+C1]=W1,qs=Math.max(qs,W1),l1=_(l1+qs,qs,vu,c1,Js),w1=Q1;w1<rv;w1++)if(d1=eu[w1],!(vu[e1+d1]>=0))for(L1=m1[d1],d1=vu[h1+L1],vu[h1+L1]=-1;d1!==-1&&vu[r1+d1]!==-1;d1=vu[r1+d1],l1++){for(B1=vu[t1+d1],x1=vu[i1+d1],j1=Oo[d1]+1;j1<=Oo[d1]+B1-1;j1++)vu[c1+eu[j1]]=l1;var E1=d1;for(b1=vu[r1+d1];b1!==-1;){var P1=vu[t1+b1]===B1&&vu[i1+b1]===x1;for(j1=Oo[b1]+1;P1&&j1<=Oo[b1]+B1-1;j1++)vu[c1+eu[j1]]!==l1&&(P1=0);P1?(Oo[b1]=csFlip(d1),vu[e1+d1]+=vu[e1+b1],vu[e1+b1]=0,vu[i1+b1]=-1,b1=vu[r1+b1],vu[r1+E1]=b1):(E1=b1,b1=vu[r1+b1])}}for(j1=Q1,w1=Q1;w1<rv;w1++)d1=eu[w1],!((T1=-vu[e1+d1])<=0)&&(vu[e1+d1]=T1,G1=vu[s1+d1]+W1-T1,G1=Math.min(G1,Js-f1-T1),vu[a1+G1]!==-1&&(m1[vu[a1+G1]]=d1),vu[r1+d1]=vu[a1+G1],m1[d1]=-1,vu[a1+G1]=d1,p1=Math.min(p1,G1),vu[s1+d1]=G1,eu[j1++]=d1);vu[e1+C1]=H1,(vu[t1+C1]=j1-Q1)===0&&(Oo[C1]=-1,vu[c1+C1]=0),q1!==0&&(tu=j1)}for(d1=0;d1<Js;d1++)Oo[d1]=csFlip(Oo[d1]);for(b1=0;b1<=Js;b1++)vu[a1+b1]=-1;for(b1=Js;b1>=0;b1--)vu[e1+b1]>0||(vu[r1+b1]=vu[a1+Oo[b1]],vu[a1+Oo[b1]]=b1);for(S1=Js;S1>=0;S1--)vu[e1+S1]<=0||Oo[S1]!==-1&&(vu[r1+S1]=vu[a1+Oo[S1]],vu[a1+Oo[S1]]=S1);for(C1=0,d1=0;d1<=Js;d1++)Oo[d1]===-1&&(C1=csTdfs(d1,C1,vu,a1,r1,Bo,c1));return Bo.splice(Bo.length-1,1),Bo};function h(j,Xt,Lt,fr,Jr){var Js=c(Xt);if(j===1&&fr===Lt)return s(Xt,Js);if(j===2){for(var qs=Js._index,zo=Js._ptr,js=0,eu=0;eu<Lt;eu++){var Oo=zo[eu];if(zo[eu]=js,!(zo[eu+1]-Oo>Jr))for(var tu=zo[eu+1];Oo<tu;Oo++)qs[js++]=qs[Oo]}return zo[Lt]=js,Xt=c(Js),o(Js,Xt)}return o(Js,Xt)}function d(j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu){for(var Bo=0;Bo<j;Bo++)Lt[fr+Bo]=Xt[Bo+1]-Xt[Bo];Lt[fr+j]=0;for(var vu=0;vu<=j;vu++)Lt[Jr+vu]=-1,Js[vu]=-1,Lt[qs+vu]=-1,Lt[zo+vu]=-1,Lt[js+vu]=1,Lt[eu+vu]=1,Lt[Oo+vu]=0,Lt[tu+vu]=Lt[fr+vu];var t1=_(0,0,Lt,eu,j);return Lt[Oo+j]=-2,Xt[j]=-1,Lt[eu+j]=0,t1}function b(j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo){for(var tu=0,Bo=0;Bo<j;Bo++){var vu=Lt[fr+Bo];if(vu===0)Lt[Jr+Bo]=-2,tu++,Xt[Bo]=-1,Lt[Js+Bo]=0;else if(vu>qs)Lt[zo+Bo]=0,Lt[Jr+Bo]=-1,tu++,Xt[Bo]=csFlip(j),Lt[zo+j]++;else{var t1=Lt[js+vu];t1!==-1&&(eu[t1]=Bo),Lt[Oo+Bo]=Lt[js+vu],Lt[js+vu]=Bo}}return tu}function _(j,Xt,Lt,fr,Jr){if(j<2||j+Xt<0){for(var Js=0;Js<Jr;Js++)Lt[fr+Js]!==0&&(Lt[fr+Js]=1);j=2}return j}function $(j,Xt){return j!==Xt}});function csLeaf(a,s,o,c,h,d,b){var _,$,j=0,Xt;if(a<=s||o[c+s]<=o[h+a])return-1;o[h+a]=o[c+s];var Lt=o[d+a];if(o[d+a]=s,Lt===-1)j=1,Xt=a;else{for(j=2,Xt=Lt;Xt!==o[b+Xt];Xt=o[b+Xt]);for(_=Lt;_!==Xt;_=$)$=o[b+_],o[b+_]=Xt}return{jleaf:j,q:Xt}}var name$1m="csCounts",dependencies$1m=["transpose"],createCsCounts=factory(name$1m,dependencies$1m,a=>{var{transpose:s}=a;return function(o,c,h,d){if(!o||!c||!h)return null;var b=o._size,_=b[0],$=b[1],j,Xt,Lt,fr,Jr,Js,qs,zo=4*$+(d?$+_+1:0),js=[],eu=0,Oo=$,tu=2*$,Bo=3*$,vu=4*$,t1=5*$+1;for(Lt=0;Lt<zo;Lt++)js[Lt]=-1;var e1=[],r1=s(o),a1=r1._index,i1=r1._ptr;for(Lt=0;Lt<$;Lt++)for(Xt=h[Lt],e1[Xt]=js[Bo+Xt]===-1?1:0;Xt!==-1&&js[Bo+Xt]===-1;Xt=c[Xt])js[Bo+Xt]=Lt;if(d){for(Lt=0;Lt<$;Lt++)js[h[Lt]]=Lt;for(j=0;j<_;j++){for(Lt=$,Js=i1[j],qs=i1[j+1],Jr=Js;Jr<qs;Jr++)Lt=Math.min(Lt,js[a1[Jr]]);js[t1+j]=js[vu+Lt],js[vu+Lt]=j}}for(j=0;j<$;j++)js[eu+j]=j;for(Lt=0;Lt<$;Lt++){for(Xt=h[Lt],c[Xt]!==-1&&e1[c[Xt]]--,fr=d?js[vu+Lt]:Xt;fr!==-1;fr=d?js[t1+fr]:-1)for(Jr=i1[fr];Jr<i1[fr+1];Jr++){j=a1[Jr];var s1=csLeaf(j,Xt,js,Bo,Oo,tu,eu);s1.jleaf>=1&&e1[Xt]++,s1.jleaf===2&&e1[s1.q]--}c[Xt]!==-1&&(js[eu+Xt]=c[Xt])}for(Xt=0;Xt<$;Xt++)c[Xt]!==-1&&(e1[c[Xt]]+=e1[Xt]);return e1}}),name$1l="csSqr",dependencies$1l=["add","multiply","transpose"],createCsSqr=factory(name$1l,dependencies$1l,a=>{var{add:s,multiply:o,transpose:c}=a,h=createCsAmd({add:s,multiply:o,transpose:c}),d=createCsCounts({transpose:c});return function($,j,Xt){var Lt=j._ptr,fr=j._size,Jr=fr[1],Js,qs={};if(qs.q=h($,j),$&&!qs.q)return null;if(Xt){var zo=$?csPermute(j,null,qs.q):j;qs.parent=csEtree(zo);var js=csPost(qs.parent,Jr);if(qs.cp=d(zo,qs.parent,js,1),zo&&qs.parent&&qs.cp&&b(zo,qs))for(qs.unz=0,Js=0;Js<Jr;Js++)qs.unz+=qs.cp[Js]}else qs.unz=4*Lt[Jr]+Jr,qs.lnz=qs.unz;return qs};function b(_,$){var j=_._ptr,Xt=_._index,Lt=_._size,fr=Lt[0],Jr=Lt[1];$.pinv=[],$.leftmost=[];var Js=$.parent,qs=$.pinv,zo=$.leftmost,js=[],eu=0,Oo=fr,tu=fr+Jr,Bo=fr+2*Jr,vu,t1,e1,r1,a1;for(t1=0;t1<Jr;t1++)js[Oo+t1]=-1,js[tu+t1]=-1,js[Bo+t1]=0;for(vu=0;vu<fr;vu++)zo[vu]=-1;for(t1=Jr-1;t1>=0;t1--)for(r1=j[t1],a1=j[t1+1],e1=r1;e1<a1;e1++)zo[Xt[e1]]=t1;for(vu=fr-1;vu>=0;vu--)qs[vu]=-1,t1=zo[vu],t1!==-1&&(js[Bo+t1]++===0&&(js[tu+t1]=vu),js[eu+vu]=js[Oo+t1],js[Oo+t1]=vu);for($.lnz=0,$.m2=fr,t1=0;t1<Jr;t1++)if(vu=js[Oo+t1],$.lnz++,vu<0&&(vu=$.m2++),qs[vu]=t1,!(--Bo[t1]<=0)){$.lnz+=js[Bo+t1];var i1=Js[t1];i1!==-1&&(js[Bo+i1]===0&&(js[tu+i1]=js[tu+t1]),js[eu+js[tu+t1]]=js[Oo+i1],js[Oo+i1]=js[eu+vu],js[Bo+i1]+=js[Bo+t1])}for(vu=0;vu<fr;vu++)qs[vu]<0&&(qs[vu]=t1++);return!0}});function csMarked(a,s){return a[s]<0}function csMark(a,s){a[s]=csFlip(a[s])}function csUnflip(a){return a<0?csFlip(a):a}function csDfs(a,s,o,c,h){var d=s._index,b=s._ptr,_=s._size,$=_[1],j,Xt,Lt,fr=0;for(c[0]=a;fr>=0;){a=c[fr];var Jr=h?h[a]:a;csMarked(b,a)||(csMark(b,a),c[$+fr]=Jr<0?0:csUnflip(b[Jr]));var Js=1;for(Xt=c[$+fr],Lt=Jr<0?0:csUnflip(b[Jr+1]);Xt<Lt;Xt++)if(j=d[Xt],!csMarked(b,j)){c[$+fr]=Xt,c[++fr]=j,Js=0;break}Js&&(fr--,c[--o]=a)}return o}function csReach(a,s,o,c,h){var d=a._ptr,b=a._size,_=s._index,$=s._ptr,j=b[1],Xt,Lt,fr,Jr=j;for(Lt=$[o],fr=$[o+1],Xt=Lt;Xt<fr;Xt++){var Js=_[Xt];csMarked(d,Js)||(Jr=csDfs(Js,a,Jr,c,h))}for(Xt=Jr;Xt<j;Xt++)csMark(d,c[Xt]);return Jr}var name$1k="csSpsolve",dependencies$1k=["divideScalar","multiply","subtract"],createCsSpsolve=factory(name$1k,dependencies$1k,a=>{var{divideScalar:s,multiply:o,subtract:c}=a;return function(d,b,_,$,j,Xt,Lt){var fr=d._values,Jr=d._index,Js=d._ptr,qs=d._size,zo=qs[1],js=b._values,eu=b._index,Oo=b._ptr,tu,Bo,vu,t1,e1=csReach(d,b,_,$,Xt);for(tu=e1;tu<zo;tu++)j[$[tu]]=0;for(Bo=Oo[_],vu=Oo[_+1],tu=Bo;tu<vu;tu++)j[eu[tu]]=js[tu];for(var r1=e1;r1<zo;r1++){var a1=$[r1],i1=Xt?Xt[a1]:a1;if(!(i1<0))for(Bo=Js[i1],vu=Js[i1+1],j[a1]=s(j[a1],fr[Lt?Bo:vu-1]),tu=Lt?Bo+1:Bo,t1=Lt?vu:vu-1;tu<t1;tu++){var s1=Jr[tu];j[s1]=c(j[s1],o(fr[tu],j[a1]))}}return e1}}),name$1j="csLu",dependencies$1j=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],createCsLu=factory(name$1j,dependencies$1j,a=>{var{abs:s,divideScalar:o,multiply:c,subtract:h,larger:d,largerEq:b,SparseMatrix:_}=a,$=createCsSpsolve({divideScalar:o,multiply:c,subtract:h});return function(Xt,Lt,fr){if(!Xt)return null;var Jr=Xt._size,Js=Jr[1],qs,zo=100,js=100;Lt&&(qs=Lt.q,zo=Lt.lnz||zo,js=Lt.unz||js);var eu=[],Oo=[],tu=[],Bo=new _({values:eu,index:Oo,ptr:tu,size:[Js,Js]}),vu=[],t1=[],e1=[],r1=new _({values:vu,index:t1,ptr:e1,size:[Js,Js]}),a1=[],i1,s1,c1=[],h1=[];for(i1=0;i1<Js;i1++)c1[i1]=0,a1[i1]=-1,tu[i1+1]=0;zo=0,js=0;for(var m1=0;m1<Js;m1++){tu[m1]=zo,e1[m1]=js;var l1=qs?qs[m1]:m1,f1=$(Bo,Xt,l1,h1,c1,a1,1),p1=-1,d1=-1;for(s1=f1;s1<Js;s1++)if(i1=h1[s1],a1[i1]<0){var b1=s(c1[i1]);d(b1,d1)&&(d1=b1,p1=i1)}else t1[js]=a1[i1],vu[js++]=c1[i1];if(p1===-1||d1<=0)return null;a1[l1]<0&&b(s(c1[l1]),c(d1,fr))&&(p1=l1);var C1=c1[p1];for(t1[js]=m1,vu[js++]=C1,a1[p1]=m1,Oo[zo]=p1,eu[zo++]=1,s1=f1;s1<Js;s1++)i1=h1[s1],a1[i1]<0&&(Oo[zo]=i1,eu[zo++]=o(c1[i1],C1)),c1[i1]=0}for(tu[Js]=zo,e1[Js]=js,s1=0;s1<zo;s1++)Oo[s1]=a1[Oo[s1]];return eu.splice(zo,eu.length-zo),Oo.splice(zo,Oo.length-zo),vu.splice(js,vu.length-js),t1.splice(js,t1.length-js),{L:Bo,U:r1,pinv:a1}}}),name$1i="slu",dependencies$1i=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],createSlu=factory(name$1i,dependencies$1i,a=>{var{typed:s,abs:o,add:c,multiply:h,transpose:d,divideScalar:b,subtract:_,larger:$,largerEq:j,SparseMatrix:Xt}=a,Lt=createCsSqr({add:c,multiply:h,transpose:d}),fr=createCsLu({abs:o,divideScalar:b,multiply:h,subtract:_,larger:$,largerEq:j,SparseMatrix:Xt});return s(name$1i,{"SparseMatrix, number, number":function(Js,qs,zo){if(!isInteger$1(qs)||qs<0||qs>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(zo<0||zo>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var js=Lt(qs,Js,!1),eu=fr(Js,js,zo);return{L:eu.L,U:eu.U,p:eu.pinv,q:js.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function csIpvec(a,s){var o,c=s.length,h=[];if(a)for(o=0;o<c;o++)h[a[o]]=s[o];else for(o=0;o<c;o++)h[o]=s[o];return h}var name$1h="lusolve",dependencies$1h=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],createLusolve=factory(name$1h,dependencies$1h,a=>{var{typed:s,matrix:o,lup:c,slu:h,usolve:d,lsolve:b,DenseMatrix:_}=a,$=createSolveValidation({DenseMatrix:_});return s(name$1h,{"Array, Array | Matrix":function(fr,Jr){fr=o(fr);var Js=c(fr),qs=Xt(Js.L,Js.U,Js.p,null,Jr);return qs.valueOf()},"DenseMatrix, Array | Matrix":function(fr,Jr){var Js=c(fr);return Xt(Js.L,Js.U,Js.p,null,Jr)},"SparseMatrix, Array | Matrix":function(fr,Jr){var Js=c(fr);return Xt(Js.L,Js.U,Js.p,null,Jr)},"SparseMatrix, Array | Matrix, number, number":function(fr,Jr,Js,qs){var zo=h(fr,Js,qs);return Xt(zo.L,zo.U,zo.p,zo.q,Jr)},"Object, Array | Matrix":function(fr,Jr){return Xt(fr.L,fr.U,fr.p,fr.q,Jr)}});function j(Lt){if(isMatrix(Lt))return Lt;if(isArray(Lt))return o(Lt);throw new TypeError("Invalid Matrix LU decomposition")}function Xt(Lt,fr,Jr,Js,qs){Lt=j(Lt),fr=j(fr),Jr&&(qs=$(Lt,qs,!0),qs._data=csIpvec(Jr,qs._data));var zo=b(Lt,qs),js=d(fr,zo);return Js&&(js._data=csIpvec(Js,js._data)),js}}),name$1g="polynomialRoot",dependencies$1g=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],createPolynomialRoot=factory(name$1g,dependencies$1g,a=>{var{typed:s,isZero:o,equalScalar:c,add:h,subtract:d,multiply:b,divide:_,sqrt:$,unaryMinus:j,cbrt:Xt,typeOf:Lt,im:fr,re:Jr}=a;return s(name$1g,{"number|Complex, ...number|Complex":(Js,qs)=>{for(var zo=[Js,...qs];zo.length>0&&o(zo[zo.length-1]);)zo.pop();if(zo.length<2)throw new RangeError("Polynomial [".concat(Js,", ").concat(qs,"] must have a non-zero non-constant coefficient"));switch(zo.length){case 2:return[j(_(zo[0],zo[1]))];case 3:{var[js,eu,Oo]=zo,tu=b(2,Oo),Bo=b(eu,eu),vu=b(4,Oo,js);if(c(Bo,vu))return[_(j(eu),tu)];var t1=$(d(Bo,vu));return[_(d(t1,eu),tu),_(d(j(t1),eu),tu)]}case 4:{var[e1,r1,a1,i1]=zo,s1=j(b(3,i1)),c1=b(a1,a1),h1=b(3,i1,r1),m1=h(b(2,a1,a1,a1),b(27,i1,i1,e1)),l1=b(9,i1,a1,r1);if(c(c1,h1)&&c(m1,l1))return[_(a1,s1)];var f1=d(c1,h1),p1=d(m1,l1),d1=h(b(18,i1,a1,r1,e1),b(a1,a1,r1,r1)),b1=h(b(4,a1,a1,a1,e1),b(4,i1,r1,r1,r1),b(27,i1,i1,e1,e1));if(c(d1,b1))return[_(d(b(4,i1,a1,r1),h(b(9,i1,i1,e1),b(a1,a1,a1))),b(i1,f1)),_(d(b(9,i1,e1),b(a1,r1)),b(2,f1))];var C1;c(c1,h1)?C1=p1:C1=_(h(p1,$(d(b(p1,p1),b(4,f1,f1,f1)))),2);var g1=!0,o1=Xt(C1,g1).toArray().map(S1=>_(h(a1,S1,_(f1,S1)),s1));return o1.map(S1=>Lt(S1)==="Complex"&&c(Jr(S1),Jr(S1)+fr(S1))?Jr(S1):S1)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(zo))}}})}),name$1f="Help",dependencies$1f=["evaluate"],createHelpClass=factory(name$1f,dependencies$1f,a=>{var{evaluate:s}=a;function o(c){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(!c)throw new Error('Argument "doc" missing');this.doc=c}return o.prototype.type="Help",o.prototype.isHelp=!0,o.prototype.toString=function(){var c=this.doc||{},h=`
`;if(c.name&&(h+="Name: "+c.name+`

`),c.category&&(h+="Category: "+c.category+`

`),c.description&&(h+=`Description:
    `+c.description+`

`),c.syntax&&(h+=`Syntax:
    `+c.syntax.join(`
    `)+`

`),c.examples){h+=`Examples:
`;for(var d=!1,b=s("config()"),_={config:Lt=>(d=!0,s("config(newConfig)",{newConfig:Lt}))},$=0;$<c.examples.length;$++){var j=c.examples[$];h+="    "+j+`
`;var Xt=void 0;try{Xt=s(j,_)}catch(Lt){Xt=Lt}Xt!==void 0&&!isHelp(Xt)&&(h+="        "+format$1(Xt,{precision:14})+`
`)}h+=`
`,d&&s("config(originalConfig)",{originalConfig:b})}return c.mayThrow&&c.mayThrow.length&&(h+="Throws: "+c.mayThrow.join(", ")+`

`),c.seealso&&c.seealso.length&&(h+="See also: "+c.seealso.join(", ")+`
`),h},o.prototype.toJSON=function(){var c=clone$3(this.doc);return c.mathjs="Help",c},o.fromJSON=function(c){var h={};return Object.keys(c).filter(d=>d!=="mathjs").forEach(d=>{h[d]=c[d]}),new o(h)},o.prototype.valueOf=o.prototype.toString,o},{isClass:!0}),name$1e="Chain",dependencies$1e=["?on","math","typed"],createChainClass=factory(name$1e,dependencies$1e,a=>{var{on:s,math:o,typed:c}=a;function h(j){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");isChain(j)?this.value=j.value:this.value=j}h.prototype.type="Chain",h.prototype.isChain=!0,h.prototype.done=function(){return this.value},h.prototype.valueOf=function(){return this.value},h.prototype.toString=function(){return format$1(this.value)},h.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},h.fromJSON=function(j){return new h(j.value)};function d(j,Xt){typeof Xt=="function"&&(h.prototype[j]=_(Xt))}function b(j,Xt){lazy(h.prototype,j,function(){var fr=Xt();if(typeof fr=="function")return _(fr)})}function _(j){return function(){if(arguments.length===0)return new h(j(this.value));for(var Xt=[this.value],Lt=0;Lt<arguments.length;Lt++)Xt[Lt+1]=arguments[Lt];if(c.isTypedFunction(j)){var fr=c.resolve(j,Xt);if(fr.params.length===1)throw new Error("chain function "+j.name+" cannot match rest parameter between chain value and additional arguments.");return new h(fr.implementation.apply(j,Xt))}return new h(j.apply(j,Xt))}}h.createProxy=function(j,Xt){if(typeof j=="string")d(j,Xt);else{var Lt=function(Js){hasOwnProperty(j,Js)&&$[Js]===void 0&&b(Js,()=>j[Js])};for(var fr in j)Lt(fr)}};var $={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return h.createProxy(o),s&&s("import",function(j,Xt,Lt){Lt||b(j,Xt)}),h},{isClass:!0}),eDocs={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},falseDocs={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},iDocs={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},InfinityDocs={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN10Docs={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LN2Docs={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LOG10EDocs={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},LOG2EDocs={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},NaNDocs={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},nullDocs={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},phiDocs={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},piDocs={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},SQRT12Docs={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2Docs={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tauDocs={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},trueDocs={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},versionDocs={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},bignumberDocs={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},bigintDocs={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},booleanDocs={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complexDocs={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnitDocs={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fractionDocs={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},indexDocs={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},matrixDocs={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},numberDocs={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},sparseDocs={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnitDocs={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},stringDocs={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unitDocs={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},configDocs={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},importDocs={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typedDocs={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},derivativeDocs={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},leafCountDocs={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},lsolveDocs={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAllDocs={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lupDocs={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolveDocs={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},polynomialRootDocs={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},qrDocs={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},rationalizeDocs={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},resolveDocs={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},simplifyDocs={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},simplifyConstantDocs={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},simplifyCoreDocs={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},sluDocs={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},symbolicEqualDocs={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},usolveDocs={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAllDocs={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},absDocs={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},addDocs={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrtDocs={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceilDocs={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},cubeDocs={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divideDocs={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivideDocs={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiplyDocs={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPowDocs={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},expDocs={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expmDocs={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1Docs={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fixDocs={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},floorDocs={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},gcdDocs={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypotDocs={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},invmodDocs={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},lcmDocs={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},logDocs={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log10Docs={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},log1pDocs={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log2Docs={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},modDocs={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiplyDocs={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},normDocs={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRootDocs={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRootsDocs={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},powDocs={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},roundDocs={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},signDocs={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrtDocs={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtmDocs={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},sylvesterDocs={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},schurDocs={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lyapDocs={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},squareDocs={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtractDocs={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinusDocs={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlusDocs={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcdDocs={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAndDocs={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNotDocs={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOrDocs={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXorDocs={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShiftDocs={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShiftDocs={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShiftDocs={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbersDocs={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalanDocs={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},compositionDocs={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2Docs={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},argDocs={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conjDocs={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},imDocs={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},reDocs={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},evaluateDocs={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},parserDocs={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},parseDocs={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},compileDocs={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},helpDocs={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distanceDocs={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersectDocs={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},andDocs={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},notDocs={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},nullishDocs={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},orDocs={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xorDocs={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},mapSlicesDocs={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},columnDocs={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},concatDocs={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},countDocs={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},crossDocs={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},ctransposeDocs={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},detDocs={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diagDocs={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diffDocs={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},dotDocs={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},eigsDocs={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},filterDocs={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flattenDocs={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEachDocs={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},getMatrixDataTypeDocs={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identityDocs={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},invDocs={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pinvDocs={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},kronDocs={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},mapDocs={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},matrixFromColumnsDocs={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},matrixFromFunctionDocs={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRowsDocs={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},onesDocs={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelectDocs={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},rangeDocs={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},reshapeDocs={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},resizeDocs={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},rotateDocs={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrixDocs={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},rowDocs={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},sizeDocs={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sortDocs={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeezeDocs={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subsetDocs={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},traceDocs={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transposeDocs={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zerosDocs={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fftDocs={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},ifftDocs={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},bernoulliDocs={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},combinationsDocs={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRepDocs={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorialDocs={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gammaDocs={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},lgammaDocs={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},kldivergenceDocs={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomialDocs={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutationsDocs={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandomDocs={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},randomDocs={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomIntDocs={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compareDocs={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNaturalDocs={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareTextDocs={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqualDocs={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equalDocs={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalTextDocs={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},largerDocs={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEqDocs={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smallerDocs={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEqDocs={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequalDocs={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesianDocs={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifferenceDocs={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinctDocs={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersectDocs={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubsetDocs={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicityDocs={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowersetDocs={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSizeDocs={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifferenceDocs={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnionDocs={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},zpk2tfDocs={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},freqzDocs={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},erfDocs={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},zetaDocs={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},madDocs={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},maxDocs={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},meanDocs={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},medianDocs={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},minDocs={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},modeDocs={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prodDocs={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeqDocs={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},stdDocs={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},cumSumDocs={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},sumDocs={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},varianceDocs={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},corrDocs={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},acosDocs={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acoshDocs={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acotDocs={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acothDocs={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acscDocs={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acschDocs={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asecDocs={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asechDocs={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asinDocs={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinhDocs={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atanDocs={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atan2Docs={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},atanhDocs={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},cosDocs={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},coshDocs={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cotDocs={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},cothDocs={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},cscDocs={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},cschDocs={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},secDocs={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sechDocs={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sinDocs={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinhDocs={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tanDocs={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanhDocs={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},toDocs={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},toBestDocs={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},binDocs={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},cloneDocs={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},formatDocs={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},hasNumericValueDocs={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},hexDocs={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isIntegerDocs={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNaNDocs={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},isBoundedDocs={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},isFiniteDocs={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},isNegativeDocs={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumericDocs={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},isPositiveDocs={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrimeDocs={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZeroDocs={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},numericDocs={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},octDocs={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},printDocs={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},typeOfDocs={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},solveODEDocs={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},embeddedDocs={bignumber:bignumberDocs,bigint:bigintDocs,boolean:booleanDocs,complex:complexDocs,createUnit:createUnitDocs,fraction:fractionDocs,index:indexDocs,matrix:matrixDocs,number:numberDocs,sparse:sparseDocs,splitUnit:splitUnitDocs,string:stringDocs,unit:unitDocs,e:eDocs,E:eDocs,false:falseDocs,i:iDocs,Infinity:InfinityDocs,LN2:LN2Docs,LN10:LN10Docs,LOG2E:LOG2EDocs,LOG10E:LOG10EDocs,NaN:NaNDocs,null:nullDocs,pi:piDocs,PI:piDocs,phi:phiDocs,SQRT1_2:SQRT12Docs,SQRT2:SQRT2Docs,tau:tauDocs,true:trueDocs,version:versionDocs,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:derivativeDocs,lsolve:lsolveDocs,lsolveAll:lsolveAllDocs,lup:lupDocs,lusolve:lusolveDocs,leafCount:leafCountDocs,polynomialRoot:polynomialRootDocs,resolve:resolveDocs,simplify:simplifyDocs,simplifyConstant:simplifyConstantDocs,simplifyCore:simplifyCoreDocs,symbolicEqual:symbolicEqualDocs,rationalize:rationalizeDocs,slu:sluDocs,usolve:usolveDocs,usolveAll:usolveAllDocs,qr:qrDocs,abs:absDocs,add:addDocs,cbrt:cbrtDocs,ceil:ceilDocs,cube:cubeDocs,divide:divideDocs,dotDivide:dotDivideDocs,dotMultiply:dotMultiplyDocs,dotPow:dotPowDocs,exp:expDocs,expm:expmDocs,expm1:expm1Docs,fix:fixDocs,floor:floorDocs,gcd:gcdDocs,hypot:hypotDocs,lcm:lcmDocs,log:logDocs,log2:log2Docs,log1p:log1pDocs,log10:log10Docs,mod:modDocs,multiply:multiplyDocs,norm:normDocs,nthRoot:nthRootDocs,nthRoots:nthRootsDocs,pow:powDocs,round:roundDocs,sign:signDocs,sqrt:sqrtDocs,sqrtm:sqrtmDocs,square:squareDocs,subtract:subtractDocs,unaryMinus:unaryMinusDocs,unaryPlus:unaryPlusDocs,xgcd:xgcdDocs,invmod:invmodDocs,bitAnd:bitAndDocs,bitNot:bitNotDocs,bitOr:bitOrDocs,bitXor:bitXorDocs,leftShift:leftShiftDocs,rightArithShift:rightArithShiftDocs,rightLogShift:rightLogShiftDocs,bellNumbers:bellNumbersDocs,catalan:catalanDocs,composition:compositionDocs,stirlingS2:stirlingS2Docs,config:configDocs,import:importDocs,typed:typedDocs,arg:argDocs,conj:conjDocs,re:reDocs,im:imDocs,evaluate:evaluateDocs,help:helpDocs,parse:parseDocs,parser:parserDocs,compile:compileDocs,distance:distanceDocs,intersect:intersectDocs,and:andDocs,not:notDocs,nullish:nullishDocs,or:orDocs,xor:xorDocs,mapSlices:mapSlicesDocs,concat:concatDocs,count:countDocs,cross:crossDocs,column:columnDocs,ctranspose:ctransposeDocs,det:detDocs,diag:diagDocs,diff:diffDocs,dot:dotDocs,getMatrixDataType:getMatrixDataTypeDocs,identity:identityDocs,filter:filterDocs,flatten:flattenDocs,forEach:forEachDocs,inv:invDocs,pinv:pinvDocs,eigs:eigsDocs,kron:kronDocs,matrixFromFunction:matrixFromFunctionDocs,matrixFromRows:matrixFromRowsDocs,matrixFromColumns:matrixFromColumnsDocs,map:mapDocs,ones:onesDocs,partitionSelect:partitionSelectDocs,range:rangeDocs,resize:resizeDocs,reshape:reshapeDocs,rotate:rotateDocs,rotationMatrix:rotationMatrixDocs,row:rowDocs,size:sizeDocs,sort:sortDocs,squeeze:squeezeDocs,subset:subsetDocs,trace:traceDocs,transpose:transposeDocs,zeros:zerosDocs,fft:fftDocs,ifft:ifftDocs,sylvester:sylvesterDocs,schur:schurDocs,lyap:lyapDocs,solveODE:solveODEDocs,bernoulli:bernoulliDocs,combinations:combinationsDocs,combinationsWithRep:combinationsWithRepDocs,factorial:factorialDocs,gamma:gammaDocs,kldivergence:kldivergenceDocs,lgamma:lgammaDocs,multinomial:multinomialDocs,permutations:permutationsDocs,pickRandom:pickRandomDocs,random:randomDocs,randomInt:randomIntDocs,compare:compareDocs,compareNatural:compareNaturalDocs,compareText:compareTextDocs,deepEqual:deepEqualDocs,equal:equalDocs,equalText:equalTextDocs,larger:largerDocs,largerEq:largerEqDocs,smaller:smallerDocs,smallerEq:smallerEqDocs,unequal:unequalDocs,setCartesian:setCartesianDocs,setDifference:setDifferenceDocs,setDistinct:setDistinctDocs,setIntersect:setIntersectDocs,setIsSubset:setIsSubsetDocs,setMultiplicity:setMultiplicityDocs,setPowerset:setPowersetDocs,setSize:setSizeDocs,setSymDifference:setSymDifferenceDocs,setUnion:setUnionDocs,zpk2tf:zpk2tfDocs,freqz:freqzDocs,erf:erfDocs,zeta:zetaDocs,cumsum:cumSumDocs,mad:madDocs,max:maxDocs,mean:meanDocs,median:medianDocs,min:minDocs,mode:modeDocs,prod:prodDocs,quantileSeq:quantileSeqDocs,std:stdDocs,sum:sumDocs,variance:varianceDocs,corr:corrDocs,acos:acosDocs,acosh:acoshDocs,acot:acotDocs,acoth:acothDocs,acsc:acscDocs,acsch:acschDocs,asec:asecDocs,asech:asechDocs,asin:asinDocs,asinh:asinhDocs,atan:atanDocs,atanh:atanhDocs,atan2:atan2Docs,cos:cosDocs,cosh:coshDocs,cot:cotDocs,coth:cothDocs,csc:cscDocs,csch:cschDocs,sec:secDocs,sech:sechDocs,sin:sinDocs,sinh:sinhDocs,tan:tanDocs,tanh:tanhDocs,to:toDocs,toBest:toBestDocs,clone:cloneDocs,format:formatDocs,bin:binDocs,oct:octDocs,hex:hexDocs,isNaN:isNaNDocs,isBounded:isBoundedDocs,isFinite:isFiniteDocs,isInteger:isIntegerDocs,isNegative:isNegativeDocs,isNumeric:isNumericDocs,hasNumericValue:hasNumericValueDocs,isPositive:isPositiveDocs,isPrime:isPrimeDocs,isZero:isZeroDocs,print:printDocs,typeOf:typeOfDocs,numeric:numericDocs},name$1d="help",dependencies$1d=["typed","mathWithTransform","Help"],createHelp=factory(name$1d,dependencies$1d,a=>{var{typed:s,mathWithTransform:o,Help:c}=a;return s(name$1d,{any:function(d){var b,_=d;if(typeof d!="string"){for(b in o)if(hasOwnProperty(o,b)&&d===o[b]){_=b;break}}var $=getSafeProperty(embeddedDocs,_);if(!$){var j=typeof _=="function"?_.name:_;throw new Error('No documentation found on "'+j+'"')}return new c($)}})}),name$1c="chain",dependencies$1c=["typed","Chain"],createChain=factory(name$1c,dependencies$1c,a=>{var{typed:s,Chain:o}=a;return s(name$1c,{"":function(){return new o},any:function(h){return new o(h)}})}),name$1b="det",dependencies$1b=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],createDet=factory(name$1b,dependencies$1b,a=>{var{typed:s,matrix:o,subtractScalar:c,multiply:h,divideScalar:d,isZero:b,unaryMinus:_}=a;return s(name$1b,{any:function(Xt){return clone$3(Xt)},"Array | Matrix":function(Xt){var Lt;switch(isMatrix(Xt)?Lt=Xt.size():Array.isArray(Xt)?(Xt=o(Xt),Lt=Xt.size()):Lt=[],Lt.length){case 0:return clone$3(Xt);case 1:if(Lt[0]===1)return clone$3(Xt.valueOf()[0]);if(Lt[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+format$1(Lt)+")");case 2:{var fr=Lt[0],Jr=Lt[1];if(fr===Jr)return $(Xt.clone().valueOf(),fr);if(Jr===0)return 1;throw new RangeError("Matrix must be square (size: "+format$1(Lt)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(Lt)+")")}}});function $(j,Xt,Lt){if(Xt===1)return clone$3(j[0][0]);if(Xt===2)return c(h(j[0][0],j[1][1]),h(j[1][0],j[0][1]));for(var fr=!1,Jr=new Array(Xt).fill(0).map((t1,e1)=>e1),Js=0;Js<Xt;Js++){var qs=Jr[Js];if(b(j[qs][Js])){var zo=void 0;for(zo=Js+1;zo<Xt;zo++)if(!b(j[Jr[zo]][Js])){qs=Jr[zo],Jr[zo]=Jr[Js],Jr[Js]=qs,fr=!fr;break}if(zo===Xt)return j[qs][Js]}for(var js=j[qs][Js],eu=Js===0?1:j[Jr[Js-1]][Js-1],Oo=Js+1;Oo<Xt;Oo++)for(var tu=Jr[Oo],Bo=Js+1;Bo<Xt;Bo++)j[tu][Bo]=d(c(h(j[tu][Bo],js),h(j[tu][Js],j[qs][Bo])),eu)}var vu=j[Jr[Xt-1]][Xt-1];return fr?_(vu):vu}}),name$1a="inv",dependencies$1a=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],createInv=factory(name$1a,dependencies$1a,a=>{var{typed:s,matrix:o,divideScalar:c,addScalar:h,multiply:d,unaryMinus:b,det:_,identity:$,abs:j}=a;return s(name$1a,{"Array | Matrix":function(fr){var Jr=isMatrix(fr)?fr.size():arraySize(fr);switch(Jr.length){case 1:if(Jr[0]===1)return isMatrix(fr)?o([c(1,fr.valueOf()[0])]):[c(1,fr[0])];throw new RangeError("Matrix must be square (size: "+format$1(Jr)+")");case 2:{var Js=Jr[0],qs=Jr[1];if(Js===qs)return isMatrix(fr)?o(Xt(fr.valueOf(),Js,qs),fr.storage()):Xt(fr,Js,qs);throw new RangeError("Matrix must be square (size: "+format$1(Jr)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(Jr)+")")}},any:function(fr){return c(1,fr)}});function Xt(Lt,fr,Jr){var Js,qs,zo,js,eu;if(fr===1){if(js=Lt[0][0],js===0)throw Error("Cannot calculate inverse, determinant is zero");return[[c(1,js)]]}else if(fr===2){var Oo=_(Lt);if(Oo===0)throw Error("Cannot calculate inverse, determinant is zero");return[[c(Lt[1][1],Oo),c(b(Lt[0][1]),Oo)],[c(b(Lt[1][0]),Oo),c(Lt[0][0],Oo)]]}else{var tu=Lt.concat();for(Js=0;Js<fr;Js++)tu[Js]=tu[Js].concat();for(var Bo=$(fr).valueOf(),vu=0;vu<Jr;vu++){var t1=j(tu[vu][vu]),e1=vu;for(Js=vu+1;Js<fr;)j(tu[Js][vu])>t1&&(t1=j(tu[Js][vu]),e1=Js),Js++;if(t1===0)throw Error("Cannot calculate inverse, determinant is zero");Js=e1,Js!==vu&&(eu=tu[vu],tu[vu]=tu[Js],tu[Js]=eu,eu=Bo[vu],Bo[vu]=Bo[Js],Bo[Js]=eu);var r1=tu[vu],a1=Bo[vu];for(Js=0;Js<fr;Js++){var i1=tu[Js],s1=Bo[Js];if(Js!==vu){if(i1[vu]!==0){for(zo=c(b(i1[vu]),r1[vu]),qs=vu;qs<Jr;qs++)i1[qs]=h(i1[qs],d(zo,r1[qs]));for(qs=0;qs<Jr;qs++)s1[qs]=h(s1[qs],d(zo,a1[qs]))}}else{for(zo=r1[vu],qs=vu;qs<Jr;qs++)i1[qs]=c(i1[qs],zo);for(qs=0;qs<Jr;qs++)s1[qs]=c(s1[qs],zo)}}}return Bo}}}),name$19="pinv",dependencies$19=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],createPinv=factory(name$19,dependencies$19,a=>{var{typed:s,matrix:o,inv:c,deepEqual:h,equal:d,dotDivide:b,dot:_,ctranspose:$,divideScalar:j,multiply:Xt,add:Lt,Complex:fr}=a;return s(name$19,{"Array | Matrix":function(Oo){var tu=isMatrix(Oo)?Oo.size():arraySize(Oo);switch(tu.length){case 1:return js(Oo)?$(Oo):tu[0]===1?c(Oo):b($(Oo),_(Oo,Oo));case 2:{if(js(Oo))return $(Oo);var Bo=tu[0],vu=tu[1];if(Bo===vu)try{return c(Oo)}catch(t1){if(!(t1 instanceof Error&&t1.message.match(/Cannot calculate inverse, determinant is zero/)))throw t1}return isMatrix(Oo)?o(Jr(Oo.valueOf(),Bo,vu),Oo.storage()):Jr(Oo,Bo,vu)}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(tu)+")")}},any:function(Oo){return d(Oo,0)?clone$3(Oo):j(1,Oo)}});function Jr(eu,Oo,tu){var{C:Bo,F:vu}=qs(eu,Oo,tu),t1=Xt(c(Xt($(Bo),Bo)),$(Bo)),e1=Xt($(vu),c(Xt(vu,$(vu))));return Xt(e1,t1)}function Js(eu,Oo,tu){for(var Bo=clone$3(eu),vu=0,t1=0;t1<Oo;t1++){if(tu<=vu)return Bo;for(var e1=t1;zo(Bo[e1][vu]);)if(e1++,Oo===e1&&(e1=t1,vu++,tu===vu))return Bo;[Bo[e1],Bo[t1]]=[Bo[t1],Bo[e1]];for(var r1=Bo[t1][vu],a1=0;a1<tu;a1++)Bo[t1][a1]=b(Bo[t1][a1],r1);for(var i1=0;i1<Oo;i1++)if(i1!==t1){r1=Bo[i1][vu];for(var s1=0;s1<tu;s1++)Bo[i1][s1]=Lt(Bo[i1][s1],Xt(-1,Xt(r1,Bo[t1][s1])))}vu++}return Bo}function qs(eu,Oo,tu){var Bo=Js(eu,Oo,tu),vu=eu.map((e1,r1)=>e1.filter((a1,i1)=>i1<Oo&&!zo(_(Bo[i1],Bo[i1])))),t1=Bo.filter((e1,r1)=>!zo(_(Bo[r1],Bo[r1])));return{C:vu,F:t1}}function zo(eu){return d(Lt(eu,fr(1,1)),Lt(0,fr(1,1)))}function js(eu){return h(Lt(eu,fr(1,1)),Lt(Xt(eu,0),fr(1,1)))}});function createComplexEigs(a){var{addScalar:s,subtract:o,flatten:c,multiply:h,multiplyScalar:d,divideScalar:b,sqrt:_,abs:$,bignumber:j,diag:Xt,size:Lt,reshape:fr,inv:Jr,qr:Js,usolve:qs,usolveAll:zo,equal:js,complex:eu,larger:Oo,smaller:tu,matrixFromColumns:Bo,dot:vu}=a;function t1(g1,o1,S1,v1){var B1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,T1=e1(g1,o1,S1,v1,B1);r1(g1,o1,S1,v1,B1,T1);var{values:w1,C:x1}=a1(g1,o1,S1,v1,B1);if(B1){var M1=i1(g1,o1,x1,T1,w1,S1,v1);return{values:w1,eigenvectors:M1}}return{values:w1}}function e1(g1,o1,S1,v1,B1){var T1=v1==="BigNumber",w1=v1==="Complex",x1=T1?j(0):0,M1=T1?j(1):w1?eu(1):1,O1=T1?j(1):1,N1=T1?j(10):2,L1=d(N1,N1),G1;B1&&(G1=Array(o1).fill(M1));for(var q1=!1;!q1;){q1=!0;for(var H1=0;H1<o1;H1++){for(var W1=x1,j1=x1,Q1=0;Q1<o1;Q1++)H1!==Q1&&(W1=s(W1,$(g1[Q1][H1])),j1=s(j1,$(g1[H1][Q1])));if(!js(W1,0)&&!js(j1,0)){for(var rv=O1,$1=W1,A1=b(j1,N1),y1=d(j1,N1);tu($1,A1);)$1=d($1,L1),rv=d(rv,N1);for(;Oo($1,y1);)$1=b($1,L1),rv=b(rv,N1);var _1=tu(b(s($1,j1),rv),d(s(W1,j1),.95));if(_1){q1=!1;for(var D1=b(1,rv),E1=0;E1<o1;E1++)H1!==E1&&(g1[H1][E1]=d(g1[H1][E1],D1),g1[E1][H1]=d(g1[E1][H1],rv));B1&&(G1[H1]=d(G1[H1],D1))}}}}return B1?Xt(G1):null}function r1(g1,o1,S1,v1,B1,T1){var w1=v1==="BigNumber",x1=v1==="Complex",M1=w1?j(0):x1?eu(0):0;w1&&(S1=j(S1));for(var O1=0;O1<o1-2;O1++){for(var N1=0,L1=M1,G1=O1+1;G1<o1;G1++){var q1=g1[G1][O1];tu($(L1),$(q1))&&(L1=q1,N1=G1)}if(!tu($(L1),S1)){if(N1!==O1+1){var H1=g1[N1];g1[N1]=g1[O1+1],g1[O1+1]=H1;for(var W1=0;W1<o1;W1++){var j1=g1[W1][N1];g1[W1][N1]=g1[W1][O1+1],g1[W1][O1+1]=j1}if(B1){var Q1=T1[N1];T1[N1]=T1[O1+1],T1[O1+1]=Q1}}for(var rv=O1+2;rv<o1;rv++){var $1=b(g1[rv][O1],L1);if($1!==0){for(var A1=0;A1<o1;A1++)g1[rv][A1]=o(g1[rv][A1],d($1,g1[O1+1][A1]));for(var y1=0;y1<o1;y1++)g1[y1][O1+1]=s(g1[y1][O1+1],d($1,g1[y1][rv]));if(B1)for(var _1=0;_1<o1;_1++)T1[rv][_1]=o(T1[rv][_1],d($1,T1[O1+1][_1]))}}}}return T1}function a1(g1,o1,S1,v1,B1){var T1=v1==="BigNumber",w1=v1==="Complex",x1=T1?j(1):w1?eu(1):1;T1&&(S1=j(S1));for(var M1=clone$3(g1),O1=[],N1=o1,L1=[],G1=B1?Xt(Array(o1).fill(x1)):void 0,q1=B1?Xt(Array(N1).fill(x1)):void 0,H1=0;H1<=100;){H1+=1;for(var W1=M1[N1-1][N1-1],j1=0;j1<N1;j1++)M1[j1][j1]=o(M1[j1][j1],W1);var{Q:Q1,R:rv}=Js(M1);M1=h(rv,Q1);for(var $1=0;$1<N1;$1++)M1[$1][$1]=s(M1[$1][$1],W1);if(B1&&(q1=h(q1,Q1)),N1===1||tu($(M1[N1-1][N1-2]),S1)){H1=0,O1.push(M1[N1-1][N1-1]),B1&&(L1.unshift([[1]]),h1(q1,o1),G1=h(G1,q1),N1>1&&(q1=Xt(Array(N1-1).fill(x1)))),N1-=1,M1.pop();for(var A1=0;A1<N1;A1++)M1[A1].pop()}else if(N1===2||tu($(M1[N1-2][N1-3]),S1)){H1=0;var y1=s1(M1[N1-2][N1-2],M1[N1-2][N1-1],M1[N1-1][N1-2],M1[N1-1][N1-1]);O1.push(...y1),B1&&(L1.unshift(c1(M1[N1-2][N1-2],M1[N1-2][N1-1],M1[N1-1][N1-2],M1[N1-1][N1-1],y1[0],y1[1],S1,v1)),h1(q1,o1),G1=h(G1,q1),N1>2&&(q1=Xt(Array(N1-2).fill(x1)))),N1-=2,M1.pop(),M1.pop();for(var _1=0;_1<N1;_1++)M1[_1].pop(),M1[_1].pop()}if(N1===0)break}if(O1.sort((P1,X1)=>+o($(P1),$(X1))),H1>100){var D1=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+O1.join(", "));throw D1.values=O1,D1.vectors=[],D1}var E1=B1?h(G1,m1(L1,o1)):void 0;return{values:O1,C:E1}}function i1(g1,o1,S1,v1,B1,T1,w1){var x1=Jr(S1),M1=h(x1,g1,S1),O1=w1==="BigNumber",N1=w1==="Complex",L1=O1?j(0):N1?eu(0):0,G1=O1?j(1):N1?eu(1):1,q1=[],H1=[];for(var W1 of B1){var j1=l1(q1,W1,js);j1===-1?(q1.push(W1),H1.push(1)):H1[j1]+=1}for(var Q1=[],rv=q1.length,$1=Array(o1).fill(L1),A1=Xt(Array(o1).fill(G1)),y1=function(){var E1=q1[_1],P1=o(M1,h(E1,A1)),X1=zo(P1,$1);for(X1.shift();X1.length<H1[_1];){var V1=f1(P1,o1,X1,T1,w1);if(V1===null)break;X1.push(V1)}var F1=h(Jr(v1),S1);X1=X1.map(z1=>h(F1,z1)),Q1.push(...X1.map(z1=>({value:E1,vector:c(z1)})))},_1=0;_1<rv;_1++)y1();return Q1}function s1(g1,o1,S1,v1){var B1=s(g1,v1),T1=o(d(g1,v1),d(o1,S1)),w1=d(B1,.5),x1=d(_(o(d(B1,B1),d(4,T1))),.5);return[s(w1,x1),o(w1,x1)]}function c1(g1,o1,S1,v1,B1,T1,w1,x1){var M1=x1==="BigNumber",O1=x1==="Complex",N1=M1?j(0):O1?eu(0):0,L1=M1?j(1):O1?eu(1):1;if(tu($(S1),w1))return[[L1,N1],[N1,L1]];if(Oo($(o(B1,T1)),w1))return[[o(B1,v1),o(T1,v1)],[S1,S1]];var G1=o(g1,B1),q1=o(v1,B1);return tu($(o1),w1)&&tu($(q1),w1)?[[G1,L1],[S1,N1]]:[[o1,N1],[q1,L1]]}function h1(g1,o1){for(var S1=0;S1<g1.length;S1++)g1[S1].push(...Array(o1-g1[S1].length).fill(0));for(var v1=g1.length;v1<o1;v1++)g1.push(Array(o1).fill(0)),g1[v1][v1]=1;return g1}function m1(g1,o1){for(var S1=[],v1=0;v1<o1;v1++)S1[v1]=Array(o1).fill(0);var B1=0;for(var T1 of g1){for(var w1=T1.length,x1=0;x1<w1;x1++)for(var M1=0;M1<w1;M1++)S1[B1+x1][B1+M1]=T1[x1][M1];B1+=w1}return S1}function l1(g1,o1,S1){for(var v1=0;v1<g1.length;v1++)if(S1(g1[v1],o1))return v1;return-1}function f1(g1,o1,S1,v1,B1){for(var T1=B1==="BigNumber"?j(1e3):1e3,w1,x1=0;x1<5;++x1){w1=p1(o1,S1,B1);try{w1=qs(g1,w1)}catch{continue}if(Oo(b1(w1),T1))break}if(x1>=5)return null;for(x1=0;;){var M1=qs(g1,w1);if(tu(b1(d1(w1,[M1])),v1))break;if(++x1>=10)return null;w1=C1(M1)}return w1}function p1(g1,o1,S1){var v1=S1==="BigNumber",B1=S1==="Complex",T1=Array(g1).fill(0).map(w1=>2*Math.random()-1);return v1&&(T1=T1.map(w1=>j(w1))),B1&&(T1=T1.map(w1=>eu(w1))),T1=d1(T1,o1),C1(T1,S1)}function d1(g1,o1){var S1=Lt(g1);for(var v1 of o1)v1=fr(v1,S1),g1=o(g1,h(b(vu(v1,g1),vu(v1,v1)),v1));return g1}function b1(g1){return $(_(vu(g1,g1)))}function C1(g1,o1){var S1=o1==="BigNumber",v1=o1==="Complex",B1=S1?j(1):v1?eu(1):1;return h(b(B1,b1(g1)),g1)}return t1}function createRealSymmetric(a){var{config:s,addScalar:o,subtract:c,abs:h,atan:d,cos:b,sin:_,multiplyScalar:$,inv:j,bignumber:Xt,multiply:Lt,add:fr}=a;function Jr(r1,a1){var i1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.relTol,s1=arguments.length>3?arguments[3]:void 0,c1=arguments.length>4?arguments[4]:void 0;if(s1==="number")return Js(r1,i1,c1);if(s1==="BigNumber")return qs(r1,i1,c1);throw TypeError("Unsupported data type: "+s1)}function Js(r1,a1,i1){var s1=r1.length,c1=Math.abs(a1/s1),h1,m1;if(i1){m1=new Array(s1);for(var l1=0;l1<s1;l1++)m1[l1]=Array(s1).fill(0),m1[l1][l1]=1}for(var f1=vu(r1);Math.abs(f1[1])>=Math.abs(c1);){var p1=f1[0][0],d1=f1[0][1];h1=zo(r1[p1][p1],r1[d1][d1],r1[p1][d1]),r1=Bo(r1,h1,p1,d1),i1&&(m1=eu(m1,h1,p1,d1)),f1=vu(r1)}for(var b1=Array(s1).fill(0),C1=0;C1<s1;C1++)b1[C1]=r1[C1][C1];return e1(clone$3(b1),m1,i1)}function qs(r1,a1,i1){var s1=r1.length,c1=h(a1/s1),h1,m1;if(i1){m1=new Array(s1);for(var l1=0;l1<s1;l1++)m1[l1]=Array(s1).fill(0),m1[l1][l1]=1}for(var f1=t1(r1);h(f1[1])>=h(c1);){var p1=f1[0][0],d1=f1[0][1];h1=js(r1[p1][p1],r1[d1][d1],r1[p1][d1]),r1=tu(r1,h1,p1,d1),i1&&(m1=Oo(m1,h1,p1,d1)),f1=t1(r1)}for(var b1=Array(s1).fill(0),C1=0;C1<s1;C1++)b1[C1]=r1[C1][C1];return e1(clone$3(b1),m1,i1)}function zo(r1,a1,i1){var s1=a1-r1;return Math.abs(s1)<=s.relTol?Math.PI/4:.5*Math.atan(2*i1/(a1-r1))}function js(r1,a1,i1){var s1=c(a1,r1);return h(s1)<=s.relTol?Xt(-1).acos().div(4):$(.5,d(Lt(2,i1,j(s1))))}function eu(r1,a1,i1,s1){for(var c1=r1.length,h1=Math.cos(a1),m1=Math.sin(a1),l1=Array(c1).fill(0),f1=Array(c1).fill(0),p1=0;p1<c1;p1++)l1[p1]=h1*r1[p1][i1]-m1*r1[p1][s1],f1[p1]=m1*r1[p1][i1]+h1*r1[p1][s1];for(var d1=0;d1<c1;d1++)r1[d1][i1]=l1[d1],r1[d1][s1]=f1[d1];return r1}function Oo(r1,a1,i1,s1){for(var c1=r1.length,h1=b(a1),m1=_(a1),l1=Array(c1).fill(Xt(0)),f1=Array(c1).fill(Xt(0)),p1=0;p1<c1;p1++)l1[p1]=c($(h1,r1[p1][i1]),$(m1,r1[p1][s1])),f1[p1]=o($(m1,r1[p1][i1]),$(h1,r1[p1][s1]));for(var d1=0;d1<c1;d1++)r1[d1][i1]=l1[d1],r1[d1][s1]=f1[d1];return r1}function tu(r1,a1,i1,s1){for(var c1=r1.length,h1=Xt(b(a1)),m1=Xt(_(a1)),l1=$(h1,h1),f1=$(m1,m1),p1=Array(c1).fill(Xt(0)),d1=Array(c1).fill(Xt(0)),b1=Lt(Xt(2),h1,m1,r1[i1][s1]),C1=o(c($(l1,r1[i1][i1]),b1),$(f1,r1[s1][s1])),g1=fr($(f1,r1[i1][i1]),b1,$(l1,r1[s1][s1])),o1=0;o1<c1;o1++)p1[o1]=c($(h1,r1[i1][o1]),$(m1,r1[s1][o1])),d1[o1]=o($(m1,r1[i1][o1]),$(h1,r1[s1][o1]));r1[i1][i1]=C1,r1[s1][s1]=g1,r1[i1][s1]=Xt(0),r1[s1][i1]=Xt(0);for(var S1=0;S1<c1;S1++)S1!==i1&&S1!==s1&&(r1[i1][S1]=p1[S1],r1[S1][i1]=p1[S1],r1[s1][S1]=d1[S1],r1[S1][s1]=d1[S1]);return r1}function Bo(r1,a1,i1,s1){for(var c1=r1.length,h1=Math.cos(a1),m1=Math.sin(a1),l1=h1*h1,f1=m1*m1,p1=Array(c1).fill(0),d1=Array(c1).fill(0),b1=l1*r1[i1][i1]-2*h1*m1*r1[i1][s1]+f1*r1[s1][s1],C1=f1*r1[i1][i1]+2*h1*m1*r1[i1][s1]+l1*r1[s1][s1],g1=0;g1<c1;g1++)p1[g1]=h1*r1[i1][g1]-m1*r1[s1][g1],d1[g1]=m1*r1[i1][g1]+h1*r1[s1][g1];r1[i1][i1]=b1,r1[s1][s1]=C1,r1[i1][s1]=0,r1[s1][i1]=0;for(var o1=0;o1<c1;o1++)o1!==i1&&o1!==s1&&(r1[i1][o1]=p1[o1],r1[o1][i1]=p1[o1],r1[s1][o1]=d1[o1],r1[o1][s1]=d1[o1]);return r1}function vu(r1){for(var a1=r1.length,i1=0,s1=[0,1],c1=0;c1<a1;c1++)for(var h1=c1+1;h1<a1;h1++)Math.abs(i1)<Math.abs(r1[c1][h1])&&(i1=Math.abs(r1[c1][h1]),s1=[c1,h1]);return[s1,i1]}function t1(r1){for(var a1=r1.length,i1=0,s1=[0,1],c1=0;c1<a1;c1++)for(var h1=c1+1;h1<a1;h1++)h(i1)<h(r1[c1][h1])&&(i1=h(r1[c1][h1]),s1=[c1,h1]);return[s1,i1]}function e1(r1,a1,i1){var s1=r1.length,c1=Array(s1),h1;if(i1){h1=Array(s1);for(var m1=0;m1<s1;m1++)h1[m1]=Array(s1)}for(var l1=0;l1<s1;l1++){for(var f1=0,p1=r1[0],d1=0;d1<r1.length;d1++)h(r1[d1])<h(p1)&&(f1=d1,p1=r1[f1]);if(c1[l1]=r1.splice(f1,1)[0],i1)for(var b1=0;b1<s1;b1++)h1[l1][b1]=a1[b1][f1],a1[b1].splice(f1,1)}if(!i1)return{values:c1};var C1=h1.map((g1,o1)=>({value:c1[o1],vector:g1}));return{values:c1,eigenvectors:C1}}return Jr}var name$18="eigs",dependencies$18=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],createEigs=factory(name$18,dependencies$18,a=>{var{config:s,typed:o,matrix:c,addScalar:h,subtract:d,equal:b,abs:_,atan:$,cos:j,sin:Xt,multiplyScalar:Lt,divideScalar:fr,inv:Jr,bignumber:Js,multiply:qs,add:zo,larger:js,column:eu,flatten:Oo,number:tu,complex:Bo,sqrt:vu,diag:t1,size:e1,reshape:r1,qr:a1,usolve:i1,usolveAll:s1,im:c1,re:h1,smaller:m1,matrixFromColumns:l1,dot:f1}=a,p1=createRealSymmetric({config:s,addScalar:h,subtract:d,abs:_,atan:$,cos:j,sin:Xt,multiplyScalar:Lt,inv:Jr,bignumber:Js,multiply:qs,add:zo}),d1=createComplexEigs({addScalar:h,subtract:d,multiply:qs,multiplyScalar:Lt,flatten:Oo,divideScalar:fr,sqrt:vu,abs:_,bignumber:Js,diag:t1,size:e1,reshape:r1,qr:a1,inv:Jr,usolve:i1,usolveAll:s1,equal:b,complex:Bo,larger:js,smaller:m1,matrixFromColumns:l1,dot:f1});return o("eigs",{Array:function(T1){return b1(c(T1))},"Array, number|BigNumber":function(T1,w1){return b1(c(T1),{precision:w1})},"Array, Object"(B1,T1){return b1(c(B1),T1)},Matrix:function(T1){return b1(T1,{matricize:!0})},"Matrix, number|BigNumber":function(T1,w1){return b1(T1,{precision:w1,matricize:!0})},"Matrix, Object":function(T1,w1){var x1={matricize:!0};return _extends$1(x1,w1),b1(T1,x1)}});function b1(B1){var T1,w1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x1="eigenvectors"in w1?w1.eigenvectors:!0,M1=(T1=w1.precision)!==null&&T1!==void 0?T1:s.relTol,O1=C1(B1,M1,x1);return w1.matricize&&(O1.values=c(O1.values),x1&&(O1.eigenvectors=O1.eigenvectors.map(N1=>{var{value:L1,vector:G1}=N1;return{value:L1,vector:c(G1)}}))),x1&&Object.defineProperty(O1,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),O1}function C1(B1,T1,w1){var x1=B1.toArray(),M1=B1.size();if(M1.length!==2||M1[0]!==M1[1])throw new RangeError("Matrix must be square (size: ".concat(format$1(M1),")"));var O1=M1[0];if(o1(x1,O1,T1)&&(S1(x1,O1),g1(x1,O1,T1))){var N1=v1(B1,x1,O1);return p1(x1,O1,T1,N1,w1)}var L1=v1(B1,x1,O1);return d1(x1,O1,T1,L1,w1)}function g1(B1,T1,w1){for(var x1=0;x1<T1;x1++)for(var M1=x1;M1<T1;M1++)if(js(Js(_(d(B1[x1][M1],B1[M1][x1]))),w1))return!1;return!0}function o1(B1,T1,w1){for(var x1=0;x1<T1;x1++)for(var M1=0;M1<T1;M1++)if(js(Js(_(c1(B1[x1][M1]))),w1))return!1;return!0}function S1(B1,T1){for(var w1=0;w1<T1;w1++)for(var x1=0;x1<T1;x1++)B1[w1][x1]=h1(B1[w1][x1])}function v1(B1,T1,w1){var x1=B1.datatype();if(x1==="number"||x1==="BigNumber"||x1==="Complex")return x1;for(var M1=!1,O1=!1,N1=!1,L1=0;L1<w1;L1++)for(var G1=0;G1<w1;G1++){var q1=T1[L1][G1];if(isNumber(q1)||isFraction(q1))M1=!0;else if(isBigNumber(q1))O1=!0;else if(isComplex(q1))N1=!0;else throw TypeError("Unsupported type in Matrix: "+typeOf$1(q1))}if(O1&&N1&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),N1){for(var H1=0;H1<w1;H1++)for(var W1=0;W1<w1;W1++)T1[H1][W1]=Bo(T1[H1][W1]);return"Complex"}if(O1){for(var j1=0;j1<w1;j1++)for(var Q1=0;Q1<w1;Q1++)T1[j1][Q1]=Js(T1[j1][Q1]);return"BigNumber"}if(M1){for(var rv=0;rv<w1;rv++)for(var $1=0;$1<w1;$1++)T1[rv][$1]=tu(T1[rv][$1]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),name$17="expm",dependencies$17=["typed","abs","add","identity","inv","multiply"],createExpm=factory(name$17,dependencies$17,a=>{var{typed:s,abs:o,add:c,identity:h,inv:d,multiply:b}=a;return s(name$17,{Matrix:function(Lt){var fr=Lt.size();if(fr.length!==2||fr[0]!==fr[1])throw new RangeError("Matrix must be square (size: "+format$1(fr)+")");for(var Jr=fr[0],Js=1e-15,qs=_(Lt),zo=$(qs,Js),js=zo.q,eu=zo.j,Oo=b(Lt,Math.pow(2,-eu)),tu=h(Jr),Bo=h(Jr),vu=1,t1=Oo,e1=-1,r1=1;r1<=js;r1++)r1>1&&(t1=b(t1,Oo),e1=-e1),vu=vu*(js-r1+1)/((2*js-r1+1)*r1),tu=c(tu,b(vu,t1)),Bo=c(Bo,b(vu*e1,t1));for(var a1=b(d(Bo),tu),i1=0;i1<eu;i1++)a1=b(a1,a1);return isSparseMatrix(Lt)?Lt.createSparseMatrix(a1):a1}});function _(Xt){for(var Lt=Xt.size()[0],fr=0,Jr=0;Jr<Lt;Jr++){for(var Js=0,qs=0;qs<Lt;qs++)Js+=o(Xt.get([Jr,qs]));fr=Math.max(Js,fr)}return fr}function $(Xt,Lt){for(var fr=30,Jr=0;Jr<fr;Jr++)for(var Js=0;Js<=Jr;Js++){var qs=Jr-Js;if(j(Xt,Js,qs)<Lt)return{q:Js,j:qs}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function j(Xt,Lt,fr){for(var Jr=1,Js=2;Js<=Lt;Js++)Jr*=Js;for(var qs=Jr,zo=Lt+1;zo<=2*Lt;zo++)qs*=zo;var js=qs*(2*Lt+1);return 8*Math.pow(Xt/Math.pow(2,fr),2*Lt)*Jr*Jr/(qs*js)}}),name$16="sqrtm",dependencies$16=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],createSqrtm=factory(name$16,dependencies$16,a=>{var{typed:s,abs:o,add:c,multiply:h,map:d,sqrt:b,subtract:_,inv:$,size:j,max:Xt,identity:Lt}=a,fr=1e3,Jr=1e-6;function Js(qs){var zo,js=0,eu=qs,Oo=Lt(j(qs));do{var tu=eu;if(eu=h(.5,c(tu,$(Oo))),Oo=h(.5,c(Oo,$(tu))),zo=Xt(o(_(eu,tu))),zo>Jr&&++js>fr)throw new Error("computing square root of matrix: iterative method could not converge")}while(zo>Jr);return eu}return s(name$16,{"Array | Matrix":function(zo){var js=isMatrix(zo)?zo.size():arraySize(zo);switch(js.length){case 1:if(js[0]===1)return d(zo,b);throw new RangeError("Matrix must be square (size: "+format$1(js)+")");case 2:{var eu=js[0],Oo=js[1];if(eu===Oo)return Js(zo);throw new RangeError("Matrix must be square (size: "+format$1(js)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+format$1(js)+")")}}})}),name$15="sylvester",dependencies$15=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],createSylvester=factory(name$15,dependencies$15,a=>{var{typed:s,schur:o,matrixFromColumns:c,matrix:h,multiply:d,range:b,concat:_,transpose:$,index:j,subset:Xt,add:Lt,subtract:fr,identity:Jr,lusolve:Js,abs:qs,config:zo}=a;return s(name$15,{"Matrix, Matrix, Matrix":js,"Array, Matrix, Matrix":function(Oo,tu,Bo){return js(h(Oo),tu,Bo)},"Array, Array, Matrix":function(Oo,tu,Bo){return js(h(Oo),h(tu),Bo)},"Array, Matrix, Array":function(Oo,tu,Bo){return js(h(Oo),tu,h(Bo))},"Matrix, Array, Matrix":function(Oo,tu,Bo){return js(Oo,h(tu),Bo)},"Matrix, Array, Array":function(Oo,tu,Bo){return js(Oo,h(tu),h(Bo))},"Matrix, Matrix, Array":function(Oo,tu,Bo){return js(Oo,tu,h(Bo))},"Array, Array, Array":function(Oo,tu,Bo){return js(h(Oo),h(tu),h(Bo)).toArray()}});function js(eu,Oo,tu){for(var Bo=Oo.size()[0],vu=eu.size()[0],t1=o(eu),e1=t1.T,r1=t1.U,a1=o(d(-1,Oo)),i1=a1.T,s1=a1.U,c1=d(d($(r1),tu),s1),h1=b(0,vu),m1=[],l1=(L1,G1)=>_(L1,G1,1),f1=(L1,G1)=>_(L1,G1,0),p1=0;p1<Bo;p1++)if(p1<Bo-1&&qs(Xt(i1,j(p1+1,p1)))>1e-5){for(var d1=f1(Xt(c1,j(h1,[p1])),Xt(c1,j(h1,[p1+1]))),b1=0;b1<p1;b1++)d1=Lt(d1,f1(d(m1[b1],Xt(i1,j(b1,p1))),d(m1[b1],Xt(i1,j(b1,p1+1)))));var C1=d(Jr(vu),d(-1,Xt(i1,j(p1,p1)))),g1=d(Jr(vu),d(-1,Xt(i1,j(p1+1,p1)))),o1=d(Jr(vu),d(-1,Xt(i1,j(p1,p1+1)))),S1=d(Jr(vu),d(-1,Xt(i1,j(p1+1,p1+1)))),v1=f1(l1(Lt(e1,C1),g1),l1(o1,Lt(e1,S1))),B1=Js(v1,d1);m1[p1]=B1.subset(j(b(0,vu),[0])),m1[p1+1]=B1.subset(j(b(vu,2*vu),[0])),p1++}else{for(var T1=Xt(c1,j(h1,[p1])),w1=0;w1<p1;w1++)T1=Lt(T1,d(m1[w1],Xt(i1,j(w1,p1))));var x1=Xt(i1,j(p1,p1)),M1=fr(e1,d(x1,Jr(vu)));m1[p1]=Js(M1,T1)}var O1=h(c(...m1)),N1=d(r1,d(O1,$(s1)));return N1}}),name$14="schur",dependencies$14=["typed","matrix","identity","multiply","qr","norm","subtract"],createSchur=factory(name$14,dependencies$14,a=>{var{typed:s,matrix:o,identity:c,multiply:h,qr:d,norm:b,subtract:_}=a;return s(name$14,{Array:function(Xt){var Lt=$(o(Xt));return{U:Lt.U.valueOf(),T:Lt.T.valueOf()}},Matrix:function(Xt){return $(Xt)}});function $(j){var Xt=j.size()[0],Lt=j,fr=c(Xt),Jr=0,Js;do{Js=Lt;var qs=d(Lt),zo=qs.Q,js=qs.R;if(Lt=h(js,zo),fr=h(fr,zo),Jr++>100)break}while(b(_(Lt,Js))>1e-4);return{U:fr,T:Lt}}}),name$13="lyap",dependencies$13=["typed","matrix","sylvester","multiply","transpose"],createLyap=factory(name$13,dependencies$13,a=>{var{typed:s,matrix:o,sylvester:c,multiply:h,transpose:d}=a;return s(name$13,{"Matrix, Matrix":function(_,$){return c(_,d(_),h(-1,$))},"Array, Matrix":function(_,$){return c(o(_),d(o(_)),h(-1,$))},"Matrix, Array":function(_,$){return c(_,d(o(_)),o(h(-1,$)))},"Array, Array":function(_,$){return c(o(_),d(o(_)),o(h(-1,$))).toArray()}})}),name$12="divide",dependencies$12=["typed","matrix","multiply","equalScalar","divideScalar","inv"],createDivide=factory(name$12,dependencies$12,a=>{var{typed:s,matrix:o,multiply:c,equalScalar:h,divideScalar:d,inv:b}=a,_=createMatAlgo11xS0s({typed:s,equalScalar:h}),$=createMatAlgo14xDs({typed:s});return s("divide",extend({"Array | Matrix, Array | Matrix":function(Xt,Lt){return c(Xt,b(Lt))},"DenseMatrix, any":function(Xt,Lt){return $(Xt,Lt,d,!1)},"SparseMatrix, any":function(Xt,Lt){return _(Xt,Lt,d,!1)},"Array, any":function(Xt,Lt){return $(o(Xt),Lt,d,!1).valueOf()},"any, Array | Matrix":function(Xt,Lt){return c(Xt,b(Lt))}},d.signatures))}),name$11="distance",dependencies$11=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],createDistance=factory(name$11,dependencies$11,a=>{var{typed:s,addScalar:o,subtractScalar:c,multiplyScalar:h,divideScalar:d,deepEqual:b,sqrt:_,abs:$}=a;return s(name$11,{"Array, Array, Array":function(Bo,vu,t1){if(Bo.length===2&&vu.length===2&&t1.length===2){if(!Xt(Bo))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!Xt(vu))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!Xt(t1))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(b(vu,t1))throw new TypeError("LinePoint1 should not be same with LinePoint2");var e1=c(t1[1],vu[1]),r1=c(vu[0],t1[0]),a1=c(h(t1[0],vu[1]),h(vu[0],t1[1]));return zo(Bo[0],Bo[1],e1,r1,a1)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(Bo,vu,t1){if(Object.keys(Bo).length===2&&Object.keys(vu).length===2&&Object.keys(t1).length===2){if(!Xt(Bo))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!Xt(vu))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!Xt(t1))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(b(Js(vu),Js(t1)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in Bo&&"pointY"in Bo&&"lineOnePtX"in vu&&"lineOnePtY"in vu&&"lineTwoPtX"in t1&&"lineTwoPtY"in t1){var e1=c(t1.lineTwoPtY,vu.lineOnePtY),r1=c(vu.lineOnePtX,t1.lineTwoPtX),a1=c(h(t1.lineTwoPtX,vu.lineOnePtY),h(vu.lineOnePtX,t1.lineTwoPtY));return zo(Bo.pointX,Bo.pointY,e1,r1,a1)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(Bo,vu){if(Bo.length===2&&vu.length===3){if(!Xt(Bo))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!Lt(vu))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return zo(Bo[0],Bo[1],vu[0],vu[1],vu[2])}else if(Bo.length===3&&vu.length===6){if(!Lt(Bo))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!Jr(vu))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return js(Bo[0],Bo[1],Bo[2],vu[0],vu[1],vu[2],vu[3],vu[4],vu[5])}else if(Bo.length===vu.length&&Bo.length>0){if(!fr(Bo))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!fr(vu))throw new TypeError("All values of an array should be numbers or BigNumbers");return eu(Bo,vu)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(Bo,vu){if(Object.keys(Bo).length===2&&Object.keys(vu).length===3){if(!Xt(Bo))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!Lt(vu))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in Bo&&"pointY"in Bo&&"xCoeffLine"in vu&&"yCoeffLine"in vu&&"constant"in vu)return zo(Bo.pointX,Bo.pointY,vu.xCoeffLine,vu.yCoeffLine,vu.constant);throw new TypeError("Key names do not match")}else if(Object.keys(Bo).length===3&&Object.keys(vu).length===6){if(!Lt(Bo))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!Jr(vu))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in Bo&&"pointY"in Bo&&"x0"in vu&&"y0"in vu&&"z0"in vu&&"a"in vu&&"b"in vu&&"c"in vu)return js(Bo.pointX,Bo.pointY,Bo.pointZ,vu.x0,vu.y0,vu.z0,vu.a,vu.b,vu.c);throw new TypeError("Key names do not match")}else if(Object.keys(Bo).length===2&&Object.keys(vu).length===2){if(!Xt(Bo))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!Xt(vu))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in Bo&&"pointOneY"in Bo&&"pointTwoX"in vu&&"pointTwoY"in vu)return eu([Bo.pointOneX,Bo.pointOneY],[vu.pointTwoX,vu.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(Bo).length===3&&Object.keys(vu).length===3){if(!Lt(Bo))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!Lt(vu))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in Bo&&"pointOneY"in Bo&&"pointOneZ"in Bo&&"pointTwoX"in vu&&"pointTwoY"in vu&&"pointTwoZ"in vu)return eu([Bo.pointOneX,Bo.pointOneY,Bo.pointOneZ],[vu.pointTwoX,vu.pointTwoY,vu.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(Bo){if(!qs(Bo))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return Oo(Bo)}});function j(tu){return typeof tu=="number"||isBigNumber(tu)}function Xt(tu){return tu.constructor!==Array&&(tu=Js(tu)),j(tu[0])&&j(tu[1])}function Lt(tu){return tu.constructor!==Array&&(tu=Js(tu)),j(tu[0])&&j(tu[1])&&j(tu[2])}function fr(tu){return Array.isArray(tu)||(tu=Js(tu)),tu.every(j)}function Jr(tu){return tu.constructor!==Array&&(tu=Js(tu)),j(tu[0])&&j(tu[1])&&j(tu[2])&&j(tu[3])&&j(tu[4])&&j(tu[5])}function Js(tu){for(var Bo=Object.keys(tu),vu=[],t1=0;t1<Bo.length;t1++)vu.push(tu[Bo[t1]]);return vu}function qs(tu){if(tu[0].length===2&&j(tu[0][0])&&j(tu[0][1])){if(tu.some(Bo=>Bo.length!==2||!j(Bo[0])||!j(Bo[1])))return!1}else if(tu[0].length===3&&j(tu[0][0])&&j(tu[0][1])&&j(tu[0][2])){if(tu.some(Bo=>Bo.length!==3||!j(Bo[0])||!j(Bo[1])||!j(Bo[2])))return!1}else return!1;return!0}function zo(tu,Bo,vu,t1,e1){var r1=$(o(o(h(vu,tu),h(t1,Bo)),e1)),a1=_(o(h(vu,vu),h(t1,t1)));return d(r1,a1)}function js(tu,Bo,vu,t1,e1,r1,a1,i1,s1){var c1=[c(h(c(e1,Bo),s1),h(c(r1,vu),i1)),c(h(c(r1,vu),a1),h(c(t1,tu),s1)),c(h(c(t1,tu),i1),h(c(e1,Bo),a1))];c1=_(o(o(h(c1[0],c1[0]),h(c1[1],c1[1])),h(c1[2],c1[2])));var h1=_(o(o(h(a1,a1),h(i1,i1)),h(s1,s1)));return d(c1,h1)}function eu(tu,Bo){for(var vu=tu.length,t1=0,e1=0,r1=0;r1<vu;r1++)e1=c(tu[r1],Bo[r1]),t1=o(h(e1,e1),t1);return _(t1)}function Oo(tu){for(var Bo=[],vu=[],t1=[],e1=0;e1<tu.length-1;e1++)for(var r1=e1+1;r1<tu.length;r1++)tu[0].length===2?(vu=[tu[e1][0],tu[e1][1]],t1=[tu[r1][0],tu[r1][1]]):tu[0].length===3&&(vu=[tu[e1][0],tu[e1][1],tu[e1][2]],t1=[tu[r1][0],tu[r1][1],tu[r1][2]]),Bo.push(eu(vu,t1));return Bo}}),name$10="intersect",dependencies$10=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],createIntersect=factory(name$10,dependencies$10,a=>{var{typed:s,config:o,abs:c,add:h,addScalar:d,matrix:b,multiply:_,multiplyScalar:$,divideScalar:j,subtract:Xt,smaller:Lt,equalScalar:fr,flatten:Jr,isZero:Js,isNumeric:qs}=a;return s("intersect",{"Array, Array, Array":zo,"Array, Array, Array, Array":js,"Matrix, Matrix, Matrix":function(i1,s1,c1){var h1=zo(i1.valueOf(),s1.valueOf(),c1.valueOf());return h1===null?null:b(h1)},"Matrix, Matrix, Matrix, Matrix":function(i1,s1,c1,h1){var m1=js(i1.valueOf(),s1.valueOf(),c1.valueOf(),h1.valueOf());return m1===null?null:b(m1)}});function zo(a1,i1,s1){if(a1=eu(a1),i1=eu(i1),s1=eu(s1),!tu(a1))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!tu(i1))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!Bo(s1))throw new TypeError("Array with 4 numbers expected as third argument");return r1(a1[0],a1[1],a1[2],i1[0],i1[1],i1[2],s1[0],s1[1],s1[2],s1[3])}function js(a1,i1,s1,c1){if(a1=eu(a1),i1=eu(i1),s1=eu(s1),c1=eu(c1),a1.length===2){if(!Oo(a1))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!Oo(i1))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!Oo(s1))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!Oo(c1))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return vu(a1,i1,s1,c1)}else if(a1.length===3){if(!tu(a1))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!tu(i1))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!tu(s1))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!tu(c1))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return e1(a1[0],a1[1],a1[2],i1[0],i1[1],i1[2],s1[0],s1[1],s1[2],c1[0],c1[1],c1[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function eu(a1){return a1.length===1?a1[0]:a1.length>1&&Array.isArray(a1[0])&&a1.every(i1=>Array.isArray(i1)&&i1.length===1)?Jr(a1):a1}function Oo(a1){return a1.length===2&&qs(a1[0])&&qs(a1[1])}function tu(a1){return a1.length===3&&qs(a1[0])&&qs(a1[1])&&qs(a1[2])}function Bo(a1){return a1.length===4&&qs(a1[0])&&qs(a1[1])&&qs(a1[2])&&qs(a1[3])}function vu(a1,i1,s1,c1){var h1=a1,m1=s1,l1=Xt(h1,i1),f1=Xt(m1,c1),p1=Xt($(l1[0],f1[1]),$(f1[0],l1[1]));if(Js(p1)||Lt(c(p1),o.relTol))return null;var d1=$(f1[0],h1[1]),b1=$(f1[1],h1[0]),C1=$(f1[0],m1[1]),g1=$(f1[1],m1[0]),o1=j(d(Xt(Xt(d1,b1),C1),g1),p1);return h(_(l1,o1),h1)}function t1(a1,i1,s1,c1,h1,m1,l1,f1,p1,d1,b1,C1){var g1=$(Xt(a1,i1),Xt(s1,c1)),o1=$(Xt(h1,m1),Xt(l1,f1)),S1=$(Xt(p1,d1),Xt(b1,C1));return d(d(g1,o1),S1)}function e1(a1,i1,s1,c1,h1,m1,l1,f1,p1,d1,b1,C1){var g1=t1(a1,l1,d1,l1,i1,f1,b1,f1,s1,p1,C1,p1),o1=t1(d1,l1,c1,a1,b1,f1,h1,i1,C1,p1,m1,s1),S1=t1(a1,l1,c1,a1,i1,f1,h1,i1,s1,p1,m1,s1),v1=t1(d1,l1,d1,l1,b1,f1,b1,f1,C1,p1,C1,p1),B1=t1(c1,a1,c1,a1,h1,i1,h1,i1,m1,s1,m1,s1),T1=Xt($(g1,o1),$(S1,v1)),w1=Xt($(B1,v1),$(o1,o1));if(Js(w1))return null;var x1=j(T1,w1),M1=j(d(g1,$(x1,o1)),v1),O1=d(a1,$(x1,Xt(c1,a1))),N1=d(i1,$(x1,Xt(h1,i1))),L1=d(s1,$(x1,Xt(m1,s1))),G1=d(l1,$(M1,Xt(d1,l1))),q1=d(f1,$(M1,Xt(b1,f1))),H1=d(p1,$(M1,Xt(C1,p1)));return fr(O1,G1)&&fr(N1,q1)&&fr(L1,H1)?[O1,N1,L1]:null}function r1(a1,i1,s1,c1,h1,m1,l1,f1,p1,d1){var b1=$(a1,l1),C1=$(c1,l1),g1=$(i1,f1),o1=$(h1,f1),S1=$(s1,p1),v1=$(m1,p1),B1=Xt(Xt(Xt(d1,b1),g1),S1),T1=Xt(Xt(Xt(d(d(C1,o1),v1),b1),g1),S1),w1=j(B1,T1),x1=d(a1,$(w1,Xt(c1,a1))),M1=d(i1,$(w1,Xt(h1,i1))),O1=d(s1,$(w1,Xt(m1,s1)));return[x1,M1,O1]}}),name$$="sum",dependencies$$=["typed","config","add","numeric"],createSum=factory(name$$,dependencies$$,a=>{var{typed:s,config:o,add:c,numeric:h}=a;return s(name$$,{"Array | Matrix":d,"Array | Matrix, number | BigNumber":b,"...":function($){if(containsCollections($))throw new TypeError("Scalar values expected in function sum");return d($)}});function d(_){var $;return deepForEach(_,function(j){try{$=$===void 0?j:c($,j)}catch(Xt){throw improveErrorMessage(Xt,"sum",j)}}),$===void 0&&($=h(0,o.number)),typeof $=="string"&&($=h($,safeNumberType($,o))),$}function b(_,$){try{var j=reduce(_,$,c);return j}catch(Xt){throw improveErrorMessage(Xt,"sum")}}}),name$_="cumsum",dependencies$_=["typed","add","unaryPlus"],createCumSum=factory(name$_,dependencies$_,a=>{var{typed:s,add:o,unaryPlus:c}=a;return s(name$_,{Array:h,Matrix:function(j){return j.create(h(j.valueOf(),j.datatype()))},"Array, number | BigNumber":b,"Matrix, number | BigNumber":function(j,Xt){return j.create(b(j.valueOf(),Xt),j.datatype())},"...":function(j){if(containsCollections(j))throw new TypeError("All values expected to be scalar in function cumsum");return h(j)}});function h($){try{return d($)}catch(j){throw improveErrorMessage(j,name$_)}}function d($){if($.length===0)return[];for(var j=[c($[0])],Xt=1;Xt<$.length;++Xt)j.push(o(j[Xt-1],$[Xt]));return j}function b($,j){var Xt=arraySize($);if(j<0||j>=Xt.length)throw new IndexError(j,Xt.length);try{return _($,j)}catch(Lt){throw improveErrorMessage(Lt,name$_)}}function _($,j){var Xt,Lt,fr;if(j<=0){var Jr=$[0][0];if(Array.isArray(Jr)){for(fr=_switch$1($),Lt=[],Xt=0;Xt<fr.length;Xt++)Lt[Xt]=_(fr[Xt],j-1);return Lt}else return d($)}else{for(Lt=[],Xt=0;Xt<$.length;Xt++)Lt[Xt]=_($[Xt],j-1);return Lt}}}),name$Z="mean",dependencies$Z=["typed","add","divide"],createMean=factory(name$Z,dependencies$Z,a=>{var{typed:s,add:o,divide:c}=a;return s(name$Z,{"Array | Matrix":d,"Array | Matrix, number | BigNumber":h,"...":function(_){if(containsCollections(_))throw new TypeError("Scalar values expected in function mean");return d(_)}});function h(b,_){try{var $=reduce(b,_,o),j=Array.isArray(b)?arraySize(b):b.size();return c($,j[_])}catch(Xt){throw improveErrorMessage(Xt,"mean")}}function d(b){var _,$=0;if(deepForEach(b,function(j){try{_=_===void 0?j:o(_,j),$++}catch(Xt){throw improveErrorMessage(Xt,"mean",j)}}),$===0)throw new Error("Cannot calculate the mean of an empty array");return c(_,$)}}),name$Y="median",dependencies$Y=["typed","add","divide","compare","partitionSelect"],createMedian=factory(name$Y,dependencies$Y,a=>{var{typed:s,add:o,divide:c,compare:h,partitionSelect:d}=a;function b(j){try{j=flatten$1(j.valueOf());var Xt=j.length;if(Xt===0)throw new Error("Cannot calculate median of an empty array");if(Xt%2===0){for(var Lt=Xt/2-1,fr=d(j,Lt+1),Jr=j[Lt],Js=0;Js<Lt;++Js)h(j[Js],Jr)>0&&(Jr=j[Js]);return $(Jr,fr)}else{var qs=d(j,(Xt-1)/2);return _(qs)}}catch(zo){throw improveErrorMessage(zo,"median")}}var _=s({"number | BigNumber | Complex | Unit":function(Xt){return Xt}}),$=s({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(Xt,Lt){return c(o(Xt,Lt),2)}});return s(name$Y,{"Array | Matrix":b,"Array | Matrix, number | BigNumber":function(Xt,Lt){throw new Error("median(A, dim) is not yet supported")},"...":function(Xt){if(containsCollections(Xt))throw new TypeError("Scalar values expected in function median");return b(Xt)}})}),name$X="mad",dependencies$X=["typed","abs","map","median","subtract"],createMad=factory(name$X,dependencies$X,a=>{var{typed:s,abs:o,map:c,median:h,subtract:d}=a;return s(name$X,{"Array | Matrix":b,"...":function($){return b($)}});function b(_){if(_=flatten$1(_.valueOf()),_.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var $=h(_);return h(c(_,function(j){return o(d(j,$))}))}catch(j){throw j instanceof TypeError&&j.message.includes("median")?new TypeError(j.message.replace("median","mad")):improveErrorMessage(j,"mad")}}}),DEFAULT_NORMALIZATION="unbiased",name$W="variance",dependencies$W=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],createVariance=factory(name$W,dependencies$W,a=>{var{typed:s,add:o,subtract:c,multiply:h,divide:d,mapSlices:b,isNaN:_}=a;return s(name$W,{"Array | Matrix":function(Lt){return $(Lt,DEFAULT_NORMALIZATION)},"Array | Matrix, string":$,"Array | Matrix, number | BigNumber":function(Lt,fr){return j(Lt,fr,DEFAULT_NORMALIZATION)},"Array | Matrix, number | BigNumber, string":j,"...":function(Lt){return $(Lt,DEFAULT_NORMALIZATION)}});function $(Xt,Lt){var fr,Jr=0;if(Xt.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(deepForEach(Xt,function(zo){try{fr=fr===void 0?zo:o(fr,zo),Jr++}catch(js){throw improveErrorMessage(js,"variance",zo)}}),Jr===0)throw new Error("Cannot calculate variance of an empty array");var Js=d(fr,Jr);if(fr=void 0,deepForEach(Xt,function(zo){var js=c(zo,Js);fr=fr===void 0?h(js,js):o(fr,h(js,js))}),_(fr))return fr;switch(Lt){case"uncorrected":return d(fr,Jr);case"biased":return d(fr,Jr+1);case"unbiased":{var qs=isBigNumber(fr)?fr.mul(0):0;return Jr===1?qs:d(fr,Jr-1)}default:throw new Error('Unknown normalization "'+Lt+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function j(Xt,Lt,fr){try{if(Xt.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return b(Xt,Lt,Jr=>$(Jr,fr))}catch(Jr){throw improveErrorMessage(Jr,"variance")}}}),name$V="quantileSeq",dependencies$V=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],createQuantileSeq=factory(name$V,dependencies$V,a=>{var{typed:s,bignumber:o,add:c,subtract:h,divide:d,multiply:b,partitionSelect:_,compare:$,isInteger:j,smaller:Xt,smallerEq:Lt,larger:fr,mapSlices:Jr}=a;return s(name$V,{"Array | Matrix, number | BigNumber":(eu,Oo)=>qs(eu,Oo,!1),"Array | Matrix, number | BigNumber, number":(eu,Oo,tu)=>Js(eu,Oo,!1,tu,qs),"Array | Matrix, number | BigNumber, boolean":qs,"Array | Matrix, number | BigNumber, boolean, number":(eu,Oo,tu,Bo)=>Js(eu,Oo,tu,Bo,qs),"Array | Matrix, Array | Matrix":(eu,Oo)=>zo(eu,Oo,!1),"Array | Matrix, Array | Matrix, number":(eu,Oo,tu)=>Js(eu,Oo,!1,tu,zo),"Array | Matrix, Array | Matrix, boolean":zo,"Array | Matrix, Array | Matrix, boolean, number":(eu,Oo,tu,Bo)=>Js(eu,Oo,tu,Bo,zo)});function Js(eu,Oo,tu,Bo,vu){return Jr(eu,Bo,t1=>vu(t1,Oo,tu))}function qs(eu,Oo,tu){var Bo,vu=eu.valueOf();if(Xt(Oo,0))throw new Error("N/prob must be non-negative");if(Lt(Oo,1))return isNumber(Oo)?js(vu,Oo,tu):o(js(vu,Oo,tu));if(fr(Oo,1)){if(!j(Oo))throw new Error("N must be a positive integer");if(fr(Oo,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var t1=c(Oo,1);Bo=[];for(var e1=0;Xt(e1,Oo);e1++){var r1=d(e1+1,t1);Bo.push(js(vu,r1,tu))}return isNumber(Oo)?Bo:o(Bo)}}function zo(eu,Oo,tu){for(var Bo=eu.valueOf(),vu=Oo.valueOf(),t1=[],e1=0;e1<vu.length;++e1)t1.push(js(Bo,vu[e1],tu));return t1}function js(eu,Oo,tu){var Bo=flatten$1(eu),vu=Bo.length;if(vu===0)throw new Error("Cannot calculate quantile of an empty sequence");var t1=isNumber(Oo)?Oo*(vu-1):Oo.times(vu-1),e1=isNumber(Oo)?Math.floor(t1):t1.floor().toNumber(),r1=isNumber(Oo)?t1%1:t1.minus(e1);if(j(t1))return tu?Bo[t1]:_(Bo,isNumber(Oo)?t1:t1.valueOf());var a1,i1;if(tu)a1=Bo[e1],i1=Bo[e1+1];else{i1=_(Bo,e1+1),a1=Bo[e1];for(var s1=0;s1<e1;++s1)$(Bo[s1],a1)>0&&(a1=Bo[s1])}return c(b(a1,h(1,r1)),b(i1,r1))}}),name$U="std",dependencies$U=["typed","map","sqrt","variance"],createStd=factory(name$U,dependencies$U,a=>{var{typed:s,map:o,sqrt:c,variance:h}=a;return s(name$U,{"Array | Matrix":d,"Array | Matrix, string":d,"Array | Matrix, number | BigNumber":d,"Array | Matrix, number | BigNumber, string":d,"...":function(_){return d(_)}});function d(b,_){if(b.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var $=h.apply(null,arguments);return isCollection($)?o($,c):c($)}catch(j){throw j instanceof TypeError&&j.message.includes(" variance")?new TypeError(j.message.replace(" variance"," std")):j}}}),name$T="corr",dependencies$T=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],createCorr=factory(name$T,dependencies$T,a=>{var{typed:s,matrix:o,sqrt:c,sum:h,add:d,subtract:b,multiply:_,pow:$,divide:j}=a;return s(name$T,{"Array, Array":function(Jr,Js){return Xt(Jr,Js)},"Matrix, Matrix":function(Jr,Js){var qs=Xt(Jr.toArray(),Js.toArray());return Array.isArray(qs)?o(qs):qs}});function Xt(fr,Jr){var Js=[];if(Array.isArray(fr[0])&&Array.isArray(Jr[0])){if(fr.length!==Jr.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var qs=0;qs<fr.length;qs++){if(fr[qs].length!==Jr[qs].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");Js.push(Lt(fr[qs],Jr[qs]))}return Js}else{if(fr.length!==Jr.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return Lt(fr,Jr)}}function Lt(fr,Jr){var Js=fr.length,qs=h(fr),zo=h(Jr),js=fr.reduce((vu,t1,e1)=>d(vu,_(t1,Jr[e1])),0),eu=h(fr.map(vu=>$(vu,2))),Oo=h(Jr.map(vu=>$(vu,2))),tu=b(_(Js,js),_(qs,zo)),Bo=c(_(b(_(Js,eu),$(qs,2)),b(_(Js,Oo),$(zo,2))));return j(tu,Bo)}}),name$S="bernoulli",dependencies$S=["typed","config","isInteger","number","?BigNumber","?Fraction"],createBernoulli=factory(name$S,dependencies$S,a=>{var{typed:s,config:o,number:c,BigNumber:h,Fraction:d}=a,b=[void 0],_=[void 0],$=[void 0],j=50;return s(name$S,{number:Xt=>_bernoulli(Xt,Lt=>Lt,b,(Lt,fr)=>Lt+fr,(Lt,fr)=>Lt*fr,(Lt,fr)=>Lt/fr),"bigint | Fraction":Xt=>_bernoulli(c(Xt),Lt=>new d(Lt),_,(Lt,fr)=>Lt.add(fr),(Lt,fr)=>Lt.mul(fr),(Lt,fr)=>Lt.div(fr)),BigNumber:Xt=>(o.precision!==j&&($=[void 0],j=o.precision),_bernoulli(c(Xt),Lt=>new h(Lt),$,(Lt,fr)=>Lt.add(fr),(Lt,fr)=>Lt.mul(fr),(Lt,fr)=>Lt.div(fr)))})});function _bernoulli(a,s,o,c,h,d){if(a<0||!isInteger$1(a))throw new RangeError("Bernoulli index must be nonnegative integer");if(a===0)return s(1);if(a===1)return d(s(-1),s(2));if(a%2===1)return s(0);var b=s(1);o.length===1&&o.push([d(b,s(-3)),d(b,s(-2)),d(b,s(6))]);for(var _=a/2,$=s(0),j=s(2);o.length<=_;){for(var Xt=o.length,Lt=Math.floor((Xt+1)/2),fr=$,Jr=1;Jr<Lt;++Jr)fr=c(fr,h(o[Jr][0],o[Xt-Jr][0]));fr=h(fr,j),Xt%2===0&&(fr=c(fr,h(o[Lt][0],o[Lt][0]))),fr=d(fr,s(-(2*Xt+1)));var Js=d(h(o[Xt-1][1],s(-Xt*(2*Xt-1))),j);o.push([fr,Js,h(Js,fr)])}return o[_][2]}var name$R="combinations",dependencies$R=["typed"],createCombinations=factory(name$R,dependencies$R,a=>{var{typed:s}=a;return s(name$R,{"number, number":combinationsNumber,"BigNumber, BigNumber":function(c,h){var d=c.constructor,b,_,$=c.minus(h),j=new d(1);if(!isPositiveInteger$2(c)||!isPositiveInteger$2(h))throw new TypeError("Positive integer value expected in function combinations");if(h.gt(c))throw new TypeError("k must be less than n in function combinations");if(b=j,h.lt($))for(_=j;_.lte($);_=_.plus(j))b=b.times(h.plus(_)).dividedBy(_);else for(_=j;_.lte(h);_=_.plus(j))b=b.times($.plus(_)).dividedBy(_);return b}})});function isPositiveInteger$2(a){return a.isInteger()&&a.gte(0)}var name$Q="combinationsWithRep",dependencies$Q=["typed"],createCombinationsWithRep=factory(name$Q,dependencies$Q,a=>{var{typed:s}=a;return s(name$Q,{"number, number":function(c,h){if(!isInteger$1(c)||c<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!isInteger$1(h)||h<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(c<1)throw new TypeError("k must be less than or equal to n + k - 1");if(h<c-1){var d=product(c,c+h-1);return d/product(1,h)}var b=product(h+1,c+h-1);return b/product(1,c-1)},"BigNumber, BigNumber":function(c,h){var d=c.constructor,b,_,$=new d(1),j=c.minus($);if(!isPositiveInteger$1(c)||!isPositiveInteger$1(h))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(c.lt($))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(b=$,h.lt(j))for(_=$;_.lte(j);_=_.plus($))b=b.times(h.plus(_)).dividedBy(_);else for(_=$;_.lte(h);_=_.plus($))b=b.times(j.plus(_)).dividedBy(_);return b}})});function isPositiveInteger$1(a){return a.isInteger()&&a.gte(0)}var name$P="gamma",dependencies$P=["typed","config","multiplyScalar","pow","BigNumber","Complex"],createGamma=factory(name$P,dependencies$P,a=>{var{typed:s,config:o,multiplyScalar:c,pow:h,BigNumber:d,Complex:b}=a;function _(j){if(j.im===0)return gammaNumber(j.re);if(j.re<.5){var Xt=new b(1-j.re,-j.im),Lt=new b(Math.PI*j.re,Math.PI*j.im);return new b(Math.PI).div(Lt.sin()).div(_(Xt))}j=new b(j.re-1,j.im);for(var fr=new b(gammaP[0],0),Jr=1;Jr<gammaP.length;++Jr){var Js=new b(gammaP[Jr],0);fr=fr.add(Js.div(j.add(Jr)))}var qs=new b(j.re+gammaG+.5,j.im),zo=Math.sqrt(2*Math.PI),js=qs.pow(j.add(.5)),eu=qs.neg().exp();return fr.mul(zo).mul(js).mul(eu)}return s(name$P,{number:gammaNumber,Complex:_,BigNumber:function(Xt){if(Xt.isInteger())return Xt.isNegative()||Xt.isZero()?new d(1/0):$(Xt.minus(1));if(!Xt.isFinite())return new d(Xt.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function $(j){if(j<8)return new d([1,1,2,6,24,120,720,5040][j]);var Xt=o.precision+(Math.log(j.toNumber())|0),Lt=d.clone({precision:Xt});if(j%2===1)return j.times($(new d(j-1)));for(var fr=j,Jr=new Lt(j),Js=j.toNumber();fr>2;)fr-=2,Js+=fr,Jr=Jr.times(Js);return new d(Jr.toPrecision(d.precision))}}),name$O="lgamma",dependencies$O=["Complex","typed"],createLgamma=factory(name$O,dependencies$O,a=>{var{Complex:s,typed:o}=a,c=7,h=7,d=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return o(name$O,{number:lgammaNumber,Complex:b,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function b(j){var Xt=6.283185307179586,Lt=1.1447298858494002,fr=.1;if(j.isNaN())return new s(NaN,NaN);if(j.im===0)return new s(lgammaNumber(j.re),0);if(j.re>=c||Math.abs(j.im)>=h)return _(j);if(j.re<=fr){var Jr=copysign(Xt,j.im)*Math.floor(.5*j.re+.25),Js=j.mul(Math.PI).sin().log(),qs=b(new s(1-j.re,-j.im));return new s(Lt,Jr).sub(Js).sub(qs)}else return j.im>=0?$(j):$(j.conjugate()).conjugate()}function _(j){for(var Xt=j.sub(.5).mul(j.log()).sub(j).add(lnSqrt2PI),Lt=new s(1,0).div(j),fr=Lt.div(j),Jr=d[0],Js=d[1],qs=2*fr.re,zo=fr.re*fr.re+fr.im*fr.im,js=2;js<8;js++){var eu=Js;Js=-zo*Jr+d[js],Jr=qs*Jr+eu}var Oo=Lt.mul(fr.mul(Jr).add(Js));return Xt.add(Oo)}function $(j){var Xt=0,Lt=0,fr=j;for(j=j.add(1);j.re<=c;){fr=fr.mul(j);var Jr=fr.im<0?1:0;Jr!==0&&Lt===0&&Xt++,Lt=Jr,j=j.add(1)}return _(j).sub(fr.log()).sub(new s(0,Xt*2*Math.PI*1))}}),name$N="factorial",dependencies$N=["typed","gamma"],createFactorial=factory(name$N,dependencies$N,a=>{var{typed:s,gamma:o}=a;return s(name$N,{number:function(h){if(h<0)throw new Error("Value must be non-negative");return o(h+1)},BigNumber:function(h){if(h.isNegative())throw new Error("Value must be non-negative");return o(h.plus(1))},"Array | Matrix":s.referToSelf(c=>h=>deepMap(h,c))})}),name$M="kldivergence",dependencies$M=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],createKldivergence=factory(name$M,dependencies$M,a=>{var{typed:s,matrix:o,divide:c,sum:h,multiply:d,map:b,dotDivide:_,log:$,isNumeric:j}=a;return s(name$M,{"Array, Array":function(fr,Jr){return Xt(o(fr),o(Jr))},"Matrix, Array":function(fr,Jr){return Xt(fr,o(Jr))},"Array, Matrix":function(fr,Jr){return Xt(o(fr),Jr)},"Matrix, Matrix":function(fr,Jr){return Xt(fr,Jr)}});function Xt(Lt,fr){var Jr=fr.size().length,Js=Lt.size().length;if(Jr>1)throw new Error("first object must be one dimensional");if(Js>1)throw new Error("second object must be one dimensional");if(Jr!==Js)throw new Error("Length of two vectors must be equal");var qs=h(Lt);if(qs===0)throw new Error("Sum of elements in first object must be non zero");var zo=h(fr);if(zo===0)throw new Error("Sum of elements in second object must be non zero");var js=c(Lt,h(Lt)),eu=c(fr,h(fr)),Oo=h(d(js,b(_(js,eu),tu=>$(tu))));return j(Oo)?Oo:Number.NaN}}),name$L="multinomial",dependencies$L=["typed","add","divide","multiply","factorial","isInteger","isPositive"],createMultinomial=factory(name$L,dependencies$L,a=>{var{typed:s,add:o,divide:c,multiply:h,factorial:d,isInteger:b,isPositive:_}=a;return s(name$L,{"Array | Matrix":function(j){var Xt=0,Lt=1;return deepForEach(j,function(fr){if(!b(fr)||!_(fr))throw new TypeError("Positive integer value expected in function multinomial");Xt=o(Xt,fr),Lt=h(Lt,d(fr))}),c(d(Xt),Lt)}})}),name$K="permutations",dependencies$K=["typed","factorial"],createPermutations=factory(name$K,dependencies$K,a=>{var{typed:s,factorial:o}=a;return s(name$K,{"number | BigNumber":o,"number, number":function(h,d){if(!isInteger$1(h)||h<0)throw new TypeError("Positive integer value expected in function permutations");if(!isInteger$1(d)||d<0)throw new TypeError("Positive integer value expected in function permutations");if(d>h)throw new TypeError("second argument k must be less than or equal to first argument n");return product(h-d+1,h)},"BigNumber, BigNumber":function(h,d){var b,_;if(!isPositiveInteger(h)||!isPositiveInteger(d))throw new TypeError("Positive integer value expected in function permutations");if(d.gt(h))throw new TypeError("second argument k must be less than or equal to first argument n");var $=h.mul(0).add(1);for(b=$,_=h.minus(d).plus(1);_.lte(h);_=_.plus(1))b=b.times(_);return b}})});function isPositiveInteger(a){return a.isInteger()&&a.gte(0)}var alea$1={exports:{}};alea$1.exports;(function(a){(function(s,o,c){function h($){var j=this,Xt=_();j.next=function(){var Lt=2091639*j.s0+j.c*23283064365386963e-26;return j.s0=j.s1,j.s1=j.s2,j.s2=Lt-(j.c=Lt|0)},j.c=1,j.s0=Xt(" "),j.s1=Xt(" "),j.s2=Xt(" "),j.s0-=Xt($),j.s0<0&&(j.s0+=1),j.s1-=Xt($),j.s1<0&&(j.s1+=1),j.s2-=Xt($),j.s2<0&&(j.s2+=1),Xt=null}function d($,j){return j.c=$.c,j.s0=$.s0,j.s1=$.s1,j.s2=$.s2,j}function b($,j){var Xt=new h($),Lt=j&&j.state,fr=Xt.next;return fr.int32=function(){return Xt.next()*4294967296|0},fr.double=function(){return fr()+(fr()*2097152|0)*11102230246251565e-32},fr.quick=fr,Lt&&(typeof Lt=="object"&&d(Lt,Xt),fr.state=function(){return d(Xt,{})}),fr}function _(){var $=4022871197,j=function(Xt){Xt=String(Xt);for(var Lt=0;Lt<Xt.length;Lt++){$+=Xt.charCodeAt(Lt);var fr=.02519603282416938*$;$=fr>>>0,fr-=$,fr*=$,$=fr>>>0,fr-=$,$+=fr*4294967296}return($>>>0)*23283064365386963e-26};return j}o&&o.exports?o.exports=b:this.alea=b})(commonjsGlobal,a)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(a){(function(s,o,c){function h(_){var $=this,j="";$.x=0,$.y=0,$.z=0,$.w=0,$.next=function(){var Lt=$.x^$.x<<11;return $.x=$.y,$.y=$.z,$.z=$.w,$.w^=$.w>>>19^Lt^Lt>>>8},_===(_|0)?$.x=_:j+=_;for(var Xt=0;Xt<j.length+64;Xt++)$.x^=j.charCodeAt(Xt)|0,$.next()}function d(_,$){return $.x=_.x,$.y=_.y,$.z=_.z,$.w=_.w,$}function b(_,$){var j=new h(_),Xt=$&&$.state,Lt=function(){return(j.next()>>>0)/4294967296};return Lt.double=function(){do var fr=j.next()>>>11,Jr=(j.next()>>>0)/4294967296,Js=(fr+Jr)/(1<<21);while(Js===0);return Js},Lt.int32=j.next,Lt.quick=Lt,Xt&&(typeof Xt=="object"&&d(Xt,j),Lt.state=function(){return d(j,{})}),Lt}o&&o.exports?o.exports=b:this.xor128=b})(commonjsGlobal,a)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(a){(function(s,o,c){function h(_){var $=this,j="";$.next=function(){var Lt=$.x^$.x>>>2;return $.x=$.y,$.y=$.z,$.z=$.w,$.w=$.v,($.d=$.d+362437|0)+($.v=$.v^$.v<<4^(Lt^Lt<<1))|0},$.x=0,$.y=0,$.z=0,$.w=0,$.v=0,_===(_|0)?$.x=_:j+=_;for(var Xt=0;Xt<j.length+64;Xt++)$.x^=j.charCodeAt(Xt)|0,Xt==j.length&&($.d=$.x<<10^$.x>>>4),$.next()}function d(_,$){return $.x=_.x,$.y=_.y,$.z=_.z,$.w=_.w,$.v=_.v,$.d=_.d,$}function b(_,$){var j=new h(_),Xt=$&&$.state,Lt=function(){return(j.next()>>>0)/4294967296};return Lt.double=function(){do var fr=j.next()>>>11,Jr=(j.next()>>>0)/4294967296,Js=(fr+Jr)/(1<<21);while(Js===0);return Js},Lt.int32=j.next,Lt.quick=Lt,Xt&&(typeof Xt=="object"&&d(Xt,j),Lt.state=function(){return d(j,{})}),Lt}o&&o.exports?o.exports=b:this.xorwow=b})(commonjsGlobal,a)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(a){(function(s,o,c){function h(_){var $=this;$.next=function(){var Xt=$.x,Lt=$.i,fr,Jr;return fr=Xt[Lt],fr^=fr>>>7,Jr=fr^fr<<24,fr=Xt[Lt+1&7],Jr^=fr^fr>>>10,fr=Xt[Lt+3&7],Jr^=fr^fr>>>3,fr=Xt[Lt+4&7],Jr^=fr^fr<<7,fr=Xt[Lt+7&7],fr=fr^fr<<13,Jr^=fr^fr<<9,Xt[Lt]=Jr,$.i=Lt+1&7,Jr};function j(Xt,Lt){var fr,Jr=[];if(Lt===(Lt|0))Jr[0]=Lt;else for(Lt=""+Lt,fr=0;fr<Lt.length;++fr)Jr[fr&7]=Jr[fr&7]<<15^Lt.charCodeAt(fr)+Jr[fr+1&7]<<13;for(;Jr.length<8;)Jr.push(0);for(fr=0;fr<8&&Jr[fr]===0;++fr);for(fr==8?Jr[7]=-1:Jr[fr],Xt.x=Jr,Xt.i=0,fr=256;fr>0;--fr)Xt.next()}j($,_)}function d(_,$){return $.x=_.x.slice(),$.i=_.i,$}function b(_,$){_==null&&(_=+new Date);var j=new h(_),Xt=$&&$.state,Lt=function(){return(j.next()>>>0)/4294967296};return Lt.double=function(){do var fr=j.next()>>>11,Jr=(j.next()>>>0)/4294967296,Js=(fr+Jr)/(1<<21);while(Js===0);return Js},Lt.int32=j.next,Lt.quick=Lt,Xt&&(Xt.x&&d(Xt,j),Lt.state=function(){return d(j,{})}),Lt}o&&o.exports?o.exports=b:this.xorshift7=b})(commonjsGlobal,a)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(a){(function(s,o,c){function h(_){var $=this;$.next=function(){var Xt=$.w,Lt=$.X,fr=$.i,Jr,Js;return $.w=Xt=Xt+1640531527|0,Js=Lt[fr+34&127],Jr=Lt[fr=fr+1&127],Js^=Js<<13,Jr^=Jr<<17,Js^=Js>>>15,Jr^=Jr>>>12,Js=Lt[fr]=Js^Jr,$.i=fr,Js+(Xt^Xt>>>16)|0};function j(Xt,Lt){var fr,Jr,Js,qs,zo,js=[],eu=128;for(Lt===(Lt|0)?(Jr=Lt,Lt=null):(Lt=Lt+"\0",Jr=0,eu=Math.max(eu,Lt.length)),Js=0,qs=-32;qs<eu;++qs)Lt&&(Jr^=Lt.charCodeAt((qs+32)%Lt.length)),qs===0&&(zo=Jr),Jr^=Jr<<10,Jr^=Jr>>>15,Jr^=Jr<<4,Jr^=Jr>>>13,qs>=0&&(zo=zo+1640531527|0,fr=js[qs&127]^=Jr+zo,Js=fr==0?Js+1:0);for(Js>=128&&(js[(Lt&&Lt.length||0)&127]=-1),Js=127,qs=4*128;qs>0;--qs)Jr=js[Js+34&127],fr=js[Js=Js+1&127],Jr^=Jr<<13,fr^=fr<<17,Jr^=Jr>>>15,fr^=fr>>>12,js[Js]=Jr^fr;Xt.w=zo,Xt.X=js,Xt.i=Js}j($,_)}function d(_,$){return $.i=_.i,$.w=_.w,$.X=_.X.slice(),$}function b(_,$){_==null&&(_=+new Date);var j=new h(_),Xt=$&&$.state,Lt=function(){return(j.next()>>>0)/4294967296};return Lt.double=function(){do var fr=j.next()>>>11,Jr=(j.next()>>>0)/4294967296,Js=(fr+Jr)/(1<<21);while(Js===0);return Js},Lt.int32=j.next,Lt.quick=Lt,Xt&&(Xt.X&&d(Xt,j),Lt.state=function(){return d(j,{})}),Lt}o&&o.exports?o.exports=b:this.xor4096=b})(commonjsGlobal,a)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(a){(function(s,o,c){function h(_){var $=this,j="";$.next=function(){var Lt=$.b,fr=$.c,Jr=$.d,Js=$.a;return Lt=Lt<<25^Lt>>>7^fr,fr=fr-Jr|0,Jr=Jr<<24^Jr>>>8^Js,Js=Js-Lt|0,$.b=Lt=Lt<<20^Lt>>>12^fr,$.c=fr=fr-Jr|0,$.d=Jr<<16^fr>>>16^Js,$.a=Js-Lt|0},$.a=0,$.b=0,$.c=-1640531527,$.d=1367130551,_===Math.floor(_)?($.a=_/4294967296|0,$.b=_|0):j+=_;for(var Xt=0;Xt<j.length+20;Xt++)$.b^=j.charCodeAt(Xt)|0,$.next()}function d(_,$){return $.a=_.a,$.b=_.b,$.c=_.c,$.d=_.d,$}function b(_,$){var j=new h(_),Xt=$&&$.state,Lt=function(){return(j.next()>>>0)/4294967296};return Lt.double=function(){do var fr=j.next()>>>11,Jr=(j.next()>>>0)/4294967296,Js=(fr+Jr)/(1<<21);while(Js===0);return Js},Lt.int32=j.next,Lt.quick=Lt,Xt&&(typeof Xt=="object"&&d(Xt,j),Lt.state=function(){return d(j,{})}),Lt}o&&o.exports?o.exports=b:this.tychei=b})(commonjsGlobal,a)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$2={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);(function(a){(function(s,o,c){var h=256,d=6,b=52,_="random",$=c.pow(h,d),j=c.pow(2,b),Xt=j*2,Lt=h-1,fr;function Jr(tu,Bo,vu){var t1=[];Bo=Bo==!0?{entropy:!0}:Bo||{};var e1=js(zo(Bo.entropy?[tu,Oo(o)]:tu??eu(),3),t1),r1=new Js(t1),a1=function(){for(var i1=r1.g(d),s1=$,c1=0;i1<j;)i1=(i1+c1)*h,s1*=h,c1=r1.g(1);for(;i1>=Xt;)i1/=2,s1/=2,c1>>>=1;return(i1+c1)/s1};return a1.int32=function(){return r1.g(4)|0},a1.quick=function(){return r1.g(4)/4294967296},a1.double=a1,js(Oo(r1.S),o),(Bo.pass||vu||function(i1,s1,c1,h1){return h1&&(h1.S&&qs(h1,r1),i1.state=function(){return qs(r1,{})}),c1?(c[_]=i1,s1):i1})(a1,e1,"global"in Bo?Bo.global:this==c,Bo.state)}function Js(tu){var Bo,vu=tu.length,t1=this,e1=0,r1=t1.i=t1.j=0,a1=t1.S=[];for(vu||(tu=[vu++]);e1<h;)a1[e1]=e1++;for(e1=0;e1<h;e1++)a1[e1]=a1[r1=Lt&r1+tu[e1%vu]+(Bo=a1[e1])],a1[r1]=Bo;(t1.g=function(i1){for(var s1,c1=0,h1=t1.i,m1=t1.j,l1=t1.S;i1--;)s1=l1[h1=Lt&h1+1],c1=c1*h+l1[Lt&(l1[h1]=l1[m1=Lt&m1+s1])+(l1[m1]=s1)];return t1.i=h1,t1.j=m1,c1})(h)}function qs(tu,Bo){return Bo.i=tu.i,Bo.j=tu.j,Bo.S=tu.S.slice(),Bo}function zo(tu,Bo){var vu=[],t1=typeof tu,e1;if(Bo&&t1=="object")for(e1 in tu)try{vu.push(zo(tu[e1],Bo-1))}catch{}return vu.length?vu:t1=="string"?tu:tu+"\0"}function js(tu,Bo){for(var vu=tu+"",t1,e1=0;e1<vu.length;)Bo[Lt&e1]=Lt&(t1^=Bo[Lt&e1]*19)+vu.charCodeAt(e1++);return Oo(Bo)}function eu(){try{var tu;return fr&&(tu=fr.randomBytes)?tu=tu(h):(tu=new Uint8Array(h),(s.crypto||s.msCrypto).getRandomValues(tu)),Oo(tu)}catch{var Bo=s.navigator,vu=Bo&&Bo.plugins;return[+new Date,s,vu,s.screen,Oo(o)]}}function Oo(tu){return String.fromCharCode.apply(0,tu)}if(js(c.random(),o),a.exports){a.exports=Jr;try{fr=require$$0}catch{}}else c["seed"+_]=Jr})(typeof self<"u"?self:commonjsGlobal,[],Math)})(seedrandom$2);var seedrandomExports=seedrandom$2.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr$1=seedrandomExports;sr$1.alea=alea;sr$1.xor128=xor128;sr$1.xorwow=xorwow;sr$1.xorshift7=xorshift7;sr$1.xor4096=xor4096;sr$1.tychei=tychei;var seedrandom=sr$1;const seedrandom$1=getDefaultExportFromCjs(seedrandom);var singletonRandom=seedrandom$1(Date.now());function createRng(a){var s;function o(h){s=h===null?singletonRandom:seedrandom$1(String(h))}o(a);function c(){return s()}return c}var name$J="pickRandom",dependencies$J=["typed","config","?on"],createPickRandom=factory(name$J,dependencies$J,a=>{var{typed:s,config:o,on:c}=a,h=createRng(o.randomSeed);return c&&c("config",function(b,_){b.randomSeed!==_.randomSeed&&(h=createRng(b.randomSeed))}),s(name$J,{"Array | Matrix":function(_){return d(_,{})},"Array | Matrix, Object":function(_,$){return d(_,$)},"Array | Matrix, number":function(_,$){return d(_,{number:$})},"Array | Matrix, Array | Matrix":function(_,$){return d(_,{weights:$})},"Array | Matrix, Array | Matrix, number":function(_,$,j){return d(_,{number:j,weights:$})},"Array | Matrix, number, Array | Matrix":function(_,$,j){return d(_,{number:$,weights:j})}});function d(b,_){var{number:$,weights:j,elementWise:Xt=!0}=_,Lt=typeof $>"u";Lt&&($=1);var fr=isMatrix(b)?b.create:isMatrix(j)?j.create:null;b=b.valueOf(),j&&(j=j.valueOf()),Xt===!0&&(b=flatten$1(b),j=flatten$1(j));var Jr=0;if(typeof j<"u"){if(j.length!==b.length)throw new Error("Weights must have the same length as possibles");for(var Js=0,qs=j.length;Js<qs;Js++){if(!isNumber(j[Js])||j[Js]<0)throw new Error("Weights must be an array of positive numbers");Jr+=j[Js]}}for(var zo=b.length,js=[],eu;js.length<$;){if(typeof j>"u")eu=b[Math.floor(h()*zo)];else for(var Oo=h()*Jr,tu=0,Bo=b.length;tu<Bo;tu++)if(Oo-=j[tu],Oo<0){eu=b[tu];break}js.push(eu)}return Lt?js[0]:fr?fr(js):js}});function randomMatrix(a,s){var o=[];if(a=a.slice(0),a.length>1)for(var c=0,h=a.shift();c<h;c++)o.push(randomMatrix(a,s));else for(var d=0,b=a.shift();d<b;d++)o.push(s());return o}var name$I="random",dependencies$I=["typed","config","?on"],createRandom=factory(name$I,dependencies$I,a=>{var{typed:s,config:o,on:c}=a,h=createRng(o.randomSeed);return c&&c("config",function(_,$){_.randomSeed!==$.randomSeed&&(h=createRng(_.randomSeed))}),s(name$I,{"":()=>b(0,1),number:_=>b(0,_),"number, number":(_,$)=>b(_,$),"Array | Matrix":_=>d(_,0,1),"Array | Matrix, number":(_,$)=>d(_,0,$),"Array | Matrix, number, number":(_,$,j)=>d(_,$,j)});function d(_,$,j){var Xt=randomMatrix(_.valueOf(),()=>b($,j));return isMatrix(_)?_.create(Xt,"number"):Xt}function b(_,$){return _+h()*($-_)}}),name$H="randomInt",dependencies$H=["typed","config","log2","?on"],createRandomInt=factory(name$H,dependencies$H,a=>{var{typed:s,config:o,log2:c,on:h}=a,d=createRng(o.randomSeed);return h&&h("config",function(j,Xt){j.randomSeed!==Xt.randomSeed&&(d=createRng(j.randomSeed))}),s(name$H,{"":()=>_(0,2),number:j=>_(0,j),"number, number":(j,Xt)=>_(j,Xt),bigint:j=>$(0n,j),"bigint, bigint":$,"Array | Matrix":j=>b(j,0,1),"Array | Matrix, number":(j,Xt)=>b(j,0,Xt),"Array | Matrix, number, number":(j,Xt,Lt)=>b(j,Xt,Lt)});function b(j,Xt,Lt){var fr=randomMatrix(j.valueOf(),()=>_(Xt,Lt));return isMatrix(j)?j.create(fr,"number"):fr}function _(j,Xt){return Math.floor(j+d()*(Xt-j))}function $(j,Xt){var Lt=2n**30n,fr=Xt-j;if(fr<=Lt)return j+BigInt(_(0,Number(fr)));for(var Jr=c(fr),Js=fr;Js>=fr;){Js=0n;for(var qs=0;qs<Jr;++qs)Js=2n*Js+(d()<.5?0n:1n)}return j+Js}}),name$G="stirlingS2",dependencies$G=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],createStirlingS2=factory(name$G,dependencies$G,a=>{var{typed:s,addScalar:o,subtractScalar:c,multiplyScalar:h,divideScalar:d,pow:b,factorial:_,combinations:$,isNegative:j,isInteger:Xt,number:Lt,bignumber:fr,larger:Jr}=a,Js=[],qs=[];return s(name$G,{"number | BigNumber, number | BigNumber":function(js,eu){if(!Xt(js)||j(js)||!Xt(eu)||j(eu))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(Jr(eu,js))throw new TypeError("k must be less than or equal to n in function stirlingS2");var Oo=!(isNumber(js)&&isNumber(eu)),tu=Oo?qs:Js,Bo=Oo?fr:Lt,vu=Lt(js),t1=Lt(eu);if(tu[vu]&&tu[vu].length>t1)return tu[vu][t1];for(var e1=0;e1<=vu;++e1)if(tu[e1]||(tu[e1]=[Bo(e1===0?1:0)]),e1!==0)for(var r1=tu[e1],a1=tu[e1-1],i1=r1.length;i1<=e1&&i1<=t1;++i1)i1===e1?r1[i1]=1:r1[i1]=o(h(Bo(i1),a1[i1]),a1[i1-1]);return tu[vu][t1]}})}),name$F="bellNumbers",dependencies$F=["typed","addScalar","isNegative","isInteger","stirlingS2"],createBellNumbers=factory(name$F,dependencies$F,a=>{var{typed:s,addScalar:o,isNegative:c,isInteger:h,stirlingS2:d}=a;return s(name$F,{"number | BigNumber":function(_){if(!h(_)||c(_))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var $=0,j=0;j<=_;j++)$=o($,d(_,j));return $}})}),name$E="catalan",dependencies$E=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],createCatalan=factory(name$E,dependencies$E,a=>{var{typed:s,addScalar:o,divideScalar:c,multiplyScalar:h,combinations:d,isNegative:b,isInteger:_}=a;return s(name$E,{"number | BigNumber":function(j){if(!_(j)||b(j))throw new TypeError("Non-negative integer value expected in function catalan");return c(d(h(j,2),j),o(j,1))}})}),name$D="composition",dependencies$D=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],createComposition=factory(name$D,dependencies$D,a=>{var{typed:s,addScalar:o,combinations:c,isPositive:h,isNegative:d,isInteger:b,larger:_}=a;return s(name$D,{"number | BigNumber, number | BigNumber":function(j,Xt){if(!b(j)||!h(j)||!b(Xt)||!h(Xt))throw new TypeError("Positive integer value expected in function composition");if(_(Xt,j))throw new TypeError("k must be less than or equal to n in function composition");return c(o(j,-1),o(Xt,-1))}})}),name$C="leafCount",dependencies$C=["parse","typed"],createLeafCount=factory(name$C,dependencies$C,a=>{var{parse:s,typed:o}=a;function c(h){var d=0;return h.forEach(b=>{d+=c(b)}),d||1}return o(name$C,{Node:function(d){return c(d)}})});function isNumericNode(a){return isConstantNode(a)||isOperatorNode(a)&&a.isUnary()&&isConstantNode(a.args[0])}function isConstantExpression(a){return!!(isConstantNode(a)||(isFunctionNode(a)||isOperatorNode(a))&&a.args.every(isConstantExpression)||isParenthesisNode(a)&&isConstantExpression(a.content))}function ownKeys$1(a,s){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),o.push.apply(o,c)}return o}function _objectSpread$1(a){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(o),!0).forEach(function(c){_defineProperty(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):ownKeys$1(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}var name$B="simplifyUtil",dependencies$B=["FunctionNode","OperatorNode","SymbolNode"],createUtil=factory(name$B,dependencies$B,a=>{var{FunctionNode:s,OperatorNode:o,SymbolNode:c}=a,h=!0,d=!1,b="defaultF",_={add:{trivial:h,total:h,commutative:h,associative:h},unaryPlus:{trivial:h,total:h,commutative:h,associative:h},subtract:{trivial:d,total:h,commutative:d,associative:d},multiply:{trivial:h,total:h,commutative:h,associative:h},divide:{trivial:d,total:h,commutative:d,associative:d},paren:{trivial:h,total:h,commutative:h,associative:d},defaultF:{trivial:d,total:h,commutative:d,associative:d}},$={divide:{total:d},log:{total:d}},j={subtract:{total:d},abs:{trivial:h},log:{total:h}};function Xt(Oo,tu){var Bo=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_,vu=b;if(typeof Oo=="string"?vu=Oo:isOperatorNode(Oo)?vu=Oo.fn.toString():isFunctionNode(Oo)?vu=Oo.name:isParenthesisNode(Oo)&&(vu="paren"),hasOwnProperty(Bo,vu)){var t1=Bo[vu];if(hasOwnProperty(t1,tu))return t1[tu];if(hasOwnProperty(_,vu))return _[vu][tu]}if(hasOwnProperty(Bo,b)){var e1=Bo[b];return hasOwnProperty(e1,tu)?e1[tu]:_[b][tu]}if(hasOwnProperty(_,vu)){var r1=_[vu];if(hasOwnProperty(r1,tu))return r1[tu]}return _[b][tu]}function Lt(Oo){var tu=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;return Xt(Oo,"commutative",tu)}function fr(Oo){var tu=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;return Xt(Oo,"associative",tu)}function Jr(Oo,tu){var Bo=_objectSpread$1({},Oo);for(var vu in tu)hasOwnProperty(Oo,vu)?Bo[vu]=_objectSpread$1(_objectSpread$1({},tu[vu]),Oo[vu]):Bo[vu]=tu[vu];return Bo}function Js(Oo,tu){if(!Oo.args||Oo.args.length===0)return Oo;Oo.args=qs(Oo,tu);for(var Bo=0;Bo<Oo.args.length;Bo++)Js(Oo.args[Bo],tu)}function qs(Oo,tu){var Bo,vu=[],t1=function(r1){for(var a1=0;a1<r1.args.length;a1++){var i1=r1.args[a1];isOperatorNode(i1)&&Bo===i1.op?t1(i1):vu.push(i1)}};return fr(Oo,tu)?(Bo=Oo.op,t1(Oo),vu):Oo.args}function zo(Oo,tu){if(!(!Oo.args||Oo.args.length===0)){for(var Bo=eu(Oo),vu=Oo.args.length,t1=0;t1<vu;t1++)zo(Oo.args[t1],tu);if(vu>2&&fr(Oo,tu)){for(var e1=Oo.args.pop();Oo.args.length>0;)e1=Bo([Oo.args.pop(),e1]);Oo.args=e1.args}}}function js(Oo,tu){if(!(!Oo.args||Oo.args.length===0)){for(var Bo=eu(Oo),vu=Oo.args.length,t1=0;t1<vu;t1++)js(Oo.args[t1],tu);if(vu>2&&fr(Oo,tu)){for(var e1=Oo.args.shift();Oo.args.length>0;)e1=Bo([e1,Oo.args.shift()]);Oo.args=e1.args}}}function eu(Oo){return isOperatorNode(Oo)?function(tu){try{return new o(Oo.op,Oo.fn,tu,Oo.implicit)}catch(Bo){return console.error(Bo),[]}}:function(tu){return new s(new c(Oo.name),tu)}}return{createMakeNodeFunction:eu,hasProperty:Xt,isCommutative:Lt,isAssociative:fr,mergeContext:Jr,flatten:Js,allChildren:qs,unflattenr:zo,unflattenl:js,defaultContext:_,realContext:$,positiveContext:j}}),name$A="simplify",dependencies$A=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],createSimplify=factory(name$A,dependencies$A,a=>{var{typed:s,parse:o,equal:c,resolve:h,simplifyConstant:d,simplifyCore:b,AccessorNode:_,ArrayNode:$,ConstantNode:j,FunctionNode:Xt,IndexNode:Lt,ObjectNode:fr,OperatorNode:Jr,ParenthesisNode:Js,SymbolNode:qs,replacer:zo}=a,{hasProperty:js,isCommutative:eu,isAssociative:Oo,mergeContext:tu,flatten:Bo,unflattenr:vu,unflattenl:t1,createMakeNodeFunction:e1,defaultContext:r1,realContext:a1,positiveContext:i1}=createUtil({FunctionNode:Xt,OperatorNode:Jr,SymbolNode:qs});s.addConversion({from:"Object",to:"Map",convert:createMap$1});var s1=s("simplify",{Node:d1,"Node, Map":(w1,x1)=>d1(w1,!1,x1),"Node, Map, Object":(w1,x1,M1)=>d1(w1,!1,x1,M1),"Node, Array":d1,"Node, Array, Map":d1,"Node, Array, Map, Object":d1});s.removeConversion({from:"Object",to:"Map",convert:createMap$1}),s1.defaultContext=r1,s1.realContext=a1,s1.positiveContext=i1;function c1(w1){return w1.transform(function(x1){return isParenthesisNode(x1)?c1(x1.content):x1})}var h1={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};s1.rules=[b,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function m1(w1,x1){var M1={};if(w1.s){var O1=w1.s.split("->");if(O1.length===2)M1.l=O1[0],M1.r=O1[1];else throw SyntaxError("Could not parse rule: "+w1.s)}else M1.l=w1.l,M1.r=w1.r;M1.l=c1(o(M1.l)),M1.r=c1(o(M1.r));for(var N1 of["imposeContext","repeat","assuming"])N1 in w1&&(M1[N1]=w1[N1]);if(w1.evaluate&&(M1.evaluate=o(w1.evaluate)),Oo(M1.l,x1)){var L1=!eu(M1.l,x1),G1;L1&&(G1=p1());var q1=e1(M1.l),H1=p1();M1.expanded={},M1.expanded.l=q1([M1.l,H1]),Bo(M1.expanded.l,x1),vu(M1.expanded.l,x1),M1.expanded.r=q1([M1.r,H1]),L1&&(M1.expandedNC1={},M1.expandedNC1.l=q1([G1,M1.l]),M1.expandedNC1.r=q1([G1,M1.r]),M1.expandedNC2={},M1.expandedNC2.l=q1([G1,M1.expanded.l]),M1.expandedNC2.r=q1([G1,M1.expanded.r]))}return M1}function l1(w1,x1){for(var M1=[],O1=0;O1<w1.length;O1++){var N1=w1[O1],L1=void 0,G1=typeof N1;switch(G1){case"string":N1={s:N1};case"object":L1=m1(N1,x1);break;case"function":L1=N1;break;default:throw TypeError("Unsupported type of rule: "+G1)}M1.push(L1)}return M1}var f1=0;function p1(){return new qs("_p"+f1++)}function d1(w1,x1){var M1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:createEmptyMap(),O1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},N1=O1.consoleDebug;x1=l1(x1||s1.rules,O1.context);var L1=h(w1,M1);L1=c1(L1);for(var G1={},q1=L1.toString({parenthesis:"all"});!G1[q1];){G1[q1]=!0,f1=0;var H1=q1;N1&&console.log("Working on: ",q1);for(var W1=0;W1<x1.length;W1++){var j1="";if(typeof x1[W1]=="function"?(L1=x1[W1](L1,O1),N1&&(j1=x1[W1].name)):(Bo(L1,O1.context),L1=C1(L1,x1[W1],O1.context),N1&&(j1="".concat(x1[W1].l.toString()," -> ").concat(x1[W1].r.toString()))),N1){var Q1=L1.toString({parenthesis:"all"});Q1!==H1&&(console.log("Applying",j1,"produced",Q1),H1=Q1)}t1(L1,O1.context)}q1=L1.toString({parenthesis:"all"})}return L1}function b1(w1,x1,M1){var O1=w1;if(w1)for(var N1=0;N1<w1.length;++N1){var L1=C1(w1[N1],x1,M1);L1!==w1[N1]&&(O1===w1&&(O1=w1.slice()),O1[N1]=L1)}return O1}function C1(w1,x1,M1){if(x1.assuming){for(var O1 in x1.assuming)for(var N1 in x1.assuming[O1])if(js(O1,N1,M1)!==x1.assuming[O1][N1])return w1}var L1=tu(x1.imposeContext,M1),G1=w1;if(G1 instanceof Jr||G1 instanceof Xt){var q1=b1(G1.args,x1,M1);q1!==G1.args&&(G1=G1.clone(),G1.args=q1)}else if(G1 instanceof Js){if(G1.content){var H1=C1(G1.content,x1,M1);H1!==G1.content&&(G1=new Js(H1))}}else if(G1 instanceof $){var W1=b1(G1.items,x1,M1);W1!==G1.items&&(G1=new $(W1))}else if(G1 instanceof _){var j1=G1.object;G1.object&&(j1=C1(G1.object,x1,M1));var Q1=G1.index;G1.index&&(Q1=C1(G1.index,x1,M1)),(j1!==G1.object||Q1!==G1.index)&&(G1=new _(j1,Q1))}else if(G1 instanceof Lt){var rv=b1(G1.dimensions,x1,M1);rv!==G1.dimensions&&(G1=new Lt(rv))}else if(G1 instanceof fr){var $1=!1,A1={};for(var y1 in G1.properties)A1[y1]=C1(G1.properties[y1],x1,M1),A1[y1]!==G1.properties[y1]&&($1=!0);$1&&(G1=new fr(A1))}var _1=x1.r,D1=B1(x1.l,G1,L1)[0];if(!D1&&x1.expanded&&(_1=x1.expanded.r,D1=B1(x1.expanded.l,G1,L1)[0]),!D1&&x1.expandedNC1&&(_1=x1.expandedNC1.r,D1=B1(x1.expandedNC1.l,G1,L1)[0],D1||(_1=x1.expandedNC2.r,D1=B1(x1.expandedNC2.l,G1,L1)[0])),D1){var E1=G1.implicit;G1=_1.clone(),E1&&"implicit"in _1&&(G1.implicit=!0),G1=G1.transform(function(P1){return P1.isSymbolNode&&hasOwnProperty(D1.placeholders,P1.name)?D1.placeholders[P1.name].clone():P1})}return x1.repeat&&G1!==w1&&(G1=C1(G1,x1,M1)),G1}function g1(w1,x1){var M1=[],O1,N1,L1=e1(w1);if(eu(w1,x1))for(var G1=0;G1<w1.args.length;G1++)N1=w1.args.slice(0),N1.splice(G1,1),O1=N1.length===1?N1[0]:L1(N1),M1.push(L1([w1.args[G1],O1]));else for(var q1=1;q1<w1.args.length;q1++){var H1=w1.args[0];q1>1&&(H1=L1(w1.args.slice(0,q1))),N1=w1.args.slice(q1),O1=N1.length===1?N1[0]:L1(N1),M1.push(L1([H1,O1]))}return M1}function o1(w1,x1){var M1={placeholders:{}};if(!w1.placeholders&&!x1.placeholders)return M1;if(w1.placeholders){if(!x1.placeholders)return w1}else return x1;for(var O1 in w1.placeholders)if(hasOwnProperty(w1.placeholders,O1)&&(M1.placeholders[O1]=w1.placeholders[O1],hasOwnProperty(x1.placeholders,O1)&&!T1(w1.placeholders[O1],x1.placeholders[O1])))return null;for(var N1 in x1.placeholders)hasOwnProperty(x1.placeholders,N1)&&(M1.placeholders[N1]=x1.placeholders[N1]);return M1}function S1(w1,x1){var M1=[];if(w1.length===0||x1.length===0)return M1;for(var O1,N1=0;N1<w1.length;N1++)for(var L1=0;L1<x1.length;L1++)O1=o1(w1[N1],x1[L1]),O1&&M1.push(O1);return M1}function v1(w1){if(w1.length===0)return w1;for(var x1=w1.reduce(S1),M1=[],O1={},N1=0;N1<x1.length;N1++){var L1=JSON.stringify(x1[N1],zo);O1[L1]||(O1[L1]=!0,M1.push(x1[N1]))}return M1}function B1(w1,x1,M1,O1){var N1=[{placeholders:{}}];if(w1 instanceof Jr&&x1 instanceof Jr||w1 instanceof Xt&&x1 instanceof Xt){if(w1 instanceof Jr){if(w1.op!==x1.op||w1.fn!==x1.fn)return[]}else if(w1 instanceof Xt&&w1.name!==x1.name)return[];if(x1.args.length===1&&w1.args.length===1||!Oo(x1,M1)&&x1.args.length===w1.args.length||O1){for(var L1=[],G1=0;G1<w1.args.length;G1++){var q1=B1(w1.args[G1],x1.args[G1],M1);if(q1.length===0)break;L1.push(q1)}if(L1.length!==w1.args.length){if(!eu(x1,M1)||w1.args.length===1)return[];if(w1.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var H1=B1(w1.args[0],x1.args[1],M1);if(H1.length===0)return[];var W1=B1(w1.args[1],x1.args[0],M1);if(W1.length===0)return[];L1=[H1,W1]}N1=v1(L1)}else if(x1.args.length>=2&&w1.args.length===2){for(var j1=g1(x1,M1),Q1=[],rv=0;rv<j1.length;rv++){var $1=B1(w1,j1[rv],M1,!0);Q1=Q1.concat($1)}return Q1}else{if(w1.args.length>2)throw Error("Unexpected non-binary associative function: "+w1.toString());return[]}}else if(w1 instanceof qs){if(w1.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(h1[w1.name]){if(w1.name!==x1.name)return[]}else switch(w1.name[1]>="a"&&w1.name[1]<="z"?w1.name.substring(0,2):w1.name[0]){case"n":case"_p":N1[0].placeholders[w1.name]=x1;break;case"c":case"cl":if(isConstantNode(x1))N1[0].placeholders[w1.name]=x1;else return[];break;case"v":if(!isConstantNode(x1))N1[0].placeholders[w1.name]=x1;else return[];break;case"vl":if(isSymbolNode(x1))N1[0].placeholders[w1.name]=x1;else return[];break;case"cd":if(isNumericNode(x1))N1[0].placeholders[w1.name]=x1;else return[];break;case"vd":if(!isNumericNode(x1))N1[0].placeholders[w1.name]=x1;else return[];break;case"ce":if(isConstantExpression(x1))N1[0].placeholders[w1.name]=x1;else return[];break;case"ve":if(!isConstantExpression(x1))N1[0].placeholders[w1.name]=x1;else return[];break;default:throw new Error("Invalid symbol in rule: "+w1.name)}}else if(w1 instanceof j){if(!c(w1.value,x1.value))return[]}else return[];return N1}function T1(w1,x1){if(w1 instanceof j&&x1 instanceof j){if(!c(w1.value,x1.value))return!1}else if(w1 instanceof qs&&x1 instanceof qs){if(w1.name!==x1.name)return!1}else if(w1 instanceof Jr&&x1 instanceof Jr||w1 instanceof Xt&&x1 instanceof Xt){if(w1 instanceof Jr){if(w1.op!==x1.op||w1.fn!==x1.fn)return!1}else if(w1 instanceof Xt&&w1.name!==x1.name)return!1;if(w1.args.length!==x1.args.length)return!1;for(var M1=0;M1<w1.args.length;M1++)if(!T1(w1.args[M1],x1.args[M1]))return!1}else return!1;return!0}return s1}),name$z="simplifyConstant",dependencies$z=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],createSimplifyConstant=factory(name$z,dependencies$z,a=>{var{typed:s,config:o,mathWithTransform:c,matrix:h,isBounded:d,fraction:b,bignumber:_,AccessorNode:$,ArrayNode:j,ConstantNode:Xt,FunctionNode:Lt,IndexNode:fr,ObjectNode:Jr,OperatorNode:Js,SymbolNode:qs}=a,{isCommutative:zo,isAssociative:js,allChildren:eu,createMakeNodeFunction:Oo}=createUtil({FunctionNode:Lt,OperatorNode:Js,SymbolNode:qs}),tu=s("simplifyConstant",{Node:l1=>e1(m1(l1,{})),"Node, Object":function(f1,p1){return e1(m1(f1,p1))}});function Bo(l1){return isFraction(l1)?l1.valueOf():l1 instanceof Array?l1.map(Bo):isMatrix(l1)?h(Bo(l1.valueOf())):l1}function vu(l1,f1,p1){try{return c[l1].apply(null,f1)}catch{return f1=f1.map(Bo),a1(c[l1].apply(null,f1),p1)}}var t1=s({Fraction:s1,number:function(f1){return f1<0?i1(new Xt(-f1)):new Xt(f1)},BigNumber:function(f1){return f1<0?i1(new Xt(-f1)):new Xt(f1)},bigint:function(f1){return f1<0n?i1(new Xt(-f1)):new Xt(f1)},Complex:function(f1){throw new Error("Cannot convert Complex number to Node")},string:function(f1){return new Xt(f1)},Matrix:function(f1){return new j(f1.valueOf().map(p1=>t1(p1)))}});function e1(l1){return isNode(l1)?l1:t1(l1)}function r1(l1,f1){var p1=f1&&f1.exactFractions!==!1;if(p1&&d(l1)&&b){var d1=b(l1),b1=f1&&typeof f1.fractionsLimit=="number"?f1.fractionsLimit:1/0;if(d1.valueOf()===l1&&d1.n<b1&&d1.d<b1)return d1}return l1}var a1=s({"string, Object":function(f1,p1){var d1=safeNumberType(f1,o);if(d1==="BigNumber")return _===void 0&&noBignumber(),_(f1);if(d1==="bigint")return BigInt(f1);if(d1==="Fraction")return b===void 0&&noFraction(),b(f1);var b1=parseFloat(f1);return r1(b1,p1)},"Fraction, Object":function(f1,p1){return f1},"BigNumber, Object":function(f1,p1){return f1},"number, Object":function(f1,p1){return r1(f1,p1)},"bigint, Object":function(f1,p1){return f1},"Complex, Object":function(f1,p1){return f1.im!==0?f1:r1(f1.re,p1)},"Matrix, Object":function(f1,p1){return h(r1(f1.valueOf()))},"Array, Object":function(f1,p1){return f1.map(r1)}});function i1(l1){return new Js("-","unaryMinus",[l1])}function s1(l1){var f1=b1=>o.number==="BigNumber"&&_?_(b1):Number(b1),p1=l1.s*l1.n,d1=p1<0n?new Js("-","unaryMinus",[new Xt(-f1(p1))]):new Xt(f1(p1));return l1.d===1n?d1:new Js("/","divide",[d1,new Xt(f1(l1.d))])}function c1(l1,f1,p1){if(!isIndexNode(f1))return new $(e1(l1),e1(f1));if(isArrayNode(l1)||isMatrix(l1)){for(var d1=Array.from(f1.dimensions);d1.length>0;)if(isConstantNode(d1[0])&&typeof d1[0].value!="string"){var b1=a1(d1.shift().value,p1);isArrayNode(l1)?l1=l1.items[b1-1]:(l1=l1.valueOf()[b1-1],l1 instanceof Array&&(l1=h(l1)))}else if(d1.length>1&&isConstantNode(d1[1])&&typeof d1[1].value!="string"){var C1=a1(d1[1].value,p1),g1=[],o1=isArrayNode(l1)?l1.items:l1.valueOf();for(var S1 of o1)if(isArrayNode(S1))g1.push(S1.items[C1-1]);else if(isMatrix(l1))g1.push(S1[C1-1]);else break;if(g1.length===o1.length)isArrayNode(l1)?l1=new j(g1):l1=h(g1),d1.splice(1,1);else break}else break;return d1.length===f1.dimensions.length?new $(e1(l1),f1):d1.length>0?(f1=new fr(d1),new $(e1(l1),f1)):l1}if(isObjectNode(l1)&&f1.dimensions.length===1&&isConstantNode(f1.dimensions[0])){var v1=f1.dimensions[0].value;return v1 in l1.properties?l1.properties[v1]:new Xt}return new $(e1(l1),f1)}function h1(l1,f1,p1,d1){var b1=f1.shift(),C1=f1.reduce((g1,o1)=>{if(!isNode(o1)){var S1=g1.pop();if(isNode(S1))return[S1,o1];try{return g1.push(vu(l1,[S1,o1],d1)),g1}catch{g1.push(S1)}}g1.push(e1(g1.pop()));var v1=g1.length===1?g1[0]:p1(g1);return[p1([v1,e1(o1)])]},[b1]);return C1.length===1?C1[0]:p1([C1[0],t1(C1[1])])}function m1(l1,f1){switch(l1.type){case"SymbolNode":return l1;case"ConstantNode":switch(typeof l1.value){case"number":return a1(l1.value,f1);case"bigint":return a1(l1.value,f1);case"string":return l1.value;default:if(!isNaN(l1.value))return a1(l1.value,f1)}return l1;case"FunctionNode":if(c[l1.name]&&c[l1.name].rawArgs)return l1;{var p1=["add","multiply"];if(!p1.includes(l1.name)){var d1=l1.args.map(N1=>m1(N1,f1));if(!d1.some(isNode))try{return vu(l1.name,d1,f1)}catch{}if(l1.name==="size"&&d1.length===1&&isArrayNode(d1[0])){for(var b1=[],C1=d1[0];isArrayNode(C1);)b1.push(C1.items.length),C1=C1.items[0];return h(b1)}return new Lt(l1.name,d1.map(e1))}}case"OperatorNode":{var g1=l1.fn.toString(),o1,S1,v1=Oo(l1);if(isOperatorNode(l1)&&l1.isUnary())o1=[m1(l1.args[0],f1)],isNode(o1[0])?S1=v1(o1):S1=vu(g1,o1,f1);else if(js(l1,f1.context))if(o1=eu(l1,f1.context),o1=o1.map(N1=>m1(N1,f1)),zo(g1,f1.context)){for(var B1=[],T1=[],w1=0;w1<o1.length;w1++)isNode(o1[w1])?T1.push(o1[w1]):B1.push(o1[w1]);B1.length>1?(S1=h1(g1,B1,v1,f1),T1.unshift(S1),S1=h1(g1,T1,v1,f1)):S1=h1(g1,o1,v1,f1)}else S1=h1(g1,o1,v1,f1);else o1=l1.args.map(N1=>m1(N1,f1)),S1=h1(g1,o1,v1,f1);return S1}case"ParenthesisNode":return m1(l1.content,f1);case"AccessorNode":return c1(m1(l1.object,f1),m1(l1.index,f1),f1);case"ArrayNode":{var x1=l1.items.map(N1=>m1(N1,f1));return x1.some(isNode)?new j(x1.map(e1)):h(x1)}case"IndexNode":return new fr(l1.dimensions.map(N1=>tu(N1,f1)));case"ObjectNode":{var M1={};for(var O1 in l1.properties)M1[O1]=tu(l1.properties[O1],f1);return new Jr(M1)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(l1.type))}}return tu}),name$y="simplifyCore",dependencies$y=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],createSimplifyCore=factory(name$y,dependencies$y,a=>{var{typed:s,parse:o,equal:c,isZero:h,add:d,subtract:b,multiply:_,divide:$,pow:j,AccessorNode:Xt,ArrayNode:Lt,ConstantNode:fr,FunctionNode:Jr,IndexNode:Js,ObjectNode:qs,OperatorNode:zo,ParenthesisNode:js,SymbolNode:eu}=a,Oo=new fr(0),tu=new fr(1),Bo=new fr(!0),vu=new fr(!1);function t1(i1){return isOperatorNode(i1)&&["and","not","or"].includes(i1.op)}var{hasProperty:e1,isCommutative:r1}=createUtil({FunctionNode:Jr,OperatorNode:zo,SymbolNode:eu});function a1(i1){var s1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c1=s1?s1.context:void 0;if(e1(i1,"trivial",c1)){if(isFunctionNode(i1)&&i1.args.length===1)return a1(i1.args[0],s1);var h1=!1,m1=0;if(i1.forEach(B1=>{++m1,m1===1&&(h1=a1(B1,s1))}),m1===1)return h1}var l1=i1;if(isFunctionNode(l1)){var f1=getOperator(l1.name);if(f1){if(l1.args.length>2&&e1(l1,"associative",c1))for(;l1.args.length>2;){var p1=l1.args.pop(),d1=l1.args.pop();l1.args.push(new zo(f1,l1.name,[p1,d1]))}l1=new zo(f1,l1.name,l1.args)}else return new Jr(a1(l1.fn),l1.args.map(B1=>a1(B1,s1)))}if(isOperatorNode(l1)&&l1.isUnary()){var b1=a1(l1.args[0],s1);if(l1.op==="~"&&isOperatorNode(b1)&&b1.isUnary()&&b1.op==="~"||l1.op==="not"&&isOperatorNode(b1)&&b1.isUnary()&&b1.op==="not"&&t1(b1.args[0]))return b1.args[0];var C1=!0;if(l1.op==="-"&&isOperatorNode(b1)&&(b1.isBinary()&&b1.fn==="subtract"&&(l1=new zo("-","subtract",[b1.args[1],b1.args[0]]),C1=!1),b1.isUnary()&&b1.op==="-"))return b1.args[0];if(C1)return new zo(l1.op,l1.fn,[b1])}if(isOperatorNode(l1)&&l1.isBinary()){var g1=a1(l1.args[0],s1),o1=a1(l1.args[1],s1);if(l1.op==="+"){if(isConstantNode(g1)&&h(g1.value))return o1;if(isConstantNode(o1)&&h(o1.value))return g1;isOperatorNode(o1)&&o1.isUnary()&&o1.op==="-"&&(o1=o1.args[0],l1=new zo("-","subtract",[g1,o1]))}if(l1.op==="-")return isOperatorNode(o1)&&o1.isUnary()&&o1.op==="-"?a1(new zo("+","add",[g1,o1.args[0]]),s1):isConstantNode(g1)&&h(g1.value)?a1(new zo("-","unaryMinus",[o1])):isConstantNode(o1)&&h(o1.value)?g1:new zo(l1.op,l1.fn,[g1,o1]);if(l1.op==="*"){if(isConstantNode(g1)){if(h(g1.value))return Oo;if(c(g1.value,1))return o1}if(isConstantNode(o1)){if(h(o1.value))return Oo;if(c(o1.value,1))return g1;if(r1(l1,c1))return new zo(l1.op,l1.fn,[o1,g1],l1.implicit)}return new zo(l1.op,l1.fn,[g1,o1],l1.implicit)}if(l1.op==="/")return isConstantNode(g1)&&h(g1.value)?Oo:isConstantNode(o1)&&c(o1.value,1)?g1:new zo(l1.op,l1.fn,[g1,o1]);if(l1.op==="^"&&isConstantNode(o1)){if(h(o1.value))return tu;if(c(o1.value,1))return g1}if(l1.op==="and"){if(isConstantNode(g1))if(g1.value){if(t1(o1))return o1;if(isConstantNode(o1))return o1.value?Bo:vu}else return vu;if(isConstantNode(o1))if(o1.value){if(t1(g1))return g1}else return vu}if(l1.op==="or"){if(isConstantNode(g1)){if(g1.value)return Bo;if(t1(o1))return o1}if(isConstantNode(o1)){if(o1.value)return Bo;if(t1(g1))return g1}}return new zo(l1.op,l1.fn,[g1,o1])}if(isOperatorNode(l1))return new zo(l1.op,l1.fn,l1.args.map(B1=>a1(B1,s1)));if(isArrayNode(l1))return new Lt(l1.items.map(B1=>a1(B1,s1)));if(isAccessorNode(l1))return new Xt(a1(l1.object,s1),a1(l1.index,s1));if(isIndexNode(l1))return new Js(l1.dimensions.map(B1=>a1(B1,s1)));if(isObjectNode(l1)){var S1={};for(var v1 in l1.properties)S1[v1]=a1(l1.properties[v1],s1);return new qs(S1)}return l1}return s(name$y,{Node:a1,"Node,Object":a1})}),name$x="resolve",dependencies$x=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],createResolve=factory(name$x,dependencies$x,a=>{var{typed:s,parse:o,ConstantNode:c,FunctionNode:h,OperatorNode:d,ParenthesisNode:b}=a;function _($,j){var Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!j)return $;if(isSymbolNode($)){if(Xt.has($.name)){var Lt=Array.from(Xt).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(Lt,"}"))}var fr=j.get($.name);if(isNode(fr)){var Jr=new Set(Xt);return Jr.add($.name),_(fr,j,Jr)}else return typeof fr=="number"?o(String(fr)):fr!==void 0?new c(fr):$}else if(isOperatorNode($)){var Js=$.args.map(function(zo){return _(zo,j,Xt)});return new d($.op,$.fn,Js,$.implicit)}else{if(isParenthesisNode($))return new b(_($.content,j,Xt));if(isFunctionNode($)){var qs=$.args.map(function(zo){return _(zo,j,Xt)});return new h($.name,qs)}}return $.map(zo=>_(zo,j,Xt))}return s("resolve",{Node:_,"Node, Map | null | undefined":_,"Node, Object":($,j)=>_($,createMap$1(j)),"Array | Matrix":s.referToSelf($=>j=>j.map(Xt=>$(Xt))),"Array | Matrix, null | undefined":s.referToSelf($=>j=>j.map(Xt=>$(Xt))),"Array, Object":s.referTo("Array,Map",$=>(j,Xt)=>$(j,createMap$1(Xt))),"Matrix, Object":s.referTo("Matrix,Map",$=>(j,Xt)=>$(j,createMap$1(Xt))),"Array | Matrix, Map":s.referToSelf($=>(j,Xt)=>j.map(Lt=>$(Lt,Xt)))})}),name$w="symbolicEqual",dependencies$w=["parse","simplify","typed","OperatorNode"],createSymbolicEqual=factory(name$w,dependencies$w,a=>{var{parse:s,simplify:o,typed:c,OperatorNode:h}=a;function d(b,_){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},j=new h("-","subtract",[b,_]),Xt=o(j,{},$);return isConstantNode(Xt)&&!Xt.value}return c(name$w,{"Node, Node":d,"Node, Node, Object":d})}),name$v="derivative",dependencies$v=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],createDerivative$1=factory(name$v,dependencies$v,a=>{var{typed:s,config:o,parse:c,simplify:h,equal:d,isZero:b,numeric:_,ConstantNode:$,FunctionNode:j,OperatorNode:Xt,ParenthesisNode:Lt,SymbolNode:fr}=a;function Jr(tu,Bo){var vu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},t1=new Map,e1=Bo.name;function r1(i1){var s1=t1.get(i1);if(s1!==void 0)return s1;var c1=js(r1,i1,e1);return t1.set(i1,c1),c1}var a1=eu(tu,r1);return vu.simplify?h(a1):a1}function Js(tu){var Bo=c(tu);if(!Bo.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(tu)," into a variable in function derivative"));return Bo}var qs=s(name$v,{"Node, SymbolNode":Jr,"Node, SymbolNode, Object":Jr,"Node, string":(tu,Bo)=>Jr(tu,Js(Bo)),"Node, string, Object":(tu,Bo,vu)=>Jr(tu,Js(Bo),vu)});qs._simplify=!0,qs.toTex=function(tu){return zo.apply(null,tu.args)};var zo=s("_derivTex",{"Node, SymbolNode":function(Bo,vu){return isConstantNode(Bo)&&typeOf$1(Bo.value)==="string"?zo(c(Bo.value).toString(),vu.toString(),1):zo(Bo.toTex(),vu.toString(),1)},"Node, ConstantNode":function(Bo,vu){if(typeOf$1(vu.value)==="string")return zo(Bo,c(vu.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(Bo,vu,t1){return zo(Bo.toString(),vu.name,t1.value)},"string, string, number":function(Bo,vu,t1){var e1;return t1===1?e1="{d\\over d"+vu+"}":e1="{d^{"+t1+"}\\over d"+vu+"^{"+t1+"}}",e1+"\\left[".concat(Bo,"\\right]")}}),js=s("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(Bo,vu,t1){return vu.name!==t1},"function, ParenthesisNode, string":function(Bo,vu,t1){return Bo(vu.content,t1)},"function, FunctionAssignmentNode, string":function(Bo,vu,t1){return vu.params.includes(t1)?Bo(vu.expr,t1):!0},"function, FunctionNode | OperatorNode, string":function(Bo,vu,t1){return vu.args.every(e1=>Bo(e1,t1))}}),eu=s("_derivative",{"ConstantNode, function":function(){return Oo(0)},"SymbolNode, function":function(Bo,vu){return vu(Bo)?Oo(0):Oo(1)},"ParenthesisNode, function":function(Bo,vu){return new Lt(eu(Bo.content,vu))},"FunctionAssignmentNode, function":function(Bo,vu){return vu(Bo)?Oo(0):eu(Bo.expr,vu)},"FunctionNode, function":function(Bo,vu){if(vu(Bo))return Oo(0);var t1=Bo.args[0],e1,r1=!1,a1=!1,i1;switch(Bo.name){case"cbrt":r1=!0,i1=new Xt("*","multiply",[Oo(3),new Xt("^","pow",[t1,new Xt("/","divide",[Oo(2),Oo(3)])])]);break;case"sqrt":case"nthRoot":if(Bo.args.length===1)r1=!0,i1=new Xt("*","multiply",[Oo(2),new j("sqrt",[t1])]);else if(Bo.args.length===2)return e1=new Xt("/","divide",[Oo(1),Bo.args[1]]),eu(new Xt("^","pow",[t1,e1]),vu);break;case"log10":e1=Oo(10);case"log":if(!e1&&Bo.args.length===1)i1=t1.clone(),r1=!0;else if(Bo.args.length===1&&e1||Bo.args.length===2&&vu(Bo.args[1]))i1=new Xt("*","multiply",[t1.clone(),new j("log",[e1||Bo.args[1]])]),r1=!0;else if(Bo.args.length===2)return eu(new Xt("/","divide",[new j("log",[t1]),new j("log",[Bo.args[1]])]),vu);break;case"pow":if(Bo.args.length===2)return eu(new Xt("^","pow",[t1,Bo.args[1]]),vu);break;case"exp":i1=new j("exp",[t1.clone()]);break;case"sin":i1=new j("cos",[t1.clone()]);break;case"cos":i1=new Xt("-","unaryMinus",[new j("sin",[t1.clone()])]);break;case"tan":i1=new Xt("^","pow",[new j("sec",[t1.clone()]),Oo(2)]);break;case"sec":i1=new Xt("*","multiply",[Bo,new j("tan",[t1.clone()])]);break;case"csc":a1=!0,i1=new Xt("*","multiply",[Bo,new j("cot",[t1.clone()])]);break;case"cot":a1=!0,i1=new Xt("^","pow",[new j("csc",[t1.clone()]),Oo(2)]);break;case"asin":r1=!0,i1=new j("sqrt",[new Xt("-","subtract",[Oo(1),new Xt("^","pow",[t1.clone(),Oo(2)])])]);break;case"acos":r1=!0,a1=!0,i1=new j("sqrt",[new Xt("-","subtract",[Oo(1),new Xt("^","pow",[t1.clone(),Oo(2)])])]);break;case"atan":r1=!0,i1=new Xt("+","add",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)]);break;case"asec":r1=!0,i1=new Xt("*","multiply",[new j("abs",[t1.clone()]),new j("sqrt",[new Xt("-","subtract",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)])])]);break;case"acsc":r1=!0,a1=!0,i1=new Xt("*","multiply",[new j("abs",[t1.clone()]),new j("sqrt",[new Xt("-","subtract",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)])])]);break;case"acot":r1=!0,a1=!0,i1=new Xt("+","add",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)]);break;case"sinh":i1=new j("cosh",[t1.clone()]);break;case"cosh":i1=new j("sinh",[t1.clone()]);break;case"tanh":i1=new Xt("^","pow",[new j("sech",[t1.clone()]),Oo(2)]);break;case"sech":a1=!0,i1=new Xt("*","multiply",[Bo,new j("tanh",[t1.clone()])]);break;case"csch":a1=!0,i1=new Xt("*","multiply",[Bo,new j("coth",[t1.clone()])]);break;case"coth":a1=!0,i1=new Xt("^","pow",[new j("csch",[t1.clone()]),Oo(2)]);break;case"asinh":r1=!0,i1=new j("sqrt",[new Xt("+","add",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)])]);break;case"acosh":r1=!0,i1=new j("sqrt",[new Xt("-","subtract",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)])]);break;case"atanh":r1=!0,i1=new Xt("-","subtract",[Oo(1),new Xt("^","pow",[t1.clone(),Oo(2)])]);break;case"asech":r1=!0,a1=!0,i1=new Xt("*","multiply",[t1.clone(),new j("sqrt",[new Xt("-","subtract",[Oo(1),new Xt("^","pow",[t1.clone(),Oo(2)])])])]);break;case"acsch":r1=!0,a1=!0,i1=new Xt("*","multiply",[new j("abs",[t1.clone()]),new j("sqrt",[new Xt("+","add",[new Xt("^","pow",[t1.clone(),Oo(2)]),Oo(1)])])]);break;case"acoth":r1=!0,a1=!0,i1=new Xt("-","subtract",[Oo(1),new Xt("^","pow",[t1.clone(),Oo(2)])]);break;case"abs":i1=new Xt("/","divide",[new j(new fr("abs"),[t1.clone()]),t1.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+Bo.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var s1,c1;r1?(s1="/",c1="divide"):(s1="*",c1="multiply");var h1=eu(t1,vu);return a1&&(h1=new Xt("-","unaryMinus",[h1])),new Xt(s1,c1,[h1,i1])},"OperatorNode, function":function(Bo,vu){if(vu(Bo))return Oo(0);if(Bo.op==="+")return new Xt(Bo.op,Bo.fn,Bo.args.map(function(l1){return eu(l1,vu)}));if(Bo.op==="-"){if(Bo.isUnary())return new Xt(Bo.op,Bo.fn,[eu(Bo.args[0],vu)]);if(Bo.isBinary())return new Xt(Bo.op,Bo.fn,[eu(Bo.args[0],vu),eu(Bo.args[1],vu)])}if(Bo.op==="*"){var t1=Bo.args.filter(function(l1){return vu(l1)});if(t1.length>0){var e1=Bo.args.filter(function(l1){return!vu(l1)}),r1=e1.length===1?e1[0]:new Xt("*","multiply",e1),a1=t1.concat(eu(r1,vu));return new Xt("*","multiply",a1)}return new Xt("+","add",Bo.args.map(function(l1){return new Xt("*","multiply",Bo.args.map(function(f1){return f1===l1?eu(f1,vu):f1.clone()}))}))}if(Bo.op==="/"&&Bo.isBinary()){var i1=Bo.args[0],s1=Bo.args[1];return vu(s1)?new Xt("/","divide",[eu(i1,vu),s1]):vu(i1)?new Xt("*","multiply",[new Xt("-","unaryMinus",[i1]),new Xt("/","divide",[eu(s1,vu),new Xt("^","pow",[s1.clone(),Oo(2)])])]):new Xt("/","divide",[new Xt("-","subtract",[new Xt("*","multiply",[eu(i1,vu),s1.clone()]),new Xt("*","multiply",[i1.clone(),eu(s1,vu)])]),new Xt("^","pow",[s1.clone(),Oo(2)])])}if(Bo.op==="^"&&Bo.isBinary()){var c1=Bo.args[0],h1=Bo.args[1];if(vu(c1))return isConstantNode(c1)&&(b(c1.value)||d(c1.value,1))?Oo(0):new Xt("*","multiply",[Bo,new Xt("*","multiply",[new j("log",[c1.clone()]),eu(h1.clone(),vu)])]);if(vu(h1)){if(isConstantNode(h1)){if(b(h1.value))return Oo(0);if(d(h1.value,1))return eu(c1,vu)}var m1=new Xt("^","pow",[c1.clone(),new Xt("-","subtract",[h1,Oo(1)])]);return new Xt("*","multiply",[h1.clone(),new Xt("*","multiply",[eu(c1,vu),m1])])}return new Xt("*","multiply",[new Xt("^","pow",[c1.clone(),h1.clone()]),new Xt("+","add",[new Xt("*","multiply",[eu(c1,vu),new Xt("/","divide",[h1.clone(),c1.clone()])]),new Xt("*","multiply",[eu(h1,vu),new j("log",[c1.clone()])])])])}throw new Error('Cannot process operator "'+Bo.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function Oo(tu,Bo){return new $(_(tu,safeNumberType(String(tu),o)))}return qs}),name$u="rationalize",dependencies$u=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],createRationalize=factory(name$u,dependencies$u,a=>{var{config:s,typed:o,equal:c,isZero:h,add:d,subtract:b,multiply:_,divide:$,pow:j,parse:Xt,simplifyConstant:Lt,simplifyCore:fr,simplify:Jr,fraction:Js,bignumber:qs,mathWithTransform:zo,matrix:js,AccessorNode:eu,ArrayNode:Oo,ConstantNode:tu,FunctionNode:Bo,IndexNode:vu,ObjectNode:t1,OperatorNode:e1,SymbolNode:r1,ParenthesisNode:a1}=a;function i1(l1){var f1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d1=c1(),b1=s1(l1,f1,!0,d1.firstRules),C1=b1.variables.length,g1={exactFractions:!1},o1={exactFractions:!0};if(l1=b1.expression,C1>=1){l1=h1(l1);var S1,v1,B1=!0,T1=!1;l1=Jr(l1,d1.firstRules,{},g1);for(var w1;v1=B1?d1.distrDivRules:d1.sucDivRules,l1=Jr(l1,v1,{},o1),B1=!B1,w1=l1.toString(),w1!==S1;)T1=!0,S1=w1;T1&&(l1=Jr(l1,d1.firstRulesAgain,{},g1)),l1=Jr(l1,d1.finalRules,{},g1)}var x1=[],M1={};return l1.type==="OperatorNode"&&l1.isBinary()&&l1.op==="/"?(C1===1&&(l1.args[0]=m1(l1.args[0],x1),l1.args[1]=m1(l1.args[1])),p1&&(M1.numerator=l1.args[0],M1.denominator=l1.args[1])):(C1===1&&(l1=m1(l1,x1)),p1&&(M1.numerator=l1,M1.denominator=null)),p1?(M1.coefficients=x1,M1.variables=b1.variables,M1.expression=l1,M1):l1}return o(name$u,{Node:i1,"Node, boolean":(l1,f1)=>i1(l1,{},f1),"Node, Object":i1,"Node, Object, boolean":i1});function s1(l1,f1,p1,d1){var b1=[],C1=Jr(l1,d1,f1,{exactFractions:!1});p1=!!p1;var g1="+-*"+(p1?"/":"");S1(C1);var o1={};return o1.expression=C1,o1.variables=b1,o1;function S1(v1){var B1=v1.type;if(B1==="FunctionNode")throw new Error("There is an unsolved function call");if(B1==="OperatorNode")if(v1.op==="^"){if(v1.args[1].type!=="ConstantNode"||!isInteger$1(parseFloat(v1.args[1].value)))throw new Error("There is a non-integer exponent");S1(v1.args[0])}else{if(!g1.includes(v1.op))throw new Error("Operator "+v1.op+" invalid in polynomial expression");for(var T1=0;T1<v1.args.length;T1++)S1(v1.args[T1])}else if(B1==="SymbolNode"){var w1=v1.name,x1=b1.indexOf(w1);x1===-1&&b1.push(w1)}else if(B1==="ParenthesisNode")S1(v1.content);else if(B1!=="ConstantNode")throw new Error("type "+B1+" is not allowed in polynomial expression")}}function c1(){var l1=[fr,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},Lt,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],f1=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],p1=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],d1=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],b1={};return b1.firstRules=l1.concat(f1,d1),b1.distrDivRules=p1,b1.sucDivRules=d1,b1.firstRulesAgain=l1.concat(f1),b1.finalRules=[fr,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},Lt,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],b1}function h1(l1,f1,p1){var d1=l1.type,b1=arguments.length>1;if(d1==="OperatorNode"&&l1.isBinary()){var C1=!1,g1;if(l1.op==="^"&&(l1.args[0].type==="ParenthesisNode"||l1.args[0].type==="OperatorNode")&&l1.args[1].type==="ConstantNode"&&(g1=parseFloat(l1.args[1].value),C1=g1>=2&&isInteger$1(g1)),C1){if(g1>2){var o1=l1.args[0],S1=new e1("^","pow",[l1.args[0].cloneDeep(),new tu(g1-1)]);l1=new e1("*","multiply",[o1,S1])}else l1=new e1("*","multiply",[l1.args[0],l1.args[0].cloneDeep()]);b1&&(p1==="content"?f1.content=l1:f1.args[p1]=l1)}}if(d1==="ParenthesisNode")h1(l1.content,l1,"content");else if(d1!=="ConstantNode"&&d1!=="SymbolNode")for(var v1=0;v1<l1.args.length;v1++)h1(l1.args[v1],l1,v1);if(!b1)return l1}function m1(l1,f1){f1===void 0&&(f1=[]),f1[0]=0;var p1={};p1.cte=1,p1.oper="+",p1.fire="";var d1=0,b1="";w1(l1,null,p1),d1=f1.length-1;for(var C1=!0,g1,o1=d1;o1>=0;o1--)if(f1[o1]!==0){var S1=new tu(C1?f1[o1]:Math.abs(f1[o1])),v1=f1[o1]<0?"-":"+";if(o1>0){var B1=new r1(b1);if(o1>1){var T1=new tu(o1);B1=new e1("^","pow",[B1,T1])}f1[o1]===-1&&C1?S1=new e1("-","unaryMinus",[B1]):Math.abs(f1[o1])===1?S1=B1:S1=new e1("*","multiply",[S1,B1])}C1?g1=S1:v1==="+"?g1=new e1("+","add",[g1,S1]):g1=new e1("-","subtract",[g1,S1]),C1=!1}if(C1)return new tu(0);return g1;function w1(x1,M1,O1){var N1=x1.type;if(N1==="FunctionNode")throw new Error("There is an unsolved function call");if(N1==="OperatorNode"){if(!"+-*^".includes(x1.op))throw new Error("Operator "+x1.op+" invalid");if(M1!==null){if((x1.fn==="unaryMinus"||x1.fn==="pow")&&M1.fn!=="add"&&M1.fn!=="subtract"&&M1.fn!=="multiply")throw new Error("Invalid "+x1.op+" placing");if((x1.fn==="subtract"||x1.fn==="add"||x1.fn==="multiply")&&M1.fn!=="add"&&M1.fn!=="subtract")throw new Error("Invalid "+x1.op+" placing");if((x1.fn==="subtract"||x1.fn==="add"||x1.fn==="unaryMinus")&&O1.noFil!==0)throw new Error("Invalid "+x1.op+" placing")}(x1.op==="^"||x1.op==="*")&&(O1.fire=x1.op);for(var L1=0;L1<x1.args.length;L1++)x1.fn==="unaryMinus"&&(O1.oper="-"),(x1.op==="+"||x1.fn==="subtract")&&(O1.fire="",O1.cte=1,O1.oper=L1===0?"+":x1.op),O1.noFil=L1,w1(x1.args[L1],x1,O1)}else if(N1==="SymbolNode"){if(x1.name!==b1&&b1!=="")throw new Error("There is more than one variable");if(b1=x1.name,M1===null){f1[1]=1;return}if(M1.op==="^"&&O1.noFil!==0)throw new Error("In power the variable should be the first parameter");if(M1.op==="*"&&O1.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(O1.fire===""||O1.fire==="*")&&(d1<1&&(f1[1]=0),f1[1]+=O1.cte*(O1.oper==="+"?1:-1),d1=Math.max(1,d1))}else if(N1==="ConstantNode"){var G1=parseFloat(x1.value);if(M1===null){f1[0]=G1;return}if(M1.op==="^"){if(O1.noFil!==1)throw new Error("Constant cannot be powered");if(!isInteger$1(G1)||G1<=0)throw new Error("Non-integer exponent is not allowed");for(var q1=d1+1;q1<G1;q1++)f1[q1]=0;G1>d1&&(f1[G1]=0),f1[G1]+=O1.cte*(O1.oper==="+"?1:-1),d1=Math.max(G1,d1);return}O1.cte=G1,O1.fire===""&&(f1[0]+=O1.cte*(O1.oper==="+"?1:-1))}else throw new Error("Type "+N1+" is not allowed")}}}),name$t="zpk2tf",dependencies$t=["typed","add","multiply","Complex","number"],createZpk2tf=factory(name$t,dependencies$t,a=>{var{typed:s,add:o,multiply:c,Complex:h,number:d}=a;return s(name$t,{"Array,Array,number":function(j,Xt,Lt){return b(j,Xt,Lt)},"Array,Array":function(j,Xt){return b(j,Xt,1)},"Matrix,Matrix,number":function(j,Xt,Lt){return b(j.valueOf(),Xt.valueOf(),Lt)},"Matrix,Matrix":function(j,Xt){return b(j.valueOf(),Xt.valueOf(),1)}});function b($,j,Xt){$.some(eu=>eu.type==="BigNumber")&&($=$.map(eu=>d(eu))),j.some(eu=>eu.type==="BigNumber")&&(j=j.map(eu=>d(eu)));for(var Lt=[h(1,0)],fr=[h(1,0)],Jr=0;Jr<$.length;Jr++){var Js=$[Jr];typeof Js=="number"&&(Js=h(Js,0)),Lt=_(Lt,[h(1,0),h(-Js.re,-Js.im)])}for(var qs=0;qs<j.length;qs++){var zo=j[qs];typeof zo=="number"&&(zo=h(zo,0)),fr=_(fr,[h(1,0),h(-zo.re,-zo.im)])}for(var js=0;js<Lt.length;js++)Lt[js]=c(Lt[js],Xt);return[Lt,fr]}function _($,j){for(var Xt=[],Lt=0;Lt<$.length+j.length-1;Lt++){Xt[Lt]=h(0,0);for(var fr=0;fr<$.length;fr++)Lt-fr>=0&&Lt-fr<j.length&&(Xt[Lt]=o(Xt[Lt],c($[fr],j[Lt-fr])))}return Xt}}),name$s="freqz",dependencies$s=["typed","add","multiply","Complex","divide","matrix"],createFreqz=factory(name$s,dependencies$s,a=>{var{typed:s,add:o,multiply:c,Complex:h,divide:d,matrix:b}=a;return s(name$s,{"Array, Array":function(Xt,Lt){var fr=$(512);return _(Xt,Lt,fr)},"Array, Array, Array":function(Xt,Lt,fr){return _(Xt,Lt,fr)},"Array, Array, number":function(Xt,Lt,fr){if(fr<0)throw new Error("w must be a positive number");var Jr=$(fr);return _(Xt,Lt,Jr)},"Matrix, Matrix":function(Xt,Lt){var fr=$(512),{w:Jr,h:Js}=_(Xt.valueOf(),Lt.valueOf(),fr);return{w:b(Jr),h:b(Js)}},"Matrix, Matrix, Matrix":function(Xt,Lt,fr){var{h:Jr}=_(Xt.valueOf(),Lt.valueOf(),fr.valueOf());return{h:b(Jr),w:b(fr)}},"Matrix, Matrix, number":function(Xt,Lt,fr){if(fr<0)throw new Error("w must be a positive number");var Jr=$(fr),{h:Js}=_(Xt.valueOf(),Lt.valueOf(),Jr);return{h:b(Js),w:b(Jr)}}});function _(j,Xt,Lt){for(var fr=[],Jr=[],Js=0;Js<Lt.length;Js++){for(var qs=h(0,0),zo=h(0,0),js=0;js<j.length;js++)qs=o(qs,c(j[js],h(Math.cos(-js*Lt[Js]),Math.sin(-js*Lt[Js]))));for(var eu=0;eu<Xt.length;eu++)zo=o(zo,c(Xt[eu],h(Math.cos(-eu*Lt[Js]),Math.sin(-eu*Lt[Js]))));fr.push(qs),Jr.push(zo)}for(var Oo=[],tu=0;tu<fr.length;tu++)Oo.push(d(fr[tu],Jr[tu]));return{h:Oo,w:Lt}}function $(j){for(var Xt=[],Lt=0;Lt<j;Lt++)Xt.push(Lt/j*Math.PI);return Xt}}),name$r="reviver",dependencies$r=["classes"],createReviver=factory(name$r,dependencies$r,a=>{var{classes:s}=a;return function(c,h){var d=s[h&&h.mathjs];return d&&typeof d.fromJSON=="function"?d.fromJSON(h):h}}),name$q="replacer",dependencies$q=[],createReplacer=factory(name$q,dependencies$q,()=>function(s,o){return typeof o=="number"&&(!Number.isFinite(o)||isNaN(o))?{mathjs:"number",value:String(o)}:typeof o=="bigint"?{mathjs:"bigint",value:String(o)}:o}),version$2="15.1.0",createTrue=factory("true",[],()=>!0),createFalse=factory("false",[],()=>!1),createNull=factory("null",[],()=>null),createInfinity=recreateFactory("Infinity",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(1/0):1/0}),createNaN=recreateFactory("NaN",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(NaN):NaN}),createPi=recreateFactory("pi",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?createBigNumberPi(o):pi$2}),createTau=recreateFactory("tau",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?createBigNumberTau(o):tau$1}),createE=recreateFactory("e",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?createBigNumberE(o):e$1}),createPhi=recreateFactory("phi",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?createBigNumberPhi(o):phi$1}),createLN2=recreateFactory("LN2",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(2).ln():Math.LN2}),createLN10=recreateFactory("LN10",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(10).ln():Math.LN10}),createLOG2E=recreateFactory("LOG2E",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(1).div(new o(2).ln()):Math.LOG2E}),createLOG10E=recreateFactory("LOG10E",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(1).div(new o(10).ln()):Math.LOG10E}),createSQRT1_2=recreateFactory("SQRT1_2",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o("0.5").sqrt():Math.SQRT1_2}),createSQRT2=recreateFactory("SQRT2",["config","?BigNumber"],a=>{var{config:s,BigNumber:o}=a;return s.number==="BigNumber"?new o(2).sqrt():Math.SQRT2}),createI=recreateFactory("i",["Complex"],a=>{var{Complex:s}=a;return s.I}),createVersion=factory("version",[],()=>version$2);function recreateFactory(a,s,o){return factory(a,s,o,{recreateOnConfigChange:!0})}var createSpeedOfLight=unitFactory("speedOfLight","299792458","m s^-1"),createGravitationConstant=unitFactory("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),createPlanckConstant=unitFactory("planckConstant","6.62607015e-34","J s"),createReducedPlanckConstant=unitFactory("reducedPlanckConstant","1.0545718176461565e-34","J s"),createMagneticConstant=unitFactory("magneticConstant","1.25663706212e-6","N A^-2"),createElectricConstant=unitFactory("electricConstant","8.8541878128e-12","F m^-1"),createVacuumImpedance=unitFactory("vacuumImpedance","376.730313667","ohm"),createCoulomb=unitFactory("coulomb","8.987551792261171e9","N m^2 C^-2"),createCoulombConstant=unitFactory("coulombConstant","8.987551792261171e9","N m^2 C^-2"),createElementaryCharge=unitFactory("elementaryCharge","1.602176634e-19","C"),createBohrMagneton=unitFactory("bohrMagneton","9.2740100783e-24","J T^-1"),createConductanceQuantum=unitFactory("conductanceQuantum","7.748091729863649e-5","S"),createInverseConductanceQuantum=unitFactory("inverseConductanceQuantum","12906.403729652257","ohm"),createMagneticFluxQuantum=unitFactory("magneticFluxQuantum","2.0678338484619295e-15","Wb"),createNuclearMagneton=unitFactory("nuclearMagneton","5.0507837461e-27","J T^-1"),createKlitzing=unitFactory("klitzing","25812.807459304513","ohm"),createBohrRadius=unitFactory("bohrRadius","5.29177210903e-11","m"),createClassicalElectronRadius=unitFactory("classicalElectronRadius","2.8179403262e-15","m"),createElectronMass=unitFactory("electronMass","9.1093837015e-31","kg"),createFermiCoupling=unitFactory("fermiCoupling","1.1663787e-5","GeV^-2"),createFineStructure=numberFactory("fineStructure",.0072973525693),createHartreeEnergy=unitFactory("hartreeEnergy","4.3597447222071e-18","J"),createProtonMass=unitFactory("protonMass","1.67262192369e-27","kg"),createDeuteronMass=unitFactory("deuteronMass","3.3435830926e-27","kg"),createNeutronMass=unitFactory("neutronMass","1.6749271613e-27","kg"),createQuantumOfCirculation=unitFactory("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),createRydberg=unitFactory("rydberg","10973731.568160","m^-1"),createThomsonCrossSection=unitFactory("thomsonCrossSection","6.6524587321e-29","m^2"),createWeakMixingAngle=numberFactory("weakMixingAngle",.2229),createEfimovFactor=numberFactory("efimovFactor",22.7),createAtomicMass=unitFactory("atomicMass","1.66053906660e-27","kg"),createAvogadro=unitFactory("avogadro","6.02214076e23","mol^-1"),createBoltzmann=unitFactory("boltzmann","1.380649e-23","J K^-1"),createFaraday=unitFactory("faraday","96485.33212331001","C mol^-1"),createFirstRadiation=unitFactory("firstRadiation","3.7417718521927573e-16","W m^2"),createLoschmidt=unitFactory("loschmidt","2.686780111798444e25","m^-3"),createGasConstant=unitFactory("gasConstant","8.31446261815324","J K^-1 mol^-1"),createMolarPlanckConstant=unitFactory("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),createMolarVolume=unitFactory("molarVolume","0.022413969545014137","m^3 mol^-1"),createSackurTetrode=numberFactory("sackurTetrode",-1.16487052358),createSecondRadiation=unitFactory("secondRadiation","0.014387768775039337","m K"),createStefanBoltzmann=unitFactory("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),createWienDisplacement=unitFactory("wienDisplacement","2.897771955e-3","m K"),createMolarMass=unitFactory("molarMass","0.99999999965e-3","kg mol^-1"),createMolarMassC12=unitFactory("molarMassC12","11.9999999958e-3","kg mol^-1"),createGravity=unitFactory("gravity","9.80665","m s^-2"),createPlanckLength=unitFactory("planckLength","1.616255e-35","m"),createPlanckMass=unitFactory("planckMass","2.176435e-8","kg"),createPlanckTime=unitFactory("planckTime","5.391245e-44","s"),createPlanckCharge=unitFactory("planckCharge","1.87554603778e-18","C"),createPlanckTemperature=unitFactory("planckTemperature","1.416785e+32","K");function unitFactory(a,s,o){var c=["config","Unit","BigNumber"];return factory(a,c,h=>{var{config:d,Unit:b,BigNumber:_}=h,$=d.number==="BigNumber"?new _(s):parseFloat(s),j=new b($,o);return j.fixPrefix=!0,j})}function numberFactory(a,s){var o=["config","BigNumber"];return factory(a,o,c=>{var{config:h,BigNumber:d}=c;return h.number==="BigNumber"?new d(s):s})}function ownKeys(a,s){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),o.push.apply(o,c)}return o}function _objectSpread(a){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(o),!0).forEach(function(c){_defineProperty(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}var name$p="mapSlices",dependencies$p=["typed","isInteger"],createMapSlicesTransform=factory(name$p,dependencies$p,a=>{var{typed:s,isInteger:o}=a,c=createMapSlices({typed:s,isInteger:o});return s("mapSlices",{"...any":function(d){var b=d[1];isNumber(b)?d[1]=b-1:isBigNumber(b)&&(d[1]=b.minus(1));try{return c.apply(null,d)}catch(_){throw errorTransform(_)}}})},_objectSpread({isTransformFunction:!0},createMapSlices.meta)),name$o="column",dependencies$o=["typed","Index","matrix","range"],createColumnTransform=factory(name$o,dependencies$o,a=>{var{typed:s,Index:o,matrix:c,range:h}=a,d=createColumn({typed:s,Index:o,matrix:c,range:h});return s("column",{"...any":function(_){var $=_.length-1,j=_[$];isNumber(j)&&(_[$]=j-1);try{return d.apply(null,_)}catch(Xt){throw errorTransform(Xt)}}})},{isTransformFunction:!0});function compileInlineExpression(a,s,o){var c=a.filter(function($){return isSymbolNode($)&&!($.name in s)&&!o.has($.name)})[0];if(!c)throw new Error('No undefined variable found in inline expression "'+a+'"');var h=c.name,d=new Map,b=new PartitionedMap(o,d,new Set([h])),_=a.compile();return function(j){return d.set(h,j),_.evaluate(b)}}var name$n="transformCallback",dependencies$n=["typed"],createTransformCallback=factory(name$n,dependencies$n,a=>{var{typed:s}=a;return function(c,h){return s.isTypedFunction(c)?o(c,h):_transformCallbackFunction(c,c.length,h)};function o(c,h){var d=Object.fromEntries(Object.entries(c.signatures).map(b=>{var[_,$]=b,j=_.split(",").length;return s.isTypedFunction($)?[_,o($,h)]:[_,_transformCallbackFunction($,j,h)]}));return typeof c.name=="string"?s(c.name,d):s(d)}});function _transformCallbackFunction(a,s,o){return s===o?a:s===o+1?function(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];var b=h.slice(0,o),_=_transformDims(h[o]);return a(...b,_)}:s>o+1?function(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];var b=h.slice(0,o),_=_transformDims(h[o]),$=h.slice(o+1);return a(...b,_,...$)}:a}function _transformDims(a){return a.map(s=>s+1)}var name$m="filter",dependencies$m=["typed"],createFilterTransform=factory(name$m,dependencies$m,a=>{var{typed:s}=a;function o(h,d,b){var _=createFilter({typed:s}),$=createTransformCallback({typed:s});if(h.length===0)return _();var j=h[0];if(h.length===1)return _(j);var Xt=h.length-1,Lt=h[Xt];return j&&(j=c(j,b)),Lt&&(isSymbolNode(Lt)||isFunctionAssignmentNode(Lt)?Lt=c(Lt,b):Lt=compileInlineExpression(Lt,d,b)),_(j,$(Lt,Xt))}o.rawArgs=!0;function c(h,d){return h.compile().evaluate(d)}return o},{isTransformFunction:!0}),name$l="forEach",dependencies$l=["typed"],createForEachTransform=factory(name$l,dependencies$l,a=>{var{typed:s}=a,o=createForEach({typed:s}),c=createTransformCallback({typed:s});function h(b,_,$){if(b.length===0)return o();var j=b[0];if(b.length===1)return o(j);var Xt=b.length-1,Lt=b[Xt];return j&&(j=d(j,$)),Lt&&(isSymbolNode(Lt)||isFunctionAssignmentNode(Lt)?Lt=d(Lt,$):Lt=compileInlineExpression(Lt,_,$)),o(j,c(Lt,Xt))}h.rawArgs=!0;function d(b,_){return b.compile().evaluate(_)}return h},{isTransformFunction:!0}),name$k="index",dependencies$k=["Index","getMatrixDataType"],createIndexTransform=factory(name$k,dependencies$k,a=>{var{Index:s,getMatrixDataType:o}=a;return function(){for(var h=[],d=0,b=arguments.length;d<b;d++){var _=arguments[d];if(isRange(_))_.start--,_.end-=_.step>0?0:2;else if(_&&_.isSet===!0)_=_.map(function(j){return j-1});else if(isArray(_)||isMatrix(_))o(_)!=="boolean"&&(_=_.map(function(j){return j-1}));else if(isNumber(_)||isBigInt(_))_--;else if(isBigNumber(_))_=_.toNumber()-1;else if(typeof _!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");h[d]=_}var $=new s;return s.apply($,h),$}},{isTransformFunction:!0}),name$j="map",dependencies$j=["typed"],createMapTransform=factory(name$j,dependencies$j,a=>{var{typed:s}=a,o=createMap({typed:s}),c=createTransformCallback({typed:s});function h(d,b,_){if(d.length===0)return o();if(d.length===1)return o(d[0]);var $=d.length-1,j=d.slice(0,$),Xt=d[$];return j=j.map(fr=>Lt(fr,_)),Xt&&(isSymbolNode(Xt)||isFunctionAssignmentNode(Xt)?Xt=Lt(Xt,_):Xt=compileInlineExpression(Xt,b,_)),o(...j,c(Xt,$));function Lt(fr,Jr){return fr.compile().evaluate(Jr)}}return h.rawArgs=!0,h},{isTransformFunction:!0});function dimToZeroBase(a){return isNumber(a)?a-1:isBigNumber(a)?a.minus(1):a}function isNumberOrBigNumber(a){return isNumber(a)||isBigNumber(a)}function lastDimToZeroBase(a){if(a.length===2&&isCollection(a[0])){a=a.slice();var s=a[1];isNumberOrBigNumber(s)&&(a[1]=dimToZeroBase(s))}return a}var name$i="max",dependencies$i=["typed","config","numeric","larger","isNaN"],createMaxTransform=factory(name$i,dependencies$i,a=>{var{typed:s,config:o,numeric:c,larger:h,isNaN:d}=a,b=createMax({typed:s,config:o,numeric:c,larger:h,isNaN:d});return s("max",{"...any":function($){$=lastDimToZeroBase($);try{return b.apply(null,$)}catch(j){throw errorTransform(j)}}})},{isTransformFunction:!0}),name$h="mean",dependencies$h=["typed","add","divide"],createMeanTransform=factory(name$h,dependencies$h,a=>{var{typed:s,add:o,divide:c}=a,h=createMean({typed:s,add:o,divide:c});return s("mean",{"...any":function(b){b=lastDimToZeroBase(b);try{return h.apply(null,b)}catch(_){throw errorTransform(_)}}})},{isTransformFunction:!0}),name$g="min",dependencies$g=["typed","config","numeric","smaller","isNaN"],createMinTransform=factory(name$g,dependencies$g,a=>{var{typed:s,config:o,numeric:c,smaller:h,isNaN:d}=a,b=createMin({typed:s,config:o,numeric:c,smaller:h,isNaN:d});return s("min",{"...any":function($){$=lastDimToZeroBase($);try{return b.apply(null,$)}catch(j){throw errorTransform(j)}}})},{isTransformFunction:!0}),name$f="range",dependencies$f=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],createRangeTransform=factory(name$f,dependencies$f,a=>{var{typed:s,config:o,matrix:c,bignumber:h,equal:d,smaller:b,smallerEq:_,larger:$,largerEq:j,add:Xt,isZero:Lt,isPositive:fr}=a,Jr=createRange({typed:s,config:o,matrix:c,bignumber:h,equal:d,smaller:b,smallerEq:_,larger:$,largerEq:j,add:Xt,isZero:Lt,isPositive:fr});return s("range",{"...any":function(qs){var zo=qs.length-1,js=qs[zo];return typeof js!="boolean"&&qs.push(!0),Jr.apply(null,qs)}})},{isTransformFunction:!0}),name$e="row",dependencies$e=["typed","Index","matrix","range"],createRowTransform=factory(name$e,dependencies$e,a=>{var{typed:s,Index:o,matrix:c,range:h}=a,d=createRow({typed:s,Index:o,matrix:c,range:h});return s("row",{"...any":function(_){var $=_.length-1,j=_[$];isNumber(j)&&(_[$]=j-1);try{return d.apply(null,_)}catch(Xt){throw errorTransform(Xt)}}})},{isTransformFunction:!0}),name$d="subset",dependencies$d=["typed","matrix","zeros","add"],createSubsetTransform=factory(name$d,dependencies$d,a=>{var{typed:s,matrix:o,zeros:c,add:h}=a,d=createSubset({typed:s,matrix:o,zeros:c,add:h});return s("subset",{"...any":function(_){try{return d.apply(null,_)}catch($){throw errorTransform($)}}})},{isTransformFunction:!0}),name$c="concat",dependencies$c=["typed","matrix","isInteger"],createConcatTransform=factory(name$c,dependencies$c,a=>{var{typed:s,matrix:o,isInteger:c}=a,h=createConcat({typed:s,matrix:o,isInteger:c});return s("concat",{"...any":function(b){var _=b.length-1,$=b[_];isNumber($)?b[_]=$-1:isBigNumber($)&&(b[_]=$.minus(1));try{return h.apply(null,b)}catch(j){throw errorTransform(j)}}})},{isTransformFunction:!0}),name$b="diff",dependencies$b=["typed","matrix","subtract","number","bignumber"],createDiffTransform=factory(name$b,dependencies$b,a=>{var{typed:s,matrix:o,subtract:c,number:h,bignumber:d}=a,b=createDiff({typed:s,matrix:o,subtract:c,number:h,bignumber:d});return s(name$b,{"...any":function($){$=lastDimToZeroBase($);try{return b.apply(null,$)}catch(j){throw errorTransform(j)}}})},{isTransformFunction:!0}),name$a="std",dependencies$a=["typed","map","sqrt","variance"],createStdTransform=factory(name$a,dependencies$a,a=>{var{typed:s,map:o,sqrt:c,variance:h}=a,d=createStd({typed:s,map:o,sqrt:c,variance:h});return s("std",{"...any":function(_){_=lastDimToZeroBase(_);try{return d.apply(null,_)}catch($){throw errorTransform($)}}})},{isTransformFunction:!0}),name$9="sum",dependencies$9=["typed","config","add","numeric"],createSumTransform=factory(name$9,dependencies$9,a=>{var{typed:s,config:o,add:c,numeric:h}=a,d=createSum({typed:s,config:o,add:c,numeric:h});return s(name$9,{"...any":function(_){_=lastDimToZeroBase(_);try{return d.apply(null,_)}catch($){throw errorTransform($)}}})},{isTransformFunction:!0}),name$8="quantileSeq",dependencies$8=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],createQuantileSeqTransform=factory(name$8,dependencies$8,a=>{var{typed:s,bignumber:o,add:c,subtract:h,divide:d,multiply:b,partitionSelect:_,compare:$,isInteger:j,smaller:Xt,smallerEq:Lt,larger:fr,mapSlices:Jr}=a,Js=createQuantileSeq({typed:s,bignumber:o,add:c,subtract:h,divide:d,multiply:b,partitionSelect:_,compare:$,isInteger:j,smaller:Xt,smallerEq:Lt,larger:fr,mapSlices:Jr});return s("quantileSeq",{"Array | Matrix, number | BigNumber":Js,"Array | Matrix, number | BigNumber, number":(zo,js,eu)=>Js(zo,js,qs(eu)),"Array | Matrix, number | BigNumber, boolean":Js,"Array | Matrix, number | BigNumber, boolean, number":(zo,js,eu,Oo)=>Js(zo,js,eu,qs(Oo)),"Array | Matrix, Array | Matrix":Js,"Array | Matrix, Array | Matrix, number":(zo,js,eu)=>Js(zo,js,qs(eu)),"Array | Matrix, Array | Matrix, boolean":Js,"Array | Matrix, Array | Matrix, boolean, number":(zo,js,eu,Oo)=>Js(zo,js,eu,qs(Oo))});function qs(zo){return lastDimToZeroBase([[],zo])[1]}},{isTransformFunction:!0}),name$7="cumsum",dependencies$7=["typed","add","unaryPlus"],createCumSumTransform=factory(name$7,dependencies$7,a=>{var{typed:s,add:o,unaryPlus:c}=a,h=createCumSum({typed:s,add:o,unaryPlus:c});return s(name$7,{"...any":function(b){if(b.length===2&&isCollection(b[0])){var _=b[1];isNumber(_)?b[1]=_-1:isBigNumber(_)&&(b[1]=_.minus(1))}try{return h.apply(null,b)}catch($){throw errorTransform($)}}})},{isTransformFunction:!0}),name$6="variance",dependencies$6=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],createVarianceTransform=factory(name$6,dependencies$6,a=>{var{typed:s,add:o,subtract:c,multiply:h,divide:d,mapSlices:b,isNaN:_}=a,$=createVariance({typed:s,add:o,subtract:c,multiply:h,divide:d,mapSlices:b,isNaN:_});return s(name$6,{"...any":function(Xt){Xt=lastDimToZeroBase(Xt);try{return $.apply(null,Xt)}catch(Lt){throw errorTransform(Lt)}}})},{isTransformFunction:!0}),name$5="print",dependencies$5=["typed","matrix","zeros","add"],createPrintTransform=factory(name$5,dependencies$5,a=>{var{typed:s,matrix:o,zeros:c,add:h}=a,d=createPrint({typed:s,matrix:o,zeros:c,add:h});return s(name$5,{"string, Object | Array":function($,j){return d(b($),j)},"string, Object | Array, number | Object":function($,j,Xt){return d(b($),j,Xt)}});function b(_){return _.replace(printTemplate,$=>{var j=$.slice(1).split("."),Xt=j.map(function(Lt){return!isNaN(Lt)&&Lt.length>0?parseInt(Lt)-1:Lt});return"$"+Xt.join(".")})}},{isTransformFunction:!0}),name$4="and",dependencies$4=["typed","matrix","zeros","add","equalScalar","not","concat"],createAndTransform=factory(name$4,dependencies$4,a=>{var{typed:s,matrix:o,equalScalar:c,zeros:h,not:d,concat:b}=a,_=createAnd({typed:s,matrix:o,equalScalar:c,zeros:h,not:d,concat:b});function $(j,Xt,Lt){var fr=j[0].compile().evaluate(Lt);if(!isCollection(fr)&&!_(fr,!0))return!1;var Jr=j[1].compile().evaluate(Lt);return _(fr,Jr)}return $.rawArgs=!0,$},{isTransformFunction:!0}),name$3="or",dependencies$3=["typed","matrix","equalScalar","DenseMatrix","concat"],createOrTransform=factory(name$3,dependencies$3,a=>{var{typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d}=a,b=createOr({typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d});function _($,j,Xt){var Lt=$[0].compile().evaluate(Xt);if(!isCollection(Lt)&&b(Lt,!1))return!0;var fr=$[1].compile().evaluate(Xt);return b(Lt,fr)}return _.rawArgs=!0,_},{isTransformFunction:!0}),name$2="nullish",dependencies$2=["typed","matrix","size","flatten","deepEqual"],createNullishTransform=factory(name$2,dependencies$2,a=>{var{typed:s,matrix:o,size:c,flatten:h,deepEqual:d}=a,b=createNullish({typed:s,matrix:o,size:c,flatten:h,deepEqual:d});function _($,j,Xt){var Lt=$[0].compile().evaluate(Xt);if(!isCollection(Lt)&&Lt!=null&&Lt!==void 0)return Lt;var fr=$[1].compile().evaluate(Xt);return b(Lt,fr)}return _.rawArgs=!0,_},{isTransformFunction:!0}),name$1="bitAnd",dependencies$1=["typed","matrix","zeros","add","equalScalar","not","concat"],createBitAndTransform=factory(name$1,dependencies$1,a=>{var{typed:s,matrix:o,equalScalar:c,zeros:h,not:d,concat:b}=a,_=createBitAnd({typed:s,matrix:o,equalScalar:c,zeros:h,not:d,concat:b});function $(j,Xt,Lt){var fr=j[0].compile().evaluate(Lt);if(!isCollection(fr)){if(isNaN(fr))return NaN;if(fr===0||fr===!1)return 0}var Jr=j[1].compile().evaluate(Lt);return _(fr,Jr)}return $.rawArgs=!0,$},{isTransformFunction:!0}),name="bitOr",dependencies=["typed","matrix","equalScalar","DenseMatrix","concat"],createBitOrTransform=factory(name,dependencies,a=>{var{typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d}=a,b=createBitOr({typed:s,matrix:o,equalScalar:c,DenseMatrix:h,concat:d});function _($,j,Xt){var Lt=$[0].compile().evaluate(Xt);if(!isCollection(Lt)){if(isNaN(Lt))return NaN;if(Lt===-1)return-1;if(Lt===!0)return 1}var fr=$[1].compile().evaluate(Xt);return b(Lt,fr)}return _.rawArgs=!0,_},{isTransformFunction:!0}),BigNumber=createBigNumberClass({config:config$1}),Complex=createComplexClass({}),e=createE({BigNumber,config:config$1}),_false=createFalse({}),fineStructure=createFineStructure({BigNumber,config:config$1}),Fraction=createFractionClass({}),i$1=createI({Complex}),_Infinity=createInfinity({BigNumber,config:config$1}),LN10=createLN10({BigNumber,config:config$1}),LOG10E=createLOG10E({BigNumber,config:config$1}),Matrix=createMatrixClass({}),_NaN=createNaN({BigNumber,config:config$1}),_null=createNull({}),phi=createPhi({BigNumber,config:config$1}),Range=createRangeClass({}),ResultSet=createResultSet({}),SQRT1_2=createSQRT1_2({BigNumber,config:config$1}),sackurTetrode=createSackurTetrode({BigNumber,config:config$1}),tau=createTau({BigNumber,config:config$1}),_true=createTrue({}),version$1=createVersion({}),DenseMatrix=createDenseMatrixClass({Matrix,config:config$1}),efimovFactor=createEfimovFactor({BigNumber,config:config$1}),LN2=createLN2({BigNumber,config:config$1}),pi$1=createPi({BigNumber,config:config$1}),replacer=createReplacer({}),SQRT2=createSQRT2({BigNumber,config:config$1}),typed=createTyped({BigNumber,Complex,DenseMatrix,Fraction}),weakMixingAngle=createWeakMixingAngle({BigNumber,config:config$1}),abs=createAbs({typed}),acos=createAcos({Complex,config:config$1,typed}),acot=createAcot({BigNumber,typed}),acsc=createAcsc({BigNumber,Complex,config:config$1,typed}),addScalar=createAddScalar({typed}),arg=createArg({typed}),asech=createAsech({BigNumber,Complex,config:config$1,typed}),asinh=createAsinh({typed}),atan=createAtan({typed}),atanh=createAtanh({Complex,config:config$1,typed}),bigint=createBigint({typed}),bitNot=createBitNot({typed}),boolean=createBoolean({typed}),clone=createClone({typed}),combinations=createCombinations({typed}),complex=createComplex({Complex,typed}),conj=createConj({typed}),cos=createCos({typed}),cot=createCot({BigNumber,typed}),csc=createCsc({BigNumber,typed}),cube=createCube({typed}),equalScalar=createEqualScalar({config:config$1,typed}),erf=createErf({typed}),exp=createExp({typed}),expm1=createExpm1({Complex,typed}),filter=createFilter({typed}),flatten=createFlatten({typed}),forEach=createForEach({typed}),format=createFormat({typed}),getMatrixDataType=createGetMatrixDataType({typed}),hex=createHex({format,typed}),im$1=createIm({typed}),isBounded=createIsBounded({typed}),isNaN$1=createIsNaN({typed}),isNumeric=createIsNumeric({typed}),isPrime=createIsPrime({typed}),LOG2E=createLOG2E({BigNumber,config:config$1}),lgamma=createLgamma({Complex,typed}),log10=createLog10({Complex,config:config$1,typed}),log2=createLog2({Complex,config:config$1,typed}),map=createMap({typed}),mode=createMode({isNaN:isNaN$1,isNumeric,typed}),multiplyScalar=createMultiplyScalar({typed}),not=createNot({typed}),number=createNumber({typed}),oct=createOct({format,typed}),pickRandom=createPickRandom({config:config$1,typed}),print=createPrint({typed}),random=createRandom({config:config$1,typed}),re$1=createRe({typed}),sec=createSec({BigNumber,typed}),sign=createSign({BigNumber,Fraction,complex,typed}),sin=createSin({typed}),size=createSize({typed}),SparseMatrix=createSparseMatrixClass({Matrix,equalScalar,typed}),splitUnit=createSplitUnit({typed}),square=createSquare({typed}),string=createString({typed}),subtractScalar=createSubtractScalar({typed}),tan=createTan({typed}),toBest=createToBest({typed}),typeOf=createTypeOf({typed}),acosh=createAcosh({Complex,config:config$1,typed}),acsch=createAcsch({BigNumber,typed}),asec=createAsec({BigNumber,Complex,config:config$1,typed}),bignumber=createBignumber({BigNumber,typed}),combinationsWithRep=createCombinationsWithRep({typed}),cosh=createCosh({typed}),csch=createCsch({BigNumber,typed}),dot=createDot({addScalar,conj,multiplyScalar,size,typed}),hasNumericValue=createHasNumericValue({isNumeric,typed}),isFinite$1=createIsFinite({isBounded,map,typed}),isNegative=createIsNegative({config:config$1,typed}),isZero=createIsZero({equalScalar,typed}),matrix=createMatrix({DenseMatrix,Matrix,SparseMatrix,typed}),matrixFromFunction=createMatrixFromFunction({isZero,matrix,typed}),multiply=createMultiply({addScalar,dot,equalScalar,matrix,multiplyScalar,typed}),ones=createOnes({BigNumber,config:config$1,matrix,typed}),randomInt=createRandomInt({config:config$1,log2,typed}),resize=createResize({config:config$1,matrix}),sech=createSech({BigNumber,typed}),sinh=createSinh({typed}),sparse=createSparse({SparseMatrix,typed}),sqrt=createSqrt({Complex,config:config$1,typed}),squeeze=createSqueeze({typed}),tanh=createTanh({typed}),transpose=createTranspose({matrix,typed}),xgcd=createXgcd({BigNumber,config:config$1,matrix,typed}),zeros=createZeros({BigNumber,config:config$1,matrix,typed}),acoth=createAcoth({BigNumber,Complex,config:config$1,typed}),asin=createAsin({Complex,config:config$1,typed}),bin$1=createBin({format,typed}),coth=createCoth({BigNumber,typed}),ctranspose=createCtranspose({conj,transpose,typed}),diag=createDiag({DenseMatrix,SparseMatrix,matrix,typed}),equal=createEqual({DenseMatrix,SparseMatrix,equalScalar,matrix,typed}),fraction=createFraction({Fraction,typed}),identity=createIdentity({BigNumber,DenseMatrix,SparseMatrix,config:config$1,matrix,typed}),isInteger=createIsInteger({equal,typed}),kron=createKron({matrix,multiplyScalar,typed}),mapSlices=createMapSlices({isInteger,typed}),matrixFromColumns=createMatrixFromColumns({flatten,matrix,size,typed}),numeric=createNumeric({bignumber,fraction,number}),prod=createProd({config:config$1,multiplyScalar,numeric,typed}),reshape=createReshape({isInteger,matrix,typed}),round=createRound({BigNumber,DenseMatrix,config:config$1,equalScalar,matrix,typed,zeros}),unaryMinus=createUnaryMinus({typed}),bernoulli=createBernoulli({BigNumber,Fraction,config:config$1,isInteger,number,typed}),cbrt=createCbrt({BigNumber,Complex,Fraction,config:config$1,isNegative,matrix,typed,unaryMinus}),concat=createConcat({isInteger,matrix,typed}),count=createCount({prod,size,typed}),deepEqual=createDeepEqual({equal,typed}),divideScalar=createDivideScalar({numeric,typed}),dotMultiply=createDotMultiply({concat,equalScalar,matrix,multiplyScalar,typed}),floor=createFloor({DenseMatrix,config:config$1,equalScalar,matrix,round,typed,zeros}),gcd=createGcd({BigNumber,DenseMatrix,concat,config:config$1,equalScalar,matrix,round,typed,zeros}),isPositive=createIsPositive({config:config$1,typed}),larger=createLarger({DenseMatrix,SparseMatrix,bignumber,concat,config:config$1,matrix,typed}),lcm=createLcm({concat,equalScalar,matrix,typed}),leftShift=createLeftShift({DenseMatrix,concat,equalScalar,matrix,typed,zeros}),lsolve=createLsolve({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),max=createMax({config:config$1,isNaN:isNaN$1,larger,numeric,typed}),mod=createMod({DenseMatrix,concat,config:config$1,equalScalar,matrix,round,typed,zeros}),nthRoot=createNthRoot({BigNumber,concat,equalScalar,matrix,typed}),nullish=createNullish({deepEqual,flatten,matrix,size,typed}),or$1=createOr({DenseMatrix,concat,equalScalar,matrix,typed}),qr$1=createQr({addScalar,complex,conj,divideScalar,equal,identity,isZero,matrix,multiplyScalar,sign,sqrt,subtractScalar,typed,unaryMinus,zeros}),rightArithShift=createRightArithShift({DenseMatrix,concat,equalScalar,matrix,typed,zeros}),smaller=createSmaller({DenseMatrix,SparseMatrix,bignumber,concat,config:config$1,matrix,typed}),subtract=createSubtract({DenseMatrix,concat,equalScalar,matrix,subtractScalar,typed,unaryMinus}),to$1=createTo({concat,matrix,typed}),unaryPlus=createUnaryPlus({config:config$1,numeric,typed}),usolve=createUsolve({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),xor=createXor({DenseMatrix,SparseMatrix,concat,matrix,typed}),add=createAdd({DenseMatrix,SparseMatrix,addScalar,concat,equalScalar,matrix,typed}),atan2=createAtan2({BigNumber,DenseMatrix,concat,equalScalar,matrix,typed}),bitAnd=createBitAnd({concat,equalScalar,matrix,typed}),bitOr=createBitOr({DenseMatrix,concat,equalScalar,matrix,typed}),bitXor=createBitXor({DenseMatrix,SparseMatrix,concat,matrix,typed}),catalan=createCatalan({addScalar,combinations,divideScalar,isInteger,isNegative,multiplyScalar,typed}),compare=createCompare({BigNumber,DenseMatrix,Fraction,concat,config:config$1,equalScalar,matrix,typed}),compareText=createCompareText({concat,matrix,typed}),composition=createComposition({addScalar,combinations,isInteger,isNegative,isPositive,larger,typed}),cross=createCross({matrix,multiply,subtract,typed}),det=createDet({divideScalar,isZero,matrix,multiply,subtractScalar,typed,unaryMinus}),diff=createDiff({matrix,number,subtract,typed}),distance=createDistance({abs,addScalar,deepEqual,divideScalar,multiplyScalar,sqrt,subtractScalar,typed}),dotDivide=createDotDivide({DenseMatrix,SparseMatrix,concat,divideScalar,equalScalar,matrix,typed}),equalText=createEqualText({compareText,isZero,typed}),FibonacciHeap=createFibonacciHeapClass({larger,smaller}),hypot=createHypot({abs,addScalar,divideScalar,isPositive,multiplyScalar,smaller,sqrt,typed}),ImmutableDenseMatrix=createImmutableDenseMatrixClass({DenseMatrix,smaller}),Index=createIndexClass({ImmutableDenseMatrix,getMatrixDataType}),intersect=createIntersect({abs,add,addScalar,config:config$1,divideScalar,equalScalar,flatten,isNumeric,isZero,matrix,multiply,multiplyScalar,smaller,subtract,typed}),invmod=createInvmod({BigNumber,add,config:config$1,equal,isInteger,mod,smaller,typed,xgcd}),largerEq=createLargerEq({DenseMatrix,SparseMatrix,concat,config:config$1,matrix,typed}),log=createLog({Complex,config:config$1,divideScalar,typeOf,typed}),lsolveAll=createLsolveAll({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),matrixFromRows=createMatrixFromRows({flatten,matrix,size,typed}),min=createMin({config:config$1,isNaN:isNaN$1,numeric,smaller,typed}),nthRoots=createNthRoots({Complex,config:config$1,divideScalar,typed}),partitionSelect=createPartitionSelect({compare,isNaN:isNaN$1,isNumeric,typed}),rightLogShift=createRightLogShift({DenseMatrix,concat,equalScalar,matrix,typed,zeros}),slu=createSlu({SparseMatrix,abs,add,divideScalar,larger,largerEq,multiply,subtract,transpose,typed}),Spa=createSpaClass({FibonacciHeap,addScalar,equalScalar}),subset=createSubset({add,matrix,typed,zeros}),sum=createSum({add,config:config$1,numeric,typed}),trace=createTrace({add,matrix,typed}),usolveAll=createUsolveAll({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),zpk2tf=createZpk2tf({Complex,add,multiply,number,typed}),ceil=createCeil({DenseMatrix,config:config$1,equalScalar,matrix,round,typed,zeros}),compareNatural=createCompareNatural({compare,typed}),cumsum=createCumSum({add,typed,unaryPlus}),fix=createFix({Complex,DenseMatrix,ceil,equalScalar,floor,matrix,typed,zeros}),index=createIndex({Index,typed}),inv=createInv({abs,addScalar,det,divideScalar,identity,matrix,multiply,typed,unaryMinus}),log1p=createLog1p({Complex,config:config$1,divideScalar,log,typed}),lup=createLup({DenseMatrix,Spa,SparseMatrix,abs,addScalar,divideScalar,equalScalar,larger,matrix,multiplyScalar,subtractScalar,typed,unaryMinus}),pinv=createPinv({Complex,add,ctranspose,deepEqual,divideScalar,dot,dotDivide,equal,inv,matrix,multiply,typed}),pow=createPow({Complex,config:config$1,fraction,identity,inv,matrix,multiply,number,typed}),setCartesian=createSetCartesian({DenseMatrix,Index,compareNatural,size,subset,typed}),setDistinct=createSetDistinct({DenseMatrix,Index,compareNatural,size,subset,typed}),setIsSubset=createSetIsSubset({Index,compareNatural,size,subset,typed}),setPowerset=createSetPowerset({Index,compareNatural,size,subset,typed}),smallerEq=createSmallerEq({DenseMatrix,SparseMatrix,concat,config:config$1,matrix,typed}),sort=createSort({compare,compareNatural,matrix,typed}),sqrtm=createSqrtm({abs,add,identity,inv,map,max,multiply,size,sqrt,subtract,typed}),unequal=createUnequal({DenseMatrix,SparseMatrix,concat,config:config$1,equalScalar,matrix,typed}),and=createAnd({concat,equalScalar,matrix,not,typed,zeros}),divide=createDivide({divideScalar,equalScalar,inv,matrix,multiply,typed}),expm=createExpm({abs,add,identity,inv,multiply,typed}),fft=createFft({addScalar,ceil,conj,divideScalar,dotDivide,exp,i:i$1,log2,matrix,multiplyScalar,pow,tau,typed}),freqz=createFreqz({Complex,add,divide,matrix,multiply,typed}),gamma=createGamma({BigNumber,Complex,config:config$1,multiplyScalar,pow,typed}),ifft=createIfft({conj,dotDivide,fft,typed}),kldivergence=createKldivergence({divide,dotDivide,isNumeric,log,map,matrix,multiply,sum,typed}),lusolve=createLusolve({DenseMatrix,lsolve,lup,matrix,slu,typed,usolve}),mean=createMean({add,divide,typed}),median=createMedian({add,compare,divide,partitionSelect,typed}),polynomialRoot=createPolynomialRoot({add,cbrt,divide,equalScalar,im:im$1,isZero,multiply,re:re$1,sqrt,subtract,typeOf,typed,unaryMinus}),quantileSeq=createQuantileSeq({bignumber,add,compare,divide,isInteger,larger,mapSlices,multiply,partitionSelect,smaller,smallerEq,subtract,typed}),range=createRange({bignumber,matrix,add,config:config$1,equal,isPositive,isZero,larger,largerEq,smaller,smallerEq,typed}),row=createRow({Index,matrix,range,typed}),setDifference=createSetDifference({DenseMatrix,Index,compareNatural,size,subset,typed}),setMultiplicity=createSetMultiplicity({Index,compareNatural,size,subset,typed}),setSymDifference=createSetSymDifference({Index,concat,setDifference,size,subset,typed}),solveODE=createSolveODE({abs,add,bignumber,divide,isNegative,isPositive,larger,map,matrix,max,multiply,smaller,subtract,typed,unaryMinus}),Unit=createUnitClass({BigNumber,Complex,Fraction,abs,addScalar,config:config$1,divideScalar,equal,fix,format,isNumeric,multiplyScalar,number,pow,round,subtractScalar}),vacuumImpedance=createVacuumImpedance({BigNumber,Unit,config:config$1}),atomicMass=createAtomicMass({BigNumber,Unit,config:config$1}),bohrMagneton=createBohrMagneton({BigNumber,Unit,config:config$1}),boltzmann=createBoltzmann({BigNumber,Unit,config:config$1}),column=createColumn({Index,matrix,range,typed}),conductanceQuantum=createConductanceQuantum({BigNumber,Unit,config:config$1}),coulomb=createCoulomb({BigNumber,Unit,config:config$1}),createUnit=createCreateUnit({Unit,typed}),deuteronMass=createDeuteronMass({BigNumber,Unit,config:config$1}),eigs=createEigs({abs,add,addScalar,atan,bignumber,column,complex,config:config$1,cos,diag,divideScalar,dot,equal,flatten,im:im$1,inv,larger,matrix,matrixFromColumns,multiply,multiplyScalar,number,qr:qr$1,re:re$1,reshape,sin,size,smaller,sqrt,subtract,typed,usolve,usolveAll}),electronMass=createElectronMass({BigNumber,Unit,config:config$1}),factorial=createFactorial({gamma,typed}),fermiCoupling=createFermiCoupling({BigNumber,Unit,config:config$1}),gasConstant=createGasConstant({BigNumber,Unit,config:config$1}),gravity=createGravity({BigNumber,Unit,config:config$1}),klitzing=createKlitzing({BigNumber,Unit,config:config$1}),loschmidt=createLoschmidt({BigNumber,Unit,config:config$1}),mad=createMad({abs,map,median,subtract,typed}),magneticFluxQuantum=createMagneticFluxQuantum({BigNumber,Unit,config:config$1}),molarMass=createMolarMass({BigNumber,Unit,config:config$1}),molarPlanckConstant=createMolarPlanckConstant({BigNumber,Unit,config:config$1}),multinomial=createMultinomial({add,divide,factorial,isInteger,isPositive,multiply,typed}),norm=createNorm({abs,add,conj,ctranspose,eigs,equalScalar,larger,matrix,multiply,pow,smaller,sqrt,typed}),permutations=createPermutations({factorial,typed}),planckConstant=createPlanckConstant({BigNumber,Unit,config:config$1}),planckMass=createPlanckMass({BigNumber,Unit,config:config$1}),planckTime=createPlanckTime({BigNumber,Unit,config:config$1}),reducedPlanckConstant=createReducedPlanckConstant({BigNumber,Unit,config:config$1}),rotationMatrix=createRotationMatrix({BigNumber,DenseMatrix,SparseMatrix,addScalar,config:config$1,cos,matrix,multiplyScalar,norm,sin,typed,unaryMinus}),rydberg=createRydberg({BigNumber,Unit,config:config$1}),secondRadiation=createSecondRadiation({BigNumber,Unit,config:config$1}),setSize=createSetSize({compareNatural,typed}),speedOfLight=createSpeedOfLight({BigNumber,Unit,config:config$1}),stefanBoltzmann=createStefanBoltzmann({BigNumber,Unit,config:config$1}),thomsonCrossSection=createThomsonCrossSection({BigNumber,Unit,config:config$1}),variance=createVariance({add,divide,isNaN:isNaN$1,mapSlices,multiply,subtract,typed}),zeta=createZeta({BigNumber,Complex,add,config:config$1,divide,equal,factorial,gamma,isBounded,isNegative,multiply,pi:pi$1,pow,sin,smallerEq,subtract,typed}),avogadro=createAvogadro({BigNumber,Unit,config:config$1}),bohrRadius=createBohrRadius({BigNumber,Unit,config:config$1}),corr=createCorr({add,divide,matrix,mean,multiply,pow,sqrt,subtract,sum,typed}),dotPow=createDotPow({DenseMatrix,SparseMatrix,concat,equalScalar,matrix,pow,typed}),elementaryCharge=createElementaryCharge({BigNumber,Unit,config:config$1}),faraday=createFaraday({BigNumber,Unit,config:config$1}),hartreeEnergy=createHartreeEnergy({BigNumber,Unit,config:config$1}),inverseConductanceQuantum=createInverseConductanceQuantum({BigNumber,Unit,config:config$1}),magneticConstant=createMagneticConstant({BigNumber,Unit,config:config$1}),molarMassC12=createMolarMassC12({BigNumber,Unit,config:config$1}),neutronMass=createNeutronMass({BigNumber,Unit,config:config$1}),planckCharge=createPlanckCharge({BigNumber,Unit,config:config$1}),planckTemperature=createPlanckTemperature({BigNumber,Unit,config:config$1}),quantumOfCirculation=createQuantumOfCirculation({BigNumber,Unit,config:config$1}),setIntersect=createSetIntersect({DenseMatrix,Index,compareNatural,size,subset,typed}),std=createStd({map,sqrt,typed,variance}),stirlingS2=createStirlingS2({bignumber,addScalar,combinations,divideScalar,factorial,isInteger,isNegative,larger,multiplyScalar,number,pow,subtractScalar,typed}),unit=createUnitFunction({Unit,typed}),bellNumbers=createBellNumbers({addScalar,isInteger,isNegative,stirlingS2,typed}),electricConstant=createElectricConstant({BigNumber,Unit,config:config$1}),firstRadiation=createFirstRadiation({BigNumber,Unit,config:config$1}),nuclearMagneton=createNuclearMagneton({BigNumber,Unit,config:config$1}),planckLength=createPlanckLength({BigNumber,Unit,config:config$1}),rotate=createRotate({multiply,rotationMatrix,typed}),setUnion=createSetUnion({Index,concat,setIntersect,setSymDifference,size,subset,typed}),wienDisplacement=createWienDisplacement({BigNumber,Unit,config:config$1}),classicalElectronRadius=createClassicalElectronRadius({BigNumber,Unit,config:config$1}),molarVolume=createMolarVolume({BigNumber,Unit,config:config$1}),schur=createSchur({identity,matrix,multiply,norm,qr:qr$1,subtract,typed}),coulombConstant=createCoulombConstant({BigNumber,Unit,config:config$1}),gravitationConstant=createGravitationConstant({BigNumber,Unit,config:config$1}),protonMass=createProtonMass({BigNumber,Unit,config:config$1}),sylvester=createSylvester({abs,add,concat,identity,index,lusolve,matrix,matrixFromColumns,multiply,range,schur,subset,subtract,transpose,typed}),lyap=createLyap({matrix,multiply,sylvester,transpose,typed}),math$1={},mathWithTransform={},classes={},Node$1=createNode({mathWithTransform}),ObjectNode=createObjectNode({Node:Node$1}),OperatorNode=createOperatorNode({Node:Node$1}),ParenthesisNode=createParenthesisNode({Node:Node$1}),RelationalNode=createRelationalNode({Node:Node$1}),ArrayNode=createArrayNode({Node:Node$1}),BlockNode=createBlockNode({Node:Node$1,ResultSet}),ConditionalNode=createConditionalNode({Node:Node$1}),RangeNode=createRangeNode({Node:Node$1}),reviver=createReviver({classes}),Chain=createChainClass({math:math$1,typed}),FunctionAssignmentNode=createFunctionAssignmentNode({Node:Node$1,typed}),chain=createChain({Chain,typed}),ConstantNode=createConstantNode({Node:Node$1,isBounded}),IndexNode=createIndexNode({Node:Node$1,size}),AccessorNode=createAccessorNode({Node:Node$1,subset}),AssignmentNode=createAssignmentNode({matrix,Node:Node$1,subset}),SymbolNode$1=createSymbolNode({Unit,Node:Node$1,math:math$1}),FunctionNode=createFunctionNode({Node:Node$1,SymbolNode:SymbolNode$1,math:math$1}),parse=createParse({AccessorNode,ArrayNode,AssignmentNode,BlockNode,ConditionalNode,ConstantNode,FunctionAssignmentNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,RangeNode,RelationalNode,SymbolNode:SymbolNode$1,config:config$1,numeric,typed}),resolve=createResolve({ConstantNode,FunctionNode,OperatorNode,ParenthesisNode,parse,typed}),simplifyConstant=createSimplifyConstant({bignumber,fraction,AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,SymbolNode:SymbolNode$1,config:config$1,isBounded,mathWithTransform,matrix,typed}),compile=createCompile({parse,typed}),leafCount=createLeafCount({parse,typed}),simplifyCore=createSimplifyCore({AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,add,divide,equal,isZero,multiply,parse,pow,subtract,typed}),evaluate=createEvaluate({parse,typed}),Help=createHelpClass({evaluate}),Parser$1=createParserClass({evaluate,parse}),parser=createParser({Parser:Parser$1,typed}),simplify=createSimplify({AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,equal,parse,replacer,resolve,simplifyConstant,simplifyCore,typed}),symbolicEqual=createSymbolicEqual({OperatorNode,parse,simplify,typed}),derivative=createDerivative$1({ConstantNode,FunctionNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,config:config$1,equal,isZero,numeric,parse,simplify,typed}),help=createHelp({Help,mathWithTransform,typed}),rationalize=createRationalize({bignumber,fraction,AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,add,config:config$1,divide,equal,isZero,mathWithTransform,matrix,multiply,parse,pow,simplify,simplifyConstant,simplifyCore,subtract,typed});_extends$1(math$1,{e,false:_false,fineStructure,i:i$1,Infinity:_Infinity,LN10,LOG10E,NaN:_NaN,null:_null,phi,SQRT1_2,sackurTetrode,tau,true:_true,E:e,version:version$1,efimovFactor,LN2,pi:pi$1,replacer,reviver,SQRT2,typed,PI:pi$1,weakMixingAngle,abs,acos,acot,acsc,addScalar,arg,asech,asinh,atan,atanh,bigint,bitNot,boolean,clone,combinations,complex,conj,cos,cot,csc,cube,equalScalar,erf,exp,expm1,filter,flatten,forEach,format,getMatrixDataType,hex,im:im$1,isBounded,isNaN:isNaN$1,isNumeric,isPrime,LOG2E,lgamma,log10,log2,map,mode,multiplyScalar,not,number,oct,pickRandom,print,random,re:re$1,sec,sign,sin,size,splitUnit,square,string,subtractScalar,tan,toBest,typeOf,acosh,acsch,asec,bignumber,chain,combinationsWithRep,cosh,csch,dot,hasNumericValue,isFinite:isFinite$1,isNegative,isZero,matrix,matrixFromFunction,multiply,ones,randomInt,resize,sech,sinh,sparse,sqrt,squeeze,tanh,transpose,xgcd,zeros,acoth,asin,bin:bin$1,coth,ctranspose,diag,equal,fraction,identity,isInteger,kron,mapSlices,matrixFromColumns,numeric,prod,reshape,round,unaryMinus,bernoulli,cbrt,concat,count,deepEqual,divideScalar,dotMultiply,floor,gcd,isPositive,larger,lcm,leftShift,lsolve,max,mod,nthRoot,nullish,or:or$1,qr:qr$1,rightArithShift,smaller,subtract,to:to$1,unaryPlus,usolve,xor,add,atan2,bitAnd,bitOr,bitXor,catalan,compare,compareText,composition,cross,det,diff,distance,dotDivide,equalText,hypot,intersect,invmod,largerEq,log,lsolveAll,matrixFromRows,min,nthRoots,partitionSelect,rightLogShift,slu,subset,sum,trace,usolveAll,zpk2tf,ceil,compareNatural,cumsum,fix,index,inv,log1p,lup,pinv,pow,setCartesian,setDistinct,setIsSubset,setPowerset,smallerEq,sort,sqrtm,unequal,and,divide,expm,fft,freqz,gamma,ifft,kldivergence,lusolve,mean,median,polynomialRoot,quantileSeq,range,row,setDifference,setMultiplicity,setSymDifference,solveODE,vacuumImpedance,atomicMass,bohrMagneton,boltzmann,column,conductanceQuantum,coulomb,createUnit,deuteronMass,eigs,electronMass,factorial,fermiCoupling,gasConstant,gravity,klitzing,loschmidt,mad,magneticFluxQuantum,molarMass,molarPlanckConstant,multinomial,norm,permutations,planckConstant,planckMass,planckTime,reducedPlanckConstant,rotationMatrix,rydberg,secondRadiation,setSize,speedOfLight,stefanBoltzmann,thomsonCrossSection,variance,zeta,avogadro,bohrRadius,corr,dotPow,elementaryCharge,faraday,hartreeEnergy,inverseConductanceQuantum,magneticConstant,molarMassC12,neutronMass,parse,planckCharge,planckTemperature,quantumOfCirculation,resolve,setIntersect,simplifyConstant,std,stirlingS2,unit,bellNumbers,compile,electricConstant,firstRadiation,leafCount,nuclearMagneton,planckLength,rotate,setUnion,simplifyCore,wienDisplacement,classicalElectronRadius,evaluate,molarVolume,schur,coulombConstant,gravitationConstant,parser,simplify,symbolicEqual,derivative,protonMass,sylvester,help,rationalize,lyap,config:config$1});_extends$1(mathWithTransform,math$1,{map:createMapTransform({typed}),filter:createFilterTransform({typed}),forEach:createForEachTransform({typed}),mapSlices:createMapSlicesTransform({isInteger,typed}),and:createAndTransform({add,concat,equalScalar,matrix,not,typed,zeros}),cumsum:createCumSumTransform({add,typed,unaryPlus}),nullish:createNullishTransform({deepEqual,flatten,matrix,size,typed}),print:createPrintTransform({add,matrix,typed,zeros}),bitAnd:createBitAndTransform({add,concat,equalScalar,matrix,not,typed,zeros}),concat:createConcatTransform({isInteger,matrix,typed}),diff:createDiffTransform({bignumber,matrix,number,subtract,typed}),max:createMaxTransform({config:config$1,isNaN:isNaN$1,larger,numeric,typed}),min:createMinTransform({config:config$1,isNaN:isNaN$1,numeric,smaller,typed}),or:createOrTransform({DenseMatrix,concat,equalScalar,matrix,typed}),subset:createSubsetTransform({add,matrix,typed,zeros}),bitOr:createBitOrTransform({DenseMatrix,concat,equalScalar,matrix,typed}),sum:createSumTransform({add,config:config$1,numeric,typed}),variance:createVarianceTransform({add,divide,isNaN:isNaN$1,mapSlices,multiply,subtract,typed}),index:createIndexTransform({Index,getMatrixDataType}),quantileSeq:createQuantileSeqTransform({add,bignumber,compare,divide,isInteger,larger,mapSlices,multiply,partitionSelect,smaller,smallerEq,subtract,typed}),range:createRangeTransform({bignumber,matrix,add,config:config$1,equal,isPositive,isZero,larger,largerEq,smaller,smallerEq,typed}),column:createColumnTransform({Index,matrix,range,typed}),row:createRowTransform({Index,matrix,range,typed}),mean:createMeanTransform({add,divide,typed}),std:createStdTransform({map,sqrt,typed,variance})});_extends$1(classes,{BigNumber,Complex,Fraction,Matrix,Node:Node$1,ObjectNode,OperatorNode,ParenthesisNode,Range,RelationalNode,ResultSet,ArrayNode,BlockNode,ConditionalNode,DenseMatrix,RangeNode,Chain,FunctionAssignmentNode,SparseMatrix,ConstantNode,IndexNode,FibonacciHeap,ImmutableDenseMatrix,Index,Spa,AccessorNode,AssignmentNode,Unit,SymbolNode:SymbolNode$1,FunctionNode,Help,Parser:Parser$1});Chain.createProxy(math$1);function createFunction(a){try{const s=compile(a);return o=>{try{return s.evaluate({x:o})}catch{return NaN}}}catch(s){throw new Error(`Invalid expression: ${s.message}`)}}function createDerivative(a){try{const s=derivative(a,"x"),o=compile(s.toString());return c=>{try{return o.evaluate({x:c})}catch{return NaN}}}catch{console.warn("Symbolic derivative failed, using numerical approximation");const o=createFunction(a);return c=>numericalDerivative(o,c)}}function numericalDerivative(a,s,o=1e-8){return(a(s+o)-a(s-o))/(2*o)}function validateExpression(a){if(!a||a.trim()==="")return{valid:!1,error:"Expression cannot be empty"};const s=a.trim(),o=["sin","cos","tan","asin","acos","atan","sinh","cosh","tanh","asinh","acosh","atanh","log","log10","log2","ln","exp","sqrt","abs","ceil","floor","round","sign"];for(const h of o)if(new RegExp(`\\b${h}\\b(?!\\s*\\()`,"i").test(s))return{valid:!1,error:`Function "${h}" requires an argument, e.g., ${h}(x)`};if(!/^[\s\d\.\+\-\*\/\^\(\)x]|sin|cos|tan|log|exp|sqrt|pi|e|abs/i.test(s))try{const d=createFunction(s)(1);if(typeof d!="number"||isNaN(d))return{valid:!1,error:"Invalid expression - please enter a valid function of x"}}catch{return{valid:!1,error:"Invalid expression - please enter a valid function of x"}}try{parse(a);const h=createFunction(a),d=h(1);if(typeof d!="number")return{valid:!1,error:"Expression must evaluate to a number"};if(isNaN(d)){const b=h(2);if(isNaN(b))return{valid:!1,error:"Invalid expression - cannot evaluate function"}}return{valid:!0}}catch(h){return{valid:!1,error:h.message}}}function getDerivativeString(a){try{return derivative(a,"x").toString()}catch{return"f'(x)"}}function newtonIteration(a,s,o){const c=a(o),h=s(o);if(Math.abs(h)<1e-12)throw new Error(`Derivative is zero at x = ${o}. Newton's method cannot continue.`);const d=o-c/h,b=h,_=c-h*o;return{nextX:d,fx:c,fPrimeX:h,tangentSlope:b,tangentIntercept:_}}function createNewtonSolver(a){const s=createFunction(a),o=createDerivative(a),c=getDerivativeString(a);let h=[],d=null;return{setInitialGuess(b){const _=s(b),$=o(b);if(!isFinite(_))throw new Error(`Function is undefined at x = ${b.toFixed(4)} (vertical asymptote or singularity)`);if(!isFinite($))throw new Error(`Derivative is undefined at x = ${b.toFixed(4)}`);d=b,h=[{n:0,x:b,fx:_,fPrimeX:$,tangentSlope:$,tangentIntercept:_-$*b}]},nextIteration(){if(d===null)throw new Error("Initial guess not set");const b=newtonIteration(s,o,d);if(!isFinite(b.nextX))throw new Error("Newton's method diverged to infinity");const _=s(b.nextX),$=o(b.nextX);if(!isFinite(_))throw new Error(`Iteration landed on a singularity at x = ${b.nextX.toFixed(4)}`);if(!isFinite($))throw new Error(`Derivative undefined at x = ${b.nextX.toFixed(4)}`);d=b.nextX;const j={n:h.length,x:b.nextX,fx:_,fPrimeX:$,prevX:h[h.length-1].x,tangentSlope:b.tangentSlope,tangentIntercept:b.tangentIntercept};return h.push(j),j},getIterations(){return[...h]},getCurrentX(){return d},evaluate(b){return s(b)},getDerivativeString(){return c},hasConverged(b=1e-10){if(h.length<2)return!1;const _=h[h.length-1].fx;return Math.abs(_)<b},reset(){h=[],d=null}}}function getConvergenceProgress(a,s,o=1e-10){const c=Math.abs(a),h=Math.abs(s),d=o;if(h<=d||c<=0)return 1;if(c>=h)return 0;const b=Math.log10(h),_=Math.log10(Math.max(c,d)),$=Math.log10(d);return Math.min(1,Math.max(0,(b-_)/(b-$)))}function getIterationColor(a,s,o=1e-10){return`hsl(${200+-80*getConvergenceProgress(a,s,o)}, 70%, 50%)`}function Graph({functionExpression:a,solver:s,iterations:o,visibleIterations:c,onElementClick:h}){const d=reactExports.useRef(null),b=reactExports.useRef(null),_=reactExports.useRef({functionCurve:null,iterationElements:[],initialGuessPoint:null}),$=reactExports.useRef({isPanning:!1,startX:0,startY:0});reactExports.useEffect(()=>{if(!d.current)return;const fr=JXG$1.JSXGraph.initBoard(d.current.id,{boundingbox:[-10,10,10,-10],axis:!0,grid:!0,showNavigation:!0,showCopyright:!1,pan:{enabled:!0,needTwoFingers:!1,needShift:!1},zoom:{wheel:!0,needShift:!1,min:.001,max:1e3},keepAspectRatio:!0});b.current=fr;const Jr=d.current,Js=eu=>{eu.button===1&&(eu.preventDefault(),$.current={isPanning:!0,startX:eu.clientX,startY:eu.clientY},Jr.style.cursor="grabbing")},qs=eu=>{if(!$.current.isPanning||!b.current)return;const Oo=eu.clientX-$.current.startX,tu=eu.clientY-$.current.startY,Bo=b.current.getBoundingBox(),vu=Jr.getBoundingClientRect(),t1=(Bo[2]-Bo[0])/vu.width,e1=(Bo[1]-Bo[3])/vu.height,r1=-Oo*t1,a1=tu*e1;b.current.setBoundingBox([Bo[0]+r1,Bo[1]+a1,Bo[2]+r1,Bo[3]+a1],!1),$.current.startX=eu.clientX,$.current.startY=eu.clientY},zo=eu=>{eu.button===1&&($.current.isPanning=!1,Jr.style.cursor="")},js=eu=>{eu.button===1&&eu.preventDefault()};return Jr.addEventListener("mousedown",Js),window.addEventListener("mousemove",qs),window.addEventListener("mouseup",zo),Jr.addEventListener("auxclick",js),()=>{Jr.removeEventListener("mousedown",Js),window.removeEventListener("mousemove",qs),window.removeEventListener("mouseup",zo),Jr.removeEventListener("auxclick",js),b.current&&(JXG$1.JSXGraph.freeBoard(b.current),b.current=null)}},[]);const j=reactExports.useCallback(()=>{b.current&&(_.current.iterationElements.forEach(fr=>{fr&&b.current.objects[fr.id]&&b.current.removeObject(fr)}),_.current.iterationElements=[],_.current.initialGuessPoint&&(b.current.objects[_.current.initialGuessPoint.id]&&b.current.removeObject(_.current.initialGuessPoint),_.current.initialGuessPoint=null))},[]);reactExports.useEffect(()=>{!b.current||!s||(_.current.functionCurve&&b.current.removeObject(_.current.functionCurve),_.current.functionCurve=b.current.create("functiongraph",[fr=>{const Jr=s.evaluate(fr);return isFinite(Jr)?Jr:NaN}],{strokeColor:"#2563eb",strokeWidth:2,name:`f(x) = ${a}`,withLabel:!1,highlight:!0,fixed:!0}),_.current.functionCurve.on("down",()=>{h&&h({type:"function",name:`f(x) = ${a}`,derivative:s.getDerivativeString()})}))},[a,s,h]),reactExports.useEffect(()=>{var qs;if(!b.current||!s||!o||o.length===0){j();return}j();const fr=b.current,Jr=[],Js=((qs=o[0])==null?void 0:qs.fx)??1;o.forEach((zo,js)=>{if(!((c==null?void 0:c.has(js))??!0))return;const Oo=getIterationColor(zo.fx,Js),tu=js===0,Bo=zo.fPrimeX,vu=zo.fx-zo.fPrimeX*zo.x,t1=fr.create("point",[zo.x,zo.fx],{name:`P${js}`,size:5,fillColor:Oo,strokeColor:"#000000",strokeWidth:1,withLabel:!0,fixed:!0,label:{position:"top",offset:[8,12],fontSize:14,fontWeight:"bold",color:"#000000",strokeColor:"#ffffff",strokeWidth:2,useMathJax:!1,cssStyle:"background: rgba(255,255,255,0.85); padding: 2px 5px; border-radius: 3px; border: 1px solid "+Oo}});Jr.push(t1),t1.on("down",()=>{h&&h({type:"point",name:`Iteration ${js}`,x:zo.x,fx:zo.fx,fPrimeX:zo.fPrimeX})});const e1=fr.create("functiongraph",[a1=>Bo*a1+vu],{strokeColor:Oo,strokeWidth:3.5,dash:2,name:`Tangent ${js}`,withLabel:!1,highlight:!0,fixed:!0});Jr.push(e1),e1.on("down",()=>{if(h){const a1=-vu/Bo;h({type:"tangent",name:`Tangent at x${js}`,slope:Bo,intercept:vu,xIntercept:a1})}});const r1=fr.create("segment",[[zo.x,zo.fx],[zo.x,0]],{strokeColor:Oo,strokeWidth:3,dash:3,highlight:!1,fixed:!0});if(Jr.push(r1),tu){const a1=fr.create("point",[zo.x,0],{name:"x",size:6,fillColor:"#ef4444",strokeColor:"#000000",strokeWidth:1,withLabel:!0,fixed:!0,label:{position:"bottom",offset:[0,-20],fontSize:14,fontWeight:"bold",color:"#b91c1c",cssStyle:"background: rgba(255,255,255,0.9); padding: 2px 6px; border-radius: 3px; border: 2px solid #ef4444"}});_.current.initialGuessPoint=a1,Jr.push(a1)}else{const a1=fr.create("point",[zo.x,0],{name:`x${js}`,size:4,fillColor:Oo,strokeColor:"#000000",strokeWidth:1,withLabel:!0,fixed:!0,label:{position:"bottom",offset:[0,-18],fontSize:13,fontWeight:"bold",color:"#000000",cssStyle:"background: rgba(255,255,255,0.85); padding: 1px 4px; border-radius: 3px; border: 1px solid "+Oo}});Jr.push(a1)}}),_.current.iterationElements=Jr},[o,c,s,j,h]);const Xt=reactExports.useCallback(()=>{b.current&&b.current.setBoundingBox([-10,10,10,-10],!0)},[]),Lt=reactExports.useCallback(()=>{if(!b.current||!o||o.length===0){Xt();return}const fr=o.map(eu=>eu.x),Jr=o.map(eu=>eu.fx).filter(eu=>isFinite(eu));if(fr.length===0){Xt();return}const Js=Math.min(...fr)-2,qs=Math.max(...fr)+2,zo=Math.min(...Jr,0)-2,js=Math.max(...Jr,0)+2;b.current.setBoundingBox([Js,js,qs,zo],!0)},[o,Xt]);return jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[jsxRuntimeExports.jsx("div",{id:"jsxgraph-board",ref:d,className:"graph-board w-full rounded-lg transition-colors duration-300",style:{border:"1px solid var(--border-primary)",background:"var(--graph-bg)",aspectRatio:"1 / 1",maxHeight:"calc(100vh - 120px)",minHeight:"400px"}}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 py-2 justify-end",children:[jsxRuntimeExports.jsx("button",{onClick:Xt,className:"px-3 py-1.5 text-[13px] rounded cursor-pointer transition-all duration-150 hover:border-slate-400",style:{background:"var(--bg-tertiary)",border:"1px solid var(--border-secondary)",color:"var(--text-secondary)"},title:"Reset View",children:"Reset View"}),jsxRuntimeExports.jsx("button",{onClick:Lt,className:"px-3 py-1.5 text-[13px] rounded cursor-pointer transition-all duration-150 hover:border-slate-400",style:{background:"var(--bg-tertiary)",border:"1px solid var(--border-secondary)",color:"var(--text-secondary)"},title:"Zoom to Fit",children:"Zoom to Fit"})]})]})}var Nh=Object.defineProperty,Fh=Object.defineProperties,$h=Object.getOwnPropertyDescriptors,Ko=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,nu=Object.prototype.propertyIsEnumerable,ru=(a,s,o)=>s in a?Nh(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o,p=(a,s)=>{for(var o in s||(s={}))iu.call(s,o)&&ru(a,o,s[o]);if(Ko)for(var o of Ko(s))nu.call(s,o)&&ru(a,o,s[o]);return a},g=(a,s)=>Fh(a,$h(s)),Gs=a=>typeof a=="symbol"?a:a+"",Ai=(a,s)=>{var o={};for(var c in a)iu.call(a,c)&&s.indexOf(c)<0&&(o[c]=a[c]);if(a!=null&&Ko)for(var c of Ko(a))s.indexOf(c)<0&&nu.call(a,c)&&(o[c]=a[c]);return o};function ke(){return"window"in globalThis&&"document"in globalThis}function Po(){return"matchMedia"in window?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0}function ou(){try{return window.self!==window.top}catch{return!0}}function Ro(){return typeof navigator.vibrate=="function"}function At(){var a,s;if(!ke())return"other";let o=(s=(a=navigator.userAgentData)==null?void 0:a.platform)!=null?s:navigator.platform;return/^mac/i.test(o)?navigator.maxTouchPoints===5?"ios":"macos":/^win/i.test(o)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function au(){if(!ke())return!0;if(/firefox/i.test(navigator.userAgent)){let a=navigator.userAgent.match(/firefox\/(\d+)/i);return a?parseInt(a[1])>=78:!1}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let a=navigator.userAgent.match(/edg\/(\d+)/i);return a?parseInt(a[1])>=79:!1}return!0}function Xs(){return HTMLElement.prototype.hasOwnProperty("popover")}var su={id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","",""],KeyB:["x","X","",""],KeyC:["j","J","",""],KeyD:["e","E","",""],KeyE:[".",">","",""],KeyF:["u","U","",""],KeyG:["i","I","",""],KeyH:["d","D","",""],KeyI:["c","C","",""],KeyJ:["h","H","",""],KeyK:["t","T","",""],KeyL:["n","N","",""],KeyM:["m","M","",""],KeyN:["b","B","",""],KeyO:["r","R","",""],KeyP:["l","L","",""],KeyQ:["'",'"',"",""],KeyR:["p","P","",""],KeyS:["o","O","",""],KeyT:["y","Y","",""],KeyU:["g","G","",""],KeyV:["k","K","",""],KeyW:[",","<","",""],KeyX:["q","Q","",""],KeyY:["f","F","",""],KeyZ:[";",":","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["[","{","",""],Equal:["]","}","",""],BracketLeft:["/","?","",""],BracketRight:["=","+","",""],Backslash:["\\","|","",""],Semicolon:["s","S","",""],Quote:["-","_","",""],Backquote:["`","~","`","`"],Comma:["w","W","",""],Period:["v","V","",""],Slash:["z","Z","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Io={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","","`","`"],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},Zs={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," ","",""],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","~","",""],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}},Ys={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},lu={id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","","|"],KeyM:[",","?","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","",""],Digit3:['"',"3","",""],Digit4:["'","4","",""],Digit5:["(","5","{","["],Digit6:["","6","",""],Digit7:["","7","",""],Digit8:["!","8","",""],Digit9:["","9","",""],Digit0:["","0","",""],Space:[" "," "," "," "],Minus:[")","","}","]"],Equal:["-","_","",""],BracketLeft:["^","","",""],BracketRight:["$","*","",""],Backslash:["`","","@","#"],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["<",">","",""],Comma:[";",".","",""],Period:[":","/","","\\"],Slash:["=","+","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","",""],NumpadEqual:["=","=","=","="]}},cu={id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Space:[" "," ","",""],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["^","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},uu={id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","","<"],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{","$"],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","~","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""]}},du={id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","@",""],KeyM:["m","M","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","","#"],Digit4:["4","$","",""],Digit5:["5","%","[",""],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{",""],Digit9:["9",")","}",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["","?","",""],Equal:["","`","'",""],BracketLeft:["","","",""],BracketRight:["+","*","",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","","",""],NumpadEqual:["=","=","=","="]}},mu={id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["","?","\\",""],Equal:["","`","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["^","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}},pu={id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["","?","\\",""],Equal:["","","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|",""],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}},hu={id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C",""," "],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H",""," "],KeyI:["i","I"," "," "],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L"," ",""],KeyM:["m","M","",""],KeyN:["n","N"," ",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R",""," "],KeyS:["s","S",""," "],KeyT:["t","T","",""],KeyU:["u","U"," "," "],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y",""," "],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&",""," "],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["","","\\",""]}},fu={id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","",""],Quote:["","","{",""],Backquote:["","","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},gu={id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["z","Z","","<"],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~","$"],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\",""],Equal:["","","","~"],BracketLeft:["","","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{","{"],Backquote:["","","\\","\\"],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function Qs(a){let s=a.split("+"),o={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:s.pop()};return s.includes("shift")&&(o.shift=!0),s.includes("alt")&&(o.alt=!0),s.includes("ctrl")&&(o.ctrl=!0),s.includes("cmd")&&(o.cmd=!0),s.includes("win")&&(o.win=!0),s.includes("meta")&&(o.meta=!0),o}function Gr(a){let s="";return a.shift&&(s+="shift+"),a.alt&&(s+="alt+"),a.ctrl&&(s+="ctrl+"),a.cmd&&(s+="cmd+"),a.win&&(s+="win+"),a.meta&&(s+="meta+"),s+a.key}var Vh={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},Ci=[];function el(){switch(At()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function je(a){(!a.platform||a.platform===el())&&Ci.push(a)}function bu(a,s){var o;let c={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!a)return c;for(let[h,d]of Object.entries(s.mapping)){if(d[0]===a)return c.key=`[${h}]`,c;if(d[1]===a)return c.shift=!0,c.key=`[${h}]`,c;if(d[2]===a)return c.alt=!0,c.key=`[${h}]`,c;if(d[3]===a)return c.shift=!0,c.alt=!0,c.key=`[${h}]`,c}return c.key=(o=Vh[a])!=null?o:"",c}function yu(a){if(a.code)return a;let s=Object.entries(gr().mapping),o=!1,c=!1,h="";for(let d=0;d<4;d++){for(let[b,_]of s)if(_[d]===a.key){h=b,d===3?(o=!0,c=!0):d===2?o=!0:d===1&&(c=!0);break}if(h)break}return new KeyboardEvent(a.type,g(p({},a),{altKey:o,shiftKey:c,code:h}))}function xu(a){var s,o;if(!a||a.key==="Unidentified"||a.key==="Dead")return;let c=a.shiftKey&&a.altKey?3:a.altKey?2:a.shiftKey?1:0;for(let h of Ci)((s=h.mapping[a.code])==null?void 0:s[c])===a.key?h.score+=1:(o=h.mapping[a.code])!=null&&o[c]&&(h.score=0);Ci.sort((h,d)=>d.score-h.score)}function gr(){return Ci[0]}function _u(){switch(el()){case"apple":return Io;case"windows":return Zs;case"linux":return Ys}return Io}switch(el()){case"apple":je(Io),je(lu),je(hu),je(du);break;case"windows":je(Zs),je(cu),je(fu),je(mu);break;case"linux":je(Ys),je(uu),je(gu),je(pu);break}je(su);function ee(a){return Array.isArray(a)}var Mu={en:{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","menu.insert":"Insert","menu.insert.abs":"Absolute Value","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"n<sup>th</sup> Root","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarithm base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calculus","menu.insert.derivative":"Derivative","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"n<sup>th</sup> derivative","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integral","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Sum","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Product","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Complex Numbers","menu.insert.modulus":"Modulus","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Real Part","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Imaginary Part","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Conjugate","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@  %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-typst":"Copy as Typst","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},ar:{"keyboard.tooltip.symbols":"  ","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"  ","tooltip.copy to clipboard":"  ","tooltip.cut to clipboard":"  ","tooltip.paste from clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"   ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"   ","menu.array.add row below":"  ","menu.array.add column after":"   ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":" ","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},de:{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"Rmische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einfgen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzufgen nach","menu.array.add row below":"Zeile hinzufgen vor","menu.array.add column after":"Spalte hinzufgen nach","menu.array.add column before":"Spalte hinzufgen vor","menu.array.delete row":"Zeile lschen","menu.array.delete rows":"Ausgewhlte Zeilen lschen","menu.array.delete column":"Spalte lschen","menu.array.delete columns":"Ausgewhlte Spalten lschen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"Rmisch aufrecht","tooltip.row-by-col":"%@  %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"Lsen","menu.solve-for":"Lsen fr %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einfgen","menu.select-all":"Alles auswhlen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Grn","color.teal":"Blaugrn","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Wei"},el:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":" ","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},es:{"keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"Aadir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"Aadir Lnea Antes","menu.array.add row below":"Aadir Lnea Despues","menu.array.add column after":"Aadir Columna Despues","menu.array.add column before":"Aadir Columna Antes","menu.array.delete row":"Borrar Lnea","menu.array.delete rows":"Borrar Lneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matemticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrfico","tooltip.typewriter":"Mquina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@  %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoracin","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"ndigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},fr:{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Numrique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rtablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Insrer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Aprs","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Aprs","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes Slectiones","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes Slectiones","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine  crire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@  %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"Dcoration","menu.color":"Couleur","menu.background-color":"Arrire-plan","menu.evaluate":"valuer","menu.simplify":"Simplifier","menu.solve":"Rsoudre","menu.solve-for":"Rsoudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"Slectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris fonc","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},he:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":" ","tooltip.redo":" ","tooltip.toggle virtual keyboard":"   ","tooltip.undo":"","menu.insert matrix":" ","menu.borders":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":" ","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":" ","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":" ","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},it:{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere Greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere Romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.cut to clipboard":"Taglia negli appunti","tooltip.paste from clipboard":"Incolla dagli appunti","tooltip.redo":"Ripeti","tooltip.toggle virtual keyboard":"Attiva/Disattiva Tastiera Virtuale","tooltip.menu":"Menu","tooltip.undo":"Annulla","menu.borders":"Bordi","menu.insert matrix":"Inserisci Matrice","menu.array.add row above":"Aggiungi Riga Prima","menu.array.add row below":"Aggiungi Riga Dopo","menu.array.add column after":"Aggiungi Colonna Dopo","menu.array.add column before":"Aggiungi Colonna Prima","menu.array.delete row":"Elimina Riga","menu.array.delete rows":"Elimina Righe Selezionate","menu.array.delete column":"Elimina Colonna","menu.array.delete columns":"Elimina Colonne Selezionate","menu.mode":"Modalit","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","menu.insert":"Inserisci","menu.insert.abs":"Valore Assoluto","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Radice n-esima","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logaritmo in base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calcolo","menu.insert.derivative":"Derivata","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Derivata n-esima","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integrale","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Somma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Prodotto","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Numeri Complessi","menu.insert.modulus":"Modulo","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argomento","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Parte Reale","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Parte Immaginaria","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Coniugato","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligrafico","tooltip.typewriter":"Macchina da Scrivere","tooltip.roman-upright":"Romano Dritto","tooltip.row-by-col":"%@  %@","menu.font-style":"Stile del Carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona Tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde Acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio Scuro","color.grey":"Grigio","color.light-grey":"Grigio Chiaro","color.white":"Bianco"},ja:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.menu":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"%@ ","menu.cut":"","menu.copy":"","menu.copy-as-latex":"LaTeX","menu.copy-as-ascii-math":"ASCII Math","menu.copy-as-mathml":"MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""},ko:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"  ","tooltip.redo":" ","tooltip.toggle virtual keyboard":"  ","tooltip.undo":" ","menu.insert matrix":" ","menu.borders":"  ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"%@  ","menu.cut":"","menu.copy":"","menu.copy-as-latex":"LaTeX ","menu.copy-as-ascii-math":"ASCII Math ","menu.copy-as-mathml":"MathML ","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":" ","color.grey":"","color.light-grey":" ","color.white":""},pl:{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.cut to clipboard":"Wytnij ze Schowka","tooltip.paste from clipboard":"Wklej ze Schowka","tooltip.redo":"Przywr","tooltip.toggle virtual keyboard":"Przecz klawiatur wirtualn","tooltip.menu":"Menu","tooltip.undo":"Cofnij","menu.borders":"Ograniczniki macierzy","menu.insert matrix":"Wstaw macierz","menu.array.add row above":"Dodaj wiersz przed","menu.array.add row below":"Dodaj wiersz po","menu.array.add column after":"Dodaj kolumn po","menu.array.add column before":"Dodaj kolumn przed","menu.array.delete row":"Usu wiersz","menu.array.delete rows":"Usu wybrane wiersze","menu.array.delete column":"Usu kolumn","menu.array.delete columns":"Usu wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formua","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","menu.insert":"Wstaw","menu.insert.abs":"Warto bezwzgldna","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Pierwiastek n-tego stopnia","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarytm o podstawie a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Rachunek rniczkowy i cakowy","menu.insert.derivative":"Pochodna","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Pochodna n-tego rzdu","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Caka","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Suma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Iloczyn","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Liczby zespolone","menu.insert.modulus":"Modu","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Cz rzeczywista","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Cz urojona","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Sprzenie","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@  %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"To","menu.evaluate":"Oblicz","menu.simplify":"Upro","menu.solve":"Rozwi","menu.solve-for":"Rozwi dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomaraczowy","color.yellow":"ty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Biay"},pt:{"keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para rea de transferncia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"Frmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"Itlico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrfico","tooltip.typewriter":"Mquina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@  %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decorao","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"ndigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},uk:{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":" ","tooltip.copy to clipboard":"   ","tooltip.cut to clipboard":"   ","tooltip.paste from clipboard":"   ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.menu":"","tooltip.undo":"","menu.borders":"","menu.insert matrix":" ","menu.array.add row above":"  ","menu.array.add row below":"  ","menu.array.add column after":"  ","menu.array.add column before":"  ","menu.array.delete row":" ","menu.array.delete rows":"  ","menu.array.delete column":" ","menu.array.delete columns":"  ","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","menu.insert":"","menu.insert.abs":" ","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":" n- ","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"   a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"","menu.insert.derivative":"","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":" n- ","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":" ","menu.insert.modulus":"","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":" ","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":" ","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":" ","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":" ","tooltip.row-by-col":"%@  %@","menu.font-style":" ","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":"  %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":"  LaTeX","menu.copy-as-ascii-math":"  ASCII Math","menu.copy-as-mathml":"  MathML","menu.paste":"","menu.select-all":" ","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"-","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"-","color.grey":"","color.light-grey":"-","color.white":""},"zh-cn":{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"r","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"Fraktur","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":" %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""},"zh-tw":{"keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.numeric":"","keyboard.tooltip.alphabetic":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":"","menu.insert matrix":"","menu.borders":"","menu.array.add row above":"","menu.array.add row below":"","menu.array.add column after":"","menu.array.add column before":"","menu.array.delete row":"","menu.array.delete rows":"","menu.array.delete column":"","menu.array.delete columns":"","menu.mode":"","menu.mode-math":"","menu.mode-text":"","menu.mode-latex":"LaTeX","tooltip.blackboard":"","tooltip.bold":"","tooltip.italic":"","tooltip.fraktur":"Fraktur","tooltip.script":"","tooltip.caligraphic":"","tooltip.typewriter":"","tooltip.roman-upright":"","tooltip.row-by-col":"%@  %@","menu.font-style":"","menu.accent":"","menu.decoration":"","menu.color":"","menu.background-color":"","menu.evaluate":"","menu.simplify":"","menu.solve":"","menu.solve-for":" %@","menu.cut":"","menu.copy":"","menu.copy-as-latex":" LaTeX","menu.copy-as-ascii-math":" ASCII Math","menu.copy-as-mathml":" MathML","menu.paste":"","menu.select-all":"","color.red":"","color.orange":"","color.yellow":"","color.lime":"","color.green":"","color.teal":"","color.cyan":"","color.blue":"","color.indigo":"","color.purple":"","color.magenta":"","color.black":"","color.dark-grey":"","color.grey":"","color.light-grey":"","color.white":""}},F={strings:Mu,_locale:"",_dirty:!1,_subscribers:[],_numberFormatter:void 0,get locale(){return F._locale||(F._locale=ke()?navigator.language.slice(0,5):"en-US"),F._locale},set locale(a){F._locale=a,F._numberFormatter=void 0,F.dirty=!0},get numberFormatter(){if(!F._numberFormatter)try{F._numberFormatter=new Intl.NumberFormat(F.locale)}catch{try{F._numberFormatter=new Intl.NumberFormat(F.locale.slice(0,2))}catch{F._numberFormatter=new Intl.NumberFormat("en-US")}}return F._numberFormatter},merge(a,s){if(typeof a=="string"&&s)F.strings[a]=p(p({},F.strings[a]),s),F.dirty=!0;else for(let o of Object.keys(a))F.merge(o,a[o])},get dirty(){return F._dirty},set dirty(a){F._dirty||F._dirty===a||(F._dirty=!0,setTimeout(()=>{F._dirty=!1,this._subscribers.forEach(s=>s==null?void 0:s())},0))},subscribe(a){return F._subscribers.push(a),F._subscribers.length-1},unsubscribe(a){a<0||a>=F._subscribers.length||(F._subscribers[a]=void 0)},update(a){let s=a.querySelectorAll("[data-l10n-tooltip]");for(let o of s){let c=o.getAttribute("data-l10n-tooltip");if(c){let h=I(c);h&&o.setAttribute("data-tooltip",h)}}s=a.querySelectorAll("[data-l10n-arial-label]");for(let o of s){let c=o.getAttribute("data-l10n-arial-label");if(c){let h=I(c);h&&o.setAttribute("aria-label",h)}}}};function I(a,...s){if(a===void 0)return;let o="",c=F.locale;F.strings[c]&&(o=F.strings[c][a]);let h=c.slice(0,2);if(!o&&F.strings[h]&&(o=F.strings[h][a]),o||(o=F.strings.en[a]),!o)return;let d=/(%@|%([0-9]+)\$@)/g,b=d.exec(o),_=0;for(;b;){if(s[_++]){let $=b[2]?parseInt(b[2],10)-1:_-1,j=s[$];typeof j=="number"&&(j=F.numberFormatter.format(j)),o=o.replace(b[1],j)}b=d.exec(o)}return o=o.replace(/%%/g,"%"),o}var Wh={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},Uh={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},Zt={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",cyan:"#b8e5c9",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},Yt={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",cyan:"#13a7ec",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},wu={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},jh={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function Xr(a){var s,o,c,h,d,b;let _=a.split("!"),$,j,Xt,Lt=255,fr=255,Jr=255,Js=-1,qs=_.length>0&&_[0].startsWith("-");qs&&(_[0]=_[0].slice(1));for(let zo=0;zo<_.length;zo++){$=Lt,j=fr,Xt=Jr;let js=(s=_[zo].trim().match(/^([A-Za-z\d-]+)/))==null?void 0:s[1],eu=js==null?void 0:js.toLowerCase(),Oo=js&&(b=(d=(h=(c=(o=Yt[eu])!=null?o:Yt[wu[js]])!=null?c:Uh[js])!=null?h:jh[js])!=null?d:Wh[js])!=null?b:_[zo].trim(),tu=Oo.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(tu!=null&&tu[1]&&tu[2]&&tu[3])Lt=Math.max(0,Math.min(255,Number.parseInt(tu[1],16))),fr=Math.max(0,Math.min(255,Number.parseInt(tu[2],16))),Jr=Math.max(0,Math.min(255,Number.parseInt(tu[3],16)));else if(tu=Oo.match(/^#([\da-f]{3})$/i),tu!=null&&tu[1]){let Bo=Number.parseInt(tu[1][0],16),vu=Number.parseInt(tu[1][1],16),t1=Number.parseInt(tu[1][2],16);Lt=Math.max(0,Math.min(255,Bo*16+Bo)),fr=Math.max(0,Math.min(255,vu*16+vu)),Jr=Math.max(0,Math.min(255,t1*16+t1))}else if(tu=Oo.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),tu!=null&&tu[1]&&tu[2]&&tu[3])Lt=Math.max(0,Math.min(255,Number.parseInt(tu[1]))),fr=Math.max(0,Math.min(255,Number.parseInt(tu[2]))),Jr=Math.max(0,Math.min(255,Number.parseInt(tu[3])));else return;Js>=0&&(Lt=(1-Js)*Lt+Js*$,fr=(1-Js)*fr+Js*j,Jr=(1-Js)*Jr+Js*Xt,Js=-1),zo+1<_.length&&(Js=Math.max(0,Math.min(100,Number.parseInt(_[++zo])))/100)}return Js>=0&&(Lt=Js*Lt+(1-Js)*$,fr=Js*fr+(1-Js)*j,Jr=Js*Jr+(1-Js)*Xt),qs&&(Lt=255-Lt,fr=255-fr,Jr=255-Jr),"#"+("00"+Math.round(Lt).toString(16)).slice(-2)+("00"+Math.round(fr).toString(16)).slice(-2)+("00"+Math.round(Jr).toString(16)).slice(-2)}function Ei(a){var s,o;return a=a.trim(),(o=(s=Zt[a.toLowerCase()])!=null?s:Zt[wu[a]])!=null?o:Xr(a)}function Jh(a){if(!a||a[0]!=="#")return;a=a.slice(1);let s;return a.length<=4?(s={r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16)},a.length===4&&(s.a=parseInt(a[3]+a[3],16)/255)):(s={r:parseInt(a[0]+a[1],16),g:parseInt(a[2]+a[3],16),b:parseInt(a[4]+a[5],16)},a.length===8&&(s.a=parseInt(a[6]+a[7],16)/255)),s&&s.a===void 0&&(s.a=1),s}function tl(a,s,o){return o<0&&(o+=6),o>=6&&(o-=6),o<1?(s-a)*o+a:o<3?s:o<4?(s-a)*(4-o)+a:a}function Gh(a){let[s,o,c]=[a.h,a.s,a.l];s=(s+360)%360/60,c=Math.max(0,Math.min(c,1)),o=Math.max(0,Math.min(o,1));let h=c<=.5?c*(o+1):c+o-c*o,d=c*2-h;return{r:Math.round(255*tl(d,h,s+2)),g:Math.round(255*tl(d,h,s)),b:Math.round(255*tl(d,h,s-2))}}function rl(a){return a<0?0:a>255?255:Math.round(a)}function Xh(a){let{r:s,g:o,b:c}=a,h=((1<<24)+(rl(s)<<16)+(rl(o)<<8)+rl(c)).toString(16).slice(1);return h[0]===h[1]&&h[2]===h[3]&&h[4]===h[5]&&h[6]===h[7]&&(h=h[0]+h[2]+h[4]),"#"+h}function Zh(a){let{r:s,g:o,b:c}=a;s=s/255,o=o/255,c=c/255;let h=Math.min(s,o,c),d=Math.max(s,o,c),b=d-h,_,$;d===h?_=0:s===d?_=(o-c)/b:o===d?_=2+(c-s)/b:c===d&&(_=4+(s-o)/b),_=Math.min(_*60,360),_<0&&(_+=360);let j=(h+d)/2;return d===h?$=0:j<=.5?$=b/(d+h):$=b/(2-d-h),{h:_,s:$,l:j}}function Su(a){let s=Jh(a);if(!s)return a;let{h:o,s:c,l:h}=Zh(s);return c+=.1,h-=.1,Xh(Gh({h:o,s:c,l:h}))}var nl={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10178:"\\perp",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},il={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},ku=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120822,len:10,offset:48,variant:"monospace"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"}];function Dn(a,s,o){if(!/[A-Za-z\d]/.test(a)||(o==="up"&&(o=void 0),!s&&!o))return;let c=a.codePointAt(0);if(c===void 0)return a;for(let h of ku)if((!s||h.variant===s)&&(!o||h.style===o)&&c>=h.offset&&c<h.offset+h.len){let d=h.start+c-h.offset;return String.fromCodePoint(il[d]||d)}}function Yh(a){var s;if((a<119808||a>120831)&&(a<8448||a>8527))return{char:String.fromCodePoint(a)};for(let o in il)if(il[o]===a){a=(s=o.codePointAt(0))!=null?s:0;break}for(let o of ku)if(a>=o.start&&a<o.start+o.len)return{char:String.fromCodePoint(a-o.start+o.offset),variant:o.variant,style:o.style};return{char:String.fromCodePoint(a)}}function Lu(a){var s;if("{}<>[]$&*#^_%:'".includes(a)||a.length>1)return;let o=(s=a.codePointAt(0))!=null?s:0,c=nl[o];if(c)return c;let{char:h,variant:d,style:b}=Yh(o);if(!(!d&&!b)){switch(c=h,d){case"double-struck":c=`\\mathbb{${c}}`;break;case"fraktur":c=`\\mathfrak{${c}}`;break;case"script":c=`\\mathscr{${c}}`;break;case"sans-serif":c=`\\mathsf{${c}}`;break;case"monospace":c=`\\mathtt{${c}}`;break;case"calligraphic":c=`\\mathcal{${c}}`;break}switch(b){case"bold":c=`\\mathbf{${c}}`;break;case"italic":c=`\\mathit{${c}}`;break;case"bolditalic":c=`\\mathbfit{${c}}`;break}return c}}function C(a){return a?Array.isArray(a)?a:typeof a=="object"&&"group"in a?a.group:[]:[]}var On={},Fo=p({},nl),Di={},al={},Qh={darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",C:"\\mathbb{C}",H:"\\mathbb{H}",N:"\\mathbb{N}",Q:"\\mathbb{Q}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",doublecap:"\\Cap",doublecup:"\\Cup",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",hArr:"\\Leftrightarrow",harr:"\\leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",Larr:"\\Leftarrow",lArr:"\\Leftarrow",lrarr:"\\leftrightarrow",Lrarr:"\\Leftrightarrow",lrArr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",part:"\\partial",plusmn:"\\pm",rarr:"\\rightarrow",Rarr:"\\Rightarrow",rArr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",restriction:"\\upharpoonright",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",varcoppa:"\\coppa",weierp:"\\wp",Zeta:"\\mathrm{Z}"},ef={varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1,captureSelection:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},tf={bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:!1},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:!1},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:!1},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:!1},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:!1},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:!1},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:!1},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:!1}},rf={strut:{primitive:!0,def:"\\phantom{\\rule[0.3\\baselineskip]{0}{0.7\\baselineskip}}",args:0,captureSelection:!0},iff:{primitive:!0,captureSelection:!0,def:"\\;\\Longleftrightarrow\\;"},nicefrac:"^{#1}\\!\\!/\\!_{#2}",phase:{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:!1},rd:"\\mathrm{d}",rD:"\\mathrm{D}",odif:"\\mathrm{d}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},angl:"\\enclose{actuarial}{#1}",angln:"\\enclose{actuarial}{n}",anglr:"\\enclose{actuarial}{r}",anglk:"\\enclose{actuarial}{k}",mathtools:{primitive:!0,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2A74}}',coloneq:'{\\mathop{\\char"2254}}',Coloneq:'{\\mathop{\\char"2A74}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2255}}',Eqcolon:'{\\mathop{\\char"3D\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},ratio:"\\vcentcolon",coloncolon:"\\dblcolon",colonequals:"\\coloneq",coloncolonequals:"\\Coloneq",equalscolon:"\\eqcolon",equalscoloncolon:"\\Eqcolon",colonminus:"\\colondash",coloncolonminus:"\\Colondash",minuscolon:"\\dashcolon",minuscoloncolon:"\\Dashcolon",coloncolonapprox:"\\Colonapprox",coloncolonsim:"\\Colonsim",simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",simcoloncolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcoloncolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",notni:"\\mathrel{\\char`}",limsup:"\\operatorname*{lim\\,sup}",liminf:"\\operatorname*{lim\\,inf}",injlim:"\\operatorname*{inj\\,lim}",projlim:"\\operatorname*{proj\\,lim}",varlimsup:"\\operatorname*{\\overline{lim}}",varliminf:"\\operatorname*{\\underline{lim}}",varinjlim:"\\operatorname*{\\underrightarrow{lim}}",varprojlim:"\\operatorname*{\\underleftarrow{lim}}",argmin:"\\operatorname*{arg\\,min}",argmax:"\\operatorname*{arg\\,max}",plim:"\\mathop{\\operatorname{plim}}\\limits",tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:tf},"amsmath.sty":{package:ef,primitive:!0},"texvc.sty":{package:Qh,primitive:!1}},Ti={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"":8211,"":8212,"":8216,"":8217,"":8220,"":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},Eu=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/,$o,Zr;au()?($o=new RegExp("\\p{Letter}","u"),Zr=new RegExp("[0-9\\p{Letter}]","u")):($o=/[a-zA-Z]/,Zr=/[\da-zA-Z]/);function ol(a,s,o="mord",c){s!==void 0&&(On[a]={definitionType:"symbol",type:o,variant:c,codepoint:s},Fo[s]||(Fo[s]=a))}function Me(a,s,o){if(typeof a=="string"){for(let c=0;c<a.length;c++){let h=a.charAt(c);ol(h,h.codePointAt(0))}return}for(let[c,h,d,b]of a)ol(c,h,d??s,b??o)}function sl(a,s){for(let o=a;o<=s;o++)ol(String.fromCodePoint(o),o)}function Tu(a){var s;return(s=al[a])!=null?s:null}function Du(a,s){var o,c;if(s.length===0||s==="\\"||!s.startsWith("\\"))return[];let h=[];for(let b in Di)b.startsWith(s)&&!Di[b].infix&&h.push({match:b,frequency:(o=Di[b].frequency)!=null?o:0});for(let b in On)b.startsWith(s)&&h.push({match:b,frequency:(c=On[b].frequency)!=null?c:0});let d=s.substring(1);for(let b of Object.keys(a.options.macros))b.startsWith(d)&&h.push({match:"\\"+b,frequency:0});return h.sort((b,_)=>{var $,j;return b.frequency===_.frequency?b.match.length===_.match.length?b.match<_.match?-1:1:b.match.length-_.match.length:(($=_.frequency)!=null?$:0)-((j=b.frequency)!=null?j:0)}),h.map(b=>b.match)}function Au(a){let s="auto",o=a.match(/:([^=]+)/);return o&&(s=o[1].trim()),s}function Vo(a){if(!a)return[];let s=[],o=a.split("]");if(o[0].startsWith("[")){s.push({isOptional:!0,type:Au(o[0].slice(1))});for(let c=1;c<=o.length;c++)s.push(...Vo(o[c]))}else if(o=a.split("}"),o[0].startsWith("{")){s.push({isOptional:!1,type:Au(o[0].slice(1))});for(let c=1;c<=o.length;c++)s.push(...Vo(o[c]))}return s}function ll(a){if(!a)return"";let s="",o=!0;for(let c of a)typeof c.value=="string"?s+=c.value:o=!1;return o?s:""}function Ct(a,s,o){typeof a=="string"&&(a=[a]);let c={tabular:!0,rootOnly:!1,params:Vo(s),createAtom:o};for(let h of a)al[h]=c}function qo(a,s,o){var c;typeof a=="string"&&(a=[a]);let h={tabular:(c=o==null?void 0:o.tabular)!=null?c:!1,rootOnly:!0,params:[],createAtom:s};for(let d of a)al[d]=h}function M(a,s,o){var c,h;o||(o={});let d={definitionType:"function",params:Vo(s),ifMode:o.ifMode,isFunction:(c=o.isFunction)!=null?c:!1,applyMode:o.applyMode,infix:(h=o.infix)!=null?h:!1,parse:o.parse,createAtom:o.createAtom,applyStyle:o.applyStyle,serialize:o.serialize,render:o.render};if(typeof a=="string")Di["\\"+a]=d;else for(let b of a)Di["\\"+b]=d}var No;function Bi(a){return No||(No=Oi(rf)),a?Oi(p(p({},No),a)):No}function Cu(a,s){var o,c,h,d;if(typeof a=="string"){let b=0,_=a;return/(^|[^\\])#1/.test(_)&&(b=1),/(^|[^\\])#2/.test(_)&&(b=2),/(^|[^\\])#3/.test(_)&&(b=3),/(^|[^\\])#4/.test(_)&&(b=4),/(^|[^\\])#5/.test(_)&&(b=5),/(^|[^\\])#6/.test(_)&&(b=6),/(^|[^\\])#7/.test(_)&&(b=7),/(^|[^\\])#8/.test(_)&&(b=8),/(^|[^\\])#9/.test(_)&&(b=9),{expand:(o=s==null?void 0:s.expand)!=null?o:!0,captureSelection:(c=s==null?void 0:s.captureSelection)!=null?c:!0,args:b,def:_}}return p({expand:(h=s==null?void 0:s.expand)!=null?h:!0,captureSelection:(d=s==null?void 0:s.captureSelection)!=null?d:!0,args:0},a)}function Oi(a){if(!a)return{};let s={};for(let o of Object.keys(a)){let c=a[o];if(c==null)delete s[o];else if(typeof c=="object"&&"package"in c)for(let h of Object.keys(c.package))s[h]=Cu(c.package[h],{expand:!c.primitive,captureSelection:c.captureSelection});else s[o]=Cu(c)}return s}function ne(a,s="math"){if(!a||a.length===0)return null;let o=null;if(a.startsWith("\\")){if(o=Di[a],o)return!o.ifMode||o.ifMode===s?o:null;s==="math"?o=On[a]:Ti[a]&&(o={definitionType:"symbol",type:"mord",codepoint:Ti[a]})}else if(s==="math"){if(o=On[a],!o&&a.length===1){let c=cl("math",a.codePointAt(0));return c.startsWith("\\")?g(p({},ne(c,"math")),{command:c}):null}}else Ti[a]?o={definitionType:"symbol",type:"mord",codepoint:Ti[a]}:s==="text"&&(o={definitionType:"symbol",type:"mord",codepoint:a.codePointAt(0)});return o??null}function Ki(a,s){if(!a.startsWith("\\"))return null;let o=a.slice(1);return s[o]}function cl(a,s){return s===void 0?"":a==="math"&&Fo[s]?Fo[s]:a==="text"&&Object.keys(Ti).find(c=>Ti[c]===s)||String.fromCodePoint(s)}var Qe=[0,.68889,0,0,.72222],Yr=[0,.68889,0,0,.66667],ul=[0,.68889,0,0,.77778],Ho=[0,.68889,0,0,.61111],Ou=[.16667,.68889,0,0,.77778],Bn=[0,.68889,0,0,.55556],Z=[0,0,0,0,.25],Bu=[0,.825,0,0,2.33334],Ku=[0,.9,0,0,2.33334],Wo=[0,.68889,0,0,.54028],dl=[-.03598,.46402,0,0,.5],De=[-.13313,.36687,0,0,1],Uo=[.01354,.52239,0,0,1],Pu=[.01354,.52239,0,0,1.11111],Ru=[0,.54986,0,0,1],jo=[0,.69224,0,0,.5],ml=[0,.43056,0,0,1],br=[.08198,.58198,0,0,.77778],Jo=[.19444,.69224,0,0,.41667],Go=[.1808,.675,0,0,1],Iu=[.19444,.69224,0,0,.83334],zu=[.13667,.63667,0,0,1],Nu=[-.064,.437,0,0,1.334],yr=[.08167,.58167,0,0,.77778],Kn=[0,.69224,0,0,.72222],pl=[0,.69224,0,0,.66667],Xo=[-.13313,.36687,0,0,.77778],Fu=[.06062,.54986,0,0,.77778],Zo=[0,.69224,0,0,.77778],Pi=[.25583,.75583,0,0,.77778],Et=[.25142,.75726,0,0,.77778],Ri=[.20576,.70576,0,0,.77778],lt=[.30274,.79383,0,0,.77778],Pn=[.22958,.72958,0,0,.77778],$u=[.1808,.675,0,0,.77778],Tt=[.13667,.63667,0,0,.77778],$e=[.13597,.63597,0,0,.77778],xr=[.03517,.54986,0,0,.77778],Ii=[0,.675,0,0,.77778],Vu=[.19444,.69224,0,0,.61111],qu=[0,.54986,0,0,.76042],Hu=[0,.54986,0,0,.66667],vr=[.0391,.5391,0,0,.77778],Wu=[.03517,.54986,0,0,1.33334],Uu=[.38569,.88569,0,0,.77778],Yo=[.23222,.74111,0,0,.77778],ju=[.19444,.69224,0,0,.77778],Ju=[0,.37788,0,0,.5],Qo=[0,.54986,0,0,.72222],Gu=[0,.69224,0,0,.83334],Xu=[.11111,.69224,0,0,.66667],zi=[.26167,.75726,0,0,.77778],Zu=[.48256,.98256,0,0,.77778],Yu=[.28481,.79383,0,0,.77778],Qu=[.08167,.58167,0,0,.22222],ed=[.08167,.58167,0,0,.38889],td=[0,.43056,.04028,0,.66667],rd=[.41951,.91951,0,0,.77778],id=[.24982,.74947,0,0,.38865],nd=[.08319,.58283,0,0,.75623],od=[0,.10803,0,0,.27764],hl=[0,.47534,0,0,.50181],Rn=[.18906,.47534,0,0,.50181],ad=[0,.69141,0,0,.50181],sd=[.24982,.74947,0,0,.27764],fl=[0,.69141,0,0,.21471],ea=[.25,.75,0,0,.44722],et=[0,.64444,0,0,.575],Ni=[.08556,.58556,0,0,.89444],ta=[0,.69444,0,0,.89444],ra=[0,.68611,0,0,.9],gl=[0,.68611,0,0,.86944],_r=[.25,.75,0,0,.575],ia=[.25,.75,0,0,.31944],Qr=[0,.69444,0,0,.63889],Fi=[0,.69444,0,0,.31944],ld=[0,.44444,0,0,.63889],cd=[0,.44444,0,0,.51111],Mr=[0,.69444,0,0,.575],ct=[.13333,.63333,0,0,.89444],ud=[0,.44444,0,0,.31944],dd=[0,.69444,0,0,.86944],md=[0,.68611,0,0,.69166],na=[0,.68611,0,0,.83055],bl=[0,.68611,0,0,.89444],yl=[0,.69444,0,0,.60278],pd=[.19444,.69444,0,0,.51111],hd=[0,.69444,0,0,.83055],Dt=[-.10889,.39111,0,0,1.14999],fd=[.19444,.69444,0,0,.575],In=[.19444,.69444,0,0,1.14999],gd=[.19444,.69444,0,0,.70277],bd=[.05556,.75,0,0,.575],xl=[0,.68611,0,0,.95833],yd=[.08556,.58556,0,0,.76666],vl=[-.02639,.47361,0,0,.575],xd=[0,.44444,0,0,.89444],ei=[0,.55556,0,0,.76666],vd=[-.10889,.39111,0,0,.89444],_l=[.00222,.50222,0,0,.89444],wr=[.19667,.69667,0,0,.89444],_d=[.08556,.58556,0,0,1.14999],Ml=[0,.69444,0,0,.70277],oa=[-.02778,.47222,0,0,.575],aa=[.25,.75,0,0,.51111],Md=[-.13889,.36111,0,0,1.14999],wd=[.19444,.69444,0,0,1.02222],sa=[.12963,.69444,0,0,.89444],Sd=[.19444,.69444,0,0,.44722],Sr=[0,.64444,.13167,0,.59111],kd=[.19444,.64444,.13167,0,.59111],wl=[0,.68611,.17208,0,.8961],Ld=[.19444,.44444,.105,0,.53222],Ad=[0,.44444,.085,0,.82666],Cd=[0,.69444,.06709,0,.59111],la=[0,.69444,.12945,0,.35555],Ed=[0,.69444,0,0,.94888],Sl=[0,.69444,.11472,0,.59111],Td=[0,.68611,.10778,0,.88555],Dd=[0,.69444,.07939,0,.62055],ca=[0,.69444,.12417,0,.30667],kr=[0,.64444,.13556,0,.51111],Od=[.19444,.64444,.13556,0,.51111],ua=[0,.68333,.16389,0,.74333],Bd=[.19444,.43056,.08847,0,.46],Kd=[0,.43056,.07514,0,.71555],Pd=[0,.69444,.06646,0,.51111],Rd=[0,.69444,0,0,.83129],Id=[0,.69444,.1225,0,.51111],zd=[0,.68333,.09403,0,.76666],Nd=[0,.68333,.11111,0,.76666],Fd=[0,.69444,.06961,0,.51444],Qt=[0,.69444,0,0,.27778],$i=[.25,.75,0,0,.38889],tt=[0,.64444,0,0,.5],ti=[0,.69444,0,0,.77778],ri=[0,.68333,0,0,.75],zn=[0,.68333,0,0,.77778],$d=[0,.68333,0,0,.68056],Nn=[0,.68333,0,0,.72222],er=[.25,.75,0,0,.5],da=[.25,.75,0,0,.27778],we=[0,.69444,0,0,.5],Vi=[0,.69444,0,0,.55556],kl=[0,.43056,0,0,.44445],Fn=[0,.43056,0,0,.5],Vd=[.19444,.43056,0,0,.55556],qd=[0,.43056,0,0,.55556],rt=[.08333,.58333,0,0,.77778],Hd=[0,.43056,0,0,.27778],Wd=[0,.66786,0,0,.27778],Ud=[0,.69444,0,0,.75],jd=[0,.66786,0,0,.5],Jd=[0,.68333,0,0,.625],Ll=[.19444,.69444,0,0,.44445],$n=[0,.69444,0,0,.72222],Gd=[.19444,.69444,0,0,.5],Vn=[.19444,.69444,0,0,1],Xd=[.011,.511,0,0,1.126],Al=[.19444,.69444,0,0,.61111],Cl=[.05556,.75,0,0,.5],Zd=[0,.68333,0,0,.83334],Yd=[.0391,.5391,0,0,.66667],El=[-.05555,.44445,0,0,.5],Qd=[0,.43056,0,0,.77778],ii=[0,.55556,0,0,.66667],ma=[-.03625,.46375,0,0,.77778],em=[-.01688,.48312,0,0,.77778],tm=[.0391,.5391,0,0,1],Lr=[0,.69444,0,0,.61111],pa=[-.03472,.46528,0,0,.5],ha=[.25,.75,0,0,.44445],rm=[-.14236,.35764,0,0,1],fa=[.244,.744,0,0,.412],im=[.19444,.69444,0,0,.88889],ga=[.12963,.69444,0,0,.77778],nm=[.19444,.69444,0,0,.38889],om=[.011,.511,0,0,1.638],am=[.19444,.69444,0,0,0],ba=[0,.44444,0,0,.575],qn=[.19444,.44444,0,0,.575],sm=[0,.68611,0,0,.75555],lm=[0,.69444,0,0,.66759],cm=[0,.68611,0,0,.80555],um=[0,.68611,.08229,0,.98229],dm=[0,.68611,0,0,.76666],mm=[0,.44444,0,0,.58472],pm=[.19444,.44444,0,0,.6118],Hn=[.19444,.43056,0,0,.5],hm=[0,.68333,.02778,.08334,.76278],fm=[0,.68333,.08125,.05556,.83125],gm=[0,.43056,0,.05556,.48472],bm=[.19444,.43056,0,.08334,.51702],ym=[.25,.75,0,0,.42778],Ce=[0,.69444,0,0,.55],tr=[0,.69444,0,0,.73334],Ar=[0,.69444,0,0,.79445],xm=[0,.69444,0,0,.51945],Tl=[0,.69444,0,0,.70278],vm=[0,.69444,0,0,.76389],_m=[.25,.75,0,0,.34306],Dl=[0,.69444,0,0,.56111],Mm=[0,.69444,0,0,.25556],wm=[.19444,.45833,0,0,.56111],Sm=[0,.45833,0,0,.56111],ya=[0,.69444,0,0,.30556],km=[0,.69444,0,0,.58056],Lm=[0,.69444,0,0,.67223],Ol=[0,.69444,0,0,.85556],Bl=[0,.69444,0,0,.55834],Ot=[0,.65556,.11156,0,.5],Kl=[0,.69444,.08094,0,.70834],Pl=[.17014,0,0,0,.44445],Am=[0,.69444,.0799,0,.5],Cm=[0,.69444,0,0,.73752],Em=[0,.69444,.09205,0,.5],Tm=[0,.69444,.09031,0,.77778],Rl=[0,.69444,.07816,0,.27778],Dm=[0,.69444,.00316,0,.5],Om=[.19444,.69444,0,0,.83334],Bm=[.05556,.75,0,0,.83334],Km=[0,.75,0,0,.5],Pm=[.125,.08333,0,0,.27778],Rm=[0,.08333,0,0,.27778],Bt=[0,.65556,0,0,.5],Il=[0,.69444,0,0,.47222],rr=[0,.69444,0,0,.66667],Im=[0,.69444,0,0,.59722],zl=[0,.69444,0,0,.54167],Nl=[0,.69444,0,0,.70834],zm=[.25,.75,0,0,.28889],Fl=[0,.69444,0,0,.51667],Nm=[0,.44444,0,0,.44445],Fm=[.19444,.44444,0,0,.51667],$m=[0,.44444,0,0,.38333],Vm=[0,.44444,0,0,.51667],qm=[0,.69444,0,0,.83334],Hm=[.35001,.85,0,0,.45834],Wm=[.35001,.85,0,0,.57778],Um=[.35001,.85,0,0,.41667],jm=[.35001,.85,0,0,.58334],xa=[0,.72222,0,0,.55556],Jm=[1e-5,.6,0,0,.66667],Gm=[1e-5,.6,0,0,.77778],Xm=[.25001,.75,0,0,.94445],Zm=[.306,.805,.19445,0,.47222],Ym=[.30612,.805,.19445,0,.47222],qi=[.25001,.75,0,0,.83334],Hi=[.35001,.85,0,0,.47222],$l=[.25001,.75,0,0,1.11111],Qm=[.65002,1.15,0,0,.59722],e0=[.65002,1.15,0,0,.81111],t0=[.65002,1.15,0,0,.47222],r0=[.65002,1.15,0,0,.66667],va=[0,.75,0,0,1],i0=[.55001,1.05,0,0,1.27778],n0=[.862,1.36,.44445,0,.55556],o0=[.86225,1.36,.44445,0,.55556],Wi=[.55001,1.05,0,0,1.11111],_a=[.65002,1.15,0,0,.52778],a0=[.65002,1.15,0,0,.61111],Vl=[.55001,1.05,0,0,1.51112],s0=[.95003,1.45,0,0,.73611],l0=[.95003,1.45,0,0,1.04445],c0=[.95003,1.45,0,0,.52778],Ma=[.95003,1.45,0,0,.75],wa=[0,.75,0,0,1.44445],Sa=[.95003,1.45,0,0,.58334],u0=[1.25003,1.75,0,0,.79167],d0=[1.25003,1.75,0,0,1.27778],m0=[1.25003,1.75,0,0,.58334],ka=[1.25003,1.75,0,0,.80556],La=[0,.825,0,0,1.8889],Aa=[1.25003,1.75,0,0,.63889],Ca=[.64502,1.155,0,0,.875],p0=[1e-5,.6,0,0,.875],ql=[-99e-5,.601,0,0,.66667],Ea=[.64502,1.155,0,0,.66667],h0=[1e-5,.9,0,0,.88889],f0=[.65002,1.15,0,0,.88889],g0=[.90001,0,0,0,.88889],b0=[-.00499,.605,0,0,1.05556],Ta=[0,.12,0,0,.45],O=[0,.61111,0,0,.525],ut=[.08333,.69444,0,0,.525],y0=[-.08056,.53055,0,0,.525],x0=[-.05556,.55556,0,0,.525],Ke=[0,.43056,0,0,.525],Wn=[.22222,.43056,0,0,.525],v0=[0,0,0,0,.525],_0={"AMS-Regular":{32:Z,65:Qe,66:Yr,67:Qe,68:Qe,69:Yr,70:Ho,71:ul,72:ul,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:ul,76:Yr,77:[0,.68889,0,0,.94445],78:Qe,79:Ou,80:Ho,81:Ou,82:Qe,83:Bn,84:Yr,85:Qe,86:Qe,87:[0,.68889,0,0,1],88:Qe,89:Qe,90:Yr,107:Bn,160:Z,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:Bn,295:Wo,710:Bu,732:Ku,770:Bu,771:Ku,989:yr,1008:td,8245:[0,.54986,0,0,.275],8463:Wo,8487:Qe,8498:Bn,8502:Yr,8503:[0,.68889,0,0,.44445],8504:Yr,8513:[0,.68889,0,0,.63889],8592:dl,8594:dl,8602:De,8603:De,8606:Uo,8608:Uo,8610:Pu,8611:Pu,8619:Ru,8620:Ru,8621:[-.13313,.37788,0,0,1.38889],8622:De,8624:jo,8625:jo,8630:ml,8631:ml,8634:br,8635:br,8638:Jo,8639:Jo,8642:Jo,8643:Jo,8644:Go,8646:Go,8647:Go,8648:Iu,8649:Go,8650:Iu,8651:Uo,8652:Uo,8653:De,8654:De,8655:De,8666:zu,8667:zu,8669:[-.13313,.37788,0,0,1],8672:Nu,8674:Nu,8705:[0,.825,0,0,.5],8708:Bn,8709:yr,8717:[0,.43056,0,0,.42917],8722:dl,8724:[.08198,.69224,0,0,.77778],8726:yr,8733:Zo,8736:Kn,8737:Kn,8738:[.03517,.52239,0,0,.72222],8739:Qu,8740:[.25142,.74111,0,0,.27778],8741:ed,8742:[.25142,.74111,0,0,.5],8756:pl,8757:pl,8764:Xo,8765:[-.13313,.37788,0,0,.77778],8769:Xo,8770:ma,8774:lt,8776:em,8778:yr,8782:Fu,8783:Fu,8785:br,8786:br,8787:br,8790:Zo,8791:Pn,8796:[.08198,.91667,0,0,.77778],8806:Pi,8807:Pi,8808:Et,8809:Et,8812:[.25583,.75583,0,0,.5],8814:Ri,8815:Ri,8816:lt,8817:lt,8818:Pn,8819:Pn,8822:$u,8823:$u,8828:Tt,8829:Tt,8830:Pn,8831:Pn,8832:Ri,8833:Ri,8840:lt,8841:lt,8842:$e,8843:$e,8847:xr,8848:xr,8858:br,8859:br,8861:br,8862:Ii,8863:Ii,8864:Ii,8865:Ii,8872:[0,.69224,0,0,.61111],8873:Kn,8874:[0,.69224,0,0,.88889],8876:Ho,8877:Ho,8878:Qe,8879:Qe,8882:xr,8883:xr,8884:Tt,8885:Tt,8888:[0,.54986,0,0,1.11111],8890:Vd,8891:Vu,8892:Vu,8901:[0,.54986,0,0,.27778],8903:yr,8905:yr,8906:yr,8907:Zo,8908:Zo,8909:[-.03598,.46402,0,0,.77778],8910:qu,8911:qu,8912:xr,8913:xr,8914:Hu,8915:Hu,8916:pl,8918:vr,8919:vr,8920:Wu,8921:Wu,8922:Uu,8923:Uu,8926:Tt,8927:Tt,8928:lt,8929:lt,8934:Yo,8935:Yo,8936:Yo,8937:Yo,8938:Ri,8939:Ri,8940:lt,8941:lt,8994:ju,8995:ju,9416:[.15559,.69224,0,0,.90222],9484:jo,9488:jo,9492:Ju,9496:Ju,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:Ii,9633:Ii,9650:Qo,9651:Qo,9654:xr,9660:Qo,9661:Qo,9664:xr,9674:Xu,9733:[.19444,.69224,0,0,.94445],10003:Gu,10016:Gu,10731:Xu,10846:[.19444,.75583,0,0,.61111],10877:Tt,10878:Tt,10885:Pi,10886:Pi,10887:$e,10888:$e,10889:zi,10890:zi,10891:Zu,10892:Zu,10901:Tt,10902:Tt,10933:Et,10934:Et,10935:zi,10936:zi,10937:zi,10938:zi,10949:Pi,10950:Pi,10955:Yu,10956:Yu,57350:Qu,57351:ed,57352:yr,57353:td,57356:Et,57357:Et,57358:rd,57359:lt,57360:lt,57361:rd,57366:Et,57367:Et,57368:Et,57369:Et,57370:$e,57371:$e},"Caligraphic-Regular":{32:Z,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:Z},"Fraktur-Regular":{32:Z,33:[0,.69141,0,0,.29574],34:fl,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:id,41:id,42:[0,.62119,0,0,.27764],43:nd,44:od,45:nd,46:od,47:[.24982,.74947,0,0,.50181],48:hl,49:hl,50:hl,51:Rn,52:Rn,53:Rn,54:ad,55:Rn,56:ad,57:Rn,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:sd,93:sd,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:Z,8216:fl,8217:fl,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:Z,33:[0,.69444,0,0,.35],34:yl,35:[.19444,.69444,0,0,.95833],36:bd,37:[.05556,.75,0,0,.95833],38:ta,39:Fi,40:ea,41:ea,42:[0,.75,0,0,.575],43:ct,44:[.19444,.15556,0,0,.31944],45:$m,46:[0,.15556,0,0,.31944],47:_r,48:et,49:et,50:et,51:et,52:et,53:et,54:et,55:et,56:et,57:et,58:ud,59:[.19444,.44444,0,0,.31944],60:Ni,61:vd,62:Ni,63:[0,.69444,0,0,.54305],64:ta,65:gl,66:[0,.68611,0,0,.81805],67:na,68:[0,.68611,0,0,.88194],69:sm,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:ra,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:md,77:[0,.68611,0,0,1.09166],78:ra,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:gl,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:ia,92:_r,93:ia,94:Mr,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:Qr,99:cd,100:Qr,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:Qr,105:Fi,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:Fi,109:[0,.44444,0,0,.95833],110:ld,111:ba,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:ld,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:cd,123:_r,124:ia,125:_r,126:[.35,.34444,0,0,.575],160:Z,163:[0,.69444,0,0,.86853],168:Mr,172:[0,.44444,0,0,.76666],176:dd,177:ct,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:ct,216:[.04861,.73472,0,0,.89444],223:Im,230:[0,.44444,0,0,.83055],247:ct,248:[.09722,.54167,0,0,.575],305:ud,338:[0,.68611,0,0,1.16944],339:xd,567:[.19444,.44444,0,0,.35139],710:Mr,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:Mr,715:Mr,728:Mr,729:Fi,730:dd,732:Mr,733:Mr,915:md,916:xl,920:bl,923:cm,926:dm,928:ra,931:na,933:bl,934:na,936:bl,937:na,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:Fi,8217:Fi,8220:yl,8221:yl,8224:pd,8225:pd,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:lm,8465:hd,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:hd,8501:Ml,8592:Dt,8593:fd,8594:Dt,8595:fd,8596:Dt,8597:_r,8598:In,8599:In,8600:In,8601:In,8636:Dt,8637:Dt,8640:Dt,8641:Dt,8656:Dt,8657:gd,8658:Dt,8659:gd,8660:Dt,8661:[.25,.75,0,0,.70277],8704:Qr,8706:[0,.69444,.06389,0,.62847],8707:Qr,8709:bd,8711:xl,8712:yd,8715:yd,8722:ct,8723:ct,8725:_r,8726:_r,8727:oa,8728:vl,8729:vl,8730:[.18,.82,0,0,.95833],8733:xd,8734:[0,.44444,0,0,1.14999],8736:Kn,8739:ia,8741:_r,8743:ei,8744:ei,8745:ei,8746:ei,8747:[.19444,.69444,.12778,0,.56875],8764:vd,8768:[.19444,.69444,0,0,.31944],8771:_l,8776:[.02444,.52444,0,0,.89444],8781:_l,8801:_l,8804:wr,8805:wr,8810:_d,8811:_d,8826:Ni,8827:Ni,8834:Ni,8835:Ni,8838:wr,8839:wr,8846:ei,8849:wr,8850:wr,8851:ei,8852:ei,8853:ct,8854:ct,8855:ct,8856:ct,8857:ct,8866:Ml,8867:Ml,8868:ta,8869:ta,8900:vl,8901:[-.02639,.47361,0,0,.31944],8902:oa,8968:aa,8969:aa,8970:aa,8971:aa,8994:Md,8995:Md,9651:wd,9657:oa,9661:wd,9667:oa,9711:In,9824:sa,9825:sa,9826:sa,9827:sa,9837:[0,.75,0,0,.44722],9838:Sd,9839:Sd,10216:ea,10217:ea,10815:ra,10927:wr,10928:wr,57376:am},"Main-BoldItalic":{32:Z,33:[0,.69444,.11417,0,.38611],34:Dd,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:la,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:Sr,49:Sr,50:Sr,51:Sr,52:kd,53:Sr,54:Sr,55:kd,56:Sr,57:Sr,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:Sl,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:wl,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:wl,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:Cd,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:Ld,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:Ld,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:Z,168:[0,.69444,.11473,0,.59111],176:Ed,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:Ad,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:Ad,567:[.19444,.44444,.04611,0,.385],710:Cd,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:la,730:Ed,732:Sl,733:Sl,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:wl,931:[0,.68611,.11431,0,.82666],933:Td,934:[0,.68611,.05632,0,.82666],936:Td,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:la,8217:la,8220:[0,.69444,.16772,0,.62055],8221:Dd},"Main-Italic":{32:Z,33:ca,34:Fd,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:ca,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:kr,49:kr,50:kr,51:kr,52:Od,53:kr,54:kr,55:Od,56:kr,57:kr,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:Id,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:ua,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:ua,79:zd,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:ua,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:Pd,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:Bd,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:Bd,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:Z,168:[0,.66786,.10474,0,.51111],176:Rd,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:Kd,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:Kd,710:Pd,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:Rd,732:[0,.66786,.11585,0,.51111],733:Id,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:zd,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:ua,931:[0,.68333,.12028,0,.71555],933:Nd,934:[0,.68333,.05986,0,.71555],936:Nd,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:ca,8217:ca,8220:[0,.69444,.1685,0,.51444],8221:Fd,8463:Wo},"Main-Regular":{32:Z,33:Qt,34:we,35:Om,36:Cl,37:Bm,38:ti,39:Qt,40:$i,41:$i,42:Km,43:rt,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:er,48:tt,49:tt,50:tt,51:tt,52:tt,53:tt,54:tt,55:tt,56:tt,57:tt,58:Hd,59:[.19444,.43056,0,0,.27778],60:vr,61:Xo,62:vr,63:Il,64:ti,65:ri,66:[0,.68333,0,0,.70834],67:Nn,68:[0,.68333,0,0,.76389],69:$d,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:ri,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:zn,76:Jd,77:[0,.68333,0,0,.91667],78:ri,79:zn,80:$d,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:Nn,85:ri,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:ri,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:da,92:er,93:da,94:we,95:[.31,.12056,.02778,0,.5],97:Fn,98:Vi,99:kl,100:Vi,101:kl,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:Vi,105:Wd,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:Qt,109:[0,.43056,0,0,.83334],110:qd,111:Fn,112:Vd,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:qd,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:kl,123:er,124:da,125:er,126:[.35,.31786,0,0,.5],160:Z,163:[0,.69444,0,0,.76909],167:Ll,168:jd,172:[0,.43056,0,0,.66667],176:Ud,177:rt,182:Al,184:Pl,198:[0,.68333,0,0,.90278],215:rt,216:[.04861,.73194,0,0,.77778],223:we,230:[0,.43056,0,0,.72222],247:rt,248:[.09722,.52778,0,0,.5],305:Hd,338:[0,.68333,0,0,1.01389],339:Qd,567:[.19444,.43056,0,0,.30556],710:we,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:we,715:we,728:we,729:Wd,730:Ud,732:jd,733:we,915:Jd,916:Zd,920:zn,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:ri,931:Nn,933:zn,934:Nn,936:zn,937:Nn,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:Qt,8217:Qt,8220:we,8221:we,8224:Ll,8225:Ll,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:Wo,8465:$n,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:$n,8501:Lr,8592:De,8593:Gd,8594:De,8595:Gd,8596:De,8597:er,8598:Vn,8599:Vn,8600:Vn,8601:Vn,8614:[.011,.511,0,0,1],8617:Xd,8618:Xd,8636:De,8637:De,8640:De,8641:De,8652:[.011,.671,0,0,1],8656:De,8657:Al,8658:De,8659:Al,8660:De,8661:[.25,.75,0,0,.61111],8704:Vi,8706:[0,.69444,.05556,.08334,.5309],8707:Vi,8709:Cl,8711:Zd,8712:Yd,8715:Yd,8722:rt,8723:rt,8725:er,8726:er,8727:pa,8728:El,8729:El,8730:[.2,.8,0,0,.83334],8733:Qd,8734:ml,8736:Kn,8739:da,8741:er,8743:ii,8744:ii,8745:ii,8746:ii,8747:[.19444,.69444,.11111,0,.41667],8764:Xo,8768:[.19444,.69444,0,0,.27778],8771:ma,8773:[-.022,.589,0,0,1],8776:em,8781:ma,8784:[-.133,.67,0,0,.778],8801:ma,8804:$e,8805:$e,8810:tm,8811:tm,8826:vr,8827:vr,8834:vr,8835:vr,8838:$e,8839:$e,8846:ii,8849:$e,8850:$e,8851:ii,8852:ii,8853:rt,8854:rt,8855:rt,8856:rt,8857:rt,8866:Lr,8867:Lr,8868:ti,8869:ti,8872:[.249,.75,0,0,.867],8900:El,8901:[-.05555,.44445,0,0,.27778],8902:pa,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:ha,8969:ha,8970:ha,8971:ha,8994:rm,8995:rm,9136:fa,9137:fa,9651:im,9657:pa,9661:im,9667:pa,9711:Vn,9824:ga,9825:ga,9826:ga,9827:ga,9837:[0,.75,0,0,.38889],9838:nm,9839:nm,10216:$i,10217:$i,10222:fa,10223:fa,10229:[.011,.511,0,0,1.609],10230:om,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:om,10815:ri,10927:$e,10928:$e,57376:am},"Math-BoldItalic":{32:Z,48:ba,49:ba,50:ba,51:qn,52:qn,53:qn,54:et,55:qn,56:et,57:qn,65:gl,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:um,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:sm,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:lm,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:mm,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:Z,915:[0,.68611,.15972,0,.65694],916:xl,920:[0,.68611,.03194,0,.86722],923:cm,926:[0,.68611,.07458,0,.84125],928:um,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:dm,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:mm,960:[0,.44444,.03704,0,.68241],961:pm,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:pm,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:Z,48:Fn,49:Fn,50:Fn,51:Hn,52:Hn,53:Hn,54:tt,55:Hn,56:tt,57:Hn,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:fm,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:hm,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:gm,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:Z,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:hm,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:fm,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:gm,960:[0,.43056,.03588,0,.57003],961:bm,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:bm,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:Z,33:[0,.69444,0,0,.36667],34:Bl,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:ya,40:ym,41:ym,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:Ce,49:Ce,50:Ce,51:Ce,52:Ce,53:Ce,54:Ce,55:Ce,56:Ce,57:Ce,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:xm,64:tr,65:tr,66:tr,67:Tl,68:Ar,69:[0,.69444,0,0,.64167],70:Lr,71:tr,72:Ar,73:[0,.69444,0,0,.33056],74:xm,75:vm,76:km,77:[0,.69444,0,0,.97778],78:Ar,79:Ar,80:Tl,81:[.10556,.69444,0,0,.79445],82:Tl,83:Lr,84:tr,85:vm,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:tr,89:[0,.69444,.0275,0,.73334],90:Lm,91:_m,93:_m,94:Ce,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:Dl,99:[0,.45833,0,0,.48889],100:Dl,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:Dl,105:Mm,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:Mm,109:[0,.45833,0,0,.86667],110:Sm,111:[0,.45833,0,0,.55],112:wm,113:wm,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:Sm,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:Z,168:Ce,176:tr,180:Ce,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:Ce,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:Ce,729:ya,730:tr,732:Ce,733:Ce,915:km,916:[0,.69444,0,0,.91667],920:Ol,923:Lm,926:tr,928:Ar,931:Ar,933:Ol,934:Ar,936:Ol,937:Ar,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:ya,8217:ya,8220:Bl,8221:Bl},"SansSerif-Italic":{32:Z,33:[0,.69444,.05733,0,.31945],34:Dm,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:Rl,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:Pm,45:[0,.44444,.01946,0,.33333],46:Rm,47:[.25,.75,.13164,0,.5],48:Ot,49:Ot,50:Ot,51:Ot,52:Ot,53:Ot,54:Ot,55:Ot,56:Ot,57:Ot,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:rr,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:Kl,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:zl,77:[0,.69444,.08094,0,.875],78:Kl,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:Am,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:Z,168:[0,.67937,.06385,0,.5],176:Cm,184:Pl,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:Am,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:Em,715:we,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:Cm,732:[0,.67659,.08826,0,.5],733:Em,915:[0,.69444,.13372,0,.54167],916:qm,920:[0,.69444,.07555,0,.77778],923:Lr,926:[0,.69444,.12816,0,.66667],928:Kl,931:[0,.69444,.11983,0,.72222],933:Tm,934:[0,.69444,.04603,0,.72222],936:Tm,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:Rl,8217:Rl,8220:[0,.69444,.14205,0,.5],8221:Dm},"SansSerif-Regular":{32:Z,33:[0,.69444,0,0,.31945],34:we,35:Om,36:Cl,37:Bm,38:[0,.69444,0,0,.75834],39:Qt,40:$i,41:$i,42:Km,43:rt,44:Pm,45:[0,.44444,0,0,.33333],46:Rm,47:er,48:Bt,49:Bt,50:Bt,51:Bt,52:Bt,53:Bt,54:Bt,55:Bt,56:Bt,57:Bt,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:Il,64:rr,65:rr,66:rr,67:Qr,68:[0,.69444,0,0,.72223],69:Im,70:[0,.69444,0,0,.56945],71:rr,72:Nl,73:Qt,74:Il,75:[0,.69444,0,0,.69445],76:zl,77:[0,.69444,0,0,.875],78:Nl,79:[0,.69444,0,0,.73611],80:Qr,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:Vi,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:rr,89:[0,.69444,.025,0,.66667],90:Lr,91:zm,93:zm,94:we,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:Fl,99:Nm,100:Fl,101:Nm,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:Fl,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:Vm,111:[0,.44444,0,0,.5],112:Fm,113:Fm,114:[0,.44444,.01389,0,.34167],115:$m,116:[0,.57143,0,0,.36111],117:Vm,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:Z,168:[0,.67937,0,0,.5],176:rr,184:Pl,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:we,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:we,715:we,728:we,729:[0,.67937,0,0,.27778],730:rr,732:[0,.67659,0,0,.5],733:we,915:zl,916:qm,920:ti,923:Lr,926:rr,928:Nl,931:$n,933:ti,934:$n,936:ti,937:$n,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:Qt,8217:Qt,8220:we,8221:we},"Script-Regular":{32:Z,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:Z},"Size1-Regular":{32:Z,40:Hm,41:Hm,47:Wm,91:Um,92:Wm,93:Um,123:jm,125:jm,160:Z,710:xa,732:xa,770:xa,771:xa,8214:[-99e-5,.601,0,0,.77778],8593:Jm,8595:Jm,8657:Gm,8659:Gm,8719:Xm,8720:Xm,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:Ym,8748:Zm,8749:Zm,8750:Ym,8896:qi,8897:qi,8898:qi,8899:qi,8968:Hi,8969:Hi,8970:Hi,8971:Hi,9168:ql,10216:Hi,10217:Hi,10752:$l,10753:$l,10754:$l,10756:qi,10758:qi},"Size2-Regular":{32:Z,40:Qm,41:Qm,47:e0,91:t0,92:e0,93:t0,123:r0,125:r0,160:Z,710:va,732:va,770:va,771:va,8719:i0,8720:i0,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:o0,8748:n0,8749:n0,8750:o0,8896:Wi,8897:Wi,8898:Wi,8899:Wi,8968:_a,8969:_a,8970:_a,8971:_a,10216:a0,10217:a0,10752:Vl,10753:Vl,10754:Vl,10756:Wi,10758:Wi},"Size3-Regular":{32:Z,40:s0,41:s0,47:l0,91:c0,92:l0,93:c0,123:Ma,125:Ma,160:Z,710:wa,732:wa,770:wa,771:wa,8730:[.95003,1.45,0,0,1],8968:Sa,8969:Sa,8970:Sa,8971:Sa,10216:Ma,10217:Ma},"Size4-Regular":{32:Z,40:u0,41:u0,47:d0,91:m0,92:d0,93:m0,123:ka,125:ka,160:Z,710:La,732:La,770:La,771:La,8730:[1.25003,1.75,0,0,1],8968:Aa,8969:Aa,8970:Aa,8971:Aa,9115:Ca,9116:p0,9117:Ca,9118:Ca,9119:p0,9120:Ca,9121:Ea,9122:ql,9123:Ea,9124:Ea,9125:ql,9126:Ea,9127:h0,9128:f0,9129:g0,9130:[0,.3,0,0,.88889],9131:h0,9132:f0,9133:g0,9143:[.88502,.915,0,0,1.05556],10216:ka,10217:ka,57344:b0,57345:b0,57680:Ta,57681:Ta,57682:Ta,57683:Ta},"Typewriter-Regular":{32:v0,33:O,34:O,35:O,36:ut,37:ut,38:O,39:O,40:ut,41:ut,42:[0,.52083,0,0,.525],43:y0,44:[.13889,.125,0,0,.525],45:y0,46:[0,.125,0,0,.525],47:ut,48:O,49:O,50:O,51:O,52:O,53:O,54:O,55:O,56:O,57:O,58:Ke,59:[.13889,.43056,0,0,.525],60:x0,61:[-.19549,.41562,0,0,.525],62:x0,63:O,64:O,65:O,66:O,67:O,68:O,69:O,70:O,71:O,72:O,73:O,74:O,75:O,76:O,77:O,78:O,79:O,80:O,81:[.13889,.61111,0,0,.525],82:O,83:O,84:O,85:O,86:O,87:O,88:O,89:O,90:O,91:ut,92:ut,93:ut,94:O,95:[.09514,0,0,0,.525],96:O,97:Ke,98:O,99:Ke,100:O,101:Ke,102:O,103:Wn,104:O,105:O,106:[.22222,.61111,0,0,.525],107:O,108:O,109:Ke,110:Ke,111:Ke,112:Wn,113:Wn,114:Ke,115:Ke,116:[0,.55358,0,0,.525],117:Ke,118:Ke,119:Ke,120:Ke,121:Wn,122:Ke,123:ut,124:ut,125:ut,126:O,127:O,160:v0,176:O,184:[.19445,0,0,0,.525],305:Ke,567:Wn,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:O,715:O,728:O,730:O,770:O,771:O,776:O,915:O,916:O,920:O,923:O,926:O,928:O,931:O,933:O,934:O,936:O,937:O,8216:O,8217:O,8242:O,9251:[.11111,.21944,0,0,.525]}},nf=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Kt=10,Pe=.25,w0=1.2,Je=.431,Hl={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[Je,Je,Je],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[Pe,Pe,Pe],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},Un=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Ui=5,M0={"":" ","":" ",:"A",:"C",:"D",:"o",:"a",:"c",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Cr(a,s){a===void 0&&(a=77);let o=_0[s][a];if(o)return{defaultMetrics:!1,depth:o[0],height:o[1],italic:o[2],skew:o[3],width:o[4]};if(a===11034)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let c=String.fromCodePoint(a);if(c in M0)a=M0[c].codePointAt(0);else if(nf.test(c))return a=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var Wl={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ul={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},S0={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};function k0(a){if(Ul[a]){let[j,Xt,Lt]=Ul[a],fr=`<span class="ML__stretchy" style="height:${Lt}em"><svg width="100%" height="${Lt}em" viewBox="0 0 ${j} ${Xt}" preserveAspectRatio="none" ><path fill="currentcolor" d="${S0[a]}"></path></svg></span>`;return`<span style="display:inline-block;height:${Math.floor(100*Lt/2)/100}em;min-width:0">${fr}</span>`}let[s,o,c,h]=Wl[a],d,b,_=c/1e3;s.length===3?(d=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],b=["xMinYMin","xMidYMin","xMaxYMin"]):s.length===2?(d=["slice-1-of-2","slice-2-of-2"],b=["xMinYMin","xMaxYMin"]):(d=["slice-1-of-1"],b=[h]);let $=s.map((j,Xt)=>`<span class="${d[Xt]}" style=height:${_}em><svg width=400em height=${_}em viewBox="0 0 400000 ${c}" preserveAspectRatio="${b[Xt]} slice"><path fill="currentcolor" d="${S0[j]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${_}em;min-width:${o}em;">${$}</span>`}function L0(a){return Wl[a]?Wl[a][2]/1e3:Ul[a][2]}function of(a){let s=[];for(let o=0;o<a.length;o++){let c=a.charCodeAt(o);if(c===13&&a.charCodeAt(o+1)===10&&(c=10,o++),(c===13||c===12)&&(c=10),c===0&&(c=65533),c>=55296&&c<=56319){let h=a.charCodeAt(o+1);if(h>=56320&&h<=57343){let d=c-55296,b=h-56320;c=2**16+d*2**10+b,o++}}s.push(c)}return s}var Oa=8205,af=[[Oa,1],[65038,2],[127995,5],[129456,4],[917536,96]],Da,A0=[127462,127487];function C0(a){var s;if(Da===void 0){Da={};for(let o of af)for(let c=o[0];c<=o[0]+o[1]-1;c++)Da[c]=!0}return(s=Da[a])!=null?s:!1}function sf(a){return a>=A0[0]&&a<=A0[1]}function Ba(a){if(/^[\u0020-\u00FF]*$/.test(a))return a;let s=[],o=of(a),c=0;for(;c<o.length;){let h=o[c++],d=o[c];if(d===Oa){let b=c-1;for(c+=2;o[c]===Oa;)c+=2;s.push(String.fromCodePoint(...o.slice(b,c-b+1)))}else if(C0(d)){let b=c-1;for(;C0(o[c]);)c+=o[c]===Oa?2:1;s.push(String.fromCodePoint(...o.slice(b,2*c-b-1)))}else sf(h)?(c+=1,s.push(String.fromCodePoint(...o.slice(c-2,2)))):s.push(String.fromCodePoint(h))}return s}var jl=class{constructor(a){this.obeyspaces=!1,this.pos=0,this.s=Ba(a)}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(a){let s=typeof this.s=="string"?a.exec(this.s.slice(this.pos)):a.exec(this.s.slice(this.pos).join(""));return s!=null&&s[0]?(this.pos+=s[0].length,s[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let a=this.get();if(a==="\\"){if(!this.end()){let s=this.match(/^[a-zA-Z\*]+/);return s?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):s=this.get(),"\\"+s}}else{if(a==="{")return"<{>";if(a==="}")return"<}>";if(a==="^"){if(this.peek()==="^"){this.get();let s=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(s)return String.fromCodePoint(Number.parseInt(s.slice(s.lastIndexOf("^")+1),16))}return a}else if(a==="#"){if(!this.end()){let s=!1;if(/[\d?@]/.test(this.peek())&&(s=!0,this.pos+1<this.s.length)){let o=this.s[this.pos+1];s=/[^\dA-Za-z]/.test(o)}return s?"#"+this.get():"#"}}else if(a==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return a}};function lf(a,s){var o,c,h,d;let b=[],_=a.next();if(_&&_!=="\\relax"){if(_==="\\noexpand")_=a.next(),_&&b.push(_);else if(_==="\\obeyspaces")a.obeyspaces=!0;else if(_==="\\bgroup")b.push("<{>");else if(_==="\\egroup")b.push("<}>");else if(_==="\\string"){if(_=a.next(),_)if(_.startsWith("\\"))for(let $ of _)b.push($==="\\"?"\\backslash":$);else _==="<{>"?b.push("\\{"):_==="<space>"?b.push("~"):_==="<}>"&&b.push("\\}")}else if(_==="\\csname"){for(;a.peek()==="<space>";)a.next();let $="",j=!1,Xt=[];do{if(Xt.length===0)if(/^#[\d?@]$/.test(a.peek())){let Lt=a.get().slice(1);Xt=ji((c=(o=s==null?void 0:s(Lt))!=null?o:s==null?void 0:s("?"))!=null?c:"\\placeholder{}",s),_=Xt[0]}else _=a.next(),Xt=_?[_]:[];j=Xt.length===0,!j&&_==="\\endcsname"&&(j=!0,Xt.shift()),j||(j=_==="<$>"||_==="<$$>"||_==="<{>"||_==="<}>"||typeof _=="string"&&_.length>1&&_.startsWith("\\")),j||($+=Xt.shift())}while(!j);$&&b.push("\\"+$),b.push(...Xt)}else if(_!=="\\endcsname")if(_.length>1&&_.startsWith("#")){let $=_.slice(1);b.push(...ji((d=(h=s==null?void 0:s($))!=null?h:s==null?void 0:s("?"))!=null?d:"\\placeholder{}",s))}else b.push(_)}return b}function ji(a,s=null){if(!a)return[];let o=[],c="";for(let b of a.toString().split(/\r?\n/)){c&&o.push(c),c=" ";let _=b.match(/((?:\\%)|[^%])*/);_!==null&&o.push(_[0])}let h=new jl(o.join("")),d=[];do d.push(...lf(h,s));while(!h.end());return d}function P(a){let s="",o=[];for(let c of a)c&&(s&&/^[a-zA-Z\*]/.test(c)&&o.push(s),o.push(c),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(c)&&o.push(" "),s=/\\[a-zA-Z]+\*?$/.test(c)?" ":"");return o.join("")}function W(a,...s){return a.startsWith("\\"),s.length===0?a:P([a,...s.map(o=>`{${o}}`)])}function Er(a){return P(a.map(s=>{var o;return(o={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[s])!=null?o:s}))}var ni=class Sv{constructor(s){Sv._registry[s]=this}static createAtom(s,o,c){return Sv._registry[s].createAtom(o,ne(o,s),c)}static serialize(s,o){var c;if(!s||s.length===0)return"";if((c=o.skipStyles)!=null&&c){let h=[];for(let d of T0(s)){let b=Sv._registry[d[0].mode];h.push(...b.serialize(d,o))}return P(h)}return P(uf(s,o))}static getFont(s,o,c){return Sv._registry[s].getFont(o,c)}};ni._registry={};var ve=ni;function T0(a){let s=[],o=[],c="NONE";for(let h of a)h.type!=="first"&&(h.mode!==c?(o.length>0&&s.push(o),o=[h],c=h.mode):o.push(h));return o.length>0&&s.push(o),s}function Ka(a){if((a==null?void 0:a.mode)!=="math")return"";let{style:s}=a;return!s||!s.variantStyle?"":s.variantStyle==="bold"||s.variantStyle==="bolditalic"?"bold":""}function Pa(a){if(!a)return"";let{style:s}=a;if(!s)return"";let o=s.variant;return o===void 0?"normal":(!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(o)&&s.variantStyle&&(o+="-"+s.variantStyle),o)}function dt(a,s){let o=[],c=[],h;for(let d of a){if(d.type==="first")continue;let b;s==="variant"?b=Pa(d):s==="bold"?b=Ka(d):b=d.style[s],b===h?c.push(d):(c.length>0&&o.push(c),c=[d],h=b)}return c.length>0&&o.push(c),o}function E0(a,s){var o;let{parent:c}=a[0],h=c==null?void 0:c.style.color,d=[];for(let b of T0(a)){let _=s.defaultMode;for(let $ of dt(b,"color")){let j=$[0].style,Xt=ve._registry[$[0].mode].serialize($,g(p({},s),{defaultMode:_==="text"?"text":"math"}));!s.skipStyles&&j.color&&j.color!=="none"&&(!c||h!==j.color)?d.push(W("\\textcolor",(o=j.verbatimColor)!=null?o:j.color,P(Xt))):d.push(P(Xt))}}return d}function cf(a,s){let{parent:o}=a[0],c=o==null?void 0:o.style.backgroundColor;return dt(a,"backgroundColor").map(h=>{var d;if(h.length>0||h[0].type!=="box"){let b=h[0].style;if(b.backgroundColor&&b.backgroundColor!=="none"&&(!o||c!==b.backgroundColor))return W("\\colorbox",(d=b.verbatimBackgroundColor)!=null?d:b.backgroundColor,P(E0(h,g(p({},s),{defaultMode:"text"}))))}return P(E0(h,s))})}function uf(a,s){if(a.length===0)return[];let{parent:o}=a[0],c=o==null?void 0:o.style.fontSize,h=[];for(let d of dt(a,"fontSize")){let b=d[0].style.fontSize,_=cf(d,s);_&&(b&&b!=="auto"&&(!o||c!==b)?h.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][b],..._):h.push(..._))}return h}function Ra(a){return a?{mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[a]:void 0}function oi(a){if(a.length===0)return"ord";let s=Ra(a[0].type),o=Ra(a[a.length-1].type);return s&&s===o?s:"ord"}function jn(a,s){if(typeof a=="string")return a;if(typeof a=="number"){let o=Math.ceil(100*a)/100;return o===0?"0":o.toString()+(s??"")}return""}var w=class Tv{constructor(s,o){var c,h,d,b,_;if(typeof s=="number"?this.value=String.fromCodePoint(s):typeof s=="string"?this.value=s:ee(s)?this.children=s.filter(j=>j!==null):s&&s instanceof Tv&&(this.children=[s]),this.children)for(let j of this.children)j.parent=this;this.type=(c=o==null?void 0:o.type)!=null?c:"ignore",this.isSelected=(o==null?void 0:o.isSelected)===!0,o!=null&&o.caret&&(this.caret=o.caret),this.classes=(h=o==null?void 0:o.classes)!=null?h:"",this.isTight=(d=o==null?void 0:o.isTight)!=null?d:!1,o!=null&&o.attributes&&(this.attributes=o.attributes);let $=o==null?void 0:o.fontFamily;o!=null&&o.style&&this.value&&($=(_=ve.getFont((b=o.mode)!=null?b:"math",this,g(p({variant:"normal"},o.style),{letterShapeStyle:o.letterShapeStyle})))!=null?_:void 0),$||($="Main-Regular"),this._height=0,this._depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,(o==null?void 0:o.maxFontSize)!==void 0&&(this.maxFontSize=o.maxFontSize),df(this,$)}set atomID(s){s===void 0||s.length===0||(this.id=s)}selected(s){if(this.isSelected!==s&&(this.isSelected=s,this.children))for(let o of this.children)o.selected(s)}setStyle(s,o,c){if(o===void 0)return;let h=jn(o,c);h.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[s]=h)}setTop(s){Number.isFinite(s)&&Math.abs(s)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=jn(s,"em"),this.height-=s,this.depth+=s)}get left(){var s;return(s=this.cssProperties)!=null&&s["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(s){Number.isFinite(s)&&(s===0?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=jn(s,"em")))}set right(s){Number.isFinite(s)&&(s===0?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=jn(s,"em")))}set bottom(s){Number.isFinite(s)&&(s===0?this.cssProperties&&delete this.cssProperties["margin-bottom"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-bottom"]=jn(s,"em")))}get width(){return this._width*this.scale}set width(s){this._width=s,this.hasExplicitWidth=!0}set softWidth(s){}get height(){return this._height*this.scale}set height(s){this._height=s}get depth(){return this._depth*this.scale}set depth(s){this._depth=s}wrap(s){let o=s.parent;if(!o)return this;s.isPhantom&&this.setStyle("opacity",0);let c=s.color;c&&c!==o.color&&this.setStyle("color",c);let h=s.backgroundColor;this.isSelected&&(h=Su(h)),h&&h!==o.backgroundColor&&(this.setStyle("background-color",h),this.setStyle("--bg-color",h),this.setStyle("display","inline-block"),this.setStyle("position","relative"),this.classes=this.classes?`${this.classes} ML__bg`:"ML__bg");let d=s.scalingFactor;return this.scale=d,this.skew*=d,this.italic*=d,this}toMarkup(){var s,o,c,h;let d=(s=this.value)!=null?s:"";if(this.children)for(let Jr of this.children)d+=Jr.toMarkup();let b="";if(this.svgBody)b=k0(this.svgBody);else if(this.svgOverlay){b='<span style="',b+="display: inline-block;",b+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`,b+=`vertical-align:${Math.floor(100*this.depth)/100}em;`,b+='">',b+=d,b+="</span>",b+='<svg style="position:absolute;overflow:visible;',b+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`;let Jr=(o=this.cssProperties)==null?void 0:o.padding;Jr?(b+=`top:${Jr};`,b+=`left:${Jr};`,b+=`width:calc(100% - 2 * ${Jr} );`):b+="top:0;left:0;width:100%;",b+="z-index:2;",b+='"',this.svgStyle&&(b+=this.svgStyle),b+=` viewBox="0 0 ${Math.floor(100*this.width)/100} ${Math.floor(100*(this.height+this.depth))/100}"`,b+=`>${this.svgOverlay}</svg>`}let _=[],$=this.classes.split(" ");$.push((c={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!=null?c:""),this.caret==="latex"&&$.push("ML__latex-caret"),this.isSelected&&$.push("ML__selected");let j=$.length===1?$[0]:$.filter((Jr,Js,qs)=>Jr.length>0&&qs.indexOf(Jr)===Js).join(" ");if(j.length>0&&_.push(`class=${Ji(`"${j}"`)}`),this.id&&_.push(` data-atom-id=${Ji(this.id)}`),this.cssId&&_.push(` id=${Ji(`"${this.cssId.replace(/ /g,"-")}"`)}`),this.attributes&&_.push(...Object.keys(this.attributes).map(Jr=>`${Jl(Jr)}=${Ji(this.attributes[Jr])}`)),this.htmlData){let Jr=this.htmlData.split(",");for(let Js of Jr){let qs=Js.match(/([^=]+)=(.+$)/);if(qs){let zo=Jl(qs[1]);if(zo)if(zo==="href"){let js=new URL(qs[2]);if(js.protocol!=="http:"&&js.protocol!=="https:")throw new Error(`Invalid URL: ${qs[2]}`);_.push(`href="${qs[2].replace(/"/g,"&quot;")}"`)}else _.push(`data-${zo}=${Ji(qs[2])}`)}else{let zo=Jl(Js);zo&&_.push(`data-${zo} `)}}}let Xt=(h=this.cssProperties)!=null?h:{};this.hasExplicitWidth&&Xt.width===void 0&&(Xt.width=`${Math.ceil(this._width*100)/100}em`);let Lt=Object.keys(Xt).map(Jr=>`${Jr}:${Xt[Jr]}`);if(this.scale!==void 0&&this.scale!==1&&(d.length>0||b.length>0)&&Lt.push(`font-size: ${Math.ceil(this.scale*1e4)/100}%`),this.htmlStyle)for(let Jr of this.htmlStyle.split(";")){let Js=Jr.match(/([^:]+):(.+$)/);if(Js){let qs=Js[1].trim().replace(/ /g,"-");qs&&Lt.push(`${qs}:${Js[2]}`)}}Lt.length>0&&_.push(`style=${Ji(Lt.join(";"))}`);let fr="";return _.length>0||b.length>0?fr=`<span ${_.join(" ")}>${d}${b}</span>`:fr=d,this.caret==="text"?fr+='<span class="ML__text-caret"></span>':this.caret==="math"&&(fr+='<span class="ML__caret"></span>'),fr}tryCoalesceWith(s){if(this.svgBody||!this.value||s.svgBody||!s.value)return!1;let o=this.children&&this.children.length>0,c=s.children&&s.children.length>0;if(o||c)return!1;if(s.cssProperties||this.cssProperties){for(let $ of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(s.cssProperties&&$ in s.cssProperties||this.cssProperties&&$ in this.cssProperties)return!1}let h=this.cssProperties?Object.keys(this.cssProperties).length:0,d=s.cssProperties?Object.keys(s.cssProperties).length:0;if(h!==d)return!1;if(h>0){for(let $ of Object.keys(this.cssProperties))if(this.cssProperties[$]!==s.cssProperties[$])return!1}let b=this.classes.trim().replace(/\s+/g," ").split(" "),_=s.classes.trim().replace(/\s+/g," ").split(" ");if(b.length!==_.length)return!1;b.sort(),_.sort();for(let[$,j]of b.entries())if(j==="ML__vertical-separator"||j!==_[$])return!1;return this.value+=s.value,this.height=Math.max(this.height,s.height),this.depth=Math.max(this.depth,s.depth),this._width=this._width+s._width,this.maxFontSize=Math.max(this.maxFontSize,s.maxFontSize),this.italic=s.italic,!0}};function Gl(a){if(!a||a.length===0)return[];a[0].children=Gl(a[0].children);let s=[a[0]];for(let o=1;o<a.length;o++)s[s.length-1].tryCoalesceWith(a[o])||(a[o].children=Gl(a[o].children),s.push(a[o]));return s}function Tr(a){return a.children&&(a.children=Gl(a.children)),a}function Dr(a,s){if(!a)return new w(null,s);let o=new w(null,{classes:"ML__strut",type:"ignore"});o.setStyle("height",Math.max(0,a.height),"em");let c=[o];if(a.depth!==0){let h=new w(null,{classes:"ML__strut--bottom",type:"ignore"});h.setStyle("height",a.height+a.depth,"em"),h.setStyle("vertical-align",-a.depth,"em"),c.push(h)}return c.push(a),new w(c,g(p({},s),{type:"lift"}))}function Gi(a){let s=L0(a)/2,o=new w(null,{maxFontSize:0});return o.height=s+.166,o.depth=s-.166,o.svgBody=a,o}function df(a,s){var o;if(a.type==="latex"){a.height=.9,a.depth=.2,a._width=1;return}if(a.value){a.height=-1/0,a.depth=-1/0,a._width=0,a.skew=-1/0,a.italic=-1/0;for(let c=0;c<a.value.length;c++){let h=Cr(a.value.codePointAt(c),s);a.height=Math.max(a.height,h.height),a.depth=Math.max(a.depth,h.depth),a._width+=h.width,a.skew=h.skew,a.italic=h.italic}return}if(a.children&&a.children.length>0){let c=-1/0,h=-1/0,d=0;for(let b of a.children)b.height>c&&(c=b.height),b.depth>h&&(h=b.depth),d=Math.max(d,(o=b.maxFontSize)!=null?o:0);a.height=c,a.depth=h,a._width=a.children.reduce((b,_)=>b+_.width,0),a.maxFontSize=d}}function Jl(a){if(a=a.trim().replace(/ /g,"-"),a.length===0)throw new Error("Invalid empty attribute name");if(/[\x20\x09\x0a\x0c\x0d"'>/=\x00-\x1f]/.test(a))throw new Error(`Invalid attribute name "${a}"`);return a}function Ji(a){if(a=a.trim(),a.startsWith('"')&&a.endsWith('"')){if(/"/.test(a.slice(1,-1)))throw new Error(`Invalid attribute value: ${a}`);return a}if(a.startsWith("'")&&a.endsWith("'")){if(/'/.test(a.slice(1,-1)))throw new Error(`Invalid attribute value: ${a}`);return a}if(a.length===0)throw new Error("Invalid empty attribute value");return`"${a.replace(/"/g,"&quot;")}"`}function mf(a){if("individualShift"in a){let s=a.individualShift,o=s[0];if(o==null)return[null,0];let c=[o],h=-o.shift-o.box.depth,d=h;for(let b=1;b<s.length;b++){let _=s[b],$=-_.shift-d-_.box.depth,j=$-(o.box.height+o.box.depth);d=d+$,c.push(j),c.push(_),o=_}return[c,h]}if("top"in a){let s=a.top;for(let o of a.children)s-=typeof o=="number"?o:o.box.height+o.box.depth;return[a.children,s]}else{if("bottom"in a)return[a.children,-a.bottom];if("firstBaseline"in a){let s=a.firstBaseline[0];if(typeof s=="number")throw new Error("First child must be an element.");return[a.firstBaseline,-s.box.depth]}else if("shift"in a){let s=a.children[0];if(typeof s=="number")throw new Error("First child must be an element.");return[a.children,-s.box.depth-a.shift]}}return[null,0]}function pf(a){var s;let[o,c]=mf(a);if(!o)return[[],0,0];let h=new w(null,{classes:"ML__pstrut"}),d=0;for(let Js of o)if(typeof Js!="number"){let qs=Js.box;d=Math.max(d,qs.maxFontSize,qs.height)}d+=2,h.height=d,h.setStyle("height",d,"em");let b=[],_=c,$=c,j=c,Xt=0;for(let Js of o){if(typeof Js=="number")j+=Js;else{let qs=Js.box,zo=(s=Js.classes)!=null?s:[],js=new w([h,qs],{classes:zo.join(" "),style:Js.style});qs.setStyle("height",qs.height+qs.depth,"em"),qs.setStyle("display","inline-block"),js.setStyle("top",-d-j-qs.depth,"em"),Js.marginLeft&&js.setStyle("margin-left",Js.marginLeft,"em"),Js.marginRight&&js.setStyle("margin-right",Js.marginRight,"em"),b.push(js),j+=qs.height+qs.depth,Xt=Math.max(Xt,js.width)}_=Math.min(_,j),$=Math.max($,j)}b.forEach(Js=>{Js.softWidth=Xt});let Lt=new w(b,{classes:"ML__vlist"});if(Lt.softWidth=Xt,Lt.height=$,Lt.setStyle("height",$,"em"),_>=0)return[[new w(Lt,{classes:"ML__vlist-r"})],$,-_];let fr=new w(new w(null),{classes:"ML__vlist"});fr.height=-_,fr.setStyle("height",-_,"em");let Jr=new w(8203,{classes:"ML__vlist-s",maxFontSize:0});return Jr.softWidth=0,Jr.height=0,Jr.depth=0,[[new w([Lt,Jr],{classes:"ML__vlist-r"}),new w(fr,{classes:"ML__vlist-r"})],$,-_]}var te=class extends w{constructor(a,s){var o;let[c,h,d]=pf(a);super(c.length===1?c[0]:c,{type:s==null?void 0:s.type,classes:((o=s==null?void 0:s.classes)!=null?o:"")+" ML__vlist-t"+(c.length===2?" ML__vlist-t2":"")}),this.height=h,this.depth=d,this.softWidth=c.reduce((b,_)=>Math.max(b,_.width),0)}};function D0(a,s){var o,c,h,d,b;let _=a.metrics,$=new w(s.base),j=(o=s.baseShift)!=null?o:0,Xt=(c=s.slant)!=null?c:0,Lt=0,fr=0;s.above&&(Lt=(h=s.aboveShift)!=null?h:Math.max(_.bigOpSpacing1,_.bigOpSpacing3-s.above.depth)),s.below&&(fr=(d=s.belowShift)!=null?d:Math.max(_.bigOpSpacing2,_.bigOpSpacing4-s.below.height));let Jr=null;if(s.below&&s.above){let Js=_.bigOpSpacing5+s.below.height+s.below.depth+fr+$.depth+j;Jr=new te({bottom:Js,children:[_.bigOpSpacing5,{box:s.below,marginLeft:-Xt,classes:["ML__center"]},fr,{box:$,classes:["ML__center"]},Lt,{box:s.above,marginLeft:Xt,classes:["ML__center"]},_.bigOpSpacing5]}).wrap(a)}else if(s.below&&!s.above)Jr=new te({top:$.height-j,children:[_.bigOpSpacing5,{box:s.below,marginLeft:-Xt,classes:["ML__center"]},fr,{box:$,classes:["ML__center"]}]}).wrap(a);else if(!s.below&&s.above){let Js=$.depth+j;Jr=new te({bottom:Js,children:[{box:$,classes:["ML__center"]},Lt,{box:s.above,marginLeft:Xt,classes:["ML__center"]},_.bigOpSpacing5]}).wrap(a)}else{let Js=$.depth+j;Jr=new te({bottom:Js,children:[{box:$},_.bigOpSpacing5]}).wrap(a)}return new w(Jr,{type:(b=s.type)!=null?b:"op"})}var Ia=7,Gn=6,Xn=5,Or=4,ai=3,Ve=2,Br=1,Ee=0,Pt=class{constructor(a,s,o){this.id=a,this.sizeDelta=s,this.cramped=o;let c={"-4":2,"-3":1,0:0}[s];this.metrics=Object.keys(Hl).reduce((h,d)=>g(p({},h),{[d]:Hl[d][c]}),{})}getFontSize(a){return Math.max(1,a+this.sizeDelta)}get sup(){return mt[[Ee,Br,Ee,Br,Ve,ai,Ve,ai][this.id]]}get sub(){return mt[[Ee,Ee,Ee,Ee,Ve,Ve,Ve,Ve][this.id]]}get fracNum(){return mt[[Ee,Br,Ee,Br,Ve,ai,Or,Xn][this.id]]}get fracDen(){return mt[[Ee,Ee,Ee,Ee,Ve,Ve,Or,Or][this.id]]}get cramp(){return mt[[Ee,Ee,Ve,Ve,Or,Or,Gn,Gn][this.id]]}get isTight(){return this.sizeDelta<0}},Jn={7:new Pt(Ia,0,!1),6:new Pt(Gn,0,!0),5:new Pt(Xn,0,!1),4:new Pt(Or,0,!0),3:new Pt(ai,-3,!1),2:new Pt(Ve,-3,!0),1:new Pt(Br,-4,!1),0:new Pt(Ee,-4,!0)},mt=g(p({},Jn),{displaystyle:Jn[Ia],textstyle:Jn[Xn],scriptstyle:Jn[ai],scriptscriptstyle:Jn[Br]});function Zl(a,s){var o;if(!a)return 0;let c={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:Kt,bp:803/800,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(o=a.unit)!=null?o:"pt"];if(Number.isFinite(s)){let h=10**s;return Math.round(a.dimension/Kt*c*h)/h}return a.dimension*c}function za(a,s){if(a===null)return 0;let o=Zl(a)/Kt;if(Number.isFinite(s)){let c=10**s;return Math.round(o*c)/c}return o}function Xl(a){var s;return`${a.dimension}${(s=a.unit)!=null?s:"pt"}`}function hf(a){let s=Xl(a.glue);return a.grow&&a.grow.dimension!==0&&(s+=` plus ${Xl(a.grow)}`),a.shrink&&a.shrink.dimension!==0&&(s+=` minus ${Xl(a.shrink)}`),s}function _e(a){var s,o;if(a==null)return null;let c="";if("dimension"in a&&(c=`${a.dimension}${(s=a.unit)!=null?s:"pt"}`),"glue"in a&&(c=hf(a)),"number"in a)if(!("base"in a)||a.base==="decimal")c=Number(a.number).toString();else if(a.base==="alpha")c=`\`${String.fromCodePoint(a.number)}`;else{let h=Math.round(a.number)>>>0;a.base==="hexadecimal"?(c=Number(h).toString(16).toUpperCase(),h<=255?c=c.padStart(2,"0"):h<=65535?c=c.padStart(4,"0"):h<=16777215?c=c.padStart(6,"0"):c=c.padStart(8,"0"),c=`"${c}`):a.base==="octal"&&(c=Number(h).toString(8),h<=63?c=c.padStart(2,"0"):h<=30583?c=c.padStart(4,"0"):c=c.padStart(8,"0"),c=`'${c}`)}return"register"in a&&("factor"in a&&(a.factor===-1?c="-":a.factor!==1&&(c=Number(a.factor).toString())),"global"in a&&a.global&&(c+="\\global"),c+=`\\${a.register}`),"string"in a&&(c=a.string),(o=a.relax)!=null&&o&&(c+="\\relax"),c}function pt(a,s){return a==null?null:"number"in a?g(p({},a),{number:a.number*s}):"register"in a?"factor"in a&&a.factor?g(p({},a),{factor:a.factor*s}):g(p({},a),{factor:s}):"dimension"in a?g(p({},a),{dimension:a.dimension*s}):"glue"in a?a.shrink&&a.grow?{glue:pt(a.glue,s),shrink:pt(a.shrink,s),grow:pt(a.grow,s)}:a.shrink?{glue:pt(a.glue,s),shrink:pt(a.shrink,s)}:a.grow?{glue:pt(a.glue,s),grow:pt(a.grow,s)}:{glue:pt(a.glue,s)}:null}var ff={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()};function Na(){return p({},ff)}function Zn(){return{registers:Na(),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"",letterShapeStyle:F.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,colorMap:Xr,backgroundColorMap:Ei,getMacro:a=>Ki(a,Bi())}}var B=class Ov{constructor(s,o){var c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js;let eu;s!=null&&s.parent?(this.parent=s.parent,eu=s.parent,this.registers={}):(eu=p(p({},Zn()),(c=s==null?void 0:s.from)!=null?c:{}),this.registers=eu.registers),eu.atomIdsSettings&&(this.atomIdsSettings=p({},eu.atomIdsSettings)),this.renderPlaceholder=eu.renderPlaceholder,this.isPhantom=(b=(d=s==null?void 0:s.isPhantom)!=null?d:(h=this.parent)==null?void 0:h.isPhantom)!=null?b:!1,this.letterShapeStyle=eu.letterShapeStyle,this.minFontScale=eu.minFontScale,this.maxMatrixCols=eu.maxMatrixCols,o!=null&&o.color&&o.color!=="none"?this.color=o.color:this.color=($=(_=this.parent)==null?void 0:_.color)!=null?$:"",o!=null&&o.backgroundColor&&o.backgroundColor!=="none"?this.backgroundColor=o.backgroundColor:this.backgroundColor=(Xt=(j=this.parent)==null?void 0:j.backgroundColor)!=null?Xt:"",o!=null&&o.fontSize&&o.fontSize!=="auto"&&o.fontSize!==((Lt=this.parent)==null?void 0:Lt.size)?this.size=o.fontSize:this.size=(Jr=(fr=this.parent)==null?void 0:fr.size)!=null?Jr:Ui;let Oo=(qs=(Js=this.parent)==null?void 0:Js.mathstyle)!=null?qs:mt.displaystyle;if(typeof(s==null?void 0:s.mathstyle)=="string"){if(eu instanceof Ov)switch(s.mathstyle){case"cramp":Oo=Oo.cramp;break;case"superscript":Oo=Oo.sup;break;case"subscript":Oo=Oo.sub;break;case"numerator":Oo=Oo.fracNum;break;case"denominator":Oo=Oo.fracDen;break}switch(s.mathstyle){case"textstyle":Oo=mt.textstyle;break;case"displaystyle":Oo=mt.displaystyle;break;case"scriptstyle":Oo=mt.scriptstyle;break;case"scriptscriptstyle":Oo=mt.scriptscriptstyle;break}}this.mathstyle=Oo,this.smartFence=eu.smartFence,this.placeholderSymbol=eu.placeholderSymbol,this.colorMap=(zo=eu.colorMap)!=null?zo:tu=>tu,this.backgroundColorMap=(js=eu.backgroundColorMap)!=null?js:tu=>tu,this.getMacro=eu.getMacro,this.parent!==void 0||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!="number")return`${Date.now().toString(36).slice(-2)}${Math.floor(Math.random()*1e5).toString(36)}`;let s=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,s}scale(s){return s*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return this.mathstyle.id===Ia||this.mathstyle.id===Gn}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(Un[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(s){if(this.registers&&s in this.registers)return this.registers[s];if(this.parent)return this.parent.getRegister(s)}getRegisterAsNumber(s){let o=this.getRegister(s);if(typeof o=="number")return o;if(typeof o=="string")return Number(o)}getRegisterAsGlue(s){if(this.registers&&s in this.registers){let o=this.registers[s];return typeof o=="object"&&"glue"in o?o:typeof o=="object"&&"dimension"in o?{glue:{dimension:o.dimension}}:typeof o=="number"?{glue:{dimension:o}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(s)}getRegisterAsEm(s,o){return za(this.getRegisterAsDimension(s),o)}getRegisterAsDimension(s){if(this.registers&&s in this.registers){let o=this.registers[s];return typeof o=="object"&&"glue"in o?o.glue:typeof o=="object"&&"dimension"in o?o:typeof o=="number"?{dimension:o}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(s)}setRegister(s,o){if(o===void 0){delete this.registers[s];return}this.registers[s]=o}evaluate(s){if(!s||!("register"in s))return s;let o=this;if("global"in s&&s.global)for(;o.parent;)o=o.parent;let c=1;"factor"in s&&s.factor!==1&&s.factor!==void 0&&(c=s.factor);let h=o.getRegister(s.register);if(h===void 0)return;if(typeof h=="string")return{string:Number(h).toString()+h};if(typeof h=="number")return{number:c*h};let d=o.evaluate(h);if(d!==void 0)return"string"in d?{string:Number(h).toString()+d.string}:"number"in d?{number:c*d.number}:"dimension"in d?g(p({},d),{dimension:c*d.dimension}):"glue"in d?g(p({},d),{glue:g(p({},d.glue),{dimension:c*d.glue.dimension}),shrink:d.shrink?g(p({},d.shrink),{dimension:c*d.shrink.dimension}):void 0,grow:d.grow?g(p({},d.grow),{dimension:c*d.grow.dimension}):void 0}):s}toDimension(s){let o=this.evaluate(s);if(o===void 0)return null;if("dimension"in o)return o;if("glue"in o)return o.glue;if("number"in o)return{dimension:o.number};if("string"in o){let c=parseFloat(o.string),h=o.string.match(/(mm|cm|ex|px|em|bp|dd|pc|in|mu)$/);return h?{dimension:c,unit:h[0]}:{dimension:c}}return null}toEm(s,o){if(s===null)return 0;let c=this.toDimension(s);return c===null?0:Zl(c,o)/Kt}toNumber(s){if(s===null)return null;let o=this.evaluate(s);return o===void 0?null:"number"in o?o.number:"dimension"in o?o.dimension:"glue"in o?o.glue.dimension:"string"in o?Number(o.string):null}toColor(s){var o,c;if(s===null)return null;let h=this.evaluate(s);return h===void 0?null:"string"in h?(c=(o=this.colorMap)==null?void 0:o.call(this,h.string))!=null?c:h.string:null}toBackgroundColor(s){var o,c;if(s===null)return null;let h=this.evaluate(s);return h===void 0?null:"string"in h?(c=(o=this.backgroundColorMap)==null?void 0:o.call(this,h.string))!=null?c:h.string:null}},Pr=["body","above","below","superscript","subscript"];function Kr(a){return typeof a=="string"&&Pr.includes(a)}function Ge(a){return a!==void 0&&Array.isArray(a)&&a.length===2}var y=class fv{constructor(s){this.isRoot=!1;var o,c,h,d,b,_,$;this.type=s.type,typeof s.value=="string"&&(this.value=s.value),this.command=(c=(o=s.command)!=null?o:this.value)!=null?c:"",this.mode=(h=s.mode)!=null?h:"math",s.isFunction&&(this.isFunction=!0),(s.isRoot||this.type==="root")&&(this.isRoot=!0),s.limits&&(this.subsupPlacement=s.limits),this.style=p({},(d=s.style)!=null?d:{}),this.displayContainsHighlight=(b=s.displayContainsHighlight)!=null?b:!1,this.captureSelection=(_=s.captureSelection)!=null?_:!1,this.skipBoundary=($=s.skipBoundary)!=null?$:!1,s.verbatimLatex!==void 0&&s.verbatimLatex!==null&&(this.verbatimLatex=s.verbatimLatex),s.args&&(this.args=s.args),s.body&&(this.body=s.body),this._changeCounter=0}static createBox(s,o,c){var h;if(!o)return null;let d=gf(o),b=[];for(let $ of d){let j=$[0].style,Xt=bf(s,$,{style:{color:j.color,backgroundColor:j.backgroundColor,fontSize:j.fontSize}});Xt&&b.push(Xt)}if(b.length===0)return null;let _=((h=c==null?void 0:c.classes)!=null?h:"").trim();return b.length===1&&!_&&!(c!=null&&c.type)?b[0].wrap(s):new w(b,{classes:_,type:c==null?void 0:c.type}).wrap(s)}static serialize(s,o){return ve.serialize(s,o)}static commonAncestor(s,o){if(s===o||s.parent===o.parent)return s.parent;let c=new WeakSet,{parent:h}=s;for(;h;)c.add(h),h=h.parent;for(h=o.parent;h;){if(c.has(h))return h;h=h.parent}}static fromJson(s){return typeof s=="string"?new fv({type:"mord",value:s,mode:"math"}):new fv(s)}toJson(){if(this._json)return this._json;let s={};if(this.type&&(s.type=this.type),this.mode!=="math"&&(s.mode=this.mode),this.command&&this.command!==this.value&&(s.command=this.command),this.value!==void 0&&(s.value=this.value),this.style&&Object.keys(this.style).length>0&&(s.style=p({},this.style)),this.verbatimLatex!==void 0&&(s.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(s.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(s.explicitSubsupPlacement=!0),this.isFunction&&(s.isFunction=!0),this.displayContainsHighlight&&(s.displayContainsHighlight=!0),this.skipBoundary&&(s.skipBoundary=!0),this.captureSelection&&(s.captureSelection=!0),this.args&&(s.args=yf(this.args)),this._branches)for(let o of Object.keys(this._branches))this._branches[o]&&(s[o]=this._branches[o].filter(c=>c.type!=="first").map(c=>c.toJson()));return s.type==="mord"&&Object.keys(s).length===2&&"value"in s?s.value:(this._json=s,s)}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(s){s&&(this._json=void 0,this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0,this.parent&&(this.parent.isDirty=!0))}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);return o!=null&&o.serialize?o.serialize(this,s):this.body&&this.command?P([W(this.command,this.bodyToLatex(s)),this.supsubToLatex(s)]):this.body?P([this.bodyToLatex(s),this.supsubToLatex(s)]):!this.value||this.value===""?"":this.command}bodyToLatex(s){var o;let c=(o=s.defaultMode)!=null?o:this.mode==="math"?"math":"text";return ve.serialize(this.body,g(p({},s),{defaultMode:c}))}aboveToLatex(s){return ve.serialize(this.above,s)}belowToLatex(s){return ve.serialize(this.below,s)}supsubToLatex(s){let o="";if(s=g(p({},s),{defaultMode:"math"}),this.branch("subscript")!==void 0){let c=ve.serialize(this.subscript,s);c.length===0?o+="_{}":c.length===1?/^[0-9]$/.test(c)?o+=`_${c}`:o+=`_{${c}}`:o+=`_{${c}}`}if(this.branch("superscript")!==void 0){let c=ve.serialize(this.superscript,s);c.length===0?o+="^{}":c.length===1?c===""?o+="^\\prime ":c===""?o+="^\\doubleprime ":/^[0-9]$/.test(c)?o+=`^${c}`:o+=`^{${c}}`:o+=`^{${c}}`}return o}get treeDepth(){let s=1,o=this.parent;for(;o;)o=o.parent,s+=1;return s}get inCaptureSelection(){let s=this;for(;s;){if(s.captureSelection)return!0;s=s.parent}return!1}get parentPrompt(){let s=this.parent;for(;s;){if(s.type==="prompt"&&!s.captureSelection)return s;s=s.parent}return null}branch(s){if(Kr(s)&&this._branches)return this._branches[s]}get branches(){if(!this._branches)return[];let s=[];for(let o of Pr)this._branches[o]&&s.push(o);return s}createBranch(s){return Kr(s),Kr(s)?(this._branches?this._branches[s]||(this._branches[s]=[this.makeFirstAtom(s)]):this._branches={[s]:[this.makeFirstAtom(s)]},this.isDirty=!0,this._branches[s]):[]}get row(){return Ge(this.parentBranch)?this.parentBranch[0]:-1}get col(){return Ge(this.parentBranch)?this.parentBranch[1]:-1}get body(){var s;return(s=this._branches)==null?void 0:s.body}set body(s){this.setChildren(s,"body")}get superscript(){var s;return(s=this._branches)==null?void 0:s.superscript}set superscript(s){this.setChildren(s,"superscript")}get subscript(){var s;return(s=this._branches)==null?void 0:s.subscript}set subscript(s){this.setChildren(s,"subscript")}get above(){var s;return(s=this._branches)==null?void 0:s.above}set above(s){this.setChildren(s,"above")}get below(){var s;return(s=this._branches)==null?void 0:s.below}set below(s){this.setChildren(s,"below")}applyStyle(s,o){this.isDirty=!0,o!=null&&o.unstyledOnly?(s.color&&!this.style.color&&(this.style.color=s.color),s.backgroundColor&&!this.style.backgroundColor&&(this.style.backgroundColor=s.backgroundColor),s.fontFamily&&!this.style.fontFamily&&(this.style.fontFamily=s.fontFamily),s.fontShape&&!this.style.fontShape&&(this.style.fontShape=s.fontShape),s.fontSeries&&!this.style.fontSeries&&(this.style.fontSeries=s.fontSeries),s.fontSize&&!this.style.fontSize&&(this.style.fontSize=s.fontSize),s.variant&&!this.style.variant&&(this.style.variant=s.variant),s.variantStyle&&!this.style.variantStyle&&(this.style.variantStyle=s.variantStyle)):this.style=p(p({},this.style),s),this.style.fontFamily==="none"&&delete this.style.fontFamily,this.style.fontShape==="auto"&&delete this.style.fontShape,this.style.fontSeries==="auto"&&delete this.style.fontSeries,this.style.color==="none"&&(delete this.style.color,delete this.style.verbatimColor),this.style.backgroundColor==="none"&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),this.style.fontSize==="auto"&&delete this.style.fontSize;for(let c of this.children)c.applyStyle(s,o)}getInitialBaseElement(){var s,o,c;return this.hasEmptyBranch("body")?this:((s=this.body)==null||s[0].type,(c=(o=this.body[1])==null?void 0:o.getInitialBaseElement())!=null?c:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return this.type==="leftright"||this.type==="genfrac"||this.type==="subsup"||this.type==="delim"||this.type==="array"||this.type==="surd"?!1:this.getFinalBaseElement().type==="mord"}hasEmptyBranch(s){let o=this.branch(s);return o?(o.length>0,o[0].type,o.length===1):!0}setChildren(s,o){var c;if(!s||(Kr(o),!Kr(o)))return;let h=((c=s[0])==null?void 0:c.type)==="first"?[...s]:[this.makeFirstAtom(o),...s];this._branches?this._branches[o]=h:this._branches={[o]:h};for(let d of s)d.parent=this,d.parentBranch=o;this.isDirty=!0}makeFirstAtom(s){let o=new fv({type:"first",mode:this.mode});return o.parent=this,o.parentBranch=s,o}addChild(s,o){s.type,this.createBranch(o).push(s),this.isDirty=!0,s.parent=this,s.parentBranch=o}addChildBefore(s,o){o.parentBranch;let c=this.createBranch(o.parentBranch);c.splice(c.indexOf(o),0,s),this.isDirty=!0,s.parent=this,s.parentBranch=o.parentBranch}addChildAfter(s,o){o.parentBranch;let c=this.createBranch(o.parentBranch);c.splice(c.indexOf(o)+1,0,s),this.isDirty=!0,s.parent=this,s.parentBranch=o.parentBranch}addChildren(s,o){let c=this.createBranch(o);for(let h of s)h.parent=this,h.parentBranch=o,c.push(h);this.isDirty=!0}addChildrenAfter(s,o){s.length===0||s[0].type,o.parentBranch;let c=this.createBranch(o.parentBranch);c.splice(c.indexOf(o)+1,0,...s),this.isDirty=!0;for(let h of s)h.parent=this,h.parentBranch=o.parentBranch;return s[s.length-1]}removeBranch(s){let o=this.branch(s);if(Kr(s)&&(this._branches[s]=void 0),!o)return[];for(let d of o)d.parent=void 0,d.parentBranch=void 0;o[0].type;let[c,...h]=o;return this.isDirty=!0,h}removeChild(s){if(s.parent,s.type==="first")return;let o=this.branch(s.parentBranch),c=o.indexOf(s);o.splice(c,1),this.isDirty=!0,s.parent=void 0,s.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:s}=this;return s[s.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return this.siblings.length===1}get leftSibling(){this.parent;let s=this.parent.branch(this.parentBranch);return s[s.indexOf(this)-1]}get rightSibling(){this.parent;let s=this.parent.branch(this.parentBranch);return s[s.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:s}=this;return s[s.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let s=[];for(let o of Pr)if(this._branches[o])for(let c of this._branches[o])s.push(...c.children),s.push(c);return this._children=s,s}render(s){if(this.type==="first"&&!s.atomIdsSettings)return null;let o=ne(this.command,this.mode);if(o!=null&&o.render)return o.render(this,s);let c=new B({parent:s},this.style),h=this.createBox(c,{classes:this.parent?"":"ML__base"});return h?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(h=this.attachSupsub(c,{base:h})),h.wrap(c)):null}attachSupsub(s,o){var c;let h=o.base,d=this.superscript,b=this.subscript;if(!d&&!b)return h;let _=null,$=null,j=(c=o.isCharacterBox)!=null?c:this.isCharacterBox(),Xt=0;if(d){let qs=new B({parent:s,mathstyle:"superscript"});_=fv.createBox(qs,d),j||(Xt=h.height-s.metrics.supDrop*qs.scalingFactor)}let Lt=0;if(b){let qs=new B({parent:s,mathstyle:"subscript"});$=fv.createBox(qs,b),j||(Lt=h.depth+s.metrics.subDrop*qs.scalingFactor)}let fr;s.isDisplayStyle?fr=s.metrics.sup1:s.isCramped?fr=s.metrics.sup3:fr=s.metrics.sup2;let Jr=.5/Kt/s.scalingFactor,Js=null;if($&&_){Xt=Math.max(Xt,fr,_.depth+.25*s.metrics.xHeight),Lt=Math.max(Lt,s.metrics.sub2);let qs=s.metrics.defaultRuleThickness;if(Xt-_.depth-($.height-Lt)<4*qs){Lt=4*qs-(Xt-_.depth)+$.height;let js=.8*s.metrics.xHeight-(Xt-_.depth);js>0&&(Xt+=js,Lt-=js)}let zo=this.type==="extensible-symbol"&&h.italic?-h.italic:0;Js=new te({individualShift:[{box:$,shift:Lt,marginLeft:zo},{box:_,shift:-Xt}]})}else $&&!_?(Lt=Math.max(Lt,s.metrics.sub1,$.height-.8*Je),Js=new te({shift:Lt,children:[{box:$,marginRight:Jr,marginLeft:this.isCharacterBox()?-h.italic:0}]})):!$&&_&&(Xt=Math.max(Xt,fr,_.depth+.25*Je),Js=new te({shift:-Xt,children:[{box:_,marginRight:Jr}]}));return new w([h,new w(Js,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:o.type})}attachLimits(s,o){let c=this.superscript?fv.createBox(new B({parent:s,mathstyle:"superscript"},this.style),this.superscript):null,h=this.subscript?fv.createBox(new B({parent:s,mathstyle:"subscript"},this.style),this.subscript):null;return!c&&!h?o.base.wrap(s):D0(s,g(p({},o),{above:c,below:h}))}bind(s,o){if(!o||s.isPhantom||this.value==="")return o;let c=this.parent;for(;c&&!c.captureSelection;)c=c.parent;return c!=null&&c.captureSelection||(this.id||(this.id=s.makeID()),o.atomID=this.id),o}createBox(s,o){var c,h,d,b;let _=(c=this.value)!=null?c:this.body,$=(h=o==null?void 0:o.boxType)!=null?h:Ra(this.type),j=(d=o==null?void 0:o.classes)!=null?d:"";this.mode==="text"&&(j+=" ML__text");let Xt=typeof _=="string"||_===void 0?new w(_??null,{type:$,isSelected:this.isSelected,mode:this.mode,maxFontSize:s.scalingFactor,style:g(p({variant:"normal"},this.style),{fontSize:Math.max(1,s.size+s.mathstyle.sizeDelta)}),letterShapeStyle:s.letterShapeStyle,classes:j}):(b=fv.createBox(s,_,{type:$,classes:j}))!=null?b:new w(null);return s.isTight&&(Xt.isTight=!0),(this.mode!=="math"||this.style.variant==="main")&&(Xt.italic=0),Xt.right=Xt.italic,this.bind(s,Xt),this.caret&&!this.superscript&&!this.subscript&&(Xt.caret=this.caret),Xt}isDigit(){var s;return this.type==="mord"&&this.value?/^[\d,\.]$/.test(this.value):this.type==="group"&&((s=this.body)==null?void 0:s.length)===2?this.body[0].type==="first"&&this.body[1].value===",":!1}asDigit(){var s;return this.type==="mord"&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:this.type==="group"&&((s=this.body)==null?void 0:s.length)===2&&this.body[0].type==="first"&&this.body[1].value===","?".":""}};function gf(a){let s,o=[],c=[];for(let h of a)if(h.type==="first"&&c.push(h),!s&&!h.style)c.push(h);else{let d=h.style;s&&d.color===s.color&&d.backgroundColor===s.backgroundColor&&d.fontSize===s.fontSize?c.push(h):(c.length>0&&o.push(c),c=[h],s=d)}return c.length>0&&o.push(c),o}function bf(a,s,o){var c,h,d,b,_;if(!s||s.length===0)return null;let $=new B({parent:a},o.style),j=!((c=$.atomIdsSettings)!=null&&c.groupNumbers),Xt=[];if(s.length===1){let fr=s[0],Jr=fr.render($);Jr&&(j&&fr.isSelected&&Jr.selected(!0),Xt=[Jr])}else{let fr="",Jr=!0;for(let Js of s){(h=$.atomIdsSettings)!=null&&h.groupNumbers&&fr&&(Jr&&Js.isDigit()||!Jr&&Yl(Js))&&($.atomIdsSettings.overrideID=fr);let qs=Js.render($);$.atomIdsSettings&&($.atomIdsSettings.overrideID=void 0),qs&&((d=$.atomIdsSettings)!=null&&d.groupNumbers&&((Js.isDigit()||Yl(Js))&&(!fr||Jr!==Js.isDigit())&&(Jr=Js.isDigit(),fr=(b=Js.id)!=null?b:""),fr&&(!(Js.isDigit()||Yl(Js))||!Js.hasEmptyBranch("superscript")||!Js.hasEmptyBranch("subscript"))&&(fr="")),j&&Js.isSelected&&qs.selected(!0),Xt.push(qs))}}if(Xt.length===0)return null;let Lt=new w(Xt,g(p({isTight:$.isTight},o),{type:(_=o.type)!=null?_:"lift"}));return Lt.isSelected=Xt.every(fr=>fr.isSelected),Lt.wrap($)}function Yl(a){return a.mode==="text"}function yf(a){return a.map(s=>s===null?"<null>":Array.isArray(s)&&s[0]instanceof y?{atoms:s.map(o=>o.toJson())}:typeof s=="object"&&"group"in s?{group:s.group.map(o=>o.toJson())}:s)}var qe=class Bv extends y{constructor(s,o,c){super({type:"text",command:s,mode:"text",displayContainsHighlight:!0}),this.value=o,this.verbatimLatex=o,this.applyStyle(c)}static fromJson(s){return new Bv(s.command,s.value,s.style)}render(s){let o=this.createBox(s);return this.caret&&(o.caret=this.caret),o}_serialize(s){var o;return(o=this.verbatimLatex)!=null?o:cl("text",this.value.codePointAt(0))}};function O0(a,s){if(a.direction===s.direction){let o=a.ranges.length;if(s.ranges.length===o){let c=0;for(;c<o&&xf(a.ranges[c],s.ranges[c])==="equal";)c++;return c===o?"equal":"different"}}return"different"}function xf(a,s){return a[0]===s[0]&&a[1]===s[1]?"equal":"different"}function de(a){let s=1/0,o=-1/0;for(let c of a.ranges)s=Math.min(s,c[0],c[1]),o=Math.max(o,c[0],c[1]);return[s,o]}function Rt(a){return typeof a=="number"&&!Number.isNaN(a)}function si(a){return Array.isArray(a)&&a.length===2}function Xi(a){return a!=null&&typeof a=="object"&&"ranges"in a&&Array.isArray(a.ranges)}function B0(a,s){let o=a.at(s),c;if(o){c=o.mode;let h=o.parent;for(;!c&&h;)h&&(c=h.mode),h=h.parent}return c}function vf(a,s){if(!s)return"";if(typeof s=="string")return s;if(!a||s.after===void 0)return s.value;let o=!1,c=!1,h=!1,d=!1,b=!1,_=!1,$=!1,j=!1,Xt=!1,Lt=!1,fr=!1,Jr=!1,Js=!1,qs=!1,zo=!1,js=a[0],eu=0;for(;js!=null&&js.type&&/^(subsup|placeholder)$/.test(js.type);)eu+=1,js=a[eu];return o=!js||js.type==="first",js&&(qs=js.mode==="text",c=!qs&&js.type==="mord"&&$o.test(js.value),h=!qs&&js.type==="mord"&&/\d+$/.test(js.value),d=!qs&&js.isFunction,b=js.type==="genfrac",_=js.type==="surd",$=js.type==="mbin",j=js.type==="mrel",Xt=js.type==="mop"||js.type==="operator"||js.type==="extensible-symbol",Lt=js.type==="mpunct"||js.type==="minner",fr=js.type==="array",Jr=js.type==="mopen",Js=js.type==="mclose"||js.type==="leftright",zo=js.type==="space"),s.after.includes("nothing")&&o||s.after.includes("letter")&&c||s.after.includes("digit")&&h||s.after.includes("function")&&d||s.after.includes("frac")&&b||s.after.includes("surd")&&_||s.after.includes("binop")&&$||s.after.includes("relop")&&j||s.after.includes("operator")&&Xt||s.after.includes("punct")&&Lt||s.after.includes("array")&&fr||s.after.includes("openfence")&&Jr||s.after.includes("closefence")&&Js||s.after.includes("text")&&qs||s.after.includes("space")&&zo?s.value:""}function Yn(a,s,o){return o?vf(a,o[s]):""}var Fa={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","":"\\differentialD","":"\\differentialD",sin:"\\sin",cos:"\\cos",tan:"\\tan",arccos:"\\arccos",arcsin:"\\arcsin",arctan:"\\arctan",arctg:"\\operatorname{arctg}",arcsec:"\\operatorname{arcsec}",arccsc:"\\operatorname{arccsc}",arsinh:"\\operatorname{arsinh}",arccosh:"\\operatorname{arccosh}",arcosh:"\\operatorname{arcosh}",artanh:"\\operatorname{artanh}",arctanh:"\\operatorname{arctanh}",arcsech:"\\operatorname{arcsech}",arccsch:"\\operatorname{arccsch}",ch:"\\operatorname{ch}",cosec:"\\operatorname{cosec}",cosh:"\\cosh",cot:"\\cot",cotg:"\\operatorname{cotg}",coth:"\\coth",csc:"\\csc",ctg:"\\operatorname{ctg}",cth:"\\operatorname{cth}",sec:"\\sec",sech:"\\operatorname{sech}",sinh:"\\sinh",sh:"\\operatorname{sh}",tanh:"\\tanh",tg:"\\operatorname{tg}",th:"\\operatorname{th}",arg:"\\arg",lg:"\\lg",lb:"\\operatorname{lb}",log:"\\log_{#?}",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?\\to#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\mathbb{Z}",QQ:"\\mathbb{Q}",RR:"\\mathbb{R}",CC:"\\mathbb{C}",xx:"\\times","+-":"\\pm","":"\\ne","!=":"\\ne","":"\\ge",">=":"\\ge","":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","":"\\approx","?=":"\\questeq","":"\\div","":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\bmod{#?}","(mod":"\\pmod{#?}",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\gcd",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},ft:{after:"nothing+digit+operator",value:"\\operatorname{ft}"},inch:{after:"nothing+digit+operator",value:"\\operatorname{inch}"},mi:{after:"nothing+digit+operator",value:"\\operatorname{mi}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\iff","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",times:"\\times",of:"\\circ",infinity:"\\infty",defint:"\\int_{#?}^{#?}",approaches:"\\to",ceil:"\\left\\lceil#?\\right\\rceil",floor:"\\left\\lfloor#?\\right\\rfloor",union:"\\cup",asterisk:"\\ast",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function ir(a,s){var o;let c=(o=s==null?void 0:s.format)!=null?o:"auto";return c==="auto"&&([c,a]=_f(a)),c==="ascii-math"?(a=a.replace(/\u2061/gu,""),a=a.replace(/\u3016/gu,"{"),a=a.replace(/\u3017/gu,"}"),a=a.replace(/([^\\])sinx/g,"$1\\sin x"),a=a.replace(/([^\\])cosx/g,"$1\\cos x "),a=a.replace(/\u2013/g,"-"),["ascii-math",He(a,{inlineShortcuts:s==null?void 0:s.inlineShortcuts})]):["latex",a]}function He(a,s){var o;if(a=a.trim(),!a)return"";let c=(o=s.inlineShortcuts)!=null?o:Fa;if(a.startsWith("^")||a.startsWith("_")){let{match:_,rest:$}=li(a.slice(1),{inlineShortcuts:c,noWrap:!0});return`${a[0]}{${_}}${He($,s)}`}let h=a.match(/^(sqrt|\u221A)(.*)/);if(h){let{match:_,rest:$}=li(h[2],{inlineShortcuts:c,noWrap:!0});return`\\sqrt{${_??"\\placeholder{}"}}${He($,s)}`}if(h=a.match(/^(\\cbrt|\u221B)(.*)/),h){let{match:_,rest:$}=li(h[2],{inlineShortcuts:c,noWrap:!0});return`\\sqrt[3]{${_??"\\placeholder{}"}}${He($,s)}`}if(h=a.match(/^abs(.*)/),h){let{match:_,rest:$}=li(h[1],{inlineShortcuts:c,noWrap:!0});return`\\left|${_??"\\placeholder{}"}\\right|${He($,s)}`}if(h=a.match(/^["](.*?)["](.*)/),h)return`\\text{${h[1]}}${He(h[2],s)}`;if(h=a.match(/^([^a-zA-Z0-9\(\{\[\_\^\\\s"]+)(.*)/),h)return`${P0(h[1],c)}${He(h[2],s)}`;if(/^([fgh])[^a-zA-Z]/.test(a)){let{rest:_,match:$}=li(a.slice(1),{inlineShortcuts:c,noWrap:!0}),j="";return a[1]==="("?j=`${a[0]}\\left(${$}\\right)`:j=a[0]+$,j+He(_,s)}if(h=a.match(/^([a-zA-Z]+)(.*)/),h)return P0(h[1],c)+He(h[2],s);let{match:d,rest:b}=li(a,{inlineShortcuts:c,noWrap:!0});if(d&&b[0]==="/"){let _=li(b.slice(1),{inlineShortcuts:c,noWrap:!0});if(_.match)return`\\frac{${d}}{${_.match}}${He(_.rest,s)}`}else return a.startsWith("(")?"\\left("+d+"\\right)"+He(b,s):d+He(b,s);return h=a.match(/^(\s+)(.*)$/),h?" "+He(h[2],s):a}var K0={"[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace"};function li(a,s){var o,c;let h="";a=a.trim();let d=a,b=a.charAt(0),_={"(":")","{":"}","[":"]"}[b];if(_){let $=1,j=1;for(;j<a.length&&$>0;)a[j]===b&&$++,a[j]===_&&$--,j++;if($===0){let Xt=He(a.substring(1,j-1),s);s.noWrap&&b==="("?h=Xt:h=`\\left${(o=K0[b])!=null?o:b}${Xt}\\right${(c=K0[_])!=null?c:_}`,d=a.slice(Math.max(0,j))}else h=a.substring(1,j),d=""}else{let $=a.match(/^([a-zA-Z]+)/);if($){let j=Yn(null,a,s.inlineShortcuts);if(j)return j=j.replace("_{#?}",""),j=j.replace("^{#?}",""),{match:j,rest:a.slice(j.length)}}if($=a.match(/^([a-zA-Z])/),$)return{match:$[1],rest:a.slice(1)};if($=a.match(/^(-)?\d+(\.\d*)?/),$)return{match:$[0],rest:a.slice($[0].length)};/^\\(left|right)/.test(a)||($=a.match(/^(\\[a-zA-Z]+)/),$&&(d=a.slice($[1].length),h=$[1]))}return{match:h,rest:d}}function P0(a,s){let o=Yn(null,a,s);return o?(o=o.replace("_{#?}",""),o=o.replace("^{#?}",""),o+=" "):o=a,o}var Ql=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function $a(a){let s=a.trim();for(let o of Ql)if(s.startsWith(o[0])&&s.endsWith(o[1]))return[!0,s.substring(o[0].length,s.length-o[1].length)];return[!1,a]}function _f(a){if(a=a.trim(),a.length<=1)return["latex",a];let s;return[s,a]=$a(a),s?["latex",a]:a.startsWith("`")&&a.endsWith("`")?(a=a.substring(1,a.length-1),["ascii-math",a]):a.includes("\\")?["latex",a]:/\$.+\$/.test(a)?["latex",`\\text{${a}}`]:[void 0,a]}var Mf="$$",wf="$$",R0=(a,s,o)=>(Ql.some(c=>s.startsWith(c[0])&&s.endsWith(c[1]))||(s=`${Mf} ${s} ${wf}`),s),Zi=class kv{constructor(s){kv._modes[s]=this}static onPaste(s,o,c){var h;if(!o.contentEditable&&o.userSelect==="none")return o.model.announce("plonk"),!1;if(typeof c=="string"){let b=new DataTransfer;b.setData("text/plain",c),c=b}let d=new ClipboardEvent("paste",{clipboardData:c,cancelable:!0});return(h=o.host)!=null&&h.dispatchEvent(d)?kv._modes[s].onPaste(o,c):!1}static copyToClipboard(s,o){if(!s.contentEditable&&s.userSelect==="none"){s.model.announce("plonk");return}let c=s.model,h=c.selectionIsCollapsed?[0,c.lastOffset]:de(c.selection),d=c.getValue(h,o);navigator.clipboard.writeText(d).then(()=>{},()=>s.model.announce("plonk"))}static onCopy(s,o){var c;if(!o.clipboardData)return;if(!s.contentEditable&&s.userSelect==="none"){s.model.announce("plonk");return}let h=s.model,d=h.selectionIsCollapsed?[0,h.lastOffset]:de(h.selection),b=h.getAtoms(d);if(b.every(_=>_.mode==="text"||!_.mode))o.clipboardData.setData("text/plain",b.filter(_=>_ instanceof qe).map(_=>_.value).join(""));else if(b.every(_=>_.mode==="latex"))o.clipboardData.setData("text/plain",h.getAtoms(d,{includeChildren:!0}).map(_=>{var $;return($=_.value)!=null?$:""}).join(""));else{let _;b.length===1&&b[0].verbatimLatex!==void 0?_=b[0].verbatimLatex:_=h.getValue(d,"latex-expanded"),o.clipboardData.setData("application/x-latex",_);try{o.clipboardData.setData("text/plain",s.options.onExport(s,_,d))}catch{}if(b.length===1){let $=b[0];($.type==="root"||$.type==="group")&&(b=$.body.filter(j=>j.type!=="first"))}try{o.clipboardData.setData("application/json+mathlive",JSON.stringify(b.map($=>$.toJson())))}catch{}if((c=window[Symbol.for("io.cortexjs.compute-engine")])!=null&&c.ComputeEngine){let $=globalThis.MathfieldElement.computeEngine;if($)try{let j=$.jsonSerializationOptions;$.jsonSerializationOptions={metadata:["latex"]};let Xt=$.parse(h.getValue(d,"latex-unstyled"));$.jsonSerializationOptions=j;let Lt=JSON.stringify(Xt.json);Lt&&o.clipboardData.setData("application/json",Lt)}catch{}}}o.preventDefault()}static insert(s,o,c={}){var h;let d=c.mode==="auto"?s.mode:(h=c.mode)!=null?h:s.mode;return kv._modes[d].insert(s,o,c)}onPaste(s,o){return!1}insert(s,o,c){return!1}};Zi._modes={};var q=Zi,I0=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"shift+[Backspace]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deletePreviousWord"},{key:"alt+[Delete]",command:"deleteNextWord"},{key:"ctrl+[Backspace]",command:"deleteToGroupStart"},{key:"ctrl+[Delete]",command:"deleteToGroupEnd"},{key:"ctrl+shift+[Backspace]",command:"deleteToGroupEnd"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:["complete","accept-all"]},{key:"[Enter]",ifMode:"latex",command:["complete","accept-all"]},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+shift+v",ifMode:"math",command:["insert","\\sqrt[#0]{#1}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text"]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math"]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"shift+[Delete]",ifMode:"math",command:"removeRow"},{key:"shift+alt+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}],z0={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function it(a){var s;return((s=a.element)==null?void 0:s.mathfield)===a}function Sf(a){var s,o;return(o=(s=a.querySelector(".ML__caret"))!=null?s:a.querySelector(".ML__text-caret"))!=null?o:a.querySelector(".ML__latex-caret")}function Yi(a){let s=Sf(a);if(!s)return null;let o=s.getBoundingClientRect();return{x:o.right,y:o.bottom,height:o.height}}function kf(a){var s;if(!a.parent)return"root";let o=(s=a.parent.id)!=null?s:"";return o+=typeof a.parentBranch=="string"?"-"+a.parentBranch:`-${a.parentBranch[0]}/${a.parentBranch[0]}`,o}function tc(a,s,o){if(!s)return null;let c=a.field.getBoundingClientRect(),h=s.right-s.left,d=s.bottom-s.top,b=Math.ceil(s.left-c.left+a.field.scrollLeft*o),_=Math.ceil(s.top-c.top);return{left:b,right:b+h,top:_,bottom:_+d}}function ec(a){let s=a,o=s.getBoundingClientRect();for(;o.bottom===o.top&&s.parentElement instanceof Element&&(s=s.parentElement,o=s.getBoundingClientRect(),o.bottom===o.top););let c=getComputedStyle(s),h=parseInt(c.marginRight),d=o.right-o.left,b=o.bottom-o.top;if(d===0||!Number.isFinite(d)){let $=parseFloat(c.width);Number.isFinite($)&&$>0?d=$:s instanceof HTMLElement&&s.offsetWidth>0&&(d=s.offsetWidth)}if(b===0||!Number.isFinite(b)){let $=parseFloat(c.height);Number.isFinite($)&&$>0?b=$:s instanceof HTMLElement&&s.offsetHeight>0&&(b=s.offsetHeight)}let _={top:o.top-1,bottom:o.top-1+b,left:o.left,right:o.left+d-1+h};if(a.children.length===0||a.tagName.toUpperCase()==="SVG")return _;for(let $ of a.children)if($.nodeType===1&&"atomId"in $.dataset&&!$.classList.contains("ML__pstrut")){let j=ec($);_.left=Math.min(_.left,j.left),_.right=Math.max(_.right,j.right),_.top=Math.min(_.top,j.top),_.bottom=Math.max(_.bottom,j.bottom)}return _}function nr(a,s){var o,c;if(!s.id)return null;let h=(c=(o=a.atomBoundsCache)==null?void 0:o.get(s.id))!=null?c:null;if(h!==null)return h;let d=a.field.querySelectorAll(`[data-atom-id="${s.id}"]`),b=Array.from(d);if(s.type==="prompt"){for(let _ of b)if(_.classList.contains("ML__prompt-atom")){let $=_.querySelector(".ML__prompt");if($){let j=ec($);h?(h.left=Math.min(h.left,j.left),h.right=Math.max(h.right,j.right),h.top=Math.min(h.top,j.top),h.bottom=Math.max(h.bottom,j.bottom)):h=j}}}for(let _ of b){let $=ec(_);h?(h.left=Math.min(h.left,$.left),h.right=Math.max(h.right,$.right),h.top=Math.min(h.top,$.top),h.bottom=Math.max(h.bottom,$.bottom)):h=$}return a.atomBoundsCache&&(h?a.atomBoundsCache.set(s.id,h):a.atomBoundsCache.delete(s.id)),h??null}function N0(a,s){let[o,c]=s,h=null;for(let d=o;d<=c;d++){let b=nr(a,a.model.at(d));b&&(h?(h.top=Math.min(h.top,b.top),h.bottom=Math.max(h.bottom,b.bottom),h.left=Math.min(h.left,b.left),h.right=Math.max(h.right,b.right)):h=b)}return h??{top:0,bottom:0,left:0,right:0}}function Lf(a,s,o){let c=new Map,h=a.field,d=h.offsetWidth,b=Math.floor(h.getBoundingClientRect().width)/d;b=isNaN(b)?1:b;for(let _ of a.model.getAtoms(s,{includeChildren:!0})){if(o!=null&&o.excludeAtomsWithBackground&&_.style.backgroundColor)continue;let $=tc(a,nr(a,_),b);if($){let j=kf(_);if(c.has(j)){let Xt=c.get(j);c.set(j,{left:Math.min(Xt.left,$.left),right:Math.max(Xt.right,$.right),top:Math.min(Xt.top,$.top),bottom:Math.max(Xt.bottom,$.bottom)})}else c.set(j,$)}}return[...c.values()]}function Va(a,s){return a.model.selection.ranges.reduce((o,c)=>o.concat(...Lf(a,c,s)),[])}function Qi(a,s){return a==="*"||s==="none"?!0:s==="same-origin"?!window.origin||a===window.origin:typeof s=="function"?s(a):!1}function rc(a){let s=0,o=0,c=a.offsetWidth,h=a.offsetHeight;for(;a instanceof HTMLElement;)s+=a.offsetTop,o+=a.offsetLeft,a=a.offsetParent;return new DOMRect(o,s,c,h)}function qa(a,s){if(!a)return;let o=a.model.at(s);if(!o)return;let c={},h=nr(a,o);h&&(c.bounds=new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)),c.depth=o.treeDepth-2,c.style=o.style;let d=o;for(;d;){if(d.command==="\\htmlData"&&d.args&&typeof d.args[0]=="string"){let b=d.args[0].split(",");for(let _ of b){let $=_.match(/([^=]+)=(.+$)/);if($){let j=$[1].trim().replace(/ /g,"-");j&&(c.data||(c.data={}),c.data[j]=$[2])}else{let j=_.trim().replace(/ /g,"-");j&&(c.data||(c.data={}),c.data[j]=void 0)}}}(d.command==="\\htmlId"||d.command==="\\cssId")&&!c.id&&d.args&&typeof d.args[0]=="string"&&(c.id=d.args[0]),d=d.parent}return(o.mode==="math"||o.mode==="text")&&(c.latex=y.serialize([o],{defaultMode:"math"})),c}function F0(a,s){let o=a.model.at(s);for(;o;){if(o.command==="\\href"){let c=o.args[0];if(typeof c=="string")return c}o=o.parent}return""}var $0=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
:host {
  display: block;
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  padding: 4px;
  box-sizing: border-box;
  /* This attribute is necessary to work around a Firefox issue where
  where clicking multiple times on the border leads to a focused mathfield that cannot be edited until focus is lost and regained (also fixes the multiple cursor issue on firefox that can occur with the same sequence of events).
  */
  pointer-events: auto;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_contains-highlight-color: var(--contains-highlight-color, var(--_caret-color));
  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
  --_tooltip-border: var(--tooltip-border, 1px solid transparent);
  --_tooltip-border-radius: var(--tooltip-border-radius, 8px);
  --_tooltip-background-color: var(--tooltip-background-color, #616161);
  --_tooltip-color: var(--tooltip-color, #fff);
  --_tooltip-box-shadow: var(--tooltip-box-shadow, 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2));
}
@media (prefers-color-scheme: dark) {
  .ML__container {
    --_contains-highlight-color: var(--contains-highlight-color, hsl(var(--_hue), 85%, 75%));
    --_caret-color: var(--caret-color, hsl(var(--_hue), 65%, 55%));
    --_selection-color: var(--selection-color, #fff);
    --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 65%, 55%));
    --_text-highlight-background-color: var(--text-highlight-background-color, hsla(var(--_hue), 40%, 50%, 0.6));
    --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 5%, 34%));
    --_latex-color: var(--primary, hsl(var(--_hue), 40%, 50%));
    --_composition-background-color: #69571c;
    --_composition-text-color: white;
    --_placeholder-color: hsl(var(--_hue), 60%, 69%);
    --_smart-fence-color: var(--smart-fence-color, #fff);
    --_smart-fence-opacity: var(--smart-fence-opacity, 0.7);
  }
}
@media (forced-colors: active) {
  .ML__container {
    --_caret-color: white;
    --_selection-color: white;
    --_smart-fence-color: white;
    --_latex-color: white;
    --_correct-color: white;
    --_incorrect-color: white;
    --_composition-text-color: white;
  }
}
@media (hover: none) and (pointer: coarse) {
  :host(:not(:focus)) .ML__container {
    pointer-events: none;
  }
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 3px 2px 1px;
  width: 100%;
  /* Encourage the browser to use the GPU to render the field.
     Weirdly, this is required for prompts to be rendered correctly. 
   */
  isolation: isolate;
  text-shadow: var(--text-shadow);
}
.ML__content .ML__latex {
  text-shadow: var(--text-shadow);
}
.ML__content .ML__sqrt-line {
  box-shadow: var(--text-shadow);
}
.ML__content .ML__frac-line {
  box-shadow: var(--text-shadow);
}
/* Container for the virtual keyboard toggle and menu toggle buttons */
.ML__toggles {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 0;
  align-self: flex-start;
}
/* Vertical layout modifier */
.ML__toggles--vertical {
  flex-direction: column;
  align-items: center;
  gap: 4px;
}
.ML__toggles--vertical .ML__virtual-keyboard-toggle,
.ML__toggles--vertical .ML__menu-toggle {
  margin-right: 0;
}
.ML__virtual-keyboard-toggle,
.ML__menu-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover,
.ML__menu-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span,
.ML__menu-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
@media (pointer: coarse) {
  .ML__virtual-keyboard-toggle,
  .ML__menu-toggle {
    min-width: 60px;
    min-height: 60px;
  }
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  pointer-events: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
  line-height: 0.5;
  /* On Chromium, if this is 0, no keyboard events are received */
  /* Preferred over clip */
  clip-path: inset(50%);
}
[part='placeholder'] {
  color: var(--neutral-400);
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret {
  display: inline-block;
}
.ML__caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret::after {
  content: '';
  visibility: hidden;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_latex-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.019em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__latex-caret::after,
.ML__focused .ML__text-caret::after,
.ML__focused .ML__caret::after {
  visibility: visible;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__focused .ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
.ML__empty-line-anchor::after {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 8px;
  height: 20px;
  border-radius: 2px;
  background: transparent;
  opacity: 0;
  pointer-events: none;
}
.ML__focused .ML__empty-line-anchor.ML__selected::after {
  background: var(--_selection-background-color);
  opacity: 1;
}
.ML__selection {
  box-sizing: border-box;
  background: transparent;
}
:host(:focus) .ML__selection {
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_contains-highlight-color);
}
.ML__contains-highlight {
  box-sizing: border-box;
  background: transparent;
}
.ML__focused .ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
}
.ML__raw-latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.8em;
  letter-spacing: -0.05em;
  color: var(--_latex-color);
}
.ML__suggestion {
  color: var(--neutral-500);
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-tooltip' to automatically show a
   tooltip over a element on hover.
*/
[data-tooltip] {
  position: relative;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  display: block;
  z-index: 2;
  pointer-events: none;
  right: auto;
  top: calc(-100% - 4px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 4px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 13px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
}
@media only screen and (max-width: 767px) {
  [data-tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
menu [data-tooltip]::after {
  left: 100%;
  top: 0%;
}
menu .ML__base {
  cursor: default;
}
/** Don't display if we're tracking, i.e. have the pointer down */
.tracking [data-tooltip]:hover::after {
  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */
  visibility: hidden;
}
/** But do display if tracking and inside a menu */
.tracking menu li[data-tooltip]:hover::after,
[data-tooltip]:hover::after {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
  transition-property: opacity, scale;
  transition-duration: 0.15s;
  transition-delay: 1s;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focused .ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
.variant-submenu {
  display: flex;
  flex-direction: column;
  padding: 8px;
}
.variant-submenu [part='menu-item'].ML__xl {
  font-size: 2rem;
  text-align: center;
  margin: 0;
}
.ML__center-menu .label {
  text-align: center;
}
.insert-matrix-submenu {
  /* Grid doesn't work on Safari */
  --_menu-item-size: 25px;
  width: calc(5 * var(--_menu-item-size));
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  align-content: center;
  justify-content: center;
}
.insert-matrix-submenu [part='menu-item'] {
  width: var(--_menu-item-size);
  height: var(--_menu-item-size);
  font-size: 21px;
  border: none;
  border-radius: 0;
  line-height: 21px;
  text-align: center;
  padding: 0;
  margin: 0;
}
.border-submenu [part='menu-item'] {
  font-size: 2rem;
  line-height: 1.2;
  text-align: center;
}
.swatches-submenu {
  --_swatch-size: 2rem;
  --_columns: 4;
  display: flex;
  flex-flow: wrap;
  padding: 8px;
  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);
  box-sizing: border-box;
}
.menu-swatch {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: fit-content;
  height: fit-content;
  margin: 2px;
  padding: 0;
  background: var(--neutral-200);
}
.menu-swatch > .label {
  padding: 0;
  margin: 0;
  line-height: 0;
}
.menu-swatch > .label > span {
  display: inline-block;
  margin: 6px;
  min-width: var(--_swatch-size);
  min-height: var(--_swatch-size);
  border-radius: 50%;
}
.menu-swatch.active {
  background: var(--neutral-100);
  scale: 1.4;
}
.menu-swatch.active > .label > span {
  border-radius: 2px;
}
.menu-swatch .ui-checkmark,
.menu-swatch .ui-mixedmark {
  position: absolute;
  margin: 0;
  padding: 0;
  color: white;
}
.menu-swatch.dark-contrast .ui-checkmark,
.menu-swatch.dark-contrast .ui-mixedmark {
  color: #000;
}
.ML__insert-template {
  font-size: 1em;
}
.ML__insert-label {
  opacity: 0.5;
  margin-left: 2ex;
}
`,V0=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__left {
  text-align: left;
}
.ML__right {
  text-align: right;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__frac-line {
    min-height: 0px;
  }
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__sqrt-line:after {
    background: white !important;
  }
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body {
  font-family: KaTeX_Main;
}
.ML__accent-combining-char {
  position: relative;
  left: 0.24em;
}
/** The markup for a LaTeX formula, either in an editable mathfield or 
    in a static display.
*/
.ML__latex {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: inherit;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
  forced-color-adjust: preserve-parent-color;
}
.ML__latex .style-wrap {
  position: relative;
}
.ML__latex .ML__mfrac {
  display: inline-block;
}
.ML__latex .ML__left-right {
  display: inline-block;
}
.ML__latex .ML__vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__latex .ML__vlist-r {
  display: table-row;
}
.ML__latex .ML__vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__latex .ML__vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__latex .ML__vlist > span > span {
  display: inline-block;
}
.ML__latex .ML__vlist > span > .ML__pstrut {
  overflow: hidden;
  width: 0;
}
.ML__latex .ML__vlist-t2 {
  margin-right: -2px;
}
.ML__latex .ML__vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__latex .ML__msubsup {
  text-align: left;
}
.ML__latex .ML__negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__latex .ML__thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__latex .ML__mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__latex .ML__thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__latex .ML__enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__latex .ML__quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__latex .ML__qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__latex .ML__llap,
.ML__latex .ML__rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner,
.ML__latex .ML__rlap > .ML__inner {
  position: absolute;
}
.ML__latex .ML__llap > .ML__fix,
.ML__latex .ML__rlap > .ML__fix {
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner {
  right: 0;
}
.ML__latex .ML__rlap > .ML__inner {
  left: 0;
}
.ML__latex .ML__rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__latex .overline .overline-line,
.ML__latex .underline .underline-line {
  width: 100%;
}
.ML__latex .overline .overline-line:before,
.ML__latex .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__latex .overline .overline-line:after,
.ML__latex .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__latex .ML__stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__stretchy:before,
.ML__latex .ML__stretchy:after {
  content: '';
}
.ML__latex .ML__stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__latex .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__latex .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__nulldelimiter {
  display: inline-block;
}
.ML__latex .ML__op-group {
  display: inline-block;
}
.ML__latex .ML__op-symbol {
  position: relative;
}
.ML__latex .ML__op-symbol.ML__small-op {
  font-family: KaTeX_Size1;
}
.ML__latex .ML__op-symbol.ML__large-op {
  font-family: KaTeX_Size2;
}
.ML__latex:has(.ML__center_environment),
.ML__latex:has(.ML__multiline_environment),
.ML__latex:has(.ML__align_environment),
.ML__latex:has(.ML__eqnarray_environment),
.ML__latex:has(.ML__gather_environment) {
  width: 100%;
}
.ML__latex .ML__multiline_environment {
  display: inline-flex;
  width: 100%;
}
.ML__latex .ML__center_environment {
  display: inline-flex;
  width: 100%;
  justify-content: center;
}
.ML__latex .ML__align_environment,
.ML__latex .ML__eqnarray_environment,
.ML__latex .ML__gather_environment {
  display: inline-block;
}
.ML__latex .ML__mtable .ML__vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__latex .ML__mtable .ML__arraycolsep {
  display: inline-block;
}
.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {
  text-align: left;
}
.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {
  text-align: right;
}
[data-href] {
  cursor: pointer;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border: var(--_tooltip-border);
  border-radius: var(--_tooltip-border-radius);
  background: var(--_tooltip-background-color);
  --_selection-color: var(--_tooltip-color);
  color: var(--_tooltip-color);
  box-shadow: var(--_tooltip-box-shadow);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
.ML__bg {
  background-color: transparent !important;
}
.ML__bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--bg-color);
  z-index: -1;
  box-sizing: border-box;
}
`,q0=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #aaa);
  --_background: var(--environment-panel-background, #fff);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,H0=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  --_suggestion-zindex: var(--suggestion-zindex, 100);
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: var(--_suggestion-zindex);
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,W0=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,U0=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, #f0f0f0);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));
  --_keycap-glyph-size: var(--keycap-glyph-size, 20px);
  --_keycap-glyph-size-lg: var(--keycap-glyph-size-lg, 24px);
  --_keycap-glyph-size-xl: var(--keycap-glyph-size-xl, 50px);
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow: visible;
  touch-action: none;
}
.MLK__rows > .MLK__row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
}
.MLK__rows > .MLK__row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .MLK__row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .MLK__row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .MLK__row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .MLK__row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .MLK__row .w0 {
  width: 0;
}
.MLK__rows > .MLK__row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .MLK__row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .MLK__row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .MLK__row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .MLK__row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .MLK__row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .MLK__row .shift,
.MLK__rows > .MLK__row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .MLK__row .shift:hover,
.MLK__rows > .MLK__row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .MLK__row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .shift.selected,
.MLK__rows > .MLK__row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .MLK__row .shift.selected.is-pressed,
.MLK__rows > .MLK__row .action.selected.is-pressed,
.MLK__rows > .MLK__row .shift.selected.is-active,
.MLK__rows > .MLK__row .action.selected.is-active {
  color: white;
}
.MLK__rows > .MLK__row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .MLK__row .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
/** A regular keycap
 * Use the :where() pseudo-class to give it a very low specifity, 
 * so that it can be overriden by custom style.
 */
:where(.MLK__rows > .MLK__row div) {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
:where(.MLK__rows > .MLK__row div):hover {
  overflow: visible;
  background: var(--_keycap-background-hover);
  color: var(--_keycap-text-hover);
}
:where(.MLK__rows > .MLK__row div) .ML__latex {
  pointer-events: none;
  touch-action: none;
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph {
  margin: 8px 0;
  width: var(--_keycap-glyph-size);
  height: var(--_keycap-glyph-size);
  min-height: var(--_keycap-glyph-size);
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph-lg {
  margin: 8px 0;
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
:where(.MLK__rows > .MLK__row div).MLK__tex-math {
  font-size: 25px;
}
:where(.MLK__rows > .MLK__row div).is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active aside,
:where(.MLK__rows > .MLK__row div).action.is-active aside,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed aside,
:where(.MLK__rows > .MLK__row div).action.is-pressed aside {
  display: none;
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-pressed .MLK__shift {
  display: none;
}
:where(.MLK__rows > .MLK__row div).shift.is-pressed,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
:where(.MLK__rows > .MLK__row div).shift.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div) small {
  color: var(--_keycap-secondary-text);
}
:where(.MLK__rows > .MLK__row div) aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.ML__keyboard [data-tooltip] {
  position: relative;
}
.ML__keyboard [data-tooltip]::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.ML__keyboard [data-tooltip]:hover {
  position: relative;
}
.ML__keyboard [data-tooltip]:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__latex {
  pointer-events: none;
}
.MLK__variant-panel .item:hover {
  color: var(--_keycap-text-hover);
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-xl);
  height: var(--_keycap-glyph-size-xl);
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
  width: 100%;
  text-align: center;
  text-wrap: wrap;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: var(--keycap-height, 42px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: var(--keycap-height, 52px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .MLK__row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .MLK__row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: var(--keycap-height, 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: var(--keycap-height, 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`,j0=`:host {
  --primary-color: #5898ff;
  --primary-color-dimmed: #c0c0f0;
  --primary-color-dark: var(--blue-500);
  --primary-color-light: var(--blue-100);
  --primary-color-reverse: #ffffff;
  --secondary-color: #ff8a65;
  --secondary-color-dimmed: #f0d5c5;
  --secondary-color-dark: var(--orange-500);
  --secondary-color-light: var(--orange-100);
  --secondary-color-reverse: #ffffff;
  --link-color: #5898ff;
  --link-color-dimmed: #c5c5c5;
  --link-color-dark: #121212;
  --link-color-light: #e2e2e2;
  --link-color-reverse: #ffffff;
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;
  --red-25: #fff8f7;
  --red-50: #fff1ef;
  --red-100: #ffeae6;
  --red-200: #ffcac1;
  --red-300: #ffa495;
  --red-400: #ff7865;
  --red-500: #f21c0d;
  --red-600: #e50018;
  --red-700: #d30024;
  --red-800: #bd002c;
  --red-900: #a1002f;
  --orange-25: #fffbf8;
  --orange-50: #fff7f1;
  --orange-100: #fff3ea;
  --orange-200: #ffe1c9;
  --orange-300: #ffcca2;
  --orange-400: #ffb677;
  --orange-500: #fe9310;
  --orange-600: #f58700;
  --orange-700: #ea7c00;
  --orange-800: #dc6d00;
  --orange-900: #ca5b00;
  --brown-25: #fff8ef;
  --brown-50: #fff1df;
  --brown-100: #ffe9ce;
  --brown-200: #ebcca6;
  --brown-300: #cdaf8a;
  --brown-400: #af936f;
  --brown-500: #856a47;
  --brown-600: #7f5e34;
  --brown-700: #78511f;
  --brown-800: #6e4200;
  --brown-900: #593200;
  --yellow-25: #fffdf9;
  --yellow-50: #fffcf2;
  --yellow-100: #fffaec;
  --yellow-200: #fff2ce;
  --yellow-300: #ffe8ab;
  --yellow-400: #ffdf85;
  --yellow-500: #ffcf33;
  --yellow-600: #f1c000;
  --yellow-700: #dfb200;
  --yellow-800: #c9a000;
  --yellow-900: #ad8a00;
  --lime-25: #f4ffee;
  --lime-50: #e9ffdd;
  --lime-100: #ddffca;
  --lime-200: #a8fb6f;
  --lime-300: #94e659;
  --lime-400: #80d142;
  --lime-500: #63b215;
  --lime-600: #45a000;
  --lime-700: #268e00;
  --lime-800: #007417;
  --lime-900: #005321;
  --green-25: #f5fff5;
  --green-50: #ebffea;
  --green-100: #e0ffdf;
  --green-200: #a7ffa7;
  --green-300: #5afa65;
  --green-400: #45e953;
  --green-500: #17cf36;
  --green-600: #00b944;
  --green-700: #00a34a;
  --green-800: #008749;
  --green-900: #00653e;
  --teal-25: #f3ffff;
  --teal-50: #e6fffe;
  --teal-100: #d9fffe;
  --teal-200: #8dfffe;
  --teal-300: #57f4f4;
  --teal-400: #43e5e5;
  --teal-500: #17cfcf;
  --teal-600: #00c2c0;
  --teal-700: #00b5b1;
  --teal-800: #00a49e;
  --teal-900: #009087;
  --cyan-25: #f7fcff;
  --cyan-50: #eff8ff;
  --cyan-100: #e7f5ff;
  --cyan-200: #c2e6ff;
  --cyan-300: #95d5ff;
  --cyan-400: #61c4ff;
  --cyan-500: #13a7ec;
  --cyan-600: #069eda;
  --cyan-700: #0095c9;
  --cyan-800: #0088b2;
  --cyan-900: #0a7897;
  --blue-25: #f7faff;
  --blue-50: #eef5ff;
  --blue-100: #e5f1ff;
  --blue-200: #bfdbff;
  --blue-300: #92c2ff;
  --blue-400: #63a8ff;
  --blue-500: #0d80f2;
  --blue-600: #0077db;
  --blue-700: #006dc4;
  --blue-800: #0060a7;
  --blue-900: #005086;
  --indigo-25: #f8f7ff;
  --indigo-50: #f1efff;
  --indigo-100: #eae7ff;
  --indigo-200: #ccc3ff;
  --indigo-300: #ac99ff;
  --indigo-400: #916aff;
  --indigo-500: #63c;
  --indigo-600: #5a21b2;
  --indigo-700: #4e0b99;
  --indigo-800: #3b0071;
  --indigo-900: #220040;
  --purple-25: #fbf7ff;
  --purple-50: #f8f0ff;
  --purple-100: #f4e8ff;
  --purple-200: #e4c4ff;
  --purple-300: #d49aff;
  --purple-400: #c36aff;
  --purple-500: #a219e6;
  --purple-600: #9000c4;
  --purple-700: #7c009f;
  --purple-800: #600073;
  --purple-900: #3d0043;
  --magenta-25: #fff8fb;
  --magenta-50: #fff2f6;
  --magenta-100: #ffebf2;
  --magenta-200: #ffcddf;
  --magenta-300: #ffa8cb;
  --magenta-400: #ff7fb7;
  --magenta-500: #eb4799;
  --magenta-600: #da3689;
  --magenta-700: #c82179;
  --magenta-800: #b00065;
  --magenta-900: #8a004c;
}
@media (prefers-color-scheme: dark) {
  :host {
    --semantic-blue: var(--blue-700);
    --semantic-red: var(--red-400);
    --semantic-orange: var(--orange-400);
    --semantic-green: var(--green-700);
    --semantic-bg-blue: var(--blue-25);
    --semantic-bg-red: var(--red-25);
    --semantic-bg-orange: var(--orange-25);
    --semantic-bg-green: var(--green-25);
    --neutral-100: #121212;
    --neutral-200: #424242;
    --neutral-300: #616161;
    --neutral-400: #757575;
    --neutral-500: #9e9e9e;
    --neutral-600: #bdbdbd;
    --neutral-700: #e0e0e0;
    --neutral-800: #eeeeee;
    --neutral-900: #f5f5f5;
  }
}
:host([theme='dark']) {
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --semantic-bg-blue: var(--blue-25);
  --semantic-bg-red: var(--red-25);
  --semantic-bg-orange: var(--orange-25);
  --semantic-bg-green: var(--green-25);
  --neutral-100: #121212;
  --neutral-200: #424242;
  --neutral-300: #616161;
  --neutral-400: #757575;
  --neutral-500: #9e9e9e;
  --neutral-600: #bdbdbd;
  --neutral-700: #e0e0e0;
  --neutral-800: #eeeeee;
  --neutral-900: #f5f5f5;
}
/* @media (prefers-color-scheme: dark) {
  :host {
      --label-color: #fff;
      --active-label-color: #000;
      --menu-bg: #525252;
      --active-bg: #5898ff;
      --active-bg-dimmed: #5c5c5c;
  }
} */
:host {
  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  --ui-font-size: 14px;
  --ui-line-height: 1.5;
  --ui-letter-spacing: 0.007em;
  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;
  --ui-layer-1: var(--neutral-100);
  --ui-layer-2: var(--neutral-200);
  --ui-layer-3: var(--neutral-300);
  --ui-layer-4: var(--neutral-400);
  --ui-layer-5: var(--neutral-500);
  --ui-layer-6: var(--neutral-600);
  --ui-border-color: var(--primary-color);
  --ui-border-radius: 4px;
  --ui-text: var(--neutral-900);
  --ui-text-secondary: var(--neutral-700);
  --ui-text-placeholder: var(--neutral-500);
  --ui-text-muted: var(--neutral-300);
  /** A field is a UI element in which a user can type data, for
  * example an input or textarea element.
  */
  --ui-field-bg: var(--neutral-100);
  --ui-field-bg-hover: var(--neutral-100);
  --ui-field-bg-disabled: var(--neutral-300);
  --ui-field-bg-invalid: var(--red-100);
  --ui-field-bg-focus: var(--neutral-100);
  --ui-field-border: 0.5px solid var(--border-color);
  --ui-field-border-hover: 0.5px solid var(--border-color);
  --ui-field-border-disabled: 0.5px solid var(--border-color);
  --ui-field-border-invalid: 0.5px solid var(--border-color);
  --ui-field-border-focus: 0.5px solid var(--border-color);
  --ui-menu-bg: var(--neutral-100);
  --ui-menu-text: var(--neutral-900);
  --ui-menu-bg-hover: var(--neutral-200);
  --ui-menu-text-hover: var(--neutral-900);
  /** The \`active\` state is used for the state of menu items
  * when they are selected.
  */
  --ui-menu-bg-active: var(--primary-color);
  --ui-menu-text-active: var(--primary-color-reverse);
  /** The \`active-muted\` set is used for the state of
  * submenus when they are open.
  */
  --ui-menu-bg-active-muted: var(--neutral-300);
  --ui-menu-text-active-muted: var(--neutral-900);
  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),
0 2px 6px 2px rgba(60, 64, 67, 0.149); */
  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);
  --ui-menu-divider: 0.5px solid #c7c7c7;
  /* var(--neutral-300); */
  --ui-menu-z-index: 10000;
  --page-bg: var(--neutral-100);
  --content-bg: var(--neutral-200);
}
@media (prefers-color-scheme: dark) {
  :host {
    --ui-menu-bg: var(--neutral-200);
  }
}
:host([theme='dark']) {
  --ui-menu-bg: var(--neutral-200);
}
/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. 
  Noto  is a Linux/Android font.
*/
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh) {
  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI', 'Microsoft YaHei New', 'Microsoft Yahei', '', SimSun, '', STXihei, '', sans-serif;
}
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans', 'Microsoft JhengHei UI', 'Microsoft JhengHei', '', '', 'PMingLiU', '', 'MingLiU', sans-serif;
}
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac) {
  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans', '', '', YuGothic, 'Yu Gothic', '', Meiryo, ' ', 'MS PGothic', sans-serif;
}
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Malgun Gothic', ' ', 'Apple SD Gothic Neo', ' SD  Neo', 'Apple SD  Neo', '', Dotum, sans-serif;
}
:lang(ko-kr-apple) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Apple SD Gothic Neo', ' SD  Neo', 'Apple SD  Neo', '', Dotum, sans-serif;
}
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh),
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo),
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac),
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std),
:lang(ko-kr-apple) {
  --ui-font-size: 1rem;
  --ui-line-height: 1.7;
  --ui-letter-spacing: 0;
}
:dir(rtl) {
  --ui-line-height: auto;
  --ui-letter-spacing: 0;
}
`,J0=`.ui-menu *,
.ui-menu ::before,
.ui-menu ::after {
  box-sizing: border-box;
}
.ui-menu {
  display: none;
  color-scheme: light dark;
  -webkit-user-select: none;
  /* Important: Safari iOS doesn't respect user-select */
  user-select: none;
  cursor: default;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: rgba(0 0 0 0);
  --active-label-color: #fff;
  /* ui-menu-text-active */
  --label-color: #121212;
  /* ui-menu-text */
  --menu-bg: #e2e2e2;
  /* ui-menu-background */
  --active-bg: #5898ff;
  /* ui-menu-background-active */
  --active-bg-dimmed: #c5c5c5;
  /* ui-menu-background-active-muted */
}
/** Use the :where pseudo selector to make the specificity of the
 * selector 0, so that it can be overridden by the user.
 */
:where(.ui-menu-container) {
  position: absolute;
  overflow: visible;
  width: auto;
  height: auto;
  z-index: 10000;
  border-radius: 8px;
  background: var(--ui-menu-bg);
  box-shadow: var(--ui-menu-shadow);
  list-style: none;
  padding: 6px 0 6px 0;
  margin: 0;
  user-select: none;
  cursor: default;
  color: var(--ui-menu-text);
  font-weight: normal;
  font-style: normal;
  text-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  outline: none;
  opacity: 1;
  /* The [popover] elements have a 1px solid black border. Ugh. */
  border: none;
  width: fit-content;
  height: fit-content;
}
:where(.ui-menu-container > li) {
  display: flex;
  flex-flow: row;
  align-items: center;
  padding: 1px 7px 1px 7px;
  margin-top: 0;
  margin-left: 6px;
  margin-right: 6px;
  border-radius: 4px;
  white-space: nowrap;
  position: relative;
  outline: none;
  fill: currentColor;
  user-select: none;
  cursor: default;
  text-align: left;
  color: inherit;
  font-family: var(--ui-font-family);
  font-size: var(--ui-font-size);
  line-height: var(--ui-line-height);
  letter-spacing: var(--ui-letter-spacing);
}
:where(.ui-menu-container > li > .label) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  appearance: none;
  background: none;
  outline: none;
  width: 100%;
  margin: 0;
  padding: 1px 2px 1px 1px;
  overflow: visible;
  border: 1px solid transparent;
  white-space: nowrap;
  text-align: start;
  align-content: center;
}
:where(.ui-menu-container > li:has(.heading)) {
  margin-top: 0.5em;
}
:where(.ui-menu-container > li > .label.heading) {
  font-weight: bold;
  opacity: 0.4;
}
:where(.ui-menu-container > li.indent > .label) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li > .label.indent) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li[role='divider']) {
  border-bottom: 1px solid var(--ui-menu-divider);
  border-radius: 0;
  padding: 0;
  margin-left: 15px;
  margin-right: 15px;
  padding-top: 5px;
  margin-bottom: 5px;
  width: calc(100% - 30px);
  /** 100% - (margin-left + margin-right) */
}
:where(.ui-menu-container > li[aria-disabled='true']) {
  opacity: 0.5;
}
:where(.ui-menu-container > li.active) {
  background: var(--ui-menu-bg-active);
  background: -apple-system-control-accent;
  color: var(--ui-menu-text-active);
}
:where(.ui-menu-container > li.active.is-submenu-open) {
  background: var(--ui-menu-bg-active-muted);
  color: inherit;
}
:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {
  padding-inline-end: 0;
}
:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {
  color: var(--ui-menu-text-active);
}
/** Keyboard shortcut */
:where(.ui-menu-container > li > kbd) {
  font-family: var(--ui-font-family);
  margin-inline-start: 12px;
  opacity: 0.4;
}
:where(.ui-menu-container > li.active > kbd) {
  opacity: 0.85;
}
.ui-trailing-chevron {
  display: flex;
  margin-inline-start: 24px;
  width: 10px;
  height: 10px;
  margin-bottom: 4px;
}
.ui-trailing-chevron:dir(rtl) {
  transform: scaleX(-1);
}
.ui-checkmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
.ui-mixedmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
`,Rr;function zt(a){let s="";switch(a){case"mathfield-element":s=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":s=V0;break;case"mathfield":s=$0;break;case"environment-popover":s=q0;break;case"suggestion-popover":s=H0;break;case"keystroke-caption":s=W0;break;case"virtual-keyboard":s=U0;break;case"ui":s=j0;break;case"menu":s=J0;break}return s}function or(a){return Rr||(Rr={}),Rr[a]||(Rr[a]=new CSSStyleSheet,Rr[a].replaceSync(zt(a))),Rr[a]}var It;function We(a){var s;try{if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${a}`))return;let o=window.document.createElement("style");o.id=`mathlive-style-${a}`,o.append(window.document.createTextNode(zt(a))),window.document.head.appendChild(o);return}if(It||(It={}),((s=It[a])!=null?s:0)!==0)It[a]+=1;else{let o=or(a);document.adoptedStyleSheets=[...document.adoptedStyleSheets,o],It[a]=1}}catch(o){console.error("Error injecting stylesheet",a,o)}}function nt(a){if("adoptedStyleSheets"in document&&It!=null&&It[a]&&(It[a]-=1,It[a]<=0)){let s=Rr[a];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(o=>o!==s)}}var Ir=class Xv extends y{constructor(s){var o;super(g(p({},s),{type:"accent",body:(o=s.body)!=null?o:void 0})),s.accentChar?this.accent=s.accentChar:this.svgAccent=s==null?void 0:s.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(s){return new Xv(s)}toJson(){return g(p({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(s){var o;let c=new B({parent:s,mathstyle:"cramp"},this.style),h=(o=y.createBox(c,this.body))!=null?o:new w("",{style:this.style}),d=0;!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox()&&(d=h.skew);let b=Math.min(h.height,Je),_;if(this.svgAccent)_=Gi(this.svgAccent),b=c.metrics.bigOpSpacing1-b;else if(this.accent){let Xt=new w(this.accent,{fontFamily:"Main-Regular"});Xt.italic=0;let Lt=this.accent===8407||this.accent===8411||this.accent===8412?" ML__accent-combining-char":"";_=new w(Xt,{classes:"ML__accent-body"+Lt})}let $=(h.width-_.width)/2+h.left+2*d;_=new te({shift:0,children:[{box:new w(h)},-b,{box:_,marginLeft:$,classes:["ML__center"]}]});let j=new w(_,{type:"lift"});return this.caret&&(j.caret=this.caret),this.bind(c,j.wrap(c)),this.attachSupsub(c,{base:j})}},en={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},tn=Object.fromEntries(Object.entries(en).map(([a,s])=>[s,a]));function Ha(a){var s;return(s={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"":8739,"":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[a])!=null?s:a.codePointAt(0)}function Pf(a,s,o,c){var h;let d=new w(Ha(a),{fontFamily:"Main-Regular",isSelected:c.isSelected,classes:"ML__small-delim "+((h=c.classes)!=null?h:"")}).wrap(s);return o&&d.setTop((1-s.scalingFactor)*Pe),d}function G0(a,s,o,c,h){var d,b;let _=new B({parent:c,mathstyle:"textstyle"},h==null?void 0:h.style),$=new w(Ha(a),{fontFamily:`Size${s}-Regular`,isSelected:h.isSelected,classes:((d=h.classes)!=null?d:"")+` ML__delim-size${s}`,type:(b=h.type)!=null?b:"ignore"}).wrap(_);return o&&$.setTop((1-_.scalingFactor)*Pe),$}function X0(a,s,o,c,h){var d;let b,_,$,j;b=$=j=Ha(a),_=null;let Xt="Size1-Regular";a==="\\vert"||a==="\\lvert"||a==="\\rvert"||a==="\\mvert"||a==="\\mid"?$=b=j=8739:a==="\\Vert"||a==="\\lVert"||a==="\\rVert"||a==="\\mVert"||a==="\\|"?$=b=j=8741:a==="\\uparrow"?$=j=9168:a==="\\Uparrow"?$=j=8214:a==="\\downarrow"?b=$=9168:a==="\\Downarrow"?b=$=8214:a==="\\updownarrow"?(b=8593,$=9168,j=8595):a==="\\Updownarrow"?(b=8657,$=8214,j=8659):a==="["||a==="\\lbrack"?(b=9121,$=9122,j=9123,Xt="Size4-Regular"):a==="]"||a==="\\rbrack"?(b=9124,$=9125,j=9126,Xt="Size4-Regular"):a==="\\lfloor"||a===""?($=b=9122,j=9123,Xt="Size4-Regular"):a==="\\lceil"||a===""?(b=9121,$=j=9122,Xt="Size4-Regular"):a==="\\rfloor"||a===""?($=b=9125,j=9126,Xt="Size4-Regular"):a==="\\rceil"||a===""?(b=9124,$=j=9125,Xt="Size4-Regular"):a==="("||a==="\\lparen"?(b=9115,$=9116,j=9117,Xt="Size4-Regular"):a===")"||a==="\\rparen"?(b=9118,$=9119,j=9120,Xt="Size4-Regular"):a==="\\{"||a==="\\lbrace"?(b=9127,_=9128,j=9129,$=9130,Xt="Size4-Regular"):a==="\\}"||a==="\\rbrace"?(b=9131,_=9132,j=9133,$=9130,Xt="Size4-Regular"):a==="\\lgroup"||a===""?(b=9127,j=9129,$=9130,Xt="Size4-Regular"):a==="\\rgroup"||a===""?(b=9131,j=9133,$=9130,Xt="Size4-Regular"):a==="\\lmoustache"||a===""?(b=9127,j=9133,$=9130,Xt="Size4-Regular"):a==="\\rmoustache"||a===""?(b=9131,j=9129,$=9130,Xt="Size4-Regular"):a==="\\surd"?(b=57345,j=9143,$=57344,Xt="Size4-Regular"):a==="\\ulcorner"?(b=9484,$=j=32):a==="\\urcorner"?(b=9488,$=j=32):a==="\\llcorner"?(j=9492,$=b=32):a==="\\lrcorner"&&(b=9496,$=b=32);let Lt=Cr(b,Xt),fr=Lt.height+Lt.depth,Jr=Cr($,Xt),Js=Jr.height+Jr.depth,qs=Cr(j,Xt),zo=qs.height+qs.depth,js=0,eu=1;if(_!==null){let s1=Cr(_,Xt);js=s1.height+s1.depth,eu=2}let Oo=fr+zo+js,tu=Math.max(0,Math.ceil((s-Oo)/(eu*Js))),Bo=Oo+tu*eu*Js,vu=Pe;o&&(vu=vu*c.scalingFactor);let t1=Bo/2-vu,e1=[];e1.push({box:new w(j,{fontFamily:Xt})}),e1.push(-.008);let r1=new w($,{fontFamily:Xt});if(_===null)for(let s1=0;s1<tu;s1++)e1.push({box:r1});else{for(let s1=0;s1<tu;s1++)e1.push({box:r1});e1.push(-.008),e1.push({box:new w(_,{fontFamily:Xt})}),e1.push(-.008);for(let s1=0;s1<tu;s1++)e1.push({box:r1})}e1.push(-.008),e1.push({box:new w(b,{fontFamily:Xt})});let a1="";Xt==="Size1-Regular"?a1=" delim-size1":Xt==="Size4-Regular"&&(a1=" delim-size4");let i1=new te({bottom:t1,children:e1},{classes:a1});return new w(i1,g(p({},h??{}),{classes:((d=h==null?void 0:h.classes)!=null?d:"")+" ML__delim-mult"}))}var Z0=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","","","",""]),Rf=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","","","",""]),Y0=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),If=[0,1.2,1.8,2.4,3];function Q0(a,s,o,c){return a===void 0||a==="."?ar(o,c.classes):(a==="<"||a==="\\lt"||a===""?a="\\langle":(a===">"||a==="\\gt"||a==="")&&(a="\\rangle"),Z0.has(a)||Y0.has(a)?G0(a,s,!1,o,c):Rf.has(a)?X0(a,If[s],!1,o,c):null)}var zf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Nf=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],Ff=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function $f(a){return a.type==="small"?"Main-Regular":a.type==="large"?"Size"+a.size+"-Regular":(a.type,"Size4-Regular")}function Vf(a,s,o,c){let h={"-4":0,"-3":1,0:2}[c.mathstyle.sizeDelta];for(let d=h;d<o.length&&o[d].type!=="stack";d++){let b=Cr(a,$f(o[d]));if(b.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let _=b.height+b.depth;if(o[d].type==="small"&&(o[d].mathstyle==="scriptscriptstyle"?_*=Math.max(Un[Math.max(1,c.size-2)],c.minFontScale):o[d].mathstyle==="scriptstyle"&&(_*=Math.max(Un[Math.max(1,c.size-1)],c.minFontScale))),_>s)return o[d]}return o[o.length-1]}function rn(a,s,o,c,h,d){if(!s||s.length===0||s===".")return ar(h);s==="<"||s==="\\lt"?s="\\langle":(s===">"||s==="\\gt")&&(s="\\rangle");let b;Y0.has(s)?b=zf:Z0.has(s)?b=Ff:b=Nf;let _=Vf(Ha(s),o,b,h),$=new B({parent:h,mathstyle:_.mathstyle},d==null?void 0:d.style);return _.type==="small"?Pf(s,$,c,g(p({},d),{type:a})):_.type==="large"?G0(s,_.size,c,$,g(p({},d),{type:a})):(_.type,X0(s,o,c,$,g(p({},d),{type:a})))}function ci(a,s,o,c,h,d){if(s===".")return ar(h,d==null?void 0:d.classes);let b=Pe*h.scalingFactor,_=901,$=5/Kt,j=Math.max(o-b,c+b),Xt=Math.max(j/500*_,2*j-$);return rn(a,s,Xt,!0,h,d)}function ar(a,s){let o=new w(null,{classes:" ML__nulldelimiter "+(s??""),type:"ignore"});return o.width=a.getRegisterAsEm("nulldelimiterspace"),o.wrap(new B({parent:a,mathstyle:"textstyle"}))}var Le=class Gv extends y{constructor(s){var o;super({type:"placeholder",command:"\\placeholder",mode:(o=s==null?void 0:s.mode)!=null?o:"math",style:s==null?void 0:s.style}),this.captureSelection=!0}static fromJson(s){return new Gv(s)}toJson(){return super.toJson()}render(s){let o;return this.value=s.placeholderSymbol,typeof s.renderPlaceholder=="function"?o=s.renderPlaceholder(s):o=this.createBox(s),this.caret&&(o.classes+=" ML__placeholder-selected"),o}_serialize(s){return s.skipPlaceholders?"":"\\placeholder{}"}},ep=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],ic=["cases","dcases","rcases"],tp=["align","align*","aligned","gather","gather*","gathered","split"],qf=["array","subequations","eqnarray"];function rp(a){return tp.includes(a)||ic.includes(a)||ic.includes(a)||ep.includes(a)||qf.includes(a)}function Wa(a){return ep.includes(a)}function ip(a){return ic.includes(a)}function np(a){return tp.includes(a)}function Hf(a,s,o){let c=0;for(let j of o.columns)"align"in j&&(c+=1);c=Math.max(c,o.minColumns);let h=0,d=[];for(let j of s){h=Math.max(h,Math.min(j.length,c));let Xt=0;for(;Xt<j.length;){let Lt=[],fr=Math.min(j.length,Xt+c);for(;Xt<fr;)Lt.push(jf(j[Xt],a.mode)),Xt+=1;if(Lt.length<o.minColumns)for(;Lt.length<o.minColumns;)Lt.push([new y({type:"first",mode:a.mode})]);d.push(Lt)}}!a.isMultiline&&d.length>0&&d[d.length-1].length===1&&Jf(d[d.length-1][0])&&d.pop();let b=[];for(let j of d){if(j.length!==h)for(let Xt=j.length;Xt<h;Xt++)a.isMultiline?j.push([new y({type:"first",mode:a.mode})]):j.push([new y({type:"first",mode:a.mode}),new Le]);b.push(j)}let _=0,$=0;for(let j of b){$=0;for(let Xt of j){for(let Lt of Xt)Lt.parent=a,Lt.parentBranch=[_,$];$+=1}_+=1}return a.isDirty=!0,b}function Wf(a){return a.length>0&&a.every(s=>s.type==="first")}function Uf(a,s,o){let c=new w(null,{classes:"ML__empty-line-anchor"}),h=a[0];h&&(h.id||(h.id=s.makeID()),c.atomID=h.id),c.setStyle("display","inline-block"),c.setStyle("width",0),c.setStyle("position","relative"),c.setStyle("height",Math.max(0,o.height+o.depth),"em"),c.setStyle("vertical-align",-o.depth,"em"),c.height=o.height,c.depth=o.depth;let d=a.find(b=>b.caret);return d!=null&&d.caret&&(c.caret=d.caret),a.some(b=>b.isSelected)&&c.selected(!0),c}function jf(a,s){return a.length===0?[new y({type:"first",mode:s})]:a[0].type!=="first"?[new y({type:"first",mode:s}),...a]:(a.slice(1).some(o=>o.type==="first"),a)}function Jf(a){return a.length===1&&a[0].type==="first"}var z=class Lv extends y{get isMultiline(){let s=this.environmentName;return["lines","multline","multline*","align","split","gather","gathered"].includes(s)}constructor(s,o,c,h={}){var d,b,_,$;if(super({type:"array",isRoot:h.isRoot}),this.environmentName=s,h.columns)h.columns.length===0?this.colFormat=[{align:"l"}]:this.colFormat=[...h.columns];else if(h.minColumns){let j=[];for(let Xt=0;Xt<h.minColumns;Xt++)j.push({align:"l"});this.colFormat=j}else this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}];this.minColumns=(d=h.minColumns)!=null?d:1,this.minRows=(b=h.minRows)!=null?b:1,this.maxRows=(_=h.maxRows)!=null?_:1/0,this._rows=Hf(this,o,{columns:this.colFormat,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows}),this.rowGaps=c,h.arraycolsep!==void 0&&(this.arraycolsep=h.arraycolsep),this.colSeparationType=h.colSeparationType,h.arraystretch!==void 0&&(this.arraystretch=h.arraystretch),h.mathstyleName&&(this.mathstyleName=h.mathstyleName),h.leftDelim&&(this.leftDelim=h.leftDelim),h.rightDelim&&(this.rightDelim=h.rightDelim),this.classes=($=h.classes)!=null?$:[]}static fromJson(s){return new Lv(s.environmentName,s.array,s.rowGaps,s)}toJson(){let s=g(p({},super.toJson()),{environmentName:this.environmentName,array:this._rows.map(o=>o.map(c=>c.map(h=>h.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});return this.arraystretch!==void 0&&(s.arraystretch=this.arraystretch),this.arraycolsep!==void 0&&(s.arraycolsep=this.arraycolsep),this.leftDelim&&(s.leftDelim=this.leftDelim),this.rightDelim&&(s.rightDelim=this.rightDelim),this.isRoot&&(s.isRoot=!0),s.minColumns=this.minColumns,s.minRows=this.minRows,s.maxRows=this.maxRows,this.mathstyleName&&(s.mathstyleName=this.mathstyleName),this.classes.length>0&&(s.classes=this.classes),s}branch(s){var o;if(Ge(s))return(o=this._rows[s[0]][s[1]])!=null?o:void 0}createBranch(s){var o;return Ge(s)?(this.isDirty=!0,(o=this.branch(s))!=null?o:[]):[]}get rowCount(){return this._rows.length}get colCount(){return this._rows[0].length}get maxColumns(){return this.colFormat.filter(s=>!!s.align).length}removeBranch(s){if(Kr(s))return super.removeBranch(s);let[o,...c]=this.branch(s);return o.type,this._rows[s[0]][s[1]]=void 0,c.forEach(h=>{h.parent=void 0,h.parentBranch=void 0}),this.isDirty=!0,c}get hasChildren(){return this.children.length>0}get children(){let s=[];for(let o of this._rows)for(let c of o)if(c)for(let h of c)s.push(...h.children),s.push(h);return[...s,...super.children]}render(s){var o,c,h,d,b,_;let $=new B({parent:s,mathstyle:this.mathstyleName},this.style),j=$.getRegisterAsEm("arrayrulewidth"),Xt=$.getRegisterAsEm("arraycolsep"),Lt=$.getRegisterAsEm("doublerulesep"),fr=(c=(o=this.arraystretch)!=null?o:$.getRegisterAsNumber("arraystretch"))!=null?c:1,Jr=typeof this.arraycolsep=="number"?this.arraycolsep:Xt;this.colSeparationType==="small"&&(Jr=.2778*(new B({parent:s,mathstyle:"scriptstyle"}).scalingFactor/s.scalingFactor));let Js=fr*w0,qs=.7*Js,zo=.3*Js,js=0,eu=[],Oo=0,tu=this._rows.length;for(let f1=0;f1<tu;++f1){let p1=this._rows[f1];Oo=Math.max(Oo,p1.length);let d1=new B({parent:$,mathstyle:this.mathstyleName},this.style),b1=qs/d1.scalingFactor,C1=zo/d1.scalingFactor,g1={cells:[],height:0,depth:0,pos:0};for(let S1 of p1){let v1=this.isMultiline&&S1&&Wf(S1)?Uf(S1,d1,{height:qs/d1.scalingFactor,depth:zo/d1.scalingFactor}):(h=y.createBox(d1,S1,{type:"ignore"}))!=null?h:new w(null,{type:"ignore"});C1=Math.max(C1,v1.depth),b1=Math.max(b1,v1.height),g1.cells.push(v1)}let o1=(d=za(this.rowGaps[f1]))!=null?d:0;o1>0&&(o1+=zo,C1=Math.max(C1,o1),o1=0),f1<tu-1&&!Wa(this.environmentName)&&this.environmentName!=="cases"&&this.environmentName!=="array"&&(C1+=$.getRegisterAsEm("jot")),g1.height=b1,g1.depth=C1,js+=b1,g1.pos=js,js+=C1+o1,eu.push(g1)}let Bo=this.environmentName==="array"&&!this.isMultiline?eu[0].height:js/2+Pe,vu=[];for(let f1=0;f1<Oo;f1++){let p1=[];for(let d1 of eu){let b1=d1.cells[f1];b1&&(b1.depth=d1.depth,b1.height=d1.height,p1.push({box:b1,shift:d1.pos-Bo}))}p1.length>0&&vu.push(new te({individualShift:p1}))}let t1=[],e1=!1,r1=!1,a1=0,i1=!this.leftDelim,{colFormat:s1}=this;for(let f1 of s1){if("align"in f1&&a1>=vu.length)break;if("align"in f1)e1?t1.push(ja(2*Jr)):(r1||i1)&&t1.push(ja(Jr)),t1.push(new w(vu[a1],{classes:"col-align-"+f1.align})),a1++,e1=!0,r1=!1,i1=!1;else if("gap"in f1){if(typeof f1.gap=="number")t1.push(ja(f1.gap));else{let p1=Gf(s,eu,Bo,f1.gap);p1&&t1.push(p1)}e1=!1,r1=!1,i1=!1}else if("separator"in f1){let p1=new w(null,{classes:"ML__vertical-separator"});p1.height=js,p1.setStyle("height",js,"em"),p1.setStyle("border-right",`${j}em ${f1.separator} currentColor`),p1.setStyle("vertical-align",-(js-Bo),"em");let d1=0;r1?d1=Lt-j:e1&&(d1=Jr-j),p1.left=d1,t1.push(p1),e1=!1,r1=!0,i1=!1}}e1&&!this.rightDelim&&t1.push(ja(Jr));let c1=new w(t1,{classes:["ML__mtable",...this.classes].join(" ")});if(this.environmentName==="array"&&!this.isMultiline&&(c1.height=eu[0].height,c1.depth=js-eu[0].height),(!this.leftDelim||this.leftDelim===".")&&(!this.rightDelim||this.rightDelim==="."))return this.caret&&(c1.caret=this.caret),this.bind(s,c1);let h1=c1.height,m1=c1.depth,l1=this.bind(s,new w([this.bind(s,ci("open",(b=this.leftDelim)!=null?b:".",h1,m1,$,{isSelected:this.isSelected})),c1,this.bind(s,ci("close",(_=this.rightDelim)!=null?_:".",h1,m1,$,{isSelected:this.isSelected}))],{type:"ord"}));return l1?(l1.setStyle("display","inline-block"),this.caret&&(l1.caret=this.caret),this.bind(s,this.attachSupsub(s,{base:l1}))):null}_serialize(s){var o;let c=[];if(this.environmentName==="lines"&&this._rows.length>1?c.push("\\displaylines{"):this.environmentName!=="lines"&&c.push(`\\begin{${this.environmentName}}`),this.environmentName==="array"){if(c.push("{"),this.colFormat!==void 0)for(let h of this.colFormat)"align"in h&&typeof h.align=="string"?c.push(h.align):"separator"in h&&h.separator==="solid"?c.push("|"):"separator"in h&&h.separator==="dashed"&&c.push(":");c.push("}")}for(let h=0;h<this._rows.length;h++){for(let d=0;d<this._rows[h].length;d++)d>0&&c.push(" & "),c.push(y.serialize(this._rows[h][d],s));if(h<this._rows.length-1){let d=this.rowGaps[h];d!=null&&d.dimension?c.push(`\\\\[${d.dimension} ${(o=d.unit)!=null?o:"pt"}] `):c.push("\\\\ ")}}return this.environmentName==="lines"&&this._rows.length>1?c.push("}"):this.environmentName!=="lines"&&c.push(`\\end{${this.environmentName}}`),P(c)}forEachCell(s){for(let o=0;o<this.rowCount;o++)for(let c=0;c<this.colCount;c++)s(this._rows[o][c],o,c)}getCell(s,o){var c;return(c=this._rows[s])==null?void 0:c[o]}setCell(s,o,c){this.type==="array"&&Array.isArray(this._rows)&&this._rows[s][o];for(let d of this._rows[s][o])d.parent=void 0,d.parentBranch=void 0;let h=[new y({type:"first",mode:this.mode}),...c.filter(d=>d.type!=="first")];this._rows[s][o]=h,ui(this),this.isDirty=!0}addRowBefore(s){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(s,0,Array.from({length:this.colCount},()=>Ua(this,!this.isMultiline))),ui(this),this.isDirty=!0}addRowAfter(s){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(s+1,0,Array.from({length:this.colCount},()=>Ua(this,!this.isMultiline))),ui(this),this.isDirty=!0}removeRow(s){this.type==="array"&&Array.isArray(this._rows)&&this.rowCount>s;let o=this._rows.splice(s,1);for(let c of o)for(let h of c)if(h)for(let d of h)d.parent=void 0,d.parentBranch=void 0;ui(this),this.isDirty=!0}addColumnBefore(s){this.type==="array"&&Array.isArray(this._rows);for(let o of this._rows)o.splice(s,0,Ua(this));ui(this),this.isDirty=!0}addColumnAfter(s){this.type==="array"&&Array.isArray(this._rows);for(let o of this._rows)o.splice(s+1,0,Ua(this));ui(this),this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(s){this.type==="array"&&Array.isArray(this._rows)&&this.colCount>s;for(let o of this._rows){let c=o.splice(s,1);for(let h of c)if(h)for(let d of h)d.parent=void 0,d.parentBranch=void 0}ui(this),this.isDirty=!0}get cells(){let s=[];for(let o of this._rows)for(let c of o)c&&s.push(c.filter(h=>h.type!=="first"));return s}get rows(){return this._rows}};function Ua(a,s=!1){let o=new y({type:"first",mode:a.mode});o.parent=a;let c=[o];if(s){let h=new Le;h.parent=a,c.push(h)}return c}function ui(a){for(let s=0;s<a.rowCount;s++)for(let o=0;o<a.colCount;o++){let c=a.getCell(s,o);if(c)for(let h of c)h&&(h.parent=a,h.parentBranch=[s,o])}}function ja(a){let s=new w(null,{classes:"ML__arraycolsep"});return s.width=a,s}function Gf(a,s,o,c){if(!c)return null;let h=[];for(let d of s){let b=y.createBox(a,c,{type:"ignore"});b&&(b.depth=d.depth,b.height=d.height,h.push({box:b,shift:d.pos-o}))}return new te({individualShift:h}).wrap(a)}var ot=class Jv extends y{constructor(s){super({mode:s.mode,command:s.command,style:s.style,body:s.body,type:"box"}),this.framecolor=s.framecolor,this.backgroundcolor=s.backgroundcolor,this.padding=s.padding,this.offset=s.offset,this.border=s.border}static fromJson(s){return new Jv(s)}toJson(){return g(p({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(s){var o,c,h,d;let b=y.createBox(s,this.body,{type:"lift"});if(!b)return null;let _=s.toEm((o=this.offset)!=null?o:{dimension:0});b.depth+=_,b.setStyle("display","inline-block"),b.setStyle("position","relative"),b.setStyle("height",Math.floor(100*b.height+b.depth)/100,"em"),b.setStyle("vertical-align",-Math.floor(100*b.height)/100,"em");let $=new B({parent:s},this.style),j=$.toEm((c=this.padding)!=null?c:{register:"fboxsep"}),Xt=new w(null,{classes:"ML__box"});Xt.height=b.height+j,Xt.depth=b.depth+j,Xt.setStyle("box-sizing","border-box"),Xt.setStyle("position","absolute"),Xt.setStyle("top",-j+.3,"em"),Xt.setStyle("left",0),Xt.setStyle("height",Xt.height+Xt.depth,"em"),Xt.setStyle("width","100%"),this.backgroundcolor&&Xt.setStyle("background-color",(h=$.toBackgroundColor(this.backgroundcolor))!=null?h:"transparent"),this.framecolor&&Xt.setStyle("border",`${$.getRegisterAsEm("fboxrule",2)}em solid ${(d=$.toColor(this.framecolor))!=null?d:"black"}`),this.border&&Xt.setStyle("border",this.border);let Lt=new w([Xt,b],{type:"lift"});return Lt.setStyle("display","inline-block"),Lt.setStyle("position","relative"),Lt.setStyle("line-height",0),Lt.height=b.height+j+(_>0?_:0),Lt.depth=b.depth+j+(_<0?-_:0),Lt.setStyle("padding-left",j,"em"),Lt.setStyle("padding-right",j,"em"),Lt.setStyle("height",Math.floor(100*(b.height+b.depth+2*j+Math.abs(_)))/100,"em"),Lt.setStyle("margin-top",-j,"em"),Lt.setStyle("top",Math.floor(100*(b.depth-b.height+2*j-_))/100,"em"),Lt.setStyle("vertical-align",Math.floor(100*(b.depth+2*j))/100,"em"),this.caret&&(Lt.caret=this.caret),this.attachSupsub(s,{base:Lt})}_serialize(s){return s.skipStyles?P([this.bodyToLatex(s),this.supsubToLatex(s)]):super._serialize(s)}},nn=class Fv extends y{constructor(s,o){var c;super({type:"composition",mode:(c=o==null?void 0:o.mode)!=null?c:"math",value:s})}static fromJson(s){return new Fv(s.value,s)}toJson(){return super.toJson()}render(s){let o=new w(this.value,{classes:"ML__composition",type:"composition"});return this.bind(s,o),this.caret&&(o.caret=this.caret),o}_serialize(s){return""}},ht=class Iv extends y{constructor(s){super({type:"error",value:s,command:s,mode:"math"}),this.verbatimLatex=s}static fromJson(s){return new Iv(s.command)}toJson(){return super.toJson()}render(s){let o=this.createBox(s,{classes:"ML__error"});return this.caret&&(o.caret=this.caret),o}},on=class Rv extends y{constructor(s,o){super({type:"group",mode:o}),this.body=s,this.boxType=s.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,(s==null?void 0:s.length)===1&&s[0].command===","&&(this.captureSelection=!0)}static fromJson(s){return new Rv(s.body,s.mode)}render(s){let o=y.createBox(s,this.body,{type:this.boxType});return o?(this.caret&&(o.caret=this.caret),this.bind(s,o)):null}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);return o!=null&&o.serialize?o.serialize(this,s):`{${this.bodyToLatex(s)}}`}},Y=class zv extends y{constructor(s,o,c){super({type:"leftright",style:c.style,displayContainsHighlight:!0}),this.variant=s,this.body=o,this.leftDelim=c.leftDelim,this.rightDelim=c.rightDelim}static fromJson(s){var o;return new zv((o=s.variant)!=null?o:"",s.body,s)}toJson(){let s=super.toJson();return this.variant&&(s.variant=this.variant),this.leftDelim&&(s.leftDelim=this.leftDelim),this.rightDelim&&(s.rightDelim=this.rightDelim),s}_serialize(s){var o,c;let h=this.matchingRightDelim();return this.variant==="left...right"?P(["\\left",(o=this.leftDelim)!=null?o:".",this.bodyToLatex(s),"\\right",h]):this.variant==="mleft...mright"?P(["\\mleft",(c=this.leftDelim)!=null?c:".",this.bodyToLatex(s),"\\mright",h]):P([!this.leftDelim||this.leftDelim==="."?"":this.leftDelim,this.bodyToLatex(s),h])}matchingRightDelim(){var s,o;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;let c=(s=this.leftDelim)!=null?s:".";return(o=en[c])!=null?o:c}render(s){var o,c;let h=new B({parent:s},this.style);this.body;let d=new B({parent:s,mathstyle:"textstyle"},this.style),b=(o=y.createBox(h,this.body,{type:"inner"}))!=null?o:new w(null,{type:"inner"}),_=b.height/d.scalingFactor,$=b.depth/d.scalingFactor,j=[];if(this.leftDelim&&j.push(this.bind(d,ci("open",this.leftDelim,_,$,d,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),b&&(op$1(b.children,this,h,_,$),j.push(b)),this.rightDelim){let Jr=this.containsCaret?" ML__contains-caret":"",Js=this.rightDelim;Js==="?"&&(h.smartFence?(Js=this.matchingRightDelim(),Jr+=" ML__smart-fence__close"):Js="."),j.push(this.bind(d,ci("close",Js,_,$,d,{isSelected:this.isSelected,classes:Jr+" ML__close",mode:this.mode,style:this.style})))}let Xt=this.variant==="mleft...mright",Lt=this.leftSibling;Lt&&(!Xt&&Lt.isFunction&&(Xt=!0),!Xt&&Lt.type==="subsup"&&(c=Lt.leftSibling)!=null&&c.isFunction&&(Xt=!0));let fr=new w(j,{type:Xt?"close":"inner",classes:"ML__left-right"});return fr.setStyle("margin-top",`${-b.depth}em`),fr.setStyle("height",`${b.height+b.depth}em`),this.caret&&(fr.caret=this.caret),this.bind(h,fr.wrap(h))}};function op$1(a,s,o,c,h){if(a)for(let d=0;d<a.length;d++){let b=a[d];b.type==="middle"?(a[d]=s.bind(o,ci("inner",b.value,c,h,o,{isSelected:s.isSelected})),a[d].caret=b.caret,a[d].isSelected=b.isSelected,a[d].cssId=b.cssId,a[d].htmlData=b.htmlData,a[d].htmlStyle=b.htmlStyle,a[d].attributes=b.attributes,a[d].cssProperties=b.cssProperties):b.children&&op$1(b.children,s,o,c,h)}}var an=class qv extends y{constructor(s,o){var c;super({type:"macro",command:s,style:o.style}),this.body=o.body,o.captureSelection===void 0?o.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=o.captureSelection,this.macroArgs=o.args,this.expand=(c=o.expand)!=null?c:!1}static fromJson(s){return new qv(s.command,s)}toJson(){let s=super.toJson();return this.expand&&(s.expand=!0),this.captureSelection!==void 0&&(s.captureSelection=this.captureSelection),this.macroArgs&&(s.args=this.macroArgs),s}_serialize(s){var o;return s.expandMacro&&this.expand?this.bodyToLatex(s):this.command+((o=this.macroArgs)!=null?o:"")}applyStyle(s,o){let c={};s.color&&(c.color=s.color),s.backgroundColor&&(c.backgroundColor=s.backgroundColor),super.applyStyle(c,o)}render(s){let o=y.createBox(s,this.body,{type:"lift"});return o?(this.caret&&(o.caret=this.caret),this.bind(s,o)):null}},Ja=class Vv extends y{constructor(){super({type:"macro-argument"})}static fromJson(s){return new Vv}toJson(){return super.toJson()}_serialize(s){return""}render(s){return null}},sn=class Uv extends y{constructor(s,o,c=!1,h,d){var b;super({type:"prompt",mode:(b=d==null?void 0:d.mode)!=null?b:"math",style:d==null?void 0:d.style,command:"\\placeholder"}),this.body=h,this.correctness=o,this.placeholderId=s,this.locked=c,this.captureSelection=this.locked}static fromJson(s){return new Uv(s.placeholderId,s.correctness,s.locked,s.body,s)}toJson(){let s=super.toJson();return this.placeholderId&&(s.placeholderId=this.placeholderId),this.body||delete s.body,this.body&&(s.body=this.body.filter(o=>o.type!=="first").map(o=>o.toJson())),this.correctness&&(s.correctness=this.correctness),s.locked=this.locked,s}render(s){var o,c;let h=new B({parent:s}),d=h.getRegisterAsEm("fboxsep"),b=d,_=d,$=y.createBox(s,this.body);if(!$)return null;let j=!this.body||this.body.length===0||this.body.every(t1=>t1.type==="first"),Xt=j?new Le({mode:this.mode,style:this.style}).render(new B({parent:s,isPhantom:!0})):null;Xt==null||Xt.height,Xt==null||Xt.depth;let Lt=(o=Xt==null?void 0:Xt.height)!=null?o:h.metrics.xHeight,fr=(c=Xt==null?void 0:Xt.depth)!=null?c:Lt/2;$.height||($.height=j?Lt:h.metrics.xHeight),$.depth||($.depth=j?fr:h.metrics.defaultRuleThickness);let Jr=j?fr-Lt:$.depth-$.height;$.setStyle("vertical-align",Jr,"em"),this.correctness==="correct"?$.setStyle("color","var(--correct-color, var(--ML__correct-color))"):this.correctness==="incorrect"&&$.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let Js=new w($,{type:"ord"});Js.height=$.height,Js.depth=$.depth,Js.setStyle("display","inline-block"),Js.setStyle("height",$.height+$.depth,"em"),Js.setStyle("vertical-align",-_,"em"),Js.setStyle("position","relative"),Js.setStyle("z-index",1);let qs="ML__prompt ";this.locked?qs+=" ML__lockedPromptBox ":qs+=" ML__editablePromptBox ",this.correctness==="correct"?qs+=" ML__correctPromptBox ":this.correctness==="incorrect"&&(qs+=" ML__incorrectPromptBox "),this.containsCaret&&(qs+=" ML__focusedPromptBox ");let zo=new w(null,{classes:qs,attributes:{part:"prompt"}});zo.height=Js.height+_,zo.depth=Js.depth+_,zo.width=Js.width+2*b,zo.setStyle("position","absolute"),zo.setStyle("z-index",0),zo.setStyle("display","block"),zo.setStyle("pointer-events","auto");let js=Js.height+Js.depth+2*_;zo.setStyle("height",Math.max(js,.6),"em");let eu=Js.width+2*b;j&&(eu=Math.max(eu,3*b||.8)),zo.setStyle("width",Math.max(eu,.6),"em"),zo.setStyle("top",d+_,"em"),j?zo.setStyle("left",-1.5*b,"em"):b!==0&&zo.setStyle("left",-b,"em");let Oo="";this.correctness==="incorrect"&&(Oo+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),Oo&&(zo.svgOverlay=Oo);let tu=new w([zo,Js],{classes:"ML__prompt-atom"});Js.setStyle("line-height",1),tu.setStyle("position","relative"),tu.setStyle("display","inline-block"),tu.setStyle("line-height",0),tu.height=Js.height+_+.2,tu.depth=Js.depth+_,tu.left=b,tu.right=b,tu.setStyle("height",Js.height+2*_,"em"),tu.setStyle("top",Js.depth-Js.height-_/2,"em"),tu.setStyle("vertical-align",Js.depth+_/2,"em"),tu.setStyle("margin-left",.5,"em"),tu.setStyle("margin-right",.5,"em"),this.caret&&(tu.caret=this.caret);let Bo=this.attachSupsub(s,{base:tu}),vu=this.bind(h,Bo);return vu&&this.id&&(zo.atomID=this.id,Js.atomID=this.id,tu.atomID=this.id),vu}_serialize(s){var o;let c=(o=this.bodyToLatex(s))!=null?o:"";if(s.skipPlaceholders)return c;let h="\\placeholder";return this.placeholderId&&(h+=`[${this.placeholderId}]`),this.correctness==="correct"?h+="[correct]":this.correctness==="incorrect"&&(h+="[incorrect]"),this.locked&&(h+="[locked]"),W(h,c)}},sr=class jv extends y{constructor(s){super({type:"subsup",style:s==null?void 0:s.style}),this.subsupPlacement="auto"}get children(){if(!this._children){let s=[],o=this.branch("subscript");if(o)for(let h of o)s.push(...h.children),s.push(h);let c=this.branch("superscript");if(c)for(let h of c)s.push(...h.children),s.push(h);this._children=s}return this._children}static fromJson(s){let o=new jv(s);for(let c of Pr)s[c]&&o.setChildren(s[c],c);return o}render(s){var o;let c=new B({parent:s,isPhantom:!0}),h=this.leftSibling,d=(o=h.render(c))!=null?o:new w(null),b=new w(null);return b.height=d.height,b.depth=d.depth,this.attachSupsub(s,{base:b,isCharacterBox:h.isCharacterBox(),type:"ignore"})}_serialize(s){return this.supsubToLatex(s)}};function ln(a){return a?!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(a):!1}var Ga=class{constructor(a,s,o){this.errors=[],this.index=0,this.endCount=0;var c,h,d,b;o!=null||(o={}),this.tokens=a,this.context=s instanceof B&&!(o!=null&&o.parseMode)&&!o.mathstyle?s:new B({from:s,mathstyle:o.mathstyle},o.style),this.args=(c=o.args)!=null?c:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:(h=o.style)!=null?h:{},parseMode:(d=o.parseMode)!=null?d:"math",mathstyle:(b=o.mathstyle)!=null?b:"displaystyle",tabular:!1}}beginContext(a){var s,o,c,h,d,b;if(a!=null&&a.root){this.parsingContext={parent:this.parsingContext.parent,mathlist:[],style:{},parseMode:(s=a==null?void 0:a.mode)!=null?s:"math",mathstyle:(o=a==null?void 0:a.mathstyle)!=null?o:"displaystyle",tabular:(c=a==null?void 0:a.tabular)!=null?c:!1};return}let _=this.parsingContext,$={parent:_,mathlist:[],style:p({},_.style),parseMode:(h=a==null?void 0:a.mode)!=null?h:_.parseMode,mathstyle:(d=a==null?void 0:a.mathstyle)!=null?d:_.mathstyle,tabular:(b=a==null?void 0:a.tabular)!=null?b:!1};this.parsingContext=$}endContext(){this.parsingContext=this.parsingContext.parent}onError(a){this.errors.push(p({before:Er(this.tokens.slice(this.index,this.index+10)),after:Er(this.tokens.slice(Math.max(0,this.index-10),this.index))},a))}get mathlist(){return this.parsingContext.mathlist}set mathlist(a){this.parsingContext.mathlist=a}get parseMode(){return this.parsingContext.parseMode}set parseMode(a){this.parsingContext.parseMode=a}get tabularMode(){return this.parsingContext.tabular}get style(){let a=this.parsingContext;for(;a;){if(a.style)return p({},a.style);a=a.parent}return{}}set style(a){this.parsingContext.style=a}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}expandUnicode(){if(!this.peek()||this.parseMode!=="math")return;let a=Lu(this.peek());a&&this.tokens.splice(this.index,1,...ji(a))}match(a){return this.tokens[this.index]===a?(this.index++,!0):!1}lastSubsupAtom(){let a;return this.mathlist.length>0&&(a=this.mathlist[this.mathlist.length-1],a.type==="subsup"||a.subsupPlacement!==void 0)||(a=new sr({style:this.style}),this.mathlist.push(a)),a}hasPattern(a){return a.test(this.tokens[this.index])}hasInfixCommand(){var a;let{index:s}=this;if(s<this.tokens.length&&this.tokens[s].startsWith("\\")){let o=ne(this.tokens[s],this.parseMode);return!o||o.definitionType==="symbol"||o.ifMode&&!o.ifMode.includes(this.parseMode)?!1:(a=o.infix)!=null?a:!1}return!1}matchColumnSeparator(){return!this.tabularMode||this.peek()!=="&"?!1:(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let a=this.peek();return a!=="\\\\"&&a!=="\\cr"&&a!=="\\tabularnewline"?!1:(this.index++,!0)}placeholder(){var a;let s=(a=this.args)==null?void 0:a.call(this,"?");return s?ge(s,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new Le({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(a){let s=this.tokens[this.index];for(;s&&s!==a;)s=this.tokens[++this.index];s===a&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(a){let s=this.index,o=this.end(),c="";for(;!o;){let d=this.get();ln(d)?(c+=d,o=this.end()||c.length>=a.length):o=!0}let h=a.toUpperCase()===c.toUpperCase();return h||(this.index=s),h}scanString(){let a="";for(;!this.end();){let s=this.peek();if(s==="]")return a;if(s==="<space>")a+=" ";else if(s.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),a+=s.substring(1);else if(ln(s))a+=s;else return a;this.next()}return a}scanBalancedString(){let a="",s=this.end(),o=1;for(;!s;){let c=this.get();c==="<space>"?a+=" ":c==="<{>"?(a+="{",o+=1):c==="<}>"?(o-=1,o>0?a+="}":this.index-=1):c==="<$>"?a+="$":c==="<$$>"?a+="$$":a+=c,s=o===0||this.end()}return a}scanLiteralGroup(){var a;if(!this.match("<{>"))return"";let s="",o=1;for(;o>0&&!this.end();){let c=this.get();c==="<}>"?(o-=1,o>0&&(s+="}")):c==="<{>"?(o+=1,s+="{"):(/\\[a-zA-Z]+$/.test(s)&&/^[a-zA-Z]/.test(c)&&(s+=" "),s+=(a={"<space>":" ","<$$>":"$$","<$>":"$"}[c])!=null?a:c)}return s}scanNumber(a=!0){var s,o;let c=!1,h=this.peek();for(;h==="<space>"||h==="+"||h==="-";)this.get(),h==="-"&&(c=!c),h=this.peek();a=!!a;let d=10,b=/\d/;if(this.match("'"))d=8,b=/[0-7]/,a=!0;else if(this.match('"'))d=16,b=/[\dA-F]/,a=!0;else if(this.match("x"))d=16,b=/[\dA-Fa-f]/,a=!0;else if(this.match("`"))return h=this.get(),h?h.length===2&&h.startsWith("\\")?{number:(c?-1:1)*((s=h.codePointAt(1))!=null?s:0),base:"alpha"}:{number:(c?-1:1)*((o=h.codePointAt(0))!=null?o:0),base:"alpha"}:null;let _="";for(;this.hasPattern(b);)_+=this.get();if(!a&&(this.match(".")||this.match(",")))for(_+=".";this.hasPattern(b);)_+=this.get();let $=a?Number.parseInt(_,d):Number.parseFloat(_);return Number.isNaN($)?null:{number:c?-$:$,base:d===16?"hexadecimal":d===8?"octal":"decimal"}}scanRegister(){var a;let s=this.index,o=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return o;let c=!1;if(o===null)for(;;){let d=this.peek();if(d==="-")c=!c;else if(d!=="+")break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let d=this.get();return d.startsWith("\\")?o?{register:d,global:!0,factor:(c?-1:1)*o.number}:c?{register:d,global:!0,factor:-1}:{register:d,global:!0}:(this.index=s,null)}let h=this.get();return h!=null&&h.startsWith("\\")?(h=h.substring(1),this.context.registers[h]?!c||o!==null?{register:h,factor:(c?-1:1)*((a=o==null?void 0:o.number)!=null?a:1)}:{register:h}:(this.index=s,null)):(this.index=s,null)}scanValue(){let a=this.scanRegister();if(a)return a;let s=this.index,o=this.scanGlueOrDimen();if(o&&("unit"in o||"glue"in o&&"unit"in o.glue))return o;this.index=s;let c=this.scanNumber();if(c)return c;if(this.end()||!ln(this.peek()))return null;let h=this.scanString();return h.length>0?{string:h}:null}scanDimen(){let a=this.scanNumber(!1);if(a===null)return null;let s=a.number;this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace();let o;return this.matchKeyword("pt")?o="pt":this.matchKeyword("mm")?o="mm":this.matchKeyword("cm")?o="cm":this.matchKeyword("ex")?o="ex":this.matchKeyword("px")?o="px":this.matchKeyword("em")?o="em":this.matchKeyword("bp")?o="bp":this.matchKeyword("dd")?o="dd":this.matchKeyword("pc")?o="pc":this.matchKeyword("in")?o="in":this.matchKeyword("mu")&&(o="mu"),o?{dimension:s,unit:o}:{dimension:s}}scanGlueOrDimen(){let a=this.scanDimen();if(a===null)return null;if(this.skipWhitespace(),this.match("\\relax"))return a;let s={glue:a};if(this.matchKeyword("plus")){let o=this.scanDimen();if(o)s.grow=o;else return s}if(this.skipWhitespace(),this.match("\\relax"))return s;if(this.skipWhitespace(),this.matchKeyword("minus")){let o=this.scanDimen();if(o)s.shrink=o;else return s}return!s.grow&&!s.shrink?a:s}scanColspec(){this.skipWhitespace();let a=[];for(;!this.end()&&!(this.peek()==="<}>"||this.peek()==="]");){let s=this.get();s==="c"||s==="r"||s==="l"?a.push({align:s}):s==="|"?a.push({separator:"solid"}):s===":"?a.push({separator:"dashed"}):s==="@"&&(this.match("<{>")&&(this.beginContext({mode:"math"}),a.push({gap:this.scan(o=>o==="<}>")}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return a}scanModeSet(){let a;if(this.match("\\(")&&(a="textstyle"),!a&&this.match("\\[")&&(a="displaystyle"),!a)return null;this.beginContext({mode:"math",mathstyle:a});let s=this.scan(o=>o===(a==="displaystyle"?"\\]":"\\)"));return this.match(a==="displaystyle"?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),s}scanModeShift(){let a="";if(this.match("<$>")&&(a="<$>"),!a&&this.match("<$$>")&&(a="<$$>"),!a)return null;this.beginContext({mode:"math",mathstyle:a==="<$>"?"textstyle":"displaystyle"});let s=this.scan(o=>o===a);return this.match(a)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),s}scanEnvironment(){if(!this.match("\\begin"))return null;let a=this.scanArgument("string");if(!a)return null;let s=Tu(a);if(!s)return this.onError({code:"unknown-environment",arg:a}),null;let o=[];if(s.params)for(let _ of s.params)if(_.isOptional)o.push(this.scanOptionalArgument(_.type));else{let $=this.scanArgument(_.type);$||this.onError({code:"missing-argument",arg:a}),o.push($)}this.beginContext({tabular:s.tabular,root:s.rootOnly});let c=[],h=[],d=[],b=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:a}),b=!0),!b&&this.match("\\end")&&(this.scanArgument("string")!==a&&this.onError({code:"unbalanced-environment",arg:a}),b=!0),!b)if(this.matchColumnSeparator())d.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){d.push(this.mathlist),this.mathlist=[];let _=null;this.skipWhitespace(),this.match("[")&&(_=this.scanDimen(),this.skipWhitespace(),this.match("]")),h.push(_??{dimension:0}),c.push(d),d=[]}else this.mathlist.push(...this.scan(_=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(_)));while(!b);return d.push(this.mathlist),d.length>0&&c.push(d),this.endContext(),s.rootOnly&&(this.index=this.tokens.length),s.createAtom(a,c,h,o,this.context.maxMatrixCols)}scanExpression(){let a=this.mathlist;if(this.mathlist=[],this.parseExpression()){let s=this.mathlist;return this.mathlist=a,s}return this.mathlist=a,null}scan(a){this.beginContext(),a||(a=b=>b==="<}>");let s="",o=null,c=[],h=null;for(;!this.end()&&!a(this.peek());)this.hasInfixCommand()&&!s?(s=this.get(),o=ne(s,"math"),o&&(c=this.scanArguments(o)[1]),h=this.mathlist,this.mathlist=[]):this.parseExpression();let d;return s?(c.unshift(this.mathlist),h&&c.unshift(h),d=[o.createAtom({command:s,args:c,style:this.style,mode:this.parseMode})]):d=this.mathlist,this.endContext(),d}scanGroup(){let a=this.index;if(!this.match("<{>"))return null;let s=this.scan(c=>c==="<}>");if(this.match("<}>")||this.onError({code:"unbalanced-braces"}),s.length===1&&s[0].type==="placeholder")return s[0];let o=new on(s,this.parseMode);return o.verbatimLatex=Er(this.tokens.slice(a,this.index)),o}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let a=1;for(;!this.end()&&a!==0;)this.match("(")&&(a+=1),this.match(")")&&(a-=1),a!==0&&this.parseExpression();let s=new Y("",this.mathlist,{leftDelim:"(",rightDelim:a===0?")":"?"});return this.endContext(),s}scanDelim(){this.skipWhitespace();let a=this.peek();if(!a)return this.onError({code:"unexpected-end-of-string"}),null;if(!ln(a)&&!a.startsWith("\\"))return null;this.next();let s=ne(a,"math");return s?s.definitionType==="function"&&s.ifMode&&!s.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:a}),null):s.definitionType==="symbol"&&(s.type==="mopen"||s.type==="mclose")||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(a)?a:(this.onError({code:"unexpected-delimiter",arg:a}),null):(this.onError({code:"unknown-command",arg:a}),null)}scanLeftRight(){var a;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new ht("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new ht("\\mright");let s="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;s="\\mright"}let o=this.scanDelim();if(!o)return this.onError({code:"unexpected-delimiter"}),new ht(s==="\\right"?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(s);)this.parseExpression();let c=this.mathlist;this.endContext();let h=(a=this.scanDelim())!=null?a:".";return new Y(s==="\\right"?"left...right":"mleft...mright",c,{leftDelim:o,rightDelim:h,style:this.style})}parseSupSub(){if(this.parseMode!=="math")return!1;let a=this.peek();if(a!=="^"&&a!=="_"&&a!=="'")return!1;let s=this.lastSubsupAtom();for(;a==="^"||a==="_"||a==="'";)this.match("'")?this.match("'")?s.addChild(new y({type:"mord",command:"\\doubleprime",mode:"math",value:""}),"superscript"):s.addChild(new y({type:"mord",command:"\\prime",mode:"math",value:""}),"superscript"):(this.match("^")||this.match("_"))&&s.addChildren(C(this.scanArgument("expression")),a==="_"?"subscript":"superscript"),a=this.peek();return!0}parseLimits(){if(this.parseMode!=="math")return!1;let a=this.match("\\limits"),s=!a&&this.match("\\nolimits"),o=!s&&!a&&this.match("\\displaylimits");if(!a&&!s&&!o)return!1;let c=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return c===null?!1:(c.explicitSubsupPlacement=!0,a&&(c.subsupPlacement="over-under"),s&&(c.subsupPlacement="adjacent"),o&&(c.subsupPlacement="auto"),!0)}scanArguments(a){if(!(a!=null&&a.params))return[void 0,[]];let s,o=[],c=a.infix?2:0;for(;c<a.params.length;){let h=a.params[c];h.type==="rest"?o.push(this.scan(d=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(d))):h.isOptional?o.push(this.scanOptionalArgument(h.type)):h.type.endsWith("*")?s=h.type.slice(0,-1):o.push(this.scanArgument(h.type)),c+=1}return[s,o]}scanSymbolOrLiteral(){let a=this.peek();if(!a)return null;this.next();let s;if(ln(a)){let o=ve.createAtom(this.parseMode,a,p({},this.style));return o?[o]:null}if(s=this.scanMacro(a),s)return[s];if(a.startsWith("\\")){let o=ne(a,this.parseMode);if(!o)return this.onError({code:"unknown-command",arg:a}),[new ht(a)];if(o.definitionType==="symbol"){let c=p({},this.style);o.variant&&(c.variant=o.variant),s=new y({type:o.type,command:a,style:c,value:String.fromCodePoint(o.codepoint),mode:this.parseMode,verbatimLatex:a})}else{if(o.applyMode||o.applyStyle||o.infix)return this.onError({code:"invalid-command",arg:a}),[new ht(a)];o.createAtom&&(s=o.createAtom({command:a,args:[],style:this.style,mode:this.parseMode}))}}return s?[s]:null}scanArgument(a){var s;this.skipFiller();let o=this.parseMode;if(a==="auto"&&(a=o),!this.match("<{>")){if(a==="string")return this.scanString();if(a==="value")return this.scanValue();if(a==="delim")return(s=this.scanDelim())!=null?s:".";if(a==="expression")return this.scanExpression();if(a==="math"){a!==o&&this.beginContext({mode:"math"});let h=this.scanSymbolOrLiteral();return a!==o&&this.endContext(),h}if(a==="text"){a!==o&&this.beginContext({mode:"text"});let h=this.scanSymbolOrLiteral();return a!==o&&this.endContext(),h}return a==="balanced-string"?null:a==="rest"?this.scan(h=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(h)):null}if(a==="text"){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let h=this.mathlist;return this.endContext(),{group:h}}if(a==="math"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let h=this.mathlist;return this.endContext(),{group:h}}if(a==="rest"){let h=this.scan();return this.match("<}>")||this.onError({code:"unbalanced-braces"}),{group:h}}let c=null;if(a==="expression"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let h=this.mathlist;return this.endContext(),{group:h}}return a==="string"?c=this.scanString():a==="balanced-string"?c=this.scanBalancedString():a==="colspec"?c=this.scanColspec():a==="value"&&(c=this.scanValue()),this.skipUntilToken("<}>"),c}scanOptionalArgument(a){if(a=a==="auto"?this.parseMode:a,this.skipFiller(),!this.match("["))return null;let s=null;for(;!this.end()&&!this.match("]");)if(a==="string")s=this.scanString();else if(a==="value")s=this.scanValue();else if(a==="colspec")s=this.scanColspec();else if(a==="bbox"){let o={},c=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let h of c){let d=h.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(d)o.padding={dimension:Number.parseFloat(d[1]),unit:d[2]};else{let b=h.match(/^\s*border\s*:\s*(.*)/);b?o.border=b[1]:o.backgroundcolor={string:h}}}s=o}else a==="math"&&(this.beginContext({mode:"math"}),s=this.mathlist.concat(this.scan(o=>o==="]")),this.endContext());return s}scanSymbolOrCommand(a){var s,o,c;if(a==="\\placeholder"){let _=this.scanOptionalArgument("string"),$=this.scanOptionalArgument("math"),j=y.serialize($,{defaultMode:"math"}),Xt=[],Lt;!Lt&&j==="correct"?Lt="correct":!Lt&&j==="incorrect"?Lt="incorrect":j!==""&&(Xt=$);let fr=this.scanOptionalArgument("string")==="locked",Jr=this.scanArgument("auto"),Js;return Jr&&Array.isArray(Jr)&&Jr.length>0?Js=Jr:Jr&&typeof Jr=="object"&&"group"in Jr?Js=Jr.group:Js=Xt,_?[new sn(_,Lt,fr,Js??Xt,{mode:this.parseMode,style:this.style})]:[new Le({mode:this.parseMode,style:this.style})]}if(a==="\\renewcommand"||a==="\\newcommand"||a==="\\providecommand"||a==="\\def"){let _=this.index,$=this.scanLiteralGroup()||this.next();if(!$)return null;if(this.context.registers[$.substring(1)]){let j=this.scanArgument("string");j!==null&&(this.context.registers[$.substring(1)]=j);let Xt=P([a,Er(this.tokens.slice(_,this.index))]);return[new y({type:"text",value:"",verbatimLatex:Xt})]}}let h=this.scanMacro(a);if(h)return[h];let d=ne(a,this.parseMode);if(!d)return this.parseMode==="text"?(/[a-zA-Z]/.test((s=this.peek())!=null?s:"")&&(a+=" "),[...a].map(_=>new y({type:"text",value:_,mode:"text",style:this.style}))):(this.onError({code:"unknown-command",arg:a}),[new ht(a)]);let b=this.index;if(d.definitionType==="symbol"){let _=p({},this.style);d.variant&&(_.variant=d.variant),h=new y({type:d.type,command:a,style:_,value:String.fromCodePoint(d.codepoint),mode:this.parseMode})}else{if(d.ifMode&&!d.ifMode.includes(this.parseMode))return[];let _=this.parseMode;d.applyMode&&(this.parseMode=d.applyMode);let $,j=[];if(d.parse?j=d.parse(this):[$,j]=this.scanArguments(d),this.parseMode=_,d.applyMode&&!d.applyStyle&&!d.createAtom)return C(j[0]);if(d.infix)return this.onError({code:"too-many-infix-commands",arg:a}),null;if(typeof d.createAtom=="function")h=d.createAtom({command:a,args:j,style:this.style,mode:this.parseMode}),$&&(h.body=C(this.scanArgument($)));else if(typeof d.applyStyle=="function"){let Xt=d.applyStyle(this.style,a,j,this.context),Lt=this.parseMode;if(d.applyMode&&(this.parseMode=d.applyMode),$){let fr=this.style;this.style=Xt;let Jr=this.scanArgument($);return this.style=fr,this.parseMode=Lt,C(Jr)}this.style=Xt}else h=new y({type:"mord",command:(o=d.command)!=null?o:a,style:p({},this.style),value:a,mode:(c=d.applyMode)!=null?c:this.parseMode})}if(!h)return null;if(h instanceof y&&h.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(a)){let _=P([a,Er(this.tokens.slice(b,this.index))]);_&&(h.verbatimLatex=_)}if(h.verbatimLatex===null&&(h.verbatimLatex=void 0),h.isFunction&&this.smartFence){let _=this.scanSmartFence();if(_)return[h,_]}return[h]}scanSymbolCommandOrLiteral(){this.expandUnicode();let a=this.get();if(!a)return null;if(ln(a)){let s=ve.createAtom(this.parseMode,a,p({},this.style));if(!s)return null;if(s.isFunction&&this.smartFence){let o=this.scanSmartFence();if(o)return[s,o]}return[s]}return a.startsWith("\\")?this.scanSymbolOrCommand(a):a==="<space>"?this.parseMode==="text"?[new qe(" "," ",this.style)]:null:(a==="<}>"?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:a}),null)}scanMacro(a){var s;let o=this.context.getMacro(a);if(!o)return null;let c=this.index,h=o.args,d={"?":(s=this.args)==null?void 0:s.call(this,"?")};for(let b=1;b<=h;b++){let _=this.scanLiteralGroup();if(!_){let $=this.index;this.scanExpression(),_=Er(this.tokens.slice($,this.index))}d[b]=_}return new an(a,{expand:o.expand,captureSelection:o.captureSelection,args:c===this.index?null:Er(this.tokens.slice(c,this.index)),style:this.parsingContext.style,body:ge(o.def,{context:this.context,parseMode:this.parseMode,args:b=>d[b],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var a,s,o,c;let h=(c=(o=(s=(a=this.scanEnvironment())!=null?a:this.scanModeShift())!=null?s:this.scanModeSet())!=null?o:this.scanGroup())!=null?c:this.scanLeftRight();if(h===null){if(this.parseSupSub()||this.parseLimits())return!0;h=this.scanSymbolCommandOrLiteral()}return h?(ee(h)?this.mathlist.push(...h):this.mathlist.push(h),!0):!1}};function ge(a,s){var o,c,h,d;let b=(o=s==null?void 0:s.args)!=null?o:void 0,_=new Ga(ji(a,b),s==null?void 0:s.context,{args:b,mathstyle:(c=s==null?void 0:s.mathstyle)!=null?c:"displaystyle",parseMode:(h=s==null?void 0:s.parseMode)!=null?h:"math",style:(d=s==null?void 0:s.style)!=null?d:{}}),$=[];for(;!_.end();)$.push(..._.scan(()=>!1));return $}function Xa(a,s){var o;let c=new Ga(ji(a,null),s==null?void 0:s.context,{mathstyle:"displaystyle",parseMode:(o=s==null?void 0:s.parseMode)!=null?o:"math"});for(;!c.end();)c.scan();return c.errors}var Qn=class Yv extends y{constructor(s,o){super({type:"chem"},{command:s,mode:"math"});let c=me.go(k.go(o,s==="\\pu"?"pu":"ce"),!1);this.body=ge(c),this._verbatimLatex=s+"{"+o+"}",this.arg=o,this.captureSelection=!0}static fromJson(s){return new Yv(s.command,s.arg)}set verbatimLatex(s){}get verbatimLatex(){return this._verbatimLatex}toJson(){return g(p({},super.toJson()),{arg:this.arg})}render(s){let o=y.createBox(s,this.body,{type:"inner"});return this.caret&&(o.caret=this.caret),this.bind(s,o)}_serialize(s){return this.verbatimLatex,this.verbatimLatex}};M(["ce","pu"],"{chemformula:balanced-string}",{createAtom:a=>{var s;return new Qn(a.command,(s=a.args[0])!=null?s:"")}});var k={go:function(a,s){if(!a)return[];s===void 0&&(s="ce");var o="0",c={};c.parenthesisLevel=0,a=a.replace(/\n/g," "),a=a.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),a=a.replace(/[\u2026]/g,"...");for(var h,d=10,b=[];;){h!==a?(d=10,h=a):d--;var _=k.stateMachines[s],$=_.transitions[o]||_.transitions["*"];e:for(var j=0;j<$.length;j++){var Xt=k.patterns.match_($[j].pattern,a);if(Xt){for(var Lt=$[j].task,fr=0;fr<Lt.action_.length;fr++){var Jr;if(_.actions[Lt.action_[fr].type_])Jr=_.actions[Lt.action_[fr].type_](c,Xt.match_,Lt.action_[fr].option);else if(k.actions[Lt.action_[fr].type_])Jr=k.actions[Lt.action_[fr].type_](c,Xt.match_,Lt.action_[fr].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+Lt.action_[fr].type_+")"];k.concatArray(b,Jr)}if(o=Lt.nextState||o,a.length>0){if(Lt.revisit||(a=Xt.remainder),!Lt.toContinue)break e}else return b}}if(d<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(a,s){if(s)if(Object.prototype.toString.call(s)==="[object Array]")for(var o=0;o<s.length;o++)a.push(s[o]);else a.push(s)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(a){var s=a.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return s&&s[0]?{match_:s.slice(1),remainder:a.substr(s[0].length)}:null},"(-)(9)^(-9)":function(a){var s=a.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return s&&s[0]?{match_:s.slice(1),remainder:a.substr(s[0].length)}:null},"state of aggregation $":function(a){var s=k.patterns.findObserveGroups(a,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(s&&s.remainder.match(/^($|[\s,;\)\]\}])/))return s;var o=a.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return o?{match_:o[0],remainder:a.substr(o[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(a){return k.patterns.findObserveGroups(a,"^{","","","}")},"^($...$)":function(a){return k.patterns.findObserveGroups(a,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(a){return k.patterns.findObserveGroups(a,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(a){return k.patterns.findObserveGroups(a,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(a){return k.patterns.findObserveGroups(a,"_{","","","}")},"_($...$)":function(a){return k.patterns.findObserveGroups(a,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(a){return k.patterns.findObserveGroups(a,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(a){return k.patterns.findObserveGroups(a,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(a){return k.patterns.findObserveGroups(a,"","{","}","")},"{(...)}":function(a){return k.patterns.findObserveGroups(a,"{","","","}")},"$...$":function(a){return k.patterns.findObserveGroups(a,"","$","$","")},"${(...)}$":function(a){return k.patterns.findObserveGroups(a,"${","","","}$")},"$(...)$":function(a){return k.patterns.findObserveGroups(a,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(a){return k.patterns.findObserveGroups(a,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(a){return k.patterns.findObserveGroups(a,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(a){return k.patterns.findObserveGroups(a,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(a){return k.patterns.findObserveGroups(a,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(a){return k.patterns.findObserveGroups(a,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(a){return k.patterns.findObserveGroups(a,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(a){return k.patterns.findObserveGroups(a,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(a){return k.patterns.findObserveGroups(a,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(a){return k.patterns.findObserveGroups(a,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(a){return k.patterns.findObserveGroups(a,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(a){return k.patterns.findObserveGroups(a,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(a){return k.patterns.findObserveGroups(a,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(a){var s;if(s=a.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),s)return{match_:s[0],remainder:a.substr(s[0].length)};var o=k.patterns.findObserveGroups(a,"","$","$","");return o&&(s=o.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),s)?{match_:s[0],remainder:a.substr(s[0].length)}:null},amount2:function(a){return this.amount(a)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(a){if(a.match(/^\([a-z]+\)$/))return null;var s=a.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return s?{match_:s[0],remainder:a.substr(s[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(a,s,o,c,h,d,b,_,$,j){var Xt=function(js,eu){if(typeof eu=="string")return js.indexOf(eu)!==0?null:eu;var Oo=js.match(eu);return Oo?Oo[0]:null},Lt=function(js,eu,Oo){for(var tu=0;eu<js.length;){var Bo=js.charAt(eu),vu=Xt(js.substr(eu),Oo);if(vu!==null&&tu===0)return{endMatchBegin:eu,endMatchEnd:eu+vu.length};if(Bo==="{")tu++;else if(Bo==="}"){if(tu===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];tu--}eu++}return null},fr=Xt(a,s);if(fr===null||(a=a.substr(fr.length),fr=Xt(a,o),fr===null))return null;var Jr=Lt(a,fr.length,c||h);if(Jr===null)return null;var Js=a.substring(0,c?Jr.endMatchEnd:Jr.endMatchBegin);if(d||b){var qs=this.findObserveGroups(a.substr(Jr.endMatchEnd),d,b,_,$);if(qs===null)return null;var zo=[Js,qs.match_];return{match_:j?zo.join(""):zo,remainder:qs.remainder}}else return{match_:Js,remainder:a.substr(Jr.endMatchEnd)}},match_:function(a,s){var o=k.patterns.patterns[a];if(o===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+a+")"];if(typeof o=="function")return k.patterns.patterns[a](s);var c=s.match(o);if(c){var h;return c[2]?h=[c[1],c[2]]:c[1]?h=c[1]:h=c[0],{match_:h,remainder:s.substr(c[0].length)}}return null}},actions:{"a=":function(a,s){a.a=(a.a||"")+s},"b=":function(a,s){a.b=(a.b||"")+s},"p=":function(a,s){a.p=(a.p||"")+s},"o=":function(a,s){a.o=(a.o||"")+s},"q=":function(a,s){a.q=(a.q||"")+s},"d=":function(a,s){a.d=(a.d||"")+s},"rm=":function(a,s){a.rm=(a.rm||"")+s},"text=":function(a,s){a.text_=(a.text_||"")+s},insert:function(a,s,o){return{type_:o}},"insert+p1":function(a,s,o){return{type_:o,p1:s}},"insert+p1+p2":function(a,s,o){return{type_:o,p1:s[0],p2:s[1]}},copy:function(a,s){return s},rm:function(a,s){return{type_:"rm",p1:s||""}},text:function(a,s){return k.go(s,"text")},"{text}":function(a,s){var o=["{"];return k.concatArray(o,k.go(s,"text")),o.push("}"),o},"tex-math":function(a,s){return k.go(s,"tex-math")},"tex-math tight":function(a,s){return k.go(s,"tex-math tight")},bond:function(a,s,o){return{type_:"bond",kind_:o||s}},"color0-output":function(a,s){return{type_:"color0",color:s[0]}},ce:function(a,s){return k.go(s)},"1/2":function(a,s){var o=[];s.match(/^[+\-]/)&&(o.push(s.substr(0,1)),s=s.substr(1));var c=s.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return c[1]=c[1].replace(/\$/g,""),o.push({type_:"frac",p1:c[1],p2:c[2]}),c[3]&&(c[3]=c[3].replace(/\$/g,""),o.push({type_:"tex-math",p1:c[3]})),o},"9,9":function(a,s){return k.go(s,"9,9")}},createTransitions:function(a){var s,o,c,h,d={};for(s in a)for(o in a[s])for(c=o.split("|"),a[s][o].stateArray=c,h=0;h<c.length;h++)d[c[h]]=[];for(s in a)for(o in a[s])for(c=a[s][o].stateArray||[],h=0;h<c.length;h++){var b=a[s][o];if(b.action_){b.action_=[].concat(b.action_);for(var _=0;_<b.action_.length;_++)typeof b.action_[_]=="string"&&(b.action_[_]={type_:b.action_[_]})}else b.action_=[];for(var $=s.split("|"),j=0;j<$.length;j++)if(c[h]==="*")for(var Xt in d)d[Xt].push({pattern:$[j],task:b});else d[c[h]].push({pattern:$[j],task:b})}return d},stateMachines:{}};k.stateMachines={ce:{transitions:k.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(a,s){var o;if((a.d||"").match(/^[0-9]+$/)){var c=a.d;a.d=void 0,o=this.output(a),a.b=c}else o=this.output(a);return k.actions["o="](a,s),o},"d= kv":function(a,s){a.d=s,a.dType="kv"},"charge or bond":function(a,s){if(a.beginsWithBond){var o=[];return k.concatArray(o,this.output(a)),k.concatArray(o,k.actions.bond(a,s,"-")),o}else a.d=s},"- after o/d":function(a,s,o){var c=k.patterns.match_("orbital",a.o||""),h=k.patterns.match_("one lowercase greek letter $",a.o||""),d=k.patterns.match_("one lowercase latin letter $",a.o||""),b=k.patterns.match_("$one lowercase latin letter$ $",a.o||""),_=s==="-"&&(c&&c.remainder===""||h||d||b);_&&!a.a&&!a.b&&!a.p&&!a.d&&!a.q&&!c&&d&&(a.o="$"+a.o+"$");var $=[];return _?(k.concatArray($,this.output(a)),$.push({type_:"hyphen"})):(c=k.patterns.match_("digits",a.d||""),o&&c&&c.remainder===""?(k.concatArray($,k.actions["d="](a,s)),k.concatArray($,this.output(a))):(k.concatArray($,this.output(a)),k.concatArray($,k.actions.bond(a,s,"-")))),$},"a to o":function(a){a.o=a.a,a.a=void 0},"sb=true":function(a){a.sb=!0},"sb=false":function(a){a.sb=!1},"beginsWithBond=true":function(a){a.beginsWithBond=!0},"beginsWithBond=false":function(a){a.beginsWithBond=!1},"parenthesisLevel++":function(a){a.parenthesisLevel++},"parenthesisLevel--":function(a){a.parenthesisLevel--},"state of aggregation":function(a,s){return{type_:"state of aggregation",p1:k.go(s,"o")}},comma:function(a,s){var o=s.replace(/\s*$/,""),c=o!==s;return c&&a.parenthesisLevel===0?{type_:"comma enumeration L",p1:o}:{type_:"comma enumeration M",p1:o}},output:function(a,s,o){var c;if(!a.r)c=[],!a.a&&!a.b&&!a.p&&!a.o&&!a.q&&!a.d&&!o||(a.sb&&c.push({type_:"entitySkip"}),!a.o&&!a.q&&!a.d&&!a.b&&!a.p&&o!==2?(a.o=a.a,a.a=void 0):!a.o&&!a.q&&!a.d&&(a.b||a.p)?(a.o=a.a,a.d=a.b,a.q=a.p,a.a=a.b=a.p=void 0):a.o&&a.dType==="kv"&&k.patterns.match_("d-oxidation$",a.d||"")?a.dType="oxidation":a.o&&a.dType==="kv"&&!a.q&&(a.dType=void 0),c.push({type_:"chemfive",a:k.go(a.a,"a"),b:k.go(a.b,"bd"),p:k.go(a.p,"pq"),o:k.go(a.o,"o"),q:k.go(a.q,"pq"),d:k.go(a.d,a.dType==="oxidation"?"oxidation":"bd"),dType:a.dType}));else{var h;a.rdt==="M"?h=k.go(a.rd,"tex-math"):a.rdt==="T"?h=[{type_:"text",p1:a.rd||""}]:h=k.go(a.rd);var d;a.rqt==="M"?d=k.go(a.rq,"tex-math"):a.rqt==="T"?d=[{type_:"text",p1:a.rq||""}]:d=k.go(a.rq),c={type_:"arrow",r:a.r,rd:h,rq:d}}for(var b in a)b!=="parenthesisLevel"&&b!=="beginsWithBond"&&delete a[b];return c},"oxidation-output":function(a,s){var o=["{"];return k.concatArray(o,k.go(s,"oxidation")),o.push("}"),o},"frac-output":function(a,s){return{type_:"frac-ce",p1:k.go(s[0]),p2:k.go(s[1])}},"overset-output":function(a,s){return{type_:"overset",p1:k.go(s[0]),p2:k.go(s[1])}},"underset-output":function(a,s){return{type_:"underset",p1:k.go(s[0]),p2:k.go(s[1])}},"underbrace-output":function(a,s){return{type_:"underbrace",p1:k.go(s[0]),p2:k.go(s[1])}},"color-output":function(a,s){return{type_:"color",color1:s[0],color2:k.go(s[1])}},"r=":function(a,s){a.r=s},"rdt=":function(a,s){a.rdt=s},"rd=":function(a,s){a.rd=s},"rqt=":function(a,s){a.rqt=s},"rq=":function(a,s){a.rq=s},operator:function(a,s,o){return{type_:"operator",kind_:o||s}}}},a:{transitions:k.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:k.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:k.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(a){if(a.text_){var s={type_:"text",p1:a.text_};for(var o in a)delete a[o];return s}}}},pq:{transitions:k.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(a,s){return{type_:"state of aggregation subscript",p1:k.go(s,"o")}},"color-output":function(a,s){return{type_:"color",color1:s[0],color2:k.go(s[1],"pq")}}}},bd:{transitions:k.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(a,s){return{type_:"color",color1:s[0],color2:k.go(s[1],"bd")}}}},oxidation:{transitions:k.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(a,s){return{type_:"roman numeral",p1:s||""}}}},"tex-math":{transitions:k.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(a){if(a.o){var s={type_:"tex-math",p1:a.o};for(var o in a)delete a[o];return s}}}},"tex-math tight":{transitions:k.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(a,s){a.o=(a.o||"")+"{"+s+"}"},output:function(a){if(a.o){var s={type_:"tex-math",p1:a.o};for(var o in a)delete a[o];return s}}}},"9,9":{transitions:k.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:k.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(a,s){var o=[];return s[0]==="+-"||s[0]==="+/-"?o.push("\\pm "):s[0]&&o.push(s[0]),s[1]&&(k.concatArray(o,k.go(s[1],"pu-9,9")),s[2]&&(s[2].match(/[,.]/)?k.concatArray(o,k.go(s[2],"pu-9,9")):o.push(s[2])),(s[3]||s[4])&&(s[3]==="e"||s[4]==="*"?o.push({type_:"cdot"}):o.push({type_:"times"}))),s[5]&&o.push("10^{"+s[5]+"}"),o},"number^":function(a,s){var o=[];return s[0]==="+-"||s[0]==="+/-"?o.push("\\pm "):s[0]&&o.push(s[0]),k.concatArray(o,k.go(s[1],"pu-9,9")),o.push("^{"+s[2]+"}"),o},operator:function(a,s,o){return{type_:"operator",kind_:o||s}},space:function(){return{type_:"pu-space-1"}},output:function(a){var s,o=k.patterns.match_("{(...)}",a.d||"");o&&o.remainder===""&&(a.d=o.match_);var c=k.patterns.match_("{(...)}",a.q||"");if(c&&c.remainder===""&&(a.q=c.match_),a.d&&(a.d=a.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),a.d=a.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),a.q){a.q=a.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),a.q=a.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var h={d:k.go(a.d,"pu"),q:k.go(a.q,"pu")};a.o==="//"?s={type_:"pu-frac",p1:h.d,p2:h.q}:(s=h.d,h.d.length>1||h.q.length>1?s.push({type_:" / "}):s.push({type_:"/"}),k.concatArray(s,h.q))}else s=k.go(a.d,"pu-2");for(var d in a)delete a[d];return s}}},"pu-2":{transitions:k.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(a,s){a.rm+="^{"+s+"}"},space:function(){return{type_:"pu-space-2"}},output:function(a){var s=[];if(a.rm){var o=k.patterns.match_("{(...)}",a.rm||"");o&&o.remainder===""?s=k.go(o.match_,"pu"):s={type_:"rm",p1:a.rm}}for(var c in a)delete a[c];return s}}},"pu-9,9":{transitions:k.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(a){var s=[];if(a.text_=a.text_||"",a.text_.length>4){var o=a.text_.length%3;o===0&&(o=3);for(var c=a.text_.length-3;c>0;c-=3)s.push(a.text_.substr(c,3)),s.push({type_:"1000 separator"});s.push(a.text_.substr(0,o)),s.reverse()}else s.push(a.text_);for(var h in a)delete a[h];return s},"output-o":function(a){var s=[];if(a.text_=a.text_||"",a.text_.length>4){for(var o=a.text_.length-3,c=0;c<o;c+=3)s.push(a.text_.substr(c,3)),s.push({type_:"1000 separator"});s.push(a.text_.substr(c))}else s.push(a.text_);for(var h in a)delete a[h];return s}}}};var me={go:function(a,s){if(!a)return"";for(var o="",c=!1,h=0;h<a.length;h++){var d=a[h];typeof d=="string"?o+=d:(o+=me._go2(d),d.type_==="1st-level escape"&&(c=!0))}return!s&&!c&&o&&(o="{"+o+"}"),o},_goInner:function(a){return a&&me.go(a,!0)},_go2:function(a){var s;switch(a.type_){case"chemfive":s="";var o={a:me._goInner(a.a),b:me._goInner(a.b),p:me._goInner(a.p),o:me._goInner(a.o),q:me._goInner(a.q),d:me._goInner(a.d)};o.a&&(o.a.match(/^[+\-]/)&&(o.a="{"+o.a+"}"),s+=o.a+"\\,"),(o.b||o.p)&&(s+="{\\vphantom{X}}",s+="^{\\hphantom{"+(o.b||"")+"}}_{\\hphantom{"+(o.p||"")+"}}",s+="{\\vphantom{X}}",s+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(o.b||"")+"}}",s+="_{\\vphantom{2}\\llap{\\smash[t]{"+(o.p||"")+"}}}"),o.o&&(o.o.match(/^[+\-]/)&&(o.o="{"+o.o+"}"),s+=o.o),a.dType==="kv"?((o.d||o.q)&&(s+="{\\vphantom{X}}"),o.d&&(s+="^{"+o.d+"}"),o.q&&(s+="_{\\smash[t]{"+o.q+"}}")):a.dType==="oxidation"?(o.d&&(s+="{\\vphantom{X}}",s+="^{"+o.d+"}"),o.q&&(s+="{\\vphantom{X}}",s+="_{\\smash[t]{"+o.q+"}}")):(o.q&&(s+="{\\vphantom{X}}",s+="_{\\smash[t]{"+o.q+"}}"),o.d&&(s+="{\\vphantom{X}}",s+="^{"+o.d+"}"));break;case"rm":s="\\mathrm{"+a.p1+"}";break;case"text":a.p1.match(/[\^_]/)?(a.p1=a.p1.replace(" ","~").replace("-","\\text{-}"),s="\\mathrm{"+a.p1+"}"):s="\\text{"+a.p1+"}";break;case"roman numeral":s="\\mathrm{"+a.p1+"}";break;case"state of aggregation":s="\\mskip2mu "+me._goInner(a.p1);break;case"state of aggregation subscript":s="\\mskip1mu "+me._goInner(a.p1);break;case"bond":if(s=me._getBond(a.kind_),!s)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+a.kind_+")"];break;case"frac":var c="\\frac{"+a.p1+"}{"+a.p2+"}";s="\\mathchoice{\\textstyle"+c+"}{"+c+"}{"+c+"}{"+c+"}";break;case"pu-frac":var h="\\frac{"+me._goInner(a.p1)+"}{"+me._goInner(a.p2)+"}";s="\\mathchoice{\\textstyle"+h+"}{"+h+"}{"+h+"}{"+h+"}";break;case"tex-math":s=a.p1+" ";break;case"frac-ce":s="\\frac{"+me._goInner(a.p1)+"}{"+me._goInner(a.p2)+"}";break;case"overset":s="\\overset{"+me._goInner(a.p1)+"}{"+me._goInner(a.p2)+"}";break;case"underset":s="\\underset{"+me._goInner(a.p1)+"}{"+me._goInner(a.p2)+"}";break;case"underbrace":s="\\underbrace{"+me._goInner(a.p1)+"}_{"+me._goInner(a.p2)+"}";break;case"color":s="{\\color{"+a.color1+"}{"+me._goInner(a.color2)+"}}";break;case"color0":s="\\color{"+a.color+"}";break;case"arrow":var d={rd:me._goInner(a.rd),rq:me._goInner(a.rq)},b=me._getArrow(a.r);d.rd||d.rq?a.r==="<=>"||a.r==="<=>>"||a.r==="<<=>"||a.r==="<-->"?(b="\\long"+b,d.rd&&(b="\\overset{"+d.rd+"}{"+b+"}"),d.rq&&(a.r==="<-->"?b="\\underset{\\lower2mu{"+d.rq+"}}{"+b+"}":b="\\underset{\\lower6mu{"+d.rq+"}}{"+b+"}"),b=" {}\\mathrel{"+b+"}{} "):(d.rq&&(b+="[{"+d.rq+"}]"),b+="{"+d.rd+"}",b=" {}\\mathrel{\\x"+b+"}{} "):b=" {}\\mathrel{\\long"+b+"}{} ",s=b;break;case"operator":s=me._getOperator(a.kind_);break;case"1st-level escape":s=a.p1+" ";break;case"space":s=" ";break;case"entitySkip":s="~";break;case"pu-space-1":s="~";break;case"pu-space-2":s="\\mkern3mu ";break;case"1000 separator":s="\\mkern2mu ";break;case"commaDecimal":s="{,}";break;case"comma enumeration L":s="{"+a.p1+"}\\mkern6mu ";break;case"comma enumeration M":s="{"+a.p1+"}\\mkern3mu ";break;case"comma enumeration S":s="{"+a.p1+"}\\mkern1mu ";break;case"hyphen":s="\\text{-}";break;case"addition compound":s="\\,{\\cdot}\\,";break;case"electron dot":s="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":s="{\\times}";break;case"prime":s="\\prime ";break;case"cdot":s="\\cdot ";break;case"tight cdot":s="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":s="\\times ";break;case"circa":s="{\\sim}";break;case"^":s="uparrow";break;case"v":s="downarrow";break;case"ellipsis":s="\\ldots ";break;case"/":s="/";break;case" / ":s="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return s},_getArrow:function(a){switch(a){case"->":return"rightarrow";case"":return"rightarrow";case"":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(a){switch(a){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(a){switch(a){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},cn=class Hv extends y{constructor(s){super(g(p({},s),{type:"delim"})),this.value=s.delim,this.size=s.size}static fromJson(s){return new Hv(s)}toJson(){return g(p({},super.toJson()),{delim:this.value,size:this.size})}render(s){return new w(this.value,{type:"middle"})}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);return o!=null&&o.serialize?o.serialize(this,s):W(this.command,this.value)}},un=class Kv extends y{constructor(s){super(g(p({},s),{type:"sizeddelim",value:s.delim})),this.delimType=s.delimType,this.size=s.size}static fromJson(s){return new Kv(s)}toJson(){return g(p({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(s){let o=Q0(this.value,this.size,s,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});return o?(o=this.bind(s,o),this.caret&&(o.caret=this.caret),o):null}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);return o!=null&&o.serialize?o.serialize(this,s):W(this.command,this.value)}},lr=class Wv extends y{constructor(s,o,c,h){var d,b;super({type:"enclose",command:s,style:h.style}),this.body=o,this.backgroundcolor=h.backgroundcolor,c.updiagonalarrow&&(c.updiagonalstrike=!1),c.box&&(c.left=!1,c.right=!1,c.bottom=!1,c.top=!1),this.notation=c,this.shadow=(d=h.shadow)!=null?d:"none",this.strokeWidth=(b=h.strokeWidth)!=null?b:"0.06em",this.strokeWidth||(this.strokeWidth="0.06em"),this.strokeStyle=h.strokeStyle,this.svgStrokeStyle=h.svgStrokeStyle,this.strokeColor=h.strokeColor,this.borderStyle=h.borderStyle,this.padding=h.padding,this.captureSelection=!1}static fromJson(s){return new Wv(s.command,s.body,s.notation,s)}toJson(){return g(p({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(s){var o;if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let c=ne(this.command,this.mode);if(c!=null&&c.serialize)return c.serialize(this,s);let h=(o=this.command)!=null?o:"";if(this.command==="\\enclose"){h+="{"+Object.keys(this.notation).join(" ")+"}";let d="",b="";this.backgroundcolor&&this.backgroundcolor!=="transparent"&&(d+=b+'mathbackground="'+this.backgroundcolor+'"',b=","),this.shadow&&this.shadow!=="auto"&&(d+=b+'shadow="'+this.shadow+'"',b=","),this.strokeWidth||this.strokeStyle!=="solid"?(d+=b+this.borderStyle,b=","):this.strokeColor&&this.strokeColor!=="currentColor"&&(d+=b+'mathcolor="'+this.strokeColor+'"',b=","),d&&(h+=`[${d}]`)}return W(h,this.bodyToLatex(s))}render(s){let o=new B({parent:s},this.style),c=y.createBox(o,this.body);if(!c)return null;let h=Xf(this.borderStyle),d=o.toEm(!this.padding||this.padding==="auto"?{register:"fboxsep"}:{string:this.padding});c.setStyle("position","relative"),c.setStyle("display","inline-block"),c.setStyle("height",c.height+c.depth,"em"),c.setStyle("width",c.width,"em");let b=new w(null,{classes:"ML__notation"}),_=c.height+c.depth+2*d,$=c.width+2*d,j="",Xt=Math.min(d*.2,.05);if(this.notation.horizontalstrike){let Jr=2*d+c.height-Je/2;j+=this.line((d+Xt).toString(),Jr.toString(),(d+c.width-Xt).toString(),Jr.toString())}if(this.notation.verticalstrike){let Jr=d+c.width/2;j+=this.line(Jr.toString(),(d+Xt).toString(),Jr.toString(),(_-d-Xt).toString())}if(this.notation.updiagonalstrike&&(j+=this.line((d+Xt).toString(),(_-d-Xt).toString(),(d+c.width-Xt).toString(),(d+Xt).toString())),this.notation.downdiagonalstrike&&(j+=this.line((d+Xt).toString(),(d+Xt).toString(),(d+c.width-Xt).toString(),(_-d-Xt).toString())),this.notation.updiagonalarrow){j+=this.line(d.toString(),(2*d+c.depth+c.height).toString(),(d+c.width).toString(),d.toString());let Jr=.03*Math.sqrt($*$+_*_)*1,Js=c.width*Jr,qs=(c.depth+c.height)*Jr,zo=d+c.width,js=d;js+qs-.4*Js<0&&(js=.4*Js-qs),j+='<polygon points="',j+=`${zo},${js} ${zo-Js-.4*qs},${js+qs-.4*Js} `,j+=`${zo-.7*Js},${js+.7*qs} ${zo-Js+.4*qs},${js+qs+.4*Js} `,j+=`${zo},${js}`,j+=`" stroke='none' fill="${this.strokeColor}"`,j+="/>"}let Lt=0;if(this.notation.phasorangle){let Jr=ap(o),Js=(c.height+c.depth+2*Jr+2*d).toString(),qs=(c.height+c.depth)/2;j+=this.line(d.toString(),Js,(d+qs+c.width).toString(),Js),j+=this.line(d.toString(),Js,(d+qs).toString(),(d-Jr).toString()),_+=Jr,Lt=qs,c.left+=_/2-d}if(this.notation.longdiv){let Jr=ap(o);_+=Jr,j+=this.line(d.toString(),d.toString(),(d+c.width).toString(),d.toString());let Js=.3;Lt=Js+Jr,c.left+=Js+Jr,c.setTop(d+Jr),j+='<path d="',j+=`M ${d} ${d}  a${Js} ${(c.depth+c.height+2*Jr)/2}, 0, 1, 1, 0 ${c.depth+c.height+2*Jr} "`,j+=` stroke-width="${Zf(o)}" stroke="${this.strokeColor}" fill="none"`,j+="/>"}if(b.width=c.width+2*d+Lt,b.height=c.height+2*d,b.depth=c.depth,b.setStyle("box-sizing","border-box"),b.setStyle("left",`calc(-1 * ${h} - ${d}em)`),b.setStyle("height",`calc( ${c.height+c.depth+2*d}em + ${h})`),b.setStyle("top","0em"),b.setStyle("width",`calc(${c.width+2*d}em + ${h})`),this.backgroundcolor&&b.setStyle("background-color",this.backgroundcolor),this.notation.box&&b.setStyle("border","1px solid red"),this.notation.actuarial&&(b.setStyle("border-top",this.borderStyle),b.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(b.setStyle("border-bottom",this.borderStyle),b.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(b.setStyle("border-radius","8px"),b.setStyle("border",this.borderStyle)),this.notation.circle&&(b.setStyle("border-radius","50%"),b.setStyle("border",this.borderStyle)),this.notation.top&&b.setStyle("border-top",this.borderStyle),this.notation.left&&b.setStyle("border-left",this.borderStyle),this.notation.right&&b.setStyle("border-right",this.borderStyle),this.notation.bottom&&b.setStyle("border-bottom",this.borderStyle),j){let Jr="";this.shadow==="auto"&&(Jr+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)"),this.shadow!=="none"&&(Jr+=`filter: drop-shadow(${this.shadow})`),Jr+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,Jr+=' stroke-linecap="round"',this.svgStrokeStyle&&(Jr+=` stroke-dasharray="${this.svgStrokeStyle}"`),b.svgStyle=Jr,b.svgOverlay=j}let fr=new w([b,c]);return fr.setStyle("position","relative"),fr.setStyle("height",`${Math.floor(100*(b.depth+b.height))/100}em`),fr.setStyle("display","inline-block"),fr.height=b.height,fr.depth=b.depth,fr.width=b.width-2*d,fr.left=d,fr.right=d,this.caret&&(fr.caret=this.caret),fr.wrap(o)}line(s,o,c,h){return`<line x1="${Za(s)}"  y1="${Za(o)}" x2="${Za(c)}" y2="${Za(h)}" vector-effect="non-scaling-stroke"></line>`}};function Za(a){return typeof a=="number"?`${Math.floor(100*a)/100}%`:a}function Xf(a){if(!a)return"1px";let s=a.match(/([0-9][a-zA-Z\%]+)/);return s===null?"1px":s[1]}function Zf(a){return(Math.floor(100*a.metrics.sqrtRuleThickness/a.scalingFactor)/100/10).toString()+"em"}function ap(a){let s=a.isDisplayStyle?Je:a.metrics.defaultRuleThickness;return a.metrics.defaultRuleThickness+a.scalingFactor*s/4}var dn={fractionNavigationOrder:"numerator-denominator"},ft=class Zv extends y{constructor(s,o,c){var h,d,b;super(g(p({},c),{type:"genfrac",displayContainsHighlight:!0})),this.above=s,this.below=o,this.hasBarLine=(h=c==null?void 0:c.hasBarLine)!=null?h:!0,this.continuousFraction=(d=c==null?void 0:c.continuousFraction)!=null?d:!1,this.align=(b=c==null?void 0:c.align)!=null?b:"center",this.numerPrefix=c==null?void 0:c.numerPrefix,this.denomPrefix=c==null?void 0:c.denomPrefix,this.mathstyleName=c==null?void 0:c.mathstyleName,this.leftDelim=c==null?void 0:c.leftDelim,this.rightDelim=c==null?void 0:c.rightDelim}static fromJson(s){return new Zv(s.above,s.below,s)}toJson(){let s={};return this.continuousFraction&&(s.continuousFraction=!0),this.align!=="center"&&(s.align=this.align),this.numerPrefix&&(s.numerPrefix=this.numerPrefix),this.denomPrefix&&(s.denomPrefix=this.denomPrefix),this.leftDelim&&(s.leftDelim=this.leftDelim),this.rightDelim&&(s.rightDelim=this.rightDelim),this.hasBarLine||(s.hasBarLine=!1),this.mathstyleName&&(s.mathstyleName=this.mathstyleName),p(p({},super.toJson()),s)}get children(){if(this._children)return this._children;let s=[];if(dn.fractionNavigationOrder==="denominator-numerator"){for(let o of this.below)s.push(...o.children),s.push(o);for(let o of this.above)s.push(...o.children),s.push(o)}else{for(let o of this.above)s.push(...o.children),s.push(o);for(let o of this.below)s.push(...o.children),s.push(o)}return this._children=s,s}render(s){var o,c;let h=new B({parent:s,mathstyle:this.mathstyleName},this.style),d=h.metrics,b=new B({parent:h,mathstyle:this.continuousFraction?"":"numerator"},this.style),_=this.numerPrefix?new w([new w(this.numerPrefix),y.createBox(b,this.above)],{isTight:b.isTight,type:"ignore"}):(o=y.createBox(b,this.above,{type:"ignore"}))!=null?o:new w(null,{type:"ignore"}),$=new B({parent:h,mathstyle:this.continuousFraction?"":"denominator"},this.style),j=this.denomPrefix?new w([new w(this.denomPrefix),y.createBox($,this.below,{type:"ignore"})]):(c=y.createBox($,this.below,{type:"ignore"}))!=null?c:new w(null,{type:"ignore"}),Xt=this.hasBarLine?d.defaultRuleThickness:0,Lt,fr=0,Jr;h.isDisplayStyle?(Lt=b.metrics.num1,fr=Xt>0?3*Xt:7*Xt,Jr=$.metrics.denom1):(Xt>0?(Lt=b.metrics.num2,fr=Xt):(Lt=b.metrics.num3,fr=3*d.defaultRuleThickness),Jr=$.metrics.denom2);let Js=[];this.isSelected&&Js.push("ML__selected");let qs=_.depth,zo=j.height,js;if(Xt<=0){let t1=Lt-qs-(zo-Jr);t1<fr&&(Lt+=(fr-t1)/2,Jr+=(fr-t1)/2),js=new te({individualShift:[{box:_,shift:-Lt,classes:[...Js,Ya(this.align)]},{box:j,shift:Jr,classes:[...Js,Ya(this.align)]}]}).wrap(h)}else{let t1=new w(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});t1.softWidth=Math.max(_.width,j.width),t1.height=Xt/2,t1.depth=Xt/2;let e1=Pe+Xt/2;Lt<fr+qs+e1&&(Lt=fr+qs+e1);let r1=Pe-Xt/2;Jr<fr+zo-r1&&(Jr=fr+zo-r1),js=new te({individualShift:[{box:j,shift:Jr,classes:[...Js,Ya(this.align)]},{box:t1,shift:-r1,classes:Js},{box:_,shift:-Lt,classes:[...Js,Ya(this.align)]}]}).wrap(h)}let eu=h.isDisplayStyle?d.delim1:d.delim2,Oo=this.leftDelim?this.bind(s,rn("open",this.leftDelim,eu,!0,s,{style:this.style,mode:this.mode,isSelected:this.isSelected})):ar(h,"ML__open"),tu=null;this.continuousFraction?tu=new w(null,{type:"close"}):this.rightDelim?tu=this.bind(s,rn("close",this.rightDelim,eu,!0,s,{style:this.style,mode:this.mode,isSelected:this.isSelected})):tu=ar(h,"ML__close");let Bo=new w([Oo,js,tu],{isTight:h.isTight,type:"inner",classes:"ML__mfrac"}),vu=this.bind(s,Bo);return this.caret&&(vu.caret=this.caret),this.attachSupsub(s,{base:vu})}};function Ya(a){var s;return(s={left:"ML__left",right:"ML__right",center:"ML__center"}[a])!=null?s:"ML__center"}var pe=class Qv extends y{constructor(s,o){var c;super({type:"latex",value:s,mode:"latex"}),this.isSuggestion=(c=o==null?void 0:o.isSuggestion)!=null?c:!1,this.isError=!1}static fromJson(s){let o=new Qv(s.value);return s.isSuggestion&&(o.isSuggestion=!0),s.isError&&(o.isError=!0),o}toJson(){let s={};return this.isSuggestion&&(s.isSuggestion=!0),this.isError&&(s.isError=!0),p({type:"latex",value:this.value},s)}render(s){let o=new w(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return o?(this.caret&&(o.caret=this.caret),this.bind(s,o)):null}},Nt=class hy extends y{constructor(s=""){super({type:"latexgroup",mode:"latex"}),this.body=[...s].map(o=>new pe(o)),this.skipBoundary=!0}static fromJson(s){return new hy}toJson(){return super.toJson()}render(s){let o=y.createBox(s,this.body);return o?(this.caret&&(o.caret=this.caret),this.bind(s,o)):null}_serialize(s){var o,c;return(c=(o=this.body)==null?void 0:o.map(h=>h.value).join(""))!=null?c:""}},di=class dy extends y{constructor(s,o){super(g(p({},o),{type:"extensible-symbol",isFunction:o==null?void 0:o.isFunction})),this.value=s,this.variant=o==null?void 0:o.variant,this.subsupPlacement=o==null?void 0:o.limits}static fromJson(s){return new dy(s.symbol,s)}toJson(){let s=super.toJson();return this.variant&&(s.variant=this.variant),this.subsupPlacement&&(s.limits=this.subsupPlacement),this.value&&(s.symbol=this.value),s}render(s){var o;let c=s.isDisplayStyle&&this.value!=="\\smallint",h=new w(this.value,{fontFamily:c?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(c?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:s.scalingFactor,isSelected:this.isSelected});if(!h)return null;h.right=h.italic;let d=(h.height-h.depth)/2-Pe*s.scalingFactor,b=h.italic;h.setTop(d);let _=h;if(this.superscript||this.subscript){let $=(o=this.subsupPlacement)!=null?o:"auto";$==="auto"&&s.isDisplayStyle&&($="over-under"),_=$==="over-under"?this.attachLimits(s,{base:h,baseShift:d,slant:b}):this.attachSupsub(s,{base:h})}return new w(this.bind(s,_),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(s)}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);if(o!=null&&o.serialize)return o.serialize(this,s);let c=[];return c.push(this.command),this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&c.push("\\limits"),this.subsupPlacement==="adjacent"&&c.push("\\nolimits"),this.subsupPlacement==="auto"&&c.push("\\displaylimits")),c.push(this.supsubToLatex(s)),P(c)}},gt=class fy extends y{constructor(s){let o=s.body;super(g(p({},s),{type:"overlap",body:typeof o=="string"?[new y({value:o})]:o,style:s==null?void 0:s.style})),this.skipBoundary=!0,this.align=s==null?void 0:s.align,this.boxType=s==null?void 0:s.boxType}static fromJson(s){return new fy(s)}toJson(){let s={};return this.align&&(s.align=this.align),this.boxType&&(s.boxType=this.boxType),p(p({},super.toJson()),s)}render(s){let o=y.createBox(s,this.body,{classes:"ML__inner"});return o?(this.caret&&(o.caret=this.caret),this.bind(s,new w([o,new w(null,{classes:"ML__fix"})],{classes:this.align==="right"?"ML__rlap":"ML__llap",type:this.boxType}))):null}},Ae=class py extends y{constructor(s){var o,c,h,d;super({type:"overunder",command:s.command,style:s.style,mode:s.mode,body:s.body,skipBoundary:(o=s.skipBoundary)!=null?o:!0}),this.subsupPlacement=s.supsubPlacement,this.svgAbove=s.svgAbove,this.svgBelow=s.svgBelow,this.svgBody=s.svgBody,this.above=s.above,this.below=s.below,this.boxType=(c=s.boxType)!=null?c:"ord",this.paddedBody=(h=s.paddedBody)!=null?h:!1,this.paddedLabels=(d=s.paddedLabels)!=null?d:!1}static fromJson(s){return new py(s)}toJson(){let s=super.toJson();return this.skipBoundary||(s.skipBoundary=!1),this.subsupPlacement&&(s.subsupPlacement=this.subsupPlacement),this.svgAbove&&(s.svgAbove=this.svgAbove),this.svgBelow&&(s.svgBelow=this.svgBelow),this.svgBody&&(s.svgBody=this.svgBody),this.boxType!=="ord"&&(s.boxType=this.boxType),this.paddedBody&&(s.paddedBody=!0),this.paddedLabels&&(s.paddedLabels=!0),s}render(s){let o=this.svgBody?Gi(this.svgBody):y.createBox(s,this.body,{type:"ignore"}),c=new B({parent:s,mathstyle:"scriptstyle"},this.style),h=null;this.svgAbove?h=Gi(this.svgAbove):this.above&&(h=y.createBox(c,this.above,{type:"ignore"}));let d=null;this.svgBelow?d=Gi(this.svgBelow):this.below&&(d=y.createBox(c,this.below,{type:"ignore"})),this.paddedBody&&(o=new w([ar(s,"ML__open"),o,ar(s,"ML__close")],{type:"ignore"}));let b=Yf(s,{base:o,above:h,below:d,type:this.boxType==="bin"||this.boxType==="rel"?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return b?(this.subsupPlacement==="over-under"?b=this.attachLimits(s,{base:b,type:b.type}):b=this.attachSupsub(s,{base:b}),this.caret&&(b.caret=this.caret),this.bind(s,b)):null}};function Yf(a,s){if(!s.base)return null;if(!s.above&&!s.below){let _=new w(s.base,{type:s.type});return _.setStyle("position","relative"),_}let o=0;s.above&&(o=a.metrics.bigOpSpacing5);let c=null,h=s.base,d=0,b=["ML__center"];if(s.paddedAboveBelow&&b.push("ML__label_padding"),s.below&&s.above){let _=a.metrics.bigOpSpacing5+s.below.height+s.below.depth+h.depth+d;c=new te({bottom:_,children:[a.metrics.bigOpSpacing5,{box:s.below,classes:b},{box:h,classes:["ML__center"]},o,{box:s.above,classes:b},a.metrics.bigOpSpacing5]})}else s.below?c=new te({top:h.height-d,children:[a.metrics.bigOpSpacing5,{box:s.below,classes:b},{box:h,classes:["ML__center"]}]}):s.above&&(c=new te({bottom:h.depth+d,children:[{box:h,classes:["ML__center"]},o,{box:s.above,classes:b},a.metrics.bigOpSpacing5]}));return new w(c,{type:s.type})}var Ft=class my extends y{constructor(s){var o,c,h,d;super(g(p({},s),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=(o=s.isInvisible)!=null?o:!1,this.smashDepth=(c=s.smashDepth)!=null?c:!1,this.smashHeight=(h=s.smashHeight)!=null?h:!1,this.smashWidth=(d=s.smashWidth)!=null?d:!1}static fromJson(s){return new my(s)}toJson(){let s={};return this.isInvisible&&(s.isInvisible=!0),this.smashDepth&&(s.smashDepth=!0),this.smashHeight&&(s.smashHeight=!0),this.smashWidth&&(s.smashWidth=!0),p(p({},super.toJson()),s)}render(s){let o=new B({parent:s,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,y.createBox(o,this.body,{classes:"ML__inner"});let c=y.createBox(this.isInvisible?o:s,this.body);if(!c)return null;if(this.smashWidth){let h=new w(null,{classes:"ML__fix"});return new w([c,h],{classes:"ML__rlap"}).wrap(s)}if(!this.smashHeight&&!this.smashDepth)return c;if(this.smashHeight&&(c.height=0),this.smashDepth&&(c.depth=0),c.children)for(let h of c.children)this.smashHeight&&(h.height=0),this.smashDepth&&(h.depth=0);return new te({firstBaseline:[{box:c}]},{type:c.type}).wrap(s)}},$t=class vy extends y{constructor(s){var o;super(p({type:"spacing"},s)),this.width=s==null?void 0:s.width,this._braced=(o=s==null?void 0:s.braced)!=null?o:!1}static fromJson(s){return new vy(s)}toJson(){let s=super.toJson();return this.width!==void 0&&(s.width=this.width),this._braced&&(s.braced=!0),s}render(s){var o;if(this.command==="space")return new w(this.mode==="math"?null:" ");let c;if(this.width!==void 0)c=new w(null,{classes:"ML__mspace"}),c.left=s.toEm(this.width);else{let h=(o={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])!=null?o:"ML__mediumspace";c=new w(null,{classes:h})}return c=this.bind(s,c),this.caret&&(c.caret=this.caret),c}_serialize(s){var o;if(!s.expandMacro&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let c=ne(this.command,this.mode);if(c!=null&&c.serialize)return c.serialize(this,s);let h=(o=this.command)!=null?o:"";return this.width===void 0?h:this._braced&&!("register"in this.width)?`${h}{${_e(this.width)}}`:`${h}${_e(this.width)}`}},mn=class Cy extends y{constructor(s){var o;super(g(p({},s),{type:"surd",mode:(o=s.mode)!=null?o:"math",style:s.style,displayContainsHighlight:!0,body:s.body})),this.above=s.index}static fromJson(s){return new Cy(g(p({},s),{index:s.above}))}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);if(o!=null&&o.serialize)return o.serialize(this,s);let c=this.command,h=this.bodyToLatex(s);return this.above&&!this.hasEmptyBranch("above")?W(`${c}[${this.aboveToLatex(s)}]`,h):/^[0-9]$/.test(h)?`${c}${h}`:W(c,h)}get children(){if(this._children)return this._children;let s=[];if(this.above)for(let o of this.above)s.push(...o.children),s.push(o);if(this.body)for(let o of this.body)s.push(...o.children),s.push(o);return this._children=s,s}render(s){var o;let c=new B({parent:s,mathstyle:"cramp"},this.style),h=(o=y.createBox(c,this.body,{type:"inner"}))!=null?o:new w(null),d=c.scalingFactor,b=c.metrics.defaultRuleThickness/d,_=s.isDisplayStyle?Je:b,$=new w(null,{classes:"ML__sqrt-line",style:this.style});$.height=b,$.softWidth=h.width;let j=d*(b+_/4),Xt=Math.max(d*2*_,h.height+h.depth)+j+b,Lt=new B({parent:s},this.style),fr=this.bind(Lt,new w(rn("inner","\\surd",Xt,!1,Lt,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!fr)return null;let Jr=fr.height+fr.depth-b;Jr>h.height+h.depth+j&&(j=(j+Jr-(h.height+h.depth))/2),fr.setTop(fr.height-h.height-j);let Js=this.bind(s,new te({firstBaseline:[{box:new w(h)},j-2*b,{box:$},b]})),qs=y.createBox(new B({parent:s,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!qs){let eu=new w([fr,Js],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return eu.setStyle("display","inline-block"),eu.setStyle("height",eu.height+eu.depth,"em"),this.caret&&(eu.caret=this.caret),this.bind(s,eu)}let zo=new te({shift:-.6*(Math.max(fr.height,Js.height)-Math.max(fr.depth,Js.depth)),children:[{box:qs}]}),js=new w([new w(zo,{classes:"ML__sqrt-index",type:"ignore"}),fr,Js],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return js.height=fr.height,js.depth=fr.depth,this.caret&&(js.caret=this.caret),this.bind(s,js)}},nc=class extends w{constructor(a){super(null,{type:"skip"}),this._width=a}toMarkup(){return`<span style="display:inline-block;width:${Math.ceil(this.width*100)/100}em"></span>`}};function eo(a,s){if(!a.parent)return;let o=a.parent.children,c=o.indexOf(a),h=c-1;for(;h>=0&&o[h].type==="ignore";)h-=1;if(h<0&&a.parent.parent&&a.parent.type==="lift"){eo(a.parent,s);return}c>0&&o[c-1].type==="skip"?o[c-1].width+=s:o.splice(c,0,new nc(s))}var Qf={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},eg={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function tg(a){to(a,(s,o)=>{o.type==="bin"&&(!s||/^(middle|bin|op|rel|open|punct)$/.test(s.type))&&(o.type="ord"),(s==null?void 0:s.type)==="bin"&&/^(rel|close|punct)$/.test(o.type)&&(s.type="ord"),o.type!=="ignore"&&(s=o)})}function Vt(a,s){if(!a.children)return a;let o=a.children;tg(o);let c=s.getRegisterAsEm("thinmuskip"),h=s.getRegisterAsEm("medmuskip"),d=s.getRegisterAsEm("thickmuskip");return to(o,(b,_)=>{var $,j,Xt;if(!b)return;let Lt=b.type,fr=_.isTight?($=eg[Lt])!=null?$:null:(j=Qf[Lt])!=null?j:null,Jr=(Xt=fr==null?void 0:fr[_.type])!=null?Xt:null;Jr===3&&eo(_,c),Jr===4&&eo(_,h),Jr===5&&eo(_,d)}),a}function to(a,s,o=void 0){if(!a)return o;a=[...a];for(let c of a)c.type==="lift"?o=to(c.children,s,o):c.type==="ignore"?to(c.children,s):(s(o,c),to(c.children,s),o=c);return o}var mi=class wy extends y{constructor(s){super({type:"tooltip",command:s.command,mode:s.mode,style:s.style,body:s.body,displayContainsHighlight:!0}),this.tooltip=new y({type:"root",mode:s.content,body:s.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(s){return new wy(g(p({},s),{tooltip:bt(s.tooltip)}))}toJson(){var s;let o=(s=this.tooltip.body)==null?void 0:s.filter(c=>c.type!=="first").map(c=>c.toJson());return g(p({},super.toJson()),{tooltip:o})}render(s){let o=y.createBox(s,this.body);if(!o)return null;let c=new B({parent:s,mathstyle:"displaystyle"},{fontSize:Ui}),h=Tr(Vt(new w(this.tooltip.render(c),{classes:"ML__tooltip-content"}),c)),d=new w([h,o],{classes:"ML__tooltip-container"});return this.caret&&(d.caret=this.caret),this.bind(s,d)}},yt=class _y extends y{constructor(s,o){super(g(p({},o),{type:"operator",isFunction:o==null?void 0:o.isFunction})),this.value=s,this.variant=o==null?void 0:o.variant,this.variantStyle=o==null?void 0:o.variantStyle,this.subsupPlacement=o==null?void 0:o.limits}static fromJson(s){return new _y(s.symbol,s)}toJson(){let s=super.toJson();return this.variant&&(s.variant=this.variant),this.variantStyle&&(s.variantStyle=this.variantStyle),this.subsupPlacement&&(s.limits=this.subsupPlacement),this.value&&(s.symbol=this.value),s}render(s){var o;let c=new w(this.value,{type:"op",mode:"math",maxFontSize:s.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:s.letterShapeStyle}),h=c;if(this.superscript||this.subscript){let d=(o=this.subsupPlacement)!=null?o:"auto";h=d==="over-under"||d==="auto"&&s.isDisplayStyle?this.attachLimits(s,{base:c}):this.attachSupsub(s,{base:c})}return new w(this.bind(s,h),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(s)}_serialize(s){if(!(s.expandMacro||s.skipStyles||s.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let o=ne(this.command,this.mode);if(o!=null&&o.serialize)return o.serialize(this,s);let c=[this.command];return this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&c.push("\\limits"),this.subsupPlacement==="adjacent"&&c.push("\\nolimits"),this.subsupPlacement==="auto"&&c.push("\\displaylimits")),c.push(this.supsubToLatex(s)),P(c)}};function bt(a){if(ee(a))return a.map(c=>bt(c));if(typeof a=="string")return y.fromJson(a);a=p({},a);for(let c of Pr)a[c]&&(a[c]=bt(a[c]));a.args&&(a.args=rg(a.args)),a.array&&(a.array=bt(a.array));let s=a.type,o;s==="accent"&&(o=Ir.fromJson(a)),s==="array"&&(o=z.fromJson(a)),s==="box"&&(o=ot.fromJson(a)),s==="chem"&&(o=Qn.fromJson(a)),s==="composition"&&(o=nn.fromJson(a)),s==="delim"&&(o=cn.fromJson(a)),s==="enclose"&&(o=lr.fromJson(a)),s==="error"&&(o=ht.fromJson(a)),s==="extensible-symbol"&&(o=di.fromJson(a)),s==="genfrac"&&(o=ft.fromJson(a)),s==="group"&&(o=on.fromJson(a)),s==="latex"&&(o=pe.fromJson(a)),s==="latexgroup"&&(o=Nt.fromJson(a)),s==="leftright"&&(o=Y.fromJson(a)),s==="macro"&&(o=an.fromJson(a)),s==="macro-argument"&&(o=Ja.fromJson(a)),s==="operator"&&(o=yt.fromJson(a)),s==="overlap"&&(o=gt.fromJson(a)),s==="overunder"&&(o=Ae.fromJson(a)),s==="placeholder"&&(o=Le.fromJson(a)),s==="prompt"&&(o=sn.fromJson(a)),s==="phantom"&&(o=Ft.fromJson(a)),s==="sizeddelim"&&(o=un.fromJson(a)),s==="spacing"&&(o=$t.fromJson(a)),s==="subsup"&&(o=sr.fromJson(a)),s==="surd"&&(o=mn.fromJson(a)),s==="text"&&(o=qe.fromJson(a)),s==="tooltip"&&(o=mi.fromJson(a)),o||(o=y.fromJson(a));for(let c of Pr)a[c]&&o.setChildren(a[c],c);return a.verbatimLatex!==void 0&&(o.verbatimLatex=a.verbatimLatex),a.subsupPlacement&&(o.subsupPlacement=a.subsupPlacement),a.explicitSubsupPlacement&&(o.explicitSubsupPlacement=!0),a.isFunction&&(o.isFunction=!0),a.skipBoundary&&(o.skipBoundary=!0),a.captureSelection&&(o.captureSelection=!0),o}function rg(a){if(a){if(typeof a=="string")return a;if(Array.isArray(a))return a.map(s=>s==="<null>"?null:typeof s=="object"&&"group"in s?{group:s.group.map(o=>bt(o))}:typeof s=="object"&&"atoms"in s?s.atoms.map(o=>bt(o)):s)}}function ro(a,s){!a||!s||(ee(a)?a.forEach(o=>ro(o,s)):typeof a=="object"&&a.applyStyle(s,{unstyledOnly:!0}))}function io(a,s,o,c){function h(b,_){for(let $ of d)if($.style[b]!==_)return!1;return!0}if(s=a.normalizeRange(s),s[0]===s[1])return!1;let d=a.getAtoms(s,{includeChildren:!0});c.operation==="toggle"&&(o.color&&h("color",o.color)&&(o.color="none",delete o.verbatimColor),o.backgroundColor&&h("backgroundColor",o.backgroundColor)&&(o.backgroundColor="none",delete o.verbatimBackgroundColor),o.fontFamily&&h("fontFamily",o.fontFamily)&&(o.fontFamily="none"),o.fontSeries&&h("fontSeries",o.fontSeries)&&(o.fontSeries="auto"),o.fontShape&&h("fontShape",o.fontShape)&&(o.fontShape="auto"),o.fontSize&&h("fontSize",o.fontSize)&&(o.fontSize=Ui),o.variant&&h("variant",o.variant)&&(o.variant="normal"),o.variantStyle&&h("variantStyle",o.variantStyle)&&(o.variantStyle=""));for(let b of d)b.applyStyle(o);return!0}function sp(a){return{up:"italic",bold:"bolditalic",italic:"italic",bolditalic:"bolditalic","":"italic"}[a??""]}function no(a){return{up:"up",bold:"bold",italic:void 0,bolditalic:"bold","":void 0}[a??""]}var lp={acute:714,grave:715,dot:729,ddot:168,dddot:8411,ddddot:8412,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};M(Object.keys(lp),"{body:auto}",{createAtom:a=>new Ir(g(p({},a),{body:C(a.args[0]),accentChar:lp[a.command.slice(1)]}))});M(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:a=>{let s=ll(C(a.args[0]));return new Ir(g(p({},a),{body:C(a.args[0]),svgAccent:a.command.slice(1)+(s.length>5?"4":["1","1","2","2","3","3"][s.length])}))}});M(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:a=>new Ir(g(p({},a),{body:C(a.args[0]),svgAccent:"overarc"}))});M(["underarc","underparen"],"{body:auto}",{createAtom:a=>new Ae(g(p({},a),{body:C(a.args[0]),svgBelow:"underarc"}))});M("utilde","{body:auto}",{createAtom:a=>{let s=C(a.args[0]),o=ll(s),c="widetilde"+(o.length>5?"4":["1","1","2","2","3","3"][o.length]);return new Ae(g(p({},a),{body:s,svgBelow:c,boxType:oi(s)}))}});M("^","{:string}",{createAtom:a=>{var s;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:a.args[0]&&(s={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[a.args[0]])!=null?s:"^"}))}});M("`","{:string}",{createAtom:a=>{var s;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:a.args[0]&&(s={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[a.args[0]])!=null?s:"`"}))}});M("'","{:string}",{createAtom:a=>{var s;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:a.args[0]&&(s={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[a.args[0]])!=null?s:"'"}))}});M('"',"{:string}",{createAtom:a=>{var s,o;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:(s=a.args)!=null&&s[0]?(o={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[a.args[0]])!=null?o:'"'+a.args[0]:'"'}))}});M(".","{:string}",{createAtom:a=>{var s,o;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:(s=a.args)!=null&&s[0]?(o={a:"",e:"",i:"i",o:"",u:"u",A:"",E:"",I:"",O:"",U:"U"}[a.args[0]])!=null?o:"."+a.args[0]:"."}))}});M("=","{:string}",{createAtom:a=>{var s,o;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:(s=a.args)!=null&&s[0]?(o={a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[a.args[0]])!=null?o:"="+a.args[0]:"="}))}});M("~","{:string}",{createAtom:a=>{var s;return new y(g(p({type:"mord"},a),{isFunction:!1,limits:"adjacent",value:a.args[0]&&(s={n:"",N:"",a:"",o:"",A:"",O:""}[a.args[0]])!=null?s:""}))}});M("c","{:string}",{createAtom:a=>{var s;return new y(g(p({},a),{type:"mord",isFunction:!1,limits:"adjacent",value:a.args[0]&&(s={c:"",C:""}[a.args[0]])!=null?s:""}))}});M("enclose","{notation:string}[style:string]{body:auto}",{createAtom:a=>{var s,o;let c=a.args,h={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:(s=a.style)!=null?s:{}};if(c[1]){let b=c[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let _ of b){let $=_.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if($)h.strokeWidth=$[1],h.strokeStyle=$[2],h.strokeColor=$[3];else{let j=_.match(/\s*([a-z]*)\s*=\s*"(.*)"/);j&&(j[1]==="mathbackground"?h.backgroundcolor=j[2]:j[1]==="mathcolor"?h.strokeColor=j[2]:j[1]==="padding"?h.padding=j[2]:j[1]==="shadow"&&(h.shadow=j[2]))}}h.strokeStyle==="dashed"?h.svgStrokeStyle="5,5":h.strokeStyle==="dotted"&&(h.svgStrokeStyle="1,5")}h.borderStyle=`${h.strokeWidth} ${h.strokeStyle} ${h.strokeColor}`;let d={};return((o=c[0])!=null?o:"").split(/[, ]/).filter(b=>b.length>0).forEach(b=>{d[b.toLowerCase()]=!0}),new lr(a.command,C(c[2]),d,h)}});M("cancel","{body:auto}",{createAtom:a=>{var s;return new lr(a.command,C(a.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(s=a.style)!=null?s:{}})}});M("bcancel","{body:auto}",{createAtom:a=>{var s;return new lr(a.command,C(a.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(s=a.style)!=null?s:{}})}});M("xcancel","{body:auto}",{createAtom:a=>{var s;return new lr(a.command,C(a.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(s=a.style)!=null?s:{}})}});qo(["math","displaymath"],Re);qo("center",Re);Ct(["multline","multline*"],"",Re);M("displaylines","",{parse:a=>{if(a.skipWhitespace(),!a.match("<{>"))return[];let s=[],o=[];a.mathlist.length>0&&s.push([a.mathlist]),a.beginContext({tabular:!0,root:!0});do{if(a.end()||a.match("<}>"))break;a.matchColumnSeparator()||a.matchRowSeparator()?(s.push([o]),o=[]):o.push(...a.scan(h=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(h)))}while(!0);a.endContext(),s.push([o]);let c=a.scan();return c.length>0&&s.push([c]),s},createAtom:a=>new z("lines",a.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}],classes:["ML__multiline_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})});Ct("split","",Re);Ct(["gather","gather*","gathered"],"",Re);Ct(["equation","equation*","subequations"],"",Re);qo(["align","align*","eqnarray"],Re,{tabular:!0});Ct(["aligned"],"",Re);Ct("array","{columns:colspec}",(a,s,o,c)=>new z(a,s,o,{columns:c[0],mathstyleName:"textstyle"}));Ct(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",Re);Ct(["smallmatrix","smallmatrix*"],"[columns:colspec]",Re);Ct(["cases","dcases","rcases"],"",Re);function Re(a,s=[[[]]],o=[],c=[],h){switch(a){case"math":return new z(a,s,o,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"displaymath":return new z(a,s,o,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"center":return new z(a,s,o,{columns:[{align:"c"}],classes:["ML__center_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"multline":case"multline*":return new z(a,s,o,{columns:[{align:"m"}],leftDelim:".",rightDelim:".",isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"split":return new z(a,s,o,{columns:[{align:"r"},{align:"l"}],minColumns:2,minRows:1,isRoot:!1});case"gather":case"gather*":return new z(a,s,o,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1,isRoot:!0,classes:["ML__gather_environment"]});case"gathered":return new z(a,s,o,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1});case"equation":case"equation*":case"subequations":return new z(a,s,o,{columns:[{align:"c"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"aligned":{let d=0;for(let $ of s)d=Math.max(d,$.length);let b=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],_=2;for(;_<d;)b.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),_+=2;return b.push({gap:0}),new z(a,s,o,{arraycolsep:0,columns:b,minColumns:2,minRows:1,isRoot:a!=="aligned"})}case"eqnarray":return new z(a,s,o,{arraycolsep:0,columns:[{gap:0},{align:"r"},{align:"c"},{align:"l"}],minColumns:3,maxColumns:3,minRows:1,isRoot:!0,classes:["ML__eqnarray_environment"]});case"align":case"align*":return new z(a,s,o,{arraycolsep:0,columns:[{gap:0},{align:"r"},{gap:.25},{align:"l"}],minColumns:2,maxColumns:2,minRows:1,isRoot:!0,classes:["ML__align_environment"]});case"pmatrix":case"pmatrix*":return new z(a,s,o,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:pi(c[0],h)});case"bmatrix":case"bmatrix*":return new z(a,s,o,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:pi(c[0],h)});case"Bmatrix":case"Bmatrix*":return new z(a,s,o,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:pi(c[0],h)});case"vmatrix":case"vmatrix*":return new z(a,s,o,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:pi(c[0],h)});case"Vmatrix":case"Vmatrix*":return new z(a,s,o,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:pi(c[0],h)});case"matrix":case"matrix*":return new z(a,s,o,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:pi(c==null?void 0:c[0],h)});case"smallmatrix":case"smallmatrix*":return new z(a,s,o,{mathstyleName:"scriptstyle",columns:pi(c==null?void 0:c[0],h),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new z(a,s,o,{mathstyleName:a==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:cp()});case"rcases":return new z(a,s,o,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:cp()});case"lines":return new z(a,s,o,{leftDelim:".",rightDelim:".",columns:[{align:"l"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})}return new z(a,s,o,{mathstyleName:"textstyle"})}function pi(a,s=10){return a??Array(s).fill({align:"c"})}function cp(a=10){let s=[];for(let o=0;o<a;o++)o>0&&s.push({gap:1}),s.push({align:"l"});return s}M(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:a=>{var s;return new Ae(g(p({},a),{body:C((s=a.args)==null?void 0:s[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:a.command.slice(1)}))}});M("overbrace","{:auto}",{createAtom:a=>new Ae(g(p({},a),{body:C(a.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:a.command.slice(1)}))});M(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:a=>new Ae(g(p({},a),{body:C(a.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:a.command.slice(1)}))});M(["underbrace"],"{:auto}",{createAtom:a=>new Ae(g(p({},a),{body:C(a.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:a.command.slice(1)}))});M(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:a=>{var s,o,c,h,d;return new Ae(g(p({},a),{svgBody:a.command.slice(1),above:((o=C((s=a.args)==null?void 0:s[1]))==null?void 0:o.length)===0?void 0:C((c=a.args)==null?void 0:c[1]),below:(d=C((h=a.args)==null?void 0:h[0]))!=null?d:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(a,s)=>a.command+(a.hasEmptyBranch("below")?"":`[${a.belowToLatex(s)}]`)+`{${a.aboveToLatex(s)}}${a.supsubToLatex(s)}`});M(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:a=>new yt(a.command.slice(1),g(p({},a),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))});M(["liminf","limsup"],"",{ifMode:"math",createAtom:a=>new yt({"\\liminf":"lim inf","\\limsup":"lim sup"}[a.command],g(p({},a),{limits:"over-under",variant:"main"}))});M(["lim","mod"],"",{ifMode:"math",createAtom:a=>new yt(a.command.slice(1),g(p({},a),{limits:"over-under",variant:"main"}))});M(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:a=>new yt(a.command.slice(1),g(p({},a),{limits:"over-under",isFunction:!0,variant:"main"}))});M("ang","{:math}",{ifMode:"math",createAtom:a=>new y(g(p({},a),{body:C(a.args[0])})),serialize:(a,s)=>`\\ang{${a.bodyToLatex(s)}}`,render:(a,s)=>{let o=a.createBox(s),c=o.caret;o.caret=void 0;let h=new w("",{style:g(p({},a.style),{variant:"normal",variantStyle:"up"})});return new w([o,h],{type:"inner",isSelected:a.isSelected,caret:c})}});M("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:a=>new mn(g(p({},a),{body:C(a.args[1]),index:a.args[0]?C(a.args[0]):void 0}))});M(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:a=>{let s=p({},a),o=a.command,c=a.args;switch(o){case"\\dfrac":case"\\frac":case"\\tfrac":s.hasBarLine=!0;break;case"\\atopfrac":s.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s.hasBarLine=!1,s.leftDelim="(",s.rightDelim=")";break;case"\\cfrac":s.hasBarLine=!0,s.continuousFraction=!0;break}switch(o){case"\\dfrac":case"\\dbinom":s.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":s.mathstyleName="textstyle";break}return new ft(c[0]?C(c[0]):[new Le],c[1]?C(c[1]):[new Le],s)},serialize:(a,s)=>{let o=a.aboveToLatex(s),c=a.belowToLatex(s);return/^[0-9]$/.test(o)&&/^[0-9]$/.test(c)?`${a.command}${o}${c}`:W(a.command,o,c)}});M(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:a=>{let s=p({},a),o=a.args;return s.hasBarLine=!0,s.continuousFraction=!0,o[0]==="r"&&(s.align="right"),o[0]==="l"&&(s.align="left"),new ft(o[1]?C(o[1]):[new Le],o[2]?C(o[2]):[new Le],s)},serialize:(a,s)=>{let o=a.aboveToLatex(s),c=a.belowToLatex(s);return W(a.command,o,c)}});M(["brace","brack"],"",{infix:!0,createAtom:a=>new ft(C(a.args[0]),C(a.args[1]),g(p({},a),{hasBarLine:!1,leftDelim:a.command==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:a.command==="\\brace"?"\\rbrace":"\\rbrack"})),serialize:(a,s)=>P([a.aboveToLatex(s),a.command,a.belowToLatex(s)])});M(["over","atop","choose"],"",{infix:!0,createAtom:a=>{let s,o,c=a.args;return a.command==="\\choose"&&(s="(",o=")"),new ft(C(c[0]),C(c[1]),g(p({},a),{hasBarLine:a.command==="\\over",leftDelim:s,rightDelim:o}))},serialize:(a,s)=>P([a.aboveToLatex(s),a.command,a.belowToLatex(s)])});M(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:a=>{var s,o;let c=a.args;return new ft(C(c[0]),C(c[1]),g(p({},a),{leftDelim:(s=c[2])!=null?s:".",rightDelim:(o=c[3])!=null?o:".",hasBarLine:!1}))},serialize:(a,s)=>`${a.aboveToLatex(s)} ${a.command}${a.leftDelim}${a.rightDelim}${a.belowToLatex(s)}`});M("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:a=>new ft(C(a.args[0]),C(a.args[1]),g(p({},a),{hasBarLine:!0,numerPrefix:"",denomPrefix:""})),serialize:(a,s)=>P([a.aboveToLatex(s),a.command,a.belowToLatex(s)])});M(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:a=>new di({coprod:"",bigvee:"",bigwedge:"",biguplus:"",bigcap:"",bigcup:"",intop:"",prod:"",sum:"",bigotimes:"",bigoplus:"",bigodot:"",bigsqcup:"",smallint:""}[a.command.slice(1)],g(p({},a),{limits:"auto",variant:"main"}))});M("smallint","",{ifMode:"math",createAtom:a=>new yt("",g(p({},a),{limits:"adjacent",variant:"main"}))});var up={int:"",iint:"",iiint:"",oint:"",oiint:"",oiiint:"",intclockwise:"",varointclockwise:"",ointctrclockwise:"",intctrclockwise:"",sqcup:"",sqcap:"",uplus:"",wr:"",amalg:"",Cap:"",Cup:"",doublecap:"",doublecup:""};M(Object.keys(up),"",{ifMode:"math",createAtom:a=>{let s=a.command,o=up[s.slice(1)];return new di(o,g(p({},a),{limits:"adjacent",variant:{"":"ams","":"ams"}[o]}))}});M(["Re","Im"],"",{ifMode:"math",createAtom:a=>new yt({"\\Re":"","\\Im":""}[a.command],g(p({},a),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))});M("middle","{:delim}",{ifMode:"math",createAtom:a=>{var s;return new cn(g(p({},a),{delim:(s=a.args[0])!=null?s:"|",size:1}))}});M("the","{:value}",{createAtom:a=>new y(g(p({},a),{captureSelection:!0,verbatimLatex:null})),render:(a,s)=>{var o;let c=new B({parent:s},a.style),h="";a.isSelected&&(h+=" ML__selected");let d=c.evaluate(a.args[0]);return new w(((o=_e(d))!=null?o:"").split("").map(b=>new w(b,{type:"ord",classes:h,mode:a.mode,isSelected:a.isSelected,style:p({variant:"main"},a.style)})),{type:"lift",style:a.style,caret:a.caret,isSelected:a.isSelected,classes:h}).wrap(c)},serialize:a=>{var s;return`\\the${(s=_e(a.args[0]))!=null?s:"\\relax"}`}});M("mathtip","{:auto}{:math}",{createAtom:a=>new mi(g(p({},a),{body:C(a.args[0]),tooltip:C(a.args[1]),content:"math"})),serialize:(a,s)=>s.skipStyles?a.bodyToLatex(s):`\\mathtip{${a.bodyToLatex(s)}}{${y.serialize([a.tooltip],g(p({},s),{defaultMode:"math"}))}}`});M("texttip","{:auto}{:text}",{createAtom:a=>new mi(g(p({},a),{body:C(a.args[0]),tooltip:C(a.args[1]),content:"text"})),serialize:(a,s)=>s.skipStyles?a.bodyToLatex(s):`\\texttip{${a.bodyToLatex(s)}}{${y.serialize([a.tooltip],g(p({},s),{defaultMode:"text"}))}}`});M("error","{:math}",{createAtom:a=>new y(g(p({},a),{body:C(a.args[0])})),serialize:(a,s)=>`\\error{${a.bodyToLatex(s)}}`,render:(a,s)=>a.createBox(s,{classes:"ML__error"})});M("ensuremath","{:math}",{createAtom:a=>new y(g(p({},a),{body:C(a.args[0])})),serialize:(a,s)=>`${a.command}{${a.bodyToLatex(g(p({},s),{defaultMode:"math"}))}}`});M("color","{:value}",{applyStyle:(a,s,o,c)=>{var h,d;return g(p({},a),{verbatimColor:(h=_e(o[0]))!=null?h:void 0,color:c.toColor((d=o[0])!=null?d:{string:"red"})})}});M("textcolor","{:value}{content:auto*}",{applyStyle:(a,s,o,c)=>{var h,d;return g(p({},a),{verbatimColor:(h=_e(o[0]))!=null?h:void 0,color:c.toColor((d=o[0])!=null?d:{string:"red"})})}});M("boxed","{content:math}",{createAtom:a=>new ot(g(p({},a),{body:C(a.args[0]),framecolor:{string:"black"}}))});M("colorbox","{:value}{:text*}",{applyStyle:(a,s,o,c)=>{var h,d;return g(p({},a),{verbatimBackgroundColor:(h=_e(o[0]))!=null?h:void 0,backgroundColor:c.toBackgroundColor((d=o[0])!=null?d:{string:"yellow"})})}});M("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:a=>{var s,o;return new ot(g(p({},a),{body:C(a.args[2]),framecolor:(s=a.args[0])!=null?s:{string:"blue"},backgroundcolor:(o=a.args[1])!=null?o:{string:"yellow"}}))},serialize:(a,s)=>{var o,c;return s.skipStyles?a.bodyToLatex(g(p({},s),{defaultMode:"text"})):W(a.command,(o=_e(a.framecolor))!=null?o:"",(c=_e(a.backgroundcolor))!=null?c:"",a.bodyToLatex(g(p({},s),{defaultMode:"text"})))}});M("bbox","[:bbox]{body:auto}",{createAtom:a=>{var s;let o=a.args[0],c=C(a.args[1]);return o?new ot(g(p({},a),{body:c,padding:o.padding,border:o.border,backgroundcolor:(s=o.backgroundcolor)!=null?s:void 0})):new ot(g(p({},a),{body:c}))},serialize:(a,s)=>{var o,c;if(s.skipStyles)return a.bodyToLatex(s);let h=a.command;if(Number.isFinite(a.padding)||a.border!==void 0||a.backgroundcolor!==void 0){let d=[];a.padding&&d.push((o=_e(a.padding))!=null?o:""),a.border&&d.push(`border: ${a.border}`),a.backgroundcolor&&d.push((c=_e(a.backgroundcolor))!=null?c:""),h+=`[${d.join(",")}]`}return W(h,a.bodyToLatex(s))}});M(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:a=>new y(g(p({},a),{body:C(a.args[0])})),render:(a,s)=>{let o=new B({parent:s,mathstyle:a.command.slice(1)},a.style),c=y.createBox(o,a.body,{type:"lift"});return a.caret&&(c.caret=a.caret),a.bind(s,c)},serialize:(a,s)=>s.skipStyles?a.bodyToLatex(s):`{${P([a.command,a.bodyToLatex(s)])}}`});M(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(a,s)=>g(p({},a),{fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[s]})});M("fontseries","{:string}",{ifMode:"text",applyStyle:(a,s,o)=>{var c;return g(p({},a),{fontSeries:(c=o[0])!=null?c:"auto"})}});M("fontshape","{:string}",{ifMode:"text",applyStyle:(a,s,o)=>{var c;return g(p({},a),{fontShape:(c=o[0])!=null?c:"auto"})}});M("fontfamily","{:string}",{ifMode:"text",applyStyle:(a,s,o)=>{var c;return g(p({},a),{fontFamily:(c=o[0])!=null?c:"roman"})}});M("selectfont","",{ifMode:"text",applyStyle:a=>a});M("bf","{:rest*}",{applyStyle:a=>g(p({},a),{fontSeries:"b",fontShape:"n",fontFamily:"roman"})});M(["boldsymbol","bm","bold"],"{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variantStyle:"bold"})});M("bfseries","{:rest*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontSeries:"b"})});M("mdseries","{:rest*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontSeries:"m"})});M("upshape","{:rest*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"n"})});M("slshape","{:rest*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"sl"})});M("scshape","{:rest*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"sc"})});M("textbf","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontSeries:"b"})});M("textmd","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontSeries:"m"})});M("textup","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"n"})});M("textnormal","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"n",fontSeries:"m"})});M("textsl","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"sl"})});M("textit","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"it"})});M("textsc","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontShape:"sc"})});M("textrm","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontFamily:"roman"})});M("textsf","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontFamily:"sans-serif"})});M("texttt","{:text*}",{applyMode:"text",applyStyle:a=>g(p({},a),{fontFamily:"monospace"})});M("mathbf","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"normal",variantStyle:"bold"})});M("mathit","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"main",variantStyle:"italic"})});M("mathnormal","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"normal",variantStyle:"italic"})});M("mathbfit","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"main",variantStyle:"bolditalic"})});M("mathrm","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"normal",variantStyle:"up"})});M("mathsf","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"sans-serif",variantStyle:"up"})});M("mathtt","{:math*}",{applyMode:"math",applyStyle:a=>g(p({},a),{variant:"monospace",variantStyle:"up"})});M("it","{:rest*}",{applyStyle:a=>g(p({},a),{fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})});M("rmfamily","{:rest*}",{applyStyle:a=>g(p({},a),{fontFamily:"roman"})});M("sffamily","{:rest*}",{applyStyle:a=>g(p({},a),{fontFamily:"sans-serif"})});M("ttfamily","{:rest*}",{applyStyle:a=>g(p({},a),{fontFamily:"monospace"})});M(["Bbb","mathbb"],"{:math*}",{applyStyle:a=>g(p({},a),{variant:"double-struck",variantStyle:no(a.variantStyle)})});M(["frak","mathfrak"],"{:math*}",{applyStyle:a=>g(p({},a),{variant:"fraktur",variantStyle:no(a.variantStyle)})});M("mathcal","{:math*}",{applyStyle:a=>g(p({},a),{variant:"calligraphic",variantStyle:no(a.variantStyle)})});M("mathscr","{:math*}",{applyStyle:a=>g(p({},a),{variant:"script",variantStyle:no(a.variantStyle)})});M("mbox","{:text}",{ifMode:"math",createAtom:a=>new y(g(p({},a),{type:"mord",body:C(a.args[0]),mode:"math"})),serialize:(a,s)=>W("\\mbox",a.bodyToLatex(g(p({},s),{defaultMode:"text"})))});M("text","{:text}",{ifMode:"math",applyMode:"text"});M(["class","htmlClass"],"{name:string}{content:auto*}",{createAtom:a=>new y(g(p({},a),{type:"mord",body:C(a.args[1])})),serialize:(a,s)=>!a.args[0]||s.skipStyles?a.bodyToLatex(s):`${a.command}{${a.args[0]}}{${a.bodyToLatex(s)}}`,render:(a,s)=>{var o;return a.createBox(s,{classes:(o=a.args[0])!=null?o:"",boxType:"lift"})}});M(["cssId","htmlId"],"{id:string}{content:auto*}",{createAtom:a=>new y(g(p({},a),{type:"mord",body:C(a.args[1])})),serialize:(a,s)=>{var o;return!((o=a.args)!=null&&o[0])||s.skipStyles?a.bodyToLatex(s):`${a.command}{${a.args[0]}}{${a.bodyToLatex(s)}}`},render:(a,s)=>{var o;let c=a.createBox(s);return c.cssId=(o=a.args[0])!=null?o:"",c}});M("htmlData","{data:string}{content:auto*}",{createAtom:a=>new y(g(p({},a),{type:"mord",body:C(a.args[1])})),serialize:(a,s)=>{var o;return!((o=a.args)!=null&&o[0])||s.skipStyles?a.bodyToLatex(s):`\\htmlData{${a.args[0]}}{${a.bodyToLatex(s)}}`},render:(a,s)=>{var o;let c=a.createBox(s);return c.htmlData=(o=a.args[0])!=null?o:"",c}});M(["style","htmlStyle"],"{data:string}{content:auto*}",{createAtom:a=>new y(g(p({},a),{type:"mord",body:C(a.args[1])})),serialize:(a,s)=>{var o;return!((o=a.args)!=null&&o[0])||s.skipStyles?a.bodyToLatex(s):`${a.command}{${a.args[0]}}{${a.bodyToLatex(s)}}`},render:(a,s)=>{var o;let c=a.createBox(s);return c.htmlStyle=(o=a.args[0])!=null?o:"",c}});M("href","{url:string}{content:auto*}",{createAtom:a=>new y(g(p({},a),{type:"mord",body:C(a.args[1])})),render:(a,s)=>{var o;let c=a.createBox(s),h=(o=a.args[0])!=null?o:"";return h&&(c.htmlData=`href=${h}`),c}});M("em","{:rest}",{createAtom:a=>new y(g(p({},a),{body:C(a.args[0])})),serialize:(a,s)=>s.skipStyles?a.bodyToLatex(s):`{\\em ${a.bodyToLatex(s)}}`,render:(a,s)=>a.createBox(s,{classes:"ML__emph",boxType:"lift"})});M("emph","{:auto}",{createAtom:a=>new y(g(p({},a),{body:C(a.args[1])})),serialize:(a,s)=>s.skipStyles?a.bodyToLatex(s):`\\emph{${a.bodyToLatex(s)}}`,render:(a,s)=>a.createBox(s,{classes:"ML__emph",boxType:"lift"})});var dp={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};M(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:a=>{var s;return new un(g(p({},a),{delim:(s=a.args[0])!=null?s:".",size:dp[a.command].size,delimType:dp[a.command].mclass}))},serialize:(a,s)=>P([a.command,/^[a-zA-Z]/.test(a.value)?`{${a.value}}`:a.value])});M(["hspace","hspace*"],"{width:value}",{createAtom:a=>{var s;return new $t(g(p({},a),{width:(s=a.args[0])!=null?s:{dimension:0}}))}});M(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:a=>{var s;return new $t(g(p({},a),{width:(s=a.args[0])!=null?s:{dimension:0}}))}});M("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:a=>new y(a),render:(a,s)=>{let o=0,c=s.mathstyle.id;(c===Xn||c===Or)&&(o=1),(c===ai||c===Ve)&&(o=2),(c===Br||c===Ee)&&(o=3);let h=C(a.args[o]);return y.createBox(s,h)},serialize:(a,s)=>`\\mathchoice{${y.serialize(a.args[0],s)}}{${y.serialize(a.args[1],s)}}{${y.serialize(a.args[2],s)}}{${y.serialize(a.args[3],s)}}`});M("mathop","{:auto}",{createAtom:a=>new y(g(p({},a),{type:"mop",body:C(a.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(a,s)=>{var o;let c=y.createBox(s,a.body);if(a.superscript||a.subscript){let h=(o=a.subsupPlacement)!=null?o:"auto";c=h==="over-under"||h==="auto"&&s.isDisplayStyle?a.attachLimits(s,{base:c}):a.attachSupsub(s,{base:c})}return a.caret&&(c.caret=a.caret),new w(a.bind(s,c),{type:"op",isSelected:a.isSelected,classes:"ML__op-group"})},serialize:(a,s)=>{let o=[W(a.command,a.bodyToLatex(s))];return a.explicitSubsupPlacement&&(a.subsupPlacement==="over-under"&&o.push("\\limits"),a.subsupPlacement==="adjacent"&&o.push("\\nolimits"),a.subsupPlacement==="auto"&&o.push("\\displaylimits")),o.push(a.supsubToLatex(s)),P(o)}});M(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:a=>new y(g(p({},a),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[a.command],body:C(a.args[0])}))});M(["operatorname","operatorname*"],"{operator:math}",{createAtom:a=>{let s=C(a.args[0]).map(o=>{var c;return o.type!=="first"&&(o.type="mord",o.value=(c={"":"*","":"-"}[o.value])!=null?c:o.value,o.isFunction=!1,!o.style.variant&&!o.style.variantStyle&&(o.style.variant="main",o.style.variantStyle="up")),o});return new y(g(p({},a),{type:"mop",body:s,isFunction:!0,limits:a.command==="\\operatorname"?"adjacent":"over-under"}))},render:(a,s)=>{var o;let c=y.createBox(s,a.body);if(a.superscript||a.subscript){let h=(o=a.subsupPlacement)!=null?o:"auto";c=h==="over-under"||h==="auto"&&s.isDisplayStyle?a.attachLimits(s,{base:c}):a.attachSupsub(s,{base:c})}return a.caret&&(c.caret=a.caret),new w(a.bind(s,c),{type:"op",isSelected:a.isSelected,classes:"ML__op-group"})},serialize:(a,s)=>{let o=[W(a.command,a.bodyToLatex(s))];return a.explicitSubsupPlacement&&(a.subsupPlacement==="over-under"&&o.push("\\limits"),a.subsupPlacement==="adjacent"&&o.push("\\nolimits"),a.subsupPlacement==="auto"&&o.push("\\displaylimits")),o.push(a.supsubToLatex(s)),P(o)}});M(["char","unicode"],"{charcode:value}",{createAtom:a=>new y(g(p({},a),{type:a.mode==="text"?"text":"mord"})),serialize:a=>{var s;return`${a.command}${_e((s=a.args[0])!=null?s:{number:10067,base:"hexadecimal"})}`},render:(a,s)=>{let o=s.evaluate(a.args[0]);return(!o||!("number"in o))&&(o={number:10067,base:"hexadecimal"}),a.value=String.fromCodePoint(o.number),a.createBox(s)}});M("rule","[raise:value]{width:value}{thickness:value}",{createAtom:a=>new y(a),render:(a,s)=>{var o,c,h;let d=new B({parent:s,mathstyle:"textstyle"},a.style),b=d.toEm((o=a.args[0])!=null?o:{dimension:0}),_=d.toEm((c=a.args[1])!=null?c:{dimension:10}),$=d.toEm((h=a.args[2])!=null?h:{dimension:10}),j=new w(null,{classes:"ML__rule",type:"ord"});return j.width=_,j.height=$+b,j.depth=-b,j.setStyle("border-right-width",_,"em"),j.setStyle("border-top-width",$,"em"),j.setStyle("border-color",a.style.color),j.setStyle("vertical-align",b,"em"),a.isSelected&&j.setStyle("opacity","50%"),a.bind(d,j),a.caret&&(j.caret=a.caret),j.wrap(s)},serialize:a=>`\\rule${a.args[0]?`[${_e(a.args[0])}]`:""}{${_e(a.args[1])}}{${_e(a.args[2])}}`});M(["overline","underline"],"{:auto}",{createAtom:a=>new y(g(p({},a),{body:C(a.args[0])})),render:(a,s)=>{let o=a.command.substring(1),c=new B({parent:s,mathstyle:"cramp"},a.style),h=y.createBox(c,a.body);if(!h)return null;let d=c.metrics.defaultRuleThickness/c.scalingFactor,b=new w(null,{classes:o+"-line"});b.height=d,b.maxFontSize=d*1.125*c.scalingFactor;let _;return o==="overline"?_=new te({shift:0,children:[{box:h},3*d,{box:b},d]}):_=new te({top:h.height,children:[d,{box:b},3*d,{box:h}]}),a.caret&&(_.caret=a.caret),new w(_,{classes:o,type:"ignore"})}});M("overset","{:auto}{base:auto}",{createAtom:a=>{let s=C(a.args[1]);return new Ae(g(p({},a),{above:C(a.args[0]),body:s,skipBoundary:!1,boxType:oi(s)}))},serialize:(a,s)=>W(a.command,a.aboveToLatex(s),a.bodyToLatex(s))});M("underset","{:auto}{base:auto}",{createAtom:a=>{let s=C(a.args[1]);return new Ae(g(p({},a),{below:C(a.args[0]),body:s,skipBoundary:!1,boxType:oi(s)}))},serialize:(a,s)=>W(a.command,a.belowToLatex(s),a.bodyToLatex(s))});M("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:a=>{let s=C(a.args[2]);return new Ae(g(p({},a),{above:C(a.args[0]),below:C(a.args[1]),body:s,skipBoundary:!1,boxType:oi(s)}))},serialize:(a,s)=>W(a.command,a.belowToLatex(s),a.bodyToLatex(s))});M(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:a=>new Ae(g(p({},a),{body:C(a.args[2]),above:C(a.args[1]),below:C(a.args[0]),skipBoundary:!1,boxType:a.command==="\\stackrel"?"rel":"bin"})),serialize:(a,s)=>W(a.command,a.aboveToLatex(s),a.bodyToLatex(s))});M("smash","[:string]{:auto}",{createAtom:a=>{var s,o,c,h;return new Ft(g(p({},a),{body:C(a.args[1]),smashHeight:(o=(s=a.args[0])==null?void 0:s.includes("t"))!=null?o:!0,smashDepth:(h=(c=a.args[0])==null?void 0:c.includes("b"))!=null?h:!0}))}});M("vphantom","{:auto}",{createAtom:a=>new Ft(g(p({},a),{body:C(a.args[0]),isInvisible:!0,smashWidth:!0}))});M("hphantom","{:auto}",{createAtom:a=>new Ft(g(p({},a),{body:C(a.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))});M("phantom","{:auto}",{createAtom:a=>new Ft(g(p({},a),{body:C(a.args[0]),isInvisible:!0}))});M("mathstrut","",{createAtom:a=>new Ft(g(p({},a),{body:[new y({value:"("})],isInvisible:!0}))});M("not","{:math}",{createAtom:a=>{let s=C(a.args[0]);return s.length===0?new y(g(p({},a),{type:"mrel",value:""})):new y(g(p({},a),{body:[new gt(g(p({},a),{body:"",align:"right"})),...s],captureSelection:!0}))},serialize:(a,s)=>{let o=a.args[0],c=o&&typeof o=="object"&&"group"in o;return a.value!==""?c?`\\not{${y.serialize(o.group,s)}}`:`\\not${y.serialize(o,s)}`:c?"\\not{}":"\\not"},render:(a,s)=>{if(a.value)return a.createBox(s);let o=a.args[0]&&typeof a.args[0]=="object"&&"group"in a.args[0]?"ord":oi(C(a.args[0])),c=y.createBox(s,a.body,{type:o});return a.caret&&(c.caret=a.caret),a.bind(s,c)}});M(["ne","neq"],"",{createAtom:a=>new y(g(p({},a),{type:"mrel",body:[new gt(g(p({},a),{body:"",align:"right",boxType:"rel"})),new y(g(p({},a),{value:"="}))],captureSelection:!0})),serialize:a=>a.command});M("rlap","{:auto}",{createAtom:a=>new gt(g(p({},a),{body:C(a.args[0]),align:"right"}))});M("llap","{:auto}",{createAtom:a=>new gt(g(p({},a),{body:C(a.args[0]),align:"left"}))});M("mathrlap","{:math}",{createAtom:a=>new gt(g(p({},a),{body:C(a.args[0]),align:"right"}))});M("mathllap","{:math}",{createAtom:a=>new gt(g(p({},a),{body:C(a.args[0]),align:"left"}))});M("raisebox","{:value}{:text}",{createAtom:a=>{var s;return new ot(g(p({},a),{body:C(a.args[1]),padding:{dimension:0},offset:(s=a.args[0])!=null?s:{dimension:0}}))},serialize:(a,s)=>{var o;return W("\\raisebox",(o=_e(a.offset))!=null?o:"0pt",a.bodyToLatex(s))}});M("raise","{:value}{:auto}",{createAtom:a=>{var s;return new ot(g(p({},a),{body:C(a.args[1]),padding:{dimension:0},offset:(s=a.args[0])!=null?s:{dimension:0}}))},serialize:(a,s)=>{var o;return W("\\raise",(o=_e(a.offset))!=null?o:"0pt",a.bodyToLatex(s))}});M("lower","{:value}{:auto}",{createAtom:a=>{var s;return new ot(g(p({},a),{body:C(a.args[1]),padding:{dimension:0},offset:(s=pt(a.args[0],-1))!=null?s:{dimension:0}}))},serialize:(a,s)=>{var o,c;return W("\\lower",(c=_e(pt((o=a.offset)!=null?o:{dimension:0},-1)))!=null?c:"0pt",a.bodyToLatex(s))}});Me("0123456789/@.?!");sl(65,90);sl(97,122);Me([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]);Me([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]);Me([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\pounds",163],["\\euro",8364]]);Me([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel");Me([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]);Me([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]);Me([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams");Me([["+",43],["-",8722],["",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin");Me([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams");Me([["\\surd",8730],["\\S",167],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\varkappa",1008,"mord","ams"],["\\coppa",985,"mord","ams"],["\\koppa",985,"mord","ams"],["\\Coppa",984,"mord","ams"],["\\Koppa",984,"mord","ams"],["\\sampi",993,"mord","ams"],["\\Sampi",992,"mord","ams"],["\\emptyset",8709]]);Me([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",10178],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel");Me([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams");Me([["\\wp",8472],["\\aleph",8501]]);Me([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams");Me([["\\ ",160],["~",160]],"space");M(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:a=>new $t(a)});M("space","",{createAtom:a=>new $t(a)});Me([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct");Me([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner");Me([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var Qa={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],roman:["Main-Regular","ML__cmr"],"roman-bold":["Main-Bold","ML__mathbf"],"roman-italic":["Math-Italic","ML__mathit"],"roman-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams ML__bold"],"ams-italic":["AMS-Regular","ML__ams ML__it"],"ams-bolditalic":["AMS-Regular","ML__ams ML__bold ML__it"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans ML__it"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans ML__bold ML__it"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak ML__bold"],"fraktur-italic":["Fraktur-Regular","ML__frak ML__it"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak ML__bold ML__it"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb ML__bold"],"double-struck-italic":["AMS-Regular","ML__bb ML_italic"],"double-struck-bolditalic":["AMS-Regular","ML__bb ML_bolditalic"]},ts={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},mp=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,ig=/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/,ng=[/^[a-z]$/,/^[A-Z]$/,mp,ig],og={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]},oc=class extends ve{constructor(){super("math")}createAtom(a,s,o){var c,h,d,b,_,$;if(s===null)return new y({type:"mord",mode:"math",command:a,value:a,style:o});let j;try{j=(d=(h=globalThis.MathfieldElement)==null?void 0:h.isFunction((c=s.command)!=null?c:a))!=null?d:!1}catch{j=!1}if(s.definitionType==="symbol"){let Lt=new y({type:(b=s.type)!=null?b:"mord",mode:"math",command:(_=s.command)!=null?_:a,value:String.fromCodePoint(s.codepoint),isFunction:j,style:o});return a.startsWith("\\")&&(Lt.verbatimLatex=a),Lt}let Xt=new y({type:"mord",mode:"math",command:($=s.command)!=null?$:a,value:a,isFunction:j,style:o});return a.startsWith("\\")&&(Xt.verbatimLatex=a),Xt}serialize(a,s){let o=ag(a,g(p({},s),{defaultMode:"math"}));return o.length===0||s.defaultMode!=="text"?o:["$ ",...o," $"]}getFont(a,s){var o,c,h;if(s.variant,s.fontFamily){let Xt=s.fontFamily;s.fontSeries==="b"&&s.fontShape==="it"?Xt+="-bolditalic":s.fontSeries==="b"?Xt+="-bold":s.fontShape==="it"&&(Xt+="-italic");let Lt=(o=Qa[Xt])!=null?o:Qa[s.fontFamily];if(!Lt)return console.error(`Unknown font family variant: ${Xt}`),null;let[fr,Jr]=Lt;return Jr&&(a.classes+=" "+Jr),fr}let{variant:d}=s,{variantStyle:b}=s;if(d==="normal"&&!b&&/[\u00A3\u0131\u0237]/.test(a.value)&&(d="main",b="italic"),d==="normal"&&!b&&a.value.length===1){let Xt=!1;ng.forEach((Lt,fr)=>{var Jr;Lt.test(a.value)&&og[(Jr=s.letterShapeStyle)!=null?Jr:"tex"][fr]==="it"&&(Xt=!0)}),Xt&&(b=sp(b))}b==="up"&&(b=void 0);let _=b?d+"-"+b:d,[$,j]=Qa[_];if(ts[d]&&!ts[d].test(a.value)){let Xt=Dn(a.value,d,b);return Xt||(Xt=(c=Dn(a.value,d))!=null?c:a.value,a.classes+=(h={bold:" ML__bold",italic:" ML__it","bold-italic":" ML__bold ML__it"}[b??""])!=null?h:""),a.value=Xt,null}return mp.test(a.value)&&(a.classes+=" lcGreek"),j&&(a.classes+=" "+j),$}};function ag(a,s){return dt(a,"bold").map(o=>{if(Ka(o[0])!=="bold"||Ka(o[0].parent)==="bold")return P(es(o,s));let c=P(o.map(h=>{var d;return(d=h.value)!=null?d:""}));return/^[a-zA-Z0-9]+$/.test(c)?W("\\mathbf",P(es(o,s))):W("\\bm",P(es(o,s)))})}function es(a,s){let{parent:o}=a[0],c=Pa(o);return dt(a,"variant").map(h=>{let d=Pa(h[0]),b="";d&&d!==c&&(b={calligraphic:"\\mathcal","calligraphic-uo":"\\mathcal",fraktur:"\\mathfrak","fraktur-uo":"\\mathfrak","double-struck":"\\mathbb","double-struck-uo":"\\mathbb",script:"\\mathscr","script-uo":"\\mathscr",monospace:"\\mathtt","monospace-uo":"\\mathtt","sans-serif":"\\mathsf","sans-serif-uo":"\\mathsf",normal:"","normal-up":"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"","normal-bolditalic":"\\mathbfit",ams:"","ams-up":"\\mathrm","ams-italic":"\\mathit","ams-bold":"","ams-bolditalic":"\\mathbfit",main:"","main-up":"\\mathrm","main-italic":"\\mathit","main-bold":"","main-bolditalic":"\\mathbfit"}[d]);let _="",$=h[h.length-1],j=b&&h.length>0&&($.branch("subscript")!==void 0||$.branch("superscript")!==void 0);j&&(_=$.supsubToLatex(s));let Xt=P(h.map((Lt,fr)=>{if(j&&fr===h.length-1){let Jr=ne(Lt.command,Lt.mode);return Jr!=null&&Jr.serialize?Jr.serialize(Lt,s):Lt.body&&Lt.command?W(Lt.command,Lt.bodyToLatex(s)):Lt.body?Lt.bodyToLatex(s):!Lt.value||Lt.value===""?"":Lt.command||Lt.value}return Lt._serialize(s)}));return b?W(b,Xt)+_:Xt})}new oc;function sg(a,s){return a.map(o=>o._serialize(s))}function lg(a,s){return dt(a,"fontShape").map(o=>{let c=sg(o,s),{fontShape:h}=o[0].style,d="";return h==="it"&&(d="\\textit"),h==="sl"&&(d="\\textsl"),h==="sc"&&(d="\\textsc"),h==="n"&&(d="\\textup"),!d&&h?`{${W("\\fontshape",h)}${P(c)}}`:d?W(d,P(c)):P(c)})}function cg(a,s){return dt(a,"fontSeries").map(o=>{let c=lg(o,s),{fontSeries:h}=o[0].style,d="";return h==="b"&&(d="\\textbf"),h==="l"&&(d="\\textlf"),h==="m"&&(d="\\textmd"),h&&!d?`{${W("\\fontseries",h)}${P(c)}}`:d?W(d,P(c)):P(c)})}function ug(a,s){return dt(a,"fontSize").map(o=>{var c,h;let d=cg(o,s),b=(h=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][(c=o[0].style.fontSize)!=null?c:""])!=null?h:"";return b?`${b} ${P(d)}`:P(d)})}function dg(a,s,o){return dt(a,"fontFamily").map(c=>{var h;o=o&&!c.every($=>$.style.fontFamily||$.style.fontShape||$.style.fontSeries||$.style.fontSize);let d=ug(c,s),{fontFamily:b}=c[0].style,_=(h={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[b??""])!=null?h:"";return _?`\\${_}{${P(d)}}`:b?`{\\fontfamily{${c[0].style.fontFamily}} ${P(d)}}`:o?`\\text{${P(d)}}`:P(d)})}var pp={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"},ac=class extends ve{constructor(){super("text")}createAtom(a,s,o){return s&&s.definitionType==="symbol"?new qe(a,String.fromCodePoint(s.codepoint),o??{}):null}serialize(a,s){return dg(a,g(p({},s),{defaultMode:"text"}),s.defaultMode!=="text")}getFont(a,s){var o,c,h,d,b;let{fontFamily:_}=s;if(pp[_]?a.classes+=" "+pp[_]:_&&a.setStyle("font-family",_),s.fontShape&&(a.classes+=" ",a.classes+=(o={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[s.fontShape])!=null?o:""),s.fontSeries){let $=s.fontSeries.match(/(.?[lbm])?(.?[cx])?/);$&&(a.classes+=" ",a.classes+=(h={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(c=$[1])!=null?c:""])!=null?h:"",a.classes+=" ",a.classes+=(b={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(d=$[2])!=null?d:""])!=null?b:"")}return"Main-Regular"}};new ac;var sc=class extends ve{constructor(){super("latex")}createAtom(a){return new pe(a)}serialize(a,s){return a.filter(o=>o instanceof pe&&!o.isSuggestion).map(o=>o.value)}getFont(){return null}};new sc;function pn(a){var s;let o=/macos|ios/.test(At()),c=a.split("+"),h="";for(let d of c)h&&(h+=o?"":'<span class="ML__shortcut-join">+</span>'),d.startsWith("[Key")?h+=d.slice(4,5):d.startsWith("Key")?h+=d.slice(3,4):d.startsWith("[Digit")?h+=d.slice(6,7):d.startsWith("Digit")?h+=d.slice(5,6):h+=(s={cmd:"",meta:o?"":"Ctrl",shift:o?"":"Shift",alt:o?"":"Alt",ctrl:o?"":"Ctrl","\n":o?"":"Return","[return]":o?"":"Return","[enter]":o?"":"Enter","[tab]":o?"":"Tab","[escape]":"Esc","[backspace]":o?"":"Backspace","[delete]":o?"":"Del","[pageup]":o?"":"Page Up","[pagedown]":o?"":"Page Down","[home]":o?"":"Home","[end]":o?"":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"",up:"",right:"",down:"","[arrowleft]":"","[arrowup]":"","[arrowright]":"","[arrowdown]":""}[d.toLowerCase()])!=null?s:d.toUpperCase();return h}function hn(a){if(a instanceof MouseEvent||a instanceof PointerEvent)return{x:a.clientX,y:a.clientY};if(typeof TouchEvent<"u"&&a instanceof TouchEvent){let s=[...a.touches].reduce((c,h)=>({x:c.x+h.clientX,y:c.y+h.clientY}),{x:0,y:0}),o=a.touches.length;return{x:s.x/o,y:s.y/o}}}function qt(a){let s={alt:!1,control:!1,shift:!1,meta:!1};return(a instanceof MouseEvent||a instanceof PointerEvent||typeof TouchEvent<"u"&&a instanceof TouchEvent||a instanceof KeyboardEvent)&&(a.altKey&&(s.alt=!0),a.ctrlKey&&(s.control=!0),a.metaKey&&(s.meta=!0),a.shiftKey&&(s.shift=!0)),s}function hp(a,s){return!a&&s||a&&!s?!1:!a||!s?!0:a.alt===s.alt&&a.control===s.control&&a.shift===s.shift&&a.meta===s.meta}var mg=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function cr(a){return a.ctrlKey||a.metaKey||["Dead","Process"].includes(a.key)?!1:a.code===""?!0:mg.has(a.code)}function hi(){var a;let s=document.activeElement;for(;(a=s==null?void 0:s.shadowRoot)!=null&&a.activeElement;)s=s.shadowRoot.activeElement;return s}var Te=class pv{static get scrim(){return pv._scrim||(pv._scrim=new pv),pv._scrim}static open(s){pv.scrim.open(s)}static close(){pv.scrim.close()}static get state(){return pv.scrim.state}static get element(){return pv.scrim.element}constructor(s){var o,c;this.lightDismiss=(o=s==null?void 0:s.lightDismiss)!=null?o:!0,this.translucent=(c=s==null?void 0:s.translucent)!=null?c:!1,this.state="closed"}get element(){if(this._element)return this._element;let s=document.createElement("div");return s.setAttribute("role","presentation"),s.style.position="fixed",s.style.contain="content",s.style.top="0",s.style.left="0",s.style.right="0",s.style.bottom="0",s.style.zIndex="var(--scrim-zindex, 10099)",s.style.outline="none",this.translucent?(s.style.background="rgba(255, 255, 255, .2)",s.style.backdropFilter="contrast(40%)"):s.style.background="transparent",this._element=s,s}open(s){var o;if(this.state!=="closed")return;this.state="opening",this.onDismiss=s==null?void 0:s.onDismiss,this.savedActiveElement=hi();let{element:c}=this;((o=s==null?void 0:s.root)!=null?o:document.body).appendChild(c),c.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let h=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let d=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${d+h}px`;let b=document.querySelector(".MLK__plate");if(b instanceof HTMLElement){this.savedMlkPaddingRight=b.style.paddingRight;let _=Number.parseFloat(getComputedStyle(b).paddingRight);b.style.paddingRight=`${_+h}px`}s!=null&&s.child&&c.append(s.child),this.state="open"}close(){var s,o,c,h,d;if(this.state!=="open"){this.element.parentElement;return}this.state="closing",typeof this.onDismiss=="function"&&this.onDismiss(),this.onDismiss=void 0;let{element:b}=this;b.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),b.remove(),document.body.style.overflow=(s=this.savedOverflow)!=null?s:"",document.body.style.marginRight=(o=this.savedMarginRight)!=null?o:"";let _=document.querySelector(".MLK__plate");_ instanceof HTMLElement&&(_.style.paddingRight=(c=this.savedMlkPaddingRight)!=null?c:""),hi()!==this.savedActiveElement&&((d=(h=this.savedActiveElement)==null?void 0:h.focus)==null||d.call(h)),b.innerHTML="",this.state="closed"}handleEvent(s){this.lightDismiss&&(s.target===this._element&&s.type==="click"?(this.close(),s.preventDefault(),s.stopPropagation()):s.target===document&&(s.type==="touchmove"||s.type==="scroll")&&(this.close(),s.preventDefault(),s.stopPropagation()))}};function fp(a,s,o){let c=null,h=null,d=!1,b=!1,_=!1,$=new AbortController,j=$.signal;return a.addEventListener("keydown",Xt=>{if(d||Xt.key==="Process"||Xt.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(Xt.code)){c=null;return}c=Xt,h=null,o.onKeystroke(Xt)?a.textContent="":c=null},{capture:!0,signal:j}),a.addEventListener("keypress",Xt=>{d||(c&&h&&o.onKeystroke(c),h=Xt)},{capture:!0,signal:j}),a.addEventListener("compositionstart",Xt=>{a.textContent="",d=!0,o.onCompositionStart(Xt.data)},{capture:!0,signal:j}),a.addEventListener("compositionupdate",Xt=>{d&&o.onCompositionUpdate(Xt.data)},{capture:!0,signal:j}),a.addEventListener("compositionend",Xt=>{a.textContent="",d&&(d=!1,o.onCompositionEnd(Xt.data))},{capture:!0,signal:j}),a.addEventListener("beforeinput",Xt=>Xt.stopImmediatePropagation(),{signal:j}),a.addEventListener("input",Xt=>{var Lt;if(!d&&(a.textContent="",Xt.inputType!=="insertCompositionText")){if(Xt.inputType==="insertFromPaste"){Xt.preventDefault(),Xt.stopPropagation();return}o.onInput((Lt=Xt.data)!=null?Lt:""),Xt.preventDefault(),Xt.stopPropagation()}},{signal:j}),a.addEventListener("paste",Xt=>{a.focus({preventScroll:!0}),a.textContent="",o.onPaste(Xt)||Xt.preventDefault(),Xt.stopImmediatePropagation()},{signal:j}),a.addEventListener("cut",Xt=>o.onCut(Xt),{capture:!0,signal:j}),a.addEventListener("copy",Xt=>o.onCopy(Xt),{capture:!0,signal:j}),a.addEventListener("blur",Xt=>{var Lt,fr;if(((fr=(Lt=Xt.relatedTarget)==null?void 0:Lt._mathfield)==null?void 0:fr.element)===s){a.focus({preventScroll:!0}),Xt.preventDefault(),Xt.stopPropagation();return}let Jr=!1,Js=Xt.relatedTarget;for(;Js;){if(Js.classList.contains("ML__keyboard")){Jr=!0;break}Js=Js.parentElement}if(Jr){a.focus({preventScroll:!0}),Xt.preventDefault(),Xt.stopPropagation();return}let qs=Te.state;if(qs==="open"||qs==="opening"){Xt.preventDefault(),Xt.stopPropagation();return}if(Xt.relatedTarget===Xt.target.getRootNode().host){Xt.preventDefault(),Xt.stopPropagation();return}_||b||(_=!0,c=null,h=null,o.onBlur(),_=!1)},{capture:!0,signal:j}),a.addEventListener("focus",Xt=>{_||b||(b=!0,o.onFocus(),b=!1)},{capture:!0,signal:j}),{dispose:()=>$.abort(),cancelComposition:()=>{d&&(typeof a.blur=="function"&&a.blur(),requestAnimationFrame(()=>a.focus({preventScroll:!0})))},blur:()=>{typeof a.blur=="function"&&(_=!0,a.blur(),_=!1)},focus:()=>{!b&&typeof a.focus=="function"&&(b=!0,a.focus({preventScroll:!0}),b=!1)},hasFocus:()=>hi()===a,setAriaLabel:Xt=>a.setAttribute("aria-label",Xt),setValue:Xt=>{var Lt;a.textContent!==Xt&&(a.textContent=Xt,a.style.left="-1000px",(Lt=window.getSelection())==null||Lt.selectAllChildren(a))},moveTo:(Xt,Lt)=>{a.style.top=`${Lt}px`,a.style.left=`${Xt}px`}}}function zr(a){var s;if(!a||!cr(a))return"";let o;return a.key==="Unidentified"&&a.target&&(o=a.target.value),o=(s=o??a.key)!=null?s:a.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(o)&&(o=""),o}function rs(a){a=yu(a);let s=[];return a.ctrlKey&&s.push("ctrl"),a.metaKey&&s.push("meta"),a.altKey&&s.push("alt"),a.shiftKey&&s.push("shift"),s.length===0?`[${a.code}]`:(s.push(`[${a.code}]`),s.join("+"))}function pg(a){if(ke()){let s=At(),o=a.startsWith("!"),c=a.endsWith(s);if(o&&!c||!o&&c)return!0}return a==="!other"?!1:a==="other"}function bp(a,s,o){if(a.length===0)return"";let c=Gr(Qs(rs(o))),h=Gr({key:o.key,shift:o.shiftKey,alt:o.altKey,ctrl:o.ctrlKey,meta:o.metaKey||o.ctrlKey&&/macos|ios/.test(At()),cmd:!1,win:!1});for(let d=a.length-1;d>=0;d--)if((a[d].key===c||a[d].key===h)&&(!a[d].ifMode||a[d].ifMode===s))return a[d].command;return""}function gp(a){let s=a;return ee(s)&&(s=s.length>0?s[0]+"("+s.slice(1).join("")+")":""),s}function yp(a,s){let o=[];if(typeof s=="string"){let d=z0[s];ee(d)?o=d.slice():d&&o.push(d)}let c=gp(s),h=new RegExp("^"+c.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let d of a)h.test(gp(d.command))&&o.push(d.key);return o.map(pn)}function hg(a,s){if(a.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(a.ifPlatform))throw new Error(`Unexpected platform "${a.ifPlatform}" for keybinding ${a.key}`);if(a.ifLayout!==void 0&&(s.score===0||!a.ifLayout.includes(s.id)))return;let o=Qs(a.key),c=a.ifPlatform;if(o.cmd){if(c&&c!=="macos"&&c!=="ios")throw new Error('Unexpected "cmd" modifier with platform "'+c+`"
"cmd" modifier can only be used with macOS or iOS platform.`);c||(c=At()==="ios"?"ios":"macos"),o.win=!1,o.cmd=!1,o.meta=!0}if(o.win){if(c&&c!=="windows")throw new Error('Unexpected "win" modifier with platform "'+c+`"
"win" modifier can only be used with Windows platform.`);c="windows",o.win=!1,o.cmd=!1,o.meta=!0}if(c&&!pg(c))return;if(/^\[.+\]$/.test(o.key))return g(p({},a),{key:Gr(o)});let h=bu(o.key,s);if(!h)return g(p({},a),{key:Gr(o)});if(h.shift&&o.shift||h.alt&&o.alt)throw new Error(`The keybinding ${a.key} (${lc(a.command)}) is conflicting with the key combination ${Gr(h)} using the ${s.displayName} keyboard layout`);return h.shift=h.shift||o.shift,h.alt=h.alt||o.alt,h.meta=o.meta,h.ctrl=o.ctrl,g(p({},a),{key:Gr(h)})}function lc(a){if(Array.isArray(a)){let s=[...a];return s.shift()+"("+s.map(o=>typeof o=="string"?`"${o}"`:o.toString()).join(", ")+")"}return a}function xp(a,s){let o=[],c=[];for(let h of a)try{let d=hg(h,s);if(!d)continue;let b=c.find(_=>_.key===d.key&&_.ifMode===d.ifMode);if(b)throw new Error(`Ambiguous key binding ${h.key} (${lc(h.command)}) matches ${b.key} (${lc(b.command)}) with the ${s.displayName} keyboard layout`);c.push(d)}catch(d){d instanceof Error&&o.push(d.message)}return[c,o]}var cc=class extends q{constructor(){super("latex")}createAtom(a){return new pe(a)}onPaste(a,s){if(!s)return!1;let o=typeof s=="string"?s:s.getData("application/x-latex")||s.getData("text/plain");return o&&a.model.contentWillChange({inputType:"insertFromPaste",data:o})?(a.stopCoalescingUndo(),a.stopRecording(),this.insert(a.model,o)&&(a.startRecording(),a.snapshot("paste"),a.model.contentDidChange({inputType:"insertFromPaste"}),J(a)),a.startRecording(),!0):!1}insert(a,s,o){if(!a.contentWillChange({data:s,inputType:"insertText"}))return!1;o||(o={}),o.insertionMode||(o.insertionMode="replaceSelection"),o.selectionMode||(o.selectionMode="placeholder");let{silenceNotifications:c}=a;o.silenceNotifications&&(a.silenceNotifications=!0);let h=a.silenceNotifications;a.silenceNotifications=!0,o.insertionMode==="replaceSelection"&&!a.selectionIsCollapsed?a.deleteAtoms(de(a.selection)):o.insertionMode==="replaceAll"?(a.root.setChildren([],"body"),a.position=0):o.insertionMode==="insertBefore"?a.collapseSelection("backward"):o.insertionMode==="insertAfter"&&a.collapseSelection("forward");let d=[];for(let $ of s)Eu.test($)&&d.push(new pe($));let b=a.at(a.position);if(b instanceof Nt&&(b=b.lastChild),!(b.parent instanceof Nt)){let $=new Nt;b.parent.addChildAfter($,b),b=$.firstChild}let _=b.parent.addChildrenAfter(d,b);return a.silenceNotifications=h,o.selectionMode==="before"||(o.selectionMode==="item"?a.setSelection(a.anchor,a.offsetOf(_)):_&&(a.position=a.offsetOf(_))),a.contentDidChange({data:s,inputType:"insertText"}),a.silenceNotifications=c,!0}};function oo(a){return a.atoms.find(s=>s.type==="latexgroup")}function fi(a){var s,o;let c=oo(a);return(o=(s=c==null?void 0:c.body)==null?void 0:s.filter(h=>h.type==="latex"))!=null?o:[]}function is(a,s){var o;let c=0,h=!1,d=Number.isFinite(s==null?void 0:s.before)?(o=s==null?void 0:s.before)!=null?o:0:a.lastOffset;for(;c<=d&&!h;){let $=a.at(c);h=$ instanceof pe&&$.isSuggestion,h||c++}if(!h)return[void 0,void 0];let b=c,_=!1;for(;b<=d&&!_;){let $=a.at(b);_=!($ instanceof pe&&$.isSuggestion),_||b++}return[c-1,b-1]}new cc;function fg(a,s){a.flushInlineShortcutBuffer(),a.stopCoalescingUndo();let o=ns(a,s),{model:c}=a;return c.selectionIsCollapsed?(a.defaultStyle.fontSeries&&o.fontSeries===a.defaultStyle.fontSeries&&(o.fontSeries="auto"),o.fontShape&&o.fontShape===a.defaultStyle.fontShape&&(o.fontShape="auto"),o.color&&o.color===a.defaultStyle.color&&(o.color="none"),o.backgroundColor&&o.backgroundColor===a.defaultStyle.backgroundColor&&(o.backgroundColor="none"),o.fontSize&&o.fontSize===a.defaultStyle.fontSize&&(o.fontSize="auto"),a.defaultStyle=p(p({},a.defaultStyle),o)):a.model.deferNotifications({content:!0,type:"insertText"},()=>{c.selection.ranges.forEach(h=>io(c,h,o,{operation:"toggle"})),a.snapshot("style-change")}),!0}fe({applyStyle:fg},{target:"mathfield",canUndo:!0,changeContent:!0});function ns(a,s){var o,c,h,d,b,_,$,j,Xt,Lt;let fr={};if(typeof s.color=="string"){let Js=(c=a.colorMap((o=s.color)!=null?o:s.verbatimColor))!=null?c:"none";Js!==s.color&&(fr.verbatimColor=(h=s.verbatimColor)!=null?h:s.color),fr.color=Js}if(typeof s.backgroundColor=="string"){let Js=(b=a.backgroundColorMap((d=s.backgroundColor)!=null?d:s.verbatimBackgroundColor))!=null?b:"none";Js!==s.backgroundColor&&(fr.verbatimBackgroundColor=(_=s.verbatimBackgroundColor)!=null?_:s.backgroundColor),fr.backgroundColor=Js}typeof s.fontFamily=="string"&&(fr.fontFamily=s.fontFamily),typeof s.series=="string"&&(fr.fontSeries=s.series),typeof s.fontSeries=="string"&&(fr.fontSeries=s.fontSeries.toLowerCase()),fr.fontSeries&&(fr.fontSeries=($={bold:"b",medium:"m",normal:"m"}[fr.fontSeries])!=null?$:fr.fontSeries),typeof s.shape=="string"&&(fr.fontShape=s.shape),typeof s.fontShape=="string"&&(fr.fontShape=s.fontShape.toLowerCase()),fr.fontShape&&(fr.fontShape=(j={italic:"it",up:"n",upright:"n",normal:"n"}[fr.fontShape])!=null?j:fr.fontShape),s.variant&&(fr.variant=s.variant.toLowerCase()),s.variantStyle!==void 0&&(fr.variantStyle=typeof s.variantStyle=="string"&&s.variantStyle!==""?s.variantStyle.toLowerCase():s.variantStyle);let Jr=(Xt=s.size)!=null?Xt:s.fontSize;return typeof Jr=="number"?fr.fontSize=Math.max(1,Math.min(10,Jr)):typeof Jr=="string"&&(fr.fontSize=(Lt={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[Jr.toLowerCase()])!=null?Lt:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[Jr]),fr}function ao(a,s,o){var c,h;let d=a.model;if(d.mode==="latex")return{};let b=a.styleBias;if(b==="none")return a.defaultStyle;if(d.mode==="text")return(h=(c=d.at(b==="right"?o.after:o.before))==null?void 0:c.style)!=null?h:a.defaultStyle;if(d.mode==="math"){let _=d.at(b==="right"?o.after:o.before);return _?p(g(p({},_.style),{variant:"normal"}),a.defaultStyle):a.defaultStyle}return{}}function Ht(a){let s=a.options.onInsertStyle;if(s===null)return{};s===void 0&&(s=ao);let o=a.model,c=a.styleBias,h=o.at(o.position),d=vp(o,h,c),b=vp(o,h.rightSibling,c);return s(a,o.position,{before:d,after:b})}function vp(a,s,o){var c;return!s||s.type==="first"&&o!=="right"?-1:s.type!=="group"?a.offsetOf(s):!s.body||s.body.length<2?-1:((c=s.body)==null?void 0:c.length)===1||o!=="right"?a.offsetOf(s.body[0]):a.offsetOf(s.body[s.body.length-1])}function gi(a){let s=fi(a.model).filter(o=>o.isSuggestion);if(s.length!==0){a.model.position=a.model.offsetOf(s[0].leftSibling);for(let o of s)o.parent.removeChild(o)}}function Fr(a,s){var o;let{model:c}=a;gi(a);for(let Xt of fi(c))Xt.isError=!1;if(!c.selectionIsCollapsed||a.options.popoverPolicy==="off"){Nr(a);return}let h=[],d=c.at(c.position);for(;d&&d instanceof pe&&/^[a-zA-Z\*]$/.test(d.value);)d=d.leftSibling;if(d&&d instanceof pe&&d.value==="\\")for(h.push(d),d=d.rightSibling;d&&d instanceof pe&&/^[a-zA-Z\*]$/.test(d.value);)h.push(d),d=d.rightSibling;let b=h.map(Xt=>Xt.value).join(""),_=Du(a,b);if(_.length===0){if(/^\\[a-zA-Z\*]+$/.test(b))for(let Xt of h)Xt.isError=!0;Nr(a);return}let $=(o=s==null?void 0:s.atIndex)!=null?o:0;a.suggestionIndex=$<0?_.length-1:$%_.length;let j=_[a.suggestionIndex];if(j!==b){let Xt=h[h.length-1];Xt.parent.addChildrenAfter([...j.slice(b.length-j.length)].map(Lt=>new pe(Lt,{isSuggestion:!0})),Xt),xt(a,{interactive:!0})}_p(a,_)}function os(a){let[s,o]=is(a,{before:a.position});if(s===void 0||o===void 0)return!1;let c=!1;return a.getAtoms([s,o]).forEach(h=>{h.isSuggestion&&(h.isSuggestion=!1,c=!0)}),c}function Xe(a,s="accept",o){var c,h;Nr(a);let d=oo(a.model);if(!d)return!1;if(s==="accept-suggestion"||s==="accept-all"){let j=fi(a.model).filter(Xt=>Xt.isSuggestion);if(j.length!==0){for(let Xt of j)Xt.isSuggestion=!1;a.model.position=a.model.offsetOf(j[j.length-1])}if(s==="accept-suggestion")return j.length!==0}let b=fi(a.model).filter(j=>!j.isSuggestion).map(j=>j.value).join(""),_=d.leftSibling;if(d.parent.removeChild(d),a.model.position=a.model.offsetOf(_),a.switchMode((c=o==null?void 0:o.mode)!=null?c:"math"),s==="reject")return!0;let $=p({},Ht(a));return!/^[a-zA-Z0-9]$/.test(b)&&a.styleBias!=="none"&&($.variant="normal",$.variantStyle=void 0),q.insert(a.model,b,{selectionMode:(h=o==null?void 0:o.selectItem)!=null&&h?"item":"placeholder",format:"latex",mode:"math",style:$}),a.snapshot(),a.model.announce("replacement"),a.switchMode("math"),!0}function bi(a){var s;let o=document.getElementById(a);return o?o.dataset.refcount=Number(Number.parseInt((s=o.dataset.refcount)!=null?s:"0")+1).toString():(o=document.createElement("div"),o.setAttribute("aria-hidden","true"),o.dataset.refcount="1",o.id=a,document.body.append(o)),o}function $r(a){var s;let o=document.getElementById(a);if(!o)return;let c=Number.parseInt((s=o.getAttribute("data-refcount"))!=null?s:"0");c<=1?o.remove():o.dataset.refcount=Number(c-1).toString()}function gg(a,s){let o=new B({from:a.context}),c=new y({mode:"math",type:"root",body:ge(s,{context:o})}),h=Tr(Vt(new w(c.render(o),{classes:"ML__base"}),o));return Dr(h,{classes:"ML__latex"}).toMarkup()}function _p(a,s){var o;if(s.length===0){Nr(a);return}let c="";for(let[d,b]of s.entries()){let _=b,$=gg(a,b),j=yp(a.keybindings,_).join("<br>");c+=`<li role="button" data-command="${_}" ${d===a.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${_}</span><span class="ML__popover__command">${$}</span>`,j&&(c+=`<span class="ML__popover__keybinding">${j}</span>`),c+="</li>"}let h=bg(a,`<ul>${c}</ul>`);uc()&&((o=h.querySelector(".ML__popover__current"))==null||o.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var d;h&&!uc()&&(h.classList.add("is-visible"),fn(a),(d=h.querySelector(".ML__popover__current"))==null||d.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}function uc(){let a=document.getElementById("mathlive-suggestion-popover");return a?a.classList.contains("is-visible"):!1}function fn(a,s){var o,c,h;if(!a.element||a.element.mathfield!==a||!uc())return;if(((o=a.model.at(a.model.position))==null?void 0:o.type)!=="latex"){Nr(a);return}if(s!=null&&s.deferred){setTimeout(()=>fn(a),32);return}let d=Yi(a.field);if(!d)return;let b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,_=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,$=window.innerWidth-document.documentElement.clientWidth,j=window.innerHeight-document.documentElement.clientHeight,Xt=(h=(c=window.mathVirtualKeyboard)==null?void 0:c.boundingRect.height)!=null?h:0,Lt=document.getElementById("mathlive-suggestion-popover");d.x+Lt.offsetWidth/2>_-$?Lt.style.left=`${_-Lt.offsetWidth-$}px`:d.x-Lt.offsetWidth/2<0?Lt.style.left="0":Lt.style.left=`${d.x-Lt.offsetWidth/2}px`;let fr=d.y-d.height;b-j-Xt-d.y<fr?(Lt.classList.add("ML__popover--reverse-direction"),Lt.classList.remove("top-tip"),Lt.classList.add("bottom-tip"),Lt.style.top=`${d.y-d.height-Lt.offsetHeight-15}px`):(Lt.classList.remove("ML__popover--reverse-direction"),Lt.classList.add("top-tip"),Lt.classList.remove("bottom-tip"),Lt.style.top=`${d.y+15}px`)}function Nr(a){a.suggestionIndex=0,document.getElementById("mathlive-suggestion-popover")&&$r("mathlive-suggestion-popover")}function bg(a,s){let o=document.getElementById("mathlive-suggestion-popover");return o?$r("mathlive-suggestion-popover"):(We("suggestion-popover"),We("core")),o=bi("mathlive-suggestion-popover"),o.addEventListener("pointerdown",c=>c.preventDefault()),o.addEventListener("click",c=>{let h=c.target;for(;h&&!h.dataset.command;)h=h.parentElement;h&&(Xe(a,"reject"),q.insert(a.model,h.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),a.dirty=!0,a.focus())}),o.innerHTML=globalThis.MathfieldElement.createHTML(s),o}function Mp(){document.getElementById("mathlive-suggestion-popover")&&($r("mathlive-suggestion-popover"),nt("suggestion-popover"),nt("core"))}function yg(){let a=String(new Error().stack).replace(/^Error.*\n/,"").split(`
`);if(a.length===0)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${new Error().stack}").`),"";let s=a[1],o=s.match(/http.*\.ts[\?:]/);return o&&(s=a[2]),o=s.match(/(https?:.*):[0-9]+:[0-9]+/),o||(o=s.match(/at (.*(\.ts))[\?:]/),o||(o=s.match(/at (.*(\.mjs|\.js))[\?:]/))),o?o[1]:(console.error(a),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${s}").`),"")}var ur=null,wp,Sp,dc=((Sp=(wp=globalThis==null?void 0:globalThis.document)==null?void 0:wp.currentScript)==null?void 0:Sp.src)||yg();async function as(a){if(/^(?:[a-z+]+:)?\/\//i.test(a)){try{return new URL(a).href}catch{}if(a.startsWith("//"))try{return new URL(`${window.location.protocol}${a}`).href}catch{}return a}if(ur===null)try{let s=await fetch(dc,{method:"HEAD"});s.status===200&&(ur=s.url,ur=ur.replace(/\/\+esm$/,"/"),ur.includes("jsdelivr.net/")&&(ur+="/"))}catch{console.error(`Invalid URL "${a}" (relative to "${dc}")`)}return new URL(a,ur??dc).href}function xg(a,s,o={}){return new FontFace(a,`url(${s}.woff2) format('woff2')`,o)}var Ie="not-loaded";async function kp(){return Ie="not-loaded",dr()}async function dr(){var a;if(Ie==="not-loaded"){if(Ie="loading",(a=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))!=null?a:!1){Ie="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let s=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],o=Array.from(document.fonts).map(d=>d.family);if(s.every(d=>o.includes(d))){Ie="ready";return}if(!globalThis.MathfieldElement.fontsDirectory){Ie="not-loaded";return}let c=await as(globalThis.MathfieldElement.fontsDirectory);if(!c){document.body.classList.add("ML__fonts-did-not-load"),Ie="error";return}c.endsWith("/")&&(c=c.slice(0,-1));let h=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(d=>xg(d[0].replace(/-[a-zA-Z]+$/,""),`${c}/${d[0]}`,d[1]));try{(await Promise.all(h.map(d=>{try{return d.load()}catch{}}))).forEach(d=>document.fonts.add(d)),Ie="ready";return}catch(d){console.error(`MathLive 0.108.2: The math fonts could not be loaded from "${c}"`,{cause:d}),document.body.classList.add("ML__fonts-did-not-load")}Ie="error"}}}function Lp(a,s=0){let o=3735928559^s,c=1103547991^s;for(let h=0;h<a.length;h++){let d=a.charCodeAt(h);o=Math.imul(o^d,2654435761),c=Math.imul(c^d,1597334677)}return o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(c^c>>>13,3266489909),c=Math.imul(c^c>>>16,2246822507),c^=Math.imul(o^o>>>13,3266489909),4294967296*(2097151&c)+(o>>>0)}function J(a,s){!a||a.dirty||!a.field||(a.resizeObserver.unobserve(a.field),a.dirty=!0,requestAnimationFrame(()=>{it(a)&&a.dirty&&(a.atomBoundsCache=new Map,xt(a,s),a.resizeObserver.observe(a.field),a.resizeObserverStarted=!0)}))}function vg(a,s){var o;s=s??{};let c=new B({from:g(p({},a.context),{atomIdsSettings:{seed:s.forHighlighting?Lp(y.serialize([a.model.root],{expandMacro:!1,defaultMode:a.options.defaultMode})):"random",groupNumbers:(o=s.forHighlighting)!=null?o:!1},letterShapeStyle:a.options.letterShapeStyle}),mathstyle:a.options.defaultMode==="inline-math"?"textstyle":"displaystyle"}),h=a.model.root.render(c);return Dr(Vt(h,c),{classes:a.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{translate:"no","aria-hidden":"true"}})}function mc(a,s){try{let{model:o}=a;o.root.caret=void 0,o.root.isSelected=!1,o.root.containsCaret=!0;for(let c of o.atoms)c.caret=void 0,c.isSelected=!1,c.containsCaret=!1;if(o.selectionIsCollapsed){let c=o.at(o.position);c.caret=a.model.mode;let h=c.parent;for(;h;)h.containsCaret=!0,h=h.parent}else{let c=o.getAtoms(o.selection,{includeChildren:!0,includeFirstAtoms:!0});for(let h of c)h.isSelected=!0}return vg(a,s).toMarkup()}catch(o){return console.error(o),'<span class="ML__latex" translate="no" aria-hidden="true"></span>'}}function xt(a,s){if(!it(a))return;s!=null||(s={});let o=a.element.querySelector("[part=virtual-keyboard-toggle]");o&&(o.style.display=a.hasEditableContent?"":"none");let c=a.field;if(!c)return;let h=a.isSelectionEditable&&a.hasFocus(),d=c.classList.contains("ML__focused");d&&!h?c.classList.remove("ML__focused"):!d&&h&&c.classList.add("ML__focused");let b=mc(a,s),_=a.element.querySelector("[part=menu-toggle]");if(_){let $=!1;(a.disabled||a.readOnly&&!a.hasEditableContent||a.userSelect==="none")&&($=!0),!$&&a.element.offsetWidth<50&&($=!0),_.style.display=$?"none":""}if(a.model.atoms.length<=1){let $=a.options.contentPlaceholder;$&&(b+=`<span part=placeholder class="ML__content-placeholder">${he($)}</span>`)}c.innerHTML=globalThis.MathfieldElement.createHTML(b),so(a,s.interactive),a.updateToggleLayout(),a.dirty=!1}function so(a,s){var o;let c=a.field;if(!c)return;for(let j of c.querySelectorAll(".ML__selection, .ML__contains-highlight"))j.remove();if(!(s!=null&&s)&&Ie!=="error"&&Ie!=="ready"){setTimeout(()=>{Ie==="ready"?so(a):setTimeout(()=>so(a),128)},32);return}let h=a.model;(o=a.atomBoundsCache)==null||o.clear();let d,b=()=>{if(d!==void 0)return d;let j=c.offsetWidth,Xt=c.getBoundingClientRect().width;return d=Math.floor(Xt)/j,isNaN(d)&&(d=1),d};if(h.selectionIsCollapsed){fn(a,{deferred:!0});let j=h.at(h.position);for(;j&&j.type!=="prompt"&&!(j.containsCaret&&j.displayContainsHighlight);)j=j.parent;if(j!=null&&j.containsCaret&&j.displayContainsHighlight){let Xt=b(),Lt=tc(a,nr(a,j),Xt);if(Lt){Lt.left/=Xt,Lt.right/=Xt,Lt.top/=Xt,Lt.bottom/=Xt;let fr=document.createElement("div");fr.classList.add("ML__contains-highlight"),fr.style.position="absolute",fr.style.left=`${Lt.left+1}px`,fr.style.top=`${Math.ceil(Lt.top)}px`,fr.style.width=`${Math.ceil(Lt.right-Lt.left)}px`,fr.style.height=`${Math.ceil(Lt.bottom-Lt.top)}px`,c.insertBefore(fr,c.childNodes[0])}}return}let _=b(),$=_g(Va(a,{excludeAtomsWithBackground:!0}));for(let j of $){j.left/=_,j.right/=_,j.top/=_,j.bottom/=_;let Xt=document.createElement("div");Xt.classList.add("ML__selection"),Xt.style.position="absolute",Xt.style.left=`${j.left}px`,Xt.style.top=`${j.top}px`,Xt.style.width=`${Math.ceil(j.right-j.left)}px`,Xt.style.height=`${Math.max(1,Math.ceil(j.bottom-j.top-1))}px`,c.insertBefore(Xt,c.childNodes[0])}}function _g(a){let s=[];for(let o of a){let c=!1;for(let h of s)if(o.left===h.left&&o.right===h.right&&o.top===h.top&&o.bottom===h.bottom){c=!0;break}c||s.push(o)}a=s,s=[];for(let o of a){let c=0;for(let h of a)if(o.left>=h.left&&o.right<=h.right&&o.top>=h.top&&o.bottom<=h.bottom&&(c+=1,c>1))break;c===1&&s.push(o)}return s}function pc(a){if(!a)return;let s=a.model,o=s.selection,c=y.serialize([s.root],{expandMacro:!1,defaultMode:a.options.defaultMode});q.insert(s,c,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"});let h=s.silenceNotifications;s.silenceNotifications=!0,s.selection=o,s.silenceNotifications=h,J(a)}function hc(){for(let a of document.querySelectorAll(".ML__mathfield"))"_mathfield"in a&&pc(a._mathfield)}var fc=3,vt;function fe(a,s){s=p({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},s??{}),vt||(vt={});for(let o of Object.keys(a))vt[o],vt[o]=g(p({},s),{fn:a[o]})}function gc(a){let s;if(Array.isArray(a)){if(a[0]==="performWithFeedback")return gc(a[1]);s=a[0]}else s=a;return vt[s]}function mr(a){var s;return(s=gc(a))==null?void 0:s.target}function Ap(a,s){var o,c;if(s=yi(s),!s)return!1;let h,d=[],b=!1,_=!1;ee(s)?(h=s[0],d=s.slice(1)):h=s;let $=vt[h],j=$==null?void 0:$.target;if(j==="model"){if(!a.isSelectionEditable&&$!=null&&$.changeContent)return a.model.announce("plonk"),!1;/^(delete|add)/.test(h)&&(h!=="deleteBackward"&&a.flushInlineShortcutBuffer(),a.snapshot(h)),/^complete/.test(h)||gi(a),vt[h].fn(a.model,...d),Fr(a),_=!0,b=!0}else if(j==="virtual-keyboard")_=(c=(o=window.mathVirtualKeyboard)==null?void 0:o.executeCommand(s))!=null?c:!1,b=!0;else if(vt[h]){if(!a.isSelectionEditable&&$!=null&&$.changeContent)return a.model.announce("plonk"),!1;/^(undo|redo)/.test(h)&&a.flushInlineShortcutBuffer(),_=vt[h].fn(a,...d),b=!0}else throw new Error(`Unknown command "${h}"`);return j!=="virtual-keyboard"&&(!a.model.selectionIsCollapsed||$!=null&&$.changeSelection&&h!=="deleteBackward")&&(a.flushInlineShortcutBuffer(),$!=null&&$.changeContent||a.stopCoalescingUndo(),a.defaultStyle={}),_&&($!=null&&$.changeSelection&&b?(a.dirty=!0,a.scrollIntoView()):J(a)),b}function Mg(a,s){var o;if(!a)return!1;a.focus(),gn.keypressVibration&&Ro()&&navigator.vibrate(fc);let c=gc(s);globalThis.MathfieldElement.playSound((o=c==null?void 0:c.audioFeedback)!=null?o:"keypress");let h=a.executeCommand(s);return a.scrollIntoView(),h}fe({performWithFeedback:(a,s)=>Mg(a,s)});function wg(a){return Fr(a,{atIndex:a.suggestionIndex+1}),!1}function Sg(a){return Fr(a,{atIndex:a.suggestionIndex-1}),!1}fe({complete:Xe},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0});fe({dispatchEvent:(a,s,o)=>{var c,h;return(h=(c=a.host)==null?void 0:c.dispatchEvent(new CustomEvent(s,{detail:o})))!=null?h:!1}},{target:"mathfield"});fe({nextSuggestion:wg,previousSuggestion:Sg},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});function yi(a){if(!a)return;if(ee(a)&&a.length>0){let o=a[0];return o=o.replace(/-\w/g,c=>c[1].toUpperCase()),o==="performWithFeedback"&&a.length===2?[o,yi(a[1])]:[o,...a.slice(1)]}if(typeof a!="string")return;let s=a.trim().match(/^([a-zA-Z0-9-]+)\((.*)\)$/);if(s){let o=s[1].replace(/-\w/g,h=>h[1].toUpperCase()),c=s[2].split(",").map(h=>h.trim());return[o,...c.map(h=>{if(/"[^"]*"/.test(h)||/'[^']*'/.test(h))return h.slice(1,-1);if(/^true$/.test(h))return!0;if(/^false$/.test(h))return!1;if(/^[-]?\d+$/.test(h))return parseInt(h,10);if(/^\{.*\}$/.test(h))try{return JSON.parse(h)}catch{return console.error("Invalid argument:",h),h}return yi(h)})]}return a.replace(/-\w/g,o=>o[1].toUpperCase())}var co="mathlive#virtual-keyboard-message";function uo(a){var s;return a.type!=="message"?!1:((s=a.data)==null?void 0:s.type)===co}var lo=class $y{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this.targetWindow=window.top,this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new $y),this._singleton}getKeycap(s){}setKeycap(s,o){this.sendMessage("update-setting",{setKeycap:{keycap:s,value:o}})}set alphabeticLayout(s){this.sendMessage("update-setting",{alphabeticLayout:s})}set layouts(s){this.sendMessage("update-setting",{layouts:s})}get normalizedLayouts(){return[]}set editToolbar(s){this.sendMessage("update-setting",{editToolbar:s})}set container(s){throw new Error("Container inside an iframe cannot be changed")}show(s){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!0},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("show",s),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}hide(s){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!1},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("hide",s),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(s){s?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(s){return this.sendMessage("execute-command",{command:s}),!0}updateToolbar(s){this.sendMessage("update-toolbar",s)}update(s){this.sendMessage("update-setting",s)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(s,o,c){this.listeners[s]||(this.listeners[s]=new Set),this.listeners[s].has(o)||this.listeners[s].add(o)}dispatchEvent(s){return!this.listeners[s.type]||this.listeners[s.type].size===0?!0:(this.listeners[s.type].forEach(o=>{typeof o=="function"?o(s):o==null||o.handleEvent(s)}),!s.defaultPrevented)}removeEventListener(s,o,c){this.listeners[s]&&this.listeners[s].delete(o)}handleEvent(s){if(uo(s)){if(!Qi(s.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${s.origin}) cannot be handled`,"SecurityError");this.handleMessage(s.data)}}handleMessage(s){let{action:o}=s;if(o==="execute-command"){let{command:c}=s;mr(c)==="virtual-keyboard"&&this.executeCommand(c);return}if(o==="synchronize-proxy"){this._boundingRect=s.boundingRect,this._isShifted=s.isShifted;return}if(o==="geometry-changed"){this._boundingRect=s.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(s,o={}){if(!this.targetWindow)throw new DOMException("A frame does not have access to the top window and can't communicate with the keyboard.","SecurityError");this.targetWindow.postMessage(p({type:co,action:s},o),this.targetOrigin)}},bc={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log","\\lg","\\operatorname{lb}"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:""}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:""}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"epsilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"psi",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"epsilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\operatorname{arsinh}"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rightarrow",shift:"\\Rightarrow",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\operatorname{arcosh}"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\operatorname{artanh}"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\operatorname{arctg}"},{class:"small",latex:"\\operatorname{tg}"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          div.minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          div.minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px 20px 0px 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},ss={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"","","","","",""],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"","","","","",""],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"},""],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},"","","",""],E:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},"","","",""],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"},"","","",""],I:[{latex:"\\imaginaryI",aside:"imaginary i"},"","","",""],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"},""],o:["","","","","",""],O:["","","","","",""],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],u:["","","",""],U:["","","",""],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],y:["",""],Y:[""],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br> em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br> em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br> em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br> em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:" em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:" em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]},bn;function ls(a,s){var o,c,h,d,b;let _=ze.singleton;if(!_)return;let $=xi(a),j="";if(window.mathVirtualKeyboard.isShifted){let js=(o=_.getKeycap($==null?void 0:$.id))==null?void 0:o.shift;typeof js=="object"&&"variants"in js&&(j=(c=js.variants)!=null?c:"")}else j=(d=(h=_.getKeycap($==null?void 0:$.id))==null?void 0:h.variants)!=null?d:"";if(typeof j=="string"&&!cs(j)||Array.isArray(j)&&j.length===0){s==null||s();return}let Xt={},Lt="";for(let js of Lg(j)){let eu=mo(js),Oo=Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);Xt[Oo]=eu;let[tu,Bo]=yn(eu);Lt+=`<div id=${Oo} class="item ${Bo}">${tu}</div>`}let fr=document.createElement("div");fr.setAttribute("aria-hidden","true"),fr.className="MLK__variant-panel",fr.style.height="auto";let Jr=Object.keys(Xt).length,Js=5;Jr===1?Js=1:Jr===2||Jr===4?Js=2:Jr===3||Jr===5||Jr===6?Js=3:Jr>=7&&Jr<14&&(Js=4),fr.style.width=`calc(var(--variant-keycap-length) * ${Js} + 12px)`,fr.innerHTML=gn.createHTML(Lt),Te.open({root:(b=_==null?void 0:_.container)==null?void 0:b.querySelector(".ML__keyboard"),child:fr}),bn=new AbortController;let{signal:qs}=bn,zo=a==null?void 0:a.getBoundingClientRect();if(zo){zo.top-fr.clientHeight<0&&(fr.style.width="auto",Jr<=6?fr.style.height="56px":Jr<=12?fr.style.height="108px":Jr<=18?fr.style.height="205px":fr.classList.add("compact"));let js=Math.max(0,Math.min(window.innerWidth-fr.offsetWidth,(zo.left+zo.right-fr.offsetWidth)/2)),eu=zo.top-fr.clientHeight+5;fr.style.left=`${js}px`,fr.style.top=`${eu}px`,fr.classList.add("is-visible"),requestAnimationFrame(()=>{var Oo;fr.addEventListener("pointerup",tu=>{let Bo=xi(tu.target);!(Bo!=null&&Bo.id)||!Xt[Bo.id]||(us(Xt[Bo.id]),Vr(),s==null||s(),tu.preventDefault())},{capture:!0,passive:!1,signal:qs}),fr.addEventListener("pointerenter",tu=>{let Bo=xi(tu.target);!(Bo!=null&&Bo.id)||!Xt[Bo.id]||Bo.classList.add("is-active")},{capture:!0,signal:qs}),fr.addEventListener("pointerleave",tu=>{let Bo=xi(tu.target);tu.target&&"tagName"in tu.target&&typeof tu.target.tagName=="string"&&tu.target.tagName.toUpperCase()==="ASIDE"||!(Bo!=null&&Bo.id)||!Xt[Bo.id]||Bo.classList.remove("is-active")},{capture:!0,signal:qs}),(Oo=_.getKeycap($==null?void 0:$.id))!=null&&Oo.stickyVariantPanel?window.addEventListener("pointerdown",tu=>{if(!(tu.target instanceof Node))return;let Bo=fr.contains(tu.target);tu.target===fr||Bo||(Vr(),s==null||s())},{signal:qs}):(window.addEventListener("pointercancel",()=>{Vr(),s==null||s()},{signal:qs}),window.addEventListener("pointerup",()=>{Vr(),s==null||s()},{signal:qs}))})}}function Vr(){bn==null||bn.abort(),bn=null,Te.state==="open"&&Te.close()}function kg(a){if(a==="foreground-color"){let s=[];for(let o of Object.keys(Yt))s.push({class:"swatch-button",label:'<span style="border: 3px solid '+Yt[o]+'"></span>',command:["applyStyle",{color:o}]});return s}if(a==="background-color"){let s=[];for(let o of Object.keys(Zt))s.push({class:"swatch-button",label:'<span style="background:'+Zt[o]+'"></span>',command:["applyStyle",{backgroundColor:o}]});return s}}function cs(a){return ss[a]!==void 0}function Lg(a){var s;return typeof a!="string"?a:(ss[a]||(ss[a]=(s=kg(a))!=null?s:[]),ss[a])}function Ag(a){return typeof a=="string"?a:Object.entries(a).map(([s,o])=>`${s}:${o} !important`).join(";")}function Cg(a){return Object.keys(a).map(s=>`${s} {${Ag(a[s])}}`).join("")}function po(a){if(!a)return"";let s=new B,o=new y({mode:"math",type:"root",body:ge(a,{context:s,args:h=>h==="@"?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})}),c=Tr(Vt(new w(o.render(s),{classes:"ML__base"}),s));return Dr(c,{classes:"ML__latex"}).toMarkup()}function ds(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Eg(a){return a.replace(/<\/?[^>]+(>|$)/g," ")}function Tg(a){var s,o,c,h;let d=(h=(c=(o=(s=a.tooltip)!=null?s:typeof a.label=="string"?Eg(a.label):void 0)!=null?o:a.insert)!=null?c:a.latex)!=null?h:a.key;return d&&d.replace(/\s+/g," ").trim()||null}function Dg(a){if(typeof a>"u"||a===null)return null;try{return JSON.stringify(a)}catch{return null}}function Og(a){var s,o;let c=(o=(s=a.insert)!=null?s:a.latex)!=null?o:a.key;return c??null}function ho(a){if(Array.isArray(a))return a.map(o=>ho(o)).flat();let s=typeof a=="string"?{markup:a}:a;return"rows"in s&&Array.isArray(s.rows)&&(s.rows=s.rows.map(o=>o.map(c=>mo(c)))),s.id!=null||(s.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36)),[s]}function Bg(){var a,s;let o=window.mathVirtualKeyboard.alphabeticLayout;if(o==="auto"){let b=gr();b&&(o=b.virtualLayout),(!o||o==="auto")&&(o=(a={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[F.locale.slice(0,2)])!=null?a:"qwerty")}let c={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},h=(s=c[o])!=null?s:c.qwerty,d=o==="azerty"?[[{label:"1",variants:"1"},{label:"2",shift:{latex:""},variants:"2"},{label:"3",shift:{latex:""},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:""},variants:"7"},{label:"8",shift:{latex:""},variants:"8"},{label:"9",shift:{latex:""},variants:"9"},{label:"0",shift:{latex:""},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let b of h){let _=[];for(let $ of b)/[a-z]/.test($)?_.push({label:$,class:"hide-shift",shift:{label:$.toUpperCase(),variants:cs($.toUpperCase())?$.toUpperCase():void 0},variants:cs($)?$:void 0}):$==="~"?o!=="dvorak"?_.push("[backspace]"):_.push({label:"[backspace]",width:1}):$==="^"?_.push("[shift]"):$===" "&&_.push("[separator-5]");d.push(_)}return d.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:ho({rows:d})}}function yc(a){if(a==="alphabetic")return Bg();if(typeof a=="string")return yc(bc[a]);let s;if("rows"in a&&Array.isArray(a.rows)){let h=a,{rows:d}=h,b=Ai(h,["rows"]);s=g(p({},b),{layers:ho({rows:a.rows})})}else if("markup"in a&&typeof a.markup=="string"){let h=a,{markup:d}=h,b=Ai(h,["markup"]);s=g(p({},b),{layers:ho(a.markup)})}else s=p({},a),"layers"in a?s.layers=ho(a.layers):console.error('MathLive 0.108.2: provide either a "rows", "markup" or "layers" property');let o=!1,c=!1;for(let h of s.layers)if(h.rows)for(let d of h.rows.flat()){xn(d)&&(o=!0);let b=d.command;typeof b=="string"&&["undo","redo","cut","copy","paste"].includes(b)&&(c=!0)}return(!("displayShiftedKeycaps"in a)||a.displayShiftedKeycaps===void 0)&&(s.displayShiftedKeycaps=o),(!("displayEditToolbar"in a)||a.displayEditToolbar===void 0)&&(s.displayEditToolbar=!c),s}function Kg(a,s){var o,c;let h='<div class="left">';if(a.normalizedLayouts.length>1)for(let[d,b]of a.normalizedLayouts.entries()){let _=b,$=[d===s?"selected":"layer-switch"];_.tooltip&&$.push("MLK__tooltip"),_.labelClass&&$.push(..._.labelClass.split(" ")),h+=`<div class="${$.join(" ")}"`,_.tooltip&&(h+=" data-tooltip='"+((o=I(_.tooltip))!=null?o:_.tooltip)+"' "),d!==s&&(h+=`data-layer="${_.layers[0].id}"`),h+=`>${(c=_.label)!=null?c:"untitled"}</div>`}return h+="</div>",h}function Cp(a,s){let o="";if(a.editToolbar==="none")return"";let c=[];s.selectionIsCollapsed?c.push("undo","redo","pasteFromClipboard"):c.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let h={undo:`<div class='action ${s.canUndo===!1?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${I("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${s.canRedo===!1?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${I("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${I("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${I("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${I("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return o+=c.map(d=>h[d]).join(""),o}function Pg(a){for(let s of a)Rg(s)}function Rg(a){let s=ze.singleton;if(!s)return;let o={};if(!a.id){if(a.hasAttribute("data-label")&&(o.label=a.dataset.label),a.hasAttribute("data-latex")&&(o.latex=a.dataset.latex),a.hasAttribute("data-key")&&(o.key=a.dataset.key),a.hasAttribute("data-insert")&&(o.insert=a.dataset.insert),a.hasAttribute("data-variants")&&(o.variants=a.dataset.variants),a.hasAttribute("data-aside")&&(o.aside=a.dataset.aside),a.className&&(o.class=a.className),!o.label&&!o.latex&&!o.key&&!o.insert&&(o.latex=a.innerText,o.label=a.innerHTML),a.hasAttribute("data-command"))try{o.command=JSON.parse(a.dataset.command)}catch(c){console.warn("Invalid JSON in data-command attribute",c)}a.id=s.registerKeycap(o)}if(!a.innerHTML){let[c]=yn(o);a.innerHTML=globalThis.MathfieldElement.createHTML(c)}}function Ig(){We("virtual-keyboard"),We("core"),dr()}function Ep(){nt("core"),nt("virtual-keyboard")}var zg=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>


<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function Tp(a){a.resetKeycapRegistry(),Ig();let s=document.createElement("div");s.className="ML__keyboard";let o=document.createElement("div");o.className="MLK__plate",o.innerHTML=globalThis.MathfieldElement.createHTML(zg+a.normalizedLayouts.map((b,_)=>Ng(a,b,_)).join(""));let c=document.createElement("div");c.className="MLK__backdrop",c.appendChild(o),s.appendChild(c),s.addEventListener("pointerdown",$g,{passive:!1});let h=s.querySelectorAll(".ML__edit-toolbar");if(h)for(let b of h)b.addEventListener("click",_=>{var $,j;let Xt=_.target,Lt="";for(;Xt&&!Lt;)Lt=($=Xt==null?void 0:Xt.getAttribute("data-command"))!=null?$:"",Xt=(j=Xt==null?void 0:Xt.parentElement)!=null?j:null;Lt&&a.executeCommand(JSON.parse(Lt))});Pg(s.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let d=s.querySelectorAll(".MLK__layer");d.length>0;for(let b of d)b.addEventListener("pointerdown",_=>_.preventDefault());return a.currentLayer=a.latentLayer,s}function Ng(a,s,o){var c;let h=[];if(!("layers"in s))return"";for(let d of s.layers)h.push(`<div tabindex="-1" class="MLK__layer" id="${d.id}">`),(a.normalizedLayouts.length>1||s.displayEditToolbar)&&(h.push("<div class='MLK__toolbar' role='toolbar'>"),h.push(Kg(a,o)),((c=s.displayEditToolbar)==null||c)&&h.push('<div class="ML__edit-toolbar right"></div>'),h.push("</div>")),h.push(Fg(a,d)),h.push("</div>");return h.join("")}function Fg(a,s){if(typeof s=="string")return s;let o="";if(typeof s.style=="string"?o+=`<style>${s.style}</style>`:typeof s.style=="object"&&(o+=`<style>${Cg(s.style)}</style>`),s.backdrop&&(o+=`<div class='${s.backdrop}'>`),s.container&&(o+=`<div class='${s.container}'>`),s.rows){o+="<div class=MLK__rows>";for(let c of s.rows){o+='<div dir="ltr" class=MLK__row>';for(let h of c)if(h){let d=a.registerKeycap(h),[b,_]=yn(h);/(^|\s)separator/.test(_)?o+=`<div class="${_}"`:o+=`<div tabindex="-1" id="${d}" class="${_}"`,h.tooltip&&(o+=` data-tooltip="${ds(h.tooltip)}"`);let $=Tg(h);$&&(o+=` aria-label="${ds($)}"`);let j=Dg(h.command);j&&(o+=` data-command="${ds(j)}"`);let Xt=Og(h);Xt&&(o+=` data-keycap-value="${ds(Xt)}"`),o+=`>${b}</div>`}o+="</div>"}o+="</div>"}else s.markup&&(o+=s.markup);return s.container&&(o+="</div>"),s.backdrop&&(o+="</div>"),o}function yn(a,s={shifted:!1}){var o,c,h,d,b,_,$;let j="",Xt=(o=a.class)!=null?o:"";if(s.shifted&&xn(a)&&(Xt+=" is-active"),s.shifted&&"shift"in a)typeof a.shift=="string"?j=po(a.shift):typeof a.shift=="object"&&(j=a.shift.label?a.shift.label:(c=po(a.shift.latex||a.shift.insert||"")||a.shift.key)!=null?c:""),typeof a.shift=="object"&&(Xt=(d=(h=a.shift.class)!=null?h:a.class)!=null?d:"");else{if(j=a.label?a.label:(b=po(a.latex||a.insert||"")||a.key)!=null?b:"",a.shift){let Lt;typeof a.shift=="string"?Lt=po(a.shift):a.shift.label?Lt=a.shift.label:Lt=(_=po(a.shift.latex||a.shift.insert||"")||a.shift.key)!=null?_:"",j+=`<span class="MLK__shift">${Lt}</span>`}a.aside&&(j+=`<aside>${a.aside}</aside>`)}return a.layer&&!/layer-switch/.test(Xt)&&(Xt+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(Xt)||(Xt+=" MLK__keycap"),!/\bw[0-9]+\b/.test(Xt)&&a.width&&(Xt+=($={0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"}[a.width])!=null?$:""),[j,Xt||"MLK__keycap"]}var Wt={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:"performWithFeedback(moveToPreviousChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:"performWithFeedback(extendSelectionBackward)"}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:"performWithFeedback(moveToNextChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:"performWithFeedback(extendSelectionForward)"}},"[up]":{class:"action hide-shift",label:"",command:"performWithFeedback(moveUp)",shift:{label:"",command:"performWithFeedback(extendSelectionUpward)"}},"[down]":{class:"action hide-shift",label:"",command:"performWithFeedback(moveDown)",shift:{label:"",command:"performWithFeedback(extendSelectionDownward)"}},"[return]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"performWithFeedback(insertDecimalSeparator)",shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:"performWithFeedback(insertDecimalSeparator)",shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:"performWithFeedback(deleteBackward)",label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"}"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function mo(a){var s;if(typeof a=="string"){if(a==="[.]"&&globalThis.MathfieldElement.decimalSeparator===","&&(a="[,]"),!Wt[a])return{latex:a};a={label:a}}let o;return"label"in a&&a.label&&Wt[a.label]&&(o=g(p(p({},Wt[a.label]),a),{label:Wt[a.label].label})),"key"in a&&a.key&&Wt[a.key]&&(o=g(p(p({},Wt[a.key]),a),{key:Wt[a.key].key})),o?(o.command==="insertDecimalSeparator"&&(o.label=(s=globalThis.MathfieldElement.decimalSeparator)!=null?s:"."),(o.tooltip===void 0||o.tooltip===null||o.tooltip===!1)&&delete o.tooltip,(o.tooltip===void 0||o.tooltip===null||o.tooltip===!1)&&delete o.tooltip,(o.aside===void 0||o.aside===null||o.aside===!1)&&delete o.aside,(o.variants===void 0||o.variants===null||o.variants===!1)&&delete o.variants,(o.shift===void 0||o.shift===null||o.shift===!1)&&delete o.shift,o):a}var fo;function $g(a){var s,o,c,h;if(a.button!==0)return;let d=ze.singleton;if(!d)return;let b=a.target;for(;b&&!b.getAttribute("data-layer");)b=b.parentElement;if(b){d.currentLayer=(s=b.getAttribute("data-layer"))!=null?s:"",a.preventDefault();return}let _=xi(a.target);if(!(_!=null&&_.id))return;let $=d.getKeycap(_.id);if(!$)return;a.type;let j=d;if(!j.connectedMathfieldWindow){let fr=(o=window.focusedMathfield)==null?void 0:o.call(window);if(fr){let Jr=(h=(c=fr.element)==null?void 0:c.ownerDocument)==null?void 0:h.defaultView;Jr&&Jr!==window&&(j.connectedMathfieldWindow=Jr)}}let Xt=new AbortController,Lt=Xt.signal;_.classList.add("is-pressed"),_.addEventListener("pointerenter",ms(Xt),{capture:!0,signal:Lt}),_.addEventListener("pointerleave",ms(Xt),{capture:!0,signal:Lt}),_.addEventListener("pointercancel",ms(Xt),{signal:Lt}),_.addEventListener("pointerup",ms(Xt),{signal:Lt}),xn($)&&(_.classList.add("is-active"),d.shiftPressCount++),$.variants&&(fo&&clearTimeout(fo),fo=setTimeout(()=>{_.classList.contains("is-pressed")&&(_.classList.remove("is-pressed"),_.classList.add("is-active"),a.target&&"releasePointerCapture"in a.target&&a.target.releasePointerCapture(a.pointerId),ls(_,()=>{Xt.abort(),_==null||_.classList.remove("is-active")}))},$.stickyVariantPanel?0:300)),a.preventDefault()}function ms(a){return s=>{let o=xi(s.target);if(!(o!=null&&o.id))return;let c=ze.singleton;if(!c)return;let h=c.getKeycap(o.id);if(h){if(s.type==="pointerenter"&&s.target===o&&s.isPrimary&&o.classList.add("is-pressed"),s.type==="pointercancel"){o.classList.remove("is-pressed"),xn(h)&&(c.shiftPressCount--,o.classList.toggle("is-active",c.isShifted)),a.abort();return}if(s.type==="pointerleave"&&s.target===o){o.classList.remove("is-pressed"),xn(h)&&(c.shiftPressCount--,o.classList.toggle("is-active",c.isShifted));return}if(s.type==="pointerup"){fo&&clearTimeout(fo),xn(h)?o.classList.toggle("is-active",c.isShifted):o.classList.contains("is-pressed")&&(o.classList.remove("is-pressed"),c.isShifted&&h.shift?typeof h.shift=="string"?c.executeCommand(["insert",h.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]):us(h.shift):us(h),c.shiftPressCount===1&&!s.shiftKey&&(c.shiftPressCount=0)),a.abort(),s.preventDefault();return}}}}function us(a){let s=a.command;!s&&a.insert&&(s=["insert",a.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),!s&&a.key&&(s=["typedText",a.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!s&&a.latex&&(s=["insert",a.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),s||(s=["typedText",a.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),ze.singleton&&ze.singleton.executeCommand(s)}function Vg(a){if(a.nodeType!==1)return!1;let s=a.classList;return s.contains("MLK__keycap")||s.contains("shift")||s.contains("action")||s.contains("fnbutton")||s.contains("bigfnbutton")}function xi(a){if(!a)return;let s=a;for(;s&&!Vg(s);)s=s.parentElement;return s??void 0}function xn(a){return!!a.class&&/(^|\s)shift($|\s)/.test(a.class)}var ze=class Sy{constructor(){this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0,this.isSandbox=!1;var s;this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=void 0,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(o=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={};try{(s=window.top)==null||s.addEventListener("message",this)}catch{window.addEventListener("message",this)}Po()&&document.addEventListener("focusin",o=>{let c=o.target;c!=null&&c.isConnected&&setTimeout(()=>{let h=Dp();h&&h.mathVirtualKeyboardPolicy==="auto"&&h.hasEditableContent&&this.show({animate:!0})},300)}),document.addEventListener("focusout",o=>{o.target instanceof _t&&o.target.mathVirtualKeyboardPolicy!=="manual"&&setTimeout(()=>{Dp()||this.hide()},300)})}get currentLayer(){var s,o,c;return(c=(o=(s=this._element)==null?void 0:s.querySelector(".MLK__layer.is-visible"))==null?void 0:o.id)!=null?c:""}set currentLayer(s){var o;if(!this._element){this.latentLayer=s;return}let c=s?this._element.querySelector(`#${s}.MLK__layer`):null;c||(c=this._element.querySelector(".MLK__layer")),c&&((o=this._element.querySelector(".MLK__layer.is-visible"))==null||o.classList.remove("is-visible"),c.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(s){var o;this._shiftPressCount=s>2||s<0?0:s,(o=this._element)==null||o.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(s){let o="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);return this.keycapRegistry[o]=s,o}setKeycap(s,o){Wt[s]=mo(o),this.rebuild()}getKeycap(s){var o;return s?(o=Wt[s])!=null?o:this.keycapRegistry[s]:void 0}getLayer(s){let o=this.normalizedLayouts;for(let c of o)for(let h of c.layers)if(h.id===s)return h}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(s){this._alphabeticLayout=s,this._normalizedLayouts=void 0,this.rebuild()}get layouts(){return this._layouts}set layouts(s){this.updateNormalizedLayouts(s),this.rebuild()}updateNormalizedLayouts(s){let o=Array.isArray(s)?[...s]:[s],c=o.findIndex(h=>h==="default");c>=0&&o.splice(c,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(o),this._normalizedLayouts=o.map(h=>yc(h))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(s){this._editToolbar=s,this.rebuild()}get container(){return this._container===void 0?window.document.body:this._container}set container(s){this._container=s,this.rebuild()}static get singleton(){if(this._singleton===void 0)try{this._singleton=new Sy}catch{this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(s,o,c){this.listeners[s]||(this.listeners[s]=new Set),this.listeners[s].has(o)||this.listeners[s].add(o)}dispatchEvent(s){return!this.listeners[s.type]||this.listeners[s.type].size===0?!0:(this.listeners[s.type].forEach(o=>{typeof o=="function"?o(s):o==null||o.handleEvent(s)}),!s.defaultPrevented)}removeEventListener(s,o,c){this.listeners[s]&&this.listeners[s].delete(o)}get element(){return this._element}set element(s){var o;this._element!==s&&((o=this._element)==null||o.remove(),this._element=s)}get visible(){return this._visible}set visible(s){s?this.show():this.hide()}get boundingRect(){var s;if(!this._visible)return new DOMRect;let o=(s=this._element)==null?void 0:s.getElementsByClassName("MLK__plate")[0];return o?o.getBoundingClientRect():new DOMRect}adjustBoundingRect(){if(!this._element)return;let s=this.boundingRect.height;if(this.container===document.body){this._element.style.setProperty("--_keyboard-height",`calc(${s}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);let o=s-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${o}px)`:`${o}px`}else this._element.style.setProperty("--_keyboard-height",`${s}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let s=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=s,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){var s;if(!this._element)return;let o=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(o&&(o.backdrop||o.container)));let c=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!c)return;let h=this.isShifted;for(let d of c){let b=this.getKeycap(d.id);if(b){let[_,$]=yn(b,{shifted:h});d.innerHTML=globalThis.MathfieldElement.createHTML(_),d.className=$,h&&typeof b.shift=="object"&&(s=b.shift)!=null&&s.tooltip?d.dataset.tooltip=b.shift.tooltip:!h&&b.tooltip&&(d.dataset.tooltip=b.tooltip)}}}show(s){var o;if(this._visible)return;let c=this.container;if(c&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let h=this._element.getElementsByClassName("MLK__plate")[0];if(h&&this.observer.observe(h),c===window.document.body){let d=c.style.paddingBottom;this.originalContainerBottomPadding=d;let b=h.offsetHeight-1;c.style.paddingBottom=d?`calc(${d} + ${b}px)`:`${b}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),(o=this._element)==null||o.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.currentLayer=this.latentLayer}this._visible=!0,s!=null&&s.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var h;return(h=this._element)==null?void 0:h.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(s){var o;let c=this.container;if(c&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let h=this._element.getElementsByClassName("MLK__plate")[0];h&&this.observer.unobserve(h),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),Vr(),Ep(),(o=this._element)==null||o.remove(),this._element=void 0,this.originalContainerBottomPadding!==null&&(c.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var s,o;return(o=(s=this.element)==null?void 0:s.offsetHeight)!=null?o:0}buildAndAttachElement(){var s;this.element,this.element=Tp(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",o=>{o.shiftKey||((o.ctrlKey||o.button===2)&&ls(o.target),o.preventDefault(),o.stopPropagation())},{capture:!0}),(s=this.container)==null||s.appendChild(this.element)}handleEvent(s){if(uo(s)){if(!Qi(s.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${s.origin}) cannot be handled`,"SecurityError");if(s.data.action==="disconnect"){if(this._visible)return;this.connectedMathfieldWindow=void 0}else s.data.action!=="update-setting"&&s.data.action!=="proxy-created"&&s.data.action!=="execute-command"&&(s.source,this.connectedMathfieldWindow=s.source);this.handleMessage(s.data,s.source)}if(this._element)switch(s.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":s.button!==2&&s.preventDefault();break;case"keydown":{s.key==="Shift"&&!s.repeat&&(this.shiftPressCount=1);break}case"keyup":{(s.key==="Shift"||!s.getModifierState("Shift")&&this.shiftPressCount!==2)&&(this.shiftPressCount=0);break}}}handleMessage(s,o){let{action:c}=s;if(c==="execute-command"){let{command:h}=s,d=mr(h);if(window===window.top&&o!==window||window===window.top&&d!=="virtual-keyboard")return;this.executeCommand(h);return}if((c==="connect"||c==="show")&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},o),c!=="disconnect"&&!this.isSandbox){if(c==="show"){typeof s.animate<"u"?this.show({animate:s.animate}):this.show();return}if(c==="hide"){typeof s.animate<"u"?this.hide({animate:s.animate}):this.hide();return}if(c==="update-setting"){if(s.alphabeticLayout&&(this.alphabeticLayout=s.alphabeticLayout),s.layouts&&(this.layouts=s.layouts),s.editToolbar&&(this.editToolbar=s.editToolbar),s.setKeycap){let{keycap:h,value:d}=s.setKeycap;this.setKeycap(h,d),this.render()}return}if(c==="proxy-created"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},o);return}}}sendMessage(s,o,c){if(o.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:o.command})),c||(c=this.connectedMathfieldWindow),this.targetOrigin===null||this.targetOrigin==="null"||c===window){window.dispatchEvent(new MessageEvent("message",{source:window,origin:window.origin,data:p({type:co,action:s},o)}));return}if(c)c.postMessage(p({type:co,action:s},o),{targetOrigin:this.targetOrigin});else if(s==="execute-command"&&Array.isArray(o.command)&&o.command[0]==="insert"){let h=o.command[1].split("");for(let d of h)this.dispatchEvent(new KeyboardEvent("keydown",{key:d,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:d,bubbles:!0}))}}stateWillChange(s){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:s},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this._visible||(this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect}))}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(s){let o=this._element;if(!o)return;o.classList.toggle("is-math-mode",s.mode==="math"),o.classList.toggle("is-text-mode",s.mode==="text"),o.classList.toggle("can-undo",s.canUndo),o.classList.toggle("can-redo",s.canRedo),o.classList.toggle("can-copy",!s.selectionIsCollapsed),o.classList.toggle("can-cut",!s.selectionIsCollapsed),o.classList.toggle("can-paste",!0);let c=o.querySelectorAll(".ML__edit-toolbar");if(c)for(let h of c)h.innerHTML=Cp(this,s)}update(s){this._style=s.style,this.updateToolbar(s)}connect(){this.connectedMathfieldWindow=window}disconnect(){this._visible||(this.connectedMathfieldWindow=void 0)}executeCommand(s){if(s=yi(s),!s)return!1;let o,c=[],h=mr(s);return ee(s)?(o=s[0],o==="performWithFeedback"&&(h=mr(s.slice(1))),c=s.slice(1)):o=s,h==="virtual-keyboard"?vt[o].fn(void 0,...c):(this.sendMessage("execute-command",{command:s}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};function Dp(){let a=hi(),s=null;for(;a;){if("host"in a&&a.host instanceof _t){s=a.host;break}a=a.parentNode}return s}ke()&&!("mathVirtualKeyboard"in window)&&(window===window.top?ps():Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>lo.singleton,configurable:!0}));function ps(){let a=ze.singleton;return window.mathVirtualKeyboard!==a&&Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>a}),a}function vn(a){let s={};for(let o of Object.keys(a))switch(o){case"scriptDepth":let c=a.scriptDepth;if(ee(c))s.scriptDepth=[c[0],c[1]];else if(typeof c=="number")s.scriptDepth=[c,c];else if(typeof c=="string"){let[d,b]=c.split(",").map(_=>parseInt(_.trim()));s.scriptDepth=[d,b]}else throw new TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let h=a.mathVirtualKeyboardPolicy.toLowerCase();if(h==="sandboxed"){let d=ps();d&&(d.isSandbox=!0),h="manual"}s.mathVirtualKeyboardPolicy=h;break;case"letterShapeStyle":a.letterShapeStyle==="auto"?F.locale.startsWith("fr")?s.letterShapeStyle="french":s.letterShapeStyle="tex":s.letterShapeStyle=a.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(a.defaultMode)?s.defaultMode=a.defaultMode:(console.error('MathLive 0.108.2:  valid values for defaultMode are "text", "math" or "inline-math"'),s.defaultMode="math");break;case"macros":s.macros=Oi(a.macros);break;default:ee(a[o])?s[o]=[...a[o]]:typeof a[o]=="object"&&!(a[o]instanceof Element)&&o!=="computeEngine"?s[o]=p({},a[o]):s[o]=a[o]}return s}function pr(a,s){let o;typeof s=="string"?o=[s]:s===void 0?o=Object.keys(a):o=s;let c={};for(let h of o)a[h]===null?c[h]=null:ee(a[h])?c[h]=[...a[h]]:typeof a[h]=="object"&&!(a[h]instanceof Element)&&h!=="computeEngine"?c[h]=p({},a[h]):c[h]=a[h];return typeof s=="string"?c[s]:c}function _n(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:Xr,backgroundColorMap:Ei,letterShapeStyle:F.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,isImplicitFunction:a=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(a),mathModeSpace:"",placeholderSymbol:"",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:I0,inlineShortcuts:Fa,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",originValidator:"none",onInsertStyle:ao,onInlineShortcut:()=>"",onScrollIntoView:null,onExport:R0,value:""}}function xc(a){return a.defaultMode==="inline-math"?"math":a.defaultMode}function Op(a,s){let o=a.at(a.position);if(o.type==="composition")o.value=s;else{let{caret:c}=o;o.caret=void 0;let h=new nn(s,{mode:o.mode});h.caret=c,o.parent.addChildAfter(h,o),a.position+=1}}function Bp(a){let s=a.at(a.position);s.type==="composition"&&(s.parent.removeChild(s),a.position-=1)}function qg(a){let s=a.at(a.position);for(;s&&!Ge(s.parentBranch);)s=s.parent;return[s.firstSibling,s.lastSibling]}function Hg(a,s){let o=a.at(a.position);for(;o&&!(o.parent instanceof z);)o=o.parent;if((o==null?void 0:o.type)==="array"&&o.environmentName,!o||!(o.parent instanceof z)){let c=a.at(a.position);if(o=c,!o.parent.parent){let h=a.extractAtoms([a.position,a.lastOffset]),d=a.extractAtoms([0,a.position]),b;return s.endsWith("column")?(d.length===0&&(d=fs()),h.length===0&&(h=fs()),b=Re("split",[[d,h]]),a.root=b,go(b,0,0)?Mn(a,b,0,0):go(b,0,1)?Mn(a,b,0,1):a.position=a.offsetOf(c)):(b=Re("lines",[[d],[h]]),a.root=b,Mn(a,b,1,0)),[void 0,[0,0]]}if(o.parent instanceof Y){let h=o.parent,d=a.extractAtoms([a.position,a.offsetOf(h.lastChild)]),b=a.extractAtoms([a.offsetOf(h.firstChild),a.position]);b.length===0&&(b=fs()),d.length===0&&(d=fs());let _="pmatrix",$=h.leftDelim,j=h.rightDelim;$==="("&&(j===")"||j==="?")?_="pmatrix":($==="["||$==="\\lbrack")&&(j==="]"||j==="\\rbrack"||j==="?")?_="bmatrix":$==="\\vert"&&j==="\\vert"?_="vmatrix":$==="\\Vert"&&j==="\\Vert"?_="Vmatrix":($==="{"||$==="\\lbrace")&&(j==="."||j==="?")&&(_="cases");let Xt=Re(_,s.endsWith("column")?[[b,d]]:[[b],[d]]);return h.parent.addChildBefore(Xt,h),h.parent.removeChild(h),go(Xt,0,0)?Mn(a,Xt,0,0):s.endsWith("column")?go(Xt,0,1)?Mn(a,Xt,0,1):a.position=a.offsetOf(o):go(Xt,1,0)?Mn(a,Xt,1,0):a.position=a.offsetOf(o),[void 0,[0,0]]}}return o&&o.parent instanceof z?[o.parent,o.parentBranch]:[void 0,[0,0]]}function go(a,s,o){let c=a.getCell(s,o);return(c==null?void 0:c.length)!==2?!1:c[1].type==="placeholder"}function Wg(a,s,o,c){let h=s.getCell(o,c);return h?[a.offsetOf(h[0]),a.offsetOf(h[h.length-1])]:-1}function Mn(a,s,o,c){let h=Wg(a,s,o,c);typeof h!="number"&&a.setSelection(h)}function hs(a,s,o,c,h){let d=s.getCell(o,c);d&&a.setPositionHandlingPlaceholder(a.offsetOf(d[h==="start"?0:d.length-1]))}function bo(a,s){let[o,[c,h]]=Hg(a,s);if(o)switch(s){case"after row":o.addRowAfter(c),hs(a,o,c+1,0,"end");break;case"after column":if(o.maxColumns<=o.colCount){a.announce("plonk");return}o.addColumnAfter(h),hs(a,o,c,h+1,"end");break;case"before row":o.addRowBefore(c),hs(a,o,c,0,"start");break;case"before column":if(o.maxColumns<=o.colCount){a.announce("plonk");return}o.addColumnBefore(h),hs(a,o,c,h,"start");break}}function vc(a){var s;let o=a.at(a.position);if(!Ge(o.parentBranch)&&o.parent!==a.root&&a.root.type!=="root")return a.announce("plonk"),!1;if(!a.contentWillChange({inputType:"insertText"}))return!1;if((s=a.parentEnvironment)!=null&&s.isMultiline){a.selectionIsCollapsed||a.deleteAtoms(de(a.selection));let[c,h]=qg(a),d=a.extractAtoms([a.position,a.offsetOf(h)]),b=a.extractAtoms([a.offsetOf(c),a.position]),_=c.parent,[$,j]=c.parentBranch;return _.setCell($,j,b),bo(a,"after row"),_.setCell($+1,j,d),a.position=a.offsetOf(_.getCell($+1,j)[0]),a.contentDidChange({inputType:"insertText"}),!0}return bo(a,"after row"),a.contentDidChange({inputType:"insertText"}),!0}function Ug(a){return a.contentWillChange({inputType:"insertText"})?(bo(a,"before row"),a.contentDidChange({inputType:"insertText"}),!0):!1}function _c(a){return a.contentWillChange({inputType:"insertText"})?(bo(a,"after column"),a.contentDidChange({inputType:"insertText"}),!0):!1}function jg(a){return a.contentWillChange({inputType:"insertText"})?(bo(a,"before column"),a.contentDidChange({inputType:"insertText"}),!0):!1}function Mc(a,s){if(!a.contentWillChange({}))return!1;a.mathfield.snapshot();let o=".",c=".";switch(s){case"pmatrix":case"pmatrix*":o="(",c=")";break;case"bmatrix":case"bmatrix*":o="[",c="]";break;case"Bmatrix":case"Bmatrix*":o="\\lbrace",c="\\rbrace";break;case"vmatrix":case"vmatrix*":o="\\vert",c="\\vert";break;case"Vmatrix":case"Vmatrix*":o="\\Vert",c="\\Vert";break;case"matrix":case"matrix*":o=".",c=".";break;case"cases":case"dcases":o="\\lbrace";break;case"rcases":c="\\rbrace";break}let h=a.at(a.position),d=h.type==="array"?h:a.parentEnvironment;return d.environmentName=s,d.leftDelim=o,d.rightDelim=c,a.contentDidChange({}),!0}function Kp(a,s){let o=a.at(a.position);for(;o&&!(Array.isArray(o.parentBranch)&&o.parent instanceof z);)o=o.parent;if(Array.isArray(o==null?void 0:o.parentBranch)&&(o==null?void 0:o.parent)instanceof z){let c=o.parent,h=o.parentBranch,d;switch(s){case"row":if(c.rowCount>1){c.removeRow(h[0]);let b=c.getCell(Math.max(0,h[0]-1),h[1]);d=a.offsetOf(b[b.length-1])}break;case"column":if(c.colCount>c.minColumns){c.removeColumn(h[1]);let b=c.getCell(h[0],Math.max(0,h[1]-1));d=a.offsetOf(b[b.length-1])}break}d!==void 0&&a.setPositionHandlingPlaceholder(d)}}function Jg(a){return a.contentWillChange({inputType:"deleteContent"})?(Kp(a,"row"),a.contentDidChange({inputType:"deleteContent"}),!0):!1}function Gg(a){return a.contentWillChange({inputType:"deleteContent"})?(Kp(a,"column"),a.contentDidChange({inputType:"deleteContent"}),!0):!1}fe({addRowAfter:vc,addColumnAfter:_c,addRowBefore:Ug,addColumnBefore:jg,removeRow:Jg,removeColumn:Gg,setEnvironment:Mc},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});function fs(){return[new Le]}var bs=class My{constructor(s){this.recording=!1,this.model=s,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(s){s&&this.index>=0&&(this.stack[this.index].selection=s),this.lastOp=""}undo(){if(!this.canUndo())return!1;let s=this.stack[this.index-1];return this.index-=1,this.lastOp="",this.model.setState(s,{silenceNotifications:!1,type:"undo"}),!0}redo(){if(!this.canRedo())return!1;let s=this.stack[this.index+1];return this.index+=1,this.lastOp="",this.model.setState(s,{silenceNotifications:!1,type:"redo"}),!0}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(s){return this.recording?(s&&s===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>My.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=s??"",!0):!1}};bs.maximumDepth=1e3;var gs=bs;function yo(a,s,o,c){var h,d,b,_,$,j;let Xt=o.parent;if(Ge(c)&&o instanceof z&&o.isMultiline&&Xg(a,o,c[0],s))return!0;if(Xt&&o instanceof Y){let Lt=!c&&s==="forward"||c==="body"&&s==="backward",fr=Lt?a.offsetOf(o.firstChild):a.offsetOf(o.lastChild);return Lt?o.rightDelim!=="?"&&o.rightDelim!=="."?(o.leftDelim=".",o.isDirty=!0):(Xt.addChildrenAfter(o.removeBranch("body"),o),Xt.removeChild(o),fr--):o.leftDelim!=="?"&&o.leftDelim!=="."?(o.rightDelim=".",o.isDirty=!0):(Xt.addChildrenAfter(o.removeBranch("body"),o),Xt.removeChild(o),fr--),a.position=fr,!0}if(Xt&&o.type==="surd"){if(s==="forward"&&!c||s==="backward"&&c==="body"){let Lt=o.leftSibling;o.hasChildren&&Xt.addChildrenAfter(o.removeBranch("body"),o),Xt.removeChild(o),a.position=a.offsetOf(Lt)}else s==="forward"&&c==="body"?a.position=a.offsetOf(o):!c&&s==="backward"?o.hasChildren?a.position=a.offsetOf(o.lastChild):(a.position=Math.max(0,a.offsetOf(o)-1),Xt.removeChild(o)):c==="above"&&(o.hasEmptyBranch("above")&&o.removeBranch("above"),s==="backward"?a.position=a.offsetOf(o.leftSibling):a.position=a.offsetOf(o.body[0]));return!0}if(Xt&&(o.type==="box"||o.type==="enclose")){let Lt=c&&s==="backward"||!c&&s==="forward"?o.leftSibling:o.lastChild;return Xt.addChildrenAfter(o.removeBranch("body"),o),Xt.removeChild(o),a.position=a.offsetOf(Lt),!0}if(o.type==="genfrac"||o.type==="overunder"){if(!c)return o.type==="overunder"&&o.hasEmptyBranch("body")||o.type==="genfrac"&&o.hasEmptyBranch("below")&&o.hasEmptyBranch("above")?!1:(a.position=a.offsetOf(s==="forward"?o.firstChild:o.lastChild),!0);let Lt=_t.fractionNavigationOrder==="numerator-denominator"?"above":"below",fr=Lt==="above"?"below":"above";if(Xt&&(s==="forward"&&c===Lt||s==="backward"&&c===fr)){let Jr=o.removeBranch(Lt),Js=o.removeBranch(fr);return Xt.addChildrenAfter([...Jr,...Js],o),Xt.removeChild(o),a.position=a.offsetOf(Jr.length>0?Jr[Jr.length-1]:Js[0]),!0}return s==="backward"?a.position=a.offsetOf(o.leftSibling):a.position=a.offsetOf(o),!0}if(o.type==="extensible-symbol"||o.type==="subsup"||o.type==="operator"){if(!c&&s==="forward")return!1;if(!c){if(o.subscript||o.superscript){let Lt=s==="forward"?(b=(h=o.superscript)==null?void 0:h[0])!=null?b:(d=o.subscript)==null?void 0:d[0]:(j=(_=o.subscript)==null?void 0:_[0].lastSibling)!=null?j:($=o.superscript)==null?void 0:$[0].lastSibling;return Lt&&(a.position=a.offsetOf(Lt)),!0}return!1}if(!o.hasChildren&&o.type==="subsup"){let Lt=s==="forward"?a.offsetOf(o):Math.max(0,a.offsetOf(o)-1);return o.parent.removeChild(o),a.position=Lt,!0}if(c&&o.hasEmptyBranch(c)){if(o.removeBranch(c),o.type==="subsup"&&!o.subscript&&!o.superscript){let Lt=s==="forward"?a.offsetOf(o):Math.max(0,a.offsetOf(o)-1);return o.parent.removeChild(o),a.position=Lt,!0}return c==="superscript"&&s==="backward"?a.position=a.offsetOf(o.firstChild)-1:c==="subscript"&&s==="backward"?o.superscript?a.position=a.offsetOf(o.superscript[0].lastSibling):a.position=a.offsetOf(o.firstChild)-1:a.position=a.offsetOf(o),!0}if(c==="superscript")if(s==="backward"){let Lt=a.offsetOf(o.firstChild)-1;a.position=Lt}else o.subscript?a.position=a.offsetOf(o.subscript[0]):a.position=a.offsetOf(o);else c==="subscript"&&(s==="backward"&&o.superscript?a.position=a.offsetOf(o.superscript[0].lastSibling):s==="backward"?a.position=a.offsetOf(o.firstChild)-1:a.position=a.offsetOf(o));return!0}if((Xt==null?void 0:Xt.type)==="genfrac"&&!c&&o.type!=="first"){let Lt=a.offsetOf(o.leftSibling);return Xt.removeChild(o),Xt.hasEmptyBranch("above")&&Xt.hasEmptyBranch("below")?(Lt=a.offsetOf(Xt.leftSibling),Xt.parent.removeChild(Xt),a.announce("delete",void 0,[Xt]),a.position=Lt,!0):(a.announce("delete",void 0,[o]),a.position=Lt,!0)}if(s==="backward"&&((Xt==null?void 0:Xt.command)==="\\ln"||(Xt==null?void 0:Xt.command)==="\\log")&&o.parentBranch!=="body"){let Lt=a.offsetOf(Xt.leftSibling);return Xt.parent.removeChild(Xt),a.announce("delete",void 0,[Xt]),a.position=Lt,!0}return!1}function Pp(a){return!a.mathfield.isSelectionEditable||!a.contentWillChange({inputType:"deleteContentBackward"})?!1:a.selectionIsCollapsed?a.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let s=a.at(a.position);if(!(s&&yo(a,"backward",s))){if(s!=null&&s.isFirstSibling){if(yo(a,"backward",s.parent,s.parentBranch))return;s=null}if(!s){a.announce("plonk");return}a.position=a.offsetOf(s.leftSibling),s.parent.removeChild(s),a.announce("delete",void 0,[s]),a.root.hasEmptyBranch("body")&&a.mathfield.flushInlineShortcutBuffer()}}):at(a,de(a.selection),"deleteContentBackward")}function Rp(a){return!a.mathfield.isSelectionEditable||!a.contentWillChange({inputType:"deleteContentForward"})?!1:a.selectionIsCollapsed?a.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var s,o;let c=a.at(a.position).rightSibling;if(c&&yo(a,"forward",c))return;if(c){if(a.at(a.position).isLastSibling&&yo(a,"forward",c.parent,c.parentBranch))return}else{if(c=a.at(a.position),c.isLastSibling&&yo(a,"forward",c.parent,c.parentBranch))return;c=void 0}if(a.position===a.lastOffset||!c){a.announce("plonk");return}c.parent.removeChild(c);let h=(s=a.at(a.position))==null?void 0:s.rightSibling;for(;(h==null?void 0:h.type)==="subsup";)h.parent.removeChild(h),h=(o=a.at(a.position))==null?void 0:o.rightSibling;a.announce("delete",void 0,[c]),a.root.hasEmptyBranch("body")&&a.mathfield.flushInlineShortcutBuffer()}):at(a,de(a.selection),"deleteContentForward")}function at(a,s,o){let c=a.getAtoms(s);if(c.length>0&&c[0].parent){let h=c[0];for(;h&&!(h instanceof z);)h=h.parent;let d=c[c.length-1];for(;d&&!(d instanceof z);)d=d.parent;if(h&&h instanceof z){let Xt=h;if(Xt&&d===Xt&&Xt.isMultiline){let[Lt,fr]=[Math.min(a.position,a.anchor),Math.max(a.position,a.anchor)],[Jr,Js]=a.at(Lt).parentBranch,[qs,zo]=a.at(fr).parentBranch;if(qs-Jr+1>=2)return a.deferNotifications({content:!0,selection:!0,type:o},()=>{var js;let eu=Xt.getCell(Jr,Js),Oo=Xt.getCell(qs,zo);if(!eu||!Oo)return;a.extractAtoms([Lt,fr]);let tu=Xt.getCell(Jr,Js);Xt.getCell(qs,zo);for(let vu=qs-1;vu>Jr;vu--)Xt.removeRow(vu);if(Jr!==qs){let vu=Xt.getCell(Jr+1,Js);if(tu&&vu){let t1=[...tu.filter(e1=>e1.type!=="first"),...vu.filter(e1=>e1.type!=="first")];Xt.setCell(Jr,Js,t1),Xt.removeRow(Jr+1)}}let Bo=Xt.getCell(Jr,Js);if(Bo){let vu=tu?tu.filter(t1=>t1.type!=="first").length:0;a.position=a.offsetOf((js=Bo[vu])!=null?js:Bo[0])}else a.position=Lt;Xt.isDirty=!0})}}let b=c[0].parent.firstChild;b.type==="first"&&(b=b.rightSibling);let _=c[c.length-1].parent.lastChild,$=c[0];$.type==="first"&&($=$.rightSibling);let j=c[c.length-1];if($===b&&j===_){let Xt=c[0].parent;Xt.parent&&Xt.type!=="prompt"&&(s=[a.offsetOf(Xt.leftSibling),a.offsetOf(Xt)])}if(c.length===1&&c[0].type==="placeholder"&&c[0].parent.type==="genfrac"){let Xt=c[0].parent,Lt=c[0].parentBranch==="below"?"above":"below",fr=a.offsetOf(Xt.leftSibling);return a.deferNotifications({content:!0,selection:!0,type:o},()=>{var Jr,Js;let qs=Xt.removeBranch(Lt);if(qs.length===1&&qs[0].type==="placeholder")(Js=Xt.parent)==null||Js.removeChild(Xt),a.position=Math.max(0,fr);else{let zo=Xt.parent.addChildrenAfter(qs,Xt);(Jr=Xt.parent)==null||Jr.removeChild(Xt),a.position=a.offsetOf(zo)}})}}return a.deferNotifications({content:!0,selection:!0,type:o},()=>{let h=new Map;if(c.length>0){let b=c[0],_=c[c.length-1],$=new Set,j=b.parent;for(;j;)(j.type==="surd"||j.type==="box"||j.type==="enclose"||j.type==="leftright"||j.type==="genfrac"||j.type==="overunder")&&j.parent&&$.add(j),j=j.parent;let Xt=new Set;for(j=_.parent;j;)(j.type==="surd"||j.type==="box"||j.type==="enclose"||j.type==="leftright"||j.type==="genfrac"||j.type==="overunder")&&j.parent&&Xt.add(j),j=j.parent;for(let Lt of c)for(j=Lt.parent;j;){if((j.type==="surd"||j.type==="box"||j.type==="enclose"||j.type==="leftright"||j.type==="genfrac"||j.type==="overunder")&&j.parent){h.has(j)||h.set(j,{containsStart:$.has(j),containsEnd:Xt.has(j)});break}j=j.parent}}let d=Math.min(...s);a.deleteAtoms(s);for(let[b,_]of h){if(!b.parent)continue;let $=_.containsStart!==_.containsEnd;if(b.type==="surd"||b.type==="box"||b.type==="enclose"||b.type==="leftright"){let j=b.branch("body");if(!j||j.length===0||j.length===1&&j[0].type==="placeholder"){let Xt=a.offsetOf(b.leftSibling);b.parent.removeChild(b),a.position=Math.max(0,Xt)}else if($&&!_.containsStart&&_.containsEnd){let Xt=a.offsetOf(b.leftSibling),Lt=b.removeBranch("body");Lt&&Lt.length>0&&b.parent.addChildrenAfter(Lt,b),b.parent.removeChild(b),a.position=Math.max(0,Xt)}}if(b.type==="genfrac"){let j=b.branch("above"),Xt=b.branch("below"),Lt=!j||j.length===0||j.length===1&&j[0].type==="placeholder",fr=!Xt||Xt.length===0||Xt.length===1&&Xt[0].type==="placeholder";if(Lt&&fr){let Jr=a.offsetOf(b.leftSibling);b.parent.removeChild(b),a.position=Math.max(0,Jr)}else if(Lt&&!fr){let Jr=a.offsetOf(b.leftSibling),Js=b.removeBranch("below");Js&&Js.length>0&&b.parent.addChildrenAfter(Js,b),b.parent.removeChild(b),a.position=Math.max(0,Jr)}else if(!Lt&&fr){let Jr=a.offsetOf(b.leftSibling),Js=b.removeBranch("above");Js&&Js.length>0&&b.parent.addChildrenAfter(Js,b),b.parent.removeChild(b),a.position=Math.max(0,Jr)}else if($&&!_.containsStart&&_.containsEnd&&!Lt&&!fr){let Jr=a.offsetOf(b.leftSibling),Js=b.removeBranch("above");Js&&Js.length>0&&b.parent.addChildrenAfter(Js,b),b.parent.removeChild(b),a.position=Math.max(0,Jr)}}}h.size===0&&(a.position=d),a.root.hasEmptyBranch("body")&&a.mathfield.flushInlineShortcutBuffer()})}function Xg(a,s,o,c){if(!(s instanceof z)||!s.isMultiline||s.rows.length===1||s.rows[o].length>1)return!1;let h=s.getCell(o,0);if(!h)return!1;if(s.removeRow(o),c==="backward"){let d=s.getCell(o-1,0);if(!d)return a.position=a.offsetOf(s),!0;d.length>0?a.position=a.offsetOf(d[d.length-1]):a.position=a.offsetOf(s),s.setCell(o-1,0,[...d,...h])}else{let d=s.getCell(o,0);if(!d)return a.position=a.offsetOf(s),!0;d.length>0?a.position=a.offsetOf(d[0]):a.position=a.offsetOf(s),s.setCell(o,0,[...h,...d])}return!0}function Zg(a,s,o){var c,h;if(a.at(s).mode!=="text")return s;let d=o==="backward"?-1:1,b;if(Zr.test(a.at(s).value)){let _=s,$;do $=a.at(_).mode==="text"&&Zr.test(a.at(_).value),_+=d;while(a.at(_)&&$);b=a.at(_)?_-2*d:_-d}else if(/\s/.test(a.at(s).value)){let _=s;for(;((c=a.at(_))==null?void 0:c.mode)==="text"&&/\s/.test(a.at(_).value);)_+=d;if(!a.at(_))b=_-d;else{let $=!0;do $=a.at(_).mode==="text"&&!/\s/.test(a.at(_).value),_+=d;while(a.at(_)&&$);b=a.at(_)?_-2*d:_-d}}else{let _=s;for(;((h=a.at(_))==null?void 0:h.mode)==="text"&&!/\s/.test(a.at(_).value);)_+=d;b=a.at(_)?_:_-d;let $=!0;for(;a.at(_)&&$;)$=a.at(_).mode==="text"&&/\s/.test(a.at(_).value),$&&(b=_),_+=d;b=a.at(_)?_-2*d:_-d}return b-(d>0?0:1)}function Mt(a,s,o){var c,h,d,b,_,$,j,Xt;let Lt=a.position;(c=o==null?void 0:o.extend)!=null&&c||a.collapseSelection(s);let fr=a.at(a.position);if(s==="forward"&&(fr.type==="subsup"?(fr=fr.rightSibling,fr||(fr=a.at(a.position+1))):fr=a.at(a.position+1)),!fr)return a.announce("plonk"),!1;let Jr=a.offsetOf(fr);if(fr instanceof qe)Jr=Zg(a,Jr,s);else if(fr instanceof pe)if(fr.isSuggestion)for(;fr&&fr instanceof pe;)fr.isSuggestion=!1,Jr=a.offsetOf(fr),fr=fr.rightSibling;else if(s==="forward"){if(fr=fr.rightSibling,!fr||!(fr instanceof pe))return a.announce("plonk"),!1;for(;fr&&fr instanceof pe&&/[a-zA-Z\*]/.test(fr.value);)Jr=a.offsetOf(fr),fr=fr.rightSibling}else{if(fr=fr.leftSibling,!fr||!(fr instanceof pe))return a.announce("plonk"),!1;for(;fr&&fr instanceof pe&&/[a-zA-Z\*]/.test(fr.value);)Jr=a.offsetOf(fr),fr=fr.leftSibling}else if(s==="forward"&&fr.type==="mopen"){let Js=0;do fr.type==="mopen"?Js+=1:fr.type==="mclose"&&(Js-=1),fr=fr.rightSibling;while(!fr.isLastSibling&&Js!==0);Jr=a.offsetOf(fr.leftSibling)}else if(s==="backward"&&fr.type==="mclose"){let Js=0;do fr.type==="mopen"?Js+=1:fr.type==="mclose"&&(Js-=1),fr=fr.leftSibling;while(!fr.isFirstSibling&&Js!==0);Jr=a.offsetOf(fr)}else if(s==="backward")if(fr.type==="first")for(;Jr>0&&fr.type==="first";)Jr-=1,fr=a.at(Jr);else{let Js=fr.type;fr.type==="subsup"&&(Jr=a.offsetOf(a.at(Jr).leftSibling)),Jr-=1;let qs=(h=a.at(Jr))==null?void 0:h.type;for(;Jr>=0&&qs===Js;)((d=a.at(Jr))==null?void 0:d.type)==="subsup"?Jr=a.offsetOf(a.at(Jr).leftSibling):Jr-=1,qs=a.at(Jr).type}else{let{type:Js}=fr,qs=(b=a.at(Jr))==null?void 0:b.type,{lastOffset:zo}=a;for(;Jr<=zo&&(qs===Js||qs==="subsup");){for(;((_=a.at(Jr).rightSibling)==null?void 0:_.type)==="subsup";)Jr=a.offsetOf(a.at(Jr).rightSibling);Jr+=1,qs=($=a.at(Jr))==null?void 0:$.type}Jr-=1}if((j=o==null?void 0:o.extend)!=null&&j){if(!a.setSelection(a.anchor,Jr))return a.announce("plonk"),!1;a.announce("move",Lt)}else{if(Jr===a.position)return a.announce("plonk"),!1;(Xt=o==null?void 0:o.delete)!=null&&Xt?s==="forward"?at(a,[Lt,Jr],"deleteWordForward"):(at(a,[Lt,Jr],"deleteWordBackward"),a.position=Jr):(a.position=Jr,a.announce("move",Lt))}return a.mathfield.stopCoalescingUndo(),!0}function st(a,s,o){var c,h;if(o=o??{extend:!1},a.mathfield.styleBias=s==="backward"?"right":"left",s!=="forward"){let[_,$]=is(a);_!==void 0&&$!==void 0&&a.deleteAtoms([_,$])}if(s==="upward")return Qg(a,o);if(s==="downward")return eb(a,o);if(o.extend){let _=ys(a,a.position,s);_<0&&(_=0),_>a.lastOffset&&(_=a.lastOffset);let $=a.setSelection(a.anchor,_);return a.mathfield.stopCoalescingUndo(),$}if(a.selectionIsPlaceholder){a.collapseSelection(s);let _=st(a,s);return a.mathfield.stopCoalescingUndo(),_}let d=a.position,b=d;if(a.collapseSelection(s)?(d=a.position,Ip(a,d)||(d=ys(a,d,s))):d=ys(a,d,s),d<0||d>a.lastOffset){let _=!0;return a.silenceNotifications||(_=(h=(c=a.mathfield.host)==null?void 0:c.dispatchEvent(new CustomEvent("move-out",{detail:{direction:s},cancelable:!0,bubbles:!0,composed:!0})))!=null?h:!0),_&&a.announce("plonk"),_}return a.setPositionHandlingPlaceholder(d),a.mathfield.stopCoalescingUndo(),a.announce("move",b),!0}function ys(a,s,o){return s=s+(o==="forward"?1:-1),s<0||s>a.lastOffset||Ip(a,s)?s:ys(a,s,o)}function Ip(a,s){var o;let c=a.at(s),h=c.parent;for(;h&&!h.inCaptureSelection;)h=h.parent;return!(h!=null&&h.inCaptureSelection||(o=c.parent)!=null&&o.skipBoundary&&(!c.isFirstSibling&&c.isLastSibling||c.type==="first")||a.mathfield.hasEditablePrompts&&!c.parentPrompt)}function Yg(a,s,o){let c=1/0,h=0;for(;h<s.length;h++){let d=s[h],b=a.getHTMLElement(d);if(!b)continue;let _=rc(b).right,$=Math.abs(o-_);if($<=c)c=$;else break}return s[h-1]}function xs(a,s,o,c,h){let d=a.mathfield.hasEditablePrompts,b=d?o.filter(j=>j.type==="prompt"&&!j.captureSelection):o,_=rc(a.mathfield.getHTMLElement(s)).right,$=a.offsetOf(Yg(a.mathfield,b,_))-(d?1:0);if(c){let[j,Xt]=a.selection.ranges[0],Lt;$<(h==="up"?j:Xt)?Lt={ranges:[[$,Xt]],direction:"backward"}:Lt={ranges:[[j,$]],direction:"forward"},a.setSelection(Lt)}else a.setPositionHandlingPlaceholder($);a.announce(`move ${h}`)}function Qg(a,s){var o,c;let h=(o=s==null?void 0:s.extend)!=null?o:!1;h||a.collapseSelection("backward");let d=()=>{var $,j;let Xt=!0;return a.silenceNotifications||(Xt=(j=($=a.mathfield.host)==null?void 0:$.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?j:!0),a.announce(Xt?"line":"plonk"),Xt},b=a.at(a.position),_=b;for(;_&&_.parentBranch!=="below"&&!(Array.isArray(_.parentBranch)&&_.parent instanceof z);)_=_.parent;if(Array.isArray(_==null?void 0:_.parentBranch)&&_.parent instanceof z){let $=_.parent;if(_.parentBranch[0]<1)return d();let j=_.parentBranch[0]-1,Xt=$.getCell(j,_.parentBranch[1]);if(!Xt.some(Lt=>Lt.type==="prompt"&&!Lt.captureSelection)&&a.mathfield.hasEditablePrompts)return d();xs(a,b,Xt,h,"up")}else if(_){let $=(c=_.parent.branch("above"))!=null?c:_.parent.createBranch("above");if(!$.some(j=>j.type==="prompt"&&j.placeholderId)&&a.mathfield.hasEditablePrompts)return d();xs(a,b,$,h,"up")}else return d();return a.mathfield.stopCoalescingUndo(),!0}function eb(a,s){var o,c;let h=(o=s==null?void 0:s.extend)!=null?o:!1;h||a.collapseSelection("forward");let d=()=>{var $,j;let Xt=!0;return a.silenceNotifications||(Xt=(j=($=a.mathfield.host)==null?void 0:$.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?j:!0),a.announce(Xt?"line":"plonk"),Xt},b=a.at(a.position),_=b;for(;_&&_.parentBranch!=="above"&&!(Ge(_.parentBranch)&&_.parent instanceof z);)_=_.parent;if(Ge(_==null?void 0:_.parentBranch)&&_.parent instanceof z){let $=_.parent;if(_.parentBranch[0]+1>$.rows.length-1)return d();let j=_.parentBranch[0]+1,Xt=$.getCell(j,_.parentBranch[1]);if(!Xt.some(Lt=>Lt.type==="prompt"&&!Lt.captureSelection)&&a.mathfield.hasEditablePrompts)return d();xs(a,b,Xt,h,"down")}else if(_){let $=(c=_.parent.branch("below"))!=null?c:_.parent.createBranch("below");if(!$.some(j=>j.type==="prompt")&&a.mathfield.hasEditablePrompts)return d();xs(a,b,$,h,"down")}else return d();return!0}function Sc$1(a){let s=a.position,o=a.at(s).parent;return o!=null&&o.parent?(a.position=a.offsetOf(o),a.mathfield.stopCoalescingUndo(),a.announce("move",s),!0):(a.announce("plonk"),!1)}function tb(a){let s=0,o=a.at(a.position),c=!1;for(;o;)o.hasEmptyBranch("superscript")?o.hasEmptyBranch("subscript")||(c=!1):(s+=1,c=!0),o=o.parent;return c?s:0}function rb(a){let s=0,o=a.at(a.position),c=!1;for(;o;)o.hasEmptyBranch("subscript")?o.hasEmptyBranch("superscript")||(c=!1):(s+=1,c=!0),o=o.parent;return c?s:0}function zp(a){if(a.collapseSelection(),tb(a)>=a.mathfield.options.scriptDepth[1])return a.announce("plonk"),!1;let s=a.at(a.position);if(s.subsupPlacement===void 0){let o=s.rightSibling;(o==null?void 0:o.type)!=="subsup"&&(o=new sr({style:s.style}),s.parent.addChildAfter(o,s)),s=o}return s.createBranch("superscript"),a.setSelection(a.getSiblingsRange(a.offsetOf(s.superscript[0]))),!0}function Np(a){if(a.collapseSelection(),rb(a)>=a.mathfield.options.scriptDepth[0])return a.announce("plonk"),!1;let s=a.at(a.position);if(s.subsupPlacement===void 0){let o=s.rightSibling;(o==null?void 0:o.type)!=="subsup"&&(o=new sr({style:s.style}),s.parent.addChildAfter(o,s)),s=o}return s.createBranch("subscript"),a.setSelection(a.getSiblingsRange(a.offsetOf(s.subscript[0]))),!0}function ib(){function a($){let j=[],Xt=[];return[...$.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(s).forEach((Lt,fr)=>{let Jr=c(Lt);Jr===0?j.push(Lt):Xt.push({documentOrder:fr,tabIndex:Jr,node:Lt})}),Xt.sort((Lt,fr)=>Lt.tabIndex===fr.tabIndex?Lt.documentOrder-fr.documentOrder:Lt.tabIndex-fr.tabIndex).map(Lt=>Lt.node).concat(j)}function s($){return!(!o($)||h($)||c($)<0)}function o($){return!($.disabled||$.type==="hidden"&&$.tagName.toUpperCase()==="INPUT"||_($))}function c($){var j;let Xt=Number.parseInt((j=$.getAttribute("tabindex"))!=null?j:"NaN",10);return Number.isNaN(Xt)?$.contentEditable==="true"||($.nodeName==="AUDIO"||$.nodeName==="VIDEO")&&$.getAttribute("tabindex")===null?0:$.tabIndex:Xt}function h($){return $.tagName.toUpperCase()==="INPUT"&&$.type==="radio"&&!b($)}function d($,j){for(let Xt of $)if(Xt.checked&&Xt.form===j)return Xt;return null}function b($){var j;if(!$.name)return!0;let Xt=((j=$.form)!=null?j:$.ownerDocument).querySelectorAll('input[type="radio"][name="'+$.name+'"]'),Lt=d(Xt,$.form);return!Lt||Lt===$}function _($){if(!ke()||$===document.activeElement||$.contains(document.activeElement))return!1;if(getComputedStyle($).visibility==="hidden")return!0;let j=$.getBoundingClientRect();if(j.width===0||j.height===0)return!0;for(;$;){if(getComputedStyle($).display==="none")return!0;$=$.parentElement}return!1}return ke()?a(document.body):[]}function Oe(a,s,o="forward"){let c=a.position;if(ee(s)){let h=a.offsetOf(s[0]),d=a.offsetOf(s[s.length-1]);return o==="forward"?a.setSelection(h,d):a.setSelection(d,h),a.announce("move",c),a.mathfield.stopCoalescingUndo(),!0}return o==="forward"?Oe(a,[s.leftSibling,s]):Oe(a,[s,s.leftSibling])}function wt(a,s){let o=a.position;if(typeof s=="number"&&(s=a.at(s)),s.type==="prompt")a.setSelection(a.offsetOf(s.firstChild),a.offsetOf(s.lastChild));else{let c=a.offsetOf(s);s.type==="placeholder"?a.setSelection(c-1,c):a.position=c}return a.announce("move",o),a.mathfield.stopCoalescingUndo(),!0}function wn(a,s){var o,c;let h=s==="forward"?1:-1;a.at(a.anchor).type==="placeholder"&&st(a,s);let d,b=a.at(a.anchor).parentPrompt;b?s==="forward"?d=a.offsetOf(b)+1:d=a.offsetOf(b.leftSibling):d=Math.max(a.position+h,0);let _=wc(a,d,s);if(!_||s==="forward"&&a.offsetOf(_)<d||s==="backward"&&a.offsetOf(_)>d){if(!((c=(o=a.mathfield.host)==null?void 0:o.dispatchEvent(new CustomEvent("move-out",{detail:{direction:s},cancelable:!0,bubbles:!0,composed:!0})))==null||c))return a.announce("plonk"),!1;let $=ib();if(!document.activeElement||$.length<=1)return a.announce("plonk"),!1;let j=$.indexOf(document.activeElement)+h;return j<0&&(j=$.length-1),j>=$.length&&(j=0),$[j].focus(),a.mathfield.stopCoalescingUndo(),!0}return wt(a,_),!0}function wc(a,s=0,o="forward"){return a.findAtom(c=>c.type==="placeholder"||c.type==="prompt"||!a.mathfield.readOnly&&c.treeDepth>2&&c.isFirstSibling&&c.isLastSibling,s,o)}fe({moveToOpposite:a=>{let s={superscript:"subscript",subscript:"superscript",above:"below",below:"above"},o=a.at(a.position),{parent:c}=o;if(!c)return a.announce("plonk"),!1;let h=o.parentBranch,d;if(typeof h=="string"&&(d=s[h]),!d){let _=o.subsupPlacement?Np(a):zp(a);return a.mathfield.stopCoalescingUndo(),_}c.branch(d)||c.createBranch(d);let b=a.setSelection(a.getBranchRange(a.offsetOf(c),d));return a.mathfield.stopCoalescingUndo(),b},moveBeforeParent:a=>{let{parent:s}=a.at(a.position);return s?(a.position=a.offsetOf(s),a.mathfield.stopCoalescingUndo(),!0):(a.announce("plonk"),!1)},moveAfterParent:a=>Sc$1(a),moveToNextChar:a=>st(a,"forward"),moveToPreviousChar:a=>st(a,"backward"),moveUp:a=>st(a,"upward"),moveDown:a=>st(a,"downward"),moveToNextWord:a=>Mt(a,"forward"),moveToPreviousWord:a=>Mt(a,"backward"),moveToGroupStart:a=>{let s=a.offsetOf(a.at(a.position).firstSibling);return s===a.position?(a.announce("plonk"),!1):(a.position=s,a.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:a=>{let s=a.offsetOf(a.at(a.position).lastSibling);return s===a.position?(a.announce("plonk"),!1):(a.position=s,a.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:a=>{var s,o,c,h;if(a.position===a.lastOffset&&a.anchor===a.lastOffset)return wn(a,"forward");let d=a.at(a.position);if(d.mode==="text"){if(a.selectionIsCollapsed){let Lt=d;for(;(Lt==null?void 0:Lt.mode)==="text";)Lt=Lt.leftSibling;let fr=d;for(;((s=fr.rightSibling)==null?void 0:s.mode)==="text";)fr=fr.rightSibling;if(Lt&&fr)return Oe(a,[Lt,fr])}if(d.rightSibling.mode==="text"){let Lt=d;for(;(Lt==null?void 0:Lt.mode)==="text";)Lt=Lt.rightSibling;return Lt?(wt(a,(o=Lt.leftSibling)!=null?o:Lt),a.mathfield.switchMode("math"),!0):wt(a,a.lastOffset)}}let b=a.at(a.anchor).parentPrompt,_=b?a.offsetOf(b)+1:Math.max(a.position+1,0),$=wc(a,_,"forward");if($&&a.offsetOf($)<_)return wn(a,"forward");if($)return wt(a,$);let j=Fp(a,d,Lt=>Lt.type==="leftright"||Lt.type==="text","forward");if(j){if(j.mode==="text"){let Lt=j;for(;(Lt==null?void 0:Lt.mode)==="text";)Lt=Lt.rightSibling;return Oe(a,[(c=j.leftSibling)!=null?c:j,(h=Lt.leftSibling)!=null?h:Lt])}return Oe(a,j)}let Xt=d.parent;if(Xt){if(Xt.type==="leftright"||Xt.type==="surd")return Oe(a,Xt);if(d.parentBranch==="superscript"&&Xt.subscript)return Oe(a,Xt.subscript);if(d.parentBranch==="above"&&Xt.below)return Oe(a,Xt.below);if(d.parentBranch==="superscript"||d.parentBranch==="subscript")return wt(a,Xt);if(d.parentBranch==="above"||d.parentBranch==="below")return Oe(a,Xt)}return wt(a,a.lastOffset)},moveToPreviousGroup:a=>{var s;if(a.position===0&&a.anchor===0)return wn(a,"backward");let o=a.at(a.position),c=o.mode;if(c==="text"){if(a.selectionIsCollapsed){let _=o;for(;(_==null?void 0:_.mode)==="text";)_=_.leftSibling;let $=o;for(;((s=$.rightSibling)==null?void 0:s.mode)==="text";)$=$.rightSibling;if(_&&$)return Oe(a,[_,$])}for(;(o==null?void 0:o.mode)==="text";)o=o.leftSibling;return o?wt(a,o):wt(a,0)}let h=a.at(a.anchor).parentPrompt,d=h?a.offsetOf(h.leftSibling):Math.max(a.position-1,0),b=wc(a,d,"backward");if(b&&a.offsetOf(b)>d)return wn(a,"backward");if(b)return wt(a,b);if(c==="math"){let _=Fp(a,o,j=>j.type==="leftright"||j.type==="text","backward");if(_){if(_.mode==="text"){let j=_;for(;(j==null?void 0:j.mode)==="text";)j=j.leftSibling;return Oe(a,[_,j])}return Oe(a,_)}let $=o.parent;if($){if($.type==="leftright"||$.type==="surd")return Oe(a,$);if(o.parentBranch==="subscript"&&$.superscript)return Oe(a,$.superscript);if(o.parentBranch==="below"&&$.above)return Oe(a,$.above);if(o.parentBranch==="superscript"||o.parentBranch==="subscript")return wt(a,$);if(o.parentBranch==="above"||o.parentBranch==="below")return Oe(a,$)}return wt(a,0)}return!1},moveToMathfieldStart:a=>a.selectionIsCollapsed&&a.position===0?(a.announce("plonk"),!1):(a.position=0,a.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:a=>a.selectionIsCollapsed&&a.position===a.lastOffset?(a.announce("plonk"),!1):(a.position=a.lastOffset,a.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:zp,moveToSubscript:Np},{target:"model",changeSelection:!0});fe({moveToNextPlaceholder:a=>wn(a,"forward"),moveToPreviousPlaceholder:a=>wn(a,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});function Fp(a,s,o,c){if(c==="forward"){let d=s.rightSibling;for(;d&&!o(d);)d=d.rightSibling;return d}let h=s.leftSibling;for(;h&&!o(h);)h=h.leftSibling;return h}function vs(a,s,o){typeof s=="function"&&(o=s,s=1/0),s===void 0&&(s=1/0);let c=a.position,h=!1,d="";for(;!h;){let b=a.at(c);h=s===0||b===void 0||b.type==="first"||b.mode!=="math"||!(b.type&&/mord|mpunct|operator/.test(b.type)||b.type==="mop"&&/[a-zA-Z ]+/.test(b.value))||!b.hasEmptyBranch("superscript")||!b.hasEmptyBranch("subscript")||typeof o=="function"&&!o(b),h||(b.mode="text",b.command=b.value,b.verbatimLatex=void 0,d+=b.value),c-=1,s-=1}a.contentDidChange({data:d,inputType:"insertText"})}function vi(a,s,o){typeof s=="function"&&(o=s,s=1/0),s===void 0&&(s=1/0);let c=a.position,h=!1,d=[];for(;!h;){let b=a.at(c);h=s===0||!b||b.type==="first"||b.isFirstSibling||b.mode!=="text"||b.value===" "||typeof o=="function"&&!o(b),h||(d.push(y.serialize([b],{defaultMode:"math"})),b.mode="math"),c-=1,s-=1}_s(a),a.contentDidChange({data:P(d),inputType:"insertText"})}function _s(a){var s;let o=a.position-1;for(;o>=0&&((s=a.at(o))==null?void 0:s.mode)==="math";)o-=1;if(!(o<0)&&a.at(o).mode==="text"&&a.at(o).value===" "&&a.at(o-1).mode==="math"){a.at(o-1).parent.removeChild(a.at(o-1));let c=a.silenceNotifications;a.silenceNotifications=!0,a.position-=1,a.silenceNotifications=c,a.contentDidChange({inputType:"deleteContent"})}}function nb(a){let s="",o=a.position,c=!1;for(;!c;){let h=a.at(o);c=!(h&&(h.mode==="text"||h.mode==="math"&&h.type&&/mord|mpunct/.test(h.type))),c||(s=h.value+s),o-=1}return s}function $p(a,s,o){let{model:c}=a;if(c.mode==="latex"||!c.at(c.position).isLastSibling||!o||!cr(o))return!1;let h=zr(o);if(!c.selectionIsCollapsed)return!!(a.model.mode==="text"&&/[/_^]/.test(h));let d=nb(c)+h;if(a.model.mode==="text"){if(s==="Esc"||/[/\\]/.test(h))return!0;if(/[\^_]/.test(h))return/(^|\s)[a-zA-Z][^_]$/.test(d)&&vi(c,1),!0;let b={")":"(","}":"{","]":"["}[h],{parent:_}=c.at(c.position);if(b&&_ instanceof Y&&_.leftDelim===b)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(d))return!1;if(/[$]/u.test(h))return!0;if(/(^|[^a-zA-Z'])[a-zA-Z] $/.test(d))return vi(c,1),!1;if(/\D\.[^\d\s]$/.test(d)){vi(c,1);let $=c.at(c.position);return $.value="",$.style.variant="normal",$.command="\\cdot",$.verbatimLatex=void 0,c.contentDidChange({data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(d)||/\.\d$/.test(d)||/\([\d+\-.]$/.test(d))return vi(c,1),!0;if(/\([a-z][,;]$/.test(d))return vi(c,2),!0;if(/[\d+\-=><*|]$/.test(h))return _s(c),!0}else{if(s==="[Space]")return vs(c,void 0,b=>/[a-z][:,;.]$/.test(b.value)),!0;if(/[a-zA-Z]{3,}$/.test(d)&&!/(dxd|abc|xyz|uvw)$/.test(d))return vs(c,void 0,b=>/[a-zA-Z]/.test(b.value)),!0;if(/(^|\W)(if)$/i.test(d))return vs(c,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(d)&&!/()$/.test(d))return vs(c,void 0,b=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(b.value)),!0;if(h==="?"||h==="."&&!/[\d-+]\.$/.test(d))return!0}return!1}function Vp(a,s){if(!a.isSelectionEditable||!a.keystrokeCaptionVisible)return;let o=Hp(),c=a.element.getBoundingClientRect();o.style.left=`${c.left}px`,o.style.top=`${c.top-64}px`,o.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(pn(s)||s)+"</span>"+o.innerHTML),o.style.visibility="visible",setTimeout(()=>{o.childNodes.length>0&&o.childNodes[o.childNodes.length-1].remove(),o.childNodes.length===0&&(o.style.visibility="hidden")},3e3)}function qp(a){if(a.keystrokeCaptionVisible=!a.keystrokeCaptionVisible,a.keystrokeCaptionVisible){let s=Hp();s.innerHTML=""}else{let s=bi("mathlive-keystroke-caption-panel");s.style.visibility="hidden"}return!1}function Hp(){return document.getElementById("mathlive-keystroke-caption-panel")||(We("keystroke-caption"),We("core"),bi("mathlive-keystroke-caption-panel"))}function Wp(){document.getElementById("mathlive-keystroke-caption-panel")&&($r("mathlive-keystroke-caption-panel"),nt("core"),nt("keystroke-caption"))}function Ac(a,s){var o,c,h,d;let{model:b}=a,_=rs(s);if(s.isTrusted){xu(s);let zo=gr();a.keyboardLayout!==zo.id&&(a.keyboardLayout=zo.id,a._keybindings=void 0)}if(clearTimeout(a.inlineShortcutBufferFlushTimer),a.inlineShortcutBufferFlushTimer=0,Vp(a,_),s.isTrusted&&s.defaultPrevented)return a.flushInlineShortcutBuffer(),!1;let $,j=0,Xt="",Lt=0,fr=a.inlineShortcutBuffer,Jr=!1;if(a.isSelectionEditable&&b.selectionIsPlaceholder&&cr(s)&&(a.flushInlineShortcutBuffer(),b.deleteAtoms(de(b.selection)),a.snapshot("delete"),Jr=!0),a.isSelectionEditable){if(b.mode==="math"&&(!b.selectionIsPlaceholder||Jr))if(_==="[Backspace]")a.undoManager.lastOp==="insert-shortcut"?Xt="undo":fr.pop();else if(!cr(s))a.flushInlineShortcutBuffer();else{let zo=zr(s),js=[...(c=(o=fr[fr.length-1])==null?void 0:o.keystrokes)!=null?c:[],zo];fr.push({state:b.getState(),keystrokes:js,leftSiblings:sb(a)}),j=0;let eu="";for(;!$&&j<js.length;)Lt=fr.length-(js.length-j),eu=js.slice(j).join(""),$=Yn(fr[Lt].leftSiblings,eu,a.options.inlineShortcuts),!$&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(eu)&&($=a.options.onInlineShortcut(a,eu)),j+=1;a.flushInlineShortcutBuffer({defer:!0})}a.options.smartMode&&($?a.switchMode("math"):$p(a,_,s)&&(a.switchMode({math:"text",text:"math"}[b.mode]),Xt=""))}if(!$){if(Xt||(Xt=bp(a.keybindings,b.mode,s)),!Xt&&(_==="[Enter]"||_==="[Return]")){let zo=!0;return b.contentWillChange({inputType:"insertLineBreak"})&&(a.host&&(zo=a.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),!zo&&s.preventDefault?(s.preventDefault(),s.stopPropagation()):((h=b.parentEnvironment)!=null&&h.isMultiline&&a.executeCommand("addRowAfter"),b.contentDidChange({inputType:"insertLineBreak"}))),zo}if(_==="[Space]"&&b.mode==="latex"&&Xe(a,"accept-all"))return a.dirty=!0,a.scrollIntoView(),s.preventDefault&&(s.preventDefault(),s.stopPropagation()),!1;if((!Xt||_==="[Space]")&&b.mode==="math"){if(_==="[Space]"){if(a.styleBias="none",a.flushInlineShortcutBuffer(),a.options.mathModeSpace)return q.insert(b,a.options.mathModeSpace,{format:"latex",mode:"math"}),a.snapshot("insert-space"),Xt="",a.dirty=!0,a.scrollIntoView(),s.preventDefault&&(s.preventDefault(),s.stopPropagation()),!1;let zo=b.at(b.position+1),js=b.at(b.position-1);if((zo==null?void 0:zo.mode)==="text"||(js==null?void 0:js.mode)==="text")return q.insert(b," ",{mode:"text"}),a.snapshot("insert-space"),a.dirty=!0,a.scrollIntoView(),!1}(d=b.at(b.position))!=null&&d.isDigit()&&globalThis.MathfieldElement.decimalSeparator===","&&zr(s)===","&&(Xt="insertDecimalSeparator")}}if(!$&&!Xt){if(b.mathfield.smartFence){if(Lc(b,zr(s),Ht(a)))return a.dirty=!0,a.scrollIntoView(),s.preventDefault&&s.preventDefault(),!1}else{let{parent:zo}=b.at(b.position);if(zo instanceof Y&&zo.rightDelim==="?"&&b.at(b.position).isLastSibling&&/^[)}\]|]$/.test(_))return a.snapshot(),zo.isDirty=!0,zo.rightDelim=_,b.position+=1,b.selectionDidChange(),b.contentDidChange({data:zr(s),inputType:"insertText"}),a.snapshot("insert-fence"),a.dirty=!0,a.scrollIntoView(),s.preventDefault&&s.preventDefault(),!1;if(!b.selectionIsCollapsed){let js=zr(s);if(js==="("||js==="{"||js==="["){let eu={"(":"(","{":"\\lbrace","[":"\\lbrack"}[js],Oo={"(":")","{":"\\rbrace","[":"\\rbrack"}[js],[tu,Bo]=de(b.selection);return a.snapshot(),b.position=Bo,q.insert(b,Oo,{format:"latex"}),b.position=tu,q.insert(b,eu,{format:"latex"}),b.setSelection(tu+1,Bo+1),b.contentDidChange({data:js,inputType:"insertText"}),a.snapshot("insert-fence"),a.dirty=!0,a.scrollIntoView(),s.preventDefault&&s.preventDefault(),!1}}}return!0}let Js=b.at(Math.max(b.position,b.anchor)),{parent:qs}=Js;if(Xt==="moveAfterParent"&&(qs==null?void 0:qs.type)==="leftright"&&Js.isLastSibling&&a.options.smartFence&&Lc(b,".",a.defaultStyle)&&(Xt="",J(a)),a.keyboardDelegate.cancelComposition(),Xt)a.executeCommand(Xt);else if($){let zo=Ht(a);b.setState(fr[Lt].state);let js=fr[fr.length-1].keystrokes;js=js.slice(j-1);for(let eu of js)q.insert(b,eu,{silenceNotifications:!0,style:zo});a.snapshot("insert-shortcut"),b.setState(fr[Lt].state),b.deferNotifications({content:!0,selection:!0,data:$,type:"insertText"},()=>(q.insert(b,$,{format:"latex",style:zo}),_s(a.model),$.endsWith(" ")&&(a.switchMode("text"),q.insert(b," ",{style:zo,mode:"text"})),a.snapshot(),b.selectionIsCollapsed||a.flushInlineShortcutBuffer(),!0)),a.dirty=!0,b.announce("replacement")}return a.scrollIntoView(),s.preventDefault&&s.preventDefault(),!1}function ob(a){var s,o;let{position:c}=a,h=c,d=[];for(;h>0;){let Js=a.at(h),qs=Js.value;if(Js.type==="mord"||Js.type==="mbin"&&(qs==="+"||qs==="-"||qs===""))d.unshift(Js),h--;else break}if(d.length===0)return null;let b=d.map(Js=>Js.value).join(""),_=((o=(s=globalThis.MathfieldElement)==null?void 0:s.decimalSeparator)!=null?o:".")==="."?"\\.":",",$=new RegExp(`^(\\d+(?:${_}\\d*)?)[eE]([+\\-]?)(\\d+)$`),j=b.match($);if(!j)return null;let Xt=j[1],Lt=j[2],fr=j[3],Jr=Lt+fr;return{startOffset:h,endOffset:c,significand:Xt,exponent:Jr}}function ab(a,s){var o;let c=(o=globalThis.MathfieldElement)==null?void 0:o.scientificNotationTemplate;if(!c||c===""||!c.includes("#1")||!c.includes("#2"))return null;let h=c.replace("#1",a);return h=h.replace("#2",s),h}function Up(a){let{model:s}=a;if(s.mode!=="math")return!1;let o=ob(s);if(!o)return!1;let c=ab(o.significand,o.exponent);return c?(s.deferNotifications({content:!0,selection:!0,type:"insertText"},()=>{s.selection={ranges:[[o.startOffset,o.endOffset]],direction:"forward"},q.insert(s,c,{insertionMode:"replaceSelection",selectionMode:"after"})}),a.snapshot("format-scientific-notation"),a.dirty=!0,a.scrollIntoView(),!0):!1}function xo(a,s,o){let{model:c}=a;if(!a.isSelectionEditable){c.announce("plonk");return}o!=null||(o={}),o.focus&&a.focus(),o.feedback&&globalThis.MathfieldElement.playSound("keypress"),typeof o.mode=="string"&&(a.switchMode(o.mode),a.snapshot());let h=Ba(s),d=window.mathVirtualKeyboard;if(d!=null&&d.isShifted&&(h=typeof h=="string"?h.toUpperCase():h.map(b=>b.toUpperCase())),o.simulateKeystroke){let b=!0;for(let _ of h)Ac(a,new KeyboardEvent("keypress",{key:_}))&&(b=!1);if(b)return}if(c.mode==="latex"){if(c.deferNotifications({content:!0,selection:!0,data:s,type:"insertText"},()=>{gi(a);for(let b of h)q.insert(c,b,{insertionMode:"replaceSelection"});a.snapshot("insert-latex"),Fr(a)}),s==="}"){let b=fi(c).map($=>$.value).join(""),_=b.match(/^\\([a-zA-Z]+)/);if(_){let $="\\"+_[1],j=ne($,"math");if((j==null?void 0:j.definitionType)==="function"){let Xt=j.params.filter(Lt=>!Lt.isOptional).length;if(Xt>0){let Lt=0,fr=0,Jr=!0;for(let Js=0;Js<b.length;Js++){let qs=b[Js];if(Jr){if(qs==="\\"||/[a-zA-Z]/.test(qs))continue;Jr=!1}qs==="{"?Lt++:qs==="}"&&(Lt--,Lt===0&&fr++)}if(Lt===0&&fr===Xt&&Xe(a,"accept-all")){a.dirty=!0,a.scrollIntoView();return}}}}}}else if(c.mode==="text"){let b=p(p({},cb(c)),a.defaultStyle);for(let _ of h)q.insert(c,_,{style:b,insertionMode:"replaceSelection"});a.snapshot("insert-text")}else if(c.mode==="math")for(let b of h)lb(a,b);a.dirty=!0,a.scrollIntoView()}function sb(a){let s=a.model,o=[],c=s.at(Math.min(s.position,s.anchor));for(;c.type!=="first";)o.push(c),c=c.leftSibling;return o}function lb(a,s){let o=a.model;/\d/.test(s)||Up(a);let c={"^":"moveToSuperscript",_:"moveToSubscript"," ":a.options.mathModeSpace?["insert",a.options.mathModeSpace]:"moveAfterParent"}[s];if(c){a.executeCommand(c);return}let h=p({},Ht(a));!/[a-zA-Z0-9]/.test(s)&&a.styleBias!=="none"&&(h.variant="normal",h.variantStyle=void 0);let d=o.at(o.position),b=o.selectionIsPlaceholder;if(/\d/.test(s)&&a.options.smartSuperscript&&d.parentBranch==="superscript"&&d.parent.type!=="mop"&&d.parent.type!=="operator"&&d.parent.type!=="extensible-symbol"&&d.hasNoSiblings){if(!q.insert(o,s,{style:h,insertionMode:"replaceSelection",selectionMode:b?"after":"placeholder"})){a.undoManager.pop();return}a.snapshot("insert-mord"),Sc$1(o);return}let _=s;if(_==="{"?_="\\lbrace":_==="}"?_="\\rbrace":_==="&"?_="\\&":_==="#"?_="\\#":_==="$"?_="\\$":_==="%"?_="\\%":_==="~"?_="\\~":_==="\\"&&(_="\\backslash"),!!q.insert(o,_,{style:h,insertionMode:"replaceSelection",selectionMode:b?"after":"placeholder"})&&(a.snapshot(`insert-${o.at(o.position).type}`),/\d/.test(s))){let $=a.options.inlineShortcutTimeout>0?a.options.inlineShortcutTimeout:1e3;clearTimeout(a.scientificNotationTimer),a.scientificNotationTimer=setTimeout(()=>{Up(a)},$)}}function cb(a){var s,o,c,h;if(a.selectionIsCollapsed)return(o=(s=a.at(a.position))==null?void 0:s.style)!=null?o:{};let d=de(a.selection)[0];return(h=(c=a.at(d+1))==null?void 0:c.style)!=null?h:{}}function Lc(a,s,o){var c;if(!s||a.mode!=="math")return!1;let h=a.at(a.position),{parent:d}=h,b={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[s];if(!b)return!1;let _=tn[b],$=en[b];if(!a.selectionIsCollapsed){a.mathfield.snapshot();let[j,Xt]=de(a.selection),Lt=a.extractAtoms([j,Xt]),fr=d.addChildrenAfter([new Y("left...right",Lt,{leftDelim:b,rightDelim:$})],a.at(j));return a.setSelection(a.offsetOf(fr.firstChild),a.offsetOf(fr.lastChild)),a.mathfield.snapshot("insert-fence"),a.contentDidChange({data:b,inputType:"insertText"}),!0}if(b==="|"){let j=d instanceof Y?d.leftDelim+d.rightDelim:"";if(j==="\\lbrace\\rbrace"||j==="\\{\\}"||j==="\\lbrace?")return a.mathfield.snapshot(),q.insert(a,"\\,\\middle\\vert\\,",{format:"latex",style:o}),a.mathfield.snapshot("insert-fence"),a.contentDidChange({data:b,inputType:"insertText"}),!0}if($){if(d instanceof Y&&d.firstChild===h&&(d.leftDelim==="?"||d.leftDelim==="."))return d.leftDelim=b,d.isDirty=!0,a.mathfield.snapshot(),a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0;if(!(d instanceof Y)){let fr=h;for(;fr&&!(fr.type==="mclose"&&fr.value===$);)fr=fr.rightSibling;if(fr){a.mathfield.snapshot();let Jr=a.extractAtoms([a.offsetOf(h),a.offsetOf(fr)]);Jr.pop();let Js=new Y("left...right",Jr,{leftDelim:b,rightDelim:$});return d.addChildrenAfter([Js],h),a.position=a.offsetOf(Js.firstChild),a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0}}let j=a.offsetOf(h.lastSibling),Xt;for(Xt=a.position;Xt<=j;Xt++){let fr=a.at(Xt);if(fr instanceof Y&&(fr.leftDelim==="?"||fr.leftDelim===".")&&jp(b,fr.rightDelim))break}let Lt=a.at(Xt);if(Xt<=j&&Lt instanceof Y){Lt.leftDelim=b,a.mathfield.snapshot();let fr=a.extractAtoms([a.position,Xt-1]);return fr=fr.filter(Jr=>Jr.type!=="first"),Lt.addChildren(fr,Lt.parentBranch),a.position+=1,a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0}if(d instanceof Y&&(d.leftDelim==="?"||d.leftDelim===".")&&jp(b,d.rightDelim)){d.isDirty=!0,d.leftDelim=b,a.mathfield.snapshot();let fr=a.extractAtoms([a.offsetOf(h.firstSibling),a.position]);for(let Jr of fr)d.parent.addChildBefore(Jr,d);return a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0}if(!(d instanceof Y&&d.leftDelim==="|")){if(b==="("){let fr=a.position-1,Jr=!1;for(;fr>=0;){let Js=a.at(fr);if(Js.type==="first")break;if(Js.type==="mord"&&Js.value&&/^[\d]$/.test(Js.value)){fr-=1;continue}if(Js.type==="group"&&((c=Js.body)==null?void 0:c.length)===2&&Js.body[0].type==="first"&&Js.body[1].value===","){Jr=!0;break}if(Js.type==="mord"&&(Js.value===","||Js.value===".")){Jr=!0;break}break}if(Jr)return!1}if(a.mathfield.snapshot(),q.insert(a,`\\left${b}\\right?`,{format:"latex",style:o}),h.lastSibling.type!=="first"){let fr=a.offsetOf(h.lastSibling),Jr=a.extractAtoms([a.position,fr]);a.at(a.position).body=Jr,a.position-=1}return a.mathfield.snapshot("insert-fence"),!0}}if(_){if(b===")"){let Js=a.position-1,qs=!1;for(;Js>=0;){let zo=a.at(Js);if(zo.type==="first")break;if(zo.type==="mord"&&zo.value&&/^[\d]$/.test(zo.value)){qs=!0,Js-=1;continue}break}if(qs&&a.at(Js).type==="mopen"&&a.at(Js).value==="(")return!1}let j=h;for(;j;){if(j.type==="mopen"&&j.value===_){a.mathfield.snapshot();let Js=j.leftSibling,qs=a.extractAtoms([a.offsetOf(j.leftSibling),a.offsetOf(h)]);[,...qs]=qs;let zo=new Y("left...right",qs,{leftDelim:_,rightDelim:b});return d.addChildrenAfter([zo],Js),a.position=a.offsetOf(zo),a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0}j=j.leftSibling}if(d instanceof Y&&h.isLastSibling&&kc(d.leftDelim,b))return a.mathfield.snapshot(),d.isDirty=!0,d.rightDelim=b,a.position+=1,a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0;let Xt=a.offsetOf(h.firstSibling),Lt;for(Lt=a.position;Lt>=Xt;Lt--){let Js=a.at(Lt);if(Js instanceof Y&&(Js.rightDelim==="?"||Js.rightDelim===".")&&kc(Js.leftDelim,b))break}let fr=a.at(Lt);if(Lt>=Xt&&fr instanceof Y)return a.mathfield.snapshot(),fr.rightDelim=b,fr.addChildren(a.extractAtoms([Lt,a.position]),fr.parentBranch),a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0;if(d instanceof Y&&(d.rightDelim==="?"||d.rightDelim===".")&&kc(d.leftDelim,b))return a.mathfield.snapshot(),d.isDirty=!0,d.rightDelim=b,d.parent.addChildren(a.extractAtoms([a.position,a.offsetOf(h.lastSibling)]),d.parentBranch),a.position=a.offsetOf(d),a.contentDidChange({data:b,inputType:"insertText"}),a.mathfield.snapshot("insert-fence"),!0;let Jr=d.parent;return Jr instanceof Y&&(Jr.rightDelim==="?"||Jr.rightDelim===".")&&a.at(a.position).isLastSibling?(a.position=a.offsetOf(Jr),Lc(a,b,o)):!1}return!1}function kc(a,s){return a?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(a)?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(s):en[a]===s:!0}function jp(a,s){return s?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(s)?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(a):tn[s]===a:!0}fe({scrollIntoView:a=>(a.scrollIntoView(),!0),scrollToStart:a=>(a.field.scroll(0,0),!0),scrollToEnd:a=>{let s=a.field.getBoundingClientRect();return a.field.scroll(s.left-window.scrollX,0),!0},toggleKeystrokeCaption:qp,toggleContextMenu:a=>{let s=a.toggleContextMenu();return s||a.model.announce("plonk"),s},plonk:a=>(a.model.announce("plonk"),!0),switchMode:(a,s,o,c)=>(a.switchMode(s,o,c),!0)});fe({undo:a=>(a.undo(),!0),redo:a=>(a.redo(),!0)},{target:"mathfield",changeContent:!0});fe({insert:(a,s,o)=>a.insert(s,o),typedText:(a,s,o)=>(xo(a,s,o),!0),insertDecimalSeparator:a=>{let s=a.model;return s.mode==="math"&&globalThis.MathfieldElement.decimalSeparator===","&&s.at(Math.max(s.position,s.anchor)).isDigit()?(a.insert("{,}",{format:"latex"}),a.snapshot("insert-mord"),!0):(a.insert("."),!0)},commit:a=>{var s,o;let c=a.model;return c.contentWillChange({inputType:"insertLineBreak"})&&((s=a.host)==null||s.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),(o=c.parentEnvironment)!=null&&o.isMultiline&&a.executeCommand("addRowAfter"),c.contentDidChange({inputType:"insertLineBreak"})),!0},insertPrompt:(a,s,o)=>{let c=a.getPrompts(),h="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),d=0;for(;c.includes(h)&&d<100;){if(d===99)return console.error("could not find a unique ID after 100 tries"),!1;h="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),d++}return a.insert(`\\placeholder[${s??h}]{}`,o),!0}},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0});fe({copyToClipboard:a=>(a.focus(),a.model.selectionIsCollapsed&&a.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")&&document.execCommand("copy")||a.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"});fe({cutToClipboard:a=>(a.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")&&document.execCommand("cut")||a.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:a=>(a.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then(s=>{s&&a.model.contentWillChange({inputType:"insertFromPaste",data:s})?(a.stopCoalescingUndo(),a.stopRecording(),a.insert(s,{mode:a.model.mode})&&(Fr(a),a.startRecording(),a.snapshot("paste"),a.model.contentDidChange({inputType:"insertFromPaste"}),J(a))):a.model.announce("plonk"),a.startRecording()}).catch(()=>{a.model.announce("plonk"),a.startRecording()}),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0});function Ms(a){let[s,o]=de(a.selection);if(s=Jp(a,s,"backward"),o=Jp(a,o,"forward"),s===o){let c=a.at(s);if(c.type==="leftright")return a.setSelection(a.offsetOf(c.firstChild)-1,o);if(c.type==="first"&&(c.parent.type==="leftright"||c.parent.type==="surd"))return a.setSelection(s-1,a.offsetOf(c.parent.lastChild)+1);a.setSelection(s-1,o)}else a.setSelection(s,o);return!0}function Jp(a,s,o){var c;let h=a.at(s);if(!h)return s;let d=o==="forward"?1:-1;if(h.mode==="text"){for(;h&&!(h.mode!=="text"||!Zr.test(h.value));)s+=d,h=a.at(s);return o==="backward"?s-1:s}if(h.mode==="latex"){if(/[a-zA-Z\\*]/.test(h.value))if(o==="backward")for(;(h==null?void 0:h.mode)==="latex"&&h.value!=="\\"&&/[a-zA-Z]/.test(h.value);)s+=d,h=a.at(s);else for(;(h==null?void 0:h.mode)==="latex"&&/[a-zA-Z\\*]/.test(h.value);)s+=d,h=a.at(s);else if(h.value==="{"){if(o==="forward"){for(;(h==null?void 0:h.mode)==="latex"&&h.value!=="}";)s+=d,h=a.at(s);return s}return s-1}else if(h.value==="}"){if(o==="backward"){for(;(h==null?void 0:h.mode)==="latex"&&h.value!=="{";)s+=d,h=a.at(s);return s-1}return s}return s-1}if(h.mode==="math"){if(h.isDigit()){for(;(c=a.at(s+d))!=null&&c.isDigit();)s+=d;return o==="backward"?s-1:s}if(h.style.variant||h.style.variantStyle){let b=h.style.variant,_=h.style.variantStyle;for(;;){let $=a.at(s+d);if(!$||$.style.variant!==b||$.style.variantStyle!==_)break;s+=d}return o==="backward"?s-1:s}return s}return s}fe({selectGroup:a=>{let s=Ms(a);return s||a.announce("plonk"),s},selectAll:a=>a.setSelection(0,a.lastOffset),extendSelectionForward:a=>st(a,"forward",{extend:!0}),extendSelectionBackward:a=>st(a,"backward",{extend:!0}),extendToNextWord:a=>Mt(a,"forward",{extend:!0}),extendToPreviousWord:a=>Mt(a,"backward",{extend:!0}),extendSelectionUpward:a=>st(a,"upward",{extend:!0}),extendSelectionDownward:a=>st(a,"downward",{extend:!0}),extendToNextBoundary:a=>Mt(a,"forward",{extend:!0}),extendToPreviousBoundary:a=>Mt(a,"backward",{extend:!0}),extendToGroupStart:a=>{let s=a.setSelection(a.anchor,a.offsetOf(a.at(a.position).firstSibling));return s||a.announce("plonk"),s},extendToGroupEnd:a=>{let s=a.setSelection(a.anchor,a.offsetOf(a.at(a.position).lastSibling));return s||a.announce("plonk"),s},extendToMathFieldStart:a=>{let s=a.setSelection(a.anchor,0);return s||a.announce("plonk"),s},extendToMathFieldEnd:a=>{let s=a.setSelection(a.anchor,a.lastOffset);return s||a.announce("plonk"),s}},{target:"model",changeSelection:!0});var _i$1=null,vo=0,Mi=class uv{static start(s,o,c,h){var d;uv.element=s,(d=uv.controller)==null||d.abort(),uv.controller=new AbortController;let b={signal:uv.controller.signal};"PointerEvent"in window?(s.addEventListener("pointermove",c,b),s.addEventListener("pointerup",h,b),s.addEventListener("pointercancel",h,b),Ec(o)&&(uv.pointerId=o.pointerId,s.setPointerCapture(o.pointerId))):(window.addEventListener("mousemove",c,b),window.addEventListener("blur",h,b),window.addEventListener("mouseup",h,b))}static stop(){var s;(s=uv.controller)==null||s.abort(),uv.controller=void 0,typeof uv.pointerId=="number"&&(uv.element.releasePointerCapture(uv.pointerId),uv.pointerId=void 0)}};function Ec(a){return a!==null&&globalThis.PointerEvent!==void 0&&a instanceof PointerEvent}function Cc(a,s,o){return a>=o.left&&a<=o.right&&s>=o.top&&s<=o.bottom}function Gp(a,s,o){return a<s?s:a>o?o:a}function Tc$1(a,s){var o,c,h,d,b,_;if(s.buttons>1)return;a.atomBoundsCache?a.atomBoundsCache.clear():a.atomBoundsCache=new Map;let $=a,j,Xt=!1,Lt=!1,fr="none",Jr=!1,Js=!1,qs=s.clientX,zo=s.clientY,js=Date.now(),eu=$.field,Oo=setInterval(()=>{Jr?eu.scroll({top:0,left:eu.scrollLeft-16}):Js&&eu.scroll({top:0,left:eu.scrollLeft+16})},32);function tu(){Mi.stop(),Xt=!1,clearInterval(Oo),a.element.classList.remove("tracking"),s&&s.preventDefault()}function Bo(h1){if(!$.hasFocus()){tu();return}let m1=h1.clientX,l1=h1.clientY,f1=Ec(h1)&&h1.pointerType==="touch"?20:5;if(Date.now()<js+500&&Math.abs(qs-m1)<f1&&Math.abs(zo-l1)<f1){h1.preventDefault(),h1.stopPropagation();return}let p1=eu.getBoundingClientRect();Js=m1>p1.right,Jr=m1<p1.left;let d1=j;Ec(h1)&&(h1.isPrimary||(d1=Mo($,h1.clientX,h1.clientY,{bias:0})));let b1=Mo($,m1,l1,{bias:m1<=qs?m1===qs?0:-1:1});d1>=0&&b1>=0&&($.model.extendSelectionTo(d1,b1),J(a)),Lt&&Ms($.model)}_i$1&&Math.abs(_i$1.x-qs)<5&&Math.abs(_i$1.y-zo)<5&&Date.now()<_i$1.time+500?(vo+=1,_i$1.time=js):(_i$1={x:qs,y:zo,time:js},vo=1);let vu=eu.getBoundingClientRect(),t1=(c=(o=a.container)==null?void 0:o.getBoundingClientRect())!=null?c:a.element.getBoundingClientRect(),e1=(d=(h=a.element)==null?void 0:h.getBoundingClientRect())!=null?d:t1,r1=Cc(qs,zo,vu),a1=!r1&&t1?Cc(qs,zo,t1):!1,i1=!r1&&!a1&&e1?Cc(qs,zo,e1):!1,s1=r1?qs:a1||i1?Gp(qs,vu.left,vu.right):qs,c1=r1?zo:a1||i1?Gp(zo,vu.top,vu.bottom):zo;if(r1||a1||i1){if(a.flushInlineShortcutBuffer(),j=Mo(a,s1,c1,{bias:0}),j!==a.model.anchor){let h1=a.defaultStyle.variantStyle;a.defaultStyle=h1!==void 0?{variantStyle:h1}:{},a.styleBias="left"}if(j>=0){if(a.element.classList.add("tracking"),s.shiftKey){let h1=a.model.selectionIsCollapsed;a.model.extendSelectionTo(a.model.anchor,j),os(a.model)||h1?fr="all":fr="selection"}else if(a.model.at(j).type==="placeholder"||a.model.at(j).type==="prompt"){let h1=a.model.at(j);h1.hasChildren&&h1.firstChild?a.model.position=a.model.offsetOf(h1.firstChild):a.model.setSelection(j-1,j),fr="selection"}else if(((b=a.model.at(j).rightSibling)==null?void 0:b.type)==="placeholder"||((_=a.model.at(j).rightSibling)==null?void 0:_.type)==="prompt"){let h1=a.model.at(j).rightSibling;h1.hasChildren&&h1.firstChild?a.model.position=a.model.offsetOf(h1.firstChild):a.model.setSelection(j,j+1),fr="selection"}else{let h1=a.model.at(j);if(h1.captureSelection&&h1.hasChildren&&h1.body&&h1.body.length>0){let m1=h1.body.find(l1=>l1.type!=="first");m1&&(m1.type==="placeholder"||m1.type==="prompt")&&m1.hasChildren&&m1.firstChild?(a.model.position=a.model.offsetOf(m1.firstChild),fr="selection"):(a.model.position=j,os(a.model)?fr="all":fr="selection")}else a.model.position=j,os(a.model)?fr="all":fr="selection"}s.detail===3||vo>2?(tu(),(s.detail===3||vo===3)&&(a.model.selection={ranges:[[0,a.model.lastOffset]]},fr="all")):Xt||(Xt=!0,Mi.start(eu,s,Bo,tu),(s.detail===2||vo===2)&&(Lt=!0,Ms(a.model),fr="all"))}a.hasFocus()||(fr="none",a.onFocus(),a.model.announce("line"))}else _i$1=null;a.stopCoalescingUndo(),fr!=="none"&&(a.model.selectionIsCollapsed&&(fr="all"),J(a)),s.preventDefault()}function ub(a,s,o){if(a>=o.left&&a<=o.right&&s>=o.top&&s<=o.bottom)return 0;let c=a-(o.left+o.right)/2,h=s-(o.top+o.bottom)/2;return c*c+h*h}function _o(a,s,o,c,h){if(!o.id)return[1/0,null];if(s.has(o.id))return s.get(o.id);let d=nr(a,o);if(!d)return[1/0,null];let b=[1/0,null],_=a.model;if(o instanceof z){let $=-1,j=1/0;for(let Lt=0;Lt<o.rows.length;Lt++){let fr=o.rows[Lt];if(!fr||fr.length===0)continue;let Jr=1/0,Js=-1/0;for(let qs of fr)if(qs)for(let zo of qs){let js=nr(a,zo);js&&(Jr=Math.min(Jr,js.top),Js=Math.max(Js,js.bottom))}if(Jr!==1/0&&Js!==-1/0){let qs;h<Jr?qs=Jr-h:h>Js?qs=h-Js:qs=0,qs<j&&(j=qs,$=Lt)}}let Xt=$>=0?[o.rows[$]]:o.rows;for(let Lt of Xt)for(let fr of Lt)if(fr)for(let Jr of fr){let Js=_o(a,s,Jr,c,h);Js[0]<=b[0]&&(b=Js)}if(!o.isMultiline)for(let Lt of o.children){let fr=_o(a,s,Lt,c,h);fr[0]<=b[0]&&(b=fr)}}else if(o.hasChildren&&!o.captureSelection&&c>=d.left&&c<=d.right){let $=o.children;for(let j of $){let Xt=_o(a,s,j,c,h);Xt[0]<=b[0]&&(b=Xt)}for(let j of o.branches){let Xt=o.branch(j);if(!Xt||Xt.length===0)continue;let Lt=[_.offsetOf(Xt[0]),_.offsetOf(Xt[Xt.length-1])],fr=N0(a,Lt);if(h>=fr.top&&h<=fr.bottom)for(let Jr of Xt){let Js=_o(a,s,Jr,c,h);Js[0]<=b[0]&&(b=Js)}}}return b[1]||(b=[ub(c,h,d),o]),s.set(o.id,b),b}function db(a,s,o){let[,c]=_o(a,new Map,a.model.root,s,o);return c}function Mo(a,s,o,c){var h;let d=a.field.querySelector(".ML__latex").getBoundingClientRect();if(!d)return 0;if(s>d.right||o>d.bottom+8)return a.model.lastOffset;if(s<d.left||o<d.top-8)return 0;c=c??{},c.bias=(h=c.bias)!=null?h:0;let b=db(a,s,o),_=[],$=b;for(;$;)_.unshift($),$=$.parent;for(let Xt of _)if(Xt.captureSelection){b=Xt;break}let j=a.model.offsetOf(b);if(j<0)return-1;if(b.leftSibling){let Xt=b.type==="placeholder"||b.type==="prompt";if(c.bias===0&&!Xt){let Lt=nr(a,b);Lt&&s<(Lt.left+Lt.right)/2&&(j=a.model.offsetOf(b.leftSibling))}else c.bias<0&&(j=a.model.offsetOf(b.leftSibling))}return j}var Dc$1=class extends q{constructor(){super("math")}onPaste(s,o){if(!o||!s.model.contentWillChange({data:typeof o=="string"?o:null,dataTransfer:typeof o=="string"?null:o,inputType:"insertFromPaste"}))return!1;let c="",h="auto",d=typeof o!="string"?o.getData("application/json+mathlive"):"";if(d)try{let b=JSON.parse(d);if(b&&Array.isArray(b)){s.snapshot();let _=bt(b),{model:$}=s;$.selectionIsCollapsed||$.deleteAtoms(de($.selection));let j=$.at($.position);if(j.parent instanceof z){j.parentBranch;let Xt=[],Lt=[];_[0].type==="first"&&_.shift(),_[_.length-1].type==="first"&&_.pop();for(let qs of _)qs.type==="first"&&Lt.length>0?(Xt.push(Lt),Lt=[qs]):Lt.push(qs);Lt.length>0&&Xt.push(Lt);let fr=Number(j.parentBranch[0]),Jr=Number(j.parentBranch[1]),Js=j.parent.maxColumns;for(;j.parent.colCount-Jr<Xt.length&&j.parent.colCount<Js;)j.parent.addColumn();j.parent.addChildrenAfter(Xt[0],j);for(let qs=1;qs<Xt.length;qs++)Jr++,Jr>=Js&&(Jr=0,j.parent.addRowAfter(fr),fr++),j.parent.setCell(fr,Jr,Xt[qs])}else j.parent.addChildrenAfter(_.filter(Xt=>Xt.type!=="first"),j);return $.position=$.offsetOf(_[_.length-1]),$.contentDidChange({inputType:"insertFromPaste"}),J(s),!0}}catch{}if(d=typeof o!="string"?o.getData("application/json"):"",d&&globalThis.MathfieldElement.computeEngine)try{let b=JSON.parse(d);if(typeof b=="object"&&"latex"in b&&b.latex&&(c=b.latex),!c){let _=globalThis.MathfieldElement.computeEngine.box(b);_&&!_.has("Error")&&(c=_.latex)}c||(h="latex")}catch{}if(!c&&typeof o!="string"&&(c=o.getData("application/x-latex"),c&&(h="latex")),c||(c=typeof o=="string"?o:o.getData("text/plain")),c){let b;return[b,c]=$a(c),h==="auto"&&b&&(h="latex"),s.stopCoalescingUndo(),s.stopRecording(),this.insert(s.model,c,{format:h})&&(s.startRecording(),s.snapshot("paste"),J(s)),s.startRecording(),!0}return!1}insert(s,o,c){var h,d;let b=typeof o=="string"?o:(d=(h=globalThis.MathfieldElement.computeEngine)==null?void 0:h.box(o).latex)!=null?d:"";if(!c.silenceNotifications&&!s.contentWillChange({data:b,inputType:"insertText"}))return!1;c.insertionMode||(c.insertionMode="replaceSelection"),c.selectionMode||(c.selectionMode="placeholder"),c.format||(c.format="auto");let{silenceNotifications:_}=s;c.silenceNotifications&&(s.silenceNotifications=!0);let $=s.silenceNotifications;s.silenceNotifications=!0;let j={"?":"\\placeholder{}","@":"\\placeholder{}"};j[0]=c.insertionMode==="replaceAll"?"":s.getValue(s.selection,"latex-unstyled"),c.insertionMode==="replaceSelection"?s.deleteAtoms(de(s.selection)):c.insertionMode==="replaceAll"?s.deleteAtoms():c.insertionMode==="insertBefore"?s.collapseSelection("backward"):c.insertionMode==="insertAfter"&&s.collapseSelection("forward"),!s.at(s.position).isLastSibling&&s.at(s.position+1).type==="placeholder"?s.deleteAtoms([s.position,s.position+1]):s.at(s.position).type==="placeholder"&&s.deleteAtoms([s.position-1,s.position]);let Xt=-1;j[0]?j["@"]=j[0]:typeof o=="string"&&/(^|[^\\])#@/.test(o)&&(Xt=mb(s),Xt>=0&&(j["@"]=s.getValue(Xt,s.position,"latex"))),j[0]||(j[0]=j["?"]);let Lt=!1,fr=js=>(Lt=!0,j[js]),[Jr,Js]=Xp(s,o,fr,c);if(!Js)return!1;let qs=Js.length===1&&Js[0].type==="genfrac";if(qs&&Xt>=0&&typeof s.mathfield.options.isImplicitFunction=="function"&&s.mathfield.options.isImplicitFunction(s.at(s.position).command)?(j["@"]=j["?"],Lt=!1,[Jr,Js]=Xp(s,o,fr,c)):Xt>=0&&s.deleteAtoms([Xt,s.position]),Js.length===1&&Js[0].isRoot)s.root=Js[0];else{let{parent:js}=s.at(s.position),eu=js.hasEmptyBranch("body");if(qs&&Jr!=="latex"&&s.mathfield.options.removeExtraneousParentheses&&js instanceof Y&&js.leftDelim==="("&&eu){let tu=js.parent,Bo=js.parentBranch;tu.removeChild(js),tu.setChildren(Js,Bo)}let Oo=s.at(s.position);Oo.parent.addChildrenAfter(Js,Oo),Jr==="latex"&&typeof o=="string"&&(js==null?void 0:js.type)==="root"&&eu&&!Lt&&(js.verbatimLatex=o)}s.silenceNotifications=$;let zo=Js[Js.length-1];if(c.selectionMode==="placeholder"){let js;if(Js.length===1&&Js[0].type==="genfrac"){let eu=Js[0].branch("above");if(js=eu==null?void 0:eu.find(Oo=>Oo.type==="placeholder"),!js){let Oo=Js[0].branch("below");js=Oo==null?void 0:Oo.find(tu=>tu.type==="placeholder")}}if(js||(js=Js.flatMap(eu=>[eu,...eu.children]).find(eu=>eu.type==="placeholder")),js){let eu=s.offsetOf(js);s.setSelection(eu-1,eu),s.announce("move")}else if(zo){let eu=zo.body,Oo=zo.hasEmptyBranch("body");eu&&Oo?s.setSelection(s.offsetOf(eu[0]),s.offsetOf(eu[eu.length-1])+1):s.position=s.offsetOf(zo)}}else c.selectionMode==="before"||(c.selectionMode==="after"?zo&&(s.position=s.offsetOf(zo)):c.selectionMode==="item"&&s.setSelection(s.anchor,s.offsetOf(zo)));return s.contentDidChange({data:b,inputType:"insertText"}),s.silenceNotifications=_,!0}};function Xp(a,s,o,c){var h;let d,b=[];if(typeof s!="string"||c.format==="math-json"){let _=globalThis.MathfieldElement.computeEngine;if(!_)return["math-json",[]];[d,s]=["latex",_.box(s).latex],b=ge(s,{context:a.mathfield.context})}else typeof s=="string"&&c.format==="ascii-math"?([d,s]=ir(s,{format:"ascii-math",inlineShortcuts:a.mathfield.options.inlineShortcuts}),b=ge(s,{context:a.mathfield.context}),d!=="latex"&&a.mathfield.options.removeExtraneousParentheses&&(b=b.map(_=>ws(_)))):(c.format==="auto"||(h=c.format)!=null&&h.startsWith("latex"))&&(c.format==="auto"&&([d,s]=ir(s,{format:"auto",inlineShortcuts:a.mathfield.options.inlineShortcuts})),c.format==="latex"&&([,s]=$a(s)),b=ge(s,{context:a.mathfield.context,args:o}),c.format!=="latex"&&a.mathfield.options.removeExtraneousParentheses&&(b=b.map(_=>ws(_))));return ro(b,c.style),[d??"latex",b]}function ws(a){var s;if(a instanceof Y&&a.leftDelim!=="("&&a.rightDelim===")"){let o=(s=a.body)==null?void 0:s.filter(c=>c.type!=="first");if((o==null?void 0:o.length)===1&&o[0].type==="genfrac")return o[0]}for(let o of a.branches)a.hasEmptyBranch(o)||a.setChildren(a.branch(o).map(c=>ws(c)),o);return a instanceof z&&a.forEachCell((o,c,h)=>{a.setCell(c,h,o.map(d=>ws(d)))}),a}function mb(a){let s=a.at(a.position);if(s.mode==="text"){for(;!s.isFirstSibling&&s.mode==="text";)s=s.leftSibling;return a.offsetOf(s)}let o=s,c=!1;if(s.type==="mclose"){let h=tn[s.value];for(;!s.isFirstSibling&&!(s.type==="mopen"&&s.value===h);)s=s.leftSibling;s.isFirstSibling||(s=s.leftSibling),c=!0}else s.type==="leftright"&&(s=s.leftSibling,c=!0);if(c)for(;!s.isFirstSibling&&(s.isFunction||Zp(s));)s=s.leftSibling;else{let h=[];for(;!s.isFirstSibling&&(Zp(s)||h.length>0);)s.type==="mclose"&&h.unshift(s.value),s.type==="mopen"&&h.length>0&&s.value===tn[h[0]]&&h.shift(),s=s.leftSibling}return o===s?-1:a.offsetOf(s)}function pb(a){if(a.type==="mord"&&a.value==="e"){let s=a.leftSibling;if(s&&s.isDigit())return!0}if(a.type==="mbin"&&(a.value==="+"||a.value==="-"||a.value==="")){let s=a.leftSibling,o=a.rightSibling;if((s==null?void 0:s.type)==="mord"&&s.value==="e"&&o&&o.isDigit()){let c=s.leftSibling;if(c&&c.isDigit())return!0}}if(a.type==="subsup"){let s=a.leftSibling;if(s&&s.isDigit()&&s.value==="0"){let o=s.leftSibling;if(o&&o.isDigit()&&o.value==="1"){let c=o.leftSibling;if((c==null?void 0:c.type)==="mbin"&&(c.value===""||c.value==="\\times")){let h=c.leftSibling;if(h&&h.isDigit())return!0}}}}if(a.isDigit()&&a.value==="0"){let s=a.leftSibling,o=a.rightSibling;if(s&&s.isDigit()&&s.value==="1"&&(o==null?void 0:o.type)==="subsup"){let c=s.leftSibling;if((c==null?void 0:c.type)==="mbin"&&(c.value===""||c.value==="\\times")){let h=c.leftSibling;if(h&&h.isDigit())return!0}}}if(a.isDigit()&&a.value==="1"){let s=a.rightSibling;if(s&&s.isDigit()&&s.value==="0"){let o=s.rightSibling;if((o==null?void 0:o.type)==="subsup"){let c=a.leftSibling;if((c==null?void 0:c.type)==="mbin"&&(c.value===""||c.value==="\\times")){let h=c.leftSibling;if(h&&h.isDigit())return!0}}}}if(a.type==="mbin"&&(a.value===""||a.value==="\\times")){let s=a.leftSibling,o=a.rightSibling;if(s&&s.isDigit()&&o&&o.isDigit()&&o.value==="1"){let c=o.rightSibling;if(c&&c.isDigit()&&c.value==="0"){let h=c.rightSibling;if((h==null?void 0:h.type)==="subsup")return!0}}}return!1}function Zp(a){return a.isDigit()||pb(a)?!0:a.type&&/^(mord|surd|subsup|leftright|mop|mclose)$/.test(a.type)?a.type!=="extensible-symbol":!1}new Dc$1;var Oc=class extends q{constructor(){super("text")}onPaste(a,s){if(!s)return!1;let o=typeof s=="string"?s:s.getData("text/plain");return o&&a.model.contentWillChange({inputType:"insertFromPaste",data:o})?(a.stopCoalescingUndo(),a.stopRecording(),this.insert(a.model,o)&&(a.model.contentDidChange({inputType:"insertFromPaste"}),a.startRecording(),a.snapshot("paste"),J(a)),a.startRecording(),!0):!1}insert(a,s,o={}){if(!a.contentWillChange({data:s,inputType:"insertText"}))return!1;o.insertionMode||(o.insertionMode="replaceSelection"),o.selectionMode||(o.selectionMode="placeholder"),o.format||(o.format="auto");let{silenceNotifications:c}=a;o.silenceNotifications&&(a.silenceNotifications=!0);let h=a.silenceNotifications;a.silenceNotifications=!0,o.insertionMode==="replaceSelection"&&!a.selectionIsCollapsed?a.deleteAtoms(de(a.selection)):o.insertionMode==="replaceAll"?(a.root.setChildren([],"body"),a.position=0):o.insertionMode==="insertBefore"?a.collapseSelection("backward"):o.insertionMode==="insertAfter"&&a.collapseSelection("forward");let d=hb(s,a.mathfield.context);if(ro(d,o.style),!d)return!1;let b=a.at(a.position),_=b.parent.addChildrenAfter(d,b);return a.silenceNotifications=h,o.selectionMode==="before"||(o.selectionMode==="item"?a.setSelection(a.anchor,a.offsetOf(_)):_&&(a.position=a.offsetOf(_))),a.contentDidChange({data:s,inputType:"insertText"}),a.silenceNotifications=c,!0}};function hb(a,s){if(a.includes("$")){let o=[],c=0,h=!1,d="";for(;c<a.length;)a[c]==="$"?c+1<a.length&&a[c+1]==="$"?(!h&&d?(o.push(Ss(d)),d=""):h&&d&&(o.push(d),d=""),o.push("$$"),h=!h,c+=2):(!h&&d?(o.push(Ss(d)),d=""):h&&d&&(o.push(d),d=""),o.push("$"),h=!h,c+=1):(d+=a[c],c+=1);return d&&(h?o.push(d):o.push(Ss(d))),ge(o.join(""),{context:s,parseMode:"text"})}return ge(Ss(a),{context:s,parseMode:"text"})}function Ss(a){return a=a.replace(/\\/g,"\\textbackslash "),a=a.replace(/#/g,"\\#"),a=a.replace(/%/g,"\\%"),a=a.replace(/&/g,"\\&"),a=a.replace(/_/g,"\\_"),a=a.replace(/{/g,"\\textbraceleft "),a=a.replace(/}/g,"\\textbraceright "),a=a.replace(/lbrace/g,"\\textbraceleft "),a=a.replace(/rbrace/g,"\\textbraceright "),a=a.replace(/\^/g,"\\textasciicircum "),a=a.replace(/~/g,"\\textasciitilde "),a=a.replace(//g,"\\textsterling "),a}new Oc;function Ut(a){return{value:a.model.getValue(),selectionIsCollapsed:a.model.selectionIsCollapsed,canUndo:a.canUndo(),canRedo:a.canRedo(),style:fb(a.model),mode:a.model.mode}}function fb(a){var s;if(a.selectionIsCollapsed)return(s=a.at(a.position))==null?void 0:s.style;let o=a.getAtoms(a.selection);if(o.length===0)return{};let c=p({},o[0].style);for(let h of o)for(let[d,b]of Object.entries(h.style))c[d]!==b&&delete c[d];return c}var le=4,Ne=20,xe=2*(Ne+le),ks=(a,s)=>`
  <line x1="${a+Ne}" y1="${s+Ne}" 
    x2="${a>s?a+Ne:7*Ne+10*le}" 
    y2="${a<s?s+Ne:7*Ne+10*le}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${a}" y="${s}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,Yp=(a,s)=>`
  <line x1="${a+Ne}" y1="${s+Ne}" 
    x2="${a>s?a+Ne:7*Ne+10*le}" 
    y2="${a<s?s+Ne:7*Ne+10*le}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${a}" y="${s}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,Ls=(a,s,o)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${a}" y="${s}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${o})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,gb=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 ${8*Ne+10*le+5} ${8*Ne+10*le+5}">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="${xe+le}" 
      height="${3*xe}" 
      width="${xe}" 
      rx="${xe/2}"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="${xe+le}" 
      y="0" 
      height="${xe}" 
      width="${3*xe}" 
      rx="${xe/2}"/>
  <g data-command='"moveDown"'>
  ${Ls(2*(le+xe),2*le+3*xe,0)}
  </g>
  <g data-command='"moveUp"'>
  ${Ls(2*(le+xe),2*le+xe,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${Ls(2*le+3*xe,2*(le+xe),-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${Ls(2*le+xe,2*(le+xe),90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${ks(2*le+xe,le)}
  </g>
  <g data-command='"removeColumn"'>
  ${Yp(2*le+2*xe,le)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${ks(2*le+3*xe,le)}
  </g>
  <g data-command='"addRowBefore"'>
  ${ks(le,2*le+xe)}
  </g>
  <g data-command='"removeRow"'>
  ${Yp(le,2*le+2*xe)}
  </g>
  <g data-command='"addRowAfter"'>
    ${ks(le,2*le+3*xe)}
  </g>
</svg>`,bb=a=>`
<svg id="matrix" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,yb=a=>`
<svg id="pmatrix" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,Qp=a=>`
<svg id="Bmatrix" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,xb=a=>`
<svg id="bmatrix" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,vb=a=>`
<svg id="vmatrix" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,_b=a=>`
<svg id="Vmatrix" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`,Mb=a=>`
<svg id="cases" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,wb=a=>`
<svg id="rcases" class="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,Bc={matrix:bb,pmatrix:yb,bmatrix:xb,Bmatrix:Qp,vmatrix:vb,Vmatrix:_b},Kc={cases:Mb,rcases:wb,Bmatrix:Qp};function Sb(a){var s,o;let c=(s=a.model.parentEnvironment)==null?void 0:s.rows;if(!c)return;let h=0;c.forEach(Jr=>{(!h||Jr.length>h)&&(h=Jr.length)});let d=document.getElementById("mathlive-environment-popover");d||(d=bi("mathlive-environment-popover"),We("environment-popover"),We("core"),d.setAttribute("aria-hidden","true"));let b,_=d.querySelector(".MLEP__environment-controls");_?b=_:(b=document.createElement("div"),d.innerHTML="",d.appendChild(b)),b.className="MLEP__environment-controls",b.style.display="flex",b.style.width="100%",b.style.height="100%",b.style.boxSizing="border-box",b.innerHTML=gb;let $=[],j="",Xt=a.model.parentEnvironment.environmentName;if(Wa(Xt)){let Jr=kb(Xt);j=Bc[Jr]("active");let Js=Bc,{[Jr]:qs}=Js,zo=Ai(Js,[Gs(Jr)]);$=Object.values(zo).map(js=>js("inactive"))}else if(ip(Xt)){let Jr=Lb(Xt);j=Kc[Jr]("active");let Js=Kc,{[Jr]:qs}=Js,zo=Ai(Js,[Gs(Jr)]);$=Object.values(zo).map(js=>js("inactive"))}else np(Xt)&&(j=Bc.matrix("active"),$=Object.values(Kc).map(Jr=>Jr("inactive")));let Lt=document.createElement("div");Lt.className="MLEP__environment-delimiter-controls",Lt.style.display="flex",Lt.style.flexDirection="column",Lt.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${j}
  ${$.join("")}
  </div>`,j&&b.appendChild(Lt),b.querySelectorAll("[data-command]").forEach(Jr=>{let Js=Jr.dataset.command,qs=Js;try{qs=JSON.parse(Js)}catch{}Jr.addEventListener("mousedown",zo=>zo.preventDefault()),qs&&Jr.addEventListener("click",()=>a.executeCommand(qs))});let fr=(o=a.field)==null?void 0:o.getBoundingClientRect();fr&&(d.style.top=`${window.scrollY+(fr.top-d.clientHeight-15)}px`,d.style.left=`${fr.left+20}px`,d.classList.add("is-visible"))}function As(){let a=document.getElementById("mathlive-environment-popover");a==null||a.classList.remove("is-visible")}function eh(){document.getElementById("mathlive-environment-popover")&&($r("mathlive-environment-popover"),nt("environment-popover"),nt("core"))}function wo(a){if(!a.hasFocus())return;let s=!1;if(a.model.mode==="math"){let o=a.model.parentEnvironment;if(o!=null&&o.rows&&rp(o.environmentName)){let c=a.options.environmentPopoverPolicy;s=c==="auto"||c==="on"}}s?Sb(a):As()}function kb(a){return a.replace("*","")}function Lb(a){return a==="dcases"?"cases":a}function Cs(a){let s=getComputedStyle(a).direction;return s==="ltr"||s==="rtl"?s:"ltr"}function Rc(a,s,o){return s==="left"||s==="leading"&&o==="ltr"||s==="trailing"&&o==="rtl"?a.left:a.right}function Pc(a,s,o,c){return o==="middle"?a-s/2:o==="start"&&c==="rtl"||o==="end"&&c==="ltr"||o==="top"||o==="right"?Math.max(0,a-s):a}function Ab(a,s,o,c){return o==="middle"?a-s/2:o==="start"&&c==="ltr"||o==="end"&&c==="rtl"||o==="top"||o==="right"?a:a-s}function th(a,s){var o,c,h;let d=(o=Cs(a))!=null?o:"ltr";a.style.position="fixed",a.style.left="",a.style.top="",a.style.right="",a.style.bottom="",a.style.height="",a.style.width="";let b=a.getBoundingClientRect(),_=Number.isFinite(s.maxHeight)?Math.min(s.maxHeight,window.innerHeight):window.innerHeight,$=Math.min(_,(c=s.height)!=null?c:b.height),j=Pc(s.location.y,$,s.verticalPos,d);j+$>window.innerHeight-8&&(s.alternateLocation?(j=Pc(s.alternateLocation.y,$,s.verticalPos,d),j+$>window.innerHeight-8&&(j=void 0)):j=void 0),Number.isFinite(j)||(j=Math.max(8,window.innerHeight-8-$),8+$>window.innerHeight-8&&(a.style.bottom="8px")),$=Math.min(j+$,window.innerHeight-8)-j;let Xt=Number.isFinite(s.maxWidth)?Math.min(s.maxWidth,window.innerWidth):window.innerWidth,Lt=Math.min(Xt,(h=s.width)!=null?h:b.width),fr=Pc(s.location.x,Lt,s.horizontalPos,d);fr+Lt>window.innerWidth-8&&(s.alternateLocation?(fr=Ab(s.alternateLocation.x,Lt,s.verticalPos,d),fr+Lt>window.innerWidth-8&&(fr=void 0)):fr=void 0),Number.isFinite(fr)||(fr=Math.max(8,window.innerWidth-8-Lt),8+Lt>window.innerWidth-8&&(a.style.right="8px")),Lt=Math.min(fr+Lt,window.innerWidth-8)-fr,d==="rtl"?a.style.right=`${Math.ceil(window.innerWidth-fr-Lt).toString()}px`:a.style.left=`${Math.ceil(fr).toString()}px`,a.style.top=`${Math.ceil(j).toString()}px`,$!==b.height&&(a.style.height=`${Math.ceil($).toString()}px`),Lt!==b.width&&(a.style.width=`${Math.ceil(Lt).toString()}px`)}function rh(a,s){return Math.hypot(s.x-a.x,s.y-a.y)}function qr(a){return"submenu"in a}function St(a){return"type"in a&&a.type==="command"||"onMenuSelect"in a||"id"in a}function So(a){return"type"in a&&a.type==="divider"}function Es(a){return"type"in a&&a.type==="heading"}var ih={};function Ts(a){let s=ih[a];if(!s){let o;switch(a){case"checkmark":o=`<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
      </span>`;break;case"trailing-chevron":o='<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>';break;case"mixedmark":o='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>'}if(o){let c=document.createElement("template");c.innerHTML=o,ih[a]=c,s=c}}if(s){if("content"in s)return s.content.cloneNode(!0);let o=document.createElement("svg");return o.innerHTML=s.innerHTML,o}}var nh=80,Sn=class{constructor(a,s){this._className="",this._element=null;var o;this.parentMenu=s,this._declaration=a,Object.freeze(this._declaration),qr(a)?(this.type="submenu",this.submenu=new kn(a.submenu,{parentMenu:s,submenuClass:a.submenuClass,columnCount:a.columnCount})):this.type=(o=a.type)!=null?o:"command",this.hasCheck=St(a)&&a.checked!==void 0}get rootMenu(){return this.parentMenu.rootMenu}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}dispose(){var a,s;(a=this._abortController)==null||a.abort(),this._abortController=void 0,(s=this._element)==null||s.remove(),this._element=null,this.submenu&&this.submenu.dispose(),this.submenu=void 0}get menuItem(){return this._declaration}get label(){var a;return(a=this._label)!=null?a:""}set label(a){a===void 0&&(a=""),a!==this._label&&(this._label=a,this.dirty=!0)}get visible(){return this._visible}set visible(a){a!==this._visible&&(this._visible=a,this.dirty=!0)}get enabled(){return this._enabled}set enabled(a){this._enabled=a,this.element&&(a?this.element.removeAttribute("aria-disabled"):this.element.setAttribute("aria-disabled","true")),this.dirty=!0}get checked(){return this._checked}set checked(a){this._checked=a,this.dirty=!0}get tooltip(){return this._tooltip}set tooltip(a){a!==this._tooltip&&(this._tooltip=a,this.dirty=!0)}get ariaLabel(){return this._ariaLabel}set ariaLabel(a){a!==this._ariaLabel&&(this._ariaLabel=a,this.dirty=!0)}get active(){var a,s;return(s=(a=this.element)==null?void 0:a.classList.contains("active"))!=null?s:!1}set active(a){this.element&&this.element.classList.toggle("active",a)}updateState(a){var s,o,c;let h=this._declaration;if(So(h)){this.enabled=!1,this.checked=!1;return}Es(h)&&(this.enabled=!1,this.checked=!1,this.visible=!0),St(h)&&(this.checked=(s=wi(h.checked,a))!=null?s:!1),(St(h)||qr(h))&&(this.enabled=(o=wi(h.enabled,a))!=null?o:!0,this.visible=(c=wi(h.visible,a))!=null?c:!0,this.visible&&this.enabled&&this.submenu&&(this.submenu.updateState(a),this.submenu.visible||(this.visible=!1))),(St(h)||Es(h)||qr(h))&&(this.label=wi(h.label,a),this._className=wi(h.class,a),this.tooltip=wi(h.tooltip,a),this.ariaLabel=wi(h.ariaLabel,a)),this._element&&this.updateElement()}set dirty(a){a&&this.parentMenu&&(this.parentMenu.dirty=!0)}updateElement(){var a;if(!this.visible||!this.element)return;let s=this.element;s.textContent="",s.className="",s.className=(a=this._className)!=null?a:"",this.enabled?s.removeAttribute("aria-disabled"):s.setAttribute("aria-disabled","true"),this.checked===!0?(s.setAttribute("aria-checked","true"),s.append(Ts("checkmark"))):this.checked==="mixed"?(s.setAttribute("aria-checked","mixed"),s.append(Ts("mixedmark"))):s.removeAttribute("aria-checked"),this.ariaLabel&&s.setAttribute("aria-label",this.ariaLabel);let o=document.createElement("span");if(o.className=this.parentMenu.hasCheck?"label indent":"label",this.type==="heading"&&o.classList.add("heading"),o.innerHTML=this.label,s.append(o),this._tooltip&&s.setAttribute("data-tooltip",this._tooltip),St(this._declaration)&&this._declaration.keyboardShortcut){let c=document.createElement("kbd");c.innerHTML=pn(this._declaration.keyboardShortcut),s.append(c)}this.type==="submenu"&&s.append(Ts("trailing-chevron"))}get element(){if(this._element)return this._element;if(So(this._declaration)){let o=document.createElement("li");return o.setAttribute("part","menu-divider"),o.setAttribute("role","divider"),this._element=o,o}let a=document.createElement("li");this._element=a,(St(this._declaration)||Es(this._declaration)||qr(this._declaration))&&a.setAttribute("part","menu-item"),a.setAttribute("tabindex","-1"),this.hasCheck?a.setAttribute("role","menuitemcheckbox"):a.setAttribute("role","menuitem"),this.type==="submenu"&&(a.setAttribute("aria-haspopup","true"),a.setAttribute("aria-expanded","false"));let s=this.abortController.signal;return a.addEventListener("pointerenter",this,{signal:s}),a.addEventListener("pointerleave",this,{signal:s}),a.addEventListener("pointerup",this,{signal:s}),a.addEventListener("click",this,{signal:s}),this._element}dispatchSelect(){var a;if(!St(this._declaration))return;let s=new CustomEvent("menu-select",{cancelable:!0,bubbles:!0,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});this.parentMenu.dispatchEvent(s)&&typeof this._declaration.onMenuSelect=="function"&&this._declaration.onMenuSelect({target:(a=this.parentMenu.host)!=null?a:void 0,modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data})}handleEvent(a){var s;if(!(!this.visible||!this.enabled)){if(a.type==="click"){this.rootMenu.state==="modal"&&this.select(),a.stopPropagation(),a.preventDefault();return}if(a.type==="pointerenter"){let o=a;this.rootMenu.cancelDelayedOperation(),this.parentMenu.isSubmenuOpen&&(s=this.parentMenu.activeMenuItem)!=null&&s.movingTowardSubmenu(o)?this.rootMenu.scheduleOperation(()=>{this.parentMenu.activeMenuItem=this,this.openSubmenu()}):(this.parentMenu.activeMenuItem=this,this.openSubmenu({withDelay:!0}));return}if(a.type==="pointerleave"){this.rootMenu.activeSubmenu===this.parentMenu&&(this.parentMenu.activeMenuItem=null);return}if(a.type==="pointerup"){this.rootMenu.state!=="modal"&&this.select(),a.stopPropagation(),a.preventDefault();return}}}select(){if(this.rootMenu.cancelDelayedOperation(),this.type==="submenu"){this.openSubmenu();return}this.active=!1,setTimeout(()=>{this.active=!0,setTimeout(()=>{this.active=!1,this.rootMenu.hide(),this.dispatchSelect()},nh)},nh)}openSubmenu(a){var s;if(this.type!=="submenu"||!this.element)return;if((s=a==null?void 0:a.withDelay)!=null&&s){this.rootMenu.scheduleOperation(()=>this.openSubmenu());return}let o=this.element.getBoundingClientRect(),c=Cs(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:Rc(o,"trailing",c),y:o.top-4},alternateLocation:{x:Rc(o,"leading",c),y:o.top-4}})}movingTowardSubmenu(a){if(!this.element||this.type!=="submenu")return!1;let s=this.rootMenu.lastMoveEvent;if(!s)return!1;let o=a.timeStamp-s.timeStamp;if(o>500)return!1;let c=a.clientX-s.clientX;if(Cb(c,s.clientY-a.clientY,o)<=.2)return!1;let h="right";if(this.submenu.element){let d=this.submenu.element.getBoundingClientRect(),b=this.element.getBoundingClientRect();d.left<b.left+b.width/2&&(h="left")}return h==="right"?c>0:c<0}};function Cb(a,s,o){return Math.hypot(a,s)/o}function wi(a,s){return a===void 0||typeof a!="function"?a:(s!=null||(s={alt:!1,control:!1,shift:!1,meta:!1}),a(s))}var kn=class Mv{constructor(s,o){this._element=null,this._activeMenuItem=null,this._dirty=!0;var c,h;this.parentMenu=(c=o==null?void 0:o.parentMenu)!=null?c:null,this._submenuClass=o==null?void 0:o.submenuClass,this.columnCount=(h=o==null?void 0:o.columnCount)!=null?h:1,this.isSubmenuOpen=!1,this.menuItems=s}get children(){return Object.freeze([...this._menuItems])}set menuItems(s){let o=this.parentMenu;this.dispose(),this.parentMenu=o,s=[...s],this._menuItems=s.map(c=>c.onCreate?c.onCreate(c,this):new Sn(c,this)),this.hasCheck=void 0,this.dirty=!0}dispose(){var s;this.hide(),this._element&&this._element.remove(),this._abortController&&this._abortController.abort(),(s=this._menuItems)==null||s.forEach(o=>o.dispose()),this._menuItems=[],this._activeMenuItem=null,this.parentMenu=null}handleEvent(s){if(s.type==="wheel"&&this._element){let o=s;this._element.scrollBy(0,o.deltaY),s.stopPropagation()}}dispatchEvent(s){return this.rootMenu.dispatchEvent(s)}get host(){return this.rootMenu.host}get rootMenu(){return this.parentMenu.rootMenu}updateState(s){var o,c,h;this._menuItems.forEach(j=>j.updateState(s));let d=this.hasCheck;this.hasCheck=this._menuItems.some(j=>j.visible&&j.hasCheck),this.hasCheck!==d&&this._menuItems.forEach(j=>j.updateState(s));let b,_=0;for(let j of this._menuItems)j.type==="heading"?(b&&_===0&&(b.visible=!1),b=j,_=0):j.type==="divider"&&b?(b.visible=_>0,b=void 0,_=0):b&&j.visible&&(_+=1);b&&(b.visible=_>0);let $=!0;for(let j of this._menuItems)j.type==="divider"?(j.visible=!$,$=!0):j.visible&&($=!1);(o=this.activeMenuItem)!=null&&o.visible||(this.activeMenuItem=null),!((c=this.activeMenuItem)!=null&&c.enabled)&&((h=this.activeMenuItem)==null?void 0:h.type)==="submenu"&&this._activeMenuItem.submenu.hide(),this._dirty=!1}get enabled(){return this.updateIfDirty(),this._menuItems.some(s=>s.type!=="divider"&&s.visible&&s.enabled)}get visible(){return this.updateIfDirty(),this._menuItems.some(s=>s.type!=="divider"&&s.visible)}set dirty(s){this._dirty!==s&&s&&this.parentMenu&&(this._dirty=!0,this.parentMenu.dirty=!0)}updateIfDirty(){this._dirty&&this.updateState(this.rootMenu.modifiers)}updateElement(){var s;if(this._element){this._element.textContent="";for(let{element:o,visible:c}of this._menuItems)o&&c&&this._element.append(o);(s=this._element.querySelector("li:first-of-type"))==null||s.setAttribute("tabindex","0")}}get element(){if(this._element)return this._element;let s=document.createElement("menu");s.setAttribute("role","menu"),s.setAttribute("tabindex","-1"),s.setAttribute("aria-orientation","vertical"),s.setAttribute("part","ui-menu-container"),this._submenuClass&&s.classList.add(this._submenuClass),s.classList.add("ui-menu-container"),this._abortController||(this._abortController=new AbortController);let o=this._abortController.signal;return s.addEventListener("focus",this,{signal:o}),s.addEventListener("wheel",this,{passive:!0,signal:o}),this._element=s,this.updateElement(),s}get activeMenuItem(){return this._activeMenuItem}set activeMenuItem(s){var o,c,h,d;if(this.rootMenu.cancelDelayedOperation(),s!==this._activeMenuItem){if(this.activeMenuItem){let b=this.activeMenuItem;b.active=!1,(o=b.submenu)==null||o.hide()}if(!((c=s==null?void 0:s.visible)==null||c)){this._activeMenuItem=null;return}this._activeMenuItem=s,s&&(s.active=!0)}s?(h=s.element)==null||h.focus({preventScroll:!0}):(d=this._element)==null||d.focus({preventScroll:!0})}get firstMenuItem(){this.updateIfDirty();let s=0,o=!1,c=this._menuItems;for(;!o&&s<=c.length-1;){let h=c[s];o=h.type!=="divider"&&h.visible&&h.enabled,s+=1}return o?c[s-1]:null}get lastMenuItem(){this.updateIfDirty();let s=this._menuItems,o=s.length-1,c=!1;for(;!c&&o>=0;){let h=s[o];c=h.type!=="divider"&&h.visible&&h.enabled,o-=1}return c?s[o+1]:null}nextMenuItem(s){if(s===0)return this._activeMenuItem;if(!this._activeMenuItem)return s>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)return null;this.updateIfDirty();let o=this._menuItems.indexOf(this.firstMenuItem),c=this._menuItems.indexOf(this.lastMenuItem),h=this._menuItems.indexOf(this._activeMenuItem),d=1;for(;h>=o&&h<=c;){h+=s>0?1:-1;let b=this._menuItems[h];if(!b)break;if(b.visible&&b.enabled){if(d===Math.abs(s))return this._menuItems[h];d+=1}}return s>0?this.lastMenuItem:this.firstMenuItem}getMenuItemColumn(s){this.updateIfDirty();let o=this._menuItems.filter(c=>c.visible&&c.enabled).indexOf(s);return o<0?-1:o%this.columnCount}static get collator(){return Mv._collator||(Mv._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"})),Mv._collator}findMenuItem(s){var o;this.updateIfDirty();let c=this._menuItems.filter(_=>_.type!=="divider"&&_.visible&&_.enabled);if(c.length===0)return null;let h=Math.max(...c.map(_=>_.label.length))-s.length;if(h<0)return null;let d=null,b=0;for(;b<h&&!d;)d=(o=c.find(_=>Mv.collator.compare(s,_.label.substring(b,s.length))===0))!=null?o:null,b++;return d}show(s){return!this.visible||!s.container?!1:(this.updateElement(),s.container.appendChild(this.element),Xs()&&(this.element.popover="manual",this.element.showPopover()),s.location&&th(this.element,{location:s.location,alternateLocation:s.alternateLocation,verticalPos:"bottom",horizontalPos:"start"}),oh(),this.element.focus({preventScroll:!0}),ah(),this.parentMenu&&(this.parentMenu.openSubmenu=this),!0)}hide(){var s,o,c,h,d,b;this.openSubmenu=null,this.activeMenuItem=null,this.parentMenu&&(this.parentMenu.openSubmenu=null),!(!((s=this._element)!=null&&s.isConnected)||!this._element.parentElement)&&(Xs()&&(o=this._element)!=null&&o.popover&&this._element.hidePopover(),oh(),(h=(c=this.parentMenu)==null?void 0:c.element)==null||h.focus(),(b=(d=this._element)==null?void 0:d.parentNode)==null||b.removeChild(this._element),ah())}set openSubmenu(s){var o,c,h,d;let b=s!==null;((o=this.activeMenuItem)==null?void 0:o.type)==="submenu"&&((c=this.activeMenuItem.element)==null||c.setAttribute("aria-expanded",b.toString())),(d=(h=this.activeMenuItem)==null?void 0:h.element)==null||d.classList.toggle("is-submenu-open",b),this.isSubmenuOpen=b}};function oh(){document.addEventListener("focusin",Hr,!0),document.addEventListener("focusout",Hr,!0),document.addEventListener("focus",Hr,!0),document.addEventListener("blur",Hr,!0)}function Hr(a){a.stopImmediatePropagation(),a.preventDefault()}function ah(){document.removeEventListener("focusin",Hr,!0),document.removeEventListener("focusout",Hr,!0),document.removeEventListener("focus",Hr,!0),document.removeEventListener("blur",Hr,!0)}var Ds=class Ey extends kn{constructor(s,o){var c;super(s),this.state="closed",this.typingBufferResetTimer=0,this.hysteresisTimer=0,this._updating=!1,this._host=(c=o==null?void 0:o.host)!=null?c:null,this.isDynamic=s.some(sh),this._modifiers={shift:!1,control:!1,alt:!1,meta:!1},this.typingBuffer="",this.state="closed"}get modifiers(){return this._modifiers}set modifiers(s){hp(this._modifiers,s)||(this._modifiers=s,this.dirty=!0)}get activeSubmenu(){let s=this;for(;s.isSubmenuOpen;)s=s.activeMenuItem.submenu;return s}set dirty(s){this._updating||this._dirty!==s&&(this._dirty=!0,s&&setTimeout(()=>{this.updateState(this.modifiers),this.updateElement()}))}updateState(s){this._updating=!0,this.modifiers=s??this.modifiers,super.updateState(this.modifiers),this._updating=!1}handleKeyupEvent(s){this.isDynamic&&(this.modifiers=qt(s)),s.stopImmediatePropagation()}handleKeydownEvent(s){var o,c,h;if(s.key==="Tab"||s.key==="Escape"){this.hide();return}this.isDynamic&&(this.modifiers=qt(s));let d=!0,b=this.activeSubmenu,_=b.activeMenuItem;switch(s.key){case" ":case"Space":case"Return":case"Enter":_==null||_.select(qt(s));break;case"ArrowRight":if((_==null?void 0:_.type)==="submenu")_.select(qt(s)),this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;else if(!_)b.activeMenuItem=b.firstMenuItem;else{let $=(o=b.getMenuItemColumn(_))!=null?o:-1;if($>=0&&$<((c=b.columnCount)!=null?c:1)-1){let j=b.nextMenuItem(1);j&&(b.activeMenuItem=j)}}break;case"ArrowLeft":if(b===this.rootMenu)_||(b.activeMenuItem=b.firstMenuItem);else if((_&&(h=b.getMenuItemColumn(_))!=null?h:-1)<=0||!_){b.hide();let $=b.parentMenu.activeMenuItem;if($){let{element:j}=$;j==null||j.focus(),j==null||j.classList.remove("is-submenu-open")}}else{let $=b.nextMenuItem(-1);$&&(b.activeMenuItem=$)}break;case"ArrowDown":b.activeMenuItem=b.nextMenuItem(b.columnCount);break;case"ArrowUp":b.activeMenuItem=b.nextMenuItem(-b.columnCount);break;case"Home":case"PageUp":b.activeMenuItem=b.firstMenuItem;break;case"End":case"PageDown":b.activeMenuItem=b.lastMenuItem;break;case"Backspace":if(this.typingBuffer&&(this.typingBuffer=this.typingBuffer.slice(0,-1),this.typingBuffer)){clearTimeout(this.typingBufferResetTimer);let $=b.findMenuItem(this.typingBuffer);$&&(b.activeMenuItem=$),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}break;default:if(cr(s)){isFinite(this.typingBufferResetTimer)&&clearTimeout(this.typingBufferResetTimer),this.typingBuffer+=s.key;let $=b.findMenuItem(this.typingBuffer);$&&(b.activeMenuItem=$),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}else d=!1}d&&(s.preventDefault(),s.stopPropagation())}handleEvent(s){if(s.type==="keydown")this.handleKeydownEvent(s);else if(s.type==="keyup")this.handleKeyupEvent(s);else if(s.type==="pointermove")this.lastMoveEvent=s;else if(s.type==="pointerup")Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120?this.state="modal":this.state==="modal"&&s.target===this.scrim&&this.hide();else if(s.type==="contextmenu"){s.preventDefault(),s.stopPropagation();return}super.handleEvent(s)}dispatchEvent(s){return this._host?this._host.dispatchEvent(s):!0}get host(){return this._host}get scrim(){return Te.element}connectScrim(s){let o=this.scrim;o.addEventListener("pointerup",this,!0),o.addEventListener("contextmenu",this),o.addEventListener("keydown",this),o.addEventListener("keyup",this),o.addEventListener("pointermove",this),Te.open({root:s,onDismiss:()=>this.hide()})}disconnectScrim(){let s=this.scrim;s.removeEventListener("pointerup",this,!0),s.removeEventListener("contextmenu",this),s.removeEventListener("keydown",this),s.removeEventListener("keyup",this),s.removeEventListener("pointermove",this),Te.state==="open"&&Te.scrim.close()}get rootMenu(){return this}show(s){return this._onDismiss=s==null?void 0:s.onDismiss,s!=null&&s.modifiers&&(this.modifiers=s.modifiers),this.updateState(),this.connectScrim(s==null?void 0:s.target),super.show(g(p({},s),{container:this.scrim}))?(this._openTimestamp=Date.now(),this.state="open",!0):(this.disconnectScrim(),!1)}hide(){this.cancelDelayedOperation(),this.state!==void 0&&(this.state!=="closed"&&(this.activeMenuItem=null,Te.element.parentElement.focus(),super.hide(),this.state="closed",this.disconnectScrim()),this._onDismiss&&(this._onDismiss(),this._onDismiss=void 0))}scheduleOperation(s){this.cancelDelayedOperation();let o=Ey.SUBMENU_DELAY;if(o<=0){s();return}this.hysteresisTimer=setTimeout(()=>{this.hysteresisTimer=0,s()},o)}cancelDelayedOperation(){this.hysteresisTimer&&(clearTimeout(this.hysteresisTimer),this.hysteresisTimer=0)}};Ds.SUBMENU_DELAY=120;var ko=Ds;function sh(a){return So(a)?!1:typeof a.label=="function"||typeof a.ariaLabel=="function"||typeof a.tooltip=="function"||(St(a)||qr(a))&&(typeof a.enabled=="function"||typeof a.visible=="function")||St(a)&&typeof a.checked=="function"?!0:qr(a)?a.submenu.some(sh):!1}var Ln=class{};Ln.DELAY=300,Ln.MAX_DISTANCE=10;function lh(a){return new Promise((s,o)=>{let c=hn(a);c||s(!1);let h=c,d=setTimeout(()=>{b.abort(),s(rh(h,c)<Ln.MAX_DISTANCE)},Ln.DELAY),b=new AbortController,_=b.signal;for(let $ of["pointermove","pointerup","pointercancel"])window.addEventListener($,j=>{if(j.type==="pointerup"||j.type==="pointercancel")clearTimeout(d),b.abort(),s(!1);else if(j.type==="pointermove"){let Xt=hn(j);Xt&&(h=Xt)}},{passive:!0,signal:_})})}async function Ic(a,s,o){if(a.defaultPrevented)return!1;if(a.type==="contextmenu"){let c=a;if(a.preventDefault(),a.stopPropagation(),o.show({target:s,location:hn(c),modifiers:qt(c)}))return!0}if(a.type==="keydown"){let c=a;if(c.code==="ContextMenu"||c.code==="F10"&&c.shiftKey){let h=s==null?void 0:s.getBoundingClientRect();if(ch$1(s)&&h&&o.show({target:s,location:{x:Math.ceil(h.left+h.width/2),y:Math.ceil(h.top+h.height/2)},modifiers:qt(c)}))return a.preventDefault(),a.stopPropagation(),!0}}if(a.type==="pointerdown"&&a.pointerType!=="mouse"&&a.button===0){let c=a.target;for(;c&&s!==c;)c=c.parentNode;if(!c||!o.visible)return!1;let h=hn(a);if(await lh(a))return o.state!=="closed"||!ch$1(s)?!1:(o.show({target:s,location:h}),!0)}return!1}function ch$1(a){return a.dispatchEvent(new Event("contextmenu",{cancelable:!0}))}var uh="<mo>&#x2061;</mo>",Bs="<mo>&#8290;</mo>";function Os(a){return a.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function re(a,s){return!a||!s.generateID?"":` extid="${a}"`}function Eb(a,s,o){var c,h,d,b,_,$,j,Xt;let Lt=!1;s=s??a.atoms.length;let fr="",Jr="",Js=a.atoms[a.index],qs=(c=Js.style)==null?void 0:c.variant,zo=(h=Js.style)==null?void 0:h.variantStyle,js="";if(Js.value&&(qs||zo)){let Oo=(d=Dn(Js.value,qs,zo))!=null?d:Js.value;if(Oo!==Js.value)return a.index+=1,fr=`<mi${re(Js.id,o)}>${Oo}</mi>`,jt(fr,a,o)||(a.mathML+=fr,a.lastType="mi"),!0;js=(b={upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"}[(zo??"")+(qs??"")])!=null?b:"",js&&(js=` mathvariant="${js}"`)}let eu={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"","\\cdotp":"","\\ldots":"","\\cdots":"","\\ddots":"","\\vdots":"","\\ldotp":"."};if(Js.command==="!")return a.index+=1,fr="<mo>!</mo>",jt(fr,a,o)||(a.mathML+=fr,a.lastType="mo"),!0;if(eu[Js.command]){a.index+=1;let Oo=`<mi${re(Js.id,o)}${js}>${eu[Js.command]}</mi>`;return(a.lastType==="mi"||a.lastType==="mn"||a.lastType==="mtext"||a.lastType==="fence")&&(Oo=Bs+Oo),jt(Oo,a,o)||(a.mathML+=Oo,a.lastType="mi"),!0}if(Js.command==="\\operatorname")Jr=An(Js.body),a.index+=1;else if(qs||zo)for(;a.index<s&&(Js.type==="mord"||Js.type==="macro")&&!Js.isDigit()&&qs===(($=(_=Js.style)==null?void 0:_.variant)!=null?$:"")&&zo===((Xt=(j=Js.style)==null?void 0:j.variantStyle)!=null?Xt:"");)Jr+=An([Js]),a.index+=1,Js=a.atoms[a.index];else(Js.type==="mord"||Js.type==="macro")&&!Js.isDigit()&&(Jr+=An([Js]),a.index+=1);if(Jr.length>0){Lt=!0,fr=`<mi${js}>${Jr}</mi>`;let Oo=a.lastType;fr.endsWith(">f</mi>")||fr.endsWith(">g</mi>")?(fr+=uh,a.lastType="applyfunction"):a.lastType=/^<mo>(.*)<\/mo>$/.test(fr)?"mo":"mi",jt(fr,a,o)||((Oo==="mi"||Oo==="mn"||Oo==="mtext"||Oo==="fence")&&(fr=Bs+fr),a.mathML+=fr)}return Lt}function dh(a){return a.index<a.atoms.length&&a.atoms[a.index].superscript&&a.atoms[a.index].type==="subsup"}function mh(a){let s=-1,o=a.index,c=!1,h=!1;for(;o<a.atoms.length&&!c&&!h;){let d=a.atoms[o];c=!d.isDigit(),h=!c&&d.superscript!==void 0,o++}return h&&(s=o-1),s}function jt(a,s,o){var c;let h=s.atoms[s.index-1];if(!h)return!1;if(!h.superscript&&!h.subscript)if(((c=s.atoms[s.index])==null?void 0:c.type)==="subsup")h=s.atoms[s.index],s.index+=1;else return!1;let d=s.lastType;s.lastType="";let b=U(h.superscript,o);s.lastType="";let _=U(h.subscript,o);if(s.lastType=d,!b&&!_)return!1;let $="";return b&&_?$=`<msubsup>${a}${_}${b}</msubsup>`:b?$=`<msup>${a}${b}</msup>`:_&&($=`<msub>${a}${_}</msub>`),s.mathML+=$,s.lastType="",!0}function Tb(a,s,o){s=s??a.atoms.length;let c=a.index,h="",d=mh(a);for(d>=0&&d<s&&(s=d);a.index<s&&a.atoms[a.index].mode==="text";)h+=a.atoms[a.index].value?a.atoms[a.index].value:" ",a.index+=1;return h.length>0?(h=`<mtext ${re(a.atoms[c].id,o)}>${h}</mtext>`,d<0&&dh(a)&&(d=a.index,a.index+=1),jt(h,a,o)||(a.mathML+=h,a.lastType="mtext"),!0):!1}function Db(a,s,o){s=s??a.atoms.length;let c=a.index,h="",d=mh(a);for(d>=0&&d<s&&(s=d);a.index<s&&a.atoms[a.index].isDigit();)h+=a.atoms[a.index].asDigit(),a.index+=1;return h.length<=0?!1:(h="<mn"+re(a.atoms[c].id,o)+">"+h+"</mn>",d<0&&dh(a)&&(d=a.index,a.index+=1),jt(h,a,o)||(a.mathML+=h,a.lastType="mn"),!0)}function Ob(a,s,o){let c=!1;s=s??a.atoms.length;let h="",d="";if(a.index<s&&a.atoms[a.index].type==="mopen"){let b=!1,_=0,$=a.index,j=-1,Xt=$+1;for(;Xt<s&&!b;)a.atoms[Xt].type==="mopen"?_+=1:a.atoms[Xt].type==="mclose"&&(_-=1),_===-1&&(b=!0,j=Xt),Xt+=1;b&&(h="<mrow>",h+=Si(a.atoms[$],o),h+=U(a.atoms,o,$+1,j),h+=Si(a.atoms[j],o),h+="</mrow>",a.index=j+1,(a.lastType==="mi"||a.lastType==="mn"||a.lastType==="mfrac"||a.lastType==="fence")&&(a.mathML+=Bs),jt(h,a,o)&&(c=!0,a.lastType="",h=""),d="fence")}return h.length>0&&(c=!0,a.mathML+=h,a.lastType=d),c}function Bb(a,s,o){let c=!1;s=s??a.atoms.length;let h="",d="",b=a.atoms[a.index];if(!b)return!1;let _={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"","\\mid":"","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":""};if(_[b.command]){a.index+=1;let $=`<mo${re(b.id,o)}>${_[b.command]}</mo>`;return jt($,a,o)||(a.mathML+=$,a.lastType="mo"),!0}if(a.index<s&&(b.type==="mbin"||b.type==="mrel"))h+=zc(a.atoms[a.index],o),a.index+=1,d="mo";else if(a.index<s&&(b.type==="mop"||b.type==="operator"||b.type==="extensible-symbol")){if(b.subsupPlacement==="over-under"&&(b.superscript||b.subscript)){let $=Si(b,o);return b.superscript&&b.subscript?(h+="<munderover>"+$,h+=U(b.subscript,o),h+=U(b.superscript,o),h+="</munderover>"):b.superscript?(h+="<mover>"+$,h+=U(b.superscript,o),h+="</mover>"):b.subscript&&(h+="<munder>"+$,h+=U(b.subscript,o),h+="</munder>"),a.mathML+=h,a.lastType="mo",a.index+=1,!0}{let $=a.atoms[a.index],j=$.value==="\\operatorname",Xt=j?'<mi class="MathML-Unit"'+re($.id,o)+">"+An($.value)+"</mi>":Si($,o);h+=Xt,!j&&!/^<mo>(.*)<\/mo>$/.test(Xt)?(h+=uh,d="applyfunction"):d=j?"mi":"mo"}(a.lastType==="mi"||a.lastType==="mn")&&!/^<mo>(.*)<\/mo>$/.test(h)&&(h=Bs+h),a.index+=1}return h.length>0&&(c=!0,jt(h,a,o)||(a.mathML+=h,a.lastType=d)),c}function U(a,s,o,c){s!=null||(s={});let h={atoms:[],index:o??0,mathML:"",lastType:""};if(typeof a=="number"||typeof a=="boolean")h.mathML=a.toString();else if(typeof a=="string")h.mathML=a;else if(a instanceof y)h.mathML=zc(a,s);else if(Array.isArray(a)){h.atoms=a;let d=0;for(c=c||(a?a.length:0);h.index<c;)if(Tb(h,c,s)||Db(h,c,s)||Eb(h,c,s)||Bb(h,c,s)||Ob(h,c,s))d+=1;else if(h.index<c){let b=zc(h.atoms[h.index],s);h.lastType==="mn"&&b.length>0&&h.atoms[h.index].type==="genfrac"&&(b="<mo>&#x2064;</mo>"+b),h.atoms[h.index].type==="genfrac"?h.lastType="mfrac":h.lastType="",h.index+=1,jt(b,h,s)?d+=1:b.length>0&&(h.mathML+=b,d+=1)}d>1&&(h.mathML="<mrow>"+h.mathML+"</mrow>")}return h.mathML}function Si(a,s){let o="",c=An(a.value);return c&&(o="<mo"+re(a.id,s)+">"+c+"</mo>"),o}function An(a){if(!a)return"";if(typeof a=="string")return Os(a);if(!Array.isArray(a)&&typeof a.body=="string")return Os(a.body);let s="";for(let o of a)typeof o.value=="string"&&(s+=o.value);return Os(s)}function zc(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1,e1;if(a.mode==="text")return`<mi${re(a.id,s)}>${a.value}</mi>`;let r1={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",longleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",longrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",longrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xleftrightarrows:"",xRightleftharpoons:"",longRightleftharpoons:"",xLeftrightharpoons:"",longLeftrightharpoons:""},a1={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},i1="",s1="",c1,h1,m1,l1,f1,p1,{command:d1}=a;if(a.command==="\\error")return`<merror${re(a.id,s)}>${U(a.body,s)}</merror>`;let b1={"\\vert":"|","\\Vert":"","\\mid":"","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":""},C1={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(a.type){case"first":break;case"error":if(a.command==="\\\\")break;i1=`<merror${re(a.id,s)}>${U(a.body,s)}</merror>`;break;case"group":case"root":i1=U(a.body,s);break;case"array":let g1=a;if((g1.leftDelim&&g1.leftDelim!=="."||g1.rightDelim&&g1.rightDelim!==".")&&(i1+="<mrow>",g1.leftDelim&&g1.leftDelim!=="."&&(i1+=`<mo>${b1[g1.leftDelim]||g1.leftDelim}</mo>`)),i1+="<mtable",g1.colFormat){for(i1+=' columnalign="',m1=0;m1<g1.colFormat.length;m1++){let O1=g1.colFormat[m1];"align"in O1&&(i1+={l:"left",c:"center",r:"right"}[O1.align]+" ")}i1+='"'}for(i1+=">",h1=0;h1<g1.rows.length;h1++){for(i1+="<mtr>",c1=0;c1<g1.rows[h1].length;c1++)i1+="<mtd>"+U(g1.rows[h1][c1],s)+"</mtd>";i1+="</mtr>"}i1+="</mtable>",(g1.leftDelim&&g1.leftDelim!=="."||g1.rightDelim&&g1.rightDelim!==".")&&(g1.rightDelim&&g1.rightDelim!=="."&&(i1+=`<mo>${b1[g1.rightDelim]||g1.rightDelim}</mo>`),i1+="</mrow>");break;case"genfrac":let o1=a;(o1.leftDelim||o1.rightDelim)&&(i1+="<mrow>"),o1.leftDelim&&o1.leftDelim!=="."&&(i1+="<mo"+re(a.id,s)+">"+(b1[o1.leftDelim]||o1.leftDelim)+"</mo>"),o1.hasBarLine?(i1+="<mfrac>",i1+=U(a.above,s)||"<mi>&nbsp;</mi>",i1+=U(a.below,s)||"<mi>&nbsp;</mi>",i1+="</mfrac>"):(i1+="<mtable"+re(a.id,s)+">",i1+="<mtr>"+U(a.above,s)+"</mtr>",i1+="<mtr>"+U(a.below,s)+"</mtr>",i1+="</mtable>"),o1.rightDelim&&o1.rightDelim!=="."&&(i1+="<mo"+re(a.id,s)+">"+(b1[o1.rightDelim]||o1.rightDelim)+"</mo>"),(o1.leftDelim||o1.rightDelim)&&(i1+="</mrow>");break;case"surd":a.hasEmptyBranch("above")?(i1+="<msqrt"+re(a.id,s)+">",i1+=U(a.body,s),i1+="</msqrt>"):(i1+="<mroot"+re(a.id,s)+">",i1+=U(a.body,s),i1+=U(a.above,s),i1+="</mroot>");break;case"leftright":let S1=a,v1=S1.leftDelim;i1="<mrow>",v1&&v1!=="."&&(i1+=`<mo${re(a.id,s)}>${(o=b1[v1])!=null?o:v1}</mo>`),a.body&&(i1+=U(a.body,s));let B1=S1.matchingRightDelim();B1&&B1!=="."&&(i1+=`<mo${re(a.id,s)}>${(c=b1[B1])!=null?c:B1}</mo>`),i1+="</mrow>";break;case"sizeddelim":case"delim":i1+=`<mo${re(a.id,s)}>${b1[a.value]||a.value}</mo>`;break;case"accent":let T1=a;i1+='<mover accent="true"'+re(a.id,s)+">",i1+=U(a.body,s),i1+="<mo>"+(C1[d1]||T1.accent)+"</mo>",i1+="</mover>";break;case"line":case"overlap":break;case"overunder":let w1=a;f1=a.above,l1=a.below,(w1.svgAbove||f1)&&(w1.svgBelow||l1)?p1=a.body:f1&&f1.length>0?(p1=a.body,(d=(h=a.body)==null?void 0:h[0])!=null&&d.below?(l1=a.body[0].below,p1=a.body[0].body):((_=(b=a.body)==null?void 0:b[0])==null?void 0:_.type)==="first"&&(j=($=a.body)==null?void 0:$[1])!=null&&j.below&&(l1=a.body[1].below,p1=a.body[1].body)):l1&&l1.length>0&&(p1=a.body,(Lt=(Xt=a.body)==null?void 0:Xt[0])!=null&&Lt.above?(f1=a.body[0].above,p1=a.body[0].body):((Jr=(fr=a.body)==null?void 0:fr[0])==null?void 0:Jr.type)==="first"&&(qs=(Js=a.body)==null?void 0:Js[1])!=null&&qs.above&&(f1=a.body[1].above,p1=a.body[1].body)),(w1.svgAbove||f1)&&(w1.svgBelow||l1)?(i1+=`<munderover ${re(a.id,s)}>`,i1+=(zo=r1[w1.svgBody])!=null?zo:U(p1,s),i1+=(js=r1[w1.svgBelow])!=null?js:U(l1,s),i1+=(eu=r1[w1.svgAbove])!=null?eu:U(f1,s),i1+="</munderover>"):w1.svgAbove||f1?(i1+=`<mover ${re(a.id,s)}>`+((Oo=r1[w1.svgBody])!=null?Oo:U(p1,s)),i1+=(tu=r1[w1.svgAbove])!=null?tu:U(f1,s),i1+="</mover>"):(w1.svgBelow||l1)&&(i1+=`<munder ${re(a.id,s)}>`+((Bo=r1[w1.svgBody])!=null?Bo:U(p1,s)),i1+=(vu=r1[w1.svgBelow])!=null?vu:U(l1,s),i1+="</munder>");break;case"placeholder":i1+="?";break;case"mord":{if(i1=typeof a.value=="string"?a.value:d1,i1.length>0&&i1.startsWith("\\"))typeof a.value=="string"&&a.value.charCodeAt(0)>255?i1="&#x"+("000000"+a.value.charCodeAt(0).toString(16)).slice(-4)+";":typeof a.value=="string"&&(i1=a.value.charAt(0));else if(a.command==="\\char"){let N1=(t1=a.args)==null?void 0:t1[0];if(N1!==void 0&&"number"in N1){let L1=N1.number;typeof L1=="number"&&(i1="&#x"+("000000"+L1.toString(16)).slice(-4)+";")}}else typeof a.value=="string"?i1=a.value:(console.error("Did not expect this"),i1="");let O1=/\d/.test(i1)?"mn":"mi";i1=`<${O1}${re(a.id,s)}>${Os(i1)}</${O1}>`;break}case"mbin":case"mrel":case"minner":i1=Si(a,s);break;case"mpunct":i1='<mo separator="true"'+re(a.id,s)+">"+d1+"</mo>";break;case"mop":case"operator":case"extensible-symbol":a.value!==""&&(i1="<mo"+re(a.id,s)+">",i1+=d1==="\\operatorname"?a.body:d1||a.body,i1+="</mo>");break;case"box":let x1=a;i1='<menclose notation="box"',x1.backgroundcolor&&(i1+=' mathbackground="'+x1.backgroundcolor+'"'),i1+=re(a.id,s)+">"+U(a.body,s)+"</menclose>";break;case"spacing":i1+='<mspace width="'+((e1=a1[d1])!=null?e1:0)+'em"/>';break;case"enclose":let M1=a;i1='<menclose notation="';for(let O1 in M1.notation)Object.prototype.hasOwnProperty.call(M1.notation,O1)&&M1.notation[O1]&&(i1+=s1+O1,s1=" ");i1+=re(a.id,s)+'">'+U(a.body,s)+"</menclose>";break;case"prompt":i1='<menclose notation="roundexbox""">'+U(a.body,s)+"</menclose>";break;case"space":i1+="&nbsp;";break;case"subsup":break;case"phantom":break;case"composition":break;case"rule":break;case"chem":break;case"mopen":i1+=Si(a,s);break;case"mclose":i1+=Si(a,s);break;case"macro":{let O1=a.command+An(a.macroArgs);O1&&(i1+=`<mo ${re(a.id,s)}>${O1}</mo>`)}break;case"latexgroup":i1+=U(a.body,s);break;case"latex":i1+="<mtext"+re(a.id,s)+">"+a.value+"</mtext>";break;case"tooltip":i1+=U(a.body,s);break;case"text":i1+=`<mtext ${re(a.id,s)}x>${a.value}</mtext>`;break;default:if(a.command==="\\displaystyle")return`<mrow ${re(a.id,s)} displaystyle="true">${U(a.body,s)}</mrow>`;if(a.command==="\\textstyle")return`<mrow ${re(a.id,s)} displaystyle="false">${U(a.body,s)}</mrow>`;console.info("Unexpected element in conversion to MathML:",a)}return i1}var Cn={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","":"","":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},Nc={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function Kb(a){let s="";return a.startsWith("\\")&&(s=" "+a.replace("\\","")+" "),s}function Lo(a){let s=0;if(ee(a))for(let o of a)o.type!=="first"&&(s+=1);return s===1}function Pb(a){if(ee(a)){for(let s of a)if(s.type!=="first"&&s.id)return s.id.toString()}return""}function ph(a){let s="";if(ee(a))for(let o of a)o.type!=="first"&&typeof o.value=="string"&&(s+=o.value);return s}function Rb(a){return a?a.map(s=>s.value).join(""):""}function Ks(a){if(a&&!a.some(s=>s.type!=="first"&&s.value===void 0))return a.map(s=>s.value).join("")}function Fc(a){return`<emphasis>${a}</emphasis>`}function Ib(a,s){var o;let c="",h=!1,d=!1;for(let b=0;b<s.length;b++)s[b].type!=="first"&&(s[b].mode!=="text"&&(d=!1),b<s.length-2&&s[b].type==="mopen"&&s[b+2].type==="mclose"&&s[b+1].type==="mord"?(c+=" of ",c+=Fc(V(a,s[b+1])),b+=2):s[b].mode==="text"?d?c+=(o=s[b].value)!=null?o:" ":(d=!0,c+=V("text",s[b])):s[b].isDigit()?h?c+=s[b].asDigit():(h=!0,c+=V(a,s[b])):(h=!1,c+=V(a,s[b])));return c}function V(a,s){var o,c,h,d,b,_,$,j;function Xt(js){return globalThis.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(js)?` <say-as interpret-as="character">${js}</say-as>`:/[A-Z]/.test(js)?`capital <say-as interpret-as="character">${js.toLowerCase()}</say-as>`:js:/[a-z]/.test(js)?" '"+js.toUpperCase()+"'":/[A-Z]/.test(js)?" 'capital "+js.toUpperCase()+"'":js}if(!s)return"";if(ee(s))return Ib(a,s);let Lt="";if(s.id&&a==="math"&&(Lt+='<mark name="'+s.id.toString()+'"/>'),s.mode==="text")return Lt+s.value;let fr="",Jr="",Js="",qs=!1,{command:zo}=s;switch(zo){case"\\vec":return"vector "+V(a,s.body);case"\\acute":return V(a,s.body)+" acute";case"\\grave":return V(a,s.body)+" grave";case"\\dot":return"dot over"+V(a,s.body);case"\\ddot":return"double dot over"+V(a,s.body);case"\\mathring":return"ring over"+V(a,s.body);case"\\tilde":case"\\widetilde":return"tilde over"+V(a,s.body);case"\\bar":return V(a,s.body)+" bar";case"\\breve":return V(a,s.body)+" breve";case"\\check":case"\\widecheck":return"check over "+V(a,s.body);case"\\hat":case"\\widehat":return"hat over"+V(a,s.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+V(a,s.body);case"\\underarc":case"\\underparen":return"arc under "+V(a,s.body);case"\\mathop":return(o=Ks(s.body))!=null?o:V(a,s.body);case"\\mathit":return(c=Ks(s.body))!=null?c:V(a,s.body);case"\\mathrm":return(h=Ks(s.body))!=null?h:V(a,s.body);case"\\mathbb":return"blackboard"+((d=Ks(s.body))!=null?d:V(a,s.body))}switch(s.type){case"prompt":let js=s.body.length>1?'start input . <break time="500ms"/> '+V(a,s.body)+'. <break time="500ms"/> end input':"blank";Lt+=' <break time="300ms"/> '+js+'. <break time="700ms"/>'+((b=s.correctness)!=null?b:"")+' . <break time="700ms"/> ';break;case"array":let eu=s.rows,Oo=s.environmentName;if(Object.keys(Nc).includes(Oo)){Lt+=` begin ${Nc[Oo]} `;for(let vu=0;vu<eu.length;vu++){vu>0&&(Lt+=","),Lt+=` row ${vu+1} `;for(let t1=0;t1<eu[vu].length;t1++)t1>0&&(Lt+=","),Lt+=` column ${t1+1}: `,Lt+=V("math",eu[vu][t1])}Lt+=` end ${Nc[Oo]} `}break;case"group":zo==="\\ne"?Lt+=" not equal ":(zo==="\\not"&&(Lt+=" not "),Lt+=V("math",s.body));break;case"root":Lt+=V("math",s.body);break;case"genfrac":if(fr=V("math",s.above),Jr=V("math",s.below),Lo(s.above)&&Lo(s.below)){let vu={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[ph(s.above)+"/"+ph(s.below)];vu?Lt=vu:Lt+=fr+" over "+Jr}else Lt+=' the fraction <break time="150ms"/>'+fr+' over <break time="150ms"/>'+Jr+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(Js=V("math",s.body),s.hasEmptyBranch("above"))Lt+=Lo(s.body)?" the square root of "+Js+" , ":' the square root of <break time="200ms"/>'+Js+'. <break time="200ms"/> End square root';else{let vu=V("math",s.above);vu=vu.trim();let t1=vu.replace(/<mark([^/]*)\/>/g,"");t1==="3"?Lt+=' the cube root of <break time="200ms"/>'+Js+'. <break time="200ms"/> End cube root':t1==="n"?Lt+=' the nth root of <break time="200ms"/>'+Js+'. <break time="200ms"/> End root':Lt+=' the root with index: <break time="200ms"/>'+vu+', of <break time="200ms"/>'+Js+'. <break time="200ms"/> End root'}break;case"leftright":{let vu=s;Lt+=(_=vu.leftDelim?Cn[vu.leftDelim]:void 0)!=null?_:vu.leftDelim,Lt+=V("math",s.body),Lt+=($=vu.rightDelim?Cn[vu.rightDelim]:void 0)!=null?$:vu.rightDelim}break;case"rule":break;case"overunder":break;case"overlap":break;case"macro":let tu=zo.replace(/^\\/g,""),Bo=Bi()[tu];Bo!=null&&Bo.expand?Lt+=V("math",s.body):Lt+=`${tu} `;break;case"placeholder":Lt+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if(zo==="\\mathbin"||zo==="\\mathrel"||zo==="\\mathopen"||zo==="\\mathclose"||zo==="\\mathpunct"||zo==="\\mathord"||zo==="\\mathinner"){Lt=V(a,s.body);break}let vu=s.isDigit()?s.asDigit():s.value,t1=s.command;if((s.type==="delim"||s.type==="sizeddelim")&&(t1=s.value,vu=t1),a==="text")Lt+=vu;else{if(s.type==="mbin"&&(Lt+='<break time="150ms"/>'),vu){let e1=Cn[vu]||(t1?Cn[t1.trim()]:"");if(e1)Lt+=" "+e1;else{let r1=t1?Kb(t1.trim()):"";Lt+=r1||Xt(vu)}}else Lt+=V("math",s.body);s.type==="mbin"&&(Lt+='<break time="150ms"/>')}break}case"mop":case"operator":case"extensible-symbol":if(s.value!==""){let vu=s.command;if(vu==="\\sum")if(!s.hasEmptyBranch("superscript")&&!s.hasEmptyBranch("subscript")){let t1=V("math",s.superscript);t1=t1.trim();let e1=V("math",s.subscript);e1=e1.trim(),Lt+=' the summation from <break time="200ms"/>'+e1+'<break time="200ms"/> to  <break time="200ms"/>'+t1+'<break time="200ms"/> of <break time="150ms"/>',qs=!0}else if(s.hasEmptyBranch("subscript"))Lt+=" the summation of";else{let t1=V("math",s.subscript);t1=t1.trim(),Lt+=' the summation from <break time="200ms"/>'+t1+'<break time="200ms"/> of <break time="150ms"/>',qs=!0}else if(vu==="\\prod")if(!s.hasEmptyBranch("superscript")&&!s.hasEmptyBranch("subscript")){let t1=V("math",s.superscript);t1=t1.trim();let e1=V("math",s.subscript);e1=e1.trim(),Lt+=' the product from <break time="200ms"/>'+e1+'<break time="200ms"/> to <break time="200ms"/>'+t1+'<break time="200ms"/> of <break time="150ms"/>',qs=!0}else if(s.hasEmptyBranch("subscript"))Lt+=" the product  of ";else{let t1=V("math",s.subscript);t1=t1.trim(),Lt+=' the product from <break time="200ms"/>'+t1+'<break time="200ms"/> of <break time="150ms"/>',qs=!0}else if(vu==="\\int")if(!s.hasEmptyBranch("superscript")&&!s.hasEmptyBranch("subscript")){let t1=V("math",s.superscript);t1=t1.trim();let e1=V("math",s.subscript);e1=e1.trim(),Lt+=' the integral from <break time="200ms"/>'+Fc(e1)+'<break time="200ms"/> to <break time="200ms"/>'+Fc(t1)+' <break time="200ms"/> of ',qs=!0}else Lt+=' the integral of <break time="200ms"/> ';else if(vu==="\\operatorname"||vu==="\\operatorname*")Lt+=Rb(s.body)+" ";else if(typeof s.value=="string"){let t1=(j=Cn[s.value])!=null?j:s.command?Cn[s.command]:void 0;Lt+=t1||" "+s.value}else s.command&&(s.command==="\\mathop"?Lt+=V("math",s.body):Lt+=s.command.startsWith("\\")?" "+s.command.slice(1):" "+s.command)}break;case"enclose":Js=V("math",s.body),Lt+=" crossed out "+Js+". End crossed out.";break}if(!qs&&!s.hasEmptyBranch("superscript")){let js=V(a,s.superscript);js=js.trim();let eu=js.replace(/<[^>]*>/g,"");if(Lo(s.superscript)){if(a==="math"){let Oo=Pb(s.superscript);Oo&&(Lt+='<mark name="'+Oo+'"/>')}eu===""?Lt+=" prime ":eu==="2"?Lt+=" squared ":eu==="3"?Lt+=" cubed ":Number.isNaN(Number.parseInt(eu))?Lt+=" to the "+js+"; ":Lt+=' to the <say-as interpret-as="ordinal">'+eu+"</say-as> power; "}else Number.isNaN(Number.parseInt(eu))?Lt+=" raised to the "+js+"; ":Lt+=' raised to the <say-as interpret-as="ordinal">'+eu+"</say-as> power; "}if(!qs&&!s.hasEmptyBranch("subscript")){let js=V("math",s.subscript);js=js.trim(),Lt+=Lo(s.subscript)?" sub "+js:" subscript "+js+". End subscript. "}return Lt}function kt(a){var s,o;let c=globalThis.MathfieldElement;if(c.textToSpeechRules==="sre"&&("sre"in window||"SRE"in window)){let d=U(a);if(d){c.textToSpeechMarkup&&(c.textToSpeechRulesOptions=(s=c.textToSpeechRulesOptions)!=null?s:{},c.textToSpeechRulesOptions=g(p({},c.textToSpeechRulesOptions),{markup:c.textToSpeechMarkup}),c.textToSpeechRulesOptions.markup==="ssml"&&(c.textToSpeechRulesOptions=g(p({},c.textToSpeechRulesOptions),{markup:"ssml_step"})),c.textToSpeechRulesOptions=g(p({},c.textToSpeechRulesOptions),{rate:c.speechEngineRate}));let b=(o=window.SRE)!=null?o:globalThis.sre.System.getInstance();c.textToSpeechRulesOptions&&b.setupEngine(c.textToSpeechRulesOptions);let _="";try{_=b.toSpeech(d)}catch($){console.error("MathLive 0.108.2: `SRE.toSpeech()` runtime error",$)}return _}return""}let h=V("math",a);if(c.textToSpeechMarkup==="ssml"){let d="";c.speechEngineRate&&(d='<prosody rate="'+c.speechEngineRate+'">'),h='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+d+"<p><s>"+h+"</s></p>"+(d?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else c.textToSpeechMarkup==="mac"&&At()==="macos"?h=h.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):h=h.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return h}var Jt={"\\ne":"","\\neq":"","":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"},Ao={"\\pm":"+-","\\colon":" : ","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":" * ","\\ast":" ** ","\\star":" *** ","\\times":" * ","\\div":" -: ","\\ltimes":" |>< ","\\rtimes":" ><| ","\\bowtie":" |><| ","\\circ":"@"},Ps={"\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function zb(a){let s="";for(let o of a){let c=s[s.length-1];c!==void 0&&(/\d$/.test(c)&&/^\d/.test(o)||/[a-zA-Z]$/.test(c)&&/^[a-zA-Z]/.test(o))&&(s+=" "),s+=o}return s}function ce(a,s){var o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu;if(!a)return"";if(ee(a)){if(a.length===0)return"";if(a[0].mode==="latex")return a.map(i1=>ce(i1)).join("");if(a[0].mode==="text"){let i1=0,s1="";for(;((o=a[i1])==null?void 0:o.mode)==="text";)s1+=a[i1].body?ce(a[i1].body,s):a[i1].value,i1++;return s!=null&&s.plain?s1+ce(a.slice(i1),s):`"${s1}" ${ce(a.slice(i1))}`}let r1=0,a1=[];for(;((c=a[r1])==null?void 0:c.mode)==="math";){let i1="";for(;((h=a[r1])==null?void 0:h.type)==="mord"&&/\d/.test(a[r1].value);)i1+=a[r1++].value;i1?a1.push(i1):a1.push(ce(a[r1++],s))}return a1.push(ce(a.slice(r1),s)),zb(a1)}if(a.mode==="text")return s!=null&&s.plain?a.value:`"${a.value}"`;let Bo="",{command:vu}=a,t1;if(vu==="\\placeholder")return`(${ce(a.body,s)})`;let e1=y.serialize([a],{expandMacro:!1,defaultMode:"math"});switch(a.type){case"accent":let r1={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[vu];Bo=`${r1??""} ${ce(a.body,s)} `;break;case"first":return"";case"latexgroup":return a.body.map(i1=>i1.value).join("");case"group":case"root":Bo=(d=Jt[vu])!=null?d:ce(a.body,s);break;case"genfrac":{let i1=a;(i1.leftDelim||i1.rightDelim)&&(Bo=i1.leftDelim==="."||!i1.leftDelim?"{:":i1.leftDelim),i1.hasBarLine?(Bo+="(",Bo+=ce(i1.above,s),Bo+=")/(",Bo+=ce(i1.below,s),Bo+=")"):(Bo+="((",Bo+=ce(i1.above,s),Bo+=") choose (",Bo+=ce(i1.below,s),Bo+="))"),(i1.leftDelim||i1.rightDelim)&&(Bo+=i1.rightDelim==="."||!i1.rightDelim?"{:":i1.rightDelim)}break;case"surd":a.hasEmptyBranch("above")?Bo+=`sqrt(${ce(a.body,s)})`:Bo+=`root(${ce(a.above,s)})(${ce(a.body,s)})`;break;case"latex":Bo=a.value;break;case"leftright":{let i1=a,s1=i1.leftDelim;s1&&Ps[s1]&&(s1=Ps[s1]),Bo+=s1==="."||!s1?"{:":s1,Bo+=ce(i1.body,s);let c1=i1.matchingRightDelim();c1&&Ps[c1]&&(c1=Ps[c1]),Bo+=c1==="."||!c1?":}":c1}break;case"sizeddelim":case"delim":Bo=a.value;break;case"overlap":break;case"overunder":break;case"mord":if(Jt[e1])return Jt[e1];Bo=($=(_=(b=Jt[vu])!=null?b:vu)!=null?_:vu)!=null?$:typeof a.value=="string"?a.value:"",Bo.startsWith("\\")&&(Bo+=" "),t1=vu?vu.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,t1?Bo=String.fromCodePoint(Number.parseInt("0x"+t1[1])):Bo.length>0&&Bo.startsWith("\\")&&(Bo=typeof a.value=="string"?a.value.charAt(0):a.command),Bo=Nb(Bo,a.style);break;case"mbin":case"mrel":case"minner":Bo=(Lt=(Xt=(j=Jt[e1])!=null?j:Jt[vu])!=null?Xt:Ao[vu])!=null?Lt:a.value;break;case"mopen":case"mclose":Bo=a.value;break;case"mpunct":Bo=(fr=Ao[vu])!=null?fr:vu;break;case"mop":case"operator":case"extensible-symbol":a.value!==""&&(Ao[vu]?Bo=Ao[vu]:Bo=vu==="\\operatorname"?ce(a.body,s):(Jr=a.value)!=null?Jr:vu,Bo+=" ");break;case"array":let a1=a.environmentName;if(a.isMultiline)Bo=a.rows.map(i1=>i1.map(s1=>ce(s1,s)).join("")).join(`
`);else{let i1=(Js={bmatrix:["[","]"],"bmatrix*":["[","]"]}[a1])!=null?Js:["(",")"],s1=[],c1=a.rows;for(let m1 of c1){let l1=[];for(let f1 of m1)l1.push(ce(f1,s));s1.push(i1[0]+l1.join(",")+i1[1])}let h1=(qs={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[a1])!=null?qs:["(",")"];Bo=h1[0]+s1.join(",")+h1[1]}break;case"box":break;case"spacing":Bo=(js=(zo=Jt[e1])!=null?zo:Jt[vu])!=null?js:" ";break;case"enclose":Bo="("+ce(a.body,s)+")";break;case"space":Bo=" ";break;case"subsup":Bo="";break;case"macro":Bo=(tu=(Oo=(eu=Jt[e1])!=null?eu:Jt[vu])!=null?Oo:Ao[vu])!=null?tu:ce(a.body,s);break}if(!a.hasEmptyBranch("subscript")){Bo+="_";let r1=ce(a.subscript,s);Bo+=r1.length!==1?`(${r1})`:r1}if(!a.hasEmptyBranch("superscript")){Bo+="^";let r1=ce(a.superscript,s);Bo+=r1.length!==1?`(${r1})`:r1}return Bo}function Nb(a,s){if(!s)return a;let o=a;return s.variant==="double-struck"&&(o=`bbb "${o}"`),s.variant==="script"&&(o=`cc "${o}"`),s.variant==="fraktur"&&(o=`fr "${o}"`),s.variant==="sans-serif"&&(o=`sf "${o}"`),s.variant==="monospace"&&(o=`tt "${o}"`),s.variantStyle==="bold"&&(o=`bb "${o}"`),s.color?`color({${s.color}})(${o})`:o}function he(a,s){var o;let c=g(p({},Zn()),{renderPlaceholder:()=>new w(160,{maxFontSize:1})});if(s!=null&&s.letterShapeStyle&&(s==null?void 0:s.letterShapeStyle)!=="auto"&&(c.letterShapeStyle=s.letterShapeStyle),s!=null&&s.macros){let j=Oi(s==null?void 0:s.macros);c.getMacro=Xt=>Ki(Xt,j)}s!=null&&s.registers&&(c.registers=p(p({},c.registers),s.registers));let h=(o=s==null?void 0:s.defaultMode)!=null?o:"math",d="math",b="displaystyle";h==="inline-math"?b="textstyle":h==="math"?b="displaystyle":h==="text"&&(b="textstyle",d="text");let _=new B({from:c}),$=new y({type:"root",mode:d,body:ge(a,{context:_,parseMode:d,mathstyle:b})}).render(_);return $?(Tr(Vt($,_)),Dr($,{classes:"ML__latex"}).toMarkup()):""}function Rs(a,s={}){return U(ge(a,{parseMode:"math",args:()=>"",mathstyle:"displaystyle"}),s)}function Is(a){let s=ge(a,{parseMode:"math",mathstyle:"displaystyle"});return kt(s)}var Co;function zs(a){var s,o;if(!Co){let c=(s=globalThis[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:s.ComputeEngine;c?Co=new c:console.error(`MathLive 0.108.2: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`)}return(o=Co==null?void 0:Co.box(a).latex)!=null?o:""}function hh(a){return ir(a,{format:"ascii-math"})[1]}function Eo(a){if(typeof a=="string"){let s=Fb(a);if(!s)throw new Error(`Invalid color: ${a}`);return s}return"C"in a?Vb(a):"a"in a?fh(a):a}function ki(a){return a<0?0:a>255?255:Math.round(a)}function Fb(a){if(!a||a[0]!=="#")return;a=a.slice(1);let s;return a.length<=4?(s={r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16)},a.length===4&&(s.a=parseInt(a[3]+a[3],16)/255)):(s={r:parseInt(a[0]+a[1],16),g:parseInt(a[2]+a[3],16),b:parseInt(a[4]+a[5],16)},a.length===8&&(s.a=parseInt(a[6]+a[7],16)/255)),typeof(s==null?void 0:s.a)>"u"&&(s.a=1),s}function Hc(a){let[s,o,c]=[a.L,a.C,a.H],h=c*Math.PI/180,d={L:s,a:o*Math.cos(h),b:o*Math.sin(h)};return a.alpha!==void 0&&(d.alpha=a.alpha),d}function $b(a){let[s,o,c]=[a.L,a.a,a.b],h=Math.sqrt(o*o+c*c),d=Math.atan2(c,o)*180/Math.PI,b={L:s,C:h,H:d};return a.alpha!==void 0&&(b.alpha=a.alpha),b}function $c(a){let[s,o,c]=[a.L,a.a,a.b],h=Math.pow(.9999999984505198*s+.39633779217376786*o+.2158037580607588*c,3),d=Math.pow(1.00000000888176*s-.10556134232365635*o-.0638541747717059*c,3),b=Math.pow(s*1.000000054672411-.0894841820949657*o-1.2914855378640917*c,3),_=4.076741661347994*h-3.307711590408193*d+.230969928729428*b,$=-1.2684380040921763*h+2.6097574006633715*d-.3413193963102197*b,j=-.004196086541837188*h-.7034186144594493*d+1.7076147009309444*b,Xt=Lt=>{let fr=Math.abs(Lt);return fr<=.0031308?Lt*12.92:(Math.sign(Lt)||1)*(1.055*Math.pow(fr,1/2.4)-.055)};return[Xt(_),Xt($),Xt(j)]}function Vc(a){let[s,o,c]=a;return s>=0&&s<=1&&o>=0&&o<=1&&c>=0&&c<=1}function qc(a,s){let[o,c,h]=a;return o=ki(o*255),c=ki(c*255),h=ki(h*255),s!==void 0?{r:o,g:c,b:h,alpha:s}:{r:o,g:c,b:h}}function fh(a){let[s,o,c]=$c(a);if(Vc([s,o,c]))return qc([s,o,c],a.alpha);let h=$b(a);if(h.C=0,[s,o,c]=$c(Hc(h)),!Vc([s,o,c]))return qc([s,o,c],a.alpha);let d=0,b=a.L,_=(d+b)/2;h.C=_;let $=.36/Math.pow(2,12);for(;b-d>$;)_=(d+b)/2,h.C=_,[s,o,c]=$c(Hc(h)),Vc([s,o,c])?d=_:b=_;return qc([s,o,c],a.alpha)}function Vb(a){return fh(Hc(a))}function gh(a,s){let o=Eo(a),c=Eo(s),h=.56,d=.57,b=.62,_=.65,$=.022,j=1.414,Xt=.1,Lt=5e-4,fr=1.14,Jr=.027,Js=1.14,qs=.027;function zo(t1){return t1>=$?t1:t1+($-t1)**j}function js(t1){return(t1<0?-1:1)*Math.pow(Math.abs(t1),2.4)}let eu=zo(js(c.r/255)*.2126729+js(c.g/255)*.7151522+js(c.b/255)*.072175),Oo=zo(js(o.r/255)*.2126729+js(o.g/255)*.7151522+js(o.b/255)*.072175),tu,Bo,vu;return Math.abs(Oo-eu)<Lt?Bo=0:Oo>eu?(tu=Oo**h-eu**d,Bo=tu*fr):(tu=Oo**_-eu**b,Bo=tu*Js),Math.abs(Bo)<Xt?vu=0:Bo>0?vu=Bo-qs:vu=Bo+Jr,vu*100}function Wc(a,s,o){o!=null||(o="#fff"),s!=null||(s="#000");let c=gh(a,o),h=gh(a,s);return Math.abs(c)>Math.abs(h)?o:s}function bh(a){let s=Eo(a),o=((1<<24)+(ki(s.r)<<16)+(ki(s.g)<<8)+ki(s.b)).toString(16).slice(1);return s.alpha!==void 0&&s.alpha<1&&(o+=("00"+Math.round(s.alpha*255).toString(16)).slice(-2)),o[0]===o[1]&&o[2]===o[3]&&o[4]===o[5]&&o[6]===o[7]&&(o=o[0]+o[2]+o[4]+(s.alpha!==void 0&&s.alpha<1?o[6]:"")),"#"+o}function oe(a){let s=yh(a),o="";for(let c of s){if(typeof c.value!="string")return"";o+=c.value}return o}function yh(a){let s=a.model.selection.ranges;if(s.length!==1)return[];let o=a.model.getAtoms(s[0]);return o.length===1&&o[0].isRoot&&(o=o[0].children),o.filter(c=>c.type!=="first")}function qb(a,s){let o=yh(a);if(o.length!==1)return!1;let c=ts[s];return c?!!c.test(o[0].value):!1}function Hb(a){return[jc(a,"double-struck","mathbb","tooltip.blackboard"),jc(a,"fraktur","mathfrak","tooltip.fraktur"),jc(a,"calligraphic","mathcal","tooltip.caligraphic"),Jc(a,"up","mathrm","tooltip.roman-upright"),Jc(a,"bold","bm","tooltip.bold"),Jc(a,"italic","mathit","tooltip.italic")]}function Wb(a){return[{id:"accent-vec",class:"ML__center-menu",label:()=>he(`\\vec{${oe(a)}}`),visible:()=>oe(a).length===1,onMenuSelect:()=>a.insert("\\vec{#@}",{selectionMode:"item"})},{id:"accent-overrightarrow",class:"ML__center-menu",label:()=>he(`\\overrightarrow{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{id:"accent-overleftarrow",class:"ML__center-menu",label:()=>he(`\\overleftarrow{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{id:"accent-dot",class:"ML__center-menu",label:()=>he(`\\dot{${oe(a)}}`),visible:()=>oe(a).length===1,onMenuSelect:()=>a.insert("\\dot{#@}",{selectionMode:"item"})},{id:"accent-ddot",class:"ML__center-menu",label:()=>he(`\\ddot{${oe(a)}}`),visible:()=>oe(a).length===1,onMenuSelect:()=>a.insert("\\ddot{#@}",{selectionMode:"item"})},{id:"accent-bar",class:"ML__center-menu",label:()=>he(`\\bar{${oe(a)}}`),visible:()=>oe(a).length===1,onMenuSelect:()=>a.insert("\\bar{#@}",{selectionMode:"item"})},{id:"accent-overline",class:"ML__center-menu",label:()=>he(`\\overline{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\overline{#@}",{selectionMode:"item"})},{id:"accent-overgroup",class:"ML__center-menu",label:()=>he(`\\overgroup{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\overgroup{#@}",{selectionMode:"item"})},{id:"accent-overbrace",class:"ML__center-menu",label:()=>he(`\\overbrace{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\overbrace{#@}",{selectionMode:"item"})},{id:"accent-underline",class:"ML__center-menu",label:()=>he(`\\underline{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\underline{#@}",{selectionMode:"item"})},{id:"accent-undergroup",class:"ML__center-menu",label:()=>he(`\\undergroup{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\undergroup{#@}",{selectionMode:"item"})},{id:"accent-underbrace",class:"ML__center-menu",label:()=>he(`\\underbrace{${oe(a)}}`),visible:()=>oe(a).length>0,onMenuSelect:()=>a.insert("\\underbrace{#@}",{selectionMode:"item"})}]}function Ub(a){return[{id:"decoration-boxed",label:()=>he(`\\boxed{${a.getValue(a.model.selection)}}}`),onMenuSelect:()=>a.insert("\\boxed{#@}",{selectionMode:"item"})},{id:"decoration-red-box",label:()=>he(`\\bbox[5px, border: 2px solid red]{${a.getValue(a.model.selection)}}`),onMenuSelect:()=>a.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{id:"decoration-dashed-black-box",label:()=>he(`\\bbox[5px, border: 2px dashed black]{${a.getValue(a.model.selection)}}`),onMenuSelect:()=>a.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}]}function jb(a){let s=[];for(let o of Object.keys(Zt))s.push({id:`background-color-${o}`,class:(bh(Wc(Zt[o]))==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${Zt[o]} "></span>`,ariaLabel:()=>{var c;return(c=I(o))!=null?c:o},checked:()=>{var c;return(c={some:"mixed",all:!0}[a.queryStyle({backgroundColor:o})])!=null?c:!1},onMenuSelect:()=>a.applyStyle({backgroundColor:o},{operation:"toggle"})});return s}function Jb(a){let s=[];for(let o of Object.keys(Yt))s.push({id:`color-${o}`,class:(Wc(Yt[o])==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${Yt[o]} "></span>`,ariaLabel:()=>{var c;return(c=I(o))!=null?c:o},checked:()=>{var c;return(c={some:"mixed",all:!0}[a.queryStyle({color:o})])!=null?c:!1},onMenuSelect:()=>a.applyStyle({color:o},{operation:"toggle"})});return s}var Gc=class extends Sn{constructor(a,s,o,c){super(a,s),this.row=o,this.col=c}set active(a){let s=this.parentMenu.children;if(a)for(let o of s)o.element.classList.toggle("active",o.row<=this.row&&o.col<=this.col);else for(let o of s)o.element.classList.remove("active")}};function Gb(a){let s=[];for(let o=1;o<=5;o++)for(let c=1;c<=5;c++)s.push({id:`insert-matrix-${o}x${c}`,onCreate:(h,d)=>new Gc(h,d,o,c),label:"",tooltip:()=>I("tooltip.row-by-col",o,c),data:{row:o,col:c},onMenuSelect:()=>{a.insert(`\\begin{pmatrix}${Array(o).fill(Array(c).fill("#?").join(" & ")).join("\\\\")}\\end{pmatrix}`,{selectionMode:"item"})}});return s}function xh(a){return[{label:()=>I("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>a.executeCommand("addRowBefore"),keyboardShortcut:"shift+alt+[Return]",visible:()=>{if(!a.isSelectionEditable||!Li(a))return!1;let[s]=Wr(a),[o]=En(a);return s!==o}},{label:()=>I("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>a.executeCommand("addRowAfter"),keyboardShortcut:"alt+[Return]",visible:()=>{if(!a.isSelectionEditable||!Li(a))return!1;let[s]=Wr(a),[o]=En(a);return s!==o}},{label:()=>I("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>a.executeCommand("addColumnBefore"),visible:()=>{if(!a.isSelectionEditable||!Li(a))return!1;let[s,o]=Wr(a),[c,h]=En(a);return o!==h},keyboardShortcut:"shift+alt+[Tab]",enabled:()=>{let s=a.model.parentEnvironment;if(!s)return!1;let[o]=Uc(a);return o<s.maxColumns}},{label:()=>I("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>a.executeCommand("addColumnAfter"),keyboardShortcut:"alt+[Tab]",visible:()=>{if(!a.isSelectionEditable||!Li(a))return!1;let[s,o]=Wr(a),[c,h]=En(a);return o!==h}},{type:"divider"},{label:()=>I("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>a.executeCommand("removeRow"),enabled:()=>{let[s]=Wr(a),[o]=Uc(a);return o>s},visible:()=>{if(!a.isSelectionEditable||!Li(a))return!1;let[s]=Wr(a),[o]=En(a);return s!==o}},{label:()=>I("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>a.executeCommand("removeColumn"),enabled:()=>{let[s,o]=Wr(a),[c,h]=Uc(a);return h>o},visible:()=>{if(!a.isSelectionEditable||!Li(a))return!1;let[s,o]=Wr(a),[c,h]=En(a);return o!==h}},{type:"divider"},{label:()=>I("menu.borders"),visible:()=>(Xb(a)||Li(a))&&a.isSelectionEditable,submenu:[{label:"  ",id:"environment-no-border",onMenuSelect:()=>To(a,"matrix")},{label:"()",id:"environment-parentheses",onMenuSelect:()=>To(a,"pmatrix")},{label:"[]",id:"environment-brackets",onMenuSelect:()=>To(a,"bmatrix")},{label:"||",id:"environment-bar",onMenuSelect:()=>To(a,"vmatrix")},{label:"{}",id:"environment-braces",onMenuSelect:()=>To(a,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>I("menu.insert matrix"),id:"insert-matrix",visible:()=>a.isSelectionEditable,submenu:Gb(a),submenuClass:"insert-matrix-submenu",columnCount:5},{type:"divider"},{label:()=>I("menu.insert"),id:"insert",submenu:Yb(a)},{type:"divider"},{label:()=>I("menu.mode"),id:"mode",visible:()=>a.isSelectionEditable&&a.model.selectionIsCollapsed,submenu:[{label:()=>I("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{Xe(a,"accept-all"),a.executeCommand(["switchMode","math"])},checked:()=>a.model.mode==="math"},{label:()=>I("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{Xe(a,"accept-all"),a.executeCommand(["switchMode","text"])},checked:()=>a.model.mode==="text"},{label:()=>I("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>a.executeCommand(["switchMode","latex"]),checked:()=>a.model.mode==="latex"}]},{type:"divider"},{label:()=>I("menu.font-style"),id:"variant",visible:()=>a.isSelectionEditable,submenu:Hb(a),submenuClass:"variant-submenu"},{label:()=>I("menu.color"),id:"color",visible:()=>a.isSelectionEditable,submenu:Jb(a),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>I("menu.background-color"),id:"background-color",visible:()=>a.isSelectionEditable,submenu:jb(a),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>I("menu.accent"),id:"accent",visible:()=>a.isSelectionEditable,submenu:Wb(a),submenuClass:"variant-submenu"},{label:()=>I("menu.decoration"),id:"decoration",visible:()=>a.isSelectionEditable&&oe(a).length>0,submenu:Ub(a),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>I("menu.evaluate"),id:"ce-evaluate",visible:()=>a.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{let s=Zb(a);if(!s){a.model.announce("plonk");return}a.model.selectionIsCollapsed?(a.model.position=a.model.lastOffset,a.insert(`=${s}`,{insertionMode:"insertAfter",selectionMode:"item"})):a.insert(s,{insertionMode:"replaceSelection",selectionMode:"item"})}},{label:()=>I("menu.simplify"),id:"ce-simplify",visible:()=>a.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{var s,o;if(a.model.selectionIsCollapsed){let c=(s=a.expression)==null?void 0:s.simplify();if(a.model.position=a.model.lastOffset,!c){a.model.announce("plonk");return}a.insert(`=${c.latex}`,{insertionMode:"insertAfter",selectionMode:"item"})}else{let c=(o=globalThis.MathfieldElement.computeEngine)==null?void 0:o.parse(a.getValue(a.model.selection)).simplify();if(!c){a.model.announce("plonk");return}a.insert(c.latex,{insertionMode:"replaceSelection",selectionMode:"item"})}}},{label:()=>{var s;let o=globalThis.MathfieldElement.computeEngine;if(o===null)return"";let c=(s=a.expression)==null?void 0:s.unknowns[0];if(c){let h=o.box(c).latex;return I("menu.solve-for",he(h))}return I("menu.solve")},id:"ce-solve",visible:()=>{var s;return a.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null&&((s=a.expression)==null?void 0:s.unknowns.length)===1&&a.expression.unknowns[0]!=="Nothing"},onMenuSelect:()=>{var s;let o=a.expression,c=o==null?void 0:o.unknowns[0],h=(s=o.solve(c))==null?void 0:s.map(d=>{var b;return(b=d.simplify().latex)!=null?b:""});if(!h){a.model.announce("plonk");return}a.insert(`${c}=${h.length===1?h[0]:"\\left\\lbrace"+(h==null?void 0:h.join(", "))+"\\right\\rbrace"}`,{insertionMode:"replaceAll",selectionMode:"item"})}},{type:"divider"},{label:()=>I("menu.cut"),id:"cut",onMenuSelect:()=>a.executeCommand("cutToClipboard"),visible:()=>!a.options.readOnly&&a.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>I("menu.copy"),id:"copy",submenu:[{label:()=>I("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>q.copyToClipboard(a,"latex"),keyboardShortcut:"meta+C"},{label:()=>I("menu.copy-as-typst"),id:"copy-latex",onMenuSelect:()=>q.copyToClipboard(a,"typst")},{label:()=>I("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>q.copyToClipboard(a,"ascii-math")},{label:()=>I("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>q.copyToClipboard(a,"math-ml")}]},{label:()=>I("menu.paste"),id:"paste",onMenuSelect:()=>a.executeCommand("pasteFromClipboard"),visible:()=>a.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>I("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>a.executeCommand("selectAll")}]}function Li(a){var s,o;let c=(o=(s=a.model.parentEnvironment)==null?void 0:s.environmentName)!=null?o:"";return["array","matrix","pmatrix","bmatrix","vmatrix","Bmatrix","cases","dcases","rcases"].includes(c)}function Xb(a){let s=a.model.at(a.model.position);if(s.type!=="array")return!1;let o=s.environmentName;return["matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(o)}function Uc(a){var s;let o=(s=a.model.parentEnvironment)==null?void 0:s.rows;return o?[o.length,o.reduce((c,h)=>Math.max(c,h.length),0)]:[0,0]}function Wr(a){let s=a.model.parentEnvironment;return s?[s.minRows,s.minColumns]:[0,0]}function En(a){let s=a.model.parentEnvironment;return s?[s.maxRows,s.maxColumns]:[0,0]}function To(a,s){gi(a),a.flushInlineShortcutBuffer(),Mc(a.model,s),J(a)}function Zb(a){var s,o;let c;if(a.model.selectionIsCollapsed?c=(s=globalThis.MathfieldElement.computeEngine)==null?void 0:s.parse(a.getValue(),{canonical:!1}):c=(o=globalThis.MathfieldElement.computeEngine)==null?void 0:o.parse(a.getValue(a.model.selection),{canonical:!1}),!c)return"";let h=c.evaluate();return h.isSame(c)&&(h=c.N()),h.latex}function jc(a,s,o,c){return{id:`variant-${s}`,label:()=>{var h;return oe(a).length<12?he(`\\${o}{${oe(a)}}`):(h=I(c))!=null?h:c},class:"ML__xl",tooltip:()=>{var h;return(h=I(c))!=null?h:c},visible:()=>qb(a,s),checked:()=>{var h;return(h={some:"mixed",all:!0}[a.queryStyle({variant:s})])!=null?h:!1},onMenuSelect:()=>a.applyStyle({variant:s},{operation:"toggle"})}}function Jc(a,s,o,c){return{id:`variant-style-${s}`,label:()=>{var h;let d=oe(a);return d.length>0&&d.length<12?he(`\\${o}{${oe(a)}}`):(h=I(c))!=null?h:c},class:()=>{let h=oe(a);return h.length>0&&h.length<12?"ML__xl":""},tooltip:()=>{var h;return(h=I(c))!=null?h:c},visible:!0,checked:()=>{var h;return(h={some:"mixed",all:!0}[a.queryStyle({variantStyle:s})])!=null?h:!1},onMenuSelect:()=>a.applyStyle({variantStyle:s},{operation:"toggle"})}}function Yb(a){return[{label:()=>Ze("abs"),id:"insert-abs",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("|#?|")},{label:()=>Ze("nth-root"),id:"insert-nth-root",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\sqrt[#?]{#?}")},{label:()=>Ze("log-base"),id:"insert-log-base",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\log_{#?}{#?}")},{type:"heading",label:()=>I("menu.insert.heading-calculus")},{label:()=>Ze("derivative"),id:"insert-derivative",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\dfrac{\\mathrm{d}}{\\mathrm{d}x}#?\\bigm|_{x=#?}")},{label:()=>Ze("nth-derivative"),id:"insert-nth-derivative",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\dfrac{\\mathrm{d}^#?}{\\mathrm{d}x^#?}#?\\bigm|_{x=#?}")},{label:()=>Ze("integral"),id:"insert-integral",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\int_#?^#?#?\\,\\mathrm{d}#?")},{label:()=>Ze("sum"),id:"insert-sum",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\sum_#?^#?#?")},{label:()=>Ze("product"),id:"insert-product",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\prod_#?^#?#?")},{type:"heading",label:()=>I("menu.insert.heading-complex-numbers")},{label:()=>Ze("modulus"),id:"insert-modulus",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\lvert#?\\rvert")},{label:()=>Ze("argument"),id:"insert-argument",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\arg(#?)")},{label:()=>Ze("real-part"),id:"insert-real-part",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\Re(#?)")},{label:()=>Ze("imaginary-part"),id:"insert-imaginary-part",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\Im(#?)")},{label:()=>Ze("conjugate"),id:"insert-conjugate",visible:()=>a.isSelectionEditable,onMenuSelect:()=>a.insert("\\overline{#?}")}]}function Ze(a){return`<span class='ML__insert-template'> ${he(I(`menu.insert.${a}-template`))}</span><span class="ML__insert-label">${I(`menu.insert.${a}`)}</span>`}var Fe={"\\ne":"!=","\\neq":"!=","":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon.alt","\\varepsilon":"epsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta.alt","\\vartheta":"theta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi.alt","\\varphi":"phi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" #h(-1em/6) ","\\,":" thin ","\\:":" med ","\\>":" med ","\\;":" thick ","\\enskip":"space.en","\\enspace":"space.en","\\qquad":"space.quad space.quad","\\quad":"space.quad","\\infty":"infinity","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"emptyset","\\varnothing":"nothing","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega","\\vert":" | ","\\Vert":" || ","\\mid":" divides ","\\lbrack":" bracket.l ","\\rbrack":" bracket.r ","\\lbrace":" brace.l ","\\rbrace":" brace.r ","\\lparen":" paren.l ","\\rparen":" paren.r ","\\langle":" angle.l ","\\rangle":" angle.r ","\\differentialD":" dif ","\\diamond":" diamond.stroked.small ","\\square":" square.stroked.small ","\\lceil":" ceil.l ","\\rceil":" ceil.r ","\\lfloor":" floor.l ","\\rfloor":" floor.r ","\\aleph":" aleph ","\\bet":" bet ","\\gimel":" gimel ","\\dalet":" dalet ","\\mod":" mod ","\\equiv":" equiv ","\\subset":" subset ","\\supset":" supset ","\\subseteq":" subset.eq ","\\supseteq":" supset.eq ","\\subsetneq":" subset.neq ","\\supsetneq":" supset.neq ","\\supsetneqq":" supset.neq ","\\nsubset":" subset.not ","\\nsupset":" supset.not ","\\nsubseteq":" subset.eq.not ","\\nsupseteq":" supset.eq.not ","\\approx":" approx ","\\uparrow":" arrow.t ","\\downarrow":" arrow.b ","\\rightarrow":" arrow.r ","\\leftarrow":" arrow.l ","\\longmapsto":" mapsto.long ","\\longmapsfrom":" arrow.l.bar.long ","/":"\\/","&":"&"},vh={"[":" bracket.l ","]":" bracket.r ","{":" brace.l ","}":" brace.r ","(":" paren.l ",")":" paren.r ","<":" angle.l ",">":" angle.r ",".":""},_h={" bracket.l ":"["," bracket.r ":"]"," brace.l ":"{"," brace.r ":"}"," paren.l ":"("," paren.r ":")"," angle.l ":" angle.l "," angle.r ":" angle.r "},Do={"\\pm":"plus.minus","\\colon":" : ","\\sum":" sum ","\\prod":" product ","\\bigcap":" inter.big ","\\bigcup":" union.big ","\\int":" integral ","\\iint":" integral.double ","\\iiint":" integral.triple ","\\intop":" integral ","\\oint":" integral.cont ","\\oiint":" integral.surf ","\\oiiint":" integral.vol ","\\setminus":" without ","\\vdots":" without ","\\ddots":" dots.down ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" forall ","\\exists":" exists ","\\in":" in ","\\notin":" in.not ","\\mapsto":"|->","\\implies":"==>","\\iff":"<==>","\\cdot":" dot.op ","\\ast":" * ","\\star":" star.op ","\\times":" times ","\\div":" div ","\\ltimes":" times.l ","\\rtimes":" times.r ","\\bowtie":"  ","\\circ":" circle.stroked.small "},Qb={underarc:"underparen",underparen:"underparen",underbrace:"underbrace",underline:"underline",overarc:"overparen",overparen:"overparen",overbrace:"overbrace",overline:"overline",cancel:"cancel",displaystyle:"display",textstyle:"inline"},ey={longrightarrow:a=>`arrow.r.long^(${ae(a.above)})`,longleftarrow:a=>`arrow.l.long^(${ae(a.above)})`};function ty(a){let s="";for(let o of a){let c=s[s.length-1];c!==void 0&&(/\d$/.test(c)&&/^\d/.test(o)||/[a-zA-Z]$/.test(c)&&/^[a-zA-Z]/.test(o))&&(s+=" "),s+=o}return s}function ae(a){var s,o,c,h,d,b,_,$,j,Xt,Lt,fr,Jr,Js,qs,zo,js,eu,Oo,tu,Bo,vu,t1;if(!a)return"";if(ee(a)){if(a.length===0)return"";if(a[0].mode==="latex")return a.map(h1=>ae(h1)).join("");if(a[0].mode==="text"){let h1=0,m1="";for(;((s=a[h1])==null?void 0:s.mode)==="text";)m1+=a[h1].body?ae(a[h1].body):a[h1].value,h1++;return` "${m1}" ${ae(a.slice(h1))}`}let s1=0,c1=[];for(;((o=a[s1])==null?void 0:o.mode)==="math";){let h1="";for(;((c=a[s1])==null?void 0:c.type)==="mord"&&/\d/.test(a[s1].value);)h1+=a[s1++].value;h1?c1.push(h1):c1.push(ae(a[s1++]))}return c1.push(ae(a.slice(s1))),ty(c1)}if(a.mode==="text")return`"${a.value}"`;let e1="",{command:r1}=a,a1;if(r1==="\\placeholder")return`"${ae(a.body)}"`;let i1=y.serialize([a],{expandMacro:!0,defaultMode:"math"});switch(a.type){case"accent":let s1={"\\vec":"arrow","\\dot":"dot","\\ddot":"dot.double","\\bar":"overline","\\hat":"hat","\\acute":"acute","\\grave":"grave","\\tilde":"tilde","\\breve":"breve","\\check":"caron"}[r1];e1=`${s1??""}(${ae(a.body)}) `;break;case"first":return"";case"latexgroup":return a.body.map(h1=>h1.value).join("");case"group":case"root":e1=(h=Fe[r1])!=null?h:ae(a.body);break;case"genfrac":{let h1=a;h1.hasBarLine?(e1+="(",e1+=ae(h1.above),e1+=")/(",e1+=ae(h1.below),e1+=")"):e1+=`binom(${ae(h1.above)}, ${ae(h1.below)})`}break;case"surd":a.hasEmptyBranch("above")?e1+=`sqrt(${ae(a.body)})`:e1+=`root(${ae(a.above)}, ${ae(a.body)})`;break;case"latex":e1=a.value;break;case"leftright":{let h1=a,m1=h1.leftDelim;m1&&Fe[m1]&&(m1=Fe[m1]);let l1=h1.matchingRightDelim();l1&&Fe[l1]&&(l1=Fe[l1]),m1&&(m1=(d=vh[m1])!=null?d:m1),l1&&(l1=(b=vh[l1])!=null?b:l1),m1&&l1?e1=`lr(${(_=_h[m1])!=null?_:m1}${ae(h1.body)}${($=_h[l1])!=null?$:l1})`:e1=`lr(${m1}${ae(h1.body)}${l1})`}break;case"sizeddelim":case"delim":e1=a.value;break;case"overlap":break;case"mord":if(Fe[i1])return Fe[i1];e1=(Lt=(Xt=(j=Fe[r1])!=null?j:r1)!=null?Xt:r1)!=null?Lt:typeof a.value=="string"?a.value:"",e1.startsWith("\\")&&(e1+=" "),a1=r1?r1.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,a1?e1=String.fromCodePoint(Number.parseInt("0x"+a1[1])):e1.length>0&&e1.startsWith("\\")&&(e1=typeof a.value=="string"?a.value.charAt(0):a.command),e1=ry(e1,a.style),e1=` ${e1} `;break;case"mbin":case"mrel":case"minner":e1=(Js=(Jr=(fr=Fe[i1])!=null?fr:Fe[r1])!=null?Jr:Do[r1])!=null?Js:a.value;break;case"mopen":case"mclose":e1=(qs=Fe[i1])!=null?qs:a.value;break;case"mpunct":e1=(zo=Do[r1])!=null?zo:r1;break;case"mop":case"operator":case"extensible-symbol":a.value!==""&&(Do[r1]?e1=Do[r1]:e1=r1==="\\operatorname"?ae(a.body):(js=a.value)!=null?js:r1,e1+=" ");break;case"array":let c1=a.environmentName;if(a.isMultiline)e1=a.rows.map(h1=>h1.map(m1=>ae(m1)).join("")).join(`
`);else{let h1=a.rows,m1=h1.map(f1=>f1.map(ae).join(", ")),l1={pmatrix:'"("',bmatrix:'"["',"bmatrix*":'"["',Bmatrix:'"{"',vmatrix:'"|"',matrix:"#none"}[c1];l1?e1=`mat(delim: ${l1}, ${m1.join(" ; ")})`:c1==="cases"||c1==="rcases"?e1=`cases(reverse: #${c1==="rcases"}, ${m1.join(", ")})`:c1==="aligned"?e1=h1.map(f1=>f1.map(ae).join(" & ")).join(" \\ "):e1=h1.map(f1=>f1.map(ae).join("")).join("")}break;case"box":break;case"spacing":e1=(Oo=(eu=Fe[i1])!=null?eu:Fe[r1])!=null?Oo:" ";break;case"space":e1=" ";break;case"subsup":e1=(tu=a.leftSibling)!=null&&tu.value?"":'""';break;case"macro":e1=(t1=(vu=(Bo=Fe[i1])!=null?Bo:Fe[r1])!=null?vu:Do[r1])!=null?t1:ae(a.body);break}if(!e1){let s1=Qb[a.command.slice(1)];s1&&(e1=`${s1}(${ae(a.body)})`)}if(!e1){let s1=ey[a.command.slice(1)];s1&&(e1=s1(a))}if(!a.hasEmptyBranch("subscript")){e1+="_";let s1=ae(a.subscript);e1+=s1.length!==1?`(${s1})`:s1}if(!a.hasEmptyBranch("superscript")){e1+="^";let s1=ae(a.superscript);e1+=s1.length!==1?`(${s1})`:s1}return e1}function ry(a,s){if(!s)return a;let o=a;return s.variant==="double-struck"&&(o=`bb(${o})`),s.variant==="script"&&(o=`cal(${o})`),s.variant==="fraktur"&&(o=`frak(${o})`),s.variant==="sans-serif"&&(o=`sans(${o})`),s.variant==="monospace"&&(o=`mono(${o})`),s.variantStyle==="bold"&&(o=`bold(${o})`),o}function Ur(a,s){return typeof a=="string"?a+kt(s):kt(a)}function Xc(a){var s;let o;if(a.parent.type==="prompt")a.parentBranch==="body"&&(o="prompt");else if(a.parentBranch==="body"){if(a.type==="first"&&(a.parent.type==="root"?o="mathfield":a.parent.type==="surd"?o="radicand":a.parent.type==="genfrac"?o="fraction":a.parent.type==="sizeddelim"&&(o="delimiter"),o))return o;a.type==="subsup"?a.superscript&&a.subscript?o="superscript and subscript":a.superscript?o="superscript":a.subscript&&(o="subscript"):a.type&&(o=(s={accent:"accented",array:"array",box:"box",chem:"chemical formula",delim:"delimiter",enclose:"cross out","extensible-symbol":"extensible symbol",error:"error",first:"first",genfrac:"fraction",group:"group",latex:"LaTeX",leftright:"delimiter",line:"line",subsup:"subscript-superscript",operator:"operator",overunder:"over-under",placeholder:"placeholder",rule:"rule",sizeddelim:"delimiter",space:"space",spacing:"spacing",surd:"square root",text:"text",prompt:"prompt",root:"math field",mop:"operator"}[a.type])!=null?s:"parent")}else if(a.parent.type==="genfrac"){if(a.parentBranch==="above")return"numerator";if(a.parentBranch==="below")return"denominator"}else a.parent.type==="surd"?a.parentBranch==="above"&&(o="index"):a.parentBranch==="superscript"?o="superscript":a.parentBranch==="subscript"&&(o="subscript");return o??"parent"}function Mh(a,s,o,c){let h="";if(s==="plonk"){globalThis.MathfieldElement.playSound("plonk"),a.flushInlineShortcutBuffer();return}if(s==="delete")h=Ur("deleted: ",c);else if(s==="focus"||s.includes("move"))h=iy(a.model,o),h+=ny(a.model);else if(s==="replacement")h=Ur(a.model.at(a.model.position));else if(s==="line"){let d=Ur(a.model.root);a.keyboardDelegate.setAriaLabel(d)}else h=c?Ur(s+" ",c):s;if(h){let d=a.ariaLiveText.textContent.includes("")?"  ":"  ";a.ariaLiveText.textContent=h+d}}function iy(a,s){if(Number.isNaN(s))return"";let o=a.at(s);if(!o||o.treeDepth<=a.at(a.position).treeDepth)return"";let c="",h=o.parent,d=a.at(a.position).parent;for(;h!==a.root&&h!==d;)c+=`out of ${Xc(h)};`,h=h.parent;return c}function ny(a){if(!a.selectionIsCollapsed)return`selected: ${Ur(a.getAtoms(a.selection))}`;let s="",o=a.at(a.position);if(o.isFirstSibling&&(s=`start of ${Xc(o)}: `),o.isLastSibling){if(!o.isFirstSibling){if(!o.parent.parent)return`${Ur(o)}; end of mathfield`;s=`${Ur(o)}; end of ${Xc(o)}`}}else s+=Ur(o);return s}var Fs=class{constructor(a,s,o){this.mathfield=a,this.mode=s,this.silenceNotifications=!1,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=o}dispose(){this.mathfield=void 0}getState(){let a={ranges:[...this._selection.ranges]};return this.selection.direction&&this.selection.direction!=="none"&&(a.direction=this.selection.direction),{content:this.root.toJson(),selection:a,mode:this.mode}}setState(a,s){var o;let c=this.silenceNotifications;this.silenceNotifications=(o=s==null?void 0:s.silenceNotifications)!=null?o:!0;let h={};if((s==null?void 0:s.type)==="undo"&&(h={inputType:"historyUndo"}),(s==null?void 0:s.type)==="redo"&&(h={inputType:"historyRedo"}),this.contentWillChange(h)){let d=this.silenceNotifications;this.silenceNotifications=!0,this.mode=a.mode,this.root=bt(a.content),this.selection=a.selection,this.silenceNotifications=d,this.contentDidChange(h),this.selectionDidChange()}this.silenceNotifications=c}get atoms(){return this.root.children}get selection(){return this._selection}set selection(a){this.setSelection(a)}setSelection(a,s){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0,content:!0},()=>{var o,c,h,d;let b=this.normalizeSelection(a,s);if(b===void 0)throw new TypeError("Invalid selection");if(b.ranges.length===1&&b.ranges[0][0]===b.ranges[0][1]){let fr=b.ranges[0][0];if(!this.mathfield.dirty&&!((o=this.at(fr))!=null&&o.parentPrompt)&&this.mathfield.hasEditablePrompts){if((c=this.at(fr-1))!=null&&c.parentPrompt){this._anchor=this.normalizeOffset(fr-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}if((h=this.at(fr+1))!=null&&h.parentPrompt){this._anchor=this.normalizeOffset(fr+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]};return}this._anchor=fr,this._position=fr,this._selection=b;return}let _=de(b);_=oy(this,_),b.direction==="backward"?[this._position,this._anchor]=_:[this._anchor,this._position]=_;let $=_[0]+1;for(;$<=this.lastOffset&&((d=this.at($))==null?void 0:d.type)==="first"&&$<_[1];)$+=1;let j=$<=this.lastOffset?this.at($):this.at(_[1]),Xt=this.at(_[1]),Lt=y.commonAncestor(j,Xt);(Lt==null?void 0:Lt.type)==="array"&&j.parent===Lt&&Xt.parent===Lt?this._selection={ranges:[_],direction:b.direction}:this._selection={ranges:[_],direction:b.direction},this._position>=0&&this._position<=this.lastOffset})}setPositionHandlingPlaceholder(a){var s;let o=this.at(a);(o==null?void 0:o.type)==="placeholder"?this.setSelection(a-1,a):((s=o==null?void 0:o.rightSibling)==null?void 0:s.type)==="placeholder"?this.setSelection(a,a+1):this.position=a,o instanceof pe&&o.isSuggestion&&(o.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(a){this.setSelection(a,a)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return Math.abs(this._anchor-this._position)===1?this.at(Math.max(this._anchor,this._position)).type==="placeholder":!1}collapseSelection(a="forward"){return this._anchor===this._position?!1:(a==="backward"?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(a){return this.atoms[a]}offsetOf(a){return this.atoms.indexOf(a)}getSiblingsRange(a){let s=this.at(a),{parent:o}=s;if(!o)return[0,this.lastOffset];let c=s.parent.branch(s.parentBranch);return[this.offsetOf(c[0]),this.offsetOf(c[c.length-1])]}getBranchRange(a,s){let o=this.at(a).branch(s);return[this.offsetOf(o[0]),this.offsetOf(o[o.length-1])]}getCellRange(a){var s,o;this.getParentCell(a);let c=this.at(a);if(c){for(;c&&((s=c.parent)==null?void 0:s.type)!=="array";)c=c.parent;if(((o=c==null?void 0:c.parent)==null?void 0:o.type)==="array")return[this.offsetOf(c.firstSibling),this.offsetOf(c.lastSibling)]}}getAtoms(a,s,o){let c=o??{};if(Xi(a)){if(c=s??{},a.ranges.length>1)return a.ranges.reduce((Lt,fr)=>[...Lt,...this.getAtoms(fr,c)],[]);a=a.ranges[0]}let h,d;if(Rt(a)){if(h=a,!Rt(s))return[];d=s}else[h,d]=a,Object.keys(c).length===0&&(c=s??{});if(!Number.isFinite(h))return[];c.includeChildren===void 0&&(c.includeChildren=!1),h<0&&(h=this.lastOffset-h+1),d<0&&(d=this.lastOffset+d+1);let b=Math.min(h,d),_=Math.max(h,d),$=b===0?0:b+1,j=_;if(!c.includeChildren&&$===1&&j===this.lastOffset)return[this.root];let Xt=[];for(let Lt=$;Lt<=j;Lt++){let fr=this.atoms[Lt];wh(this,fr,$,j,c.includeFirstAtoms)&&Xt.push(fr)}return c.includeChildren||(Xt=Xt.filter(Lt=>{let fr=!1,{parent:Jr}=Lt;for(;Jr&&!fr;)fr=wh(this,Jr,$,j,c.includeFirstAtoms),Jr=Jr.parent;return!fr})),Xt}findAtom(a,s=0,o="forward"){let c,h=this.lastOffset;if(o==="forward"){for(let d=s;d<=h;d++)if(c=this.atoms[d],a(c))return c;for(let d=0;d<s;d++)if(c=this.atoms[d],a(c))return c;return}for(let d=s;d>=0;d--)if(c=this.atoms[d],a(c))return c;for(let d=h;d>s;d--)if(c=this.atoms[d],a(c))return c}extractAtoms(a){var s;let o=this.getAtoms(a);o.length===1&&!o[0].parent&&o[0].isRoot&&(o[0]instanceof z?o=o[0].rows.flatMap(c=>c.flatMap(h=>h)):o=[...(s=o[0].body)!=null?s:o[0].children],o=o.filter(c=>c.type!=="first"));for(let c of o)c.parent.removeChild(c);return o}deleteAtoms(a){if(a!=null||(a=[0,-1]),this.extractAtoms(a),a[0]===0&&a[1]===-1&&this.root instanceof z)for(;this.root.rowCount>1;)this.root.removeRow(1);this.position=a[0]}atomToString(a,s){let o=s??"latex";if(o.startsWith("latex"))return y.serialize([a],{expandMacro:o==="latex-expanded",skipStyles:o==="latex-unstyled",skipPlaceholders:o==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode});if(o==="math-ml")return U(a);if(o==="spoken")return kt(a);if(o==="spoken-text"){let c=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";let h=kt(a);return globalThis.MathfieldElement.textToSpeechMarkup=c,h}if(o==="spoken-ssml"||o==="spoken-ssml-with-highlighting"){let c=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";let h=kt(a);return globalThis.MathfieldElement.textToSpeechMarkup=c,h}return o==="typst"?ae(a):o==="plain-text"?ce(a,{plain:!0}):o==="ascii-math"?ce(a):(console.error(`MathLive 0.108.2: Unexpected format "${o}`),"")}getValue(a,s,o){if(a===void 0)return this.atomToString(this.root,"latex");if(typeof a=="string"&&a!=="math-json")return this.atomToString(this.root,a);let c,h;if(Rt(a)&&Rt(s)?(c=[this.normalizeRange([a,s])],h=o):si(a)?(c=[this.normalizeRange(a)],h=s):Xi(a)?(c=a.ranges,h=s):(c=[this.normalizeRange([0,-1])],h=a),h!=null||(h="latex"),h==="math-json"){if(!globalThis.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://esm.run/@cortex-js/compute-engine"`),'["Error", "compute-engine-not-available"]';let d=this.getValue({ranges:c},"latex-unstyled");try{let b=globalThis.MathfieldElement.computeEngine.parse(d);return JSON.stringify(b.json)}catch(b){return JSON.stringify(["Error",`'${b.toString()}'`])}}if(h.startsWith("latex")){let d={expandMacro:h==="latex-expanded",skipStyles:h==="latex-unstyled",skipPlaceholders:h==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode};return P(c.map(b=>y.serialize(this.getAtoms(b),d)))}return c.map(d=>this.getAtoms(d).map(b=>this.atomToString(b,h)).join("")).join("")}extendSelectionTo(a,s){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0},()=>{let o=this.normalizeRange([a,s]),[c,h]=o,d=new Set(["genfrac","subsup","accent","box","overlap","overunder"]),{parent:b}=this.at(h);if(b!=null&&b.type&&d.has(b.type))for(;b!=null&&b.type&&d.has(b.type)&&Ns(this,b,[c,h]);)h=this.offsetOf(b),b=b.parent;for(b=this.at(c).parent;b!=null&&b.type&&d.has(b.type)&&Ns(this,b,[c,h]);)c=this.offsetOf(b.leftSibling),b=b.parent;if(b=this.at(h).parent,b!=null&&b.type&&d.has(b.type))for(;b!=null&&b.type&&d.has(b.type)&&Ns(this,b,[c,h]);)h=this.offsetOf(b),b=b.parent;this._position=this.normalizeOffset(s),this._selection={ranges:[[c,h]],direction:"none"}})}announce(a,s,o=[]){var c,h;((h=(c=this.mathfield.host)==null?void 0:c.dispatchEvent(new CustomEvent("announce",{detail:{command:a,previousPosition:s,atoms:o},cancelable:!0,bubbles:!0,composed:!0})))==null||h)&&Mh(this.mathfield,a,s,o)}deferNotifications(a,s){let o=this._selection,c=this._anchor,h=this._position,d=this.silenceNotifications;this.silenceNotifications=!0;let b=this.root.changeCounter;s(),this.silenceNotifications=d;let _=c!==this._anchor||h!==this._position||O0(this._selection,o)==="different";a.selection&&_&&this.selectionDidChange();let $=this.root.changeCounter!==b;return a.content&&$&&this.contentDidChange({inputType:a.type}),$||_}normalizeOffset(a){return a>0?a=Math.min(a,this.lastOffset):a<0&&(a=this.lastOffset+a+1),a}normalizeRange(a){let[s,o]=a;return s=this.normalizeOffset(s),o=this.normalizeOffset(o),s<o?[s,o]:[o,s]}normalizeSelection(a,s){var o;let c;if(Rt(a)){let h=this.normalizeOffset(a);if(Rt(s)){let d=this.normalizeOffset(s);c=h<=d?{ranges:[[h,d]],direction:"none"}:{ranges:[[d,h]],direction:"backward"}}else c={ranges:[[h,h]],direction:"none"}}else if(si(a)){let h=this.normalizeOffset(a[0]),d=this.normalizeOffset(a[1]);c=h<=d?{ranges:[[h,d]],direction:"none"}:{ranges:[[d,h]],direction:"backward"}}else Xi(a)&&(c={ranges:a.ranges.map(h=>this.normalizeRange(h)),direction:(o=a.direction)!=null?o:"none"});return c}get parentEnvironment(){let a=this.at(this.position).parent;if(a){for(;a.parent&&a.type!=="array";)a=a.parent;if(a.type==="array")return a}}get parentCell(){return this.getParentCell(this.position)}getParentCell(a){var s,o;let c=this.at(a);if(c){for(;c&&((s=c.parent)==null?void 0:s.type)!=="array";)c=c.parent;if(((o=c==null?void 0:c.parent)==null?void 0:o.type)==="array")return c.parentBranch}}contentWillChange(a={}){if(this.silenceNotifications||!this.mathfield)return!0;let s=this.silenceNotifications;this.silenceNotifications=!0;let o=this.mathfield.onContentWillChange(a);return this.silenceNotifications=s,o}contentDidChange(a){var s;if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ut(this.mathfield)),this.silenceNotifications||!((s=this.mathfield)!=null&&s.host))return;let o=this.silenceNotifications;this.silenceNotifications=!0,setTimeout(()=>{var c;!this.mathfield||!it(this.mathfield)||!this.mathfield.host||this.mathfield.host.dispatchEvent(new InputEvent("input",g(p({},a),{data:a.data?a.data:(c=a.inputType)!=null?c:"",bubbles:!0,composed:!0})))},0),this.silenceNotifications=o}selectionDidChange(){if(!this.mathfield)return;let a=this.silenceNotifications;a||(this.silenceNotifications=!0,this.mathfield.onSelectionDidChange()),this.silenceNotifications=a}};function wh(a,s,o,c,h){let d=a.offsetOf(s);if(d<o||d>c)return!1;if(!s.hasChildren)return!0;let b=h?s.firstChild:Sh(s);if(!b)return!1;let _=h?s.lastChild:kh(s);if(!_)return!1;let $=a.offsetOf(b);if($>=o&&$<=c){let j=a.offsetOf(_);if(j>=o&&j<=c)return!0}return!1}function Ns(a,s,o){if(!(s!=null&&s.hasChildren))return!1;let[c,h]=o,d=Sh(s);if(!d)return!1;let b=kh(s);if(!b)return!1;let _=a.offsetOf(d),$=a.offsetOf(b);return _>=c&&_<=h&&$>=_&&$<=h}function oy(a,s){let[o,c]=s,h=c+1;if(h>a.lastOffset)return s;let d=a.at(h);return ay(a,d,o,c)&&(c=a.offsetOf(d)),[o,c]}function ay(a,s,o,c){if((s==null?void 0:s.type)!=="subsup"||!Ns(a,s,[o,c]))return!1;let h=s.leftSibling;if(!h)return!1;let d=a.offsetOf(h);return d>o&&d<=c}function Sh(a){for(let s of a.children)if(s.type!=="first")return s}function kh(a){let{children:s}=a;for(let o=s.length-1;o>=0;o--)if(s[o].type!=="first")return s[o]}fe({deleteAll:a=>a.contentWillChange({inputType:"deleteContent"})&&at(a,[0,-1],"deleteContent"),deleteForward:a=>Rp(a),deleteBackward:a=>Pp(a),deleteNextWord:a=>a.contentWillChange({inputType:"deleteWordForward"})&&Mt(a,"forward",{delete:!0}),deletePreviousWord:a=>a.contentWillChange({inputType:"deleteWordBackward"})&&Mt(a,"backward",{delete:!0}),deleteToGroupStart:a=>{if(!a.contentWillChange({inputType:"deleteSoftLineBackward"}))return!1;let s=a.offsetOf(a.at(a.position).firstSibling);return s===a.position?(a.announce("plonk"),!1):(a.deferNotifications({content:!0,selection:!0,type:"deleteSoftLineBackward"},()=>a.deleteAtoms([a.anchor,s])),a.position=s,!0)},deleteToGroupEnd:a=>{if(!a.contentWillChange({inputType:"deleteSoftLineForward"}))return!1;let s=a.offsetOf(a.at(a.position).lastSibling);return s===a.position?(a.announce("plonk"),!1):(a.deferNotifications({content:!0,selection:!0,type:"deleteSoftLineForward"},()=>a.deleteAtoms([a.anchor,s])),!0)},deleteToMathFieldStart:a=>a.contentWillChange({inputType:"deleteHardLineBackward"})&&at(a,[a.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:a=>a.contentWillChange({inputType:"deleteHardLineForward"})&&at(a,[a.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0});var sy=`<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="${I("tooltip.toggle virtual keyboard")}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`,ly=`<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="${I("tooltip.menu")}"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>`,$s=class Ev{constructor(s,o){this.focusBlurInProgress=!1,this.programmaticFocusInProgress=!1,this.connectedToVirtualKeyboard=!1;var c,h;this.options=p(g(p({},_n()),{macros:Bi(),registers:Na()}),vn(o)),this.eventController=new AbortController;let d=this.eventController.signal;o.eventSink&&(this.host=o.eventSink),this.element=s,s.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.scientificNotationTimer=0,this.defaultStyle={},this.styleBias="left",this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let b=(h=(c=o.value)!=null?c:this.element.textContent)!=null?h:"";b=b.trim();let _=xc(this.options),$=ge(b,{context:this.context}),j;$.length===1&&$[0].isRoot?j=$[0]:j=new y({type:"root",mode:_,body:$}),this.model=new Fs(this,_,j),this.undoManager=new gs(this.model);let Xt=[];if(Xt.push("<span contenteditable=true role=textbox aria-autocomplete=none aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),Xt.push('<span part=container class=ML__container  style="visibility:hidden">'),Xt.push("<span part=content class=ML__content>"),Xt.push(mc(this)),Xt.push("</span>"),Xt.push("<div class=ML__toggles>"),window.mathVirtualKeyboard&&(Xt.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'} data-l10n-tooltip="tooltip.toggle virtual keyboard">`),Xt.push(sy),Xt.push("</div>")),Xt.push('<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">'),Xt.push(ly),Xt.push("</div>"),Xt.push("</div>"),Xt.push("</span>"),Xt.push("<span class=ML__sr-only>"),Xt.push("<span role=status aria-live=assertive aria-atomic=true></span>"),Xt.push("</span>"),this.element.innerHTML=globalThis.MathfieldElement.createHTML(Xt.join("")),!this.element.children){console.error("%cMathLive 0.108.2: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this._l10Subscription=F.subscribe(()=>F.update(this.element)),F.update(this.element),this.container=this.element.querySelector("[part=container]"),this.field=this.container.querySelector("[part=content]"),this.field.addEventListener("click",Js=>Js.stopImmediatePropagation(),{capture:!1,signal:d}),this.field.addEventListener("wheel",this,{passive:!1,signal:d});let Lt=this.element;if("PointerEvent"in window?Lt.addEventListener("pointerdown",this,{signal:d}):Lt.addEventListener("mousedown",this,{signal:d}),this.host){let Js=qs=>{qs.target===this.host&&this.handleEvent(qs)};"PointerEvent"in window?this.host.addEventListener("pointerdown",Js,{signal:d}):this.host.addEventListener("mousedown",Js,{signal:d})}let fr=this.element.querySelector("[part=virtual-keyboard-toggle]");fr==null||fr.addEventListener("pointerdown",Js=>{Js.currentTarget===fr&&(window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(Ut(this))),Js.preventDefault(),Js.stopPropagation())},{signal:d}),this.field.addEventListener("contextmenu",this,{signal:d});let Jr=this.element.querySelector("[part=menu-toggle]");Jr==null||Jr.addEventListener("pointerdown",Js=>{if(Js.currentTarget!==Jr)return;let qs=this.menu;if(qs.state!=="closed")return;this.element.classList.add("tracking");let zo=Jr.getBoundingClientRect();qs.modifiers=qt(Js),qs.show({target:Jr,location:{x:zo.left,y:zo.bottom},onDismiss:()=>this.element.classList.remove("tracking")}),Js.preventDefault(),Js.stopPropagation()},{signal:d}),(this.disabled||this.readOnly&&!this.hasEditableContent||this.userSelect==="none")&&(Jr.style.display="none"),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=fp(this.element.querySelector(".ML__keyboard-sink"),this.element,this),window.addEventListener("resize",this,{signal:d}),document.addEventListener("scroll",this,{signal:d}),this.resizeObserver=new ResizeObserver(Js=>{if(this.resizeObserverStarted){this.resizeObserverStarted=!1;return}this.updateToggleLayout(),J(this)}),this.resizeObserverStarted=!0,this.resizeObserver.observe(this.field),this.resizeObserver.observe(this.container),setTimeout(()=>this.updateToggleLayout(),100),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal:d}),Ie!=="ready"&&document.fonts.ready.then(()=>so(this)),s.querySelector("[part=container]").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value"),J(this)}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ut(this)),wo(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,As())}showMenu(s){var o,c;let h=(c=(o=s==null?void 0:s.location)!=null?o:Yi(this.field))!=null?c:void 0,d=s==null?void 0:s.modifiers,b=this.element.querySelector("[part=container]");return this._menu.show({target:b,location:h,modifiers:d})}get colorMap(){return s=>{var o,c,h;return(h=(c=(o=this.options).colorMap)==null?void 0:c.call(o,s))!=null?h:Xr(s)}}get backgroundColorMap(){return s=>{var o,c,h,d,b,_;return(_=(b=(c=(o=this.options).backgroundColorMap)==null?void 0:c.call(o,s))!=null?b:(d=(h=this.options).colorMap)==null?void 0:d.call(h,s))!=null?_:Ei(s)}}get smartFence(){var s;return(s=this.options.smartFence)!=null?s:!1}get readOnly(){var s;return(s=this.options.readOnly)!=null?s:!1}get disabled(){var s,o;return(o=(s=this.host)==null?void 0:s.disabled)!=null?o:!1}get contentEditable(){return this.host?this.host.getAttribute("contenteditable")!=="false":!1}get userSelect(){if(!this.host)return"";let s=getComputedStyle(this.host);return s.getPropertyValue("user-select")||s.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return this.disabled||!this.contentEditable?!1:!this.readOnly||this.hasEditablePrompts}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&this.model.findAtom(s=>s.type==="prompt"&&!s.locked)!==void 0}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let s=this.model.at(this.model.anchor),o=this.model.at(this.model.position),c=y.commonAncestor(s,o);return!!((c==null?void 0:c.type)==="prompt"||c!=null&&c.parentPrompt)}get letterShapeStyle(){var s;return(s=this.options.letterShapeStyle)!=null?s:"tex"}get minFontScale(){return this.options.minFontScale}get maxMatrixCols(){return this.options.maxMatrixCols}queryStyle(s){let o=ns(this,s);"verbatimColor"in o&&delete o.verbatimColor,"verbatimBackgroundColor"in o&&delete o.verbatimBackgroundColor;let c=Object.keys(o).length;if(c===0)return"all";if(c>1){for(let j of Object.keys(o)){let Xt=this.queryStyle({[j]:o[j]});if(Xt==="none")return"none";if(Xt==="some")return"some"}return"all"}let h=Object.keys(o)[0],d=o[h];if(this.model.selectionIsCollapsed)return Ht(this)[h]===d?"all":"none";let b=this.model.getAtoms(this.model.selection,{includeChildren:!0}),_=b.length;if(_===0)return"none";let $=0;for(let j of b){if(j.type==="first"){_-=1;continue}j.style[h]===d&&($+=1)}return $===0?"none":$===_?"all":"some"}get keybindings(){var s,o;if(this._keybindings)return this._keybindings;let[c,h]=xp(this.options.keybindings,(s=gr())!=null?s:_u());return((o=gr())==null?void 0:o.score)>0&&(this._keybindings=c,h.length>0&&console.error("MathLive 0.108.2: Invalid keybindings for current keyboard layout",h)),c}get menu(){return this._menu!=null||(this._menu=new ko(xh(this),{host:this.host})),this._menu}set menuItems(s){this._menu?this._menu.menuItems=s:this._menu=new ko(s,{host:this.host})}setOptions(s){var o;this.options=p(p({},this.options),vn(s)),this._keybindings=void 0,this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let c=this.options.defaultMode;c==="inline-math"&&(c="math"),((o=this.model.root.firstChild)==null?void 0:o.mode)!==c&&(this.model.root.firstChild.mode=c),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let h=y.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in s||this.model.getValue()!==h)&&pc(this),("value"in s||"registers"in s||"colorMap"in s||"backgroundColorMap"in s||"letterShapeStyle"in s||"minFontScale"in s||"maxMatrixCols"in s||"readOnly"in s||"contentPlaceholder"in s||"placeholderSymbol"in s)&&J(this)}getOptions(s){return pr(this.options,s)}getOption(s){return pr(this.options,s)}async handleEvent(s){var o,c,h;if(it(this)){if(uo(s)){if(!Qi(s.origin,(o=this.options.originValidator)!=null?o:"none"))throw new DOMException(`Message from unknown origin (${s.origin}) cannot be handled`,"SecurityError");let{action:d}=s.data;if(d==="execute-command"){let b=yi(s.data.command);if(!b||mr(b)==="virtual-keyboard")return;this.executeCommand(b)}else d==="update-state"||(d==="focus"?this.focus({preventScroll:!0}):d==="blur"&&this.blur());return}switch(s.type){case"focus":this.programmaticFocusInProgress||this.onFocus({suppressEvents:!0});break;case"blur":this.onBlur({dispatchEvents:!1});break;case"mousedown":this.userSelect!=="none"&&!((c=s.target)!=null&&c.closest("[part=virtual-keyboard-toggle],[part=menu-toggle]"))&&Tc$1(this,s);break;case"pointerdown":!s.defaultPrevented&&this.userSelect!=="none"&&!((h=s.target)!=null&&h.closest("[part=virtual-keyboard-toggle],[part=menu-toggle]"))&&(Tc$1(this,s),s.shiftKey===!1&&await Ic(s,this.container,this.menu)&&Mi.stop());break;case"contextmenu":this.userSelect!=="none"&&s.shiftKey===!1&&await Ic(s,this.container,this.menu)&&Mi.stop();break;case"virtual-keyboard-toggle":this.hasFocus()&&wo(this),this.hasFocus()&&this.options.mathVirtualKeyboardPolicy!=="manual"&&(this.keyboardDelegate.blur(),this.keyboardDelegate.focus());break;case"resize":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>it(this)&&this.onGeometryChange());break;case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>it(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(s);break;case"message":break;default:console.warn("Unexpected event type",s.type)}}}updateToggleLayout(){if(!this.element||!this.host)return;let s=this.element.querySelector(".ML__toggles");if(!s)return;let o=this.host.offsetHeight,c=s.classList.contains("ML__toggles--vertical");o>=100&&!c?s.classList.add("ML__toggles--vertical"):o<100&&c&&s.classList.remove("ML__toggles--vertical")}dispose(){if(!it(this))return;F.unsubscribe(this._l10Subscription),this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),this.eventController=void 0,this.resizeObserver.disconnect(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let s=this.element;delete s.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.ariaLiveText=void 0,Wp(),Mp(),eh()}flushInlineShortcutBuffer(s){if(s!=null||(s={defer:!1}),!s.defer){this.inlineShortcutBuffer.length=0,clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(s){return mr(s)==="virtual-keyboard"?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(s),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(Ut(this))),!1):Ap(this,s)}get errors(){return Xa(this.model.getValue(),{context:this.context})}getValue(s,o,c){return this.model.getValue(s,o,c)}setValue(s,o){var c;o=o??{mode:"math"},o.insertionMode===void 0&&(o.insertionMode="replaceAll"),(o.format===void 0||o.format==="auto")&&(o.format="latex"),(o.mode===void 0||o.mode==="auto")&&(o.mode=(c=B0(this.model,this.model.position))!=null?c:"math");let h=this.undoManager.canUndo();q.insert(this.model,s,o)&&(J(this),h||this.undoManager.reset(),this.undoManager.snapshot("set-value"))}get expression(){let s=globalThis.MathfieldElement.computeEngine;return s?s.box(s.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.108.2:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var s;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let h=window.mathVirtualKeyboard.boundingRect,d=this.host.getBoundingClientRect();d.bottom>h.top&&((s=window.document.scrollingElement)==null||s.scrollBy(0,d.bottom-h.top+8))}}this.dirty&&xt(this,{interactive:!0});let o=this.field.getBoundingClientRect(),c=null;if(this.model.selectionIsCollapsed)c=Yi(this.field);else{let h=Va(this);if(h.length>0){let d=-1/0,b=1/0,_=-1/0;for(let j of h)j.right>d&&(d=j.right),j.top<b&&(b=j.top),j.bottom>_&&(_=j.bottom);let $=_-b;c={x:d+o.left-this.field.scrollLeft,y:b+o.top-this.field.scrollTop,height:$}}}if(this.host&&c){let h=this.host.getBoundingClientRect(),d=20,b=c.y,_=c.y+c.height,$=this.host.scrollTop;b<h.top+d?$=b-h.top+this.host.scrollTop-d:_>h.bottom-d&&($=_-h.bottom+this.host.scrollTop+d),$!==this.host.scrollTop&&this.host.scroll({top:$,behavior:"auto"})}if(c){let h=c.x-window.scrollX,d=this.field.scrollLeft;h<o.left?d=h-o.left+this.field.scrollLeft-20:h>o.right&&(d=h-o.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:d})}}insert(s,o){if(typeof s!="string"||s.length===0&&((o==null?void 0:o.insertionMode)==="insertBefore"||(o==null?void 0:o.insertionMode)==="insertAfter")||s.length===0&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),o=o??{mode:"math"},o.focus&&this.focus(),o.feedback&&(globalThis.MathfieldElement.keypressVibration&&Ro()&&navigator.vibrate(fc),globalThis.MathfieldElement.playSound("keypress")),s==="\\\\")vc(this.model);else if(s==="&")_c(this.model);else if(this.model.selectionIsCollapsed){let c=p({},Ht(this));!/^[a-zA-Z0-9]$/.test(s)&&this.styleBias!=="none"&&(c.variant="normal",c.variantStyle=void 0),q.insert(this.model,s,p({style:c},o))}else q.insert(this.model,s,o);return this.snapshot(`insert-${this.model.at(this.model.position).type}`),J(this),o.scrollIntoView&&this.scrollIntoView(),!0}switchMode(s,o="",c=""){if(this.model.mode===s||!this.hasEditableContent||!this.contentEditable||this.disabled)return;let{model:h}=this,d=h.mode;if(h.mode=s,this.host&&!this.host.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))){h.mode=d;return}h.mode=d,h.deferNotifications({content:!!c||!!o,selection:!0,type:"insertText"},()=>{let b=h.at(h.position),_=(Lt,fr)=>{if(!Lt)return;let Jr=h.mode==="math"?ge(ir(Lt,{format:"ascii-math"})[1],{context:this.context}):[...Lt].map(Js=>new qe(Js,Js,{}));if(fr.select){let Js=b.parent.addChildrenAfter(Jr,b);h.setSelection(h.offsetOf(Jr[0].leftSibling),h.offsetOf(Js))}else h.position=h.offsetOf(b.parent.addChildrenAfter(Jr,b));Xt=!0},$=(Lt,fr)=>{let Jr=new Nt(Lt);b.parent.addChildAfter(Jr,b),fr.select?h.setSelection(h.offsetOf(Jr.firstChild),h.offsetOf(Jr.lastChild)):h.position=h.offsetOf(Jr.lastChild),Xt=!0},j=()=>{let Lt=s==="latex"?"latex":s==="math"?"plain-text":"ascii-math",fr=de(h.selection),Jr=this.model.getValue(fr,Lt),Js=this.model.extractAtoms(fr);return Js.length===1&&Js[0].type==="placeholder"&&(Jr=c),b=h.at(fr[0]),Jr},Xt=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),Xe(this,"accept"),h.selectionIsCollapsed)_(o,{select:!1}),h.mode=s,s==="latex"?$(c,{select:!1}):_(c,{select:!1});else{let Lt=j();h.mode=s,s==="latex"?$(Lt,{select:!0}):_(Lt,{select:!0})}return J(this),this.undoManager.snapshot(s==="latex"?"insert-latex":"insert"),Xt}),h.mode=s,window.mathVirtualKeyboard.update(Ut(this))}hasFocus(){return!this.blurred}focus(s){var o;this.disabled||this.focusBlurInProgress||(this.hasFocus()||(this.programmaticFocusInProgress=!0,this.onFocus(),this.model.announce("line")),(o=s==null?void 0:s.preventScroll)!=null&&o||this.scrollIntoView())}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]},this.focus()}applyStyle(s,o={}){var c;let h,d="set",b=!1;si(o)?h=o:(o.operation==="toggle"&&(d="toggle"),h=o.range,b=(c=o.silenceNotifications)!=null?c:!1),h&&(h=this.model.normalizeRange(h)),h&&h[0]===h[1]&&(h=void 0);let _=ns(this,s);if(h===void 0&&this.model.selectionIsCollapsed){if(d==="set"){let Xt=p({},this.defaultStyle);"color"in _&&delete Xt.verbatimColor,"backgroundColor"in _&&delete Xt.verbatimBackgroundColor,this.defaultStyle=p(p({},Xt),_),this.styleBias="none";return}let $=Ht(this),j=p({},this.defaultStyle);for(let Xt of Object.keys(_))$[Xt]===_[Xt]?(Xt==="color"&&delete j.verbatimColor,Xt==="backgroundColor"&&delete j.verbatimBackgroundColor,delete j[Xt]):j[Xt]=_[Xt];this.defaultStyle=j,this.styleBias="none";return}this.model.deferNotifications({content:!b,type:"insertText"},()=>{if(h===void 0)for(let $ of this.model.selection.ranges)io(this.model,$,_,{operation:d});else io(this.model,h,_,{operation:d})}),J(this)}toggleContextMenu(){var s;let o=this.menu;if(!o.visible)return!1;if(o.state==="open")return o.hide(),!0;let c=(s=qa(this,this.model.position))==null?void 0:s.bounds;if(!c)return!1;let h={x:c.right,y:c.bottom};return o.show({target:this.element.querySelector("[part=container]"),location:h,onDismiss:()=>{var d;return(d=this.element)==null?void 0:d.focus()}}),!0}getPrompt(s){return this.model.findAtom(c=>c.type==="prompt"&&c.placeholderId===s)}getPromptValue(s,o){let c=this.getPrompt(s);if(!c)return"";let h=this.model.offsetOf(c.firstChild),d=this.model.offsetOf(c.lastChild);return this.model.getValue(h,d,o)}getPrompts(s){return this.model.atoms.filter(o=>o.type!=="prompt"?!1:s?!(s.id&&o.placeholderId!==s.id||s.locked&&o.locked!==s.locked||s.correctness==="undefined"&&o.correctness||s.correctness&&o.correctness!==s.correctness):!0).map(o=>o.placeholderId)}setPromptValue(s,o,c){if(o!==void 0){let h=this.getPrompt(s);if(!h){console.error(`MathLive 0.108.2: unknown prompt ${s}`);return}let d=this.model.getBranchRange(this.model.offsetOf(h),"body");this.model.setSelection(d),this.insert(o,g(p({},c),{insertionMode:"replaceSelection"}))}c!=null&&c.silenceNotifications&&(this.valueOnFocus=this.getValue()),J(this)}setPromptState(s,o,c){let h=this.getPrompt(s);if(!h){console.error(`MathLive 0.108.2: unknown prompt ${s}`);return}o==="undefined"?h.correctness=void 0:typeof o=="string"&&(h.correctness=o),typeof c=="boolean"&&(h.locked=c,h.captureSelection=c),J(this)}getPromptState(s){let o=this.getPrompt(s);return o?[o.correctness,o.locked]:(console.error(`MathLive 0.108.2: unknown prompt ${s}`),[void 0,!0])}getPromptRange(s){let o=this.getPrompt(s);return o?this.model.getBranchRange(this.model.offsetOf(o),"body"):(console.error(`MathLive 0.108.2: unknown prompt ${s}`),[0,0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ut(this))}snapshot(s){var o;this.undoManager.snapshot(s)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ut(this)),(o=this.host)==null||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var s;this.undoManager.undo()&&((s=this.host)==null||s.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var s;this.undoManager.redo()&&((s=this.host)==null||s.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"redo"}})))}resetUndo(){var s;(s=this.undoManager)==null||s.reset()}onSelectionDidChange(){var s,o;let c=this.model;if(c.mathfield.hasFocus()&&this.keyboardDelegate.setValue(c.getValue(c.selection,"latex-expanded")),c.selectionIsCollapsed){let h=oo(c),d=c.position,b=c.at(d),_=(s=b.mode)!=null?s:xc(this.options);if(h&&(d<c.offsetOf(h.firstChild)-1||d>c.offsetOf(h.lastChild)+1))Xe(this,"accept",{mode:_}),c.position=c.offsetOf(b);else{let $=c.at(d+1);($==null?void 0:$.type)==="first"&&$.mode==="latex"?c.position=d+1:h&&($==null?void 0:$.mode)!=="latex"?c.position=d-1:this.switchMode(_)}}(o=this.host)==null||o.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ut(this)),wo(this)}onContentWillChange(s){var o,c,h;return(h=(c=this.host)==null?void 0:c.dispatchEvent(new InputEvent("beforeinput",g(p({},s),{data:s.data?s.data:(o=s.inputType)!=null?o:"",cancelable:!0,bubbles:!0,composed:!0}))))!=null?h:!0}onFocus(s){if(this.disabled||this.focusBlurInProgress||!this.blurred)return;let o=Ev._globallyFocusedMathfield;o&&o!==this&&!o.disabled&&o.hasFocus()&&o.onBlur({dispatchEvents:!0}),this.focusBlurInProgress=!0,this.blurred=!1,Ev._globallyFocusedMathfield=this,this.stopCoalescingUndo(),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),xt(this,{interactive:!0}),setTimeout(()=>{var c,h;if(it(this))if((c=s==null?void 0:s.suppressEvents)!=null&&c){let d=new AbortController,b=d.signal,_=$=>{$.preventDefault(),$.stopPropagation()};for(let $ of["focus","focusin"])(h=this.host)==null||h.addEventListener($,_,{capture:!0,signal:b});this.focusBlurInProgress=!1,this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),setTimeout(()=>d.abort(),0)}else this.focusBlurInProgress=!1,this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),setTimeout(()=>{this.programmaticFocusInProgress=!1},0)},60)}onBlur(s){var o,c,h,d;if(!(this.focusBlurInProgress||this.blurred)&&(this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,Ev._globallyFocusedMathfield===this&&(Ev._globallyFocusedMathfield=void 0),this.ariaLiveText.textContent="",Nr(this),this.model.getValue()!==this.valueOnFocus&&((o=this.host)==null||o.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),((c=s==null?void 0:s.dispatchEvents)==null||c)&&((h=this.host)==null||h.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),(d=this.host)==null||d.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0}))),J(this),this.focusBlurInProgress=!1,As(),gn.restoreFocusWhenDocumentFocused)){let b=new AbortController,_=b.signal;window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{it(this)&&this.focus({preventScroll:!0})},{once:!0,signal:_})},{once:!0,signal:_}),document.addEventListener("focusin",()=>b.abort(),{once:!0}),document.addEventListener("click",()=>b.abort(),{once:!0})}}onInput(s){xo(this,s)}onKeystroke(s){return Ac(this,s)}onCompositionStart(s){at(this.model,de(this.model.selection),"insertText");let o=Yi(this.field);o&&requestAnimationFrame(()=>{xt(this),this.keyboardDelegate.moveTo(o.x,o.y-o.height)})}onCompositionUpdate(s){Op(this.model,s),J(this)}onCompositionEnd(s){Bp(this.model),xo(this,s,{simulateKeystroke:!0})}onCut(s){if(!this.isSelectionEditable){this.model.announce("plonk");return}this.model.contentWillChange({inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),s.clipboardData?q.onCopy(this,s):q.copyToClipboard(this,"latex"),at(this.model,de(this.model.selection),"deleteByCut"),this.snapshot("cut"),J(this))}onCopy(s){s.clipboardData?q.onCopy(this,s):q.copyToClipboard(this,"latex")}onPaste(s){let o=this.isSelectionEditable;return o&&(o=q.onPaste(this.model.at(this.model.position).mode,this,s.clipboardData)),o||this.model.announce("plonk"),s.preventDefault(),s.stopPropagation(),o}onGeometryChange(){var s;(s=this._menu)==null||s.hide(),fn(this),wo(this)}onWheel(s){let o=5*s.deltaX;if(!Number.isFinite(o)||o===0)return;let c=this.field;o<0&&c.scrollLeft===0||o>0&&c.offsetWidth+c.scrollLeft>=c.scrollWidth||(c.scrollBy({top:0,left:o}),s.preventDefault(),s.stopPropagation())}getHTMLElement(s){let o=s;for(;!o.id&&o.hasChildren;)o=s.children[0];return this.field.querySelector(`[data-atom-id="${o.id}"]`)}get context(){var s,o;return{registers:(s=this.options.registers)!=null?s:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,maxMatrixCols:this.maxMatrixCols,placeholderSymbol:(o=this.options.placeholderSymbol)!=null?o:"",colorMap:c=>this.colorMap(c),backgroundColorMap:c=>this.backgroundColorMap(c),getMacro:c=>Ki(c,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};fe({speak:(a,s,o)=>cy(a,s,o)},{target:"mathfield"});function cy(a,s,o){var c;o=o??{withHighlighting:!1};let{model:h}=a;function d(Xt){let Lt=null;switch(Xt){case"all":Lt=h.root;break;case"selection":Lt=h.getAtoms(h.selection);break;case"left":{Lt=h.getAtoms(h.offsetOf(h.at(h.position).leftSibling),h.position);break}case"right":{Lt=h.getAtoms(h.position,h.offsetOf(h.at(h.position).rightSibling));break}case"group":Lt=h.getAtoms(h.getSiblingsRange(h.position));break;case"parent":{let{parent:fr}=h.at(h.position);fr!=null&&fr.parent?Lt=fr:Lt=h.root;break}default:Lt=h.root}return Lt}function b(Xt){let Lt="";switch(Xt){case"all":console.error("Internal failure: speak all failed");break;case"selection":Lt="no selection";break;case"left":Lt="at start";break;case"right":Lt="at end";break;case"group":console.error("Internal failure: speak group failed");break;case"parent":Lt="no parent";break;default:console.error('unknown speak_ param value: "'+Xt+'"');break}return Lt}let _=globalThis.MathfieldElement,$=d(s);if($===null)return(c=_.speakHook)==null||c.call(_,b(s)),!1;(o.withHighlighting||_.speechEngine==="amazon")&&(_.textToSpeechMarkup=globalThis.sre&&_.textToSpeechRules==="sre"?"ssml_step":"ssml");let j=kt($);return ke()&&o.withHighlighting?(Gt().readAloudMathfield=a,xt(a,{forHighlighting:!0}),_.readAloudHook&&_.readAloudHook(a.field,j)):_.speakHook&&_.speakHook(j),!1}function Lh(a){var s,o;if(!ke())return;let c=globalThis.MathfieldElement;if(!c.speechEngine||c.speechEngine==="local"){let h=new SpeechSynthesisUtterance(a);globalThis.speechSynthesis.speak(h)}else if(c.speechEngine==="amazon")if(!("AWS"in window))console.error("MathLive 0.108.2: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else{let h=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),d={OutputFormat:"mp3",VoiceId:(s=c.speechEngineVoice)!=null?s:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((o=c.speechEngineVoice)!=null?o:"Joanna")?"neural":"standard",Text:a,TextType:"ssml"};h.synthesizeSpeech(d,(b,_)=>{if(b)console.trace(`MathLive 0.108.2: \`polly.synthesizeSpeech()\` error: ${b}`);else if(_!=null&&_.AudioStream){let $=new Uint8Array(_.AudioStream),j=new Blob([$.buffer],{type:"audio/mpeg"}),Xt=URL.createObjectURL(j);new Audio(Xt).play().catch(Lt=>console.error(Lt))}})}else c.speechEngine==="google"&&console.error("MathLive 0.108.2: The Google speech engine is not supported yet. Please come again.")}function Ah(a){if(a&&(a.classList.remove("ML__highlight"),a.children))for(let s of a.children)Ah(s)}function Zc(a,s){var o;a&&(!s||((o=a.dataset)==null?void 0:o.atomId)===s?(a.classList.add("ML__highlight"),a.children&&a.children.length>0&&[...a.children].forEach(c=>{c instanceof HTMLElement&&Zc(c)})):(a.classList.remove("ML__highlight"),a.children&&a.children.length>0&&[...a.children].forEach(c=>{c instanceof HTMLElement&&Zc(c,s)})))}function Ch(a,s){var o;if(!ke())return;if(globalThis.MathfieldElement.speechEngine!=="amazon"){console.error("MathLive 0.108.2: Use Amazon TTS Engine for synchronized highlighting"),typeof globalThis.MathfieldElement.speakHook=="function"&&globalThis.MathfieldElement.speakHook(s);return}if(!globalThis.AWS){console.error("MathLive 0.108.2: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let c=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),h={OutputFormat:"json",VoiceId:(o=globalThis.MathfieldElement.speechEngineVoice)!=null?o:"Joanna",Engine:"standard",Text:s,TextType:"ssml",SpeechMarkTypes:["ssml"]};Gt().readAloudElement=a,c.synthesizeSpeech(h,(d,b)=>{if(d){console.trace(`MathLive 0.108.2: \`polly.synthesizeSpeech()\` error: ${d}`);return}if(!(b!=null&&b.AudioStream))return;let _=new TextDecoder("utf-8").decode(new Uint8Array(b.AudioStream));Gt().readAloudMarks=_.split(`
`).map($=>$?JSON.parse($):{}),Gt().readAloudTokens=[];for(let $ of Gt().readAloudMarks)$.value&&Gt().readAloudTokens.push($.value);Gt().readAloudCurrentMark="",h.OutputFormat="mp3",h.SpeechMarkTypes=[],c.synthesizeSpeech(h,($,j)=>{if($){console.trace(`MathLive 0.108.2: \`polly.synthesizeSpeech("${s}") error:${$}`);return}if(!(j!=null&&j.AudioStream))return;let Xt=new Uint8Array(j.AudioStream),Lt=new Blob([Xt.buffer],{type:"audio/mpeg"}),fr=URL.createObjectURL(Lt),Jr=Gt();Jr.readAloudAudio?Jr.readAloudAudio.pause():(Jr.readAloudAudio=new Audio,Jr.readAloudAudio.addEventListener("ended",()=>{let Js=Jr.readAloudMathfield;Jr.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),Js?(xt(Js),Jr.readAloudElement=null,Jr.readAloudMathfield=null,Jr.readAloudTokens=[],Jr.readAloudMarks=[],Jr.readAloudCurrentMark=""):Ah(Jr.readAloudElement)}),Jr.readAloudAudio.addEventListener("timeupdate",()=>{let Js="",qs=Jr.readAloudAudio.currentTime*1e3+100;for(let zo of Jr.readAloudMarks)zo.time<qs&&(Js=zo.value);Jr.readAloudCurrentMark!==Js&&(Jr.readAloudCurrentToken=Js,Js&&Js===Jr.readAloudFinalToken?Jr.readAloudAudio.pause():(Jr.readAloudCurrentMark=Js,Zc(Jr.readAloudElement,Jr.readAloudCurrentMark)))})),Jr.readAloudAudio.src=fr,Jr.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),Jr.readAloudAudio.play()})})}ke()||console.error('MathLive 0.108.2: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var Q=new WeakMap,uy=.5,jr={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`mf.onExport`",onInlineShortcut:"`mf.onInlineShortcut`",onScrollIntoView:"`mf.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},se=class vv extends HTMLElement{constructor(s){if(super(),this._observer=null,s){let o=[];for(let c of Object.keys(s))if(jr[c])if(jr[c].startsWith("mf."))if(jr[c].startsWith(`mf.${c}`))o.push(`Option \`${c}\` cannot be used as a constructor option. Use ${jr[c]}`);else{let h=jr[c].match(/([a-zA-Z]+) =/);o.push(`Option \`${c}\` has been renamed \`${h[1]}\``)}else o.push(`Option \`${c}\` cannot be used as a constructor option. Use ${jr[c]}`);if(o.length>0){console.group("%cMathLive 0.108.2: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathfieldElement(...)` are invalid. \n          See mathfield/changelog/ for details.");for(let c of o)console.warn(c);console.groupEnd()}}if(Tn()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[or("core"),or("mathfield"),or("mathfield-element"),or("ui"),or("menu")],this.shadowRoot.appendChild(document.createElement("span"));let o=document.createElement("slot");o.style.display="none",this.shadowRoot.appendChild(o)}else this.shadowRoot.innerHTML="<style>"+zt("core")+zt("mathfield")+zt("mathfield-element")+zt("ui")+zt("menu")+'</style><span></span><slot style="display:none"></slot>';s&&this._setOptions(s)}static get formAssociated(){return Tn()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","max-matrix-cols":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string",placeholder:"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(s){s!==this._fontsDirectory&&(this._fontsDirectory=s,kp())}get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead")}set fontsDirectory(s){throw new Error("Use MathfieldElement.fontsDirectory instead")}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(s){this._soundsDirectory=s,this.audioBuffers={}}get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead")}set soundsDirectory(s){throw new Error("Use MathfieldElement.soundsDirectory instead")}static get keypressSound(){return this._keypressSound}static set keypressSound(s){var o,c,h;this.audioBuffers={},s===null?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:typeof s=="string"?this._keypressSound={spacebar:s,return:s,delete:s,default:s}:typeof s=="object"&&"default"in s&&(this._keypressSound={spacebar:(o=s.spacebar)!=null?o:s.default,return:(c=s.return)!=null?c:s.default,delete:(h=s.delete)!=null?h:s.default,default:s.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(s){this.audioBuffers={},this._plonkSound=s}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(s){this._speechEngine=s}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(s){this._speechEngineRate=s}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(s){this._speechEngineVoice=s}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(s){this._textToSpeechMarkup=s}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(s){this._textToSpeechRules=s}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(s){this._textToSpeechRulesOptions=s}static get locale(){return F.locale}static set locale(s){s==="auto"&&(s=navigator.language.slice(0,5)),F.locale=s}get locale(){throw new Error("Use MathfieldElement.locale instead")}set locale(s){throw new Error("Use MathfieldElement.locale instead")}static get strings(){return F.strings}static set strings(s){F.merge(s)}get strings(){throw new Error("Use MathfieldElement.strings instead")}set strings(s){throw new Error("Use MathfieldElement.strings instead")}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(s){this._decimalSeparator=s,this._computeEngine&&(this._computeEngine.decimalSeparator=this.decimalSeparator===","?"{,}":".")}get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead")}set decimalSeparator(s){throw new Error("Use MathfieldElement.decimalSeparator instead")}static set scientificNotationTemplate(s){this._scientificNotationTemplate=s}static get scientificNotationTemplate(){return this._scientificNotationTemplate}static get fractionNavigationOrder(){return dn.fractionNavigationOrder}static set fractionNavigationOrder(s){if(s!=="numerator-denominator"&&s!=="denominator-numerator")throw new Error("Invalid value");dn.fractionNavigationOrder!==s&&(dn.fractionNavigationOrder=s,hc())}static get computeEngine(){var s,o;if(this._computeEngine===void 0){let c=(s=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:s.ComputeEngine;if(!c)return null;this._computeEngine=new c,this._computeEngine&&this.decimalSeparator===","&&(this._computeEngine.decimalSeparator="{,}")}return(o=this._computeEngine)!=null?o:null}static set computeEngine(s){this._computeEngine=s}get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead")}set computeEngine(s){throw new Error("Use MathfieldElement.computeEngine instead")}static get isFunction(){return typeof this._isFunction!="function"?()=>!1:this._isFunction}static set isFunction(s){this._isFunction=s,hc()}static async loadSound(s){delete this.audioBuffers[s];let o="";switch(s){case"keypress":o=this._keypressSound.default;break;case"return":o=this._keypressSound.return;break;case"spacebar":o=this._keypressSound.spacebar;break;case"delete":o=this._keypressSound.delete;break;case"plonk":o=this.plonkSound;break}if(typeof o!="string")return;o=o.trim();let c=this.soundsDirectory;if(!(c==null||c==="null"||o==="none"||o==="null"))try{let h=await(await fetch(await as(`${c}/${o}`))).arrayBuffer(),d=await this.audioContext.decodeAudioData(h);this.audioBuffers[s]=d}catch{}}static async playSound(s){if((this.audioContext.state==="suspended"||this.audioContext.state==="interrupted")&&await this.audioContext.resume(),this.audioBuffers[s]||await this.loadSound(s),!this.audioBuffers[s])return;let o=this.audioContext.createBufferSource();o.buffer=this.audioBuffers[s];let c=this.audioContext.createGain();c.gain.value=uy,o.connect(c).connect(this.audioContext.destination),o.start()}showMenu(s){var o,c;return(c=(o=this._mathfield)==null?void 0:o.showMenu(s))!=null?c:!1}get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",s=>{let o=this._mathfield;if(o&&s.target===this&&!o.disabled){this.dispatchEvent(new MouseEvent("click",{altKey:s.altKey,button:s.button,buttons:s.buttons,clientX:s.clientX,clientY:s.clientY,ctrlKey:s.ctrlKey,metaKey:s.metaKey,movementX:s.movementX,movementY:s.movementY,relatedTarget:s.relatedTarget,screenX:s.screenX,screenY:s.screenY,shiftKey:s.shiftKey}));let c=this.getOffsetFromPoint(s.clientX,s.clientY);c>=0&&vv.openUrl(F0(o,c)),s.pointerType==="touch"&&this.selectionIsCollapsed&&(this.position=c)}},{once:!0})}getPromptValue(s,o){var c,h;return(h=(c=this._mathfield)==null?void 0:c.getPromptValue(s,o))!=null?h:""}setPromptValue(s,o,c){var h;(h=this._mathfield)==null||h.setPromptValue(s,o,c)}getPromptRange(s){var o,c;return(c=(o=this._mathfield)==null?void 0:o.getPromptRange(s))!=null?c:null}getPrompts(s){var o,c;return(c=(o=this._mathfield)==null?void 0:o.getPrompts(s))!=null?c:[]}get hasEditableContent(){var s,o;return(o=(s=this._mathfield)==null?void 0:s.hasEditableContent)!=null?o:!1}get form(){var s;return(s=this._internals)==null?void 0:s.form}get name(){var s;return(s=this.getAttribute("name"))!=null?s:""}get type(){return this.localName}get mode(){var s,o;return(o=(s=this._mathfield)==null?void 0:s.model.mode)!=null?o:this.defaultMode==="text"?"text":"math"}set mode(s){var o;(o=this._mathfield)==null||o.switchMode(s)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.108.2: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`),null)}set expression(s){var o,c;if(!this._mathfield)return;let h=(c=(o=vv.computeEngine)==null?void 0:o.box(s).latex)!=null?c:null;h!==null&&this._mathfield.setValue(h),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.108.2: The Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`)}get errors(){var s,o;return(o=(s=this._mathfield)==null?void 0:s.errors)!=null?o:[]}_getOptions(s){return this._mathfield?pr(this._mathfield.options,s):Q.has(this)?p({},pr(p(p({},_n()),vn(Q.get(this).options)),s)):null}getOptions(s){return console.warn("%cMathLive 0.108.2: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?pr(this._mathfield.options,s):Q.has(this)?pr(p(p({},_n()),vn(Q.get(this).options)),s):null}reflectAttributes(){let s=_n(),o=this._getOptions();Object.keys(vv.optionsAttributes).forEach(c=>{let h=c==="placeholder"?"contentPlaceholder":hr(c);vv.optionsAttributes[c]==="on/off"?s[h]!==o[h]?this.setAttribute(c,o[h]?"on":"off"):this.removeAttribute(c):s[h]!==o[h]&&(vv.optionsAttributes[c]==="boolean"?o[h]?this.setAttribute(c,""):this.removeAttribute(c):(typeof o[h]=="string"||typeof o[h]=="number")&&this.setAttribute(c,o[h].toString()))})}getOption(s){return console.warn("%cMathLive 0.108.2: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([s])[s]}_getOption(s){return this._getOptions([s])[s]}_setOptions(s){if(this._mathfield)this._mathfield.setOptions(s);else if(Q.has(this)){let o=p(p({},Q.get(this).options),s);Q.set(this,g(p({},Q.get(this)),{selection:{ranges:o.readOnly?[[0,0]]:[[0,-1]]},options:o}))}else Q.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:s,menuItems:void 0});this.reflectAttributes()}setOptions(s){console.group("%cMathLive 0.108.2: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.");for(let o of Object.keys(s))jr[o]&&console.warn(`\`mf.setOptions({${o}:...})\` -> ${jr[o]}`);console.groupEnd(),this._setOptions(s)}executeCommand(...s){var o,c;let h;if(s.length===1?h=s[0]:h=[s[0],...s.slice(1)],h)return(c=(o=this._mathfield)==null?void 0:o.executeCommand(h))!=null?c:!1;throw new Error("Invalid selector")}getValue(s,o,c){var h,d;if(this._mathfield)return this._mathfield.model.getValue(s,o,c);if(Q.has(this)){let b,_,$;if(Xi(s)?([b,_]=s.ranges[0],$=o):si(s)?([b,_]=s,$=o):Rt(s)&&Rt(o)?(b=s,_=o,$=c):(b=0,_=-1,$=s),($===void 0||$==="latex")&&b===0&&_===-1)return(d=(h=Q.get(this).value)!=null?h:this.textContent)!=null?d:""}return""}setValue(s,o){if(this._mathfield&&s!==void 0){if(this._mathfield.model.getValue()===s)return;o!=null||(o={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(s,o);return}if(Q.has(this)){let h=Q.get(this).options;Q.set(this,{value:s,selection:{ranges:[[-1,-1]],direction:"forward"},options:h,menuItems:void 0});return}let c=Vs(this);Q.set(this,{value:s,selection:{ranges:[[-1,-1]],direction:"forward"},options:c,menuItems:void 0})}hasFocus(){var s,o;return(o=(s=this._mathfield)==null?void 0:s.hasFocus())!=null?o:!1}focus(){var s;this.disabled||(s=this._mathfield)==null||s.focus()}blur(){var s;(s=this._mathfield)==null||s.blur()}select(){var s;(s=this._mathfield)==null||s.select()}insert(s,o){var c,h;return(h=(c=this._mathfield)==null?void 0:c.insert(s,o))!=null?h:!1}applyStyle(s,o){var c;return(c=this._mathfield)==null?void 0:c.applyStyle(s,o)}queryStyle(s){var o,c;return(c=(o=this._mathfield)==null?void 0:o.queryStyle(s))!=null?c:"none"}getOffsetFromPoint(s,o,c){return this._mathfield?Mo(this._mathfield,s,o,c):-1}getElementInfo(s){return qa(this._mathfield,s)}resetUndo(){var s;(s=this._mathfield)==null||s.resetUndo()}canUndo(){return this._mathfield?this._mathfield.canUndo():!1}canRedo(){return this._mathfield?this._mathfield.canRedo():!1}handleEvent(s){var o,c,h,d,b;if(Te.state!=="closed"||((c=(o=this._mathfield)==null?void 0:o.menu)==null?void 0:c.state)!=="closed"||(s.type==="pointerdown"&&this.onPointerDown(),s.type==="focus")||s.type!=="blur")return;let _=Po();_&&(h=window==null?void 0:window.mathVirtualKeyboard)!=null&&h.visible||((d=Te.scrim)==null?void 0:d.state)!=="closed"||_&&ou()||(b=this._mathfield)==null||b.onBlur({dispatchEvents:!1})}connectedCallback(){var s,o,c,h;let d=this.shadowRoot,b=d.host,_=window.getComputedStyle(this).userSelect!=="none";if(_)b.addEventListener("pointerdown",this,!0);else{let Xt=d.querySelector("span");Xt.style.pointerEvents="none"}b.addEventListener("focus",this,!0),b.addEventListener("blur",this,!0),this._observer=new MutationObserver(()=>{var Xt;this.value=(Xt=this.textContent)!=null?Xt:""}),this._observer.observe(this,{childList:!0,characterData:!0,subtree:!0}),Tn()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),_&&!this.hasAttribute("contenteditable")&&this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let $=d.querySelector("slot:not([name])");if($)try{this._style=$.assignedElements().filter(Xt=>Xt.tagName.toLowerCase()==="style").map(Xt=>Xt.textContent).join("")}catch(Xt){console.error(Xt)}if(this._style){let Xt=document.createElement("style");Xt.textContent=this._style,d.appendChild(Xt)}let j="";if(this.hasAttribute("value")?j=this.getAttribute("value"):j=(s=$==null?void 0:$.assignedNodes().map(Xt=>Xt.nodeType===3?Xt.textContent:"").join("").trim())!=null?s:"",this._mathfield=new $s(d.querySelector(":host > span"),g(p({},(c=(o=Q.get(this))==null?void 0:o.options)!=null?c:Vs(this)),{eventSink:this,value:j})),!Q.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let Xt of Object.keys(vv.optionsAttributes))this.upgradeProperty(hr(Xt))}if(!((h=this._mathfield)!=null&&h.model)){this._mathfield=null;return}if(Q.has(this)){let Xt=this._mathfield,Lt=Q.get(this),fr=Lt.menuItems;Xt.model.deferNotifications({content:!1,selection:!1},()=>{let Jr=Lt.value;Jr!==void 0&&Xt.setValue(Jr),Xt.model.selection=Lt.selection,Q.delete(this)}),fr&&(this.menuItems=fr)}window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),dr()}disconnectedCallback(){var s,o,c;if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;(s=this._observer)==null||s.disconnect(),this._observer=null,window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let h=pr(this._mathfield.options,Object.keys(vv.optionsAttributes).map(d=>hr(d)));Q.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:(c=(o=this._mathfield.menu)==null?void 0:o.menuItems)!=null?c:void 0,options:h}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(s){if(this.hasOwnProperty(s)){let o=this[s];delete this[s],(s==="readonly"||s==="read-only")&&(s="readOnly"),this[s]=o}}attributeChangedCallback(s,o,c){if(o===c)return;let h=c!==null;switch(s){case"contenteditable":J(this._mathfield);break;case"placeholder":c===!1&&(c=""),this.placeholder=c;break;case"disabled":this.disabled=h;break;case"read-only":case"readonly":this.readOnly=h;break}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(s){let o=!!s;o?(this.setAttribute("readonly",""),Tn()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Tn()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:o})}get disabled(){return this.hasAttribute("disabled")}set disabled(s){var o;let c=!!s;c?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Tn()?this._internals.ariaDisabled=c?"true":"false":this.setAttribute("aria-disabled",c?"true":"false"),c&&(o=this._mathfield)!=null&&o.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(s){this.setValue(s)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(s){this._setOptions({defaultMode:s})}get macros(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("macros")}set macros(s){this._setOptions({macros:s})}get registers(){if(!this._mathfield)throw new Error("Mathfield not mounted");let s=this;return new Proxy({},{get:(o,c)=>{if(typeof c=="string")return s._getOption("registers")[c]},set(o,c,h){return typeof c!="string"?!1:(s._setOptions({registers:g(p({},s._getOption("registers")),{[c]:h})}),!0)},ownKeys:()=>Reflect.ownKeys(s._getOption("registers")),getOwnPropertyDescriptor:(o,c)=>{let h=s._getOption("registers")[c];if(h!==void 0)return{configurable:!0,enumerable:!0,value:h,writable:!0}}})}set registers(s){this._setOptions({registers:s})}get colorMap(){return this._getOption("colorMap")}set colorMap(s){this._setOptions({colorMap:s})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(s){this._setOptions({backgroundColorMap:s})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(s){this._setOptions({letterShapeStyle:s})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(s){this._setOptions({minFontScale:s})}get maxMatrixCols(){return this._getOption("maxMatrixCols")}set maxMatrixCols(s){this._setOptions({maxMatrixCols:s})}get smartMode(){return this._getOption("smartMode")}set smartMode(s){this._setOptions({smartMode:s})}get smartFence(){return this._getOption("smartFence")}set smartFence(s){this._setOptions({smartFence:s})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(s){this._setOptions({smartSuperscript:s})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(s){this._setOptions({scriptDepth:s})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(s){this._setOptions({removeExtraneousParentheses:s})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(s){this._setOptions({mathModeSpace:s})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(s){this._setOptions({placeholderSymbol:s})}get placeholder(){return this._getOption("contentPlaceholder")}set placeholder(s){this._setOptions({contentPlaceholder:s})}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(s){this._setOptions({popoverPolicy:s})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(s){this._setOptions({environmentPopoverPolicy:s})}get menuItems(){var s;if(!this._mathfield)throw new Error("Mathfield not mounted");return(s=this._mathfield.menu._menuItems.map(o=>o.menuItem))!=null?s:[]}set menuItems(s){var o;if(!this._mathfield)throw new Error("Mathfield not mounted");if(this._mathfield){let c=(o=this._mathfield.element)==null?void 0:o.querySelector("[part=menu-toggle]");c&&(c.style.display=s.length===0?"none":""),this._mathfield.menu.menuItems=s}}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(s){this._setOptions({mathVirtualKeyboardPolicy:s})}get inlineShortcuts(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("inlineShortcuts")}set inlineShortcuts(s){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({inlineShortcuts:s})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(s){this._setOptions({inlineShortcutTimeout:s})}get keybindings(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("keybindings")}set keybindings(s){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({keybindings:s})}get onInsertStyle(){let s=this._getOption("onInsertStyle");return s===void 0?ao:s}set onInsertStyle(s){this._setOptions({onInsertStyle:s})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(s){this._setOptions({onInlineShortcut:s})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(s){this._setOptions({onScrollIntoView:s})}get onExport(){return this._getOption("onExport")}set onExport(s){this._setOptions({onExport:s})}get readOnly(){return this._getOption("readOnly")}set readOnly(s){this._setOptions({readOnly:s})}get isSelectionEditable(){var s,o;return(o=(s=this._mathfield)==null?void 0:s.isSelectionEditable)!=null?o:!1}setPromptState(s,o,c){var h;(h=this._mathfield)==null||h.setPromptState(s,o,c)}getPromptState(s){var o,c;return(c=(o=this._mathfield)==null?void 0:o.getPromptState(s))!=null?c:[void 0,!0]}get selection(){return this._mathfield?this._mathfield.model.selection:Q.has(this)?Q.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(s){if(typeof s=="number"&&(s={ranges:[[s,s]]}),this._mathfield){this._mathfield.model.selection=s,J(this._mathfield);return}if(Q.has(this)){Q.set(this,g(p({},Q.get(this)),{selection:s}));return}Q.set(this,{value:void 0,selection:s,options:Vs(this),menuItems:void 0})}get selectionIsCollapsed(){let s=this.selection;return s.ranges.length===1&&s.ranges[0][0]===s.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:Q.has(this)?Q.get(this).selection.ranges[0][0]:0}set position(s){if(this._mathfield&&(this._mathfield.model.position=s,J(this._mathfield)),Q.has(this)){Q.set(this,g(p({},Q.get(this)),{selection:{ranges:[[s,s]]}}));return}Q.set(this,{value:void 0,selection:{ranges:[[s,s]]},options:Vs(this),menuItems:void 0})}get lastOffset(){var s,o;return(o=(s=this._mathfield)==null?void 0:s.model.lastOffset)!=null?o:-1}};se.version="0.108.2",se.openUrl=a=>{if(!a)return;let s=new URL(a);if(!["http:","https:","file:"].includes(s.protocol.toLowerCase())){se.playSound("plonk");return}window.open(s,"_blank")},se._fontsDirectory="./fonts/",se._soundsDirectory="./sounds",se.keypressVibration=!0,se._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},se._plonkSound="plonk.wav",se.audioBuffers={},se.createHTML=a=>a,se._speechEngineRate="100%",se._speechEngineVoice="Joanna",se._textToSpeechMarkup="",se._textToSpeechRules="mathlive",se._textToSpeechRulesOptions={},se.speakHook=Lh,se.readAloudHook=Ch,se.restoreFocusWhenDocumentFocused=!0,se._decimalSeparator=".",se._scientificNotationTemplate="#1\\times10^{#2}",se._isFunction=a=>{var s,o;let c=globalThis.MathfieldElement.computeEngine;return(o=(s=c==null?void 0:c.parse(a).domain)==null?void 0:s.isFunction)!=null?o:!1};var _t=se;function hr(a){return a.replace(/[^a-zA-Z\d]+(.)/g,(s,o)=>o.toUpperCase())}function Vs(a){let s={readOnly:!1},o=_t.optionsAttributes;return Object.keys(o).forEach(c=>{var h;if(a.hasAttribute(c)){let d=a.getAttribute(c);c==="placeholder"?s.contentPlaceholder=d??"":o[c]==="boolean"?s[hr(c)]=!0:o[c]==="on/off"?(d=(h=d==null?void 0:d.toLowerCase())!=null?h:"",d==="on"||d==="true"?s[hr(c)]=!0:d==="off"||d==="false"?s[hr(c)]=!1:s[hr(c)]=void 0):o[c]==="number"?s[hr(c)]=Number.parseFloat(d??"0"):s[hr(c)]=d}}),s}function Tn(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var gn=_t,Eh,Th,Oh;if(ke()&&!((Eh=window.customElements)!=null&&Eh.get("math-field"))){window[Th=Symbol.for("io.cortexjs.mathlive")]!=null||(window[Th]={});let a=window[Symbol.for("io.cortexjs.mathlive")];a.version="0.108.2",globalThis.MathfieldElement=_t,(Oh=window.customElements)==null||Oh.define("math-field",_t)}function gy(a,s){let o=ze.singleton;return o?(o.show(),Vr(),o.currentLayer=s,o.render(),o.focus(),!0):!1}function by(){let a=window.mathVirtualKeyboard;return a.visible?a.hide({animate:!0}):a.show({animate:!0}),!1}fe({switchKeyboardLayer:gy,toggleVirtualKeyboard:by,hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"});var Rh=!1,Ih=null;function yy(){Rh||Ih||(Ih=dr().then(()=>{Rh=!0}))}var Hs=class extends HTMLElement{constructor(){if(super(),this._hasRendered=!1,this._shadowRoot=this.attachShadow({mode:"open"}),"adoptedStyleSheets"in this._shadowRoot)this._shadowRoot.adoptedStyleSheets=[or("core")];else{let a=document.createElement("style");a.textContent=zt("core"),this._shadowRoot.appendChild(a)}this._contentSlot=document.createElement("div"),this._contentSlot.style.display="none",this._contentSlot.setAttribute("part","content"),this._renderContainer=document.createElement("div"),this._renderContainer.setAttribute("part","render"),this._renderContainer.setAttribute("aria-hidden","true"),this._errorFallback=document.createElement("div"),this._errorFallback.style.display="none",this._errorFallback.setAttribute("part","error"),this._shadowRoot.appendChild(this._contentSlot),this._shadowRoot.appendChild(this._renderContainer),this._shadowRoot.appendChild(this._errorFallback),this.addEventListener("keydown",this._handleKeydown.bind(this))}static get observedAttributes(){return["mode","format","macros","letter-shape-style","min-font-scale","max-matrix-cols"]}connectedCallback(){yy(),"IntersectionObserver"in window&&!this._hasRendered?(this._observer=new IntersectionObserver(a=>{var s;a[0].isIntersecting&&!this._hasRendered&&(this.render(),(s=this._observer)==null||s.disconnect())},{rootMargin:"50px"}),this._observer.observe(this)):this.render()}disconnectedCallback(){var a;(a=this._observer)==null||a.disconnect()}attributeChangedCallback(a,s,o){s!==o&&this._hasRendered&&this.render()}_handleKeydown(a){if(this.getAttribute("tabindex")!==null&&(a.key===" "||a.key==="Enter")){a.preventDefault();let s=this.getAttribute("aria-label");if(s&&"speechSynthesis"in window){let o=new SpeechSynthesisUtterance(s);speechSynthesis.speak(o)}}}get mode(){let a=this.getAttribute("mode");return a==="textstyle"||a==="displaystyle"?a:this.getDefaultMathstyle()}set mode(a){this.setAttribute("mode",a)}get format(){let a=this.getAttribute("format");return a==="latex"||a==="ascii-math"||a==="math-json"?a:"latex"}set format(a){this.setAttribute("format",a)}get letterShapeStyle(){let a=this.getAttribute("letter-shape-style");if(a==="auto"||a==="tex"||a==="iso"||a==="french"||a==="upright")return a}set letterShapeStyle(a){a===void 0?this.removeAttribute("letter-shape-style"):this.setAttribute("letter-shape-style",a)}get macros(){var a;return(a=this.getAttribute("macros"))!=null?a:void 0}set macros(a){a===void 0?this.removeAttribute("macros"):this.setAttribute("macros",a)}get minFontScale(){let a=this.getAttribute("min-font-scale");return a?parseFloat(a):void 0}set minFontScale(a){a===void 0?this.removeAttribute("min-font-scale"):this.setAttribute("min-font-scale",String(a))}get maxMatrixCols(){let a=this.getAttribute("max-matrix-cols");return a?parseInt(a,10):void 0}set maxMatrixCols(a){a===void 0?this.removeAttribute("max-matrix-cols"):this.setAttribute("max-matrix-cols",String(a))}render(){var a,s,o;try{let c=(s=(a=this.textContent)==null?void 0:a.trim())!=null?s:"";if(!c){this._renderContainer.innerHTML="",this._errorFallback.style.display="none",this._renderContainer.style.display="none",this._removeMathML();return}this._contentSlot.textContent=c;let h,d=this.format;if(d==="ascii-math")h=hh(c);else if(d==="math-json"){let $=JSON.parse(c);h=zs($)}else h=c;let b={defaultMode:this.mode==="displaystyle"?"math":"inline-math"};if(this.letterShapeStyle&&(b.letterShapeStyle=this.letterShapeStyle),this.macros)try{b.macros=JSON.parse(this.macros)}catch($){console.warn("Invalid macros JSON:",$)}this.minFontScale!==void 0&&(b.minFontScale=this.minFontScale),this.maxMatrixCols!==void 0&&(b.maxMatrixCols=this.maxMatrixCols);let _=he(h,b);this._renderContainer.innerHTML=_,this._renderContainer.style.display=this.getDefaultDisplay(),this._errorFallback.style.display="none",this._updateAccessibility(h),this._hasRendered=!0,this.dispatchEvent(new CustomEvent("render",{bubbles:!0,composed:!0,detail:{format:d,content:h}}))}catch(c){console.error("MathLive static element render error:",c),this._renderContainer.style.display="none",this._errorFallback.textContent=(o=this.textContent)!=null?o:"",this._errorFallback.style.display="block",this._removeMathML(),this.dispatchEvent(new CustomEvent("render-error",{bubbles:!0,composed:!0,detail:{error:c,content:this.textContent}}))}}_updateAccessibility(a){if(!this.hasAttribute("aria-label"))try{let s=Is(a);this.setAttribute("aria-label",s)}catch(s){console.warn("Could not generate speakable text:",s)}this.hasAttribute("role")||this.setAttribute("role","img"),this._addMathML(a)}_addMathML(a){try{let s=Rs(a);this._mathMLContainer||(this._mathMLContainer=document.createElement("div"),this._mathMLContainer.style.position="absolute",this._mathMLContainer.style.width="1px",this._mathMLContainer.style.height="1px",this._mathMLContainer.style.overflow="hidden",this._mathMLContainer.style.clip="rect(0, 0, 0, 0)",this._mathMLContainer.setAttribute("aria-hidden","false"),this._shadowRoot.appendChild(this._mathMLContainer)),this._mathMLContainer.innerHTML=s}catch(s){console.warn("Could not generate MathML:",s)}}_removeMathML(){this._mathMLContainer&&(this._mathMLContainer.remove(),this._mathMLContainer=void 0)}},Ws=class extends Hs{getDefaultMathstyle(){return"textstyle"}getDefaultDisplay(){return"inline-flex"}},Us=class extends Hs{getDefaultMathstyle(){return"displaystyle"}getDefaultDisplay(){return"flex"}};function xy(){var a,s,o,c;typeof window<"u"&&((a=window.customElements)!=null&&a.get("math-span")||(s=window.customElements)==null||s.define("math-span",Ws),(o=window.customElements)!=null&&o.get("math-div")||(c=window.customElements)==null||c.define("math-div",Us))}xy();function Gt(){var a;return globalThis[a=Symbol.for("io.cortexjs.mathlive")]!=null||(globalThis[a]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}class SourceLocation{constructor(s,o,c){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=s,this.start=o,this.end=c}static range(s,o){return o?!s||!s.loc||!o.loc||s.loc.lexer!==o.loc.lexer?null:new SourceLocation(s.loc.lexer,s.loc.start,o.loc.end):s&&s.loc}}class Token{constructor(s,o){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=s,this.loc=o}range(s,o){return new Token(o,SourceLocation.range(this,s))}}class ParseError{constructor(s,o){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var c="KaTeX parse error: "+s,h,d,b=o&&o.loc;if(b&&b.start<=b.end){var _=b.lexer.input;h=b.start,d=b.end,h===_.length?c+=" at end of input: ":c+=" at position "+(h+1)+": ";var $=_.slice(h,d).replace(/[^]/g,"$&"),j;h>15?j=""+_.slice(h-15,h):j=_.slice(0,h);var Xt;d+15<_.length?Xt=_.slice(d,d+15)+"":Xt=_.slice(d),c+=j+$+Xt}var Lt=new Error(c);return Lt.name="ParseError",Lt.__proto__=ParseError.prototype,Lt.position=h,h!=null&&d!=null&&(Lt.length=d-h),Lt.rawMessage=s,Lt}}ParseError.prototype.__proto__=Error.prototype;var deflt=function a(s,o){return s===void 0?o:s},uppercase=/([A-Z])/g,hyphenate=function a(s){return s.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(a){return String(a).replace(ESCAPE_REGEX,s=>ESCAPE_LOOKUP[s])}var getBaseElem=function a(s){return s.type==="ordgroup"||s.type==="color"?s.body.length===1?a(s.body[0]):s:s.type==="font"?a(s.body):s},isCharacterBox=function a(s){var o=getBaseElem(s);return o.type==="mathord"||o.type==="textord"||o.type==="atom"},assert=function a(s){if(!s)throw new Error("Expected non-null, but got "+String(s));return s},protocolFromUrl=function a(s){var o=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(s);return o?o[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(o[1])?null:o[1].toLowerCase():"_relative"},utils={deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:a=>"#"+a},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(a,s)=>(s.push(a),s)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:a=>Math.max(0,a),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:a=>Math.max(0,a),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:a=>Math.max(0,a),cli:"-e, --max-expand <n>",cliProcessor:a=>a==="Infinity"?1/0:parseInt(a)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(a){if(a.default)return a.default;var s=a.type,o=Array.isArray(s)?s[0]:s;if(typeof o!="string")return o.enum[0];switch(o){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(s){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,s=s||{};for(var o in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(o)){var c=SETTINGS_SCHEMA[o];this[o]=s[o]!==void 0?c.processor?c.processor(s[o]):s[o]:getDefaultValue(c)}}reportNonstrict(s,o,c){var h=this.strict;if(typeof h=="function"&&(h=h(s,o,c)),!(!h||h==="ignore")){if(h===!0||h==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(o+" ["+s+"]"),c);h==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(o+" ["+s+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+h+"': "+o+" ["+s+"]"))}}useStrictBehavior(s,o,c){var h=this.strict;if(typeof h=="function")try{h=h(s,o,c)}catch{h="error"}return!h||h==="ignore"?!1:h===!0||h==="error"?!0:h==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(o+" ["+s+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+h+"': "+o+" ["+s+"]")),!1)}isTrusted(s){if(s.url&&!s.protocol){var o=utils.protocolFromUrl(s.url);if(o==null)return!1;s.protocol=o}var c=typeof this.trust=="function"?this.trust(s):this.trust;return!!c}}class Style{constructor(s,o,c){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=s,this.size=o,this.cramped=c}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc=1,T=2,Tc=3,S=4,Sc=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc,0,!0),new Style(T,1,!1),new Style(Tc,1,!0),new Style(S,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S,Sc,S,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T,Tc,S,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D,Dc,T,Tc,T,Tc,T,Tc],Style$1={DISPLAY:styles[D],TEXT:styles[T],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(a){for(var s=0;s<scriptData.length;s++)for(var o=scriptData[s],c=0;c<o.blocks.length;c++){var h=o.blocks[c];if(a>=h[0]&&a<=h[1])return o.name}return null}var allBlocks=[];scriptData.forEach(a=>a.blocks.forEach(s=>allBlocks.push(...s)));function supportedCodepoint(a){for(var s=0;s<allBlocks.length;s+=2)if(a>=allBlocks[s]&&a<=allBlocks[s+1])return!0;return!1}var hLinePad=80,sqrtMain=function a(s,o){return"M95,"+(622+s+o)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+s/2.075+" -"+s+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+s)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+s)+" "+o+"h400000v"+(40+s)+"h-400000z"},sqrtSize1=function a(s,o){return"M263,"+(601+s+o)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+s/2.084+" -"+s+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+s)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+s)+" "+o+"h400000v"+(40+s)+"h-400000z"},sqrtSize2=function a(s,o){return"M983 "+(10+s+o)+`
l`+s/3.13+" -"+s+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+s)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+s)+" "+o+"h400000v"+(40+s)+"h-400000z"},sqrtSize3=function a(s,o){return"M424,"+(2398+s+o)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+s/4.223+" -"+s+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+s)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+s)+" "+o+`
h400000v`+(40+s)+"h-400000z"},sqrtSize4=function a(s,o){return"M473,"+(2713+s+o)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+s/5.298+" -"+s+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+s)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+s)+" "+o+"h400000v"+(40+s)+"H1017.7z"},phasePath=function a(s){var o=s/2;return"M400000 "+s+" H0 L"+o+" 0 l65 45 L145 "+(s-80)+" H400000z"},sqrtTall=function a(s,o,c){var h=c-54-o-s;return"M702 "+(s+o)+"H400000"+(40+s)+`
H742v`+h+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+o+"H400000v"+(40+s)+"H742z"},sqrtPath=function a(s,o,c){o=1e3*o;var h="";switch(s){case"sqrtMain":h=sqrtMain(o,hLinePad);break;case"sqrtSize1":h=sqrtSize1(o,hLinePad);break;case"sqrtSize2":h=sqrtSize2(o,hLinePad);break;case"sqrtSize3":h=sqrtSize3(o,hLinePad);break;case"sqrtSize4":h=sqrtSize4(o,hLinePad);break;case"sqrtTall":h=sqrtTall(o,hLinePad,c)}return h},innerPath=function a(s,o){switch(s){case"":return"M291 0 H417 V"+o+" H291z M291 0 H417 V"+o+" H291z";case"":return"M145 0 H188 V"+o+" H145z M145 0 H188 V"+o+" H145z";case"":return"M145 0 H188 V"+o+" H145z M145 0 H188 V"+o+" H145z"+("M367 0 H410 V"+o+" H367z M367 0 H410 V"+o+" H367z");case"":return"M457 0 H583 V"+o+" H457z M457 0 H583 V"+o+" H457z";case"":return"M319 0 H403 V"+o+" H319z M319 0 H403 V"+o+" H319z";case"":return"M263 0 H347 V"+o+" H263z M263 0 H347 V"+o+" H263z";case"":return"M384 0 H504 V"+o+" H384z M384 0 H504 V"+o+" H384z";case"":return"M312 0 H355 V"+o+" H312z M312 0 H355 V"+o+" H312z";case"":return"M257 0 H300 V"+o+" H257z M257 0 H300 V"+o+" H257z"+("M478 0 H521 V"+o+" H478z M478 0 H521 V"+o+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function a(s,o){switch(s){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+o+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+o+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+o+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+o+" v1759 h84z";case"vert":return"M145 15 v585 v"+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+o+" v585 h43z";case"doublevert":return"M145 15 v585 v"+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+o+` v585 h43z
M367 15 v585 v`+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+o+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+o+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+o+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+o+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+o+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+o+` v602 h84z
M403 1759 V0 H319 V1759 v`+o+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+o+` v602 h84z
M347 1759 V0 h-84 V1759 v`+o+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(o+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(o+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(o+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(o+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(s){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=s,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(s){return this.classes.includes(s)}toNode(){for(var s=document.createDocumentFragment(),o=0;o<this.children.length;o++)s.appendChild(this.children[o].toNode());return s}toMarkup(){for(var s="",o=0;o<this.children.length;o++)s+=this.children[o].toMarkup();return s}toText(){var s=o=>o.toText();return this.children.map(s).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function setFontMetrics(a,s){fontMetricsData[a]=s}function getCharacterMetrics(a,s,o){if(!fontMetricsData[s])throw new Error("Font metrics not found for font: "+s+".");var c=a.charCodeAt(0),h=fontMetricsData[s][c];if(!h&&a[0]in extraCharacterMap&&(c=extraCharacterMap[a[0]].charCodeAt(0),h=fontMetricsData[s][c]),!h&&o==="text"&&supportedCodepoint(c)&&(h=fontMetricsData[s][77]),h)return{depth:h[0],height:h[1],italic:h[2],skew:h[3],width:h[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(a){var s;if(a>=5?s=0:a>=3?s=1:s=2,!fontMetricsBySizeIndex[s]){var o=fontMetricsBySizeIndex[s]={cssEmPerMu:sigmasAndXis.quad[s]/18};for(var c in sigmasAndXis)sigmasAndXis.hasOwnProperty(c)&&(o[c]=sigmasAndXis[c][s])}return fontMetricsBySizeIndex[s]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function a(s,o){return o.size<2?s:sizeStyleMap[s-1][o.size-1]};class Options{constructor(s){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=s.style,this.color=s.color,this.size=s.size||Options.BASESIZE,this.textSize=s.textSize||this.size,this.phantom=!!s.phantom,this.font=s.font||"",this.fontFamily=s.fontFamily||"",this.fontWeight=s.fontWeight||"",this.fontShape=s.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=s.maxSize,this.minRuleThickness=s.minRuleThickness,this._fontMetrics=void 0}extend(s){var o={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var c in s)s.hasOwnProperty(c)&&(o[c]=s[c]);return new Options(o)}havingStyle(s){return this.style===s?this:this.extend({style:s,size:sizeAtStyle(this.textSize,s)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(s){return this.size===s&&this.textSize===s?this:this.extend({style:this.style.text(),size:s,textSize:s,sizeMultiplier:sizeMultipliers[s-1]})}havingBaseStyle(s){s=s||this.style.text();var o=sizeAtStyle(Options.BASESIZE,s);return this.size===o&&this.textSize===Options.BASESIZE&&this.style===s?this:this.extend({style:s,size:o})}havingBaseSizing(){var s;switch(this.style.id){case 4:case 5:s=3;break;case 6:case 7:s=1;break;default:s=6}return this.extend({style:this.style.text(),size:s})}withColor(s){return this.extend({color:s})}withPhantom(){return this.extend({phantom:!0})}withFont(s){return this.extend({font:s})}withTextFontFamily(s){return this.extend({fontFamily:s,font:""})}withTextFontWeight(s){return this.extend({fontWeight:s,font:""})}withTextFontShape(s){return this.extend({fontShape:s,font:""})}sizingClasses(s){return s.size!==this.size?["sizing","reset-size"+s.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function a(s){return typeof s!="string"&&(s=s.unit),s in ptPerUnit||s in relativeUnit||s==="ex"},calculateSize=function a(s,o){var c;if(s.unit in ptPerUnit)c=ptPerUnit[s.unit]/o.fontMetrics().ptPerEm/o.sizeMultiplier;else if(s.unit==="mu")c=o.fontMetrics().cssEmPerMu;else{var h;if(o.style.isTight()?h=o.havingStyle(o.style.text()):h=o,s.unit==="ex")c=h.fontMetrics().xHeight;else if(s.unit==="em")c=h.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+s.unit+"'");h!==o&&(c*=h.sizeMultiplier/o.sizeMultiplier)}return Math.min(s.number*c,o.maxSize)},makeEm=function a(s){return+s.toFixed(4)+"em"},createClass=function a(s){return s.filter(o=>o).join(" ")},initNode=function a(s,o,c){if(this.classes=s||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=c||{},o){o.style.isTight()&&this.classes.push("mtight");var h=o.getColor();h&&(this.style.color=h)}},toNode=function a(s){var o=document.createElement(s);o.className=createClass(this.classes);for(var c in this.style)this.style.hasOwnProperty(c)&&(o.style[c]=this.style[c]);for(var h in this.attributes)this.attributes.hasOwnProperty(h)&&o.setAttribute(h,this.attributes[h]);for(var d=0;d<this.children.length;d++)o.appendChild(this.children[d].toNode());return o},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function a(s){var o="<"+s;this.classes.length&&(o+=' class="'+utils.escape(createClass(this.classes))+'"');var c="";for(var h in this.style)this.style.hasOwnProperty(h)&&(c+=utils.hyphenate(h)+":"+this.style[h]+";");c&&(o+=' style="'+utils.escape(c)+'"');for(var d in this.attributes)if(this.attributes.hasOwnProperty(d)){if(invalidAttributeNameRegex.test(d))throw new ParseError("Invalid attribute name '"+d+"'");o+=" "+d+'="'+utils.escape(this.attributes[d])+'"'}o+=">";for(var b=0;b<this.children.length;b++)o+=this.children[b].toMarkup();return o+="</"+s+">",o};class Span{constructor(s,o,c,h){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,s,c,h),this.children=o||[]}setAttribute(s,o){this.attributes[s]=o}hasClass(s){return this.classes.includes(s)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(s,o,c,h){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,o,h),this.children=c||[],this.setAttribute("href",s)}setAttribute(s,o){this.attributes[s]=o}hasClass(s){return this.classes.includes(s)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(s,o,c){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=o,this.src=s,this.classes=["mord"],this.style=c}hasClass(s){return this.classes.includes(s)}toNode(){var s=document.createElement("img");s.src=this.src,s.alt=this.alt,s.className="mord";for(var o in this.style)this.style.hasOwnProperty(o)&&(s.style[o]=this.style[o]);return s}toMarkup(){var s='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),o="";for(var c in this.style)this.style.hasOwnProperty(c)&&(o+=utils.hyphenate(c)+":"+this.style[c]+";");return o&&(s+=' style="'+utils.escape(o)+'"'),s+="'/>",s}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(s,o,c,h,d,b,_,$){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=s,this.height=o||0,this.depth=c||0,this.italic=h||0,this.skew=d||0,this.width=b||0,this.classes=_||[],this.style=$||{},this.maxFontSize=0;var j=scriptFromCodepoint(this.text.charCodeAt(0));j&&this.classes.push(j+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(s){return this.classes.includes(s)}toNode(){var s=document.createTextNode(this.text),o=null;this.italic>0&&(o=document.createElement("span"),o.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(o=o||document.createElement("span"),o.className=createClass(this.classes));for(var c in this.style)this.style.hasOwnProperty(c)&&(o=o||document.createElement("span"),o.style[c]=this.style[c]);return o?(o.appendChild(s),o):s}toMarkup(){var s=!1,o="<span";this.classes.length&&(s=!0,o+=' class="',o+=utils.escape(createClass(this.classes)),o+='"');var c="";this.italic>0&&(c+="margin-right:"+this.italic+"em;");for(var h in this.style)this.style.hasOwnProperty(h)&&(c+=utils.hyphenate(h)+":"+this.style[h]+";");c&&(s=!0,o+=' style="'+utils.escape(c)+'"');var d=utils.escape(this.text);return s?(o+=">",o+=d,o+="</span>",o):d}}class SvgNode{constructor(s,o){this.children=void 0,this.attributes=void 0,this.children=s||[],this.attributes=o||{}}toNode(){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg");for(var c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&o.setAttribute(c,this.attributes[c]);for(var h=0;h<this.children.length;h++)o.appendChild(this.children[h].toNode());return o}toMarkup(){var s='<svg xmlns="http://www.w3.org/2000/svg"';for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&(s+=" "+o+'="'+utils.escape(this.attributes[o])+'"');s+=">";for(var c=0;c<this.children.length;c++)s+=this.children[c].toMarkup();return s+="</svg>",s}}class PathNode{constructor(s,o){this.pathName=void 0,this.alternate=void 0,this.pathName=s,this.alternate=o}toNode(){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"path");return this.alternate?o.setAttribute("d",this.alternate):o.setAttribute("d",path[this.pathName]),o}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(s){this.attributes=void 0,this.attributes=s||{}}toNode(){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"line");for(var c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&o.setAttribute(c,this.attributes[c]);return o}toMarkup(){var s="<line";for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&(s+=" "+o+'="'+utils.escape(this.attributes[o])+'"');return s+="/>",s}}function assertSymbolDomNode(a){if(a instanceof SymbolNode)return a;throw new Error("Expected symbolNode but got "+String(a)+".")}function assertSpan(a){if(a instanceof Span)return a;throw new Error("Expected span<HtmlDomNode> but got "+String(a)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(a,s,o,c,h,d){symbols[a][h]={font:s,group:o,replace:c},d&&c&&(symbols[a][c]=symbols[a][h])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"","\\equiv",!0);defineSymbol(math,main,rel,"","\\prec",!0);defineSymbol(math,main,rel,"","\\succ",!0);defineSymbol(math,main,rel,"","\\sim",!0);defineSymbol(math,main,rel,"","\\perp");defineSymbol(math,main,rel,"","\\preceq",!0);defineSymbol(math,main,rel,"","\\succeq",!0);defineSymbol(math,main,rel,"","\\simeq",!0);defineSymbol(math,main,rel,"","\\mid",!0);defineSymbol(math,main,rel,"","\\ll",!0);defineSymbol(math,main,rel,"","\\gg",!0);defineSymbol(math,main,rel,"","\\asymp",!0);defineSymbol(math,main,rel,"","\\parallel");defineSymbol(math,main,rel,"","\\bowtie",!0);defineSymbol(math,main,rel,"","\\smile",!0);defineSymbol(math,main,rel,"","\\sqsubseteq",!0);defineSymbol(math,main,rel,"","\\sqsupseteq",!0);defineSymbol(math,main,rel,"","\\doteq",!0);defineSymbol(math,main,rel,"","\\frown",!0);defineSymbol(math,main,rel,"","\\ni",!0);defineSymbol(math,main,rel,"","\\propto",!0);defineSymbol(math,main,rel,"","\\vdash",!0);defineSymbol(math,main,rel,"","\\dashv",!0);defineSymbol(math,main,rel,"","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"","\\aleph",!0);defineSymbol(math,main,textord,"","\\forall",!0);defineSymbol(math,main,textord,"","\\hbar",!0);defineSymbol(math,main,textord,"","\\exists",!0);defineSymbol(math,main,textord,"","\\nabla",!0);defineSymbol(math,main,textord,"","\\flat",!0);defineSymbol(math,main,textord,"","\\ell",!0);defineSymbol(math,main,textord,"","\\natural",!0);defineSymbol(math,main,textord,"","\\clubsuit",!0);defineSymbol(math,main,textord,"","\\wp",!0);defineSymbol(math,main,textord,"","\\sharp",!0);defineSymbol(math,main,textord,"","\\diamondsuit",!0);defineSymbol(math,main,textord,"","\\Re",!0);defineSymbol(math,main,textord,"","\\heartsuit",!0);defineSymbol(math,main,textord,"","\\Im",!0);defineSymbol(math,main,textord,"","\\spadesuit",!0);defineSymbol(math,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math,main,close,"","\\rmoustache",!0);defineSymbol(math,main,open,"","\\lmoustache",!0);defineSymbol(math,main,close,"","\\rgroup",!0);defineSymbol(math,main,open,"","\\lgroup",!0);defineSymbol(math,main,bin,"","\\mp",!0);defineSymbol(math,main,bin,"","\\ominus",!0);defineSymbol(math,main,bin,"","\\uplus",!0);defineSymbol(math,main,bin,"","\\sqcap",!0);defineSymbol(math,main,bin,"","\\ast");defineSymbol(math,main,bin,"","\\sqcup",!0);defineSymbol(math,main,bin,"","\\bigcirc",!0);defineSymbol(math,main,bin,"","\\bullet",!0);defineSymbol(math,main,bin,"","\\ddagger");defineSymbol(math,main,bin,"","\\wr",!0);defineSymbol(math,main,bin,"","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"","\\longleftarrow",!0);defineSymbol(math,main,rel,"","\\Leftarrow",!0);defineSymbol(math,main,rel,"","\\Longleftarrow",!0);defineSymbol(math,main,rel,"","\\longrightarrow",!0);defineSymbol(math,main,rel,"","\\Rightarrow",!0);defineSymbol(math,main,rel,"","\\Longrightarrow",!0);defineSymbol(math,main,rel,"","\\leftrightarrow",!0);defineSymbol(math,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\mapsto",!0);defineSymbol(math,main,rel,"","\\longmapsto",!0);defineSymbol(math,main,rel,"","\\nearrow",!0);defineSymbol(math,main,rel,"","\\hookleftarrow",!0);defineSymbol(math,main,rel,"","\\hookrightarrow",!0);defineSymbol(math,main,rel,"","\\searrow",!0);defineSymbol(math,main,rel,"","\\leftharpoonup",!0);defineSymbol(math,main,rel,"","\\rightharpoonup",!0);defineSymbol(math,main,rel,"","\\swarrow",!0);defineSymbol(math,main,rel,"","\\leftharpoondown",!0);defineSymbol(math,main,rel,"","\\rightharpoondown",!0);defineSymbol(math,main,rel,"","\\nwarrow",!0);defineSymbol(math,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"","\\lneq",!0);defineSymbol(math,ams,rel,"","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"","\\lnsim",!0);defineSymbol(math,ams,rel,"","\\lnapprox",!0);defineSymbol(math,ams,rel,"","\\nprec",!0);defineSymbol(math,ams,rel,"","\\npreceq",!0);defineSymbol(math,ams,rel,"","\\precnsim",!0);defineSymbol(math,ams,rel,"","\\precnapprox",!0);defineSymbol(math,ams,rel,"","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"","\\nmid",!0);defineSymbol(math,ams,rel,"","\\nvdash",!0);defineSymbol(math,ams,rel,"","\\nvDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleleft");defineSymbol(math,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"","\\gneq",!0);defineSymbol(math,ams,rel,"","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"","\\gnsim",!0);defineSymbol(math,ams,rel,"","\\gnapprox",!0);defineSymbol(math,ams,rel,"","\\nsucc",!0);defineSymbol(math,ams,rel,"","\\nsucceq",!0);defineSymbol(math,ams,rel,"","\\succnsim",!0);defineSymbol(math,ams,rel,"","\\succnapprox",!0);defineSymbol(math,ams,rel,"","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"","\\nparallel",!0);defineSymbol(math,ams,rel,"","\\nVDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleright");defineSymbol(math,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"","\\nVdash",!0);defineSymbol(math,ams,rel,"","\\precneqq",!0);defineSymbol(math,ams,rel,"","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"","\\unlhd");defineSymbol(math,ams,bin,"","\\unrhd");defineSymbol(math,ams,rel,"","\\nleftarrow",!0);defineSymbol(math,ams,rel,"","\\nrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"","\\nRightarrow",!0);defineSymbol(math,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"","\\vartriangle");defineSymbol(math,ams,textord,"","\\hslash");defineSymbol(math,ams,textord,"","\\triangledown");defineSymbol(math,ams,textord,"","\\lozenge");defineSymbol(math,ams,textord,"","\\circledS");defineSymbol(math,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math,ams,textord,"","\\measuredangle",!0);defineSymbol(math,ams,textord,"","\\nexists");defineSymbol(math,ams,textord,"","\\mho");defineSymbol(math,ams,textord,"","\\Finv",!0);defineSymbol(math,ams,textord,"","\\Game",!0);defineSymbol(math,ams,textord,"","\\backprime");defineSymbol(math,ams,textord,"","\\blacktriangle");defineSymbol(math,ams,textord,"","\\blacktriangledown");defineSymbol(math,ams,textord,"","\\blacksquare");defineSymbol(math,ams,textord,"","\\blacklozenge");defineSymbol(math,ams,textord,"","\\bigstar");defineSymbol(math,ams,textord,"","\\sphericalangle",!0);defineSymbol(math,ams,textord,"","\\complement",!0);defineSymbol(math,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math,ams,textord,"","\\diagup");defineSymbol(math,ams,textord,"","\\diagdown");defineSymbol(math,ams,textord,"","\\square");defineSymbol(math,ams,textord,"","\\Box");defineSymbol(math,ams,textord,"","\\Diamond");defineSymbol(math,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math,ams,textord,"","\\beth",!0);defineSymbol(math,ams,textord,"","\\daleth",!0);defineSymbol(math,ams,textord,"","\\gimel",!0);defineSymbol(math,ams,textord,"","\\digamma",!0);defineSymbol(math,ams,textord,"","\\varkappa");defineSymbol(math,ams,open,"","\\@ulcorner",!0);defineSymbol(math,ams,close,"","\\@urcorner",!0);defineSymbol(math,ams,open,"","\\@llcorner",!0);defineSymbol(math,ams,close,"","\\@lrcorner",!0);defineSymbol(math,ams,rel,"","\\leqq",!0);defineSymbol(math,ams,rel,"","\\leqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantless",!0);defineSymbol(math,ams,rel,"","\\lesssim",!0);defineSymbol(math,ams,rel,"","\\lessapprox",!0);defineSymbol(math,ams,rel,"","\\approxeq",!0);defineSymbol(math,ams,bin,"","\\lessdot");defineSymbol(math,ams,rel,"","\\lll",!0);defineSymbol(math,ams,rel,"","\\lessgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"","\\doteqdot");defineSymbol(math,ams,rel,"","\\risingdotseq",!0);defineSymbol(math,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"","\\backsim",!0);defineSymbol(math,ams,rel,"","\\backsimeq",!0);defineSymbol(math,ams,rel,"","\\subseteqq",!0);defineSymbol(math,ams,rel,"","\\Subset",!0);defineSymbol(math,ams,rel,"","\\sqsubset",!0);defineSymbol(math,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"","\\precsim",!0);defineSymbol(math,ams,rel,"","\\precapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleleft");defineSymbol(math,ams,rel,"","\\trianglelefteq");defineSymbol(math,ams,rel,"","\\vDash",!0);defineSymbol(math,ams,rel,"","\\Vvdash",!0);defineSymbol(math,ams,rel,"","\\smallsmile");defineSymbol(math,ams,rel,"","\\smallfrown");defineSymbol(math,ams,rel,"","\\bumpeq",!0);defineSymbol(math,ams,rel,"","\\Bumpeq",!0);defineSymbol(math,ams,rel,"","\\geqq",!0);defineSymbol(math,ams,rel,"","\\geqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"","\\gtrsim",!0);defineSymbol(math,ams,rel,"","\\gtrapprox",!0);defineSymbol(math,ams,bin,"","\\gtrdot");defineSymbol(math,ams,rel,"","\\ggg",!0);defineSymbol(math,ams,rel,"","\\gtrless",!0);defineSymbol(math,ams,rel,"","\\gtreqless",!0);defineSymbol(math,ams,rel,"","\\gtreqqless",!0);defineSymbol(math,ams,rel,"","\\eqcirc",!0);defineSymbol(math,ams,rel,"","\\circeq",!0);defineSymbol(math,ams,rel,"","\\triangleq",!0);defineSymbol(math,ams,rel,"","\\thicksim");defineSymbol(math,ams,rel,"","\\thickapprox");defineSymbol(math,ams,rel,"","\\supseteqq",!0);defineSymbol(math,ams,rel,"","\\Supset",!0);defineSymbol(math,ams,rel,"","\\sqsupset",!0);defineSymbol(math,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"","\\succsim",!0);defineSymbol(math,ams,rel,"","\\succapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleright");defineSymbol(math,ams,rel,"","\\trianglerighteq");defineSymbol(math,ams,rel,"","\\Vdash",!0);defineSymbol(math,ams,rel,"","\\shortmid");defineSymbol(math,ams,rel,"","\\shortparallel");defineSymbol(math,ams,rel,"","\\between",!0);defineSymbol(math,ams,rel,"","\\pitchfork",!0);defineSymbol(math,ams,rel,"","\\varpropto");defineSymbol(math,ams,rel,"","\\blacktriangleleft");defineSymbol(math,ams,rel,"","\\therefore",!0);defineSymbol(math,ams,rel,"","\\backepsilon");defineSymbol(math,ams,rel,"","\\blacktriangleright");defineSymbol(math,ams,rel,"","\\because",!0);defineSymbol(math,ams,rel,"","\\llless");defineSymbol(math,ams,rel,"","\\gggtr");defineSymbol(math,ams,bin,"","\\lhd");defineSymbol(math,ams,bin,"","\\rhd");defineSymbol(math,ams,rel,"","\\eqsim",!0);defineSymbol(math,main,rel,"","\\Join");defineSymbol(math,ams,rel,"","\\Doteq",!0);defineSymbol(math,ams,bin,"","\\dotplus",!0);defineSymbol(math,ams,bin,"","\\smallsetminus");defineSymbol(math,ams,bin,"","\\Cap",!0);defineSymbol(math,ams,bin,"","\\Cup",!0);defineSymbol(math,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"","\\boxminus",!0);defineSymbol(math,ams,bin,"","\\boxplus",!0);defineSymbol(math,ams,bin,"","\\divideontimes",!0);defineSymbol(math,ams,bin,"","\\ltimes",!0);defineSymbol(math,ams,bin,"","\\rtimes",!0);defineSymbol(math,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"","\\curlywedge",!0);defineSymbol(math,ams,bin,"","\\curlyvee",!0);defineSymbol(math,ams,bin,"","\\circleddash",!0);defineSymbol(math,ams,bin,"","\\circledast",!0);defineSymbol(math,ams,bin,"","\\centerdot");defineSymbol(math,ams,bin,"","\\intercal",!0);defineSymbol(math,ams,bin,"","\\doublecap");defineSymbol(math,ams,bin,"","\\doublecup");defineSymbol(math,ams,bin,"","\\boxtimes",!0);defineSymbol(math,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowleft",!0);defineSymbol(math,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"","\\Lsh",!0);defineSymbol(math,ams,rel,"","\\upuparrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math,main,rel,"","\\origof",!0);defineSymbol(math,main,rel,"","\\imageof",!0);defineSymbol(math,ams,rel,"","\\multimap",!0);defineSymbol(math,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowright",!0);defineSymbol(math,ams,rel,"","\\curvearrowright",!0);defineSymbol(math,ams,rel,"","\\circlearrowright",!0);defineSymbol(math,ams,rel,"","\\Rsh",!0);defineSymbol(math,ams,rel,"","\\downdownarrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonright",!0);defineSymbol(math,ams,rel,"","\\downharpoonright",!0);defineSymbol(math,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\leadsto");defineSymbol(math,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"","\\restriction");defineSymbol(math,main,textord,"","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"","\\angle",!0);defineSymbol(math,main,textord,"","\\infty",!0);defineSymbol(math,main,textord,"","\\prime");defineSymbol(math,main,textord,"","\\triangle");defineSymbol(math,main,textord,"","\\Gamma",!0);defineSymbol(math,main,textord,"","\\Delta",!0);defineSymbol(math,main,textord,"","\\Theta",!0);defineSymbol(math,main,textord,"","\\Lambda",!0);defineSymbol(math,main,textord,"","\\Xi",!0);defineSymbol(math,main,textord,"","\\Pi",!0);defineSymbol(math,main,textord,"","\\Sigma",!0);defineSymbol(math,main,textord,"","\\Upsilon",!0);defineSymbol(math,main,textord,"","\\Phi",!0);defineSymbol(math,main,textord,"","\\Psi",!0);defineSymbol(math,main,textord,"","\\Omega",!0);defineSymbol(math,main,textord,"A","");defineSymbol(math,main,textord,"B","");defineSymbol(math,main,textord,"E","");defineSymbol(math,main,textord,"Z","");defineSymbol(math,main,textord,"H","");defineSymbol(math,main,textord,"I","");defineSymbol(math,main,textord,"K","");defineSymbol(math,main,textord,"M","");defineSymbol(math,main,textord,"N","");defineSymbol(math,main,textord,"O","");defineSymbol(math,main,textord,"P","");defineSymbol(math,main,textord,"T","");defineSymbol(math,main,textord,"X","");defineSymbol(math,main,textord,"","\\neg",!0);defineSymbol(math,main,textord,"","\\lnot");defineSymbol(math,main,textord,"","\\top");defineSymbol(math,main,textord,"","\\bot");defineSymbol(math,main,textord,"","\\emptyset");defineSymbol(math,ams,textord,"","\\varnothing");defineSymbol(math,main,mathord,"","\\alpha",!0);defineSymbol(math,main,mathord,"","\\beta",!0);defineSymbol(math,main,mathord,"","\\gamma",!0);defineSymbol(math,main,mathord,"","\\delta",!0);defineSymbol(math,main,mathord,"","\\epsilon",!0);defineSymbol(math,main,mathord,"","\\zeta",!0);defineSymbol(math,main,mathord,"","\\eta",!0);defineSymbol(math,main,mathord,"","\\theta",!0);defineSymbol(math,main,mathord,"","\\iota",!0);defineSymbol(math,main,mathord,"","\\kappa",!0);defineSymbol(math,main,mathord,"","\\lambda",!0);defineSymbol(math,main,mathord,"","\\mu",!0);defineSymbol(math,main,mathord,"","\\nu",!0);defineSymbol(math,main,mathord,"","\\xi",!0);defineSymbol(math,main,mathord,"","\\omicron",!0);defineSymbol(math,main,mathord,"","\\pi",!0);defineSymbol(math,main,mathord,"","\\rho",!0);defineSymbol(math,main,mathord,"","\\sigma",!0);defineSymbol(math,main,mathord,"","\\tau",!0);defineSymbol(math,main,mathord,"","\\upsilon",!0);defineSymbol(math,main,mathord,"","\\phi",!0);defineSymbol(math,main,mathord,"","\\chi",!0);defineSymbol(math,main,mathord,"","\\psi",!0);defineSymbol(math,main,mathord,"","\\omega",!0);defineSymbol(math,main,mathord,"","\\varepsilon",!0);defineSymbol(math,main,mathord,"","\\vartheta",!0);defineSymbol(math,main,mathord,"","\\varpi",!0);defineSymbol(math,main,mathord,"","\\varrho",!0);defineSymbol(math,main,mathord,"","\\varsigma",!0);defineSymbol(math,main,mathord,"","\\varphi",!0);defineSymbol(math,main,bin,"","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"","-",!0);defineSymbol(math,main,bin,"","\\cdot",!0);defineSymbol(math,main,bin,"","\\circ",!0);defineSymbol(math,main,bin,"","\\div",!0);defineSymbol(math,main,bin,"","\\pm",!0);defineSymbol(math,main,bin,"","\\times",!0);defineSymbol(math,main,bin,"","\\cap",!0);defineSymbol(math,main,bin,"","\\cup",!0);defineSymbol(math,main,bin,"","\\setminus",!0);defineSymbol(math,main,bin,"","\\land");defineSymbol(math,main,bin,"","\\lor");defineSymbol(math,main,bin,"","\\wedge",!0);defineSymbol(math,main,bin,"","\\vee",!0);defineSymbol(math,main,textord,"","\\surd");defineSymbol(math,main,open,"","\\langle",!0);defineSymbol(math,main,open,"","\\lvert");defineSymbol(math,main,open,"","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"","\\rangle",!0);defineSymbol(math,main,close,"","\\rvert");defineSymbol(math,main,close,"","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"","\\approx",!0);defineSymbol(math,main,rel,"","\\cong",!0);defineSymbol(math,main,rel,"","\\ge");defineSymbol(math,main,rel,"","\\geq",!0);defineSymbol(math,main,rel,"","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"","\\subset",!0);defineSymbol(math,main,rel,"","\\supset",!0);defineSymbol(math,main,rel,"","\\subseteq",!0);defineSymbol(math,main,rel,"","\\supseteq",!0);defineSymbol(math,ams,rel,"","\\nsubseteq",!0);defineSymbol(math,ams,rel,"","\\nsupseteq",!0);defineSymbol(math,main,rel,"","\\models");defineSymbol(math,main,rel,"","\\leftarrow",!0);defineSymbol(math,main,rel,"","\\le");defineSymbol(math,main,rel,"","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"","\\rightarrow",!0);defineSymbol(math,main,rel,"","\\to");defineSymbol(math,ams,rel,"","\\ngeq",!0);defineSymbol(math,ams,rel,"","\\nleq",!0);defineSymbol(math,main,spacing,"","\\ ");defineSymbol(math,main,spacing,"","\\space");defineSymbol(math,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"","\\barwedge",!0);defineSymbol(math,ams,bin,"","\\veebar",!0);defineSymbol(math,main,bin,"","\\odot",!0);defineSymbol(math,main,bin,"","\\oplus",!0);defineSymbol(math,main,bin,"","\\otimes",!0);defineSymbol(math,main,textord,"","\\partial",!0);defineSymbol(math,main,bin,"","\\oslash",!0);defineSymbol(math,ams,bin,"","\\circledcirc",!0);defineSymbol(math,ams,bin,"","\\boxdot",!0);defineSymbol(math,main,bin,"","\\bigtriangleup");defineSymbol(math,main,bin,"","\\bigtriangledown");defineSymbol(math,main,bin,"","\\dagger");defineSymbol(math,main,bin,"","\\diamond");defineSymbol(math,main,bin,"","\\star");defineSymbol(math,main,bin,"","\\triangleleft");defineSymbol(math,main,bin,"","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"","\\lfloor",!0);defineSymbol(math,main,close,"","\\rfloor",!0);defineSymbol(math,main,open,"","\\lceil",!0);defineSymbol(math,main,close,"","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"","|");defineSymbol(math,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"","\\|");defineSymbol(math,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"","\\uparrow",!0);defineSymbol(math,main,rel,"","\\Uparrow",!0);defineSymbol(math,main,rel,"","\\downarrow",!0);defineSymbol(math,main,rel,"","\\Downarrow",!0);defineSymbol(math,main,rel,"","\\updownarrow",!0);defineSymbol(math,main,rel,"","\\Updownarrow",!0);defineSymbol(math,main,op,"","\\coprod");defineSymbol(math,main,op,"","\\bigvee");defineSymbol(math,main,op,"","\\bigwedge");defineSymbol(math,main,op,"","\\biguplus");defineSymbol(math,main,op,"","\\bigcap");defineSymbol(math,main,op,"","\\bigcup");defineSymbol(math,main,op,"","\\int");defineSymbol(math,main,op,"","\\intop");defineSymbol(math,main,op,"","\\iint");defineSymbol(math,main,op,"","\\iiint");defineSymbol(math,main,op,"","\\prod");defineSymbol(math,main,op,"","\\sum");defineSymbol(math,main,op,"","\\bigotimes");defineSymbol(math,main,op,"","\\bigoplus");defineSymbol(math,main,op,"","\\bigodot");defineSymbol(math,main,op,"","\\oint");defineSymbol(math,main,op,"","\\oiint");defineSymbol(math,main,op,"","\\oiiint");defineSymbol(math,main,op,"","\\bigsqcup");defineSymbol(math,main,op,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\@cdots",!0);defineSymbol(math,main,inner,"","\\ddots",!0);defineSymbol(math,main,textord,"","\\varvdots");defineSymbol(text,main,textord,"","\\varvdots");defineSymbol(math,main,accent,"","\\acute");defineSymbol(math,main,accent,"","\\grave");defineSymbol(math,main,accent,"","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"","\\bar");defineSymbol(math,main,accent,"","\\breve");defineSymbol(math,main,accent,"","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"","\\vec");defineSymbol(math,main,accent,"","\\dot");defineSymbol(math,main,accent,"","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"","");defineSymbol(math,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math,main,textord,"","\\pounds");defineSymbol(math,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch,ch)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function a(s,o){var c=s.charCodeAt(0),h=s.charCodeAt(1),d=(c-55296)*1024+(h-56320)+65536,b=o==="math"?0:1;if(119808<=d&&d<120484){var _=Math.floor((d-119808)/26);return[wideLatinLetterData[_][2],wideLatinLetterData[_][b]]}else if(120782<=d&&d<=120831){var $=Math.floor((d-120782)/10);return[wideNumeralData[$][2],wideNumeralData[$][b]]}else{if(d===120485||d===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][b]];if(120486<d&&d<120782)return["",""];throw new ParseError("Unsupported character: "+s)}},lookupSymbol=function a(s,o,c){return symbols[c][s]&&symbols[c][s].replace&&(s=symbols[c][s].replace),{value:s,metrics:getCharacterMetrics(s,o,c)}},makeSymbol=function a(s,o,c,h,d){var b=lookupSymbol(s,o,c),_=b.metrics;s=b.value;var $;if(_){var j=_.italic;(c==="text"||h&&h.font==="mathit")&&(j=0),$=new SymbolNode(s,_.height,_.depth,j,_.skew,_.width,d)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+s+"' in style '"+o+"' and mode '"+c+"'")),$=new SymbolNode(s,0,0,0,0,0,d);if(h){$.maxFontSize=h.sizeMultiplier,h.style.isTight()&&$.classes.push("mtight");var Xt=h.getColor();Xt&&($.style.color=Xt)}return $},mathsym=function a(s,o,c,h){return h===void 0&&(h=[]),c.font==="boldsymbol"&&lookupSymbol(s,"Main-Bold",o).metrics?makeSymbol(s,"Main-Bold",o,c,h.concat(["mathbf"])):s==="\\"||symbols[o][s].font==="main"?makeSymbol(s,"Main-Regular",o,c,h):makeSymbol(s,"AMS-Regular",o,c,h.concat(["amsrm"]))},boldsymbol=function a(s,o,c,h,d){return d!=="textord"&&lookupSymbol(s,"Math-BoldItalic",o).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function a(s,o,c){var h=s.mode,d=s.text,b=["mord"],_=h==="math"||h==="text"&&o.font,$=_?o.font:o.fontFamily,j="",Xt="";if(d.charCodeAt(0)===55349&&([j,Xt]=wideCharacterFont(d,h)),j.length>0)return makeSymbol(d,j,h,o,b.concat(Xt));if($){var Lt,fr;if($==="boldsymbol"){var Jr=boldsymbol(d,h,o,b,c);Lt=Jr.fontName,fr=[Jr.fontClass]}else _?(Lt=fontMap[$].fontName,fr=[$]):(Lt=retrieveTextFontName($,o.fontWeight,o.fontShape),fr=[$,o.fontWeight,o.fontShape]);if(lookupSymbol(d,Lt,h).metrics)return makeSymbol(d,Lt,h,o,b.concat(fr));if(ligatures.hasOwnProperty(d)&&Lt.slice(0,10)==="Typewriter"){for(var Js=[],qs=0;qs<d.length;qs++)Js.push(makeSymbol(d[qs],Lt,h,o,b.concat(fr)));return makeFragment(Js)}}if(c==="mathord")return makeSymbol(d,"Math-Italic",h,o,b.concat(["mathnormal"]));if(c==="textord"){var zo=symbols[h][d]&&symbols[h][d].font;if(zo==="ams"){var js=retrieveTextFontName("amsrm",o.fontWeight,o.fontShape);return makeSymbol(d,js,h,o,b.concat("amsrm",o.fontWeight,o.fontShape))}else if(zo==="main"||!zo){var eu=retrieveTextFontName("textrm",o.fontWeight,o.fontShape);return makeSymbol(d,eu,h,o,b.concat(o.fontWeight,o.fontShape))}else{var Oo=retrieveTextFontName(zo,o.fontWeight,o.fontShape);return makeSymbol(d,Oo,h,o,b.concat(Oo,o.fontWeight,o.fontShape))}}else throw new Error("unexpected type: "+c+" in makeOrd")},canCombine=(a,s)=>{if(createClass(a.classes)!==createClass(s.classes)||a.skew!==s.skew||a.maxFontSize!==s.maxFontSize)return!1;if(a.classes.length===1){var o=a.classes[0];if(o==="mbin"||o==="mord")return!1}for(var c in a.style)if(a.style.hasOwnProperty(c)&&a.style[c]!==s.style[c])return!1;for(var h in s.style)if(s.style.hasOwnProperty(h)&&a.style[h]!==s.style[h])return!1;return!0},tryCombineChars=a=>{for(var s=0;s<a.length-1;s++){var o=a[s],c=a[s+1];o instanceof SymbolNode&&c instanceof SymbolNode&&canCombine(o,c)&&(o.text+=c.text,o.height=Math.max(o.height,c.height),o.depth=Math.max(o.depth,c.depth),o.italic=c.italic,a.splice(s+1,1),s--)}return a},sizeElementFromChildren=function a(s){for(var o=0,c=0,h=0,d=0;d<s.children.length;d++){var b=s.children[d];b.height>o&&(o=b.height),b.depth>c&&(c=b.depth),b.maxFontSize>h&&(h=b.maxFontSize)}s.height=o,s.depth=c,s.maxFontSize=h},makeSpan$2=function a(s,o,c,h){var d=new Span(s,o,c,h);return sizeElementFromChildren(d),d},makeSvgSpan=(a,s,o,c)=>new Span(a,s,o,c),makeLineSpan=function a(s,o,c){var h=makeSpan$2([s],[],o);return h.height=Math.max(c||o.fontMetrics().defaultRuleThickness,o.minRuleThickness),h.style.borderBottomWidth=makeEm(h.height),h.maxFontSize=1,h},makeAnchor=function a(s,o,c,h){var d=new Anchor(s,o,c,h);return sizeElementFromChildren(d),d},makeFragment=function a(s){var o=new DocumentFragment(s);return sizeElementFromChildren(o),o},wrapFragment=function a(s,o){return s instanceof DocumentFragment?makeSpan$2([],[s],o):s},getVListChildrenAndDepth=function a(s){if(s.positionType==="individualShift"){for(var o=s.children,c=[o[0]],h=-o[0].shift-o[0].elem.depth,d=h,b=1;b<o.length;b++){var _=-o[b].shift-d-o[b].elem.depth,$=_-(o[b-1].elem.height+o[b-1].elem.depth);d=d+_,c.push({type:"kern",size:$}),c.push(o[b])}return{children:c,depth:h}}var j;if(s.positionType==="top"){for(var Xt=s.positionData,Lt=0;Lt<s.children.length;Lt++){var fr=s.children[Lt];Xt-=fr.type==="kern"?fr.size:fr.elem.height+fr.elem.depth}j=Xt}else if(s.positionType==="bottom")j=-s.positionData;else{var Jr=s.children[0];if(Jr.type!=="elem")throw new Error('First child must have type "elem".');if(s.positionType==="shift")j=-Jr.elem.depth-s.positionData;else if(s.positionType==="firstBaseline")j=-Jr.elem.depth;else throw new Error("Invalid positionType "+s.positionType+".")}return{children:s.children,depth:j}},makeVList=function a(s,o){for(var{children:c,depth:h}=getVListChildrenAndDepth(s),d=0,b=0;b<c.length;b++){var _=c[b];if(_.type==="elem"){var $=_.elem;d=Math.max(d,$.maxFontSize,$.height)}}d+=2;var j=makeSpan$2(["pstrut"],[]);j.style.height=makeEm(d);for(var Xt=[],Lt=h,fr=h,Jr=h,Js=0;Js<c.length;Js++){var qs=c[Js];if(qs.type==="kern")Jr+=qs.size;else{var zo=qs.elem,js=qs.wrapperClasses||[],eu=qs.wrapperStyle||{},Oo=makeSpan$2(js,[j,zo],void 0,eu);Oo.style.top=makeEm(-d-Jr-zo.depth),qs.marginLeft&&(Oo.style.marginLeft=qs.marginLeft),qs.marginRight&&(Oo.style.marginRight=qs.marginRight),Xt.push(Oo),Jr+=zo.height+zo.depth}Lt=Math.min(Lt,Jr),fr=Math.max(fr,Jr)}var tu=makeSpan$2(["vlist"],Xt);tu.style.height=makeEm(fr);var Bo;if(Lt<0){var vu=makeSpan$2([],[]),t1=makeSpan$2(["vlist"],[vu]);t1.style.height=makeEm(-Lt);var e1=makeSpan$2(["vlist-s"],[new SymbolNode("")]);Bo=[makeSpan$2(["vlist-r"],[tu,e1]),makeSpan$2(["vlist-r"],[t1])]}else Bo=[makeSpan$2(["vlist-r"],[tu])];var r1=makeSpan$2(["vlist-t"],Bo);return Bo.length===2&&r1.classes.push("vlist-t2"),r1.height=fr,r1.depth=-Lt,r1},makeGlue=(a,s)=>{var o=makeSpan$2(["mspace"],[],s),c=calculateSize(a,s);return o.style.marginRight=makeEm(c),o},retrieveTextFontName=function a(s,o,c){var h="";switch(s){case"amsrm":h="AMS";break;case"textrm":h="Main";break;case"textsf":h="SansSerif";break;case"texttt":h="Typewriter";break;default:h=s}var d;return o==="textbf"&&c==="textit"?d="BoldItalic":o==="textbf"?d="Bold":o==="textit"?d="Italic":d="Regular",h+"-"+d},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function a(s,o){var[c,h,d]=svgData[s],b=new PathNode(c),_=new SvgNode([b],{width:makeEm(h),height:makeEm(d),style:"width:"+makeEm(h),viewBox:"0 0 "+1e3*h+" "+1e3*d,preserveAspectRatio:"xMinYMin"}),$=makeSvgSpan(["overlay"],[_],o);return $.height=d,$.style.height=makeEm(d),$.style.width=makeEm(h),$},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(a){for(var{type:s,names:o,props:c,handler:h,htmlBuilder:d,mathmlBuilder:b}=a,_={type:s,numArgs:c.numArgs,argTypes:c.argTypes,allowedInArgument:!!c.allowedInArgument,allowedInText:!!c.allowedInText,allowedInMath:c.allowedInMath===void 0?!0:c.allowedInMath,numOptionalArgs:c.numOptionalArgs||0,infix:!!c.infix,primitive:!!c.primitive,handler:h},$=0;$<o.length;++$)_functions[o[$]]=_;s&&(d&&(_htmlGroupBuilders[s]=d),b&&(_mathmlGroupBuilders[s]=b))}function defineFunctionBuilders(a){var{type:s,htmlBuilder:o,mathmlBuilder:c}=a;defineFunction({type:s,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:o,mathmlBuilder:c})}var normalizeArgument=function a(s){return s.type==="ordgroup"&&s.body.length===1?s.body[0]:s},ordargument=function a(s){return s.type==="ordgroup"?s.body:[s]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function a(s,o,c,h){h===void 0&&(h=[null,null]);for(var d=[],b=0;b<s.length;b++){var _=buildGroup$1(s[b],o);if(_ instanceof DocumentFragment){var $=_.children;d.push(...$)}else d.push(_)}if(buildCommon.tryCombineChars(d),!c)return d;var j=o;if(s.length===1){var Xt=s[0];Xt.type==="sizing"?j=o.havingSize(Xt.size):Xt.type==="styling"&&(j=o.havingStyle(styleMap$1[Xt.style]))}var Lt=makeSpan$1([h[0]||"leftmost"],[],o),fr=makeSpan$1([h[1]||"rightmost"],[],o),Jr=c==="root";return traverseNonSpaceNodes(d,(Js,qs)=>{var zo=qs.classes[0],js=Js.classes[0];zo==="mbin"&&binRightCanceller.includes(js)?qs.classes[0]="mord":js==="mbin"&&binLeftCanceller.includes(zo)&&(Js.classes[0]="mord")},{node:Lt},fr,Jr),traverseNonSpaceNodes(d,(Js,qs)=>{var zo=getTypeOfDomTree(qs),js=getTypeOfDomTree(Js),eu=zo&&js?Js.hasClass("mtight")?tightSpacings[zo][js]:spacings[zo][js]:null;if(eu)return buildCommon.makeGlue(eu,j)},{node:Lt},fr,Jr),d},traverseNonSpaceNodes=function a(s,o,c,h,d){h&&s.push(h);for(var b=0;b<s.length;b++){var _=s[b],$=checkPartialGroup(_);if($){a($.children,o,c,null,d);continue}var j=!_.hasClass("mspace");if(j){var Xt=o(_,c.node);Xt&&(c.insertAfter?c.insertAfter(Xt):(s.unshift(Xt),b++))}j?c.node=_:d&&_.hasClass("newline")&&(c.node=makeSpan$1(["leftmost"])),c.insertAfter=(Lt=>fr=>{s.splice(Lt+1,0,fr),b++})(b)}h&&s.pop()},checkPartialGroup=function a(s){return s instanceof DocumentFragment||s instanceof Anchor||s instanceof Span&&s.hasClass("enclosing")?s:null},getOutermostNode=function a(s,o){var c=checkPartialGroup(s);if(c){var h=c.children;if(h.length){if(o==="right")return a(h[h.length-1],"right");if(o==="left")return a(h[0],"left")}}return s},getTypeOfDomTree=function a(s,o){return s?(o&&(s=getOutermostNode(s,o)),DomEnum[s.classes[0]]||null):null},makeNullDelimiter=function a(s,o){var c=["nulldelimiter"].concat(s.baseSizingClasses());return makeSpan$1(o.concat(c))},buildGroup$1=function a(s,o,c){if(!s)return makeSpan$1();if(_htmlGroupBuilders[s.type]){var h=_htmlGroupBuilders[s.type](s,o);if(c&&o.size!==c.size){h=makeSpan$1(o.sizingClasses(c),[h],o);var d=o.sizeMultiplier/c.sizeMultiplier;h.height*=d,h.depth*=d}return h}else throw new ParseError("Got group of unknown type: '"+s.type+"'")};function buildHTMLUnbreakable(a,s){var o=makeSpan$1(["base"],a,s),c=makeSpan$1(["strut"]);return c.style.height=makeEm(o.height+o.depth),o.depth&&(c.style.verticalAlign=makeEm(-o.depth)),o.children.unshift(c),o}function buildHTML(a,s){var o=null;a.length===1&&a[0].type==="tag"&&(o=a[0].tag,a=a[0].body);var c=buildExpression$1(a,s,"root"),h;c.length===2&&c[1].hasClass("tag")&&(h=c.pop());for(var d=[],b=[],_=0;_<c.length;_++)if(b.push(c[_]),c[_].hasClass("mbin")||c[_].hasClass("mrel")||c[_].hasClass("allowbreak")){for(var $=!1;_<c.length-1&&c[_+1].hasClass("mspace")&&!c[_+1].hasClass("newline");)_++,b.push(c[_]),c[_].hasClass("nobreak")&&($=!0);$||(d.push(buildHTMLUnbreakable(b,s)),b=[])}else c[_].hasClass("newline")&&(b.pop(),b.length>0&&(d.push(buildHTMLUnbreakable(b,s)),b=[]),d.push(c[_]));b.length>0&&d.push(buildHTMLUnbreakable(b,s));var j;o?(j=buildHTMLUnbreakable(buildExpression$1(o,s,!0)),j.classes=["tag"],d.push(j)):h&&d.push(h);var Xt=makeSpan$1(["katex-html"],d);if(Xt.setAttribute("aria-hidden","true"),j){var Lt=j.children[0];Lt.style.height=makeEm(Xt.height+Xt.depth),Xt.depth&&(Lt.style.verticalAlign=makeEm(-Xt.depth))}return Xt}function newDocumentFragment(a){return new DocumentFragment(a)}class MathNode{constructor(s,o,c){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=s,this.attributes={},this.children=o||[],this.classes=c||[]}setAttribute(s,o){this.attributes[s]=o}getAttribute(s){return this.attributes[s]}toNode(){var s=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&s.setAttribute(o,this.attributes[o]);this.classes.length>0&&(s.className=createClass(this.classes));for(var c=0;c<this.children.length;c++)if(this.children[c]instanceof TextNode&&this.children[c+1]instanceof TextNode){for(var h=this.children[c].toText()+this.children[++c].toText();this.children[c+1]instanceof TextNode;)h+=this.children[++c].toText();s.appendChild(new TextNode(h).toNode())}else s.appendChild(this.children[c].toNode());return s}toMarkup(){var s="<"+this.type;for(var o in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,o)&&(s+=" "+o+'="',s+=utils.escape(this.attributes[o]),s+='"');this.classes.length>0&&(s+=' class ="'+utils.escape(createClass(this.classes))+'"'),s+=">";for(var c=0;c<this.children.length;c++)s+=this.children[c].toMarkup();return s+="</"+this.type+">",s}toText(){return this.children.map(s=>s.toText()).join("")}}class TextNode{constructor(s){this.text=void 0,this.text=s}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(s){this.width=void 0,this.character=void 0,this.width=s,s>=.05555&&s<=.05556?this.character="":s>=.1666&&s<=.1667?this.character="":s>=.2222&&s<=.2223?this.character="":s>=.2777&&s<=.2778?this.character="":s>=-.05556&&s<=-.05555?this.character="":s>=-.1667&&s<=-.1666?this.character="":s>=-.2223&&s<=-.2222?this.character="":s>=-.2778&&s<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var s=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return s.setAttribute("width",makeEm(this.width)),s}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function a(s,o,c){return symbols[o][s]&&symbols[o][s].replace&&s.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(s)&&c&&(c.fontFamily&&c.fontFamily.slice(4,6)==="tt"||c.font&&c.font.slice(4,6)==="tt"))&&(s=symbols[o][s].replace),new mathMLTree.TextNode(s)},makeRow=function a(s){return s.length===1?s[0]:new mathMLTree.MathNode("mrow",s)},getVariant=function a(s,o){if(o.fontFamily==="texttt")return"monospace";if(o.fontFamily==="textsf")return o.fontShape==="textit"&&o.fontWeight==="textbf"?"sans-serif-bold-italic":o.fontShape==="textit"?"sans-serif-italic":o.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(o.fontShape==="textit"&&o.fontWeight==="textbf")return"bold-italic";if(o.fontShape==="textit")return"italic";if(o.fontWeight==="textbf")return"bold";var c=o.font;if(!c||c==="mathnormal")return null;var h=s.mode;if(c==="mathit")return"italic";if(c==="boldsymbol")return s.type==="textord"?"bold":"bold-italic";if(c==="mathbf")return"bold";if(c==="mathbb")return"double-struck";if(c==="mathsfit")return"sans-serif-italic";if(c==="mathfrak")return"fraktur";if(c==="mathscr"||c==="mathcal")return"script";if(c==="mathsf")return"sans-serif";if(c==="mathtt")return"monospace";var d=s.text;if(["\\imath","\\jmath"].includes(d))return null;symbols[h][d]&&symbols[h][d].replace&&(d=symbols[h][d].replace);var b=buildCommon.fontMap[c].fontName;return getCharacterMetrics(d,b,h)?buildCommon.fontMap[c].variant:null};function isNumberPunctuation(a){if(!a)return!1;if(a.type==="mi"&&a.children.length===1){var s=a.children[0];return s instanceof TextNode&&s.text==="."}else if(a.type==="mo"&&a.children.length===1&&a.getAttribute("separator")==="true"&&a.getAttribute("lspace")==="0em"&&a.getAttribute("rspace")==="0em"){var o=a.children[0];return o instanceof TextNode&&o.text===","}else return!1}var buildExpression=function a(s,o,c){if(s.length===1){var h=buildGroup(s[0],o);return c&&h instanceof MathNode&&h.type==="mo"&&(h.setAttribute("lspace","0em"),h.setAttribute("rspace","0em")),[h]}for(var d=[],b,_=0;_<s.length;_++){var $=buildGroup(s[_],o);if($ instanceof MathNode&&b instanceof MathNode){if($.type==="mtext"&&b.type==="mtext"&&$.getAttribute("mathvariant")===b.getAttribute("mathvariant")){b.children.push(...$.children);continue}else if($.type==="mn"&&b.type==="mn"){b.children.push(...$.children);continue}else if(isNumberPunctuation($)&&b.type==="mn"){b.children.push(...$.children);continue}else if($.type==="mn"&&isNumberPunctuation(b))$.children=[...b.children,...$.children],d.pop();else if(($.type==="msup"||$.type==="msub")&&$.children.length>=1&&(b.type==="mn"||isNumberPunctuation(b))){var j=$.children[0];j instanceof MathNode&&j.type==="mn"&&(j.children=[...b.children,...j.children],d.pop())}else if(b.type==="mi"&&b.children.length===1){var Xt=b.children[0];if(Xt instanceof TextNode&&Xt.text===""&&($.type==="mo"||$.type==="mi"||$.type==="mn")){var Lt=$.children[0];Lt instanceof TextNode&&Lt.text.length>0&&(Lt.text=Lt.text.slice(0,1)+""+Lt.text.slice(1),d.pop())}}}d.push($),b=$}return d},buildExpressionRow=function a(s,o,c){return makeRow(buildExpression(s,o,c))},buildGroup=function a(s,o){if(!s)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[s.type]){var c=_mathmlGroupBuilders[s.type](s,o);return c}else throw new ParseError("Got group of unknown type: '"+s.type+"'")};function buildMathML(a,s,o,c,h){var d=buildExpression(a,o),b;d.length===1&&d[0]instanceof MathNode&&["mrow","mtable"].includes(d[0].type)?b=d[0]:b=new mathMLTree.MathNode("mrow",d);var _=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(s)]);_.setAttribute("encoding","application/x-tex");var $=new mathMLTree.MathNode("semantics",[b,_]),j=new mathMLTree.MathNode("math",[$]);j.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),c&&j.setAttribute("display","block");var Xt=h?"katex":"katex-mathml";return buildCommon.makeSpan([Xt],[j])}var optionsFromSettings=function a(s){return new Options({style:s.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:s.maxSize,minRuleThickness:s.minRuleThickness})},displayWrap=function a(s,o){if(o.displayMode){var c=["katex-display"];o.leqno&&c.push("leqno"),o.fleqn&&c.push("fleqn"),s=buildCommon.makeSpan(c,[s])}return s},buildTree=function a(s,o,c){var h=optionsFromSettings(c),d;if(c.output==="mathml")return buildMathML(s,o,h,c.displayMode,!0);if(c.output==="html"){var b=buildHTML(s,h);d=buildCommon.makeSpan(["katex"],[b])}else{var _=buildMathML(s,o,h,c.displayMode,!1),$=buildHTML(s,h);d=buildCommon.makeSpan(["katex"],[_,$])}return displayWrap(d,c)},buildHTMLTree=function a(s,o,c){var h=optionsFromSettings(c),d=buildHTML(s,h),b=buildCommon.makeSpan(["katex"],[d]);return displayWrap(b,c)},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function a(s){var o=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[s.replace(/^\\/,"")])]);return o.setAttribute("stretchy","true"),o},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function a(s){return s.type==="ordgroup"?s.body.length:1},svgSpan=function a(s,o){function c(){var _=4e5,$=s.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes($)){var j=s,Xt=groupLength(j.base),Lt,fr,Jr;if(Xt>5)$==="widehat"||$==="widecheck"?(Lt=420,_=2364,Jr=.42,fr=$+"4"):(Lt=312,_=2340,Jr=.34,fr="tilde4");else{var Js=[1,1,2,2,3,3][Xt];$==="widehat"||$==="widecheck"?(_=[0,1062,2364,2364,2364][Js],Lt=[0,239,300,360,420][Js],Jr=[0,.24,.3,.3,.36,.42][Js],fr=$+Js):(_=[0,600,1033,2339,2340][Js],Lt=[0,260,286,306,312][Js],Jr=[0,.26,.286,.3,.306,.34][Js],fr="tilde"+Js)}var qs=new PathNode(fr),zo=new SvgNode([qs],{width:"100%",height:makeEm(Jr),viewBox:"0 0 "+_+" "+Lt,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[zo],o),minWidth:0,height:Jr}}else{var js=[],eu=katexImagesData[$],[Oo,tu,Bo]=eu,vu=Bo/1e3,t1=Oo.length,e1,r1;if(t1===1){var a1=eu[3];e1=["hide-tail"],r1=[a1]}else if(t1===2)e1=["halfarrow-left","halfarrow-right"],r1=["xMinYMin","xMaxYMin"];else if(t1===3)e1=["brace-left","brace-center","brace-right"],r1=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+t1+" children.");for(var i1=0;i1<t1;i1++){var s1=new PathNode(Oo[i1]),c1=new SvgNode([s1],{width:"400em",height:makeEm(vu),viewBox:"0 0 "+_+" "+Bo,preserveAspectRatio:r1[i1]+" slice"}),h1=buildCommon.makeSvgSpan([e1[i1]],[c1],o);if(t1===1)return{span:h1,minWidth:tu,height:vu};h1.style.height=makeEm(vu),js.push(h1)}return{span:buildCommon.makeSpan(["stretchy"],js,o),minWidth:tu,height:vu}}}var{span:h,minWidth:d,height:b}=c();return h.height=b,h.style.height=makeEm(b),d>0&&(h.style.minWidth=makeEm(d)),h},encloseSpan=function a(s,o,c,h,d){var b,_=s.height+s.depth+c+h;if(/fbox|color|angl/.test(o)){if(b=buildCommon.makeSpan(["stretchy",o],[],d),o==="fbox"){var $=d.color&&d.getColor();$&&(b.style.borderColor=$)}}else{var j=[];/^[bx]cancel$/.test(o)&&j.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(o)&&j.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var Xt=new SvgNode(j,{width:"100%",height:makeEm(_)});b=buildCommon.makeSvgSpan([],[Xt],d)}return b.height=_,b.style.height=makeEm(_),b},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(a,s){if(!a||a.type!==s)throw new Error("Expected node of type "+s+", but got "+(a?"node of type "+a.type:String(a)));return a}function assertSymbolNodeType(a){var s=checkSymbolNodeType(a);if(!s)throw new Error("Expected node of symbol group type, but got "+(a?"node of type "+a.type:String(a)));return s}function checkSymbolNodeType(a){return a&&(a.type==="atom"||NON_ATOMS.hasOwnProperty(a.type))?a:null}var htmlBuilder$a=(a,s)=>{var o,c,h;a&&a.type==="supsub"?(c=assertNodeType(a.base,"accent"),o=c.base,a.base=o,h=assertSpan(buildGroup$1(a,s)),a.base=c):(c=assertNodeType(a,"accent"),o=c.base);var d=buildGroup$1(o,s.havingCrampedStyle()),b=c.isShifty&&utils.isCharacterBox(o),_=0;if(b){var $=utils.getBaseElem(o),j=buildGroup$1($,s.havingCrampedStyle());_=assertSymbolDomNode(j).skew}var Xt=c.label==="\\c",Lt=Xt?d.height+d.depth:Math.min(d.height,s.fontMetrics().xHeight),fr;if(c.isStretchy)fr=stretchy.svgSpan(c,s),fr=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"elem",elem:fr,wrapperClasses:["svg-align"],wrapperStyle:_>0?{width:"calc(100% - "+makeEm(2*_)+")",marginLeft:makeEm(2*_)}:void 0}]},s);else{var Jr,Js;c.label==="\\vec"?(Jr=buildCommon.staticSvg("vec",s),Js=buildCommon.svgData.vec[1]):(Jr=buildCommon.makeOrd({mode:c.mode,text:c.label},s,"textord"),Jr=assertSymbolDomNode(Jr),Jr.italic=0,Js=Jr.width,Xt&&(Lt+=Jr.depth)),fr=buildCommon.makeSpan(["accent-body"],[Jr]);var qs=c.label==="\\textcircled";qs&&(fr.classes.push("accent-full"),Lt=d.height);var zo=_;qs||(zo-=Js/2),fr.style.left=makeEm(zo),c.label==="\\textcircled"&&(fr.style.top=".2em"),fr=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:-Lt},{type:"elem",elem:fr}]},s)}var js=buildCommon.makeSpan(["mord","accent"],[fr],s);return h?(h.children[0]=js,h.height=Math.max(js.height,h.height),h.classes[0]="mord",h):js},mathmlBuilder$9=(a,s)=>{var o=a.isStretchy?stretchy.mathMLnode(a.label):new mathMLTree.MathNode("mo",[makeText(a.label,a.mode)]),c=new mathMLTree.MathNode("mover",[buildGroup(a.base,s),o]);return c.setAttribute("accent","true"),c},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(a=>"\\"+a).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(a,s)=>{var o=normalizeArgument(s[0]),c=!NON_STRETCHY_ACCENT_REGEX.test(a.funcName),h=!c||a.funcName==="\\widehat"||a.funcName==="\\widetilde"||a.funcName==="\\widecheck";return{type:"accent",mode:a.parser.mode,label:a.funcName,isStretchy:c,isShifty:h,base:o}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(a,s)=>{var o=s[0],c=a.parser.mode;return c==="math"&&(a.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+a.funcName+" works only in text mode"),c="text"),{type:"accent",mode:c,label:a.funcName,isStretchy:!1,isShifty:!0,base:o}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=s[0];return{type:"accentUnder",mode:o.mode,label:c,base:h}},htmlBuilder:(a,s)=>{var o=buildGroup$1(a.base,s),c=stretchy.svgSpan(a,s),h=a.label==="\\utilde"?.12:0,d=buildCommon.makeVList({positionType:"top",positionData:o.height,children:[{type:"elem",elem:c,wrapperClasses:["svg-align"]},{type:"kern",size:h},{type:"elem",elem:o}]},s);return buildCommon.makeSpan(["mord","accentunder"],[d],s)},mathmlBuilder:(a,s)=>{var o=stretchy.mathMLnode(a.label),c=new mathMLTree.MathNode("munder",[buildGroup(a.base,s),o]);return c.setAttribute("accentunder","true"),c}});var paddedNode=a=>{var s=new mathMLTree.MathNode("mpadded",a?[a]:[]);return s.setAttribute("width","+0.6em"),s.setAttribute("lspace","0.3em"),s};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(a,s,o){var{parser:c,funcName:h}=a;return{type:"xArrow",mode:c.mode,label:h,body:s[0],below:o[0]}},htmlBuilder(a,s){var o=s.style,c=s.havingStyle(o.sup()),h=buildCommon.wrapFragment(buildGroup$1(a.body,c,s),s),d=a.label.slice(0,2)==="\\x"?"x":"cd";h.classes.push(d+"-arrow-pad");var b;a.below&&(c=s.havingStyle(o.sub()),b=buildCommon.wrapFragment(buildGroup$1(a.below,c,s),s),b.classes.push(d+"-arrow-pad"));var _=stretchy.svgSpan(a,s),$=-s.fontMetrics().axisHeight+.5*_.height,j=-s.fontMetrics().axisHeight-.5*_.height-.111;(h.depth>.25||a.label==="\\xleftequilibrium")&&(j-=h.depth);var Xt;if(b){var Lt=-s.fontMetrics().axisHeight+b.height+.5*_.height+.111;Xt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:j},{type:"elem",elem:_,shift:$},{type:"elem",elem:b,shift:Lt}]},s)}else Xt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:j},{type:"elem",elem:_,shift:$}]},s);return Xt.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[Xt],s)},mathmlBuilder(a,s){var o=stretchy.mathMLnode(a.label);o.setAttribute("minsize",a.label.charAt(0)==="x"?"1.75em":"3.0em");var c;if(a.body){var h=paddedNode(buildGroup(a.body,s));if(a.below){var d=paddedNode(buildGroup(a.below,s));c=new mathMLTree.MathNode("munderover",[o,d,h])}else c=new mathMLTree.MathNode("mover",[o,h])}else if(a.below){var b=paddedNode(buildGroup(a.below,s));c=new mathMLTree.MathNode("munder",[o,b])}else c=paddedNode(),c=new mathMLTree.MathNode("mover",[o,c]);return c}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(a,s){var o=buildExpression$1(a.body,s,!0);return makeSpan([a.mclass],o,s)}function mathmlBuilder$8(a,s){var o,c=buildExpression(a.body,s);return a.mclass==="minner"?o=new mathMLTree.MathNode("mpadded",c):a.mclass==="mord"?a.isCharacterBox?(o=c[0],o.type="mi"):o=new mathMLTree.MathNode("mi",c):(a.isCharacterBox?(o=c[0],o.type="mo"):o=new mathMLTree.MathNode("mo",c),a.mclass==="mbin"?(o.attributes.lspace="0.22em",o.attributes.rspace="0.22em"):a.mclass==="mpunct"?(o.attributes.lspace="0em",o.attributes.rspace="0.17em"):a.mclass==="mopen"||a.mclass==="mclose"?(o.attributes.lspace="0em",o.attributes.rspace="0em"):a.mclass==="minner"&&(o.attributes.lspace="0.0556em",o.attributes.width="+0.1111em")),o}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(a,s){var{parser:o,funcName:c}=a,h=s[0];return{type:"mclass",mode:o.mode,mclass:"m"+c.slice(5),body:ordargument(h),isCharacterBox:utils.isCharacterBox(h)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=a=>{var s=a.type==="ordgroup"&&a.body.length?a.body[0]:a;return s.type==="atom"&&(s.family==="bin"||s.family==="rel")?"m"+s.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(a,s){var{parser:o}=a;return{type:"mclass",mode:o.mode,mclass:binrelClass(s[0]),body:ordargument(s[1]),isCharacterBox:utils.isCharacterBox(s[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(a,s){var{parser:o,funcName:c}=a,h=s[1],d=s[0],b;c!=="\\stackrel"?b=binrelClass(h):b="mrel";var _={type:"op",mode:h.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:c!=="\\stackrel",body:ordargument(h)},$={type:"supsub",mode:d.mode,base:_,sup:c==="\\underset"?null:d,sub:c==="\\underset"?d:null};return{type:"mclass",mode:o.mode,mclass:b,body:[$],isCharacterBox:utils.isCharacterBox($)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(a,s){var{parser:o}=a;return{type:"pmb",mode:o.mode,mclass:binrelClass(s[0]),body:ordargument(s[0])}},htmlBuilder(a,s){var o=buildExpression$1(a.body,s,!0),c=buildCommon.makeSpan([a.mclass],o,s);return c.style.textShadow="0.02em 0.01em 0.04px",c},mathmlBuilder(a,s){var o=buildExpression(a.body,s),c=new mathMLTree.MathNode("mstyle",o);return c.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),c}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=a=>a.type==="textord"&&a.text==="@",isLabelEnd=(a,s)=>(a.type==="mathord"||a.type==="atom")&&a.text===s;function cdArrow(a,s,o){var c=cdArrowFunctionName[a];switch(c){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return o.callFunction(c,[s[0]],[s[1]]);case"\\uparrow":case"\\downarrow":{var h=o.callFunction("\\\\cdleft",[s[0]],[]),d={type:"atom",text:c,mode:"math",family:"rel"},b=o.callFunction("\\Big",[d],[]),_=o.callFunction("\\\\cdright",[s[1]],[]),$={type:"ordgroup",mode:"math",body:[h,b,_]};return o.callFunction("\\\\cdparent",[$],[])}case"\\\\cdlongequal":return o.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var j={type:"textord",text:"\\Vert",mode:"math"};return o.callFunction("\\Big",[j],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(a){var s=[];for(a.gullet.beginGroup(),a.gullet.macros.set("\\cr","\\\\\\relax"),a.gullet.beginGroup();;){s.push(a.parseExpression(!1,"\\\\")),a.gullet.endGroup(),a.gullet.beginGroup();var o=a.fetch().text;if(o==="&"||o==="\\\\")a.consume();else if(o==="\\end"){s[s.length-1].length===0&&s.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",a.nextToken)}for(var c=[],h=[c],d=0;d<s.length;d++){for(var b=s[d],_=newCell(),$=0;$<b.length;$++)if(!isStartOfArrow(b[$]))_.body.push(b[$]);else{c.push(_),$+=1;var j=assertSymbolNodeType(b[$]).text,Xt=new Array(2);if(Xt[0]={type:"ordgroup",mode:"math",body:[]},Xt[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(j)>-1))if("<>AV".indexOf(j)>-1)for(var Lt=0;Lt<2;Lt++){for(var fr=!0,Jr=$+1;Jr<b.length;Jr++){if(isLabelEnd(b[Jr],j)){fr=!1,$=Jr;break}if(isStartOfArrow(b[Jr]))throw new ParseError("Missing a "+j+" character to complete a CD arrow.",b[Jr]);Xt[Lt].body.push(b[Jr])}if(fr)throw new ParseError("Missing a "+j+" character to complete a CD arrow.",b[$])}else throw new ParseError('Expected one of "<>AV=|." after @',b[$]);var Js=cdArrow(j,Xt,a),qs={type:"styling",body:[Js],mode:"math",style:"display"};c.push(qs),_=newCell()}d%2===0?c.push(_):c.shift(),c=[],h.push(c)}a.gullet.endGroup(),a.gullet.endGroup();var zo=new Array(h[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:h,arraystretch:1,addJot:!0,rowGaps:[null],cols:zo,colSeparationType:"CD",hLinesBeforeRow:new Array(h.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(a,s){var{parser:o,funcName:c}=a;return{type:"cdlabel",mode:o.mode,side:c.slice(4),label:s[0]}},htmlBuilder(a,s){var o=s.havingStyle(s.style.sup()),c=buildCommon.wrapFragment(buildGroup$1(a.label,o,s),s);return c.classes.push("cd-label-"+a.side),c.style.bottom=makeEm(.8-c.depth),c.height=0,c.depth=0,c},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mrow",[buildGroup(a.label,s)]);return o=new mathMLTree.MathNode("mpadded",[o]),o.setAttribute("width","0"),a.side==="left"&&o.setAttribute("lspace","-1width"),o.setAttribute("voffset","0.7em"),o=new mathMLTree.MathNode("mstyle",[o]),o.setAttribute("displaystyle","false"),o.setAttribute("scriptlevel","1"),o}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(a,s){var{parser:o}=a;return{type:"cdlabelparent",mode:o.mode,fragment:s[0]}},htmlBuilder(a,s){var o=buildCommon.wrapFragment(buildGroup$1(a.fragment,s),s);return o.classes.push("cd-vert-arrow"),o},mathmlBuilder(a,s){return new mathMLTree.MathNode("mrow",[buildGroup(a.fragment,s)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(a,s){for(var{parser:o}=a,c=assertNodeType(s[0],"ordgroup"),h=c.body,d="",b=0;b<h.length;b++){var _=assertNodeType(h[b],"textord");d+=_.text}var $=parseInt(d),j;if(isNaN($))throw new ParseError("\\@char has non-numeric argument "+d);if($<0||$>=1114111)throw new ParseError("\\@char with invalid code point "+d);return $<=65535?j=String.fromCharCode($):($-=65536,j=String.fromCharCode(($>>10)+55296,($&1023)+56320)),{type:"textord",mode:o.mode,text:j}}});var htmlBuilder$8=(a,s)=>{var o=buildExpression$1(a.body,s.withColor(a.color),!1);return buildCommon.makeFragment(o)},mathmlBuilder$7=(a,s)=>{var o=buildExpression(a.body,s.withColor(a.color)),c=new mathMLTree.MathNode("mstyle",o);return c.setAttribute("mathcolor",a.color),c};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(a,s){var{parser:o}=a,c=assertNodeType(s[0],"color-token").color,h=s[1];return{type:"color",mode:o.mode,color:c,body:ordargument(h)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(a,s){var{parser:o,breakOnTokenText:c}=a,h=assertNodeType(s[0],"color-token").color;o.gullet.macros.set("\\current@color",h);var d=o.parseExpression(!0,c);return{type:"color",mode:o.mode,color:h,body:d}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(a,s,o){var{parser:c}=a,h=c.gullet.future().text==="["?c.parseSizeGroup(!0):null,d=!c.settings.displayMode||!c.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:c.mode,newLine:d,size:h&&assertNodeType(h,"size").value}},htmlBuilder(a,s){var o=buildCommon.makeSpan(["mspace"],[],s);return a.newLine&&(o.classes.push("newline"),a.size&&(o.style.marginTop=makeEm(calculateSize(a.size,s)))),o},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mspace");return a.newLine&&(o.setAttribute("linebreak","newline"),a.size&&o.setAttribute("height",makeEm(calculateSize(a.size,s)))),o}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=a=>{var s=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new ParseError("Expected a control sequence",a);return s},getRHS=a=>{var s=a.gullet.popToken();return s.text==="="&&(s=a.gullet.popToken(),s.text===" "&&(s=a.gullet.popToken())),s},letCommand=(a,s,o,c)=>{var h=a.gullet.macros.get(o.text);h==null&&(o.noexpand=!0,h={tokens:[o],numArgs:0,unexpandable:!a.gullet.isExpandable(o.text)}),a.gullet.macros.set(s,h,c)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(a){var{parser:s,funcName:o}=a;s.consumeSpaces();var c=s.fetch();if(globalMap[c.text])return(o==="\\global"||o==="\\\\globallong")&&(c.text=globalMap[c.text]),assertNodeType(s.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",c)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a){var{parser:s,funcName:o}=a,c=s.gullet.popToken(),h=c.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(h))throw new ParseError("Expected a control sequence",c);for(var d=0,b,_=[[]];s.gullet.future().text!=="{";)if(c=s.gullet.popToken(),c.text==="#"){if(s.gullet.future().text==="{"){b=s.gullet.future(),_[d].push("{");break}if(c=s.gullet.popToken(),!/^[1-9]$/.test(c.text))throw new ParseError('Invalid argument number "'+c.text+'"');if(parseInt(c.text)!==d+1)throw new ParseError('Argument number "'+c.text+'" out of order');d++,_.push([])}else{if(c.text==="EOF")throw new ParseError("Expected a macro definition");_[d].push(c.text)}var{tokens:$}=s.gullet.consumeArg();return b&&$.unshift(b),(o==="\\edef"||o==="\\xdef")&&($=s.gullet.expandTokens($),$.reverse()),s.gullet.macros.set(h,{tokens:$,numArgs:d,delimiters:_},o===globalMap[o]),{type:"internal",mode:s.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a){var{parser:s,funcName:o}=a,c=checkControlSequence(s.gullet.popToken());s.gullet.consumeSpaces();var h=getRHS(s);return letCommand(s,c,h,o==="\\\\globallet"),{type:"internal",mode:s.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a){var{parser:s,funcName:o}=a,c=checkControlSequence(s.gullet.popToken()),h=s.gullet.popToken(),d=s.gullet.popToken();return letCommand(s,c,d,o==="\\\\globalfuture"),s.gullet.pushToken(d),s.gullet.pushToken(h),{type:"internal",mode:s.mode}}});var getMetrics=function a(s,o,c){var h=symbols.math[s]&&symbols.math[s].replace,d=getCharacterMetrics(h||s,o,c);if(!d)throw new Error("Unsupported symbol "+s+" and font size "+o+".");return d},styleWrap=function a(s,o,c,h){var d=c.havingBaseStyle(o),b=buildCommon.makeSpan(h.concat(d.sizingClasses(c)),[s],c),_=d.sizeMultiplier/c.sizeMultiplier;return b.height*=_,b.depth*=_,b.maxFontSize=d.sizeMultiplier,b},centerSpan=function a(s,o,c){var h=o.havingBaseStyle(c),d=(1-o.sizeMultiplier/h.sizeMultiplier)*o.fontMetrics().axisHeight;s.classes.push("delimcenter"),s.style.top=makeEm(d),s.height-=d,s.depth+=d},makeSmallDelim=function a(s,o,c,h,d,b){var _=buildCommon.makeSymbol(s,"Main-Regular",d,h),$=styleWrap(_,o,h,b);return c&&centerSpan($,h,o),$},mathrmSize=function a(s,o,c,h){return buildCommon.makeSymbol(s,"Size"+o+"-Regular",c,h)},makeLargeDelim=function a(s,o,c,h,d,b){var _=mathrmSize(s,o,d,h),$=styleWrap(buildCommon.makeSpan(["delimsizing","size"+o],[_],h),Style$1.TEXT,h,b);return c&&centerSpan($,h,Style$1.TEXT),$},makeGlyphSpan=function a(s,o,c){var h;o==="Size1-Regular"?h="delim-size1":h="delim-size4";var d=buildCommon.makeSpan(["delimsizinginner",h],[buildCommon.makeSpan([],[buildCommon.makeSymbol(s,o,c)])]);return{type:"elem",elem:d}},makeInner=function a(s,o,c){var h=fontMetricsData["Size4-Regular"][s.charCodeAt(0)]?fontMetricsData["Size4-Regular"][s.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][s.charCodeAt(0)][4],d=new PathNode("inner",innerPath(s,Math.round(1e3*o))),b=new SvgNode([d],{width:makeEm(h),height:makeEm(o),style:"width:"+makeEm(h),viewBox:"0 0 "+1e3*h+" "+Math.round(1e3*o),preserveAspectRatio:"xMinYMin"}),_=buildCommon.makeSvgSpan([],[b],c);return _.height=o,_.style.height=makeEm(o),_.style.width=makeEm(h),{type:"elem",elem:_}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function a(s,o,c,h,d,b){var _,$,j,Xt,Lt="",fr=0;_=j=Xt=s,$=null;var Jr="Size1-Regular";s==="\\uparrow"?j=Xt="":s==="\\Uparrow"?j=Xt="":s==="\\downarrow"?_=j="":s==="\\Downarrow"?_=j="":s==="\\updownarrow"?(_="\\uparrow",j="",Xt="\\downarrow"):s==="\\Updownarrow"?(_="\\Uparrow",j="",Xt="\\Downarrow"):verts.includes(s)?(j="",Lt="vert",fr=333):doubleVerts.includes(s)?(j="",Lt="doublevert",fr=556):s==="["||s==="\\lbrack"?(_="",j="",Xt="",Jr="Size4-Regular",Lt="lbrack",fr=667):s==="]"||s==="\\rbrack"?(_="",j="",Xt="",Jr="Size4-Regular",Lt="rbrack",fr=667):s==="\\lfloor"||s===""?(j=_="",Xt="",Jr="Size4-Regular",Lt="lfloor",fr=667):s==="\\lceil"||s===""?(_="",j=Xt="",Jr="Size4-Regular",Lt="lceil",fr=667):s==="\\rfloor"||s===""?(j=_="",Xt="",Jr="Size4-Regular",Lt="rfloor",fr=667):s==="\\rceil"||s===""?(_="",j=Xt="",Jr="Size4-Regular",Lt="rceil",fr=667):s==="("||s==="\\lparen"?(_="",j="",Xt="",Jr="Size4-Regular",Lt="lparen",fr=875):s===")"||s==="\\rparen"?(_="",j="",Xt="",Jr="Size4-Regular",Lt="rparen",fr=875):s==="\\{"||s==="\\lbrace"?(_="",$="",Xt="",j="",Jr="Size4-Regular"):s==="\\}"||s==="\\rbrace"?(_="",$="",Xt="",j="",Jr="Size4-Regular"):s==="\\lgroup"||s===""?(_="",Xt="",j="",Jr="Size4-Regular"):s==="\\rgroup"||s===""?(_="",Xt="",j="",Jr="Size4-Regular"):s==="\\lmoustache"||s===""?(_="",Xt="",j="",Jr="Size4-Regular"):(s==="\\rmoustache"||s==="")&&(_="",Xt="",j="",Jr="Size4-Regular");var Js=getMetrics(_,Jr,d),qs=Js.height+Js.depth,zo=getMetrics(j,Jr,d),js=zo.height+zo.depth,eu=getMetrics(Xt,Jr,d),Oo=eu.height+eu.depth,tu=0,Bo=1;if($!==null){var vu=getMetrics($,Jr,d);tu=vu.height+vu.depth,Bo=2}var t1=qs+Oo+tu,e1=Math.max(0,Math.ceil((o-t1)/(Bo*js))),r1=t1+e1*Bo*js,a1=h.fontMetrics().axisHeight;c&&(a1*=h.sizeMultiplier);var i1=r1/2-a1,s1=[];if(Lt.length>0){var c1=r1-qs-Oo,h1=Math.round(r1*1e3),m1=tallDelim(Lt,Math.round(c1*1e3)),l1=new PathNode(Lt,m1),f1=(fr/1e3).toFixed(3)+"em",p1=(h1/1e3).toFixed(3)+"em",d1=new SvgNode([l1],{width:f1,height:p1,viewBox:"0 0 "+fr+" "+h1}),b1=buildCommon.makeSvgSpan([],[d1],h);b1.height=h1/1e3,b1.style.width=f1,b1.style.height=p1,s1.push({type:"elem",elem:b1})}else{if(s1.push(makeGlyphSpan(Xt,Jr,d)),s1.push(lap),$===null){var C1=r1-qs-Oo+2*lapInEms;s1.push(makeInner(j,C1,h))}else{var g1=(r1-qs-Oo-tu)/2+2*lapInEms;s1.push(makeInner(j,g1,h)),s1.push(lap),s1.push(makeGlyphSpan($,Jr,d)),s1.push(lap),s1.push(makeInner(j,g1,h))}s1.push(lap),s1.push(makeGlyphSpan(_,Jr,d))}var o1=h.havingBaseStyle(Style$1.TEXT),S1=buildCommon.makeVList({positionType:"bottom",positionData:i1,children:s1},o1);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[S1],o1),Style$1.TEXT,h,b)},vbPad=80,emPad=.08,sqrtSvg=function a(s,o,c,h,d){var b=sqrtPath(s,h,c),_=new PathNode(s,b),$=new SvgNode([_],{width:"400em",height:makeEm(o),viewBox:"0 0 400000 "+c,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[$],d)},makeSqrtImage=function a(s,o){var c=o.havingBaseSizing(),h=traverseSequence("\\surd",s*c.sizeMultiplier,stackLargeDelimiterSequence,c),d=c.sizeMultiplier,b=Math.max(0,o.minRuleThickness-o.fontMetrics().sqrtRuleThickness),_,$=0,j=0,Xt=0,Lt;return h.type==="small"?(Xt=1e3+1e3*b+vbPad,s<1?d=1:s<1.4&&(d=.7),$=(1+b+emPad)/d,j=(1+b)/d,_=sqrtSvg("sqrtMain",$,Xt,b,o),_.style.minWidth="0.853em",Lt=.833/d):h.type==="large"?(Xt=(1e3+vbPad)*sizeToMaxHeight[h.size],j=(sizeToMaxHeight[h.size]+b)/d,$=(sizeToMaxHeight[h.size]+b+emPad)/d,_=sqrtSvg("sqrtSize"+h.size,$,Xt,b,o),_.style.minWidth="1.02em",Lt=1/d):($=s+b+emPad,j=s+b,Xt=Math.floor(1e3*s+b)+vbPad,_=sqrtSvg("sqrtTall",$,Xt,b,o),_.style.minWidth="0.742em",Lt=1.056),_.height=j,_.style.height=makeEm($),{span:_,advanceWidth:Lt,ruleWidth:(o.fontMetrics().sqrtRuleThickness+b)*d}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function a(s,o,c,h,d){if(s==="<"||s==="\\lt"||s===""?s="\\langle":(s===">"||s==="\\gt"||s==="")&&(s="\\rangle"),stackLargeDelimiters.includes(s)||stackNeverDelimiters.includes(s))return makeLargeDelim(s,o,!1,c,h,d);if(stackAlwaysDelimiters.includes(s))return makeStackedDelim(s,sizeToMaxHeight[o],!1,c,h,d);throw new ParseError("Illegal delimiter: '"+s+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function a(s){if(s.type==="small")return"Main-Regular";if(s.type==="large")return"Size"+s.size+"-Regular";if(s.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+s.type+"' here.")},traverseSequence=function a(s,o,c,h){for(var d=Math.min(2,3-h.style.size),b=d;b<c.length&&c[b].type!=="stack";b++){var _=getMetrics(s,delimTypeToFont(c[b]),"math"),$=_.height+_.depth;if(c[b].type==="small"){var j=h.havingBaseStyle(c[b].style);$*=j.sizeMultiplier}if($>o)return c[b]}return c[c.length-1]},makeCustomSizedDelim=function a(s,o,c,h,d,b){s==="<"||s==="\\lt"||s===""?s="\\langle":(s===">"||s==="\\gt"||s==="")&&(s="\\rangle");var _;stackNeverDelimiters.includes(s)?_=stackNeverDelimiterSequence:stackLargeDelimiters.includes(s)?_=stackLargeDelimiterSequence:_=stackAlwaysDelimiterSequence;var $=traverseSequence(s,o,_,h);return $.type==="small"?makeSmallDelim(s,$.style,c,h,d,b):$.type==="large"?makeLargeDelim(s,$.size,c,h,d,b):makeStackedDelim(s,o,c,h,d,b)},makeLeftRightDelim=function a(s,o,c,h,d,b){var _=h.fontMetrics().axisHeight*h.sizeMultiplier,$=901,j=5/h.fontMetrics().ptPerEm,Xt=Math.max(o-_,c+_),Lt=Math.max(Xt/500*$,2*Xt-j);return makeCustomSizedDelim(s,Lt,!0,h,d,b)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(a,s){var o=checkSymbolNodeType(a);if(o&&delimiters.includes(o.text))return o;throw o?new ParseError("Invalid delimiter '"+o.text+"' after '"+s.funcName+"'",a):new ParseError("Invalid delimiter type '"+a.type+"'",a)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(a,s)=>{var o=checkDelimiter(s[0],a);return{type:"delimsizing",mode:a.parser.mode,size:delimiterSizes[a.funcName].size,mclass:delimiterSizes[a.funcName].mclass,delim:o.text}},htmlBuilder:(a,s)=>a.delim==="."?buildCommon.makeSpan([a.mclass]):delimiter.sizedDelim(a.delim,a.size,s,a.mode,[a.mclass]),mathmlBuilder:a=>{var s=[];a.delim!=="."&&s.push(makeText(a.delim,a.mode));var o=new mathMLTree.MathNode("mo",s);a.mclass==="mopen"||a.mclass==="mclose"?o.setAttribute("fence","true"):o.setAttribute("fence","false"),o.setAttribute("stretchy","true");var c=makeEm(delimiter.sizeToMaxHeight[a.size]);return o.setAttribute("minsize",c),o.setAttribute("maxsize",c),o}});function assertParsed(a){if(!a.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(a,s)=>{var o=a.parser.gullet.macros.get("\\current@color");if(o&&typeof o!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:a.parser.mode,delim:checkDelimiter(s[0],a).text,color:o}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(a,s)=>{var o=checkDelimiter(s[0],a),c=a.parser;++c.leftrightDepth;var h=c.parseExpression(!1);--c.leftrightDepth,c.expect("\\right",!1);var d=assertNodeType(c.parseFunction(),"leftright-right");return{type:"leftright",mode:c.mode,body:h,left:o.text,right:d.delim,rightColor:d.color}},htmlBuilder:(a,s)=>{assertParsed(a);for(var o=buildExpression$1(a.body,s,!0,["mopen","mclose"]),c=0,h=0,d=!1,b=0;b<o.length;b++)o[b].isMiddle?d=!0:(c=Math.max(o[b].height,c),h=Math.max(o[b].depth,h));c*=s.sizeMultiplier,h*=s.sizeMultiplier;var _;if(a.left==="."?_=makeNullDelimiter(s,["mopen"]):_=delimiter.leftRightDelim(a.left,c,h,s,a.mode,["mopen"]),o.unshift(_),d)for(var $=1;$<o.length;$++){var j=o[$],Xt=j.isMiddle;Xt&&(o[$]=delimiter.leftRightDelim(Xt.delim,c,h,Xt.options,a.mode,[]))}var Lt;if(a.right===".")Lt=makeNullDelimiter(s,["mclose"]);else{var fr=a.rightColor?s.withColor(a.rightColor):s;Lt=delimiter.leftRightDelim(a.right,c,h,fr,a.mode,["mclose"])}return o.push(Lt),buildCommon.makeSpan(["minner"],o,s)},mathmlBuilder:(a,s)=>{assertParsed(a);var o=buildExpression(a.body,s);if(a.left!=="."){var c=new mathMLTree.MathNode("mo",[makeText(a.left,a.mode)]);c.setAttribute("fence","true"),o.unshift(c)}if(a.right!=="."){var h=new mathMLTree.MathNode("mo",[makeText(a.right,a.mode)]);h.setAttribute("fence","true"),a.rightColor&&h.setAttribute("mathcolor",a.rightColor),o.push(h)}return makeRow(o)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(a,s)=>{var o=checkDelimiter(s[0],a);if(!a.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",o);return{type:"middle",mode:a.parser.mode,delim:o.text}},htmlBuilder:(a,s)=>{var o;if(a.delim===".")o=makeNullDelimiter(s,[]);else{o=delimiter.sizedDelim(a.delim,1,s,a.mode,[]);var c={delim:a.delim,options:s};o.isMiddle=c}return o},mathmlBuilder:(a,s)=>{var o=a.delim==="\\vert"||a.delim==="|"?makeText("|","text"):makeText(a.delim,a.mode),c=new mathMLTree.MathNode("mo",[o]);return c.setAttribute("fence","true"),c.setAttribute("lspace","0.05em"),c.setAttribute("rspace","0.05em"),c}});var htmlBuilder$7=(a,s)=>{var o=buildCommon.wrapFragment(buildGroup$1(a.body,s),s),c=a.label.slice(1),h=s.sizeMultiplier,d,b=0,_=utils.isCharacterBox(a.body);if(c==="sout")d=buildCommon.makeSpan(["stretchy","sout"]),d.height=s.fontMetrics().defaultRuleThickness/h,b=-.5*s.fontMetrics().xHeight;else if(c==="phase"){var $=calculateSize({number:.6,unit:"pt"},s),j=calculateSize({number:.35,unit:"ex"},s),Xt=s.havingBaseSizing();h=h/Xt.sizeMultiplier;var Lt=o.height+o.depth+$+j;o.style.paddingLeft=makeEm(Lt/2+$);var fr=Math.floor(1e3*Lt*h),Jr=phasePath(fr),Js=new SvgNode([new PathNode("phase",Jr)],{width:"400em",height:makeEm(fr/1e3),viewBox:"0 0 400000 "+fr,preserveAspectRatio:"xMinYMin slice"});d=buildCommon.makeSvgSpan(["hide-tail"],[Js],s),d.style.height=makeEm(Lt),b=o.depth+$+j}else{/cancel/.test(c)?_||o.classes.push("cancel-pad"):c==="angl"?o.classes.push("anglpad"):o.classes.push("boxpad");var qs=0,zo=0,js=0;/box/.test(c)?(js=Math.max(s.fontMetrics().fboxrule,s.minRuleThickness),qs=s.fontMetrics().fboxsep+(c==="colorbox"?0:js),zo=qs):c==="angl"?(js=Math.max(s.fontMetrics().defaultRuleThickness,s.minRuleThickness),qs=4*js,zo=Math.max(0,.25-o.depth)):(qs=_?.2:0,zo=qs),d=stretchy.encloseSpan(o,c,qs,zo,s),/fbox|boxed|fcolorbox/.test(c)?(d.style.borderStyle="solid",d.style.borderWidth=makeEm(js)):c==="angl"&&js!==.049&&(d.style.borderTopWidth=makeEm(js),d.style.borderRightWidth=makeEm(js)),b=o.depth+zo,a.backgroundColor&&(d.style.backgroundColor=a.backgroundColor,a.borderColor&&(d.style.borderColor=a.borderColor))}var eu;if(a.backgroundColor)eu=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:b},{type:"elem",elem:o,shift:0}]},s);else{var Oo=/cancel|phase/.test(c)?["svg-align"]:[];eu=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:d,shift:b,wrapperClasses:Oo}]},s)}return/cancel/.test(c)&&(eu.height=o.height,eu.depth=o.depth),/cancel/.test(c)&&!_?buildCommon.makeSpan(["mord","cancel-lap"],[eu],s):buildCommon.makeSpan(["mord"],[eu],s)},mathmlBuilder$6=(a,s)=>{var o=0,c=new mathMLTree.MathNode(a.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(a.body,s)]);switch(a.label){case"\\cancel":c.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":c.setAttribute("notation","downdiagonalstrike");break;case"\\phase":c.setAttribute("notation","phasorangle");break;case"\\sout":c.setAttribute("notation","horizontalstrike");break;case"\\fbox":c.setAttribute("notation","box");break;case"\\angl":c.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(o=s.fontMetrics().fboxsep*s.fontMetrics().ptPerEm,c.setAttribute("width","+"+2*o+"pt"),c.setAttribute("height","+"+2*o+"pt"),c.setAttribute("lspace",o+"pt"),c.setAttribute("voffset",o+"pt"),a.label==="\\fcolorbox"){var h=Math.max(s.fontMetrics().fboxrule,s.minRuleThickness);c.setAttribute("style","border: "+h+"em solid "+String(a.borderColor))}break;case"\\xcancel":c.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return a.backgroundColor&&c.setAttribute("mathbackground",a.backgroundColor),c};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(a,s,o){var{parser:c,funcName:h}=a,d=assertNodeType(s[0],"color-token").color,b=s[1];return{type:"enclose",mode:c.mode,label:h,backgroundColor:d,body:b}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(a,s,o){var{parser:c,funcName:h}=a,d=assertNodeType(s[0],"color-token").color,b=assertNodeType(s[1],"color-token").color,_=s[2];return{type:"enclose",mode:c.mode,label:h,backgroundColor:b,borderColor:d,body:_}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(a,s){var{parser:o}=a;return{type:"enclose",mode:o.mode,label:"\\fbox",body:s[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(a,s){var{parser:o,funcName:c}=a,h=s[0];return{type:"enclose",mode:o.mode,label:c,body:h}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(a,s){var{parser:o}=a;return{type:"enclose",mode:o.mode,label:"\\angl",body:s[0]}}});var _environments={};function defineEnvironment(a){for(var{type:s,names:o,props:c,handler:h,htmlBuilder:d,mathmlBuilder:b}=a,_={type:s,numArgs:c.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:h},$=0;$<o.length;++$)_environments[o[$]]=_;d&&(_htmlGroupBuilders[s]=d),b&&(_mathmlGroupBuilders[s]=b)}var _macros={};function defineMacro(a,s){_macros[a]=s}function getHLines(a){var s=[];a.consumeSpaces();var o=a.fetch().text;for(o==="\\relax"&&(a.consume(),a.consumeSpaces(),o=a.fetch().text);o==="\\hline"||o==="\\hdashline";)a.consume(),s.push(o==="\\hdashline"),a.consumeSpaces(),o=a.fetch().text;return s}var validateAmsEnvironmentContext=a=>{var s=a.parser.settings;if(!s.displayMode)throw new ParseError("{"+a.envName+"} can be used only in display mode.")};function getAutoTag(a){if(a.indexOf("ed")===-1)return a.indexOf("*")===-1}function parseArray(a,s,o){var{hskipBeforeAndAfter:c,addJot:h,cols:d,arraystretch:b,colSeparationType:_,autoTag:$,singleRow:j,emptySingleRow:Xt,maxNumCols:Lt,leqno:fr}=s;if(a.gullet.beginGroup(),j||a.gullet.macros.set("\\cr","\\\\\\relax"),!b){var Jr=a.gullet.expandMacroAsText("\\arraystretch");if(Jr==null)b=1;else if(b=parseFloat(Jr),!b||b<0)throw new ParseError("Invalid \\arraystretch: "+Jr)}a.gullet.beginGroup();var Js=[],qs=[Js],zo=[],js=[],eu=$!=null?[]:void 0;function Oo(){$&&a.gullet.macros.set("\\@eqnsw","1",!0)}function tu(){eu&&(a.gullet.macros.get("\\df@tag")?(eu.push(a.subparse([new Token("\\df@tag")])),a.gullet.macros.set("\\df@tag",void 0,!0)):eu.push(!!$&&a.gullet.macros.get("\\@eqnsw")==="1"))}for(Oo(),js.push(getHLines(a));;){var Bo=a.parseExpression(!1,j?"\\end":"\\\\");a.gullet.endGroup(),a.gullet.beginGroup(),Bo={type:"ordgroup",mode:a.mode,body:Bo},o&&(Bo={type:"styling",mode:a.mode,style:o,body:[Bo]}),Js.push(Bo);var vu=a.fetch().text;if(vu==="&"){if(Lt&&Js.length===Lt){if(j||_)throw new ParseError("Too many tab characters: &",a.nextToken);a.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}a.consume()}else if(vu==="\\end"){tu(),Js.length===1&&Bo.type==="styling"&&Bo.body[0].body.length===0&&(qs.length>1||!Xt)&&qs.pop(),js.length<qs.length+1&&js.push([]);break}else if(vu==="\\\\"){a.consume();var t1=void 0;a.gullet.future().text!==" "&&(t1=a.parseSizeGroup(!0)),zo.push(t1?t1.value:null),tu(),js.push(getHLines(a)),Js=[],qs.push(Js),Oo()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",a.nextToken)}return a.gullet.endGroup(),a.gullet.endGroup(),{type:"array",mode:a.mode,addJot:h,arraystretch:b,body:qs,cols:d,rowGaps:zo,hskipBeforeAndAfter:c,hLinesBeforeRow:js,colSeparationType:_,tags:eu,leqno:fr}}function dCellStyle(a){return a.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function a(s,o){var c,h,d=s.body.length,b=s.hLinesBeforeRow,_=0,$=new Array(d),j=[],Xt=Math.max(o.fontMetrics().arrayRuleWidth,o.minRuleThickness),Lt=1/o.fontMetrics().ptPerEm,fr=5*Lt;if(s.colSeparationType&&s.colSeparationType==="small"){var Jr=o.havingStyle(Style$1.SCRIPT).sizeMultiplier;fr=.2778*(Jr/o.sizeMultiplier)}var Js=s.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},o):12*Lt,qs=3*Lt,zo=s.arraystretch*Js,js=.7*zo,eu=.3*zo,Oo=0;function tu(j1){for(var Q1=0;Q1<j1.length;++Q1)Q1>0&&(Oo+=.25),j.push({pos:Oo,isDashed:j1[Q1]})}for(tu(b[0]),c=0;c<s.body.length;++c){var Bo=s.body[c],vu=js,t1=eu;_<Bo.length&&(_=Bo.length);var e1=new Array(Bo.length);for(h=0;h<Bo.length;++h){var r1=buildGroup$1(Bo[h],o);t1<r1.depth&&(t1=r1.depth),vu<r1.height&&(vu=r1.height),e1[h]=r1}var a1=s.rowGaps[c],i1=0;a1&&(i1=calculateSize(a1,o),i1>0&&(i1+=eu,t1<i1&&(t1=i1),i1=0)),s.addJot&&(t1+=qs),e1.height=vu,e1.depth=t1,Oo+=vu,e1.pos=Oo,Oo+=t1+i1,$[c]=e1,tu(b[c+1])}var s1=Oo/2+o.fontMetrics().axisHeight,c1=s.cols||[],h1=[],m1,l1,f1=[];if(s.tags&&s.tags.some(j1=>j1))for(c=0;c<d;++c){var p1=$[c],d1=p1.pos-s1,b1=s.tags[c],C1=void 0;b1===!0?C1=buildCommon.makeSpan(["eqn-num"],[],o):b1===!1?C1=buildCommon.makeSpan([],[],o):C1=buildCommon.makeSpan([],buildExpression$1(b1,o,!0),o),C1.depth=p1.depth,C1.height=p1.height,f1.push({type:"elem",elem:C1,shift:d1})}for(h=0,l1=0;h<_||l1<c1.length;++h,++l1){for(var g1=c1[l1]||{},o1=!0;g1.type==="separator";){if(o1||(m1=buildCommon.makeSpan(["arraycolsep"],[]),m1.style.width=makeEm(o.fontMetrics().doubleRuleSep),h1.push(m1)),g1.separator==="|"||g1.separator===":"){var S1=g1.separator==="|"?"solid":"dashed",v1=buildCommon.makeSpan(["vertical-separator"],[],o);v1.style.height=makeEm(Oo),v1.style.borderRightWidth=makeEm(Xt),v1.style.borderRightStyle=S1,v1.style.margin="0 "+makeEm(-Xt/2);var B1=Oo-s1;B1&&(v1.style.verticalAlign=makeEm(-B1)),h1.push(v1)}else throw new ParseError("Invalid separator type: "+g1.separator);l1++,g1=c1[l1]||{},o1=!1}if(!(h>=_)){var T1=void 0;(h>0||s.hskipBeforeAndAfter)&&(T1=utils.deflt(g1.pregap,fr),T1!==0&&(m1=buildCommon.makeSpan(["arraycolsep"],[]),m1.style.width=makeEm(T1),h1.push(m1)));var w1=[];for(c=0;c<d;++c){var x1=$[c],M1=x1[h];if(M1){var O1=x1.pos-s1;M1.depth=x1.depth,M1.height=x1.height,w1.push({type:"elem",elem:M1,shift:O1})}}w1=buildCommon.makeVList({positionType:"individualShift",children:w1},o),w1=buildCommon.makeSpan(["col-align-"+(g1.align||"c")],[w1]),h1.push(w1),(h<_-1||s.hskipBeforeAndAfter)&&(T1=utils.deflt(g1.postgap,fr),T1!==0&&(m1=buildCommon.makeSpan(["arraycolsep"],[]),m1.style.width=makeEm(T1),h1.push(m1)))}}if($=buildCommon.makeSpan(["mtable"],h1),j.length>0){for(var N1=buildCommon.makeLineSpan("hline",o,Xt),L1=buildCommon.makeLineSpan("hdashline",o,Xt),G1=[{type:"elem",elem:$,shift:0}];j.length>0;){var q1=j.pop(),H1=q1.pos-s1;q1.isDashed?G1.push({type:"elem",elem:L1,shift:H1}):G1.push({type:"elem",elem:N1,shift:H1})}$=buildCommon.makeVList({positionType:"individualShift",children:G1},o)}if(f1.length===0)return buildCommon.makeSpan(["mord"],[$],o);var W1=buildCommon.makeVList({positionType:"individualShift",children:f1},o);return W1=buildCommon.makeSpan(["tag"],[W1],o),buildCommon.makeFragment([$,W1])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function a(s,o){for(var c=[],h=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),d=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),b=0;b<s.body.length;b++){for(var _=s.body[b],$=[],j=0;j<_.length;j++)$.push(new mathMLTree.MathNode("mtd",[buildGroup(_[j],o)]));s.tags&&s.tags[b]&&($.unshift(h),$.push(h),s.leqno?$.unshift(d):$.push(d)),c.push(new mathMLTree.MathNode("mtr",$))}var Xt=new mathMLTree.MathNode("mtable",c),Lt=s.arraystretch===.5?.1:.16+s.arraystretch-1+(s.addJot?.09:0);Xt.setAttribute("rowspacing",makeEm(Lt));var fr="",Jr="";if(s.cols&&s.cols.length>0){var Js=s.cols,qs="",zo=!1,js=0,eu=Js.length;Js[0].type==="separator"&&(fr+="top ",js=1),Js[Js.length-1].type==="separator"&&(fr+="bottom ",eu-=1);for(var Oo=js;Oo<eu;Oo++)Js[Oo].type==="align"?(Jr+=alignMap[Js[Oo].align],zo&&(qs+="none "),zo=!0):Js[Oo].type==="separator"&&zo&&(qs+=Js[Oo].separator==="|"?"solid ":"dashed ",zo=!1);Xt.setAttribute("columnalign",Jr.trim()),/[sd]/.test(qs)&&Xt.setAttribute("columnlines",qs.trim())}if(s.colSeparationType==="align"){for(var tu=s.cols||[],Bo="",vu=1;vu<tu.length;vu++)Bo+=vu%2?"0em ":"1em ";Xt.setAttribute("columnspacing",Bo.trim())}else s.colSeparationType==="alignat"||s.colSeparationType==="gather"?Xt.setAttribute("columnspacing","0em"):s.colSeparationType==="small"?Xt.setAttribute("columnspacing","0.2778em"):s.colSeparationType==="CD"?Xt.setAttribute("columnspacing","0.5em"):Xt.setAttribute("columnspacing","1em");var t1="",e1=s.hLinesBeforeRow;fr+=e1[0].length>0?"left ":"",fr+=e1[e1.length-1].length>0?"right ":"";for(var r1=1;r1<e1.length-1;r1++)t1+=e1[r1].length===0?"none ":e1[r1][0]?"dashed ":"solid ";return/[sd]/.test(t1)&&Xt.setAttribute("rowlines",t1.trim()),fr!==""&&(Xt=new mathMLTree.MathNode("menclose",[Xt]),Xt.setAttribute("notation",fr.trim())),s.arraystretch&&s.arraystretch<1&&(Xt=new mathMLTree.MathNode("mstyle",[Xt]),Xt.setAttribute("scriptlevel","1")),Xt},alignedHandler=function a(s,o){s.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(s);var c=[],h=s.envName.indexOf("at")>-1?"alignat":"align",d=s.envName==="split",b=parseArray(s.parser,{cols:c,addJot:!0,autoTag:d?void 0:getAutoTag(s.envName),emptySingleRow:!0,colSeparationType:h,maxNumCols:d?2:void 0,leqno:s.parser.settings.leqno},"display"),_,$=0,j={type:"ordgroup",mode:s.mode,body:[]};if(o[0]&&o[0].type==="ordgroup"){for(var Xt="",Lt=0;Lt<o[0].body.length;Lt++){var fr=assertNodeType(o[0].body[Lt],"textord");Xt+=fr.text}_=Number(Xt),$=_*2}var Jr=!$;b.body.forEach(function(js){for(var eu=1;eu<js.length;eu+=2){var Oo=assertNodeType(js[eu],"styling"),tu=assertNodeType(Oo.body[0],"ordgroup");tu.body.unshift(j)}if(Jr)$<js.length&&($=js.length);else{var Bo=js.length/2;if(_<Bo)throw new ParseError("Too many math in a row: "+("expected "+_+", but got "+Bo),js[0])}});for(var Js=0;Js<$;++Js){var qs="r",zo=0;Js%2===1?qs="l":Js>0&&Jr&&(zo=1),c[Js]={type:"align",align:qs,pregap:zo,postgap:0}}return b.colSeparationType=Jr?"align":"alignat",b};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(a,s){var o=checkSymbolNodeType(s[0]),c=o?[s[0]]:assertNodeType(s[0],"ordgroup").body,h=c.map(function(b){var _=assertSymbolNodeType(b),$=_.text;if("lcr".indexOf($)!==-1)return{type:"align",align:$};if($==="|")return{type:"separator",separator:"|"};if($===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+$,b)}),d={cols:h,hskipBeforeAndAfter:!0,maxNumCols:h.length};return parseArray(a.parser,d,dCellStyle(a.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(a){var s={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[a.envName.replace("*","")],o="c",c={hskipBeforeAndAfter:!1,cols:[{type:"align",align:o}]};if(a.envName.charAt(a.envName.length-1)==="*"){var h=a.parser;if(h.consumeSpaces(),h.fetch().text==="["){if(h.consume(),h.consumeSpaces(),o=h.fetch().text,"lcr".indexOf(o)===-1)throw new ParseError("Expected l or c or r",h.nextToken);h.consume(),h.consumeSpaces(),h.expect("]"),h.consume(),c.cols=[{type:"align",align:o}]}}var d=parseArray(a.parser,c,dCellStyle(a.envName)),b=Math.max(0,...d.body.map(_=>_.length));return d.cols=new Array(b).fill({type:"align",align:o}),s?{type:"leftright",mode:a.mode,body:[d],left:s[0],right:s[1],rightColor:void 0}:d},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(a){var s={arraystretch:.5},o=parseArray(a.parser,s,"script");return o.colSeparationType="small",o},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(a,s){var o=checkSymbolNodeType(s[0]),c=o?[s[0]]:assertNodeType(s[0],"ordgroup").body,h=c.map(function(b){var _=assertSymbolNodeType(b),$=_.text;if("lc".indexOf($)!==-1)return{type:"align",align:$};throw new ParseError("Unknown column alignment: "+$,b)});if(h.length>1)throw new ParseError("{subarray} can contain only one column");var d={cols:h,hskipBeforeAndAfter:!1,arraystretch:.5};if(d=parseArray(a.parser,d,"script"),d.body.length>0&&d.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return d},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(a){var s={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},o=parseArray(a.parser,s,dCellStyle(a.envName));return{type:"leftright",mode:a.mode,body:[o],left:a.envName.indexOf("r")>-1?".":"\\{",right:a.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(a){["gather","gather*"].includes(a.envName)&&validateAmsEnvironmentContext(a);var s={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(a.envName),emptySingleRow:!0,leqno:a.parser.settings.leqno};return parseArray(a.parser,s,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(a){validateAmsEnvironmentContext(a);var s={autoTag:getAutoTag(a.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:a.parser.settings.leqno};return parseArray(a.parser,s,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(a){return validateAmsEnvironmentContext(a),parseCD(a.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(a,s){throw new ParseError(a.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(a,s){var{parser:o,funcName:c}=a,h=s[0];if(h.type!=="ordgroup")throw new ParseError("Invalid environment name",h);for(var d="",b=0;b<h.body.length;++b)d+=assertNodeType(h.body[b],"textord").text;if(c==="\\begin"){if(!environments.hasOwnProperty(d))throw new ParseError("No such environment: "+d,h);var _=environments[d],{args:$,optArgs:j}=o.parseArguments("\\begin{"+d+"}",_),Xt={mode:o.mode,envName:d,parser:o},Lt=_.handler(Xt,$,j);o.expect("\\end",!1);var fr=o.nextToken,Jr=assertNodeType(o.parseFunction(),"environment");if(Jr.name!==d)throw new ParseError("Mismatch: \\begin{"+d+"} matched by \\end{"+Jr.name+"}",fr);return Lt}return{type:"environment",mode:o.mode,name:d,nameGroup:h}}});var htmlBuilder$5=(a,s)=>{var o=a.font,c=s.withFont(o);return buildGroup$1(a.body,c)},mathmlBuilder$4=(a,s)=>{var o=a.font,c=s.withFont(o);return buildGroup(a.body,c)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=normalizeArgument(s[0]),d=c;return d in fontAliases&&(d=fontAliases[d]),{type:"font",mode:o.mode,font:d.slice(1),body:h}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(a,s)=>{var{parser:o}=a,c=s[0],h=utils.isCharacterBox(c);return{type:"mclass",mode:o.mode,mclass:binrelClass(c),body:[{type:"font",mode:o.mode,font:"boldsymbol",body:c}],isCharacterBox:h}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(a,s)=>{var{parser:o,funcName:c,breakOnTokenText:h}=a,{mode:d}=o,b=o.parseExpression(!0,h),_="math"+c.slice(1);return{type:"font",mode:d,font:_,body:{type:"ordgroup",mode:o.mode,body:b}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(a,s)=>{var o=s;return a==="display"?o=o.id>=Style$1.SCRIPT.id?o.text():Style$1.DISPLAY:a==="text"&&o.size===Style$1.DISPLAY.size?o=Style$1.TEXT:a==="script"?o=Style$1.SCRIPT:a==="scriptscript"&&(o=Style$1.SCRIPTSCRIPT),o},htmlBuilder$4=(a,s)=>{var o=adjustStyle(a.size,s.style),c=o.fracNum(),h=o.fracDen(),d;d=s.havingStyle(c);var b=buildGroup$1(a.numer,d,s);if(a.continued){var _=8.5/s.fontMetrics().ptPerEm,$=3.5/s.fontMetrics().ptPerEm;b.height=b.height<_?_:b.height,b.depth=b.depth<$?$:b.depth}d=s.havingStyle(h);var j=buildGroup$1(a.denom,d,s),Xt,Lt,fr;a.hasBarLine?(a.barSize?(Lt=calculateSize(a.barSize,s),Xt=buildCommon.makeLineSpan("frac-line",s,Lt)):Xt=buildCommon.makeLineSpan("frac-line",s),Lt=Xt.height,fr=Xt.height):(Xt=null,Lt=0,fr=s.fontMetrics().defaultRuleThickness);var Jr,Js,qs;o.size===Style$1.DISPLAY.size||a.size==="display"?(Jr=s.fontMetrics().num1,Lt>0?Js=3*fr:Js=7*fr,qs=s.fontMetrics().denom1):(Lt>0?(Jr=s.fontMetrics().num2,Js=fr):(Jr=s.fontMetrics().num3,Js=3*fr),qs=s.fontMetrics().denom2);var zo;if(Xt){var eu=s.fontMetrics().axisHeight;Jr-b.depth-(eu+.5*Lt)<Js&&(Jr+=Js-(Jr-b.depth-(eu+.5*Lt))),eu-.5*Lt-(j.height-qs)<Js&&(qs+=Js-(eu-.5*Lt-(j.height-qs)));var Oo=-(eu-.5*Lt);zo=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:j,shift:qs},{type:"elem",elem:Xt,shift:Oo},{type:"elem",elem:b,shift:-Jr}]},s)}else{var js=Jr-b.depth-(j.height-qs);js<Js&&(Jr+=.5*(Js-js),qs+=.5*(Js-js)),zo=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:j,shift:qs},{type:"elem",elem:b,shift:-Jr}]},s)}d=s.havingStyle(o),zo.height*=d.sizeMultiplier/s.sizeMultiplier,zo.depth*=d.sizeMultiplier/s.sizeMultiplier;var tu;o.size===Style$1.DISPLAY.size?tu=s.fontMetrics().delim1:o.size===Style$1.SCRIPTSCRIPT.size?tu=s.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:tu=s.fontMetrics().delim2;var Bo,vu;return a.leftDelim==null?Bo=makeNullDelimiter(s,["mopen"]):Bo=delimiter.customSizedDelim(a.leftDelim,tu,!0,s.havingStyle(o),a.mode,["mopen"]),a.continued?vu=buildCommon.makeSpan([]):a.rightDelim==null?vu=makeNullDelimiter(s,["mclose"]):vu=delimiter.customSizedDelim(a.rightDelim,tu,!0,s.havingStyle(o),a.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(d.sizingClasses(s)),[Bo,buildCommon.makeSpan(["mfrac"],[zo]),vu],s)},mathmlBuilder$3=(a,s)=>{var o=new mathMLTree.MathNode("mfrac",[buildGroup(a.numer,s),buildGroup(a.denom,s)]);if(!a.hasBarLine)o.setAttribute("linethickness","0px");else if(a.barSize){var c=calculateSize(a.barSize,s);o.setAttribute("linethickness",makeEm(c))}var h=adjustStyle(a.size,s.style);if(h.size!==s.style.size){o=new mathMLTree.MathNode("mstyle",[o]);var d=h.size===Style$1.DISPLAY.size?"true":"false";o.setAttribute("displaystyle",d),o.setAttribute("scriptlevel","0")}if(a.leftDelim!=null||a.rightDelim!=null){var b=[];if(a.leftDelim!=null){var _=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(a.leftDelim.replace("\\",""))]);_.setAttribute("fence","true"),b.push(_)}if(b.push(o),a.rightDelim!=null){var $=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(a.rightDelim.replace("\\",""))]);$.setAttribute("fence","true"),b.push($)}return makeRow(b)}return o};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=s[0],d=s[1],b,_=null,$=null,j="auto";switch(c){case"\\dfrac":case"\\frac":case"\\tfrac":b=!0;break;case"\\\\atopfrac":b=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":b=!1,_="(",$=")";break;case"\\\\bracefrac":b=!1,_="\\{",$="\\}";break;case"\\\\brackfrac":b=!1,_="[",$="]";break;default:throw new Error("Unrecognized genfrac command")}switch(c){case"\\dfrac":case"\\dbinom":j="display";break;case"\\tfrac":case"\\tbinom":j="text";break}return{type:"genfrac",mode:o.mode,continued:!1,numer:h,denom:d,hasBarLine:b,leftDelim:_,rightDelim:$,size:j,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=s[0],d=s[1];return{type:"genfrac",mode:o.mode,continued:!0,numer:h,denom:d,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(a){var{parser:s,funcName:o,token:c}=a,h;switch(o){case"\\over":h="\\frac";break;case"\\choose":h="\\binom";break;case"\\atop":h="\\\\atopfrac";break;case"\\brace":h="\\\\bracefrac";break;case"\\brack":h="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:s.mode,replaceWith:h,token:c}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function a(s){var o=null;return s.length>0&&(o=s,o=o==="."?null:o),o};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(a,s){var{parser:o}=a,c=s[4],h=s[5],d=normalizeArgument(s[0]),b=d.type==="atom"&&d.family==="open"?delimFromValue(d.text):null,_=normalizeArgument(s[1]),$=_.type==="atom"&&_.family==="close"?delimFromValue(_.text):null,j=assertNodeType(s[2],"size"),Xt,Lt=null;j.isBlank?Xt=!0:(Lt=j.value,Xt=Lt.number>0);var fr="auto",Jr=s[3];if(Jr.type==="ordgroup"){if(Jr.body.length>0){var Js=assertNodeType(Jr.body[0],"textord");fr=stylArray[Number(Js.text)]}}else Jr=assertNodeType(Jr,"textord"),fr=stylArray[Number(Jr.text)];return{type:"genfrac",mode:o.mode,numer:c,denom:h,continued:!1,hasBarLine:Xt,barSize:Lt,leftDelim:b,rightDelim:$,size:fr}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(a,s){var{parser:o,funcName:c,token:h}=a;return{type:"infix",mode:o.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(s[0],"size").value,token:h}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=s[0],d=assert(assertNodeType(s[1],"infix").size),b=s[2],_=d.number>0;return{type:"genfrac",mode:o.mode,numer:h,denom:b,continued:!1,hasBarLine:_,barSize:d,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(a,s)=>{var o=s.style,c,h;a.type==="supsub"?(c=a.sup?buildGroup$1(a.sup,s.havingStyle(o.sup()),s):buildGroup$1(a.sub,s.havingStyle(o.sub()),s),h=assertNodeType(a.base,"horizBrace")):h=assertNodeType(a,"horizBrace");var d=buildGroup$1(h.base,s.havingBaseStyle(Style$1.DISPLAY)),b=stretchy.svgSpan(h,s),_;if(h.isOver?(_=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.1},{type:"elem",elem:b}]},s),_.children[0].children[0].children[1].classes.push("svg-align")):(_=buildCommon.makeVList({positionType:"bottom",positionData:d.depth+.1+b.height,children:[{type:"elem",elem:b},{type:"kern",size:.1},{type:"elem",elem:d}]},s),_.children[0].children[0].children[0].classes.push("svg-align")),c){var $=buildCommon.makeSpan(["mord",h.isOver?"mover":"munder"],[_],s);h.isOver?_=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:$},{type:"kern",size:.2},{type:"elem",elem:c}]},s):_=buildCommon.makeVList({positionType:"bottom",positionData:$.depth+.2+c.height+c.depth,children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:$}]},s)}return buildCommon.makeSpan(["mord",h.isOver?"mover":"munder"],[_],s)},mathmlBuilder$2=(a,s)=>{var o=stretchy.mathMLnode(a.label);return new mathMLTree.MathNode(a.isOver?"mover":"munder",[buildGroup(a.base,s),o])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(a,s){var{parser:o,funcName:c}=a;return{type:"horizBrace",mode:o.mode,label:c,isOver:/^\\over/.test(c),base:s[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(a,s)=>{var{parser:o}=a,c=s[1],h=assertNodeType(s[0],"url").url;return o.settings.isTrusted({command:"\\href",url:h})?{type:"href",mode:o.mode,href:h,body:ordargument(c)}:o.formatUnsupportedCmd("\\href")},htmlBuilder:(a,s)=>{var o=buildExpression$1(a.body,s,!1);return buildCommon.makeAnchor(a.href,[],o,s)},mathmlBuilder:(a,s)=>{var o=buildExpressionRow(a.body,s);return o instanceof MathNode||(o=new MathNode("mrow",[o])),o.setAttribute("href",a.href),o}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(a,s)=>{var{parser:o}=a,c=assertNodeType(s[0],"url").url;if(!o.settings.isTrusted({command:"\\url",url:c}))return o.formatUnsupportedCmd("\\url");for(var h=[],d=0;d<c.length;d++){var b=c[d];b==="~"&&(b="\\textasciitilde"),h.push({type:"textord",mode:"text",text:b})}var _={type:"text",mode:o.mode,font:"\\texttt",body:h};return{type:"href",mode:o.mode,href:c,body:ordargument(_)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(a,s){var{parser:o}=a;return{type:"hbox",mode:o.mode,body:ordargument(s[0])}},htmlBuilder(a,s){var o=buildExpression$1(a.body,s,!1);return buildCommon.makeFragment(o)},mathmlBuilder(a,s){return new mathMLTree.MathNode("mrow",buildExpression(a.body,s))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(a,s)=>{var{parser:o,funcName:c,token:h}=a,d=assertNodeType(s[0],"raw").string,b=s[1];o.settings.strict&&o.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var _,$={};switch(c){case"\\htmlClass":$.class=d,_={command:"\\htmlClass",class:d};break;case"\\htmlId":$.id=d,_={command:"\\htmlId",id:d};break;case"\\htmlStyle":$.style=d,_={command:"\\htmlStyle",style:d};break;case"\\htmlData":{for(var j=d.split(","),Xt=0;Xt<j.length;Xt++){var Lt=j[Xt],fr=Lt.indexOf("=");if(fr<0)throw new ParseError("\\htmlData key/value '"+Lt+"' missing equals sign");var Jr=Lt.slice(0,fr),Js=Lt.slice(fr+1);$["data-"+Jr.trim()]=Js}_={command:"\\htmlData",attributes:$};break}default:throw new Error("Unrecognized html command")}return o.settings.isTrusted(_)?{type:"html",mode:o.mode,attributes:$,body:ordargument(b)}:o.formatUnsupportedCmd(c)},htmlBuilder:(a,s)=>{var o=buildExpression$1(a.body,s,!1),c=["enclosing"];a.attributes.class&&c.push(...a.attributes.class.trim().split(/\s+/));var h=buildCommon.makeSpan(c,o,s);for(var d in a.attributes)d!=="class"&&a.attributes.hasOwnProperty(d)&&h.setAttribute(d,a.attributes[d]);return h},mathmlBuilder:(a,s)=>buildExpressionRow(a.body,s)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(a,s)=>{var{parser:o}=a;return{type:"htmlmathml",mode:o.mode,html:ordargument(s[0]),mathml:ordargument(s[1])}},htmlBuilder:(a,s)=>{var o=buildExpression$1(a.html,s,!1);return buildCommon.makeFragment(o)},mathmlBuilder:(a,s)=>buildExpressionRow(a.mathml,s)});var sizeData=function a(s){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(s))return{number:+s,unit:"bp"};var o=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(s);if(!o)throw new ParseError("Invalid size: '"+s+"' in \\includegraphics");var c={number:+(o[1]+o[2]),unit:o[3]};if(!validUnit(c))throw new ParseError("Invalid unit: '"+c.unit+"' in \\includegraphics.");return c};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(a,s,o)=>{var{parser:c}=a,h={number:0,unit:"em"},d={number:.9,unit:"em"},b={number:0,unit:"em"},_="";if(o[0])for(var $=assertNodeType(o[0],"raw").string,j=$.split(","),Xt=0;Xt<j.length;Xt++){var Lt=j[Xt].split("=");if(Lt.length===2){var fr=Lt[1].trim();switch(Lt[0].trim()){case"alt":_=fr;break;case"width":h=sizeData(fr);break;case"height":d=sizeData(fr);break;case"totalheight":b=sizeData(fr);break;default:throw new ParseError("Invalid key: '"+Lt[0]+"' in \\includegraphics.")}}}var Jr=assertNodeType(s[0],"url").url;return _===""&&(_=Jr,_=_.replace(/^.*[\\/]/,""),_=_.substring(0,_.lastIndexOf("."))),c.settings.isTrusted({command:"\\includegraphics",url:Jr})?{type:"includegraphics",mode:c.mode,alt:_,width:h,height:d,totalheight:b,src:Jr}:c.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(a,s)=>{var o=calculateSize(a.height,s),c=0;a.totalheight.number>0&&(c=calculateSize(a.totalheight,s)-o);var h=0;a.width.number>0&&(h=calculateSize(a.width,s));var d={height:makeEm(o+c)};h>0&&(d.width=makeEm(h)),c>0&&(d.verticalAlign=makeEm(-c));var b=new Img(a.src,a.alt,d);return b.height=o,b.depth=c,b},mathmlBuilder:(a,s)=>{var o=new mathMLTree.MathNode("mglyph",[]);o.setAttribute("alt",a.alt);var c=calculateSize(a.height,s),h=0;if(a.totalheight.number>0&&(h=calculateSize(a.totalheight,s)-c,o.setAttribute("valign",makeEm(-h))),o.setAttribute("height",makeEm(c+h)),a.width.number>0){var d=calculateSize(a.width,s);o.setAttribute("width",makeEm(d))}return o.setAttribute("src",a.src),o}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(a,s){var{parser:o,funcName:c}=a,h=assertNodeType(s[0],"size");if(o.settings.strict){var d=c[1]==="m",b=h.value.unit==="mu";d?(b||o.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+c+" supports only mu units, "+("not "+h.value.unit+" units")),o.mode!=="math"&&o.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+c+" works only in math mode")):b&&o.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+c+" doesn't support mu units")}return{type:"kern",mode:o.mode,dimension:h.value}},htmlBuilder(a,s){return buildCommon.makeGlue(a.dimension,s)},mathmlBuilder(a,s){var o=calculateSize(a.dimension,s);return new mathMLTree.SpaceNode(o)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=s[0];return{type:"lap",mode:o.mode,alignment:c.slice(5),body:h}},htmlBuilder:(a,s)=>{var o;a.alignment==="clap"?(o=buildCommon.makeSpan([],[buildGroup$1(a.body,s)]),o=buildCommon.makeSpan(["inner"],[o],s)):o=buildCommon.makeSpan(["inner"],[buildGroup$1(a.body,s)]);var c=buildCommon.makeSpan(["fix"],[]),h=buildCommon.makeSpan([a.alignment],[o,c],s),d=buildCommon.makeSpan(["strut"]);return d.style.height=makeEm(h.height+h.depth),h.depth&&(d.style.verticalAlign=makeEm(-h.depth)),h.children.unshift(d),h=buildCommon.makeSpan(["thinbox"],[h],s),buildCommon.makeSpan(["mord","vbox"],[h],s)},mathmlBuilder:(a,s)=>{var o=new mathMLTree.MathNode("mpadded",[buildGroup(a.body,s)]);if(a.alignment!=="rlap"){var c=a.alignment==="llap"?"-1":"-0.5";o.setAttribute("lspace",c+"width")}return o.setAttribute("width","0px"),o}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(a,s){var{funcName:o,parser:c}=a,h=c.mode;c.switchMode("math");var d=o==="\\("?"\\)":"$",b=c.parseExpression(!1,d);return c.expect(d),c.switchMode(h),{type:"styling",mode:c.mode,style:"text",body:b}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(a,s){throw new ParseError("Mismatched "+a.funcName)}});var chooseMathStyle=(a,s)=>{switch(s.style.size){case Style$1.DISPLAY.size:return a.display;case Style$1.TEXT.size:return a.text;case Style$1.SCRIPT.size:return a.script;case Style$1.SCRIPTSCRIPT.size:return a.scriptscript;default:return a.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(a,s)=>{var{parser:o}=a;return{type:"mathchoice",mode:o.mode,display:ordargument(s[0]),text:ordargument(s[1]),script:ordargument(s[2]),scriptscript:ordargument(s[3])}},htmlBuilder:(a,s)=>{var o=chooseMathStyle(a,s),c=buildExpression$1(o,s,!1);return buildCommon.makeFragment(c)},mathmlBuilder:(a,s)=>{var o=chooseMathStyle(a,s);return buildExpressionRow(o,s)}});var assembleSupSub=(a,s,o,c,h,d,b)=>{a=buildCommon.makeSpan([],[a]);var _=o&&utils.isCharacterBox(o),$,j;if(s){var Xt=buildGroup$1(s,c.havingStyle(h.sup()),c);j={elem:Xt,kern:Math.max(c.fontMetrics().bigOpSpacing1,c.fontMetrics().bigOpSpacing3-Xt.depth)}}if(o){var Lt=buildGroup$1(o,c.havingStyle(h.sub()),c);$={elem:Lt,kern:Math.max(c.fontMetrics().bigOpSpacing2,c.fontMetrics().bigOpSpacing4-Lt.height)}}var fr;if(j&&$){var Jr=c.fontMetrics().bigOpSpacing5+$.elem.height+$.elem.depth+$.kern+a.depth+b;fr=buildCommon.makeVList({positionType:"bottom",positionData:Jr,children:[{type:"kern",size:c.fontMetrics().bigOpSpacing5},{type:"elem",elem:$.elem,marginLeft:makeEm(-d)},{type:"kern",size:$.kern},{type:"elem",elem:a},{type:"kern",size:j.kern},{type:"elem",elem:j.elem,marginLeft:makeEm(d)},{type:"kern",size:c.fontMetrics().bigOpSpacing5}]},c)}else if($){var Js=a.height-b;fr=buildCommon.makeVList({positionType:"top",positionData:Js,children:[{type:"kern",size:c.fontMetrics().bigOpSpacing5},{type:"elem",elem:$.elem,marginLeft:makeEm(-d)},{type:"kern",size:$.kern},{type:"elem",elem:a}]},c)}else if(j){var qs=a.depth+b;fr=buildCommon.makeVList({positionType:"bottom",positionData:qs,children:[{type:"elem",elem:a},{type:"kern",size:j.kern},{type:"elem",elem:j.elem,marginLeft:makeEm(d)},{type:"kern",size:c.fontMetrics().bigOpSpacing5}]},c)}else return a;var zo=[fr];if($&&d!==0&&!_){var js=buildCommon.makeSpan(["mspace"],[],c);js.style.marginRight=makeEm(d),zo.unshift(js)}return buildCommon.makeSpan(["mop","op-limits"],zo,c)},noSuccessor=["\\smallint"],htmlBuilder$2=(a,s)=>{var o,c,h=!1,d;a.type==="supsub"?(o=a.sup,c=a.sub,d=assertNodeType(a.base,"op"),h=!0):d=assertNodeType(a,"op");var b=s.style,_=!1;b.size===Style$1.DISPLAY.size&&d.symbol&&!noSuccessor.includes(d.name)&&(_=!0);var $;if(d.symbol){var j=_?"Size2-Regular":"Size1-Regular",Xt="";if((d.name==="\\oiint"||d.name==="\\oiiint")&&(Xt=d.name.slice(1),d.name=Xt==="oiint"?"\\iint":"\\iiint"),$=buildCommon.makeSymbol(d.name,j,"math",s,["mop","op-symbol",_?"large-op":"small-op"]),Xt.length>0){var Lt=$.italic,fr=buildCommon.staticSvg(Xt+"Size"+(_?"2":"1"),s);$=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:$,shift:0},{type:"elem",elem:fr,shift:_?.08:0}]},s),d.name="\\"+Xt,$.classes.unshift("mop"),$.italic=Lt}}else if(d.body){var Jr=buildExpression$1(d.body,s,!0);Jr.length===1&&Jr[0]instanceof SymbolNode?($=Jr[0],$.classes[0]="mop"):$=buildCommon.makeSpan(["mop"],Jr,s)}else{for(var Js=[],qs=1;qs<d.name.length;qs++)Js.push(buildCommon.mathsym(d.name[qs],d.mode,s));$=buildCommon.makeSpan(["mop"],Js,s)}var zo=0,js=0;return($ instanceof SymbolNode||d.name==="\\oiint"||d.name==="\\oiiint")&&!d.suppressBaseShift&&(zo=($.height-$.depth)/2-s.fontMetrics().axisHeight,js=$.italic),h?assembleSupSub($,o,c,s,b,js,zo):(zo&&($.style.position="relative",$.style.top=makeEm(zo)),$)},mathmlBuilder$1=(a,s)=>{var o;if(a.symbol)o=new MathNode("mo",[makeText(a.name,a.mode)]),noSuccessor.includes(a.name)&&o.setAttribute("largeop","false");else if(a.body)o=new MathNode("mo",buildExpression(a.body,s));else{o=new MathNode("mi",[new TextNode(a.name.slice(1))]);var c=new MathNode("mo",[makeText("","text")]);a.parentIsSupSub?o=new MathNode("mrow",[o,c]):o=newDocumentFragment([o,c])}return o},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=c;return h.length===1&&(h=singleCharBigOps[h]),{type:"op",mode:o.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:h}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(a,s)=>{var{parser:o}=a,c=s[0];return{type:"op",mode:o.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(c)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(a){var{parser:s,funcName:o}=a;return{type:"op",mode:s.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:o}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(a){var{parser:s,funcName:o}=a;return{type:"op",mode:s.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:o}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(a){var{parser:s,funcName:o}=a,c=o;return c.length===1&&(c=singleCharIntegrals[c]),{type:"op",mode:s.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:c}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(a,s)=>{var o,c,h=!1,d;a.type==="supsub"?(o=a.sup,c=a.sub,d=assertNodeType(a.base,"operatorname"),h=!0):d=assertNodeType(a,"operatorname");var b;if(d.body.length>0){for(var _=d.body.map(Lt=>{var fr=Lt.text;return typeof fr=="string"?{type:"textord",mode:Lt.mode,text:fr}:Lt}),$=buildExpression$1(_,s.withFont("mathrm"),!0),j=0;j<$.length;j++){var Xt=$[j];Xt instanceof SymbolNode&&(Xt.text=Xt.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}b=buildCommon.makeSpan(["mop"],$,s)}else b=buildCommon.makeSpan(["mop"],[],s);return h?assembleSupSub(b,o,c,s,s.style,0,0):b},mathmlBuilder=(a,s)=>{for(var o=buildExpression(a.body,s.withFont("mathrm")),c=!0,h=0;h<o.length;h++){var d=o[h];if(!(d instanceof mathMLTree.SpaceNode))if(d instanceof mathMLTree.MathNode)switch(d.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var b=d.children[0];d.children.length===1&&b instanceof mathMLTree.TextNode?b.text=b.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):c=!1;break}default:c=!1}else c=!1}if(c){var _=o.map(Xt=>Xt.toText()).join("");o=[new mathMLTree.TextNode(_)]}var $=new mathMLTree.MathNode("mi",o);$.setAttribute("mathvariant","normal");var j=new mathMLTree.MathNode("mo",[makeText("","text")]);return a.parentIsSupSub?new mathMLTree.MathNode("mrow",[$,j]):mathMLTree.newDocumentFragment([$,j])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(a,s)=>{var{parser:o,funcName:c}=a,h=s[0];return{type:"operatorname",mode:o.mode,body:ordargument(h),alwaysHandleSupSub:c==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(a,s){return a.semisimple?buildCommon.makeFragment(buildExpression$1(a.body,s,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(a.body,s,!0),s)},mathmlBuilder(a,s){return buildExpressionRow(a.body,s,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(a,s){var{parser:o}=a,c=s[0];return{type:"overline",mode:o.mode,body:c}},htmlBuilder(a,s){var o=buildGroup$1(a.body,s.havingCrampedStyle()),c=buildCommon.makeLineSpan("overline-line",s),h=s.fontMetrics().defaultRuleThickness,d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:3*h},{type:"elem",elem:c},{type:"kern",size:h}]},s);return buildCommon.makeSpan(["mord","overline"],[d],s)},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);o.setAttribute("stretchy","true");var c=new mathMLTree.MathNode("mover",[buildGroup(a.body,s),o]);return c.setAttribute("accent","true"),c}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(a,s)=>{var{parser:o}=a,c=s[0];return{type:"phantom",mode:o.mode,body:ordargument(c)}},htmlBuilder:(a,s)=>{var o=buildExpression$1(a.body,s.withPhantom(),!1);return buildCommon.makeFragment(o)},mathmlBuilder:(a,s)=>{var o=buildExpression(a.body,s);return new mathMLTree.MathNode("mphantom",o)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(a,s)=>{var{parser:o}=a,c=s[0];return{type:"hphantom",mode:o.mode,body:c}},htmlBuilder:(a,s)=>{var o=buildCommon.makeSpan([],[buildGroup$1(a.body,s.withPhantom())]);if(o.height=0,o.depth=0,o.children)for(var c=0;c<o.children.length;c++)o.children[c].height=0,o.children[c].depth=0;return o=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o}]},s),buildCommon.makeSpan(["mord"],[o],s)},mathmlBuilder:(a,s)=>{var o=buildExpression(ordargument(a.body),s),c=new mathMLTree.MathNode("mphantom",o),h=new mathMLTree.MathNode("mpadded",[c]);return h.setAttribute("height","0px"),h.setAttribute("depth","0px"),h}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(a,s)=>{var{parser:o}=a,c=s[0];return{type:"vphantom",mode:o.mode,body:c}},htmlBuilder:(a,s)=>{var o=buildCommon.makeSpan(["inner"],[buildGroup$1(a.body,s.withPhantom())]),c=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[o,c],s)},mathmlBuilder:(a,s)=>{var o=buildExpression(ordargument(a.body),s),c=new mathMLTree.MathNode("mphantom",o),h=new mathMLTree.MathNode("mpadded",[c]);return h.setAttribute("width","0px"),h}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(a,s){var{parser:o}=a,c=assertNodeType(s[0],"size").value,h=s[1];return{type:"raisebox",mode:o.mode,dy:c,body:h}},htmlBuilder(a,s){var o=buildGroup$1(a.body,s),c=calculateSize(a.dy,s);return buildCommon.makeVList({positionType:"shift",positionData:-c,children:[{type:"elem",elem:o}]},s)},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mpadded",[buildGroup(a.body,s)]),c=a.dy.number+a.dy.unit;return o.setAttribute("voffset",c),o}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(a){var{parser:s}=a;return{type:"internal",mode:s.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(a,s,o){var{parser:c}=a,h=o[0],d=assertNodeType(s[0],"size"),b=assertNodeType(s[1],"size");return{type:"rule",mode:c.mode,shift:h&&assertNodeType(h,"size").value,width:d.value,height:b.value}},htmlBuilder(a,s){var o=buildCommon.makeSpan(["mord","rule"],[],s),c=calculateSize(a.width,s),h=calculateSize(a.height,s),d=a.shift?calculateSize(a.shift,s):0;return o.style.borderRightWidth=makeEm(c),o.style.borderTopWidth=makeEm(h),o.style.bottom=makeEm(d),o.width=c,o.height=h+d,o.depth=-d,o.maxFontSize=h*1.125*s.sizeMultiplier,o},mathmlBuilder(a,s){var o=calculateSize(a.width,s),c=calculateSize(a.height,s),h=a.shift?calculateSize(a.shift,s):0,d=s.color&&s.getColor()||"black",b=new mathMLTree.MathNode("mspace");b.setAttribute("mathbackground",d),b.setAttribute("width",makeEm(o)),b.setAttribute("height",makeEm(c));var _=new mathMLTree.MathNode("mpadded",[b]);return h>=0?_.setAttribute("height",makeEm(h)):(_.setAttribute("height",makeEm(h)),_.setAttribute("depth",makeEm(-h))),_.setAttribute("voffset",makeEm(h)),_}});function sizingGroup(a,s,o){for(var c=buildExpression$1(a,s,!1),h=s.sizeMultiplier/o.sizeMultiplier,d=0;d<c.length;d++){var b=c[d].classes.indexOf("sizing");b<0?Array.prototype.push.apply(c[d].classes,s.sizingClasses(o)):c[d].classes[b+1]==="reset-size"+s.size&&(c[d].classes[b+1]="reset-size"+o.size),c[d].height*=h,c[d].depth*=h}return buildCommon.makeFragment(c)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(a,s)=>{var o=s.havingSize(a.size);return sizingGroup(a.body,o,s)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(a,s)=>{var{breakOnTokenText:o,funcName:c,parser:h}=a,d=h.parseExpression(!1,o);return{type:"sizing",mode:h.mode,size:sizeFuncs.indexOf(c)+1,body:d}},htmlBuilder,mathmlBuilder:(a,s)=>{var o=s.havingSize(a.size),c=buildExpression(a.body,o),h=new mathMLTree.MathNode("mstyle",c);return h.setAttribute("mathsize",makeEm(o.sizeMultiplier)),h}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(a,s,o)=>{var{parser:c}=a,h=!1,d=!1,b=o[0]&&assertNodeType(o[0],"ordgroup");if(b)for(var _="",$=0;$<b.body.length;++$){var j=b.body[$];if(_=j.text,_==="t")h=!0;else if(_==="b")d=!0;else{h=!1,d=!1;break}}else h=!0,d=!0;var Xt=s[0];return{type:"smash",mode:c.mode,body:Xt,smashHeight:h,smashDepth:d}},htmlBuilder:(a,s)=>{var o=buildCommon.makeSpan([],[buildGroup$1(a.body,s)]);if(!a.smashHeight&&!a.smashDepth)return o;if(a.smashHeight&&(o.height=0,o.children))for(var c=0;c<o.children.length;c++)o.children[c].height=0;if(a.smashDepth&&(o.depth=0,o.children))for(var h=0;h<o.children.length;h++)o.children[h].depth=0;var d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o}]},s);return buildCommon.makeSpan(["mord"],[d],s)},mathmlBuilder:(a,s)=>{var o=new mathMLTree.MathNode("mpadded",[buildGroup(a.body,s)]);return a.smashHeight&&o.setAttribute("height","0px"),a.smashDepth&&o.setAttribute("depth","0px"),o}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(a,s,o){var{parser:c}=a,h=o[0],d=s[0];return{type:"sqrt",mode:c.mode,body:d,index:h}},htmlBuilder(a,s){var o=buildGroup$1(a.body,s.havingCrampedStyle());o.height===0&&(o.height=s.fontMetrics().xHeight),o=buildCommon.wrapFragment(o,s);var c=s.fontMetrics(),h=c.defaultRuleThickness,d=h;s.style.id<Style$1.TEXT.id&&(d=s.fontMetrics().xHeight);var b=h+d/4,_=o.height+o.depth+b+h,{span:$,ruleWidth:j,advanceWidth:Xt}=delimiter.sqrtImage(_,s),Lt=$.height-j;Lt>o.height+o.depth+b&&(b=(b+Lt-o.height-o.depth)/2);var fr=$.height-o.height-b-j;o.style.paddingLeft=makeEm(Xt);var Jr=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o,wrapperClasses:["svg-align"]},{type:"kern",size:-(o.height+fr)},{type:"elem",elem:$},{type:"kern",size:j}]},s);if(a.index){var Js=s.havingStyle(Style$1.SCRIPTSCRIPT),qs=buildGroup$1(a.index,Js,s),zo=.6*(Jr.height-Jr.depth),js=buildCommon.makeVList({positionType:"shift",positionData:-zo,children:[{type:"elem",elem:qs}]},s),eu=buildCommon.makeSpan(["root"],[js]);return buildCommon.makeSpan(["mord","sqrt"],[eu,Jr],s)}else return buildCommon.makeSpan(["mord","sqrt"],[Jr],s)},mathmlBuilder(a,s){var{body:o,index:c}=a;return c?new mathMLTree.MathNode("mroot",[buildGroup(o,s),buildGroup(c,s)]):new mathMLTree.MathNode("msqrt",[buildGroup(o,s)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a,s){var{breakOnTokenText:o,funcName:c,parser:h}=a,d=h.parseExpression(!0,o),b=c.slice(1,c.length-5);return{type:"styling",mode:h.mode,style:b,body:d}},htmlBuilder(a,s){var o=styleMap[a.style],c=s.havingStyle(o).withFont("");return sizingGroup(a.body,c,s)},mathmlBuilder(a,s){var o=styleMap[a.style],c=s.havingStyle(o),h=buildExpression(a.body,c),d=new mathMLTree.MathNode("mstyle",h),b={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},_=b[a.style];return d.setAttribute("scriptlevel",_[0]),d.setAttribute("displaystyle",_[1]),d}});var htmlBuilderDelegate=function a(s,o){var c=s.base;if(c)if(c.type==="op"){var h=c.limits&&(o.style.size===Style$1.DISPLAY.size||c.alwaysHandleSupSub);return h?htmlBuilder$2:null}else if(c.type==="operatorname"){var d=c.alwaysHandleSupSub&&(o.style.size===Style$1.DISPLAY.size||c.limits);return d?htmlBuilder$1:null}else{if(c.type==="accent")return utils.isCharacterBox(c.base)?htmlBuilder$a:null;if(c.type==="horizBrace"){var b=!s.sub;return b===c.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(a,s){var o=htmlBuilderDelegate(a,s);if(o)return o(a,s);var{base:c,sup:h,sub:d}=a,b=buildGroup$1(c,s),_,$,j=s.fontMetrics(),Xt=0,Lt=0,fr=c&&utils.isCharacterBox(c);if(h){var Jr=s.havingStyle(s.style.sup());_=buildGroup$1(h,Jr,s),fr||(Xt=b.height-Jr.fontMetrics().supDrop*Jr.sizeMultiplier/s.sizeMultiplier)}if(d){var Js=s.havingStyle(s.style.sub());$=buildGroup$1(d,Js,s),fr||(Lt=b.depth+Js.fontMetrics().subDrop*Js.sizeMultiplier/s.sizeMultiplier)}var qs;s.style===Style$1.DISPLAY?qs=j.sup1:s.style.cramped?qs=j.sup3:qs=j.sup2;var zo=s.sizeMultiplier,js=makeEm(.5/j.ptPerEm/zo),eu=null;if($){var Oo=a.base&&a.base.type==="op"&&a.base.name&&(a.base.name==="\\oiint"||a.base.name==="\\oiiint");(b instanceof SymbolNode||Oo)&&(eu=makeEm(-b.italic))}var tu;if(_&&$){Xt=Math.max(Xt,qs,_.depth+.25*j.xHeight),Lt=Math.max(Lt,j.sub2);var Bo=j.defaultRuleThickness,vu=4*Bo;if(Xt-_.depth-($.height-Lt)<vu){Lt=vu-(Xt-_.depth)+$.height;var t1=.8*j.xHeight-(Xt-_.depth);t1>0&&(Xt+=t1,Lt-=t1)}var e1=[{type:"elem",elem:$,shift:Lt,marginRight:js,marginLeft:eu},{type:"elem",elem:_,shift:-Xt,marginRight:js}];tu=buildCommon.makeVList({positionType:"individualShift",children:e1},s)}else if($){Lt=Math.max(Lt,j.sub1,$.height-.8*j.xHeight);var r1=[{type:"elem",elem:$,marginLeft:eu,marginRight:js}];tu=buildCommon.makeVList({positionType:"shift",positionData:Lt,children:r1},s)}else if(_)Xt=Math.max(Xt,qs,_.depth+.25*j.xHeight),tu=buildCommon.makeVList({positionType:"shift",positionData:-Xt,children:[{type:"elem",elem:_,marginRight:js}]},s);else throw new Error("supsub must have either sup or sub.");var a1=getTypeOfDomTree(b,"right")||"mord";return buildCommon.makeSpan([a1],[b,buildCommon.makeSpan(["msupsub"],[tu])],s)},mathmlBuilder(a,s){var o=!1,c,h;a.base&&a.base.type==="horizBrace"&&(h=!!a.sup,h===a.base.isOver&&(o=!0,c=a.base.isOver)),a.base&&(a.base.type==="op"||a.base.type==="operatorname")&&(a.base.parentIsSupSub=!0);var d=[buildGroup(a.base,s)];a.sub&&d.push(buildGroup(a.sub,s)),a.sup&&d.push(buildGroup(a.sup,s));var b;if(o)b=c?"mover":"munder";else if(a.sub)if(a.sup){var j=a.base;j&&j.type==="op"&&j.limits&&s.style===Style$1.DISPLAY||j&&j.type==="operatorname"&&j.alwaysHandleSupSub&&(s.style===Style$1.DISPLAY||j.limits)?b="munderover":b="msubsup"}else{var $=a.base;$&&$.type==="op"&&$.limits&&(s.style===Style$1.DISPLAY||$.alwaysHandleSupSub)||$&&$.type==="operatorname"&&$.alwaysHandleSupSub&&($.limits||s.style===Style$1.DISPLAY)?b="munder":b="msub"}else{var _=a.base;_&&_.type==="op"&&_.limits&&(s.style===Style$1.DISPLAY||_.alwaysHandleSupSub)||_&&_.type==="operatorname"&&_.alwaysHandleSupSub&&(_.limits||s.style===Style$1.DISPLAY)?b="mover":b="msup"}return new mathMLTree.MathNode(b,d)}});defineFunctionBuilders({type:"atom",htmlBuilder(a,s){return buildCommon.mathsym(a.text,a.mode,s,["m"+a.family])},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mo",[makeText(a.text,a.mode)]);if(a.family==="bin"){var c=getVariant(a,s);c==="bold-italic"&&o.setAttribute("mathvariant",c)}else a.family==="punct"?o.setAttribute("separator","true"):(a.family==="open"||a.family==="close")&&o.setAttribute("stretchy","false");return o}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(a,s){return buildCommon.makeOrd(a,s,"mathord")},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mi",[makeText(a.text,a.mode,s)]),c=getVariant(a,s)||"italic";return c!==defaultVariant[o.type]&&o.setAttribute("mathvariant",c),o}});defineFunctionBuilders({type:"textord",htmlBuilder(a,s){return buildCommon.makeOrd(a,s,"textord")},mathmlBuilder(a,s){var o=makeText(a.text,a.mode,s),c=getVariant(a,s)||"normal",h;return a.mode==="text"?h=new mathMLTree.MathNode("mtext",[o]):/[0-9]/.test(a.text)?h=new mathMLTree.MathNode("mn",[o]):a.text==="\\prime"?h=new mathMLTree.MathNode("mo",[o]):h=new mathMLTree.MathNode("mi",[o]),c!==defaultVariant[h.type]&&h.setAttribute("mathvariant",c),h}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(a,s){if(regularSpace.hasOwnProperty(a.text)){var o=regularSpace[a.text].className||"";if(a.mode==="text"){var c=buildCommon.makeOrd(a,s,"textord");return c.classes.push(o),c}else return buildCommon.makeSpan(["mspace",o],[buildCommon.mathsym(a.text,a.mode,s)],s)}else{if(cssSpace.hasOwnProperty(a.text))return buildCommon.makeSpan(["mspace",cssSpace[a.text]],[],s);throw new ParseError('Unknown type of space "'+a.text+'"')}},mathmlBuilder(a,s){var o;if(regularSpace.hasOwnProperty(a.text))o=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(a.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+a.text+'"')}return o}});var pad=()=>{var a=new mathMLTree.MathNode("mtd",[]);return a.setAttribute("width","50%"),a};defineFunctionBuilders({type:"tag",mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(a.body,s)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(a.tag,s)])])]);return o.setAttribute("width","100%"),o}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(a,s)=>{var o=a.font;if(o){if(textFontFamilies[o])return s.withTextFontFamily(textFontFamilies[o]);if(textFontWeights[o])return s.withTextFontWeight(textFontWeights[o]);if(o==="\\emph")return s.fontShape==="textit"?s.withTextFontShape("textup"):s.withTextFontShape("textit")}else return s;return s.withTextFontShape(textFontShapes[o])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(a,s){var{parser:o,funcName:c}=a,h=s[0];return{type:"text",mode:o.mode,body:ordargument(h),font:c}},htmlBuilder(a,s){var o=optionsWithFont(a,s),c=buildExpression$1(a.body,o,!0);return buildCommon.makeSpan(["mord","text"],c,o)},mathmlBuilder(a,s){var o=optionsWithFont(a,s);return buildExpressionRow(a.body,o)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(a,s){var{parser:o}=a;return{type:"underline",mode:o.mode,body:s[0]}},htmlBuilder(a,s){var o=buildGroup$1(a.body,s),c=buildCommon.makeLineSpan("underline-line",s),h=s.fontMetrics().defaultRuleThickness,d=buildCommon.makeVList({positionType:"top",positionData:o.height,children:[{type:"kern",size:h},{type:"elem",elem:c},{type:"kern",size:3*h},{type:"elem",elem:o}]},s);return buildCommon.makeSpan(["mord","underline"],[d],s)},mathmlBuilder(a,s){var o=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);o.setAttribute("stretchy","true");var c=new mathMLTree.MathNode("munder",[buildGroup(a.body,s),o]);return c.setAttribute("accentunder","true"),c}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(a,s){var{parser:o}=a;return{type:"vcenter",mode:o.mode,body:s[0]}},htmlBuilder(a,s){var o=buildGroup$1(a.body,s),c=s.fontMetrics().axisHeight,h=.5*(o.height-c-(o.depth+c));return buildCommon.makeVList({positionType:"shift",positionData:h,children:[{type:"elem",elem:o}]},s)},mathmlBuilder(a,s){return new mathMLTree.MathNode("mpadded",[buildGroup(a.body,s)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(a,s,o){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(a,s){for(var o=makeVerb(a),c=[],h=s.havingStyle(s.style.text()),d=0;d<o.length;d++){var b=o[d];b==="~"&&(b="\\textasciitilde"),c.push(buildCommon.makeSymbol(b,"Typewriter-Regular",a.mode,h,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(h.sizingClasses(s)),buildCommon.tryCombineChars(c),h)},mathmlBuilder(a,s){var o=new mathMLTree.TextNode(makeVerb(a)),c=new mathMLTree.MathNode("mtext",[o]);return c.setAttribute("mathvariant","monospace"),c}});var makeVerb=a=>a.body.replace(/ /g,a.star?"":""),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[-]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]---]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(s,o){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=s,this.settings=o,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(s,o){this.catcodes[s]=o}lex(){var s=this.input,o=this.tokenRegex.lastIndex;if(o===s.length)return new Token("EOF",new SourceLocation(this,o,o));var c=this.tokenRegex.exec(s);if(c===null||c.index!==o)throw new ParseError("Unexpected character: '"+s[o]+"'",new Token(s[o],new SourceLocation(this,o,o+1)));var h=c[6]||c[3]||(c[2]?"\\ ":" ");if(this.catcodes[h]===14){var d=s.indexOf(`
`,this.tokenRegex.lastIndex);return d===-1?(this.tokenRegex.lastIndex=s.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=d+1,this.lex()}return new Token(h,new SourceLocation(this,o,this.tokenRegex.lastIndex))}}class Namespace{constructor(s,o){s===void 0&&(s={}),o===void 0&&(o={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=o,this.builtins=s,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var s=this.undefStack.pop();for(var o in s)s.hasOwnProperty(o)&&(s[o]==null?delete this.current[o]:this.current[o]=s[o])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(s){return this.current.hasOwnProperty(s)||this.builtins.hasOwnProperty(s)}get(s){return this.current.hasOwnProperty(s)?this.current[s]:this.builtins[s]}set(s,o,c){if(c===void 0&&(c=!1),c){for(var h=0;h<this.undefStack.length;h++)delete this.undefStack[h][s];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][s]=o)}else{var d=this.undefStack[this.undefStack.length-1];d&&!d.hasOwnProperty(s)&&(d[s]=this.current[s])}o==null?delete this.current[s]:this.current[s]=o}}var macros=_macros;defineMacro("\\noexpand",function(a){var s=a.popToken();return a.isExpandable(s.text)&&(s.noexpand=!0,s.treatAsRelax=!0),{tokens:[s],numArgs:0}});defineMacro("\\expandafter",function(a){var s=a.popToken();return a.expandOnce(!0),{tokens:[s],numArgs:0}});defineMacro("\\@firstoftwo",function(a){var s=a.consumeArgs(2);return{tokens:s[0],numArgs:0}});defineMacro("\\@secondoftwo",function(a){var s=a.consumeArgs(2);return{tokens:s[1],numArgs:0}});defineMacro("\\@ifnextchar",function(a){var s=a.consumeArgs(3);a.consumeSpaces();var o=a.future();return s[0].length===1&&s[0][0].text===o.text?{tokens:s[1],numArgs:0}:{tokens:s[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(a){var s=a.consumeArgs(2);return a.mode==="text"?{tokens:s[0],numArgs:0}:{tokens:s[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(a){var s=a.popToken(),o,c="";if(s.text==="'")o=8,s=a.popToken();else if(s.text==='"')o=16,s=a.popToken();else if(s.text==="`")if(s=a.popToken(),s.text[0]==="\\")c=s.text.charCodeAt(1);else{if(s.text==="EOF")throw new ParseError("\\char` missing argument");c=s.text.charCodeAt(0)}else o=10;if(o){if(c=digitToNumber[s.text],c==null||c>=o)throw new ParseError("Invalid base-"+o+" digit "+s.text);for(var h;(h=digitToNumber[a.future().text])!=null&&h<o;)c*=o,c+=h,a.popToken()}return"\\@char{"+c+"}"});var newcommand=(a,s,o,c)=>{var h=a.consumeArg().tokens;if(h.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var d=h[0].text,b=a.isDefined(d);if(b&&!s)throw new ParseError("\\newcommand{"+d+"} attempting to redefine "+(d+"; use \\renewcommand"));if(!b&&!o)throw new ParseError("\\renewcommand{"+d+"} when command "+d+" does not yet exist; use \\newcommand");var _=0;if(h=a.consumeArg().tokens,h.length===1&&h[0].text==="["){for(var $="",j=a.expandNextToken();j.text!=="]"&&j.text!=="EOF";)$+=j.text,j=a.expandNextToken();if(!$.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+$);_=parseInt($),h=a.consumeArg().tokens}return b&&c||a.macros.set(d,{tokens:h,numArgs:_}),""};defineMacro("\\newcommand",a=>newcommand(a,!1,!0,!1));defineMacro("\\renewcommand",a=>newcommand(a,!0,!1,!1));defineMacro("\\providecommand",a=>newcommand(a,!0,!0,!0));defineMacro("\\message",a=>{var s=a.consumeArgs(1)[0];return console.log(s.reverse().map(o=>o.text).join("")),""});defineMacro("\\errmessage",a=>{var s=a.consumeArgs(1)[0];return console.error(s.reverse().map(o=>o.text).join("")),""});defineMacro("\\show",a=>{var s=a.popToken(),o=s.text;return console.log(s,a.macros.get(o),functions[o],symbols.math[o],symbols.text[o]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(a){var s="\\dotso",o=a.expandAfterFuture().text;return o in dotsByToken?s=dotsByToken[o]:(o.slice(0,4)==="\\not"||o in symbols.math&&["bin","rel"].includes(symbols.math[o].group))&&(s="\\dotsb"),s});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(a){var s=a.future().text;return s in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(a){var s=a.future().text;return s in spaceAfterDots&&s!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(a){var s=a.future().text;return s in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",a=>{if(a.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=a=>s=>{var o=s.consumeArg().tokens,c=s.consumeArg().tokens,h=s.consumeArg().tokens,d=s.consumeArg().tokens,b=s.macros.get("|"),_=s.macros.get("\\|");s.macros.beginGroup();var $=Lt=>fr=>{a&&(fr.macros.set("|",b),h.length&&fr.macros.set("\\|",_));var Jr=Lt;if(!Lt&&h.length){var Js=fr.future();Js.text==="|"&&(fr.popToken(),Jr=!0)}return{tokens:Jr?h:c,numArgs:0}};s.macros.set("|",$(!1)),h.length&&s.macros.set("\\|",$(!0));var j=s.consumeArg().tokens,Xt=s.expandTokens([...d,...j,...o]);return s.macros.endGroup(),{tokens:Xt.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(s,o,c){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=o,this.expansionCount=0,this.feed(s),this.macros=new Namespace(macros,o.macros),this.mode=c,this.stack=[]}feed(s){this.lexer=new Lexer(s,this.settings)}switchMode(s){this.mode=s}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(s){this.stack.push(s)}pushTokens(s){this.stack.push(...s)}scanArgument(s){var o,c,h;if(s){if(this.consumeSpaces(),this.future().text!=="[")return null;o=this.popToken(),{tokens:h,end:c}=this.consumeArg(["]"])}else({tokens:h,start:o,end:c}=this.consumeArg());return this.pushToken(new Token("EOF",c.loc)),this.pushTokens(h),new Token("",SourceLocation.range(o,c))}consumeSpaces(){for(;;){var s=this.future();if(s.text===" ")this.stack.pop();else break}}consumeArg(s){var o=[],c=s&&s.length>0;c||this.consumeSpaces();var h=this.future(),d,b=0,_=0;do{if(d=this.popToken(),o.push(d),d.text==="{")++b;else if(d.text==="}"){if(--b,b===-1)throw new ParseError("Extra }",d)}else if(d.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(s&&c?s[_]:"}")+"'",d);if(s&&c)if((b===0||b===1&&s[_]==="{")&&d.text===s[_]){if(++_,_===s.length){o.splice(-_,_);break}}else _=0}while(b!==0||c);return h.text==="{"&&o[o.length-1].text==="}"&&(o.pop(),o.shift()),o.reverse(),{tokens:o,start:h,end:d}}consumeArgs(s,o){if(o){if(o.length!==s+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var c=o[0],h=0;h<c.length;h++){var d=this.popToken();if(c[h]!==d.text)throw new ParseError("Use of the macro doesn't match its definition",d)}}for(var b=[],_=0;_<s;_++)b.push(this.consumeArg(o&&o[_+1]).tokens);return b}countExpansion(s){if(this.expansionCount+=s,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(s){var o=this.popToken(),c=o.text,h=o.noexpand?null:this._getExpansion(c);if(h==null||s&&h.unexpandable){if(s&&h==null&&c[0]==="\\"&&!this.isDefined(c))throw new ParseError("Undefined control sequence: "+c);return this.pushToken(o),!1}this.countExpansion(1);var d=h.tokens,b=this.consumeArgs(h.numArgs,h.delimiters);if(h.numArgs){d=d.slice();for(var _=d.length-1;_>=0;--_){var $=d[_];if($.text==="#"){if(_===0)throw new ParseError("Incomplete placeholder at end of macro body",$);if($=d[--_],$.text==="#")d.splice(_+1,1);else if(/^[1-9]$/.test($.text))d.splice(_,2,...b[+$.text-1]);else throw new ParseError("Not a valid argument number",$)}}}return this.pushTokens(d),d.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var s=this.stack.pop();return s.treatAsRelax&&(s.text="\\relax"),s}throw new Error}expandMacro(s){return this.macros.has(s)?this.expandTokens([new Token(s)]):void 0}expandTokens(s){var o=[],c=this.stack.length;for(this.pushTokens(s);this.stack.length>c;)if(this.expandOnce(!0)===!1){var h=this.stack.pop();h.treatAsRelax&&(h.noexpand=!1,h.treatAsRelax=!1),o.push(h)}return this.countExpansion(o.length),o}expandMacroAsText(s){var o=this.expandMacro(s);return o&&o.map(c=>c.text).join("")}_getExpansion(s){var o=this.macros.get(s);if(o==null)return o;if(s.length===1){var c=this.lexer.catcodes[s];if(c!=null&&c!==13)return}var h=typeof o=="function"?o(this):o;if(typeof h=="string"){var d=0;if(h.indexOf("#")!==-1)for(var b=h.replace(/##/g,"");b.indexOf("#"+(d+1))!==-1;)++d;for(var _=new Lexer(h,this.settings),$=[],j=_.lex();j.text!=="EOF";)$.push(j),j=_.lex();$.reverse();var Xt={tokens:$,numArgs:d};return Xt}return h}isDefined(s){return this.macros.has(s)||functions.hasOwnProperty(s)||symbols.math.hasOwnProperty(s)||symbols.text.hasOwnProperty(s)||implicitCommands.hasOwnProperty(s)}isExpandable(s){var o=this.macros.get(s);return o!=null?typeof o=="string"||typeof o=="function"||!o.unexpandable:functions.hasOwnProperty(s)&&!functions[s].primitive}}var unicodeSubRegEx=/^[]/,uSubsAndSups=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),unicodeAccents={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},unicodeSymbols={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Parser{constructor(s,o){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(s,o,this.mode),this.settings=o,this.leftrightDepth=0}expect(s,o){if(o===void 0&&(o=!0),this.fetch().text!==s)throw new ParseError("Expected '"+s+"', got '"+this.fetch().text+"'",this.fetch());o&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(s){this.mode=s,this.gullet.switchMode(s)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var s=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),s}finally{this.gullet.endGroups()}}subparse(s){var o=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(s);var c=this.parseExpression(!1);return this.expect("}"),this.nextToken=o,c}parseExpression(s,o){for(var c=[];;){this.mode==="math"&&this.consumeSpaces();var h=this.fetch();if(Parser.endOfExpression.indexOf(h.text)!==-1||o&&h.text===o||s&&functions[h.text]&&functions[h.text].infix)break;var d=this.parseAtom(o);if(d){if(d.type==="internal")continue}else break;c.push(d)}return this.mode==="text"&&this.formLigatures(c),this.handleInfixNodes(c)}handleInfixNodes(s){for(var o=-1,c,h=0;h<s.length;h++)if(s[h].type==="infix"){if(o!==-1)throw new ParseError("only one infix operator per group",s[h].token);o=h,c=s[h].replaceWith}if(o!==-1&&c){var d,b,_=s.slice(0,o),$=s.slice(o+1);_.length===1&&_[0].type==="ordgroup"?d=_[0]:d={type:"ordgroup",mode:this.mode,body:_},$.length===1&&$[0].type==="ordgroup"?b=$[0]:b={type:"ordgroup",mode:this.mode,body:$};var j;return c==="\\\\abovefrac"?j=this.callFunction(c,[d,s[o],b],[]):j=this.callFunction(c,[d,b],[]),[j]}else return s}handleSupSubscript(s){var o=this.fetch(),c=o.text;this.consume(),this.consumeSpaces();var h;do{var d;h=this.parseGroup(s)}while(((d=h)==null?void 0:d.type)==="internal");if(!h)throw new ParseError("Expected group after '"+c+"'",o);return h}formatUnsupportedCmd(s){for(var o=[],c=0;c<s.length;c++)o.push({type:"textord",mode:"text",text:s[c]});var h={type:"text",mode:this.mode,body:o},d={type:"color",mode:this.mode,color:this.settings.errorColor,body:[h]};return d}parseAtom(s){var o=this.parseGroup("atom",s);if((o==null?void 0:o.type)==="internal"||this.mode==="text")return o;for(var c,h;;){this.consumeSpaces();var d=this.fetch();if(d.text==="\\limits"||d.text==="\\nolimits"){if(o&&o.type==="op"){var b=d.text==="\\limits";o.limits=b,o.alwaysHandleSupSub=!0}else if(o&&o.type==="operatorname")o.alwaysHandleSupSub&&(o.limits=d.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",d);this.consume()}else if(d.text==="^"){if(c)throw new ParseError("Double superscript",d);c=this.handleSupSubscript("superscript")}else if(d.text==="_"){if(h)throw new ParseError("Double subscript",d);h=this.handleSupSubscript("subscript")}else if(d.text==="'"){if(c)throw new ParseError("Double superscript",d);var _={type:"textord",mode:this.mode,text:"\\prime"},$=[_];for(this.consume();this.fetch().text==="'";)$.push(_),this.consume();this.fetch().text==="^"&&$.push(this.handleSupSubscript("superscript")),c={type:"ordgroup",mode:this.mode,body:$}}else if(uSubsAndSups[d.text]){var j=unicodeSubRegEx.test(d.text),Xt=[];for(Xt.push(new Token(uSubsAndSups[d.text])),this.consume();;){var Lt=this.fetch().text;if(!uSubsAndSups[Lt]||unicodeSubRegEx.test(Lt)!==j)break;Xt.unshift(new Token(uSubsAndSups[Lt])),this.consume()}var fr=this.subparse(Xt);j?h={type:"ordgroup",mode:"math",body:fr}:c={type:"ordgroup",mode:"math",body:fr}}else break}return c||h?{type:"supsub",mode:this.mode,base:o,sup:c,sub:h}:o}parseFunction(s,o){var c=this.fetch(),h=c.text,d=functions[h];if(!d)return null;if(this.consume(),o&&o!=="atom"&&!d.allowedInArgument)throw new ParseError("Got function '"+h+"' with no arguments"+(o?" as "+o:""),c);if(this.mode==="text"&&!d.allowedInText)throw new ParseError("Can't use function '"+h+"' in text mode",c);if(this.mode==="math"&&d.allowedInMath===!1)throw new ParseError("Can't use function '"+h+"' in math mode",c);var{args:b,optArgs:_}=this.parseArguments(h,d);return this.callFunction(h,b,_,c,s)}callFunction(s,o,c,h,d){var b={funcName:s,parser:this,token:h,breakOnTokenText:d},_=functions[s];if(_&&_.handler)return _.handler(b,o,c);throw new ParseError("No function handler for "+s)}parseArguments(s,o){var c=o.numArgs+o.numOptionalArgs;if(c===0)return{args:[],optArgs:[]};for(var h=[],d=[],b=0;b<c;b++){var _=o.argTypes&&o.argTypes[b],$=b<o.numOptionalArgs;(o.primitive&&_==null||o.type==="sqrt"&&b===1&&d[0]==null)&&(_="primitive");var j=this.parseGroupOfType("argument to '"+s+"'",_,$);if($)d.push(j);else if(j!=null)h.push(j);else throw new ParseError("Null argument, please report this as a bug")}return{args:h,optArgs:d}}parseGroupOfType(s,o,c){switch(o){case"color":return this.parseColorGroup(c);case"size":return this.parseSizeGroup(c);case"url":return this.parseUrlGroup(c);case"math":case"text":return this.parseArgumentGroup(c,o);case"hbox":{var h=this.parseArgumentGroup(c,"text");return h!=null?{type:"styling",mode:h.mode,body:[h],style:"text"}:null}case"raw":{var d=this.parseStringGroup("raw",c);return d!=null?{type:"raw",mode:"text",string:d.text}:null}case"primitive":{if(c)throw new ParseError("A primitive argument cannot be optional");var b=this.parseGroup(s);if(b==null)throw new ParseError("Expected group as "+s,this.fetch());return b}case"original":case null:case void 0:return this.parseArgumentGroup(c);default:throw new ParseError("Unknown group type as "+s,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(s,o){var c=this.gullet.scanArgument(o);if(c==null)return null;for(var h="",d;(d=this.fetch()).text!=="EOF";)h+=d.text,this.consume();return this.consume(),c.text=h,c}parseRegexGroup(s,o){for(var c=this.fetch(),h=c,d="",b;(b=this.fetch()).text!=="EOF"&&s.test(d+b.text);)h=b,d+=h.text,this.consume();if(d==="")throw new ParseError("Invalid "+o+": '"+c.text+"'",c);return c.range(h,d)}parseColorGroup(s){var o=this.parseStringGroup("color",s);if(o==null)return null;var c=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(o.text);if(!c)throw new ParseError("Invalid color: '"+o.text+"'",o);var h=c[0];return/^[0-9a-f]{6}$/i.test(h)&&(h="#"+h),{type:"color-token",mode:this.mode,color:h}}parseSizeGroup(s){var o,c=!1;if(this.gullet.consumeSpaces(),!s&&this.gullet.future().text!=="{"?o=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):o=this.parseStringGroup("size",s),!o)return null;!s&&o.text.length===0&&(o.text="0pt",c=!0);var h=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(o.text);if(!h)throw new ParseError("Invalid size: '"+o.text+"'",o);var d={number:+(h[1]+h[2]),unit:h[3]};if(!validUnit(d))throw new ParseError("Invalid unit: '"+d.unit+"'",o);return{type:"size",mode:this.mode,value:d,isBlank:c}}parseUrlGroup(s){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var o=this.parseStringGroup("url",s);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),o==null)return null;var c=o.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:c}}parseArgumentGroup(s,o){var c=this.gullet.scanArgument(s);if(c==null)return null;var h=this.mode;o&&this.switchMode(o),this.gullet.beginGroup();var d=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var b={type:"ordgroup",mode:this.mode,loc:c.loc,body:d};return o&&this.switchMode(h),b}parseGroup(s,o){var c=this.fetch(),h=c.text,d;if(h==="{"||h==="\\begingroup"){this.consume();var b=h==="{"?"}":"\\endgroup";this.gullet.beginGroup();var _=this.parseExpression(!1,b),$=this.fetch();this.expect(b),this.gullet.endGroup(),d={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(c,$),body:_,semisimple:h==="\\begingroup"||void 0}}else if(d=this.parseFunction(o,s)||this.parseSymbol(),d==null&&h[0]==="\\"&&!implicitCommands.hasOwnProperty(h)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+h,c);d=this.formatUnsupportedCmd(h),this.consume()}return d}formLigatures(s){for(var o=s.length-1,c=0;c<o;++c){var h=s[c],d=h.text;d==="-"&&s[c+1].text==="-"&&(c+1<o&&s[c+2].text==="-"?(s.splice(c,3,{type:"textord",mode:"text",loc:SourceLocation.range(h,s[c+2]),text:"---"}),o-=2):(s.splice(c,2,{type:"textord",mode:"text",loc:SourceLocation.range(h,s[c+1]),text:"--"}),o-=1)),(d==="'"||d==="`")&&s[c+1].text===d&&(s.splice(c,2,{type:"textord",mode:"text",loc:SourceLocation.range(h,s[c+1]),text:d+d}),o-=1)}}parseSymbol(){var s=this.fetch(),o=s.text;if(/^\\verb[^a-zA-Z]/.test(o)){this.consume();var c=o.slice(5),h=c.charAt(0)==="*";if(h&&(c=c.slice(1)),c.length<2||c.charAt(0)!==c.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return c=c.slice(1,-1),{type:"verb",mode:"text",body:c,star:h}}unicodeSymbols.hasOwnProperty(o[0])&&!symbols[this.mode][o[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+o[0]+'" used in math mode',s),o=unicodeSymbols[o[0]]+o.slice(1));var d=combiningDiacriticalMarksEndRegex.exec(o);d&&(o=o.substring(0,d.index),o==="i"?o="":o==="j"&&(o=""));var b;if(symbols[this.mode][o]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(o)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+o[0]+'" used in math mode',s);var _=symbols[this.mode][o].group,$=SourceLocation.range(s),j;if(ATOMS.hasOwnProperty(_)){var Xt=_;j={type:"atom",mode:this.mode,family:Xt,loc:$,text:o}}else j={type:_,mode:this.mode,loc:$,text:o};b=j}else if(o.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(o.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+o[0]+'" used in math mode',s):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+o[0]+'"'+(" ("+o.charCodeAt(0)+")"),s)),b={type:"textord",mode:"text",loc:SourceLocation.range(s),text:o};else return null;if(this.consume(),d)for(var Lt=0;Lt<d[0].length;Lt++){var fr=d[0][Lt];if(!unicodeAccents[fr])throw new ParseError("Unknown accent ' "+fr+"'",s);var Jr=unicodeAccents[fr][this.mode]||unicodeAccents[fr].text;if(!Jr)throw new ParseError("Accent "+fr+" unsupported in "+this.mode+" mode",s);b={type:"accent",mode:this.mode,loc:SourceLocation.range(s),label:Jr,isStretchy:!1,isShifty:!0,base:b}}return b}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function a(s,o){if(!(typeof s=="string"||s instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var c=new Parser(s,o);delete c.gullet.macros.current["\\df@tag"];var h=c.parse();if(delete c.gullet.macros.current["\\current@color"],delete c.gullet.macros.current["\\color"],c.gullet.macros.get("\\df@tag")){if(!o.displayMode)throw new ParseError("\\tag works only in display equations");h=[{type:"tag",mode:"text",body:h,tag:c.subparse([new Token("\\df@tag")])}]}return h},render=function a(s,o,c){o.textContent="";var h=renderToDomTree(s,c).toNode();o.appendChild(h)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function a(s,o){var c=renderToDomTree(s,o).toMarkup();return c},generateParseTree=function a(s,o){var c=new Settings(o);return parseTree(s,c)},renderError=function a(s,o,c){if(c.throwOnError||!(s instanceof ParseError))throw s;var h=buildCommon.makeSpan(["katex-error"],[new SymbolNode(o)]);return h.setAttribute("title",s.toString()),h.setAttribute("style","color:"+c.errorColor),h},renderToDomTree=function a(s,o){var c=new Settings(o);try{var h=parseTree(s,c);return buildTree(h,s,c)}catch(d){return renderError(d,s,c)}},renderToHTMLTree=function a(s,o){var c=new Settings(o);try{var h=parseTree(s,c);return buildHTMLTree(h,s,c)}catch(d){return renderError(d,s,c)}},version="0.16.27",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex$1={version,render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};function getInitialTheme(){const a=localStorage.getItem("theme");return a||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function applyTheme(a){document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a)}function findMatchingBrace(a,s){let o=0;for(let c=s;c<a.length;c++)if(a[c]==="{")o++;else if(a[c]==="}"&&(o--,o===0))return c;return-1}function latexToMathJS(a){let s=a;s=s.replace(/\u200B/g,""),s=s.replace(/\\placeholder\{\}/g,""),s=s.replace(/#\?/g,""),s=s.replace(/\u00A0/g," "),s=s.replace(/\\,/g,""),s=s.replace(/\\;/g,""),s=s.replace(/\\:/g,""),s=s.replace(/\\ /g," "),s=s.replace(/\\!/g,""),s=s.replace(/\\cdot/g,"*"),s=s.replace(/\\times/g,"*"),s=s.replace(/\\div/g,"/");let o=20;for(;s.includes("\\frac")&&o>0;){o--;const c=s.indexOf("\\frac");if(c===-1)break;const h=s.indexOf("{",c);if(h===-1)break;const d=findMatchingBrace(s,h);if(d===-1)break;const b=s.indexOf("{",d+1);if(b===-1)break;const _=findMatchingBrace(s,b);if(_===-1)break;let $=s.substring(h+1,d).trim(),j=s.substring(b+1,_).trim();if($=$.replace(/\\placeholder\{\}/g,"").replace(/#\?/g,"").trim(),j=j.replace(/\\placeholder\{\}/g,"").replace(/#\?/g,"").trim(),!$||!j)throw new Error("Fraction is incomplete - please fill in both numerator and denominator");s=s.substring(0,c)+`((${$})/(${j}))`+s.substring(_+1)}return s=s.replace(/\\sqrt\[([^\]]+)\]\{([^}]*)\}/g,(c,h,d)=>{const b=d.replace(/\\placeholder\{\}/g,"").replace(/#\?/g,"").trim();if(!b)throw new Error("Square root is incomplete - please fill in the content");return`nthRoot(${b}, ${h})`}),s=s.replace(/\\sqrt\{([^}]*)\}/g,(c,h)=>{const d=h.replace(/\\placeholder\{\}/g,"").replace(/#\?/g,"").trim();if(!d)throw new Error("Square root is incomplete - please fill in the content");return`sqrt(${d})`}),s=s.replace(/\\sqrt([a-zA-Z0-9])/g,"sqrt($1)"),s=s.replace(/\\sqrt(?![a-zA-Z])/g,"sqrt"),s=s.replace(/\\sin/g,"sin"),s=s.replace(/\\cos/g,"cos"),s=s.replace(/\\tan/g,"tan"),s=s.replace(/\\ln/g,"log"),s=s.replace(/\\log/g,"log10"),s=s.replace(/\\exp/g,"exp"),s=s.replace(/\\pi/g,"pi"),s=s.replace(/\\left\(/g,"("),s=s.replace(/\\right\)/g,")"),s=s.replace(/\\left\[/g,"["),s=s.replace(/\\right\]/g,"]"),s=s.replace(/\{/g,"("),s=s.replace(/\}/g,")"),s=s.replace(/\^/g,"^"),s=s.replace(/\\[a-zA-Z]+/g,""),s=s.replace(/\s+/g,""),s=s.replace(/\(\)/g,""),s}function Controls({onGraphFunction:a,onNextIteration:s,onReset:o,isActive:c,currentIteration:h,hasConverged:d,currentInitialGuess:b}){const[_,$]=reactExports.useState("x^2 - 2"),[j,Xt]=reactExports.useState("x^2-2"),[Lt,fr]=reactExports.useState("3"),[Jr,Js]=reactExports.useState(""),[qs,zo]=reactExports.useState(getInitialTheme),js=reactExports.useRef(null),eu=reactExports.useRef(null),Oo=reactExports.useRef(null);reactExports.useEffect(()=>{applyTheme(qs);const t1=js.current;if(t1&&t1.shadowRoot){const e1=t1.shadowRoot.querySelector("#custom-ml-style");e1&&e1.remove();const r1=document.createElement("style");r1.id="custom-ml-style";const a1=qs==="dark";r1.textContent=`
        * {
          background: transparent !important;
          background-color: transparent !important;
        }
        .ML__caret {
          background: ${a1?"#f1f5f9":"#000"} !important;
          background-color: ${a1?"#f1f5f9":"#000"} !important;
        }
        .ML__selection {
          background: rgba(37, 99, 235, 0.15) !important;
        }
        [class*="highlight"],
        [class*="matching"],
        [class*="focused"],
        .ML__contains-caret,
        .ML__sqrt,
        .ML__frac,
        .ML__surd {
          background: transparent !important;
          background-color: transparent !important;
        }
      `,t1.shadowRoot.appendChild(r1)}},[qs]);const tu=reactExports.useCallback(()=>{zo(t1=>t1==="light"?"dark":"light")},[]);reactExports.useEffect(()=>{const t1=js.current;if(t1){t1.value="x^2-2",t1.mathModeSpace="\\:",t1.smartFence=!1,t1.removeExtraneousParentheses=!1,t1.smartMode=!1,t1.menuItems=[],t1.virtualKeyboardMode="off";const e1=()=>{const r1=t1.shadowRoot;if(r1){const a1=r1.querySelector("#custom-ml-style");a1&&a1.remove();const i1=document.createElement("style");i1.id="custom-ml-style";const s1=document.documentElement.getAttribute("data-theme")==="dark";i1.textContent=`
            * {
              background: transparent !important;
              background-color: transparent !important;
            }
            .ML__caret {
              background: ${s1?"#f1f5f9":"#000"} !important;
              background-color: ${s1?"#f1f5f9":"#000"} !important;
            }
            .ML__selection {
              background: rgba(37, 99, 235, 0.15) !important;
            }
            [class*="highlight"],
            [class*="matching"],
            [class*="focused"],
            .ML__contains-caret,
            .ML__sqrt,
            .ML__frac,
            .ML__surd {
              background: transparent !important;
              background-color: transparent !important;
            }
          `,r1.appendChild(i1)}};e1(),setTimeout(e1,100),t1.inlineShortcuts={...t1.inlineShortcuts,sqrt:"\\sqrt{#?}",pi:"\\pi",sin:"\\sin",cos:"\\cos",tan:"\\tan",log:"\\log",ln:"\\ln",exp:"\\exp"},t1.addEventListener("input",r1=>{const a1=r1.target.value;Xt(a1);try{const i1=latexToMathJS(a1);if($(i1),i1.trim()){const s1=validateExpression(i1);s1.valid?Js(""):Js(s1.error)}else Js("")}catch(i1){Js(i1.message)}})}},[]),reactExports.useEffect(()=>{if(Oo.current)try{katex$1.render("x_0",Oo.current,{throwOnError:!1})}catch{Oo.current.textContent="x"}eu.current&&eu.current.querySelectorAll(".katex-formula").forEach(e1=>{const r1=e1.getAttribute("data-latex");if(r1)try{katex$1.render(r1,e1,{throwOnError:!1,displayMode:e1.classList.contains("display-mode")})}catch{e1.textContent=r1}})},[]),reactExports.useEffect(()=>{b!==void 0&&c&&fr(b.toFixed(4))},[b,c]);const Bo=()=>{if(Jr)return;const t1=validateExpression(_);if(!t1.valid){Js(t1.error);return}const e1=parseFloat(Lt);if(isNaN(e1)){Js("Initial guess must be a valid number");return}a(_,j,e1)},vu=t1=>{t1.key==="Enter"&&Bo()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 p-5 rounded-lg transition-colors duration-300",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"m-0 mb-2 text-2xl font-semibold",style:{color:"var(--text-primary)"},children:"Newton's Method Visualizer"}),jsxRuntimeExports.jsx("button",{onClick:tu,className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg cursor-pointer text-lg transition-all duration-150",style:{background:"var(--bg-tertiary)",border:"1px solid var(--border-secondary)"},title:qs==="light"?"Switch to dark mode":"Switch to light mode",children:qs==="light"?"":""})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("label",{className:"flex flex-col gap-1.5 text-sm font-medium",style:{color:"var(--text-secondary)"},children:"Function f(x):"}),jsxRuntimeExports.jsx("math-field",{ref:js,class:"math-input","virtual-keyboard-mode":"off","smart-superscript":"on","inline-shortcut-timeout":"0","menu-toggle":"false","default-mode":"math"}),jsxRuntimeExports.jsx("p",{className:"m-0 text-xs",style:{color:"var(--text-muted)"},children:"Type x^2 for powers, use / for fractions, \\sqrt for roots"})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1",children:jsxRuntimeExports.jsxs("label",{className:"flex flex-col gap-1.5 text-sm font-medium",style:{color:"var(--text-secondary)"},children:[jsxRuntimeExports.jsxs("span",{className:"inline whitespace-nowrap",children:["Initial Guess (",jsxRuntimeExports.jsx("span",{ref:Oo,className:"inline align-baseline text-[0.95em]",children:"x"}),"):"]}),jsxRuntimeExports.jsx("input",{type:"text",value:Lt,onChange:t1=>fr(t1.target.value),onKeyDown:vu,className:"px-3 py-2.5 text-[15px] font-mono rounded-md transition-all duration-150 focus:outline-none",style:{border:"1px solid var(--border-secondary)",background:"var(--bg-tertiary)",color:"var(--text-primary)"},placeholder:"e.g., 3"})]})}),Jr&&jsxRuntimeExports.jsx("div",{className:"px-3 py-2.5 text-[13px] rounded-md",style:{color:"var(--error-text)",background:"var(--error-bg)",border:"1px solid var(--error-border)"},children:Jr}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("button",{onClick:Bo,disabled:!!Jr,className:"btn btn-primary",children:"Graph Function"}),jsxRuntimeExports.jsx("button",{onClick:s,disabled:!c||d||!!Jr,className:"btn btn-secondary",children:"Next Iteration"}),jsxRuntimeExports.jsx("button",{onClick:o,disabled:!c,className:"btn btn-outline",children:"Reset"})]}),c&&jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-md",style:{background:"var(--success-bg)",border:"1px solid var(--success-border)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{style:{color:"var(--text-tertiary)"},children:"Current Iteration:"}),jsxRuntimeExports.jsx("span",{className:"font-semibold font-mono",style:{color:"var(--success-text)"},children:h})]}),d&&jsxRuntimeExports.jsx("div",{className:"mt-2 p-2 rounded text-[13px] font-medium text-center",style:{background:"var(--success-highlight)",color:"var(--success-text)"},children:"Converged! Root found."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 p-4 rounded-md",ref:eu,style:{background:"var(--bg-tertiary)",border:"1px solid var(--border-primary)"},children:[jsxRuntimeExports.jsx("h3",{className:"m-0 mb-2 text-sm font-semibold",style:{color:"var(--text-secondary)"},children:"How Newton's Method Works"}),jsxRuntimeExports.jsx("p",{className:"m-0 mb-3 text-[13px] leading-relaxed",style:{color:"var(--text-tertiary)"},children:"Newton's method finds roots (zeros) of a function by repeatedly improving an initial guess using tangent lines."}),jsxRuntimeExports.jsxs("ol",{className:"m-0 pl-5 text-[13px] leading-loose",style:{color:"var(--text-tertiary)"},children:[jsxRuntimeExports.jsxs("li",{className:"mb-1.5",children:["Start with initial guess ",jsxRuntimeExports.jsx("span",{className:"katex-formula","data-latex":"x_0"})]}),jsxRuntimeExports.jsxs("li",{className:"mb-1.5",children:["Draw tangent line at ",jsxRuntimeExports.jsx("span",{className:"katex-formula","data-latex":"(x_n, f(x_n))"})]}),jsxRuntimeExports.jsx("li",{className:"mb-1.5",children:"Find where tangent crosses x-axis"}),jsxRuntimeExports.jsxs("li",{className:"mb-1.5",children:["Use this x-intercept as the next guess and repeat:",jsxRuntimeExports.jsx("div",{className:"my-2 p-3 rounded text-center text-[1.1em]",style:{background:"var(--bg-secondary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-formula display-mode","data-latex":"x_{n+1} = x_n - \\frac{f(x_n)}{f'(x_n)}"})})]})]})]})]})}function mathJsToLatex(a){if(!a)return"";let s=a;if(s=s.trim(),s.startsWith("(")&&s.endsWith(")")){let o=0,c=!0;for(let h=0;h<s.length-1;h++)if(s[h]==="("?o++:s[h]===")"&&o--,o===0&&h<s.length-1){c=!1;break}c&&(s=s.slice(1,-1))}return s=s.replace(/\(([^()]+)\)\s*\/\s*\(([^()]+)\)/g,"\\frac{$1}{$2}"),s=s.replace(/([a-zA-Z0-9]+)\s*\/\s*([a-zA-Z0-9]+)/g,"\\frac{$1}{$2}"),s=s.replace(/sqrt\(([^)]+)\)/g,"\\sqrt{$1}"),s=s.replace(/\^(\d+)/g,"^{$1}"),s=s.replace(/\^\(([^)]+)\)/g,"^{$1}"),s=s.replace(/\s*\*\s*/g," \\cdot "),s=s.replace(/log10\(([^)]+)\)/g,"\\log_{10}($1)"),s=s.replace(/log\(([^)]+)\)/g,"\\ln($1)"),s=s.replace(/sin\(/g,"\\sin("),s=s.replace(/cos\(/g,"\\cos("),s=s.replace(/tan\(/g,"\\tan("),s=s.replace(/exp\(/g,"\\exp("),s=s.replace(/\bpi\b/g,"\\pi"),s=s.replace(/\s+/g," ").trim(),s}function IterationList({iterations:a,selectedElement:s,visibleIterations:o,onToggleIteration:c,latexExpression:h}){const d=reactExports.useRef(null);reactExports.useEffect(()=>{if(!d.current||!s)return;d.current.querySelectorAll(".katex-render").forEach(j=>{const Xt=j.getAttribute("data-latex");if(Xt)try{katex$1.render(Xt,j,{throwOnError:!1,displayMode:!1})}catch{j.textContent=Xt}})},[s,h]);const b="flex flex-col gap-3 p-4 rounded-lg max-h-[calc(100vh-60px)] overflow-y-auto transition-colors duration-300",_={background:"var(--bg-secondary)",border:"1px solid var(--border-primary)"};return!a||a.length===0?jsxRuntimeExports.jsxs("div",{className:b,style:_,children:[jsxRuntimeExports.jsx("h3",{className:"m-0 text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Iterations"}),jsxRuntimeExports.jsx("p",{className:"m-0 text-sm italic",style:{color:"var(--text-muted)"},children:'Enter a function and click "Graph Function" to begin.'})]}):jsxRuntimeExports.jsxs("div",{className:b,style:_,children:[jsxRuntimeExports.jsx("h3",{className:"m-0 text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Iterations"}),jsxRuntimeExports.jsx("p",{className:"m-0 mb-2 text-[11px] italic",style:{color:"var(--text-muted)"},children:"Click a row to toggle visibility"}),s&&jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-md",ref:d,style:{background:"var(--info-bg)",border:"1px solid var(--info-border)"},children:[jsxRuntimeExports.jsx("h4",{className:"m-0 mb-2 text-sm font-semibold",style:{color:"var(--info-text)"},children:s.type==="function"?"Function":s.name}),s.type==="function"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`f(x) = ${h||""}`})}),jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`f'(x) = ${mathJsToLatex(s.derivative)}`})})]}),s.type==="point"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`x = ${s.x.toFixed(8)}`})}),jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`f(x) = ${s.fx.toFixed(8)}`})}),jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`f'(x) = ${s.fPrimeX.toFixed(8)}`})})]}),s.type==="tangent"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`\\text{Slope} = ${s.slope.toFixed(6)}`})}),jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`\\text{y-intercept} = ${s.intercept.toFixed(6)}`})}),jsxRuntimeExports.jsx("p",{className:"m-0 text-[13px] font-mono",style:{color:"var(--accent-primary)"},children:jsxRuntimeExports.jsx("span",{className:"katex-render","data-latex":`\\text{x-intercept} = ${s.xIntercept.toFixed(8)}`})})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full border-collapse text-[11px]",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-2 py-1.5 text-left font-semibold border-b-2",style:{color:"var(--text-secondary)",background:"var(--bg-tertiary)",borderColor:"var(--border-primary)"}}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1.5 text-left font-semibold border-b-2",style:{color:"var(--text-secondary)",background:"var(--bg-tertiary)",borderColor:"var(--border-primary)"},children:"n"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1.5 text-left font-semibold border-b-2",style:{color:"var(--text-secondary)",background:"var(--bg-tertiary)",borderColor:"var(--border-primary)"},children:"x"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1.5 text-left font-semibold border-b-2",style:{color:"var(--text-secondary)",background:"var(--bg-tertiary)",borderColor:"var(--border-primary)"},children:"f(x)"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1.5 text-left font-semibold border-b-2",style:{color:"var(--text-secondary)",background:"var(--bg-tertiary)",borderColor:"var(--border-primary)"},children:"f'(x)"})]})}),jsxRuntimeExports.jsx("tbody",{children:a.map(($,j)=>{var Jr;const Xt=(o==null?void 0:o.has(j))??!0,Lt=((Jr=a[0])==null?void 0:Jr.fx)??1,fr=getIterationColor($.fx,Lt);return jsxRuntimeExports.jsxs("tr",{className:`cursor-pointer transition-colors duration-150 hover:opacity-80 ${Xt?"":"opacity-50"}`,style:{background:Xt?"transparent":"var(--bg-tertiary)"},onClick:()=>c==null?void 0:c(j),children:[jsxRuntimeExports.jsx("td",{className:"w-6 text-center p-1 border-b",style:{borderColor:"var(--border-primary)"},children:jsxRuntimeExports.jsx("span",{className:`text-xs ${Xt?"opacity-70":"opacity-30"}`,children:Xt?"":""})}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 border-b",style:{borderColor:"var(--border-primary)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 font-semibold",style:{color:"var(--text-secondary)"},children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:fr}}),j]})}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 border-b font-mono",style:{borderColor:"var(--border-primary)",color:"var(--text-tertiary)"},children:formatNumber($.x)}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 border-b font-mono",style:{borderColor:"var(--border-primary)",color:"var(--text-tertiary)"},children:formatNumber($.fx)}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 border-b font-mono",style:{borderColor:"var(--border-primary)",color:"var(--text-tertiary)"},children:formatNumber($.fPrimeX)})]},j)})})]})}),a.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-1.5 p-2.5 rounded-md",style:{background:"var(--bg-tertiary)"},children:[jsxRuntimeExports.jsx("h4",{className:"m-0 mb-2 text-[11px] font-semibold",style:{color:"var(--text-secondary)"},children:"Convergence Progress"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1.5",children:a.map(($,j)=>{var Jr;const Xt=((Jr=a[0])==null?void 0:Jr.fx)??1,fr=getConvergenceProgress($.fx,Xt)*100;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[jsxRuntimeExports.jsxs("span",{className:"w-[50px] flex-shrink-0",style:{color:"var(--text-tertiary)"},children:["n = ",j]}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-2 rounded overflow-hidden",style:{background:"var(--border-primary)"},children:jsxRuntimeExports.jsx("div",{className:"h-full rounded transition-all duration-300",style:{width:`${fr}%`,backgroundColor:getIterationColor($.fx,Xt)}})}),jsxRuntimeExports.jsxs("span",{className:"w-[100px] flex-shrink-0 text-right font-mono",style:{color:"var(--text-muted)"},children:["|f(x)| = ",Math.abs($.fx).toExponential(2)]})]},j)})})]})]})}function formatNumber(a){return isFinite(a)?Math.abs(a)<1e-4||Math.abs(a)>1e4?a.toExponential(2):a.toFixed(4):"undefined"}function App(){const[a,s]=reactExports.useState(""),[o,c]=reactExports.useState(""),[h,d]=reactExports.useState([]),[b,_]=reactExports.useState(!1),[$,j]=reactExports.useState(!1),[Xt,Lt]=reactExports.useState(null),[fr,Jr]=reactExports.useState(""),[Js,qs]=reactExports.useState(3),[zo,js]=reactExports.useState(new Set),eu=reactExports.useRef(null),Oo=reactExports.useCallback((e1,r1,a1)=>{try{Jr(""),Lt(null);const i1=createNewtonSolver(e1);i1.setInitialGuess(a1),eu.current=i1,s(e1),c(r1),qs(a1),d(i1.getIterations()),js(new Set([0])),_(!0),j(!1)}catch(i1){Jr(i1.message)}},[]),tu=reactExports.useCallback(()=>{if(eu.current)try{Jr(""),eu.current.nextIteration();const e1=eu.current.getIterations();d(e1),js(r1=>new Set([...r1,e1.length-1])),eu.current.hasConverged()&&j(!0)}catch(e1){Jr(e1.message)}},[]),Bo=reactExports.useCallback(()=>{eu.current=null,s(""),c(""),d([]),js(new Set),_(!1),j(!1),Lt(null),Jr("")},[]),vu=reactExports.useCallback(e1=>{js(r1=>{const a1=new Set(r1);return a1.has(e1)?a1.delete(e1):a1.add(e1),a1})},[]),t1=reactExports.useCallback(e1=>{Lt(e1)},[]);return jsxRuntimeExports.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{background:"var(--bg-primary)"},children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[320px_1fr_350px] 2xl:grid-cols-[320px_1fr_350px] gap-5 p-5 min-h-screen max-w-[1800px] mx-auto max-xl:grid-cols-1 max-xl:grid-rows-[auto_1fr_auto]",children:[jsxRuntimeExports.jsxs("aside",{className:"flex flex-col gap-4 max-xl:order-1",children:[jsxRuntimeExports.jsx(Controls,{onGraphFunction:Oo,onNextIteration:tu,onReset:Bo,isActive:b,currentIteration:h.length-1,hasConverged:$,currentInitialGuess:Js}),fr&&jsxRuntimeExports.jsx("div",{className:"px-4 py-3 rounded-lg text-sm",style:{background:"var(--error-bg)",border:"1px solid var(--error-border)",color:"var(--error-text)"},children:fr})]}),jsxRuntimeExports.jsx("main",{className:"flex flex-col min-h-[600px] max-xl:order-2 max-xl:min-h-[500px]",children:jsxRuntimeExports.jsx(Graph,{functionExpression:a,solver:eu.current,iterations:h,visibleIterations:zo,onElementClick:t1})}),jsxRuntimeExports.jsx("aside",{className:"flex flex-col max-xl:order-3",children:jsxRuntimeExports.jsx(IterationList,{iterations:h,selectedElement:Xt,visibleIterations:zo,onToggleIteration:vu,latexExpression:o})})]})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
